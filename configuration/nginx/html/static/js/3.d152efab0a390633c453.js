webpackJsonp([3],{"1wu6":function(e,t,a){"use strict";(function(e){var n=a("mvHQ"),s=a.n(n),i=a("woOf"),r=a.n(i),o=a("3zDK"),l=a("nQqC"),c=a("PO8r"),d=a("CTnB"),u=a("c2Ch"),m=a("MJuv"),g=a("ktr9"),h=(a.n(g),a("czjk")),p=a("trid"),f=a("7rnj"),v=a("flqW"),y=a("Lfyu"),_=a("/LWt"),b=a("eM/O"),$=a("nq2H"),w=a("T18w"),A=a("Umvz"),k=a("WMwB"),j=(a("j+56"),a("Mjwz")),x=a("zOBh"),D=a("ItK/"),T=a("kZ1N"),P=a("8cSO"),C=a("TDso"),M=a("lVyT"),S=a("2YZ9"),F=a("beD/"),B=a("nxYM");t.a={components:{Menu:c.a,Project:d.a,basecard:l.a},name:"BuildingManagement",data:function(){return{aoagw:this.$store.state.functionParts.aoagw,smoke:this.$store.state.functionParts.smoke,alertor:this.$store.state.functionParts.alertor,blesensor:this.$store.state.functionParts.blesensor,camera:this.$store.state.functionParts.camera,isCollapse:!1,activeMenu:"0",i8n:this.$store.state.i18n,currentPoint:[],featureModify:"",vedio:!1,vedio2:!1,major:"",minor:"",contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,superId:this.$store.state.userInfo.superid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,delprio:this.$store.state.userInfo.delprio,intoProjectid:this.$store.state.intoProjectid,intoProjectType:this.$store.state.intoProjectType,loading:!1,trancheShow:!1,tableData:[],buildid:"",currentProjectid:{groundid:""},TrancheDatas:{beaconids:"",tranche:"",alias:"",alarmid:""},currentPage2:1,totalArrange:0,dobuleClick:!1,arrange:!1,caecelClock:!1,clock:!1,searchArrangeList:{devtype:"",projectid:"",inallot:"",inuse:"",workstate:"",page:"",count:"",deveui:"",alias:""},searchDeveui:"",searchAlias:"",searchInuse:"",mapLength:"",iconSrc:"",inuseType:[{index:1,value:this.$t("floormanagement.value1")},{index:2,value:this.$t("floormanagement.value2")}],groundid:"",selectArrangeData:"",arrangeData:[],showTable:!1,editFeatures:!1,setAreas:!1,setAreaDeveui:"",radio:"",oldRadio:"",areaInfo:"",setAreasUrl1:"../../../static/1.jpg",setAreasUrl2:"../../../static/2.jpg",setAreasUrl3:"../../../static/3.jpg",setAreasUrl4:"../../../static/4.jpg",setAreasUrl6:"../../../static/6.jpg",setAreasUrl7:"../../../static/7.jpg",setAreasUrl8:"../../../static/8.jpg",setAreasUrl9:"../../../static/9.jpg",setAreasUrl11:"../../../static/11.jpg",setAreasUrl12:"../../../static/12.jpg",setAreasUrl13:"../../../static/13.jpg",setAreasUrl14:"../../../static/14.jpg",setAreasUrl15:"../../../static/15.jpg",arrangeFeatures:"",editFeatureData:{deveui:"",alias:"",major:"",minor:"",devtype:""},editFeatureInfo:"",menu_overlay:"",imgUrl:"",map:null,mapName:"allmap",vectorLayer:null,source:null,feature:null,showOther:!1,show1:!1,showBeacon:!1,clearBeaconList:!1,adjoinBeaconShow:!1,adjoinBeacon:[],adjoinBeaconAlias:"",adjoinBeaconData:{beaconid:"",nearbeacons:""},adjoinBeaconInfo:"",adjoinBeaconDataList:"",positionTrancheList:[],alarmTrancheList:[],setTrancheList:[],setAlarmTrancheList:[],addTranchePosition:!1,addTrancheAlarm:!1,projectTable:[],imageWidth:"",imageHeight:"",sub:!1,polygonOnce:!1,currentAdj:"",pointList:[],currentFeature:[],pointLists:"",changeMajor:!0,changeMinor:!0,showOption:1==this.$store.state.intoProjectType?1:5,showOptionName:1==this.$store.state.intoProjectType?this.$t("change.showAliases"):this.$t("change.showAlarm"),showOptions:!1,isShowLines:!1,select:null,reallength:0,length:0,realwidth:0,width:0,showDistance:!1,distanceData:{x:0,y:0}}},watch:{polygonOnce:function(e){e&&(this.closeSub(),this.polygonOnce=!1)},activeMenu:function(e){this.showOptions=0==e},"$i18n.locale":function(){this.i8n=this.$store.state.i18n,r()(this.$data.inuseType,this.$options.data.call(this).inuseType),r()(this.$data.showOptionName,this.$options.data.call(this).showOptionName)}},methods:{showOptionsTrue:function(e){switch(this.showOption=Number(e),this.showOption){case 1:this.showOptionName=this.$t("change.showAliases");break;case 2:this.showOptionName=this.$t("change.showMajor16");break;case 3:this.showOptionName=this.$t("change.showMajor10");break;case 4:this.showOptionName=this.$t("change.showPosition");break;case 5:this.showOptionName=this.$t("change.showAlarm")}this.clearArranges()},changeBase:function(e){"Major"==e.label?this.changMajor():"Minor"==e.label&&this.changMinor()},changMajor:function(){this.changeMajor?this.arrangeData.forEach(function(e){e.major=parseInt(e.major,16)}):this.arrangeData.forEach(function(e){switch(e.major=e.major.toString(16),e.major.length){case 1:e.major="000"+e.major;break;case 2:e.major="00"+e.major;break;case 3:e.major="0"+e.major}}),this.changeMajor=!this.changeMajor},changMinor:function(){this.changeMinor?this.arrangeData.forEach(function(e){e.minor=parseInt(e.minor,16)}):this.arrangeData.forEach(function(e){switch(e.minor=e.minor.toString(16),e.minor.length){case 1:e.minor="000"+e.minor;break;case 2:e.minor="00"+e.minor;break;case 3:e.minor="0"+e.minor}}),this.changeMinor=!this.changeMinor},removeGroundDevs:function(){var e=this;this.$confirm(this.$t("floormanagement.RemoveGroundDevText"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var t={groundid:e.groundid,projectid:e.intoProjectid,type:e.intoProjectType};Object(u._130)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("terminal.tet28"),type:"success"}),e.clearArranges()):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})})},setTable:function(){var e=this;e.showTable=!e.showTable,e.showTable?(e.$refs.mapContent.style.width="70%",e.$refs.tableContent.style.width="30%",e.isCollapse=!1):(e.$refs.mapContent.style.width="95%",e.$refs.tableContent.style.width="5%",e.isCollapse=!0),e.arrange&&setTimeout(function(){e.map.updateSize()},100)},menuClick:function(e,t){var a=this;a.activeMenu=e;var n={devtype:e,tenantid:5==a.contrForPrionum?a.superId:a.tenantid_A,page:t,count:20,projectid:a.intoProjectid,inuse:a.searchInuse};switch(e){case"0":a.changeMajor=!0,a.changeMinor=!0,2==a.$store.state.intoProjectType?a.getGatewayPos(a.intoProjectid,1):1==a.$store.state.intoProjectType&&a.getBeaconPos(a.intoProjectid,1);break;case"1":case"2":case"3":case"5":Object(u._46)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code&&(a.arrangeData=e.data.list,a.totalArrange=e.data.size)})}},closeVedio:function(e){var t=document.getElementById(e);t.pause(),t.currentTime=0},selectSingleClick:function(){var e=this,t=e.map.getLayers().getArray(),a=[];t.forEach(function(e,a){0==e.values_.wrapX&&t.splice(a,1)}),t.map(function(e,t){var n=e.getSource();n.getFeatures&&!n.getFeatures()[0].values_.name&&a.push(e)});var n=new j.c({fill:new F.b({color:"rgba(255, 255, 255, 0.3)"}),stroke:new F.d({color:"#ffcc33",width:2}),image:new x.a({anchor:[.5,1],src:"../../../static/beacon_sos.png",scale:1})}),s=new C.c({style:n,hitTolerance:1,condition:m.e});e.map.addInteraction(s),s.on("select",function(t){if(window.event.ctrlKey){if(0==s.getFeatures().array_.length)return;s.getFeatures().array_[0].values_.alias||s.getFeatures().array_[0].setStyle(new j.c({fill:new F.b({color:"rgba(255, 255, 255, 0.3)"}),stroke:new F.d({color:"#ccc",width:2}),image:new F.a({radius:7,fill:new F.b({color:"red"})})}))}else e.currentFeature=s.getFeatures().array_,0!=t.selected.length&&(e.currentFeature.forEach(function(e,a){if(t.selected[0]&&t.selected[0].ol_uid===e.ol_uid){var n=void 0;n=e.values_.alias?new x.a({anchor:[.5,1],src:0==a?"../../../static/beacon_sos.png":"../../../static/beacon_green.png",scale:1}):new F.a({radius:7,fill:new F.b({color:0==a?"red":"green"})}),e.setStyle(new j.c({fill:new F.b({color:"rgba(255, 255, 255, 0.3)"}),stroke:new F.d({color:"#ccc",width:2}),image:n}))}}),e.currentAdj=t.selected[0])})},resetNear:function(){for(var e=this.map.getLayers().getArray(),t=0;t<e.length;t++){var a=e[t];a.getSource().image_||(this.map.removeLayer(a),t--)}this.addSubPolygon(),1==this.intoProjectType?this.getArrangeBeaconPos(this.intoProjectid):this.getArrangeGatewayPos(this.intoProjectid)},setAdj:function(){var e=this;if(0!==e.currentFeature.length)if(1!==e.currentFeature.length){for(var t=0;t<e.currentFeature.length;t++)if(e.currentFeature[t].values_.devtype)return void e.$message({message:e.$t("floormanagement.selectNonOther"),type:"warning"});var a=e.currentFeature[0],n=e.currentFeature.map(function(e,t){if(t>0)return e.values_.id||e.values_.deveui}).slice(1).join(","),s={groundid:e.groundid,pointid:a.values_.id||a.values_.deveui,pointidNears:n};Object(u.s)(s,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("floormanagement.Layoutsuccessful"),type:"success"}),e.resetNear(),e.currentFeature=[],e.select.getFeatures().array_=[]):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else e.$message({message:e.$t("floormanagement.adjacentpoint"),type:"warning"});else e.$message({message:e.$t("floormanagement.Pleaseselectpoint"),type:"warning"})},closeSub:function(){this.sub=!1,Object(B.b)(this.mapClickEvent),this.map.removeInteraction(this.draw),this.map.removeInteraction(this.snap),this.mapClick()},setSub:function(){var e=this;this.currentAdj="",Object(B.b)(this.mapClickEvent),this.sub=!0;var t=this,a=void 0;this.mapClickEvent=this.map.on("click",function(n){if(t.mapLength){a=n.coordinate;var s=new j.c({image:new x.a({anchor:[.5,.5],src:"../../../static/near.png",scale:.3})}),i=new $.a({point:!0,geometry:new w.a([a[0],a[1]])}),r=new k.a({features:[i]}),o=new A.a({source:r,style:s,zIndex:1e4});e.map.addLayer(o);var l={groundid:e.groundid,nodeX:a[0],nodeY:a[1]};Object(u.r)(l,e.tenantkey_A,e.tenantid_A,e.userName).then(function(e){1001==e.code?(t.$message({message:t.$t("floormanagement.Layoutpointsuccess"),type:"success"}),i.set("id",e.data)):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else t.$message({message:t.$t("floormanagement.Noactualsize"),type:"warning"})})},projectList:function(){var e=this;return this.projectTable.filter(function(t){return t.id!==e.groundid})},getProjectLists:function(){var e=this,t={buildid:this.buildid};Object(u._23)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code&&(e.projectTable=t.data.list)})},editTranche:function(e){var t=this;if(this.currentProjectid.groundid="",this.getProjectLists(),"position"==e){var a={site:!0,groundid:this.groundid,projectid:5==t.contrForPrionum?t.$store.state.projectid:t.$store.state.intoProjectid};Object(u._98)(a,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){if(1001==e.code){t.positionTrancheList=e.data;for(var a=0;a<t.positionTrancheList.length;a++)1==t.positionTrancheList[a].fremove?t.positionTrancheList[a].fremove=!0:t.positionTrancheList[a].fremove=!1;t.addTranchePosition=!0}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else if("alarm"==e){var n={site:!1,groundid:this.groundid,projectid:5==t.contrForPrionum?t.$store.state.projectid:t.$store.state.intoProjectid};Object(u._98)(n,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(t.alarmTrancheList=e.data,t.addTrancheAlarm=!0):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}},addTrancheRowPosition:function(){this.positionTrancheList.push({})},addTrancheRowAlarm:function(){this.alarmTrancheList.push({})},importTranchePosition:function(e){if(e){var t=this,a={site:!0,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid,groundid:this.currentProjectid.groundid};Object(u._98)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){if(e.data.length>0){var a=e.data;t.positionTrancheList.forEach(function(e){a.forEach(function(t,n){t.name==e.name&&a.splice(n,1)})}),a.forEach(function(e){t.positionTrancheList.push({name:e.name,id:""})});for(var n=0;n<t.positionTrancheList.length;n++)1==t.positionTrancheList[n].fremove?t.positionTrancheList[n].fremove=!0:t.positionTrancheList[n].fremove=!1}}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}},importTrancheAlarm:function(e){if(e){var t=this,a={site:!1,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid,groundid:this.currentProjectid.groundid};Object(u._98)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){if(e.data.length>0){var a=e.data;t.alarmTrancheList.forEach(function(e){a.forEach(function(t,n){t.name==e.name&&a.splice(n,1)})}),a.forEach(function(e){t.alarmTrancheList.push({name:e.name,id:""})})}}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}},deleTrancheRowPosition:function(e,t,a){var n=this;if(5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio)n.$message({message:n.$t("warning.permissiondelete"),type:"warning"});else if(a){var i={site:!0,id:a,name:t,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid};Object(u._7)(s()(i),this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?n.positionTrancheList.splice(e,1):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else this.positionTrancheList.splice(e,1)},deleTrancheRowAlarm:function(e,t,a){var n=this;if(5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio)n.$message({message:n.$t("warning.permissiondelete"),type:"warning"});else if(a){var i={site:!1,id:a,name:t,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid};Object(u._7)(s()(i),this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?n.alarmTrancheList.splice(e,1):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else this.alarmTrancheList.splice(e,1)},addTrancheRowTruePosition:function(){var t=this,a=!1,n=!1,i={};if(e.each(this.positionTrancheList,function(e,t){void 0===t.id&&(t.id=""),t.name||(a=!0),i[t.name]&&(n=!0),i[t.name]=!0}),a)t.$message({message:t.$t("floormanagement.tippp4"),type:"error"});else if(n)t.$message({message:t.$t("floormanagement.tippp5"),type:"error"});else{for(var r={site:!0,tranches:JSON.parse(s()(this.positionTrancheList)),groundid:t.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid},o=0;o<r.tranches.length;o++)!0===r.tranches[o].fremove||1===r.tranches[o].fremove?r.tranches[o].fremove=1:r.tranches[o].fremove=2;r.tranches=s()(r.tranches),Object(u.x)(r,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.$message({message:t.$t("Building.Setsuccessfully"),type:"success"}),t.addTranchePosition=!1,a=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a=!1)})}},addTrancheRowTrueAlarm:function(){var t=this,a=!1,n=!1,i={};if(e.each(this.alarmTrancheList,function(e,t){void 0===t.id&&(t.id=""),t.name||(a=!0),i[t.name]&&(n=!0),i[t.name]=!0}),a)t.$message({message:t.$t("floormanagement.tippp4"),type:"error"});else if(n)t.$message({message:t.$t("floormanagement.tippp5"),type:"error"});else{for(var r={site:!1,tranches:JSON.parse(s()(this.alarmTrancheList)),groundid:t.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid},o=0;o<r.tranches.length;o++)r.tranches[o].fremove=2;r.tranches=s()(r.tranches),Object(u.x)(r,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.$message({message:t.$t("Building.Setsuccessfully"),type:"success"}),t.addTrancheAlarm=!1,a=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a=!1)})}},addTrancheRowCancelPosition:function(){this.addTranchePosition=!1,this.positionTrancheList=[]},addTrancheRowCancelAlarm:function(){this.addTrancheAlarm=!1,this.alarmTrancheList=[]},mapInit:function(e,t,a){var n=this;this.imageWidth=e,this.imageHeight=t;var s=this,i=[0,0,e,t],r=new f.a({code:"xkcd-image",units:"pixels",extent:i});setTimeout(function(){n.$refs.map.style.width="100%",n.$refs.map.style.height="90%",s.select=new C.c,s.select.on("select",function(e){if(window.event&&window.event.ctrlKey){if(0==s.select.getFeatures().array_.length)return;s.select.getFeatures().array_[0].values_.alias||s.select.getFeatures().array_[0].setStyle(new j.c({fill:new F.b({color:"rgba(255, 255, 255, 0.3)"}),stroke:new F.d({color:"#ccc",width:2}),image:new F.a({radius:7,fill:new F.b({color:"red"})})}))}else s.currentFeature=s.select.getFeatures().array_,0!=e.selected.length&&(s.currentFeature.forEach(function(t,a){if(e.selected[0]&&e.selected[0].ol_uid===t.ol_uid){var n=void 0;n=t.values_.alias?new x.a({anchor:[.5,1],src:0==a?"../../../static/beacon_sos.png":"../../../static/beacon_green.png",scale:1}):new F.a({radius:7,fill:new F.b({color:0==a?"red":"green"})}),t.setStyle(new j.c({fill:new F.b({color:"rgba(255, 255, 255, 0.3)"}),stroke:new F.d({color:"#ccc",width:2}),image:n}))}}),s.currentAdj=e.selected[0])});var e=new C.d({features:s.select.getFeatures()}),t=[],o="",l=[],c=[],d="",m=0,g=0;e.on("translatestart",function(e){var a=s.map.getLayers().getArray(),n=e.features.array_[0].values_;n.xy&&(m=e.coordinate[0]-n.xy[0],g=e.coordinate[1]-n.xy[1]),d=e.features.array_[0],o=n;var i=[];a.forEach(function(e){!e.getSource().image_&&e.getSource().getFeatures()[0].values_&&(n.id&&(e.getSource().getFeatures()[0].values_.perid!==n.id&&e.getSource().getFeatures()[0].values_.subid!==n.id||i.push(e)),n.deveui&&(e.getSource().getFeatures()[0].values_.perid!==n.deveui&&e.getSource().getFeatures()[0].values_.subid!==n.deveui||i.push(e)))}),t=e.mapBrowserEvent.coordinate,(l=i).forEach(function(e,t){var a=e.getSource().getFeatures()[0].getGeometry().flatCoordinates;a[0]===o.xy[0]&&a[1]===o.xy[1]&&c.push([0,0,a[2],a[3]]),a[2]===o.xy[0]&&a[3]===o.xy[1]&&c.push([a[0],a[1],0,0])})}),e.on("translating",function(e){l.forEach(function(t,a){t.getSource().getFeatures()[0].getGeometry().setCoordinates([[0==c[a][0]?e.mapBrowserEvent.coordinate[0]-m:c[a][0],0==c[a][1]?e.mapBrowserEvent.coordinate[1]-g:c[a][1]],[0==c[a][2]?e.mapBrowserEvent.coordinate[0]-m:c[a][2],0==c[a][3]?e.mapBrowserEvent.coordinate[1]-g:c[a][3]]])})}),e.on("translateend",function(e){if(t[0]===e.mapBrowserEvent.coordinate[0]&&t[1]===e.mapBrowserEvent.coordinate[1])return t=[],l=[],o="",void(c=[]);var a=s.$loading({lock:!0,text:"loading",spinner:"el-icon-loading",background:"rgba(256, 256, 256, 0.7)"}),n=0;if(e.mapBrowserEvent.coordinate[0]-m>s.imageWidth||e.mapBrowserEvent.coordinate[0]-m<0||e.mapBrowserEvent.coordinate[1]-g<0||e.mapBrowserEvent.coordinate[1]-g>s.imageHeight)return s.$message({message:s.$t("floormanagement.Beyondthemap"),type:"warning"}),s.clearArranges(),void setTimeout(function(){a.close()},500);(e.features.array_[0].values_&&e.features.array_[0].values_.point||e.features.array_[0].values_.features&&e.features.array_[0].values_.features[0].values_&&e.features.array_[0].values_.features[0].values_.point)&&function t(){n+=1;var i=!0,r={groundid:s.groundid,pointid:e.features.array_[0].values_.id||e.features.array_[0].values_.features[0].values_.id,nodeX:e.mapBrowserEvent.coordinate[0]-m,nodeY:e.mapBrowserEvent.coordinate[1]-g};setTimeout(function(){i&&(s.$message({message:s.$t("floormanagement.Requesttimedout"),type:"warning"}),s.clearArranges(),a.close())},5e3),Object(u._179)(r,s.tenantkey_A,s.tenantid_A,s.userName).then(function(r){1001==r.code?(i=!1,n=0,s.$message({message:s.$t("Building.Layoutsuccessful"),type:"success"}),d.set("xy",[e.mapBrowserEvent.coordinate[0]-m,e.mapBrowserEvent.coordinate[1]-g]),setTimeout(function(){a.close()},500)):n<=3?t():(s.$message({message:"zh"==s.$store.state.i18n?r.msg:r.enMsg,type:"error"}),s.clearArranges(),a.close())})}(),(e.features.array_[0].values_&&e.features.array_[0].values_.alias||e.features.array_[0].values_.features&&e.features.array_[0].values_.features[0].values_&&e.features.array_[0].values_.features[0].values_.alias)&&function t(){var i=!0;n+=1;var r={projectid:s.intoProjectid,groundid:s.groundid,deveui:e.features.array_[0].values_.deveui||e.features.array_[0].values_.features[0].values_.deveui,longi:e.mapBrowserEvent.coordinate[0]-m,lati:e.mapBrowserEvent.coordinate[1]-g,falg:!0};setTimeout(function(){i&&(s.$message({message:s.$t("floormanagement.Requesttimedout"),type:"warning"}),s.clearArranges(),a.close())},5e3),e.features.array_[0].values_.devtype?(r.devtype=e.features.array_[0].values_.devtype,Object(u._165)(r,s.tenantkey_A,s.tenantid_A,s.userName).then(function(r){1001==r.code?(i=!1,setTimeout(function(){a.close()},500),n=0,s.$message({message:s.$t("Building.Layoutsuccessful"),type:"success"}),d.set("xy",[e.mapBrowserEvent.coordinate[0]-m,e.mapBrowserEvent.coordinate[1]-g])):n<=3?t():(a.close(),s.$message({message:"zh"==s.$store.state.i18n?r.msg:r.enMsg,type:"error"}),s.clearArranges())})):1==s.intoProjectType?Object(u._143)(r,s.tenantkey_A,s.tenantid_A,s.userName).then(function(r){1001==r.code?(i=!1,setTimeout(function(){a.close()},500),n=0,s.$message({message:s.$t("Building.Layoutsuccessful"),type:"success"}),d.set("xy",[e.mapBrowserEvent.coordinate[0]-m,e.mapBrowserEvent.coordinate[1]-g])):n<=3?t():(a.close(),s.$message({message:"zh"==s.$store.state.i18n?r.msg:r.enMsg,type:"error"}),s.clearArranges())}):Object(u._158)(r,s.tenantkey_A,s.tenantid_A,s.userName).then(function(r){1001==r.code?(i=!1,setTimeout(function(){a.close()},500),n=0,s.$message({message:s.$t("Building.Layoutsuccessful"),type:"success"}),d.set("xy",[e.mapBrowserEvent.coordinate[0]-m,e.mapBrowserEvent.coordinate[1]-g])):n<=3?t():(a.close(),s.$message({message:"zh"==s.$store.state.i18n?r.msg:r.enMsg,type:"error"}),s.clearArranges())})}(),t=[],l=[],o="",c=[],d.set("xy",[e.mapBrowserEvent.coordinate[0],e.mapBrowserEvent.coordinate[1]])});var f=new b.a({layers:[new h.a({source:new v.a({url:s.imgUrl,projection:r,imageExtent:i})})],collapsed:!1,view:new y.a({projection:r,zoom:1})}),$=void 0,w=void 0,A=void 0;a.nums>200?(w=5,$=4):(w=4,$=3),a.reallength>60||a.realwidth>60?A=!0:(A=!1,$=1),n.map=new p.a({controls:A?Object(b.b)().extend([f]):null,interactions:Object(C.e)().extend([s.select,e]),layers:[new h.a({source:new v.a({url:s.imgUrl,projection:r,imageExtent:i})})],target:n.mapName,view:new y.a({projection:r,center:Object(_.y)(i),zoom:w,maxZoom:6,minZoom:$})}),n.mapClick(),n.mapRightClick(s.map),n.addSubPolygon(),2==n.$store.state.intoProjectType?(s.getGatewayPos(a.projectid,1),s.getArrangeGatewayPos(a.projectid)):1==s.$store.state.intoProjectType&&(s.getBeaconPos(a.projectid,1),s.getArrangeBeaconPos(a.projectid))},0)},mapClick:function(){var e,t,a=this,n=this;this.mapClickEvent=this.map.on("click",function(s){a.map.forEachFeatureAtPixel(s.pixel,function(e){return s.coordinate,e});if(null==n.selectArrangeData||""==n.selectArrangeData);else{if(e=s.coordinate[0],t=s.coordinate[1],e>n.imageWidth||e<0||t<0||t>n.imageHeight)return void n.$message({message:n.$t("floormanagement.deploymap"),type:"warning"});var i;"0"!=n.activeMenu?(i={x:e,y:t,xy:[e,t],alias:n.selectArrangeData.alias,deveui:n.selectArrangeData.deveui,major:n.selectArrangeData.major,minor:n.selectArrangeData.minor,devtype:n.selectArrangeData.devtype,tranche:n.selectArrangeData.tranche,alarmid:n.selectArrangeData.alarmid,alarmname:n.selectArrangeData.alarmname},"5"==n.activeMenu&&(i.major=n.selectArrangeData.mode,i.minor=n.selectArrangeData.scheme)):1==n.$store.state.intoProjectType?i={x:e,y:t,xy:[e,t],alias:n.selectArrangeData.alias,deveui:n.selectArrangeData.beaconid,major:n.selectArrangeData.major,minor:n.selectArrangeData.minor,type:n.selectArrangeData.type,tranche:n.selectArrangeData.tranche,alarmid:n.selectArrangeData.alarmid,alarmname:n.selectArrangeData.alarmname,clockin:n.selectArrangeData.clockin,warning:"",anglimit:n.selectArrangeData.anglimit,nearbeacons:""}:2==n.$store.state.intoProjectType&&(i={x:e,y:t,alias:n.selectArrangeData.alias,deveui:n.selectArrangeData.deveui,major:n.selectArrangeData.major,minor:n.selectArrangeData.minor,type:"",tranche:n.selectArrangeData.tranche,alarmid:n.selectArrangeData.alarmid,alarmname:n.selectArrangeData.alarmname,clockin:n.selectArrangeData.clockin,warning:n.selectArrangeData.warning,anglimit:n.selectArrangeData.anglimit,nearbeacons:""}),n.addIconMarker(n.map,i)}})},addIconMarkers:function(e,t){var a=t.alias;switch(this.showOption){case 1:a=t.alias;break;case 2:a=t.major+"/"+t.minor;break;case 3:a=parseInt(t.major,16)+"/"+parseInt(t.minor,16)}if(t.devtype){a=t.alias;var n=new $.a({x:t.lastx,y:t.lasty,xy:[t.lastx,t.lasty],alias:t.alias,deveui:t.deveui,devtype:t.devtype,major:t.mode,minor:t.scheme,tranche:t.tranche||"",alarmid:t.alarmid||"",alarmname:t.alarmname||"",geometry:new w.a([t.lastx,t.lasty])})}else if(1==this.$store.state.intoProjectType)n=new $.a({x:t.longi,y:t.lati,xy:[t.longi,t.lati],alias:t.alias,deveui:t.beaconid,major:t.major,minor:t.minor,type:t.type,clockin:t.clockin,anglimit:t.anglimit,tranche:t.tranche||"",warning:"",nearbeacons:"",alarmid:t.alarmid||"",alarmname:t.alarmname||"",geometry:new w.a([t.longi,t.lati])});else if(2==this.$store.state.intoProjectType){a=t.alias;n=new $.a({x:t.lastx,y:t.lasty,xy:[t.lastx,t.lasty],alias:t.alias,deveui:t.deveui,major:t.major,minor:t.minor,type:"",clockin:t.clockin,anglimit:t.anglimit,tranche:t.tranche||"",warning:t.warning,nearbeacons:"",alarmid:t.alarmid||"",alarmname:t.alarmname||"",geometry:new w.a([t.lastx,t.lasty])})}var s,i=new k.a({features:[n]}),r=t.alarmname?"/"+t.alarmname:"";if(4==this.showOption&&(r=t.tranche?"/"+t.tranche:""),t.devtype){var o=void 0;switch(t.devtype){case 1:o="../../../static/aoa.png";break;case 2:o="../../../static/smoke.png";break;case 3:o="../../../static/alarm.png";break;case 5:o="../../../static/camera.png"}s=new j.c({image:new x.a({anchor:[.5,1],src:o,scale:1}),text:new S.a({text:a+r,font:"14px font-size",fill:new F.b({color:"blue"}),offsetY:10})})}else 1==this.$store.state.intoProjectType?s=2==t.type?new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/beacon_sos.png",scale:1}),text:new S.a({text:a+r,font:"14px font-size",fill:new F.b({color:"blue"}),offsetY:10})}):1==t.type&&1==t.clockin||2==this.$store.state.intoProjectType&&1==t.clockin?new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/clock.png",scale:1}),text:new S.a({text:a+r,font:"14px font-size",fill:new F.b({color:"blue"}),offsetY:10})}):new j.c({image:new x.a({anchor:[.5,1],src:this.iconSrc,scale:1}),text:new S.a({text:a+r,font:"14px font-size",fill:new F.b({color:"blue"}),offsetY:10})}):2==this.$store.state.intoProjectType&&(s=2==t.warning?new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/gateway_sos.png",scale:1}),text:new S.a({text:a+r,font:"14px font-size",fill:new F.b({color:"blue"}),offsetY:10})}):1==t.clockin?new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/clock.png",scale:1}),text:new S.a({text:a+r,font:"14px font-size",fill:new F.b({color:"blue"}),offsetY:10})}):new j.c({image:new x.a({anchor:[.5,1],src:this.iconSrc,scale:1}),text:new S.a({text:a+r,font:"14px font-size",fill:new F.b({color:"blue"}),offsetY:10})}));var l=new A.a({source:i,style:s,zIndex:100});e.addLayer(l)},addSubPolygon:function(){var e=this,t=this,a={groundid:this.groundid};Object(u._76)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(a){if(1001===a.code){if(t.pointLists=a.data,0==t.isShowLines)return;var n=a.data,s=new j.c({image:new x.a({anchor:[.5,.5],src:"../../../static/near.png",scale:.3})}),i=[];if(n.forEach(function(t){if(!isNaN(Number(t.pointid))&&8!=t.pointid.length){var a=new $.a({id:t.pointid,geometry:new w.a([t.nodeX,t.nodeY]),point:!0,xy:[t.nodeX,t.nodeY]}),n=new k.a({features:[a]}),r=new A.a({source:n,style:s,zIndex:1e4});e.map.addLayer(r)}0!==t.list.length&&t.list.forEach(function(e){i.push([e,t])})}),!t.isShowLines)return;var r=!1,o=[];i.forEach(function(e){0===o.length?o.push(e):(o.forEach(function(t){e[0].pointid===t[1].pointid&&e[1].pointid===t[0].pointid&&(r=!0)}),r||o.push(e),r=!1)});var l=[];o.forEach(function(t,a){var n=[t[0].nodeX,t[0].nodeY],s=[t[1].nodeX,t[1].nodeY],i=new M.a([n,s]),r=new $.a({geometry:i,name:"Line",perid:t[0].pointid,subid:t[1].pointid,per:[t[0].nodeX,t[0].nodeY],sub:[t[1].nodeX,t[1].nodeY]});l.push(r);var o=new P.a({features:[r]}),c=new D.b({source:o,style:new F.e({stroke:new F.d({width:2,color:"#ccc"})})});e.map.addLayer(c)})}})},addIconMarker:function(e,t){var a=this;if(void 0==t.alias||void 0==t.deveui)a.$message({message:a.$t("floormanagement.unuseddevice"),type:"warning"});else{var n=t.alias,s=t.alarmname?"/"+t.alarmname:"";switch(4==a.showOption&&(s=t.tranche?"/"+t.tranche:""),a.showOption){case 1:n=t.alias;break;case 2:n=t.major+"/"+t.minor;break;case 3:n=parseInt(t.major,16)+"/"+parseInt(t.minor,16)}t.devtype&&(n=t.alias);var i,r=new $.a({xy:[t.x,t.y],x:t.x,y:t.y,alias:t.alias,deveui:t.deveui,major:t.major,minor:t.minor,anglimit:t.anglimit,type:t.type||"",devtype:t.devtype||"",clockin:t.clockin||"",tranche:t.tranche||"",alarmid:t.alarmid||"",alarmname:t.alarmname||"",warning:t.warning||"",nearbeacons:"",geometry:new w.a([t.x,t.y])}),o=new k.a({features:[r]});if("0"!=a.activeMenu){var l=void 0;switch(a.activeMenu){case"1":l="../../../static/aoa.png";break;case"2":l="../../../static/smoke.png";break;case"3":l="../../../static/alarm.png";break;case"5":l="../../../static/camera.png"}i=new j.c({image:new x.a({anchor:[.5,1],src:l,scale:1}),text:new S.a({text:n,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})})}else i=2==t.type?new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/beacon_sos.png",scale:1}),text:new S.a({text:n+s,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})}):new j.c({image:new x.a({anchor:[.5,1],src:a.iconSrc,scale:1}),text:new S.a({text:n+s,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})});var c=new A.a({source:o,style:i,zIndex:100});e.addLayer(c);var d={projectid:a.intoProjectid,groundid:a.groundid,deveui:t.deveui,longi:t.x,lati:t.y,falg:!0};if("0"!=a.activeMenu){var m={projectid:a.intoProjectid,groundid:a.groundid,deveui:t.deveui,devtype:a.activeMenu,longi:t.x,lati:t.y,falg:!0};Object(u._165)(m,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("Building.Layoutsuccessful"),type:"success"}),a.totalArrange-=1,0==a.arrangeData.length&&a.currentPage2>1&&a.menuClick(a.activeMenu,a.currentPage2-1)):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else 1==a.intoProjectType?Object(u._143)(d,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("Building.Layoutsuccessful"),type:"success"}),a.totalArrange-=1,0==a.arrangeData.length&&a.currentPage2>1&&a.getBeaconPos(a.intoProjectid,a.currentPage2-1)):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):Object(u._158)(d,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("Building.Layoutsuccessful"),type:"success"}),a.totalArrange-=1,0==a.arrangeData.length&&a.currentPage2>1&&a.getGatewayPos(a.intoProjectid,a.currentPage2-1)):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})});if(1==this.$store.state.intoProjectType){var g=void 0;if("0"!=a.activeMenu)for(var h=0;h<a.arrangeData.length;h++)a.selectArrangeData.deveui==a.arrangeData[h].deveui&&(g=h);else for(var p=0;p<a.arrangeData.length;p++)a.selectArrangeData.beaconid==a.arrangeData[p].beaconid&&(g=p);a.arrangeData.splice(g,1),a.selectArrangeData=""}else if(2==this.$store.state.intoProjectType){for(var f=void 0,v=0;v<a.arrangeData.length;v++)a.selectArrangeData.deveui==a.arrangeData[v].deveui&&(f=v);a.arrangeData.splice(f,1),a.selectArrangeData=""}}},modifyFeature:function(e,t,a){var n=this,s=[],i=n.map.getLayers().getArray();i.forEach(function(e,t){0==e.values_.wrapX&&i.splice(t,1)}),i.forEach(function(e,t){e.getSource().getFeatures&&!e.getSource().getFeatures()[0].values_.name&&s.push(e)});var r=new C.d({layers:s,source:t});e.addInteraction(r);var o="",l="",c=[],d=[],m="",g=0,h=0;r.on("translatestart",function(e){var t=n.map.getLayers().getArray(),a=e.features.array_[0].values_;a.xy&&(g=e.coordinate[0]-a.xy[0],h=e.coordinate[1]-a.xy[1]),m=e.features.array_[0],l=a;var s=[];t.forEach(function(e){!e.getSource().image_&&e.getSource().getFeatures()[0].values_&&(a.id&&(e.getSource().getFeatures()[0].values_.perid!==a.id&&e.getSource().getFeatures()[0].values_.subid!==a.id||s.push(e)),a.deveui&&(e.getSource().getFeatures()[0].values_.perid!==a.deveui&&e.getSource().getFeatures()[0].values_.subid!==a.deveui||s.push(e)))}),o=e.mapBrowserEvent.coordinate[0],(c=s).forEach(function(e,t){var a=e.getSource().getFeatures()[0].getGeometry().flatCoordinates;a[0]===l.xy[0]&&a[1]===l.xy[1]&&d.push([0,0,a[2],a[3]]),a[2]===l.xy[0]&&a[3]===l.xy[1]&&d.push([a[0],a[1],0,0])})}),r.on("translating",function(e){c.forEach(function(t,a){t.getSource().getFeatures()[0].getGeometry().setCoordinates([[0==d[a][0]?e.mapBrowserEvent.coordinate[0]-g:d[a][0],0==d[a][1]?e.mapBrowserEvent.coordinate[1]-h:d[a][1]],[0==d[a][2]?e.mapBrowserEvent.coordinate[0]-g:d[a][2],0==d[a][3]?e.mapBrowserEvent.coordinate[1]-h:d[a][3]]])})}),r.on("translateend",function(e){if(o===e.mapBrowserEvent.coordinate[0])return o="",c=[],l="",void(d=[]);var t=n.$loading({lock:!0,text:"loading",spinner:"el-icon-loading",background:"rgba(256, 256, 256, 0.7)"}),a=0;if(e.mapBrowserEvent.coordinate[0]-g>n.imageWidth||e.mapBrowserEvent.coordinate[0]-g<0||e.mapBrowserEvent.coordinate[1]-h<0||e.mapBrowserEvent.coordinate[1]-h>n.imageHeight)return n.$message({message:n.$t("floormanagement.Beyondthemap"),type:"warning"}),n.clearArranges(),void setTimeout(function(){t.close()},500);(e.features.array_[0].values_&&e.features.array_[0].values_.point||e.features.array_[0].values_.features&&e.features.array_[0].values_.features[0].values_&&e.features.array_[0].values_.features[0].values_.point)&&function s(){a+=1;var i=!0,r={groundid:n.groundid,pointid:e.features.array_[0].values_.id||e.features.array_[0].values_.features[0].values_.id,nodeX:e.mapBrowserEvent.coordinate[0]-g,nodeY:e.mapBrowserEvent.coordinate[1]-h};setTimeout(function(){i&&(n.$message({message:n.$t("floormanagement.Requesttimedout"),type:"warning"}),n.clearArranges(),t.close())},5e3),Object(u._179)(r,n.tenantkey_A,n.tenantid_A,n.userName).then(function(r){1001==r.code?(i=!1,a=0,n.$message({message:n.$t("Building.Layoutsuccessful"),type:"success"}),m.set("xy",[e.mapBrowserEvent.coordinate[0]-g,e.mapBrowserEvent.coordinate[1]-h]),setTimeout(function(){t.close()},500)):a<=3?s():(n.$message({message:"zh"==n.$store.state.i18n?r.msg:r.enMsg,type:"error"}),n.clearArranges(),t.close())})}(),(e.features.array_[0].values_&&e.features.array_[0].values_.alias||e.features.array_[0].values_.features&&e.features.array_[0].values_.features[0].values_&&e.features.array_[0].values_.features[0].values_.alias)&&function s(){var i=!0;a+=1;var r={projectid:n.intoProjectid,groundid:n.groundid,deveui:e.features.array_[0].values_.deveui||e.features.array_[0].values_.features[0].values_.deveui,longi:e.mapBrowserEvent.coordinate[0]-g,lati:e.mapBrowserEvent.coordinate[1]-h,falg:!0};setTimeout(function(){i&&(n.$message({message:n.$t("floormanagement.Requesttimedout"),type:"warning"}),n.clearArranges(),t.close())},5e3),e.features.array_[0].values_.devtype?(r.devtype=e.features.array_[0].values_.devtype,Object(u._165)(r,n.tenantkey_A,n.tenantid_A,n.userName).then(function(r){1001==r.code?(i=!1,setTimeout(function(){t.close()},500),a=0,n.$message({message:n.$t("Building.Layoutsuccessful"),type:"success"}),m.set("xy",[e.mapBrowserEvent.coordinate[0]-g,e.mapBrowserEvent.coordinate[1]-h])):a<=3?s():(t.close(),n.$message({message:"zh"==n.$store.state.i18n?r.msg:r.enMsg,type:"error"}),n.clearArranges())})):1==n.intoProjectType?Object(u._143)(r,n.tenantkey_A,n.tenantid_A,n.userName).then(function(r){1001==r.code?(i=!1,setTimeout(function(){t.close()},500),a=0,n.$message({message:n.$t("Building.Layoutsuccessful"),type:"success"}),m.set("xy",[e.mapBrowserEvent.coordinate[0]-g,e.mapBrowserEvent.coordinate[1]-h])):a<=3?s():(t.close(),n.$message({message:"zh"==n.$store.state.i18n?r.msg:r.enMsg,type:"error"}),n.clearArranges())}):Object(u._158)(r,n.tenantkey_A,n.tenantid_A,n.userName).then(function(r){1001==r.code?(i=!1,setTimeout(function(){t.close()},500),a=0,n.$message({message:n.$t("Building.Layoutsuccessful"),type:"success"}),m.set("xy",[e.mapBrowserEvent.coordinate[0]-g,e.mapBrowserEvent.coordinate[1]-h])):a<=3?s():(t.close(),n.$message({message:"zh"==n.$store.state.i18n?r.msg:r.enMsg,type:"error"}),n.clearArranges())})}(),o="",c=[],l="",d=[],m.set("xy",[e.mapBrowserEvent.coordinate[0],e.mapBrowserEvent.coordinate[1]])})},delNear:function(e,t){var a=this;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?a.$message({message:a.$t("warning.permissiondelete"),type:"warning"}):(this.removeClick(),Object(u.W)({groundid:a.groundid,pointid:e.values_.id},a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){if(1001==e.code){a.$message({message:a.$t("buildingmanagement.deletesuccess"),type:"success"});for(var n=a.map.getLayers().getArray(),s=0;s<n.length;s++){var i=n[s];i.getSource().image_||(a.map.removeLayer(i),s--)}a.addSubPolygon(),a.getArrangeBeaconPos(a.intoProjectid)}else a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"});t.setPosition(void 0)}))},showLines:function(){if(this.isShowLines){this.isShowLines=!this.isShowLines;for(var e=this.map.getLayers().getArray(),t=0;t<e.length;t++){var a=e[t].getSource();a.getFeatures&&(a.getFeatures()[0].values_.name||a.getFeatures()[0].values_.id)&&(this.map.removeLayer(e[t]),t--)}}else{this.isShowLines=!this.isShowLines;for(var n=this.map.getLayers().getArray(),s=0;s<n.length;s++){var i=n[s].getSource();i.getFeatures&&i.getFeatures()[0].values_.id&&(this.map.removeLayer(n[s]),s--)}this.addSubPolygon()}},mapRightClick:function(t){var a=this,n=new T.a({element:this.$refs.contextmenu_container,positioning:"center-center"}),s=new T.a({element:this.$refs.polygonMenu,positioning:"center-center"});t.addOverlay(n),t.addOverlay(s),e(t.getViewport()).on("contextmenu",function(i){i.preventDefault();var r=t.getEventPixel(i.originalEvent),o=t.forEachFeatureAtPixel(r,function(e){return e});if(o){var l=t.getEventCoordinate(i.originalEvent);o.values_.point&&(s.setPosition(l),e("#polygonMenu-closer").on("click",function(e){a.removeClick(),e.preventDefault(),s.setPosition(void 0)}),e("#delPolygon").click(function(){a.delPolygon(o,s)}),e("#editNear").click(function(){a.delNear(o,s)})),o.values_.x&&o.values_.alias&&(1==o.values_.type&&2==o.values_.clockin||1==o.values_.warning&&2==o.values_.clockin?(a.clock=!0,a.caecelClock=!1):1==o.values_.type&&1==o.values_.clockin||1==o.values_.warning&&1==o.values_.clockin?(a.caecelClock=!0,a.clock=!1):(a.caecelClock=!1,a.clock=!1),""!=o.values_.tranche&&null!=o.values_.tranche||o.values_.devtype?(a.show1=!1,a.showBeacon=!0):(a.show1=!0,a.showBeacon=!1),o.values_.devtype?a.showOther=!0:a.showOther=!1,a.pointLists.forEach(function(e){e.pointid==o.values_.deveui&&(e.list.length>0?a.clearBeaconList=!0:a.clearBeaconList=!1)}),n.setPosition(l),e("#popup-closer").on("click",function(e){a.removeClick(),e.preventDefault(),n.setPosition(void 0)}),e("#del").click(function(){a.delFeature(o,n)}),e("#calculatingDistance").click(function(){a.calculatingDistance(o,n)}),e("#edit").click(function(){a.editFeature(o,n)}),e("#cancelNearList").click(function(){a.cancelNearList(o,n)}),e("#setClock").click(function(){a.setClock(o,n)}),e("#cancelClock").click(function(){a.cancelClock(o,n)}),e("#setTranche").click(function(){a.updateTranche(o,n)}),e("#setAdjoinBeacon").click(function(){a.setAdjoinBeacon(o,n)}),e("#setArea").click(function(){a.setArea(o,n)}))}})},removeClick:function(){e("#edit").unbind("click"),e("#del").unbind("click"),e("#setClock").unbind("click"),e("#setArea").unbind("setArea"),e("#cancelClock").unbind("click"),e("#cancelNearList").unbind("click"),e("#setTranche").unbind("click"),e("#setAdjoinBeacon").unbind("click"),e("#editNear").unbind("click"),e("#calculatingDistance").off("calculatingDistance")},updateTrancheCancel:function(){this.trancheShow=!1,this.menu_overlay.setPosition(void 0)},closeTranche:function(){this.updateTrancheCancel(),this.removeClick()},updateTrancheTrue:function(e){var t=this.temE,a=this;this.loading=!0;var n=t.values_.alias;switch(a.showOption){case 1:n=t.values_.alias;break;case 2:n=t.values_.major+"/"+t.values_.minor;break;case 3:n=parseInt(t.values_.major,16)+"/"+parseInt(t.values_.minor,16)}if(a.TrancheDatas.devtype){var s={tranche:a.TrancheDatas.tranche,alarmid:a.TrancheDatas.alarmid,deveui:a.TrancheDatas.beaconids};Object(u._167)(s,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){if(1001==e.code){var s=void 0;switch(a.TrancheDatas.devtype){case 1:s="../../../static/aoa.png";break;case 2:s="../../../static/smoke.png";break;case 3:s="../../../static/alarm.png";break;case 5:s="../../../static/camera.png"}t.values_.tranche=a.TrancheDatas.tranche,t.values_.alarmid=a.TrancheDatas.alarmid;var i="",r="";t.values_.tranche&&(i=a.setTrancheList.find(function(e){return e.name==a.TrancheDatas.tranche}))&&(t.values_.tranche=i.name),t.values_.alarmid&&(r=a.setAlarmTrancheList.find(function(e){return e.id==a.TrancheDatas.alarmid}))&&(t.values_.alarmname=r.name);var o=r.name?"/"+r.name:"";4==a.showOption&&(o=i.name?"/"+i.name:""),t.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:s,scale:1}),text:new S.a({text:n+o,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),a.$message({message:a.$t("beacon.assinsuccess"),type:"success"}),a.loading=!1,a.menu_overlay.setPosition(void 0)}a.trancheShow=!1})}else{var i={groundid:a.groundid,tranche:a.TrancheDatas.tranche,alarmid:a.TrancheDatas.alarmid,deveui:a.TrancheDatas.beaconids};1==a.$store.state.intoProjectType&&Object(u._144)(i,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){if(1001==e.code){t.values_.tranche=a.TrancheDatas.tranche,t.values_.alarmid=a.TrancheDatas.alarmid;var s="",i="";t.values_.tranche&&(s=a.setTrancheList.find(function(e){return e.name==a.TrancheDatas.tranche}))&&(t.values_.tranche=s.name),t.values_.alarmid&&(i=a.setAlarmTrancheList.find(function(e){return e.id==a.TrancheDatas.alarmid}))&&(t.values_.alarmname=i.name);var r=i.name?"/"+i.name:"";4==a.showOption&&(r=s.name?"/"+s.name:""),1==a.intoProjectType?t.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:1==t.values_.clockin?"../../../static/clock.png":1==t.values_.type?"../../../static/beacon.png":"../../../static/sos.png",scale:1}),text:new S.a({text:n+r,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})):2==a.intoProjectType&&(n=t.values_.alias,t.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:1==t.values_.clockin?"../../../static/clock.png":2==t.values_.warning?"../../../static/gateway_sos.png":"../../../static/gateway.png",scale:1}),text:new S.a({text:n+r,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})}))),a.$message({message:a.$t("beacon.assinsuccess"),type:"success"}),a.loading=!1,a.menu_overlay.setPosition(void 0)}else a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a.loading=!1;a.trancheShow=!1}),2==a.$store.state.intoProjectType&&(n=t.values_.alias,Object(u._162)(i,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){if(1001==e.code){t.values_.tranche=a.TrancheDatas.tranche,t.values_.alarmid=a.TrancheDatas.alarmid;var s="",i="";t.values_.tranche&&(s=a.setTrancheList.find(function(e){return e.name==a.TrancheDatas.tranche}))&&(t.values_.tranche=s.name),t.values_.alarmid&&(i=a.setAlarmTrancheList.find(function(e){return e.id==a.TrancheDatas.alarmid}))&&(t.values_.alarmname=i.name);var r=i.name?"/"+i.name:"";4==a.showOption&&(r=s.name?"/"+s.name:""),t.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:1==t.values_.clockin?"../../../static/clock.png":"../../../static/beacon.png",scale:1}),text:new S.a({text:n+r,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),a.$message({message:a.$t("beacon.assinsuccess"),type:"success"}),a.loading=!1,a.menu_overlay.setPosition(void 0)}else a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a.loading=!1;a.trancheShow=!1}))}},removeTranche:function(e,t){var a=this;this.removeClick(),this.menu_overlay=t;var n=this;this.$confirm(n.$t("floormanagement.releasezone"),n.$t("Building.tips"),{confirmButtonText:n.$t("terminal.confirm"),cancelButtonText:n.$t("terminal.cancel"),type:"warning"}).then(function(){var t=void 0;switch(n.showOption){case 1:t=e.values_.alias;break;case 2:t=e.values_.major+"/"+e.values_.minor;break;case 3:t=parseInt(e.values_.major,16)+"/"+parseInt(e.values_.minor,16)}if(e.values_.devtype){var s={deveui:e.values_.deveui,tranchid:"",alarmid:""};Object(u._167)(s,n.tenantkey_A,n.tenantid_A,n.userName).then(function(a){if(1001==a.code){var s=void 0;switch(e.values_.devtype){case 1:s="../../../static/aoa.png";break;case 2:s="../../../static/smoke.png";break;case 3:s="../../../static/alarm.png";break;case 5:s="../../../static/camera.png"}e.values_.tranche="",e.values_.tranchid="",e.values_.alarmid="",e.values_.alarmname="",e.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:s,scale:1}),text:new S.a({text:t,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),n.$message({message:n.$t("floormanagement.Releasesucceeded"),type:"success"}),n.loading=!1,n.menu_overlay.setPosition(void 0)}})}else{var i={deveui:e.values_.deveui,tranchid:""};1==n.$store.state.intoProjectType&&Object(u._144)(i,n.tenantkey_A,n.tenantid_A,n.userName).then(function(a){1001==a.code?(e.values_.tranche="",e.values_.tranchid="",e.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:1==e.values_.clockin?"../../../static/clock.png":1==e.values_.type?"../../../static/beacon.png":"../../../static/sos.png",scale:1}),text:new S.a({text:t,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),n.$message({message:n.$t("floormanagement.Releasesucceeded"),type:"success"}),n.loading=!1,n.menu_overlay.setPosition(void 0)):(n.$message({message:"zh"==n.$store.state.i18n?a.msg:a.enMsg,type:"error"}),n.loading=!1)}),2==a.$store.state.intoProjectType&&Object(u._162)(i,a.tenantkey_A,a.tenantid_A,a.userName).then(function(a){1001==a.code?(e.values_.tranche="",e.values_.tranchid="",e.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:1==e.values_.clockin?"../../../static/clock.png":"../../../static/beacon.png",scale:1}),text:new S.a({text:t,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),n.$message({message:n.$t("floormanagement.Releasesucceeded"),type:"success"}),n.loading=!1,n.menu_overlay.setPosition(void 0)):(n.$message({message:"zh"==n.$store.state.i18n?a.msg:a.enMsg,type:"error"}),n.loading=!1)})}}).catch(function(){a.menu_overlay.setPosition(void 0),a.removeClick()})},updateTranche:function(e,t){this.removeClick(),this.menu_overlay=t;var a=this;this.setTrancheList=[],this.setAlarmTrancheList=[],e.values_.tranche?this.TrancheDatas.tranche=e.values_.tranche:this.TrancheDatas.tranche="",e.values_.alarmid?this.TrancheDatas.alarmid=e.values_.alarmid:this.TrancheDatas.alarmid="",this.TrancheDatas.alias=e.values_.alias,this.temE=e,this.TrancheDatas.beaconids=e.values_.deveui,this.TrancheDatas.devtype=e.values_.devtype;var n={site:!0,groundid:this.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid},s={site:!1,groundid:this.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid};Object(u._98)(n,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(a.setTrancheList=e.data,a.trancheShow=!0):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})}),Object(u._98)(s,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(a.setAlarmTrancheList=e.data,a.trancheShow=!0):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},setClock:function(e,t){var a=this;this.removeClick(),this.menu_overlay=t;var n=this;this.$confirm(n.$t("floormanagement.tippp"),n.$t("Building.tips"),{confirmButtonText:n.$t("terminal.confirm"),cancelButtonText:n.$t("terminal.cancel"),type:"warning"}).then(function(){var t={deveui:e.values_.deveui,clockin:1},s=e.values_.alias,i=e.values_.alarmname?"/"+e.values_.alarmname:"";switch(4==n.showOption&&(i=e.values_.tranche?"/"+e.values_.tranche:""),n.showOption){case 1:s=e.values_.alias;break;case 2:s=e.values_.major+"/"+e.values_.minor;break;case 3:s=parseInt(e.values_.major,16)+"/"+parseInt(e.values_.minor,16)}1==a.$store.state.intoProjectType&&Object(u._148)(t,a.tenantkey_A,a.tenantid_A,a.userName).then(function(t){1001==t.code?(e.values_.clockin=1,e.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/clock.png",scale:1}),text:new S.a({text:s+i,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),n.$message({message:n.$t("floormanagement.tippp1"),type:"success"}),n.menu_overlay.setPosition(void 0)):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})}),2==a.$store.state.intoProjectType&&Object(u._161)(t,a.tenantkey_A,a.tenantid_A,a.userName).then(function(t){1001==t.code?(e.values_.clockin=1,e.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/clock.png",scale:1}),text:new S.a({text:s+i,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),n.$message({message:n.$t("floormanagement.tippp1"),type:"success"}),n.menu_overlay.setPosition(void 0)):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}).catch(function(){a.menu_overlay.setPosition(void 0),a.removeClick()})},cancelNearList:function(e,t){var a=this,n=this;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?n.$message({message:n.$t("warning.permissiondelete"),type:"warning"}):(n.removeClick(),n.menu_overlay=t,n.$confirm(n.$t("floormanagement.adjacencyrelationship"),n.$t("Building.tips"),{confirmButtonText:n.$t("terminal.confirm"),cancelButtonText:n.$t("terminal.cancel"),type:"warning"}).then(function(){Object(u.W)({groundid:n.groundid,pointid:e.values_.deveui},n.tenantkey_A,n.tenantid_A,n.userName).then(function(e){if(1001==e.code){n.$message({message:n.$t("beacon.deletesuccess"),type:"success"});for(var a=n.map.getLayers().getArray(),s=0;s<a.length;s++){var i=a[s];i.getSource().image_||(n.map.removeLayer(i),s--)}n.addSubPolygon(),n.getArrangeBeaconPos(n.intoProjectid)}else n.$message({message:"zh"==n.$store.state.i18n?e.msg:e.enMsg,type:"error"});t.setPosition(void 0)})}).catch(function(){a.menu_overlay.setPosition(void 0),a.removeClick()}))},cancelClock:function(e,t){var a=this;this.removeClick(),this.menu_overlay=t;var n=this;n.$confirm(n.$t("floormanagement.tippp2"),n.$t("Building.tips"),{confirmButtonText:n.$t("terminal.confirm"),cancelButtonText:n.$t("terminal.cancel"),type:"warning"}).then(function(){var t={deveui:e.values_.deveui,clockin:2},s=e.values_.alias,i=e.values_.alarmname?"/"+e.values_.alarmname:"";switch(4==n.showOption&&(i=e.values_.tranche?"/"+e.values_.tranche:""),n.showOption){case 1:s=e.values_.alias;break;case 2:s=e.values_.major+"/"+e.values_.minor;break;case 3:s=parseInt(e.values_.major,16)+"/"+parseInt(e.values_.minor,16)}1==a.$store.state.intoProjectType&&Object(u._148)(t,a.tenantkey_A,a.tenantid_A,a.userName).then(function(t){1001==t.code?(e.values_.clockin=2,e.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static//beacon.png",scale:1}),text:new S.a({text:s+i,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),n.$message({message:n.$t("floormanagement.tippp3"),type:"success"}),n.menu_overlay.setPosition(void 0)):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})}),2==a.$store.state.intoProjectType&&Object(u._161)(t,a.tenantkey_A,a.tenantid_A,a.userName).then(function(t){1001==t.code?(e.values_.clockin=2,e.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/gateway.png",scale:1}),text:new S.a({text:s+i,font:"12px font-size",fill:new F.b({color:"blue"}),offsetY:10})})),n.$message({message:n.$t("floormanagement.tippp3"),type:"success"}),n.menu_overlay.setPosition(void 0)):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}).catch(function(){a.menu_overlay.setPosition(void 0),a.removeClick()})},setArea:function(e,t){this.removeClick(),this.menu_overlay=t,this.radio=e.values_.anglimit,this.oldRadio=e.values_.anglimit,this.setAreaDeveui=e.values_.deveui,this.areaInfo=e,this.setAreas=!0},setAreaCancel:function(){this.setAreas=!1,this.menu_overlay.setPosition(void 0),this.removeClick()},setAreaTrue:function(){var e=this;if(this.radio!=this.oldRadio){var t={deveui:this.setAreaDeveui,anglimit:this.radio};1==this.intoProjectType?Object(u._138)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.areaInfo.values_.anglimit=e.radio,e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.setAreas=!1):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})}):2==this.intoProjectType&&Object(u._160)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.areaInfo.values_.anglimit=e.radio,e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.setAreas=!1):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else e.setAreas=!1},setAdjoinBeacon:function(e,t){this.removeClick();var a=this;this.adjoinBeaconInfo=e,this.menu_overlay=t;var n={deveui:e.values_.deveui,fortype:"2",inallot:"1",projectid:this.intoProjectid};Object(u._21)(n,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(a.adjoinBeaconInfo.values_.nearbeacons=e.data.list[0].nearbeacons,a.adjoinBeaconShow=!0):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},openAdjoinBeacon:function(){var e=this,t=this;this.adjoinBeaconData={beaconid:"",nearbeacons:""},this.adjoinBeaconAlias="";var a={projectid:this.intoProjectid,tranche:this.adjoinBeaconInfo.values_.tranche,type:this.adjoinBeaconInfo.values_.type,inallot:1,inuse:1,workstate:1,groundid:t.groundid};Object(u._22)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(a){if(1001==a.code){t.adjoinBeaconDataList=a.data;for(var n=0;n<t.adjoinBeaconDataList.length;n++)t.adjoinBeaconDataList[n].beaconid==t.adjoinBeaconInfo.values_.deveui&&t.adjoinBeaconDataList.splice(n,1);t.adjoinBeaconAlias=t.adjoinBeaconInfo.values_.alias,t.adjoinBeaconData.beaconid=t.adjoinBeaconInfo.values_.deveui;var s=[];if(t.adjoinBeaconInfo.values_.nearbeacons)t.adjoinBeaconInfo.values_.nearbeacons.split(",").forEach(function(e){s.push(e)});else e.userid=[];s.length>0&&s.forEach(function(e){t.adjoinBeacon.push(e)}),t.menu_overlay.setPosition(void 0)}else t.$message({message:"zh"==t.$store.state.i18n?a.msg:a.enMsg,type:"error"})})},setAdjoinBeaconTrue:function(){var e=this;if(this.loading=!0,this.adjoinBeacon.length>0){for(var t=0;t<this.adjoinBeacon.length;t++)e.adjoinBeaconData.nearbeacons+=this.adjoinBeacon[t]+",";e.adjoinBeaconData.nearbeacons=e.adjoinBeaconData.nearbeacons.slice(0,e.adjoinBeaconData.nearbeacons.length-1)}else e.adjoinBeaconData.nearbeacons="";Object(u._176)(this.adjoinBeaconData,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(e.adjoinBeaconInfo.values_.nearbeacons=e.adjoinBeaconData.nearbeacons,e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.loading=!1,e.adjoinBeaconShow=!1):(e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"}),e.loading=!1,e.adjoinBeaconShow=!1)})},updateAdjoinBeaconCancel:function(){this.adjoinBeaconData={beaconid:"",nearbeacons:""},this.adjoinBeacon=[],this.adjoinBeaconShow=!1,this.menu_overlay.setPosition(void 0)},closeAdjoinBeacon:function(){this.updateAdjoinBeaconCancel(),this.removeClick()},delFeatureAndLayer:function(e){e.getSource().getFeatures().forEach(function(t){e.getSource().removeFeature(t)}),this.map.removeLayer(e)},delPolygon:function(e,t){var a=this;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?a.$message({message:a.$t("warning.permissiondelete"),type:"warning"}):a.$confirm(a.$t("floormanagement.Aredelete"),a.$t("Building.tips"),{confirmButtonText:a.$t("terminal.confirm"),cancelButtonText:a.$t("terminal.cancel"),type:"warning"}).then(function(){var n=a.map.getLayers().getArray();if(e.values_.id){for(var i=1;i<n.length;i++)(n[i].getSource().getFeatures()[0].values_.adj||n[i].getSource().getFeatures()[0].values_.point)&&s()(e.values_.id)==(s()(n[i].getSource().getFeatures()[0].values_.id)||s()(n[i].getSource().getFeatures()[1].values_.id))&&a.delFeatureAndLayer(n[i]);var r={pointid:e.values_.id};return Object(u.V)(r,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("buildingmanagement.deletesuccess"),type:"success"}),a.resetNear()):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})}),a.currentAdj="",void t.setPosition(void 0)}for(var o=a.map.getLayers().getArray(),l=1;l<o.length;l++)o[l].getSource().getFeatures()[0].values_.point&&a.currentAdj.ol_uid==o[l].getSource().getFeatures()[0].ol_uid&&a.delFeatureAndLayer(o[l]);return a.currentAdj="",void t.setPosition(void 0)}).catch(function(){t.setPosition(void 0),a.removeClick()})},delFeature:function(e,t){var a=this;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?a.$message({message:a.$t("warning.permissiondelete"),type:"warning"}):a.$confirm(a.$t("floormanagement.Aredelete"),a.$t("Building.tips"),{confirmButtonText:a.$t("terminal.confirm"),cancelButtonText:a.$t("terminal.cancel"),type:"warning"}).then(function(){for(var n=void 0,s=a.map.getLayers().getArray(),i=1;i<s.length;i++)if(e.values_.x==s[i].getSource().getFeatures()[0].values_.x&&e.values_.y==s[i].getSource().getFeatures()[0].values_.y){n=i;break}var r={projectid:a.intoProjectid,groundid:a.groundid,deveui:e.values_.deveui,longi:e.values_.x,lati:e.values_.y,falg:!1};e.values_.devtype?(r.devtype=e.values_.devtype,Object(u._165)(r,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("buildingmanagement.deletesuccess"),type:"success"}),s[n].getSource().getFeatures().forEach(function(e){s[n].getSource().removeFeature(e)}),t.setPosition(void 0),a.map.removeLayer(s[n]),a.activeMenu&&a.menuClick(a.activeMenu,a.currentPage2)):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})):1==a.intoProjectType?Object(u._143)(r,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("buildingmanagement.deletesuccess"),type:"success"}),s[n].getSource().getFeatures().forEach(function(e){s[n].getSource().removeFeature(e)}),t.setPosition(void 0),a.map.removeLayer(s[n]),a.getBeaconPos(a.intoProjectid,a.currentPage2),a.resetNear()):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):Object(u._158)(r,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("buildingmanagement.deletesuccess"),type:"success"}),s[n].getSource().getFeatures().forEach(function(e){s[n].getSource().removeFeature(e)}),t.setPosition(void 0),a.map.removeLayer(s[n]),a.getGatewayPos(a.intoProjectid,a.currentPage2),a.resetNear()):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}).catch(function(){a.menu_overlay.setPosition(void 0),a.removeClick()})},calculatingDistance:function(e,t){this.removeClick(),this.distanceData.x=Math.round(this.reallength/this.length*e.values_.xy[0]*100),this.distanceData.y=Math.round(this.realwidth/this.width*e.values_.xy[1]*100),this.showDistance=!0},editFeature:function(e,t){this.removeClick(),this.menu_overlay=t,this.editFeatureData.alias=e.values_.alias,this.editFeatureData.deveui=e.values_.deveui,this.editFeatureData.tranche=e.values_.tranche,this.editFeatureData.x=e.values_.x,this.editFeatureData.y=e.values_.y,this.editFeatureData.major=e.values_.major,this.editFeatureData.minor=e.values_.minor,this.editFeatureData.devtype=e.values_.devtype,this.editFeatureData.alarmname=e.values_.alarmname,this.editFeatureInfo=e,this.editFeatures=!0},editFeatureCancel:function(){this.editFeatures=!1,this.menu_overlay.setPosition(void 0),this.removeClick()},closeEdit:function(){this.editFeatureCancel(),this.removeClick()},editFeaturesTrue:function(){var e=this;this.editFeatures=!1,this.editFeatureInfo.values_.alias=this.editFeatureData.alias,this.editFeatureInfo.values_.deveui=this.editFeatureData.deveui,this.editFeatureInfo.values_.devtype=this.editFeatureData.devtype,this.editFeatureInfo.x=this.editFeatureData.x,this.editFeatureInfo.y=this.editFeatureData.y;var t=e.editFeatureData.alias;switch(e.showOption){case 1:t=e.editFeatureData.alias;break;case 2:t=e.editFeatureData.major+"/"+e.editFeatureData.minor;break;case 3:t=parseInt(e.editFeatureData.major,16)+"/"+parseInt(e.editFeatureData.minor,16)}var a=this.editFeatureData.alarmname?"/"+this.editFeatureData.alarmname:"";if(4==e.showOption&&(a=this.editFeatureData.tranche?"/"+this.editFeatureData.tranche:""),this.editFeatureData.devtype){var n=void 0;switch(e.editFeatureData.devtype){case 1:n="../../../static/aoa.png";break;case 2:n="../../../static/smoke.png";break;case 3:n="../../../static/alarm.png";break;case 5:n="../../../static/camera.png"}e.editFeatureInfo.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:n,scale:1}),text:new S.a({text:t+a,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})}));var s={deveui:this.editFeatureData.deveui,alias:this.editFeatureData.alias};Object(u._163)(s,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("mapmanagement.editsuccess"),type:"success"}),e.editFeatureInfo.set("alias",e.editFeatureData.alias)):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else if(1==this.intoProjectType){2==e.editFeatureInfo.values_.type?e.editFeatureInfo.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/beacon_sos.png",scale:1}),text:new S.a({text:t+a,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})})):1==e.editFeatureInfo.values_.type&&1==e.editFeatureInfo.values_.clockin?e.editFeatureInfo.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/clock.png",scale:1}),text:new S.a({text:t+a,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})})):e.editFeatureInfo.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:e.iconSrc,scale:1}),text:new S.a({text:t+a,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})}));var i={beaconid:this.editFeatureData.deveui,alias:this.editFeatureData.alias};Object(u._140)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("mapmanagement.editsuccess"),type:"success"}),e.editFeatureInfo.set("alias",e.editFeatureData.alias)):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else if(2==this.intoProjectType){2==e.editFeatureInfo.values_.warning?e.editFeatureInfo.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/gateway_sos.png",scale:1}),text:new S.a({text:t+a,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})})):1==e.editFeatureInfo.values_.clockin?e.editFeatureInfo.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:"../../../static/clock.png",scale:1}),text:new S.a({text:t+a,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})})):e.editFeatureInfo.setStyle(new j.c({image:new x.a({anchor:[.5,1],src:e.iconSrc,scale:1}),text:new S.a({text:t+a,font:"12px font-size",fill:new F.b({color:"red"}),offsetY:10})}));var r={deveui:this.editFeatureData.deveui,alias:this.editFeatureData.alias};Object(u._155)(r,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("mapmanagement.editsuccess"),type:"success"}),e.editFeatureInfo.set("alias",e.editFeatureData.alias)):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}e.menu_overlay.setPosition(void 0)},searchArranges:function(){this.changeMajor=!0,this.changeMinor=!0,""==this.searchInuse&&""==this.searchDeveui&&""==this.searchAlias&&(this.searchInuse=2);var e,t=this;"0"!=this.activeMenu?e={deveui:t.searchDeveui,alias:t.searchAlias,inuse:t.searchInuse,devtype:t.activeMenu,tenantid:5==t.contrForPrionum?t.superId:t.tenantkey_A,page:1,count:20,projectid:t.intoProjectid}:1==t.$store.state.intoProjectType?e={deveui:t.searchDeveui,alias:t.searchAlias,inuse:t.searchInuse,fortype:"2",inallot:"1",projectid:t.intoProjectid,page:1,count:20}:2==t.$store.state.intoProjectType&&(e={deveui:t.searchDeveui,alias:t.searchAlias,inuse:t.searchInuse,inallot:"1",projectid:t.intoProjectid,page:1,count:20}),1==this.searchInuse&&(e.groundid=t.groundid),"0"!=this.activeMenu?Object(u._46)(e,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(t.arrangeData=e.data.list,t.currentPage2=1,t.totalArrange=e.data.size):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):1==t.$store.state.intoProjectType?Object(u._21)(e,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(t.arrangeData=e.data.list,t.currentPage2=1,t.totalArrange=e.data.size):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):2==t.$store.state.intoProjectType&&Object(u._47)(e,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(t.arrangeData=e.data.list,t.currentPage2=1,t.totalArrange=e.data.size):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},clearArranges:function(){var e=this;this.changeMajor=!0,this.changeMinor=!0;var t=this;this.inuseType=[{index:1,message:t.$t("floormanagement.value1")},{index:2,message:t.$t("floormanagement.value2")}],r()(this.$data.inuseType,this.$options.data.call(this).inuseType),this.searchDeveui="",this.searchAlias="",this.searchInuse=2,this.currentPage2=1,this.searchArranges(),this.arrange&&function(){for(var a=e.map.getLayers().getArray(),n=function(t){a[t].getSource().getFeatures().forEach(function(e){a[t].getSource().removeFeature(e)}),e.map.removeLayer(a[t])},s=a.length-1;s>0;s--)n(s);e.addSubPolygon(),2==t.$store.state.intoProjectType?t.getArrangeGatewayPos(t.intoProjectid):t.getArrangeBeaconPos(t.intoProjectid)}()},handleCurrentChangeArrange:function(e){this.currentPage2=e,"0"==this.activeMenu?this.changePageSearchArrange(e):this.menuClick(this.activeMenu,e)},changePageSearchArrange:function(e){var t;""==this.searchInuse&&""==this.searchDeveui&&""==this.searchAlias&&(this.searchInuse=2),t=""==e||void 0==e?1:e;var a,n=this;1==this.$store.state.intoProjectType?a={deveui:n.searchDeveui,alias:n.searchAlias,inuse:n.searchInuse,fortype:"2",inallot:"1",projectid:n.intoProjectid,page:t,count:20}:2==n.$store.state.intoProjectType&&(a={deveui:n.searchDeveui,alias:n.searchAlias,inuse:n.searchInuse,inallot:"1",projectid:n.intoProjectid,page:t,count:20}),1==this.searchInuse&&(a.groundid=this.groundid),1==this.$store.state.intoProjectType?Object(u._21)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(n.arrangeData=e.data.list,n.totalArrange=e.data.size):n.$message({message:"zh"==n.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):2==this.$store.state.intoProjectType&&Object(u._47)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(n.arrangeData=e.data.list,n.totalArrange=e.data.size):n.$message({message:"zh"==n.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},getBuildingLists:function(){},arrangeMaps:function(e,t){if(this.changeMajor=!0,this.changeMinor=!0,this.dobuleClick=!0,null===t.row.mapname)return this.$message({message:this.$t("floormanagement.Unboundmap"),type:"warning"}),void(this.dobuleClick=!1);if(1==this.intoProjectType?(this.iconSrc="../../../static/beacon.png",this.showOptions=!0,this.showOption=1):2==this.intoProjectType&&(this.iconSrc="../../../static/gateway.png",this.showOptions=!0,this.showOption=5),this.groundid=e.id,this.buildid=e.buildid,1==e.maptype){var a=o.a.host&&o.a.host.endsWith("/")?o.a.host:o.a.host+"/";this.imgUrl=a+"indoormap/"+e.filetype,this.mapInit(e.length,e.width,e),this.reallength=e.reallength,this.length=e.length,this.realwidth=e.realwidth,this.width=e.width,e.reallength?this.mapLength=e.reallength:this.mapLength=null,this.arrange=!0}this.searchInuse=2},arrangcancel:function(){var e=this,t=!1,a={groundid:this.groundid};Object(u._76)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(a){if(1001==a.code){if(0==a.data.length||1==a.data.length)return e.arrange=!1,e.sub=!1,e.map.setTarget("masssss"),e.dobuleClick=!1,void e.$emit("change",!1);a.data.forEach(function(e){0==e.list.length&&(t=!0)}),t&&2!=e.intoProjectType?e.$confirm(e.$t("floormanagement.tippp6"),e.$t("Building.tips"),{confirmButtonText:e.$t("terminal.confirm"),cancelButtonText:e.$t("terminal.cancel"),type:"warning"}).then(function(){e.arrange=!1,e.sub=!1,e.map.setTarget("masssss"),e.dobuleClick=!1,e.$emit("change",!1)}).catch(function(){}):(e.arrange=!1,e.sub=!1,e.map.setTarget("masssss"),e.dobuleClick=!1,e.$emit("change",!1))}})},getGatewayPos:function(e,t){var a=this;this.searchArrangeList={projectid:e,inallot:1,inuse:2,workstate:1,page:t,count:20},Object(u._47)(this.searchArrangeList,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code&&(a.arrangeData=e.data.list,a.totalArrange=e.data.size)})},getArrangeGatewayPos:function(e){var t=this,a={projectype:2,groundid:this.groundid,projectid:e,inallot:1,inuse:1};Object(u._35)(a,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){if(1001==e.code){var a=e.data.devList,n=e.data.otherList;if(t.arrangeFeatures=a.concat(n),t.arrangeFeatures.length>0)for(var s=0;s<t.arrangeFeatures.length;s++)t.addIconMarkers(t.map,t.arrangeFeatures[s])}})},getBeaconPos:function(e,t){var a=this;this.searchArrangeList={fortype:2,projectid:e,inallot:1,inuse:2,workstate:1,page:t,count:20},Object(u._21)(this.searchArrangeList,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code&&(a.arrangeData=e.data.list,a.totalArrange=e.data.size)})},getArrangeBeaconPos:function(e){var t=this,a={projectype:1,groundid:t.groundid,projectid:e,inallot:1,inuse:1};Object(u._35)(a,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){if(1001==e.code){var a=e.data.devList,n=e.data.otherList;if(t.arrangeFeatures=a.concat(n),t.arrangeFeatures.length>0)for(var s=0;s<t.arrangeFeatures.length;s++)t.addIconMarkers(t.map,t.arrangeFeatures[s])}})},selectArrange:function(e){this.sub&&this.closeSub();e&&2==e.inuse&&(this.selectArrangeData=e)}},beforeMount:function(){}}}).call(t,a("7t+N"))},"4iwI":function(e,t,a){"use strict";var n=a("1wu6"),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"content"},[n("el-container",[n("el-main",[n("el-dialog",{staticClass:"arrangeDialog",attrs:{visible:e.arrange,"close-on-click-modal":!1,"show-close":!1,fullscreen:!0,width:"100%","close-on-press-escape":!1},on:{"update:visible":function(t){e.arrange=t}}},[n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{staticClass:"searchArrange"},[n("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"}},[n("el-button",{staticStyle:{width:"90px",height:"30px","text-align":"left"},attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-left"},on:{click:function(t){return e.arrangcancel()}}},[e._v(e._s(e.$t("login.return")))]),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0%"},attrs:{label:e.$t("floormanagement.device")}},[n("el-input",{attrs:{placeholder:e.$t("floormanagement.devicenumber")},model:{value:e.searchDeveui,callback:function(t){e.searchDeveui=t},expression:"searchDeveui"}})],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0%"},attrs:{label:e.$t("floormanagement.Devicealias")}},[n("el-input",{attrs:{placeholder:e.$t("floormanagement.devicealias")},model:{value:e.searchAlias,callback:function(t){e.searchAlias=t},expression:"searchAlias"}})],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"2%"},attrs:{label:e.$t("floormanagement.status")}},[n("el-select",{attrs:{filterable:"",placeholder:e.$t("floormanagement.usagestatus")},model:{value:e.searchInuse,callback:function(t){e.searchInuse=t},expression:"searchInuse"}},e._l(e.inuseType,function(e){return n("el-option",{key:e.index,attrs:{label:e.value,value:e.index}})}),1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"0"}},[n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.searchArranges()}}},[e._v(e._s(e.$t("floormanagement.search")))]),e._v(" "),n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.clearArranges()}}},[e._v(e._s(e.$t("floormanagement.reset")))]),e._v(" "),n("el-popover",{attrs:{placement:"top"}},[n("div",{staticStyle:{display:"flex"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editTranche("alarm")}}},[e._v(e._s(e.$t("floormanagement.Alarmarea")))]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editTranche("position")}}},[e._v(e._s(e.$t("floormanagement.Positioningarea")))])],1),e._v(" "),n("el-button",{staticClass:"reset",attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v(e._s(e.$t("floormanagement.Regionalsettings")))])],1),e._v(" "),3!=e.contrForPrionum&&4!=e.contrForPrionum&&5!=e.contrForPrionum||e.sub||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.setSub()}}},[e._v(e._s(e.$t("floormanagement.Addconnectionpoint")))]),e._v(" "),3!=e.contrForPrionum&&4!=e.contrForPrionum&&5!=e.contrForPrionum||!e.sub||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.closeSub()}}},[e._v(e._s(e.$t("floormanagement.Endsetting")))]),e._v(" "),e.isShowLines||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.showLines()}}},[e._v(e._s(e.$t("floormanagement.showConnectPoint")))]),e._v(" "),e.isShowLines&&1==e.intoProjectType?n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.showLines()}}},[e._v(e._s(e.$t("floormanagement.hideConnectPoint")))]):e._e(),e._v(" "),n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.removeGroundDevs()}}},[e._v(e._s(e.$t("floormanagement.RemoveGroundDev")))]),e._v(" "),3!=e.contrForPrionum&&4!=e.contrForPrionum&&5!=e.contrForPrionum||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.setAdj()}}},[e._v(e._s(e.$t("floormanagement.Setadjacency")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                        "+e._s(e.$t("floormanagement.title"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title1"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title2"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title3"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title4"))+"\n                      ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)],1)],1),e._v(" "),n("div",{staticStyle:{width:"100%",height:"90%",display:"flex","margin-top":"2%"}},[n("div",{ref:"mapContent",staticClass:"mapContent"},[n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{ref:"map",staticClass:"allmap",attrs:{id:"allmap"}}),e._v(" "),n("p",{staticStyle:{width:"100%"}},[e._v("\n                    "+e._s(e.$t("floormanagement.arrangement1"))+"\n                    "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.vedio=!0}}},[e._v(e._s(e.$t("floormanagement.Watchdemo")))])])]),e._v(" "),n("div",{ref:"polygonMenu",staticClass:"contextmenu",attrs:{id:"polygonMenu"}},[n("ul",{attrs:{id:"popup-content"}},[n("li",[n("a",{staticClass:"ol-popup-closer",attrs:{href:"#",id:"polygonMenu-closer"}},[n("img",{attrs:{src:a("YcdQ"),width:"11",height:"11",alt:""}})])]),e._v(" "),n("li",[n("el-button",{staticClass:"dels",attrs:{id:"editNear",size:"mini"}},[e._v(e._s(e.$t("floormanagement.Deleteadjacency")))])],1),e._v(" "),n("li",[n("el-button",{staticClass:"dels",attrs:{id:"delPolygon",size:"mini"}},[e._v(e._s(e.$t("floormanagement.delete")))])],1)])]),e._v(" "),n("div",{ref:"contextmenu_container",staticClass:"contextmenu",attrs:{id:"contextmenu_container"}},[n("ul",{attrs:{id:"popup-content"}},[n("li",[n("a",{staticClass:"ol-popup-closer",attrs:{href:"#",id:"popup-closer"}},[n("img",{attrs:{src:a("YcdQ"),width:"11",height:"11",alt:""}})])]),e._v(" "),n("li",[n("el-button",{staticClass:"reset",attrs:{id:"del",size:"mini"}},[e._v(e._s(e.$t("floormanagement.delete")))])],1),e._v(" "),n("li",[n("el-button",{staticClass:"reset",attrs:{id:"edit",size:"mini"}},[e._v(e._s(e.$t("floormanagement.edit")))])],1),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:!e.showOther,expression:"!showOther"}]},[n("el-button",{staticClass:"reset",attrs:{id:"setArea",size:"mini"}},[e._v(e._s(e.$t("floormanagement.Scanningarea")))])],1),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:3==e.contrForPrionum||4==e.contrForPrionum||5==e.contrForPrionum,expression:"\n                        contrForPrionum == 3 ||\n                        contrForPrionum == 4 ||\n                        contrForPrionum == 5\n                      "}]},[n("el-button",{staticClass:"reset",attrs:{id:"setTranche",size:"mini"}},[e._v(e._s(e.$t("floormanagement.Setarea")))])],1),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:e.clock&&!e.showOther,expression:"clock && !showOther"}]},[n("el-button",{staticClass:"reset",attrs:{id:"setClock",size:"mini"}},[e._v(e._s(e.$t("floormanagement.Setascheckin")))])],1),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:e.caecelClock&&!e.showOther,expression:"caecelClock && !showOther"}]},[n("el-button",{staticClass:"reset",attrs:{id:"cancelClock",size:"mini"}},[e._v(e._s(e.$t("floormanagement.Cancelclockout")))])],1),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:(3==e.contrForPrionum||4==e.contrForPrionum||5==e.contrForPrionum)&&e.showBeacon&&1==e.intoProjectType&&!e.showOther,expression:"\n                        (contrForPrionum == 3 ||\n                          contrForPrionum == 4 ||\n                          contrForPrionum == 5) &&\n                        showBeacon &&\n                        intoProjectType == 1 &&\n                        !showOther\n                      "}]},[n("el-button",{staticClass:"reset",attrs:{id:"setAdjoinBeacon",size:"mini"}},[e._v(e._s(e.$t("floormanagement.Setadjacentbeacon")))])],1),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:e.clearBeaconList&&!e.showOther,expression:"clearBeaconList && !showOther"}]},[n("el-button",{staticClass:"reset dels",attrs:{id:"cancelNearList",size:"mini"}},[e._v(e._s(e.$t("floormanagement.Deleteadjacency")))])],1),e._v(" "),n("li",[n("el-button",{staticClass:"reset",attrs:{id:"calculatingDistance",size:"mini"}},[e._v(e._s(e.$t("floormanagement.CalculateDistance")))])],1)])])]),e._v(" "),n("div",{ref:"tableContent",staticClass:"tableContent"},[n("div",{staticClass:"show_table"},[n("svg",{staticClass:"hamburger",class:{"is-active":!e.showTable},attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},on:{click:function(t){return e.setTable()}}},[n("path",{attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}})]),e._v(" "),n("el-menu",{staticClass:"chose_table",attrs:{"default-active":e.activeMenu,collapse:e.isCollapse}},[n("el-menu-item",{attrs:{index:"0"},on:{click:function(t){return e.menuClick("0",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.beacon")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.beacon"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon beacon"})])],1),e._v(" "),e.aoagw?n("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.menuClick("1",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.aoaGateway")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.aoaGateway"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon aoagw"})])],1):e._e(),e._v(" "),e.smoke?n("el-menu-item",{attrs:{index:"3"},on:{click:function(t){return e.menuClick("2",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.smokeSensor")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.smokeSensor"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon smoke"})])],1):e._e(),e._v(" "),e.alertor?n("el-menu-item",{attrs:{index:"4"},on:{click:function(t){return e.menuClick("3",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.burglarAlarm")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.burglarAlarm"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon alarm"})])],1):e._e(),e._v(" "),e.camera?n("el-menu-item",{attrs:{index:"6"},on:{click:function(t){return e.menuClick("5",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.camera")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.camera"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon camera"})])],1):e._e()],1)],1),e._v(" "),e.showTable?n("div",{staticClass:"table_data"},[n("el-table",{ref:"multipleTable",staticStyle:{"text-align":"center"},attrs:{data:e.arrangeData,"highlight-current-row":"","max-height":"660",border:""},on:{"current-change":e.selectArrange,"header-click":e.changeBase}},["0"==e.activeMenu&&1==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"major",label:"Major","show-overflow-tooltip":"","min-width":"60",align:"center"}}):e._e(),e._v(" "),"0"==e.activeMenu&&1==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"minor",label:e.$t("beacon.minor"),"show-overflow-tooltip":"","min-width":"60",align:"center"}}):e._e(),e._v(" "),"0"==e.activeMenu&&2==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"deveui",label:e.$t("beacon.beaconid"),"show-overflow-tooltip":"",align:"center"}}):e._e(),e._v(" "),"0"!=e.activeMenu?n("el-table-column",{key:Math.random(),attrs:{property:"deveui",label:e.$t("terminal.DeviceID"),"show-overflow-tooltip":"",align:"center"}}):e._e(),e._v(" "),n("el-table-column",{key:Math.random(),attrs:{property:"alias",label:e.$t("floormanagement.Devicealias2"),"show-overflow-tooltip":"",align:"center"}}),e._v(" "),"0"==e.activeMenu&&1==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"typestr",label:e.$t("floormanagement.DeviceType2"),"show-overflow-tooltip":"",align:"center"}}):e._e(),e._v(" "),"0"!=e.activeMenu?n("el-table-column",{key:Math.random(),attrs:{property:"devtypestr",label:e.$t("floormanagement.DeviceType2"),"show-overflow-tooltip":"",align:"center"}}):e._e(),e._v(" "),n("el-table-column",{key:Math.random(),attrs:{property:"inusestr",label:e.$t("floormanagement.status1"),"show-overflow-tooltip":"",align:"center"}}),e._v(" "),n("el-table-column",{key:Math.random(),attrs:{property:"zh"==e.i8n?"workstatestr":"enworkstate",label:e.$t("floormanagement.workingcondition"),"show-overflow-tooltip":"",align:"center"}})],1),e._v(" "),n("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%"}},[n("el-pagination",{attrs:{"current-page":e.currentPage2,"page-size":20,layout:"total, prev, pager, next",total:e.totalArrange},on:{"current-change":e.handleCurrentChangeArrange}})],1)],1):e._e()]),e._v(" "),e.showOptions?n("div",{staticClass:"changShowButton"},[n("el-dropdown",{on:{command:e.showOptionsTrue}},[n("el-button",{attrs:{type:"primary"}},[e._v("\n                    "+e._s(e.showOptionName)),n("i",{staticClass:"el-icon-arrow-up el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[1==e.intoProjectType?n("el-dropdown-item",{attrs:{command:"1"}},[e._v(e._s(e.$t("change.showAliases")))]):e._e(),e._v(" "),1==e.intoProjectType?n("el-dropdown-item",{attrs:{command:"2"}},[e._v(e._s(e.$t("change.showMajor16")))]):e._e(),e._v(" "),1==e.intoProjectType?n("el-dropdown-item",{attrs:{command:"3"}},[e._v(e._s(e.$t("change.showMajor10")))]):e._e(),e._v(" "),n("el-dropdown-item",{attrs:{command:"4"}},[e._v(e._s(e.$t("change.showPosition")))]),e._v(" "),n("el-dropdown-item",{attrs:{command:"5"}},[e._v(e._s(e.$t("change.showAlarm")))])],1)],1)],1):e._e()])]),e._v(" "),n("el-dialog",{staticClass:"showHeadr",staticStyle:{"text-align":"center"},attrs:{width:"30%",title:e.$t("floormanagement.Editdeviceinformation"),visible:e.editFeatures,modal:!1},on:{"update:visible":function(t){e.editFeatures=t},close:e.closeEdit}},[n("el-form",{ref:"editFeatureData",staticStyle:{"text-align":"center"},attrs:{model:e.editFeatureData,"label-width":"120px"}},[n("el-form-item",{attrs:{label:e.$t("floormanagement.device")}},[n("el-input",{attrs:{disabled:""},model:{value:e.editFeatureData.deveui,callback:function(t){e.$set(e.editFeatureData,"deveui",t)},expression:"editFeatureData.deveui"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Devicealias")}},[n("el-input",{model:{value:e.editFeatureData.alias,callback:function(t){e.$set(e.editFeatureData,"alias",t)},expression:"editFeatureData.alias"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.editFeatureCancel()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editFeaturesTrue()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"showHeadr setAreas",staticStyle:{"text-align":"center"},attrs:{width:"40%",visible:e.setAreas,modal:!1},on:{"update:visible":function(t){e.setAreas=t},close:e.setAreaCancel}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("floormanagement.Setscanarea"))+"\n              "),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.scannedarea")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1),e._v(" "),n("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("el-radio",{attrs:{label:2}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl1,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:1}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl2,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:8}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl4,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:4}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl8,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:6}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl9,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:3}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl3,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:9}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl6,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:12}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl12,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:14}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl13,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:13}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl14,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:7}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl11,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:11}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl7,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:15}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl15,fit:"fit"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.setAreaCancel()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setAreaTrue()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"edit showHeadr",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.Setarea"),visible:e.trancheShow,width:"30%",modal:!1},on:{"update:visible":function(t){e.trancheShow=t},close:e.closeTranche}},[n("el-form",{ref:"TrancheDatas",staticStyle:{"text-align":"left","margin-left":"10px"},attrs:{"label-width":"130px"}},[n("el-form-item",{attrs:{label:e.$t("beacon.beaconid1")}},[n("el-input",{attrs:{disabled:""},model:{value:e.TrancheDatas.beaconids,callback:function(t){e.$set(e.TrancheDatas,"beaconids",t)},expression:"TrancheDatas.beaconids"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Alias")}},[n("el-input",{attrs:{disabled:""},model:{value:e.TrancheDatas.alias,callback:function(t){e.$set(e.TrancheDatas,"alias",t)},expression:"TrancheDatas.alias"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Positioningarea1")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("terminal.choose")},model:{value:e.TrancheDatas.tranche,callback:function(t){e.$set(e.TrancheDatas,"tranche",t)},expression:"TrancheDatas.tranche"}},e._l(e.setTrancheList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Alarmarea1")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("terminal.choose")},model:{value:e.TrancheDatas.alarmid,callback:function(t){e.$set(e.TrancheDatas,"alarmid",t)},expression:"TrancheDatas.alarmid"}},e._l(e.setAlarmTrancheList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.updateTrancheCancel()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.updateTrancheTrue()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"edit showHeadr setAdjoinBeacon",staticStyle:{"text-align":"center","margin-right":"2%"},attrs:{title:e.$t("tet.setup")+e.adjoinBeaconAlias+e.$t("tet.Adjacentbeacon"),visible:e.adjoinBeaconShow,width:"30%",modal:!1},on:{"update:visible":function(t){e.adjoinBeaconShow=t},close:e.closeAdjoinBeacon,open:e.openAdjoinBeacon}},[n("el-form",{staticStyle:{"text-align":"left","margin-left":"10px"},attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:e.$t("floormanagement.Adjacentbeacon"),prop:""}},[n("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",multiple:"",clearable:"",placeholder:e.$t("terminal.choose")},model:{value:e.adjoinBeacon,callback:function(t){e.adjoinBeacon=t},expression:"adjoinBeacon"}},e._l(e.adjoinBeaconDataList,function(e){return n("el-option",{key:e.id,attrs:{label:e.alias,value:e.major+e.minor}})}),1),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.title5")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.updateAdjoinBeaconCancel()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.setAdjoinBeaconTrue()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.vedio},on:{"update:visible":function(t){e.vedio=t},close:function(t){return e.closeVedio("video")}}},[n("video",{attrs:{width:"100%",controls:"",autoplay:"",id:"video"}},["zh"==e.i8n?n("source",{attrs:{src:a("cZaB"),type:"video/mp4"}}):e._e(),e._v(" "),"zh"!=e.i8n?n("source",{attrs:{src:a("urBA"),type:"video/mp4"}}):e._e()])]),e._v(" "),n("el-dialog",{attrs:{visible:e.vedio2},on:{"update:visible":function(t){e.vedio2=t},close:function(t){return e.closeVedio("video2")}}},[n("video",{attrs:{width:"100%",controls:"",autoplay:"",id:"video2"}},[n("source",{attrs:{src:a("aMzu"),type:"video/mp4"}})])]),e._v(" "),n("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.Positioningarea"),visible:e.addTranchePosition,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.addTranchePosition=t},close:e.addTrancheRowCancelPosition}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title-text"},[e._v(e._s(e.$t("floormanagement.Positioningarea"))+"\n              "),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                    "+e._s(e.$t("floormanagement.title6"))+"\n                  ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)]),e._v(" "),n("el-radio-group",{attrs:{size:"small"}},[n("el-button",{staticClass:"add",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.addTrancheRowPosition}},[e._v(e._s(e.$t("floormanagement.add")))])],1),e._v(" "),e._l(e.positionTrancheList,function(t,a){return n("el-form",{key:t.id,staticClass:"demo-form-inline addTranche",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"0px"}},[n("el-form-item",[n("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"zh"==e.i8n?"12":"30",disabled:void 0!==t.id},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),e._v(" "),n("p",[n("el-button",{staticClass:"del",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return e.deleTrancheRowPosition(a,t.name,t.id)}}},[e._v(e._s(e.$t("floormanagement.delete")))])],1),e._v(" "),n("p",{staticClass:"tranchSwitch"},[n("span",[e._v(e._s(e.$t("floormanagement.Regionalshake")))]),e._v(" "),n("i-switch",{attrs:{size:"large",value:t.fremove},model:{value:t.fremove,callback:function(a){e.$set(t,"fremove",a)},expression:"item.fremove"}},[n("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("floormanagement.open")))]),e._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("floormanagement.close")))])])],1)],1)],1)}),e._v(" "),n("el-form",{staticStyle:{"text-align":"center"}},[n("el-form-item",{staticStyle:{width:"60%","margin-left":"16%","text-align":"left","margin-top":"14px"},attrs:{label:e.$t("floormanagement.Import")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("floormanagement.Importbuilding")},on:{change:e.importTranchePosition},model:{value:e.currentProjectid.groundid,callback:function(t){e.$set(e.currentProjectid,"groundid",t)},expression:"currentProjectid.groundid"}},e._l(e.projectList(),function(e){return n("el-option",{key:e.id,attrs:{label:e.ground,value:e.id}})}),1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-10px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.addTrancheRowCancelPosition()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTrancheRowTruePosition()}}},[e._v(e._s(e.$t("change.sure")))])],1)],2),e._v(" "),n("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.Alarmarea"),visible:e.addTrancheAlarm,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.addTrancheAlarm=t},close:e.addTrancheRowCancelAlarm}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title-text"},[e._v(e._s(e.$t("floormanagement.Alarmarea"))+"\n              "),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                    "+e._s(e.$t("floormanagement.title6"))+"\n                  ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)]),e._v(" "),n("el-radio-group",{attrs:{size:"small"}},[n("el-button",{staticClass:"add",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.addTrancheRowAlarm}},[e._v(e._s(e.$t("floormanagement.add")))])],1),e._v(" "),e._l(e.alarmTrancheList,function(t,a){return n("el-form",{key:t.id,staticClass:"demo-form-inline addTranche",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"0px"}},[n("el-form-item",[n("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"zh"==e.i8n?"12":"30",disabled:void 0!==t.id},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),e._v(" "),n("p",[n("el-button",{staticClass:"del",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return e.deleTrancheRowAlarm(a,t.name,t.id)}}},[e._v(e._s(e.$t("floormanagement.delete")))])],1)],1)],1)}),e._v(" "),n("el-form",{staticStyle:{"text-align":"center"}},[n("el-form-item",{staticStyle:{width:"60%","margin-left":"16%","text-align":"left","margin-top":"14px"},attrs:{label:e.$t("floormanagement.Import")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("floormanagement.Importbuilding")},on:{change:e.importTrancheAlarm},model:{value:e.currentProjectid.groundid,callback:function(t){e.$set(e.currentProjectid,"groundid",t)},expression:"currentProjectid.groundid"}},e._l(e.projectList(),function(e){return n("el-option",{key:e.id,attrs:{label:e.ground,value:e.id}})}),1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-10px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.addTrancheRowCancelAlarm()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTrancheRowTrueAlarm()}}},[e._v(e._s(e.$t("change.sure")))])],1)],2),e._v(" "),n("el-dialog",{staticClass:"showHeadr",staticStyle:{"text-align":"center"},attrs:{width:"30%",visible:e.showDistance,modal:!1},on:{"update:visible":function(t){e.showDistance=t}}},[n("p",[e._v(e._s(e.$t("floormanagement.Xaxis"))+e._s(e.distanceData.x)+"cm")]),e._v(" "),n("p",[e._v(e._s(e.$t("floormanagement.Yaxis"))+e._s(e.distanceData.y)+"cm")])])],1)],1)],1)])},staticRenderFns:[]};var i=function(e){a("WB1+")},r=a("VU/8")(n.a,s,!1,i,"data-v-0a6e41e8",null);t.a=r.exports},"4jcq":function(e,t,a){"use strict";(function(e){var n=a("lHA8"),s=a.n(n),i=a("Gu7T"),r=a.n(i),o=a("mvHQ"),l=a.n(o),c=a("woOf"),d=a.n(c),u=a("nQqC"),m=a("PO8r"),g=a("CTnB"),h=a("wR3u"),p=a("c2Ch"),f=a("4iwI"),v=a("bdLh");t.a={components:{Menu:m.a,Project:g.a,basecard:u.a,Arrange2dMap:f.a,Arrange3dMap:v.a},name:"BuildingManagement",data:function(){return{arrange2d:!1,arrange3d:!1,i8n:this.$store.state.i18n,maprio:this.$store.state.userInfo.maprio,contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,superId:this.$store.state.userInfo.superid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,delprio:this.$store.state.userInfo.delprio,intoProjectName:this.$store.state.intoProjectName,intoProjectid:this.$store.state.intoProjectid,intoProjectType:this.$store.state.intoProjectType,loading:!1,tableData:[],searchList:{projectid:this.$store.state.intoProjectid,mapid:"",buildid:"",ground:"",groundid:"",page:1,count:20},currentPage1:1,total:0,add:!1,addData:{buildid:"",grounds:"",mapid:"",memo:""},fileName:"",addData_ground:"",addRules:{buildid:[{required:!0,message:this.$t("floormanagement.message1"),trigger:"blur"}],ground:[{required:!0,message:this.$t("floormanagement.message2"),trigger:"blur"}],mapid:[{required:!1,message:this.$t("floormanagement.message4"),trigger:"change"}]},pageCount:20,editData:{buildid:"",id:"",ground:"",mapid:"",memo:"",name:""},changeImg:!1,edit:!1,mapList:[],deletes:!1,deleteData:{},buildingList:"",groundList:"",dobuleClick:!1,buildtype:1,buildId:"",chooseMap:!1,changeMap:!1,multipleSelection:[],headlistdata:""}},watch:{"$i18n.locale":function(){this.i8n=this.$store.state.i18n,d()(this.$data.addRules,this.$options.data.call(this).addRules)}},methods:{importExcelNear:function(){document.getElementById("articleNearFile").click()},importExcelPoint:function(){document.getElementById("articlePointFile").click()},importExcelArea:function(){document.getElementById("articleAreaFile").click()},importExcel:function(){document.getElementById("articleImage").click()},importExcelsNear:function(t){var n,s=this,i=event.currentTarget.files[0],r=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var i,r,o="",c=new FileReader;c.onload=function(t){for(var d=new Uint8Array(c.result),u=d.byteLength,m=0;m<u;m++)o+=String.fromCharCode(d[m]);var g=a("uXZL");i=g.read(o,{type:"binary"}),r=g.utils.sheet_to_json(i.Sheets[i.SheetNames[0]]),n=s.dateTransitionNear(r);var h={msg:l()(n)};Object(p._116)(h,s.tenantkey_A,s.tenantid_A,s.userName).then(function(t){1001==t.code?(s.$message({message:s.$t("terminal.tet2"),type:"warning"}),e("#articleNearFile").val("")):(s.$message({message:"zh"==s.$store.state.i18n?t.msg:t.enMsg,type:"error"}),e("#articleNearFile").val(""))})},c.readAsArrayBuffer(t)},r.readAsBinaryString(i)},importExcelsPoint:function(t){var n,s=this,i=event.currentTarget.files[0],r=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var i,r,o="",c=new FileReader;c.onload=function(t){for(var d=new Uint8Array(c.result),u=d.byteLength,m=0;m<u;m++)o+=String.fromCharCode(d[m]);var g=a("uXZL");i=g.read(o,{type:"binary"}),r=g.utils.sheet_to_json(i.Sheets[i.SheetNames[0]]),n=s.dateTransitionPoint(r);var h={msg:l()(n)};Object(p._115)(h,s.tenantkey_A,s.tenantid_A,s.userName).then(function(t){1001==t.code?(s.$message({message:s.$t("terminal.tet2"),type:"warning"}),e("#articlePointFile").val("")):(s.$message({message:"zh"==s.$store.state.i18n?t.msg:t.enMsg,type:"error"}),e("#articlePointFile").val(""))})},c.readAsArrayBuffer(t)},r.readAsBinaryString(i)},importExcelsArea:function(t){var n,s=this,i=event.currentTarget.files[0],r=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var i,r,o="",c=new FileReader;c.onload=function(t){for(var d=new Uint8Array(c.result),u=d.byteLength,m=0;m<u;m++)o+=String.fromCharCode(d[m]);var g=a("uXZL");i=g.read(o,{type:"binary"}),r=g.utils.sheet_to_json(i.Sheets[i.SheetNames[0]]),n=s.dateTransitionArea(r);var h={msg:l()(n)};Object(p._119)(h,s.tenantkey_A,s.tenantid_A,s.userName).then(function(t){1001==t.code?(s.$message({message:s.$t("terminal.tet2"),type:"warning"}),e("#articleAreaFile").val("")):(s.$message({message:"zh"==s.$store.state.i18n?t.msg:t.enMsg,type:"error"}),e("#articleAreaFile").val(""))})},c.readAsArrayBuffer(t)},r.readAsBinaryString(i)},importExcels:function(t){var n,s=this,i=event.currentTarget.files[0],r=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var i,r,o="",c=new FileReader;c.onload=function(t){for(var d=new Uint8Array(c.result),u=d.byteLength,m=0;m<u;m++)o+=String.fromCharCode(d[m]);var g=a("uXZL");i=g.read(o,{type:"binary"}),r=g.utils.sheet_to_json(i.Sheets[i.SheetNames[0]]),n=s.dateTransition(r);var h={msg:l()(n)};Object(p._110)(h,s.tenantkey_A,s.tenantid_A,s.userName).then(function(t){1001==t.code?(s.$message({message:s.$t("terminal.tet2"),type:"warning"}),e("#articleImage").val(""),s.getBuildingLists()):(s.$message({message:"zh"==s.$store.state.i18n?t.msg:t.enMsg,type:"error"}),e("#articleImage").val(""))})},c.readAsArrayBuffer(t)},r.readAsBinaryString(i)},dateTransitionNear:function(e){for(var t=[],a={},n=0;n<e.length;n++){for(var s in a={},e[n])switch(s){case"pointid":a.pointid=e[n][s];break;case"nearpointid":a.nearpointid=e[n][s];break;case"dist":a.dist=e[n][s];break;case"groundid":a.groundid=e[n][s]}t.push(a)}return t},dateTransitionPoint:function(e){for(var t=[],a={},n=0;n<e.length;n++){for(var s in a={},e[n])switch(s){case"pointid":a.pointid=e[n][s];break;case"nodeX":a.nodeX=e[n][s];break;case"nodeY":a.nodeY=e[n][s];break;case"groundid":a.groundid=e[n][s]}t.push(a)}return t},dateTransitionArea:function(e){for(var t=[],a={},n=0;n<e.length;n++){for(var s in a={},e[n])switch(s){case this.$t("Building.buildid"):a.buildid=e[n][s];break;case this.$t("Building.Building1"):a.building=e[n][s];break;case this.$t("floormanagement.Regionalshake"):a.fremove=e[n][s];break;case this.$t("buildingmanagement.ground"):a.ground=e[n][s];break;case this.$t("Building.groundid"):a.groundid=e[n][s];break;case this.$t("Building.areaid"):a.id=e[n][s];break;case this.$t("Building.areaname"):a.name=e[n][s];break;case this.$t("Building.projectid"):a.projectid=e[n][s];break;case this.$t("terminal.Positioningbeacon"):a.site=e[n][s]}t.push(a)}return t},dateTransition:function(e){for(var t=[],a={},n=0;n<e.length;n++){for(var s in a={},e[n])switch(s){case this.$t("floormanagement.building"):a.building=e[n][s];break;case this.$t("floormanagement.buildingid"):a.buildid=e[n][s];break;case this.$t("floormanagement.floor"):a.ground=e[n][s];break;case this.$t("floormanagement.floorName"):a.name=e[n][s];break;case this.$t("floormanagement.floornumber"):a.id=e[n][s];break;case this.$t("floormanagement.mapname"):a.mapname=e[n][s];break;case this.$t("floormanagement.EquipmentQuantity"):a.nums=e[n][s];break;case this.$t("floormanagement.Numberofpunchpoints"):a.bclocknum=e[n][s];break;case this.$t("floormanagement.Numberofalarmdevices"):a.balarmnum=e[n][s];break;case this.$t("project.memo"):a.memo=e[n][s];break;case this.$t("floormanagement.EquipmentQuantity"):a.gwnum=e[n][s];break;case this.$t("floormanagement.Numberofpunchpoints"):a.gwclocknum=e[n][s];break;case this.$t("floormanagement.Numberofalarmdevices"):a.gwalarmnum=e[n][s]}t.push(a)}return t},exportExcel:function(){0!=this.multipleSelection.length?(this.headlistdata=1==this.intoProjectType?[{msg:this.$t("floormanagement.building"),value:"building"},{msg:this.$t("floormanagement.buildingid"),value:"buildid"},{msg:this.$t("floormanagement.floor"),value:"ground"},{msg:this.$t("floormanagement.floorName"),value:"name"},{msg:this.$t("floormanagement.floornumber"),value:"id"},{msg:this.$t("floormanagement.mapname"),value:"mapname"},{msg:this.$t("floormanagement.EquipmentQuantity"),value:"nums"},{msg:this.$t("floormanagement.Numberofpunchpoints"),value:"bclocknum"},{msg:this.$t("floormanagement.Numberofalarmdevices"),value:"balarmnum"},{msg:this.$t("project.memo"),value:"memo"}]:[{msg:this.$t("floormanagement.building"),value:"building"},{msg:this.$t("floormanagement.buildingid"),value:"buildid"},{msg:this.$t("floormanagement.floor"),value:"ground"},{msg:this.$t("floormanagement.floorName"),value:"name"},{msg:this.$t("floormanagement.floornumber"),value:"id"},{msg:this.$t("floormanagement.mapname"),value:"mapname"},{msg:this.$t("floormanagement.EquipmentQuantity"),value:"gwnum"},{msg:this.$t("floormanagement.Numberofpunchpoints"),value:"gwclocknum"},{msg:this.$t("floormanagement.Numberofalarmdevices"),value:"gwalarmnum"},{msg:this.$t("project.memo"),value:"memo"}],this.export2Excel(this.multipleSelection)):this.$message({message:this.$t("buildingmanagement.selectGround"),type:"warning"})},export2Excel:function(e){for(var t=this,n=this,s=[],i=1==this.intoProjectType?["building","buildid","ground","name","id","mapname","nums","bclocknum","balarmnum","memo"]:["building","ground","name","id","mapname","gwnum","gwclocknum","gwalarmnum","memo"],r=0;r<i.length;r++){s.push(i[r]);for(var o=0;o<n.headlistdata.length;o++)i[r]==n.headlistdata[o].value&&(i[r]=n.headlistdata[o].msg)}a.e(55).then(function(){var r=a("zWO4").export_json_to_excel,o=s,l=e;r(i,t.formatJson(o,l),n.$t("list.Floormanagement"))}.bind(null,a)).catch(a.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},exportExcelAll:function(){var e=this;this.headlistdata=1==this.intoProjectType?[{msg:e.$t("floormanagement.building"),value:"building"},{msg:e.$t("floormanagement.buildingid"),value:"buildid"},{msg:e.$t("floormanagement.floor"),value:"ground"},{msg:e.$t("floormanagement.floorName"),value:"name"},{msg:e.$t("floormanagement.floornumber"),value:"id"},{msg:e.$t("floormanagement.mapname"),value:"mapname"},{msg:e.$t("floormanagement.EquipmentQuantity"),value:"nums"},{msg:e.$t("floormanagement.Numberofpunchpoints"),value:"bclocknum"},{msg:e.$t("floormanagement.Numberofalarmdevices"),value:"balarmnum"},{msg:e.$t("project.memo"),value:"memo"}]:[{msg:e.$t("floormanagement.building"),value:"building"},{msg:e.$t("floormanagement.buildingid"),value:"buildid"},{msg:e.$t("floormanagement.floor"),value:"ground"},{msg:e.$t("floormanagement.floorName"),value:"name"},{msg:e.$t("floormanagement.floornumber"),value:"id"},{msg:e.$t("floormanagement.mapname"),value:"mapname"},{msg:e.$t("floormanagement.EquipmentQuantity"),value:"gwnum"},{msg:e.$t("floormanagement.Numberofpunchpoints"),value:"gwclocknum"},{msg:e.$t("floormanagement.Numberofalarmdevices"),value:"gwalarmnum"},{msg:e.$t("project.memo"),value:"memo"}];var t={projectid:this.$store.state.intoProjectid,mapid:"",buildid:"",ground:"",groundid:"",page:"",count:""};Object(p._23)(t,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(t.data.list.forEach(function(e){e.nums=e.bnum+e.onum}),e.export2Excel(t.data.list)):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})},handleSelectionChange:function(e){this.multipleSelection=e},exportExcelArea:function(e){var t=this;this.headlistdata=[{msg:t.$t("Building.buildid"),value:"buildid"},{msg:t.$t("Building.Building1"),value:"building"},{msg:t.$t("floormanagement.Regionalshake"),value:"fremove"},{msg:t.$t("buildingmanagement.ground"),value:"ground"},{msg:t.$t("Building.groundid"),value:"groundid"},{msg:t.$t("Building.areaid"),value:"id"},{msg:t.$t("Building.areaname"),value:"name"},{msg:t.$t("Building.projectid"),value:"projectid"},{msg:t.$t("terminal.Positioningbeacon"),value:"site"}];var a={groundid:this.tableData[e].id,projectid:this.$store.state.intoProjectid};Object(p._98)(a,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?0==e.data.length?t.$message({message:t.$t("buildingmanagement.nodata"),type:"warning"}):t.export2Excel1(e.data):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},export2Excel1:function(e){for(var t=this,n=this,s=[],i=["name","id","site","fremove","projectid","building","buildid","ground","groundid"],r=0;r<i.length;r++){s.push(i[r]);for(var o=0;o<n.headlistdata.length;o++)i[r]==n.headlistdata[o].value&&(i[r]=n.headlistdata[o].msg)}a.e(55).then(function(){var r=a("zWO4").export_json_to_excel,o=s,l=e;r(i,t.formatJson(o,l),n.$t("Building.areaInfo"))}.bind(null,a)).catch(a.oe)},exportExcelPoint:function(e){var t=this;this.headlistdata=[{msg:"pointid",value:"pointid"},{msg:"nodeX",value:"nodeX"},{msg:"nodeY",value:"nodeY"},{msg:"groundid",value:"groundid"}],Object(p._77)({groundid:this.tableData[e].id},this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){0==e.data.length?t.$message({message:t.$t("buildingmanagement.nodata"),type:"warning"}):t.export2ExcelPoint(e.data)})},export2ExcelPoint:function(e){for(var t=this,n=[],s=["pointid","nodeX","nodeY","groundid"],i=0;i<s.length;i++){n.push(s[i]);for(var r=0;r<this.headlistdata.length;r++)s[i]==this.headlistdata[r].value&&(s[i]=this.headlistdata[r].msg)}a.e(55).then(function(){var i=a("zWO4").export_json_to_excel,r=n,o=e;i(s,t.formatJson(r,o),"")}.bind(null,a)).catch(a.oe)},exportExcelNear:function(e){var t=this;this.headlistdata=[{msg:"dist",value:"dist"},{msg:"nearpointid",value:"nearpointid"},{msg:"pointid",value:"pointid"},{msg:"groundid",value:"groundid"}],Object(p._78)({groundid:this.tableData[e].id},this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){0==e.data.length?t.$message({message:t.$t("buildingmanagement.nodata"),type:"warning"}):t.export2ExcelNear(e.data)})},export2ExcelNear:function(e){for(var t=this,n=[],s=["pointid","nearpointid","dist","groundid"],i=0;i<s.length;i++){n.push(s[i]);for(var r=0;r<this.headlistdata.length;r++)s[i]==this.headlistdata[r].value&&(s[i]=this.headlistdata[r].msg)}a.e(55).then(function(){var i=a("zWO4").export_json_to_excel,r=n,o=e;i(s,t.formatJson(r,o),"")}.bind(null,a)).catch(a.oe)},selectGround:function(e){var t=this,a={buildid:e};Object(p._57)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.groundList=e.data)})},searchInfo:function(){var e=this;Object(p._23)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code&&(e.tableData=t.data.list,e.tableData.forEach(function(e){e.nums=e.bnum+e.onum}),e.total=t.data.size,t.data.size>0?e.$message({message:e.$t("buildingmanagement.searchsuccess"),type:"success"}):e.$message({message:e.$t("buildingmanagement.nodata"),type:"error"}))})},clearBtn:function(){this.currentPage1=1,this.searchList={projectid:this.$store.state.intoProjectid,mapid:"",buildid:"",ground:"",groundid:"",page:1,count:20},this.getBuildingLists()},handleCurrentChange:function(e){this.searchList.page=e,this.searchList.count=this.pageCount,this.getBuildingLists()},handleSizeChange:function(e){this.pageCount=e,this.searchList.count=e,this.searchList.page=1,this.currentPage1=1,this.getBuildingLists()},getBuildingLists:function(){var e=this;Object(p._23)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code&&(e.tableData=t.data.list,e.tableData.forEach(function(e){e.nums=e.bnum+e.onum}),e.total=t.data.size)})},addBuildings:function(){this.mapList=[],this.addData={buildid:"",grounds:"",mapid:"",memo:""},this.addData_ground="",this.add=!0},addCancel:function(e){this.add=!1,this.loading=!1,this.$refs[e].resetFields()},addTrue:function(e){var t=this;if(""!=t.addData_ground)if(t.addData_ground=Object(h.b)(t.addData_ground),Object(h.a)(t.addData_ground))t.$message({message:t.$t("floormanagement.floorformat"),type:"warning"});else{var a=t.addData_ground.split(","),n=Object(h.c)(a);0!=n?(n=(n=[].concat(r()(new s.a(n)))).join(","),t.addData.grounds=n,t.$refs[e].validate(function(a){if(!a)return!1;t.loading=!0,Object(p.d)(t.addData,t.tenantkey_A,t.tenantid_A,t.userName).then(function(a){1001==a.code?(t.add=!1,t.searchList.page=1,t.currentPage1=1,t.getBuildingLists(),t.$message({message:t.$t("buildingmanagement.addsuccess"),type:"success"}),t.loading=!1,t.$refs[e].resetFields()):(t.$message({message:"zh"==t.$store.state.i18n?a.msg:a.enMsg,type:"error"}),t.loading=!1)})})):t.$message({message:t.$t("floormanagement.floorformat"),type:"warning"})}else t.$message({message:t.$t("floormanagement.floorformat"),type:"warning"})},projectEdit:function(e){this.checkMapTypeEdit(this.tableData[e].buildid,this.tableData[e]),this.editData.id=this.tableData[e].id,this.editData.ground=this.tableData[e].ground,this.editData.mapid=this.tableData[e].mapid,this.editData.memo=this.tableData[e].memo,this.editData.buildid=this.tableData[e].buildid,this.editData.name=this.tableData[e].name,this.edit=!0},editTrue:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loading=!0,1==a.buildtype?Object(p._145)(t.editData,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(a.edit=!1,a.getBuildingLists(),a.$message({message:a.$t("beacon.editsuccess"),type:"success"}),a.loading=!1):(a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a.loading=!1)}):Object(p._146)(t.editData,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(a.edit=!1,a.getBuildingLists(),a.$message({message:a.$t("beacon.editsuccess"),type:"success"}),a.loading=!1):(a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a.loading=!1)})})},sendDevOtherAlarmMores:function(e,t){var a=this;this.$confirm("yes"==e?this.$t("otherDev.triggerAlarmtrue"):this.$t("otherDev.cancelAlarmtrue"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var n={alarm:e,devtype:4,inuse:1,groundid:a.tableData[t].id,buildid:a.tableData[t].buildid,projectid:a.tableData[t].projectid};Object(p._134)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"success"}):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})})},projectDele:function(e){5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?this.$message({message:this.$t("warning.permissiondelete"),type:"warning"}):(this.deleteData=this.tableData[e],this.deletes=!0)},delTrue:function(e){var t=this,a={groundid:this.deleteData.id,building:this.deleteData.building,ground:this.deleteData.ground,mapid:this.deleteData.mapid,type:this.intoProjectType,projectid:this.deleteData.projectid};this.loading=!0,Object(p.E)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.deletes=!1,t.getBuildingLists(),t.$message({message:t.$t("buildingmanagement.deletesuccess"),type:"success"}),t.loading=!1):(t.$message({message:t.$t("buildingmanagement.deletefaile"),type:"error"}),t.loading=!1)})},arrangeMap:function(e,t){var a=this,n=this;1==this.tableData[e].maptype?(n.arrange2d=!0,setTimeout(function(){n.$refs.arrange2dmap.arrangeMaps(a.tableData[e],t)},1)):2==this.tableData[e].maptype&&(n.arrange3d=!0,setTimeout(function(){n.$refs.arrange3dmap.arrangeMaps(a.tableData[e],t)},1))},getMsgFormSon2d:function(e){this.arrange2d=e,this.dobuleClick=e},getMsgFormSon3d:function(e){this.arrange3d=e,this.dobuleClick=e},getMapInfoLists:function(e){var t=this,a=void 0;5==this.$store.state.userInfo.prionum?a={tenantid:this.superId,projectid:e,status:3,maptype:this.buildtype}:3!=this.$store.state.userInfo.prionum&&4!=this.$store.state.userInfo.prionum||(a={tenantid:this.tenantid_A,projectid:e,status:3,maptype:this.buildtype}),Object(p._61)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code)if(t.mapList=e.data.list,2==t.buildtype&&t.add){if(t.fileName){var a=t.mapList.find(function(e){return e.filename==t.fileName});t.addData.mapid=a.mapid}}else t.addData.mapid=""})},getBuildings:function(){var e=this,t={tenantid:this.$store.state.intoProjectTenantid,projectid:this.$store.state.intoProjectid};Object(p._26)(t,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code&&(e.buildingList=t.data)})},checkMapType:function(e){var t=this;this.chooseMap=!1;var a=this.buildingList.filter(function(t){return t.id==e});this.buildtype=a[0].buildtype,2==this.buildtype?(t.buildId=a[0].id,Object(p._62)({buildid:t.buildId},t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code&&(e.data.length>0?(t.add&&(t.fileName=e.data[0],t.getMapInfoLists(t.$store.state.intoProjectid)),t.chooseMap=!0):(t.getMapInfoLists(t.$store.state.intoProjectid),t.chooseMap=!1))})):(t.getMapInfoLists(t.$store.state.intoProjectid),t.addData.mapid="")},checkMapTypeEdit:function(e,t){this.changeMap=!0,this.chooseMap=!1;var a=this.buildingList.filter(function(t){return t.id==e});this.buildtype=a[0].buildtype,2==this.buildtype?(t&&(t.mapid?(this.chooseMap=!0,this.changeMap=!1):(this.getMapInfoLists(this.$store.state.intoProjectid),this.chooseMap=!1,this.changeMap=!0)),this.buildId=a[0].id):this.getMapInfoLists(this.$store.state.intoProjectid)}},beforeMount:function(){this.getBuildingLists(),this.getBuildings()}}}).call(t,a("7t+N"))},"4xFG":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4jcq"),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:5!=e.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[5!=e.contrForPrionum?n("div",{staticClass:"menu_header"},[n("Menu")],1):e._e(),e._v(" "),n("div",{staticClass:"content"},[n("el-container",{class:5==e.contrForPrionum?"user":"asi"},[5!=e.contrForPrionum?n("el-aside",[n("Project")],1):e._e(),e._v(" "),n("el-main",[n("div",{staticClass:"project_input",staticStyle:{display:"flex","justify-content":"space-between"}},[3==e.contrForPrionum||4==e.contrForPrionum?n("el-breadcrumb",{staticStyle:{"margin-left":"0"},attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/projectmanagement"}}},[e._v(e._s(e.$t("index.projectmanagement")))]),e._v(" "),n("el-breadcrumb-item",[e._v(e._s(e.intoProjectName))]),e._v(" "),n("el-breadcrumb-item",[e._v(e._s(e.$t("Breadcrumb.Floormanagement")))])],1):e._e(),e._v(" "),n("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap","margin-left":"2%"},attrs:{model:e.searchList}},[n("el-form-item",{staticStyle:{display:"flex","margin-right":"2%"},attrs:{label:e.$t("floormanagement.Building")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("floormanagement.text")},on:{change:e.selectGround},model:{value:e.searchList.buildid,callback:function(t){e.$set(e.searchList,"buildid",t)},expression:"searchList.buildid"}},e._l(e.buildingList,function(e){return n("el-option",{key:e.id,attrs:{label:e.building,value:e.id}})}),1)],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-right":"2%"},attrs:{label:e.$t("floormanagement.floor1")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("floormanagement.text")},model:{value:e.searchList.ground,callback:function(t){e.$set(e.searchList,"ground",t)},expression:"searchList.ground"}},e._l(e.groundList,function(e){return n("el-option",{key:e.id,attrs:{label:e.ground,value:e.ground}})}),1)],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-right":"2%"},attrs:{label:e.$t("floormanagement.Floornumber")}},[n("el-input",{model:{value:e.searchList.groundid,callback:function(t){e.$set(e.searchList,"groundid",t)},expression:"searchList.groundid"}})],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex"}},[n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.searchInfo()}}},[e._v(e._s(e.$t("floormanagement.search")))]),e._v(" "),n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.clearBtn()}}},[e._v(e._s(e.$t("floormanagement.reset")))]),e._v(" "),n("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(t){return e.importExcel()}}},[e._v(e._s(e.$t("terminal.import")))]),e._v(" "),n("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(t){return e.exportExcel()}}},[e._v(e._s(e.$t("terminal.export")))]),e._v(" "),n("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(t){return e.exportExcelAll()}}},[e._v(e._s(e.$t("terminal.exportAll")))]),e._v(" "),n("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(t){return e.addBuildings()}}},[e._v(e._s(e.$t("floormanagement.Add")))])],1)],1)],1),e._v(" "),n("div",{staticClass:"content_project"},[n("div",{staticClass:"exportContent",staticStyle:{display:"flex"}},[n("input",{staticClass:"x_file",attrs:{id:"articleNearFile",name:"excelFile",type:"file",accept:".xls,.xlsx"},on:{change:e.importExcelsNear}}),e._v(" "),n("input",{staticClass:"x_file",attrs:{id:"articlePointFile",name:"excelFile",type:"file",accept:".xls,.xlsx"},on:{change:e.importExcelsPoint}}),e._v(" "),n("input",{staticClass:"x_file",attrs:{id:"articleAreaFile",name:"excelFile",type:"file",accept:".xls,.xlsx"},on:{change:e.importExcelsArea}}),e._v(" "),n("input",{staticClass:"x_file",attrs:{id:"articleImage",name:"excelFile",type:"file",accept:".xls,.xlsx"},on:{change:e.importExcels}})]),e._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"98%","text-align":"center","margin-left":"2%","z-index":"1"},attrs:{data:e.tableData,"max-height":"660",border:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{property:"building",label:e.$t("floormanagement.building"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{property:"ground",label:e.$t("floormanagement.floor"),"show-overflow-tooltip":"","min-width":"77",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.floor")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.text1")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"name",label:e.$t("floormanagement.floorName"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{property:"id","show-overflow-tooltip":"","min-width":"77",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.floornumber")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.text2")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"mapname",label:e.$t("floormanagement.mapname"),"show-overflow-tooltip":"","min-width":"77",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.mapname")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.text3")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}])}),e._v(" "),1==e.intoProjectType?n("el-table-column",{attrs:{property:"nums",label:e.$t("floormanagement.EquipmentQuantity"),"show-overflow-tooltip":"","min-width":"77",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.EquipmentQuantity")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                      "+e._s(e.$t("floormanagement.text4"))+"\n                    ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}],null,!1,518347972)}):e._e(),e._v(" "),1==e.intoProjectType?n("el-table-column",{attrs:{property:"bclocknum",label:e.$t("floormanagement.Numberofpunchpoints"),"show-overflow-tooltip":"","min-width":"80",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.Numberofpunchpoints")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.text5")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}],null,!1,3316580001)}):e._e(),e._v(" "),1==e.intoProjectType?n("el-table-column",{attrs:{property:"balarmnum",label:e.$t("floormanagement.Numberofalarmdevices"),"show-overflow-tooltip":"","min-width":"77",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.Numberofalarmdevices")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.text6")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}],null,!1,3626017029)}):e._e(),e._v(" "),2==e.intoProjectType?n("el-table-column",{attrs:{property:"gwnum",label:e.$t("floormanagement.EquipmentQuantity"),"show-overflow-tooltip":"","min-width":"77",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.EquipmentQuantity")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                      "+e._s(e.$t("floormanagement.text4"))+"\n                    ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}],null,!1,518347972)}):e._e(),e._v(" "),2==e.intoProjectType?n("el-table-column",{attrs:{property:"gwclocknum",label:e.$t("floormanagement.Numberofpunchpoints"),"show-overflow-tooltip":"","min-width":"80",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.Numberofpunchpoints")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.text5")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}],null,!1,3316580001)}):e._e(),e._v(" "),2==e.intoProjectType?n("el-table-column",{attrs:{property:"gwalarmnum",label:e.$t("floormanagement.Numberofalarmdevices"),"show-overflow-tooltip":"","min-width":"77",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[e._v(e._s(e.$t("floormanagement.Numberofalarmdevices")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.text6")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])]}}],null,!1,3626017029)}):e._e(),e._v(" "),n("el-table-column",{attrs:{property:"memo",label:e.$t("floormanagement.Remark"),"show-overflow-tooltip":"","min-width":"110",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:e.$t("floormanagement.operate"),"min-width":"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{size:"mini",type:"primary",trigger:"click"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("floormanagement.operate"),placement:"top"}},[n("el-button",{staticClass:"icon_button",attrs:{type:"primary"}},[n("img",{attrs:{src:a("VJ6t")}})])],1),e._v(" "),n("el-dropdown-menu",{staticClass:"selects",staticStyle:{"background-color":"rgb(219, 222, 231)"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(a){return e.projectEdit(t.$index,e.tableData)}}},[e._v(e._s(e.$t("floormanagement.edit")))])],1),e._v(" "),n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"delss",attrs:{size:"mini"},on:{click:function(a){return e.projectDele(t.$index)}}},[e._v(e._s(e.$t("floormanagement.delete")))])],1),e._v(" "),n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(a){return e.sendDevOtherAlarmMores("yes",t.$index)}}},[e._v(e._s(e.$t("otherDev.triggerAlarm")))])],1),e._v(" "),n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(a){return e.sendDevOtherAlarmMores("no",t.$index)}}},[e._v(e._s(e.$t("otherDev.cancelAlarm")))])],1)],1)],1),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("floormanagement.arrangement"),placement:"top"}},[n("el-button",{staticClass:"icon_button",attrs:{type:"primary",disabled:e.dobuleClick},on:{click:function(a){return e.arrangeMap(t.$index,t)}}},[n("img",{attrs:{src:a("7iG5")}})])],1),e._v(" "),n("el-dropdown",{attrs:{size:"mini",type:"primary",trigger:"click"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("terminal.export"),placement:"top"}},[n("el-button",{staticClass:"icon_button icon-control",attrs:{type:"primary"}},[n("i",{staticClass:"el-icon-download download"})])],1),e._v(" "),n("el-dropdown-menu",{staticClass:"selects",staticStyle:{"background-color":"rgb(219, 222, 231)"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(a){return e.exportExcelArea(t.$index)}}},[e._v(e._s(e.$t("terminal.exportArea")))])],1),e._v(" "),n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(a){return e.exportExcelPoint(t.$index)}}},[e._v(e._s(e.$t("floormanagement.Point")))])],1),e._v(" "),n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(a){return e.exportExcelNear(t.$index)}}},[e._v(e._s(e.$t("floormanagement.Near")))])],1)],1)],1),e._v(" "),n("el-dropdown",{attrs:{size:"mini",type:"primary",trigger:"click"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("terminal.import"),placement:"top"}},[n("el-button",{staticClass:"icon_button icon-control",attrs:{type:"primary"}},[n("i",{staticClass:"el-icon-upload2 upload"})])],1),e._v(" "),n("el-dropdown-menu",{staticClass:"selects",staticStyle:{"background-color":"rgb(219, 222, 231)"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(t){return e.importExcelArea()}}},[e._v(e._s(e.$t("terminal.importArea")))])],1),e._v(" "),n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(t){return e.importExcelPoint()}}},[e._v(e._s(e.$t("floormanagement.Point")))])],1),e._v(" "),n("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[n("el-button",{staticClass:"editss",attrs:{size:"mini"},on:{click:function(t){return e.importExcelNear()}}},[e._v(e._s(e.$t("floormanagement.Near")))])],1)],1)],1)]}}])})],1),e._v(" "),n("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[n("el-pagination",{attrs:{"current-page":e.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-size":e.pageCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage1=t},"update:current-page":function(t){e.currentPage1=t}}})],1)],1),e._v(" "),n("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.text7"),width:"30%",visible:e.add},on:{"update:visible":function(t){e.add=t},close:function(t){return e.addCancel("addData")}}},[n("el-form",{ref:"addData",staticStyle:{"text-align":"left"},attrs:{model:e.addData,"label-width":"100px",rules:e.addRules}},[n("el-form-item",{attrs:{label:e.$t("floormanagement.Building"),prop:"buildid"}},[n("el-select",{attrs:{placeholder:e.$t("floormanagement.text8"),clearable:"",filterable:""},on:{change:e.checkMapType},model:{value:e.addData.buildid,callback:function(t){e.$set(e.addData,"buildid",t)},expression:"addData.buildid"}},e._l(e.buildingList,function(e){return n("el-option",{key:e.id,attrs:{label:e.building,value:e.id}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.floor1"),prop:""}},[n("el-input",{attrs:{placeholder:e.$t("floormanagement.text9")},model:{value:e.addData_ground,callback:function(t){e.addData_ground=t},expression:"addData_ground"}}),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                    "+e._s(e.$t("floormanagement.tet"))),n("br"),e._v("\n                    "+e._s(e.$t("floormanagement.tet1"))),n("br"),e._v("\n                    "+e._s(e.$t("floormanagement.tet2"))),n("br"),e._v("\n                    "+e._s(e.$t("floormanagement.tet3"))),n("br"),e._v("\n                    "+e._s(e.$t("floormanagement.tet4"))+"\n                  ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Mapname"),prop:"mapid"}},[n("el-select",{attrs:{placeholder:e.$t("floormanagement.text10"),clearable:"",filterable:"",disabled:e.chooseMap},model:{value:e.addData.mapid,callback:function(t){e.$set(e.addData,"mapid",t)},expression:"addData.mapid"}},e._l(e.mapList,function(e){return n("el-option",{key:e.mapid,attrs:{label:e.mapname,value:e.mapid}})}),1),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.tet5"))),n("br")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Remark1")}},[n("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:"64"},model:{value:e.addData.memo,callback:function(t){e.$set(e.addData,"memo",t)},expression:"addData.memo"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.addCancel("addData")}}},[e._v(e._s(e.$t("warning.Cancel")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.addTrue("addData")}}},[e._v(e._s(e.$t("warning.Sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.text11"),visible:e.edit,width:"30%"},on:{"update:visible":function(t){e.edit=t}}},[n("el-form",{ref:"editData",staticStyle:{"text-align":"left"},attrs:{model:e.editData,"label-width":"100px",rules:e.addRules}},[n("el-form-item",{attrs:{label:e.$t("floormanagement.floor1"),prop:""}},[n("el-input",{attrs:{placeholder:e.$t("floormanagement.text9"),disabled:""},model:{value:e.editData.ground,callback:function(t){e.$set(e.editData,"ground",t)},expression:"editData.ground"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.floorName1"),prop:""}},[n("el-input",{attrs:{placeholder:e.$t("floormanagement.placeholderName"),maxlength:"32"},model:{value:e.editData.name,callback:function(t){e.$set(e.editData,"name",t)},expression:"editData.name"}})],1),e._v(" "),1==e.buildtype||1==e.changeMap?n("el-form-item",{attrs:{label:e.$t("floormanagement.Mapname"),prop:"mapid"}},[n("el-select",{attrs:{placeholder:e.$t("floormanagement.text10"),clearable:"",filterable:"",disabled:e.chooseMap},model:{value:e.editData.mapid,callback:function(t){e.$set(e.editData,"mapid",t)},expression:"editData.mapid"}},e._l(e.mapList,function(e){return n("el-option",{key:e.mapid,attrs:{label:e.mapname,value:e.mapid}})}),1)],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Remark1")}},[n("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:"64"},model:{value:e.editData.memo,callback:function(t){e.$set(e.editData,"memo",t)},expression:"editData.memo"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.edit=!1,e.loading=!1}}},[e._v(e._s(e.$t("warning.Cancel")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.editTrue("editData")}}},[e._v(e._s(e.$t("warning.Sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.text12"),visible:e.deletes,width:"30%"},on:{"update:visible":function(t){e.deletes=t}}},[n("el-form",{ref:"deleteData",staticStyle:{"text-align":"left"},attrs:{model:e.deleteData,"label-width":"100px"}},[n("el-form-item",{attrs:{label:e.$t("floormanagement.Building"),prop:""}},[n("el-input",{attrs:{disabled:""},model:{value:e.deleteData.building,callback:function(t){e.$set(e.deleteData,"building",t)},expression:"deleteData.building"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.floor1"),prop:""}},[n("el-input",{attrs:{disabled:""},model:{value:e.deleteData.ground,callback:function(t){e.$set(e.deleteData,"ground",t)},expression:"deleteData.ground"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Mapname"),prop:""}},[n("el-input",{attrs:{disabled:""},model:{value:e.deleteData.mapname,callback:function(t){e.$set(e.deleteData,"mapname",t)},expression:"deleteData.mapname"}})],1),e._v(" "),1==e.intoProjectType?n("el-form-item",{attrs:{label:e.$t("floormanagement.EquipmentQuantity1"),prop:""}},[n("el-input",{attrs:{disabled:""},model:{value:e.deleteData.nums,callback:function(t){e.$set(e.deleteData,"nums",t)},expression:"deleteData.nums"}})],1):e._e(),e._v(" "),2==e.intoProjectType?n("el-form-item",{attrs:{label:e.$t("floormanagement.EquipmentQuantity1"),prop:""}},[n("el-input",{attrs:{disabled:""},model:{value:e.deleteData.gwnum,callback:function(t){e.$set(e.deleteData,"gwnum",t)},expression:"deleteData.gwnum"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Remark1")}},[n("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:"64",disabled:""},model:{value:e.deleteData.memo,callback:function(t){e.$set(e.deleteData,"memo",t)},expression:"deleteData.memo"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.deletes=!1,e.loading=!1}}},[e._v(e._s(e.$t("warning.Cancel")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.delTrue("deleteData")}}},[e._v(e._s(e.$t("warning.Sure")))])],1)],1),e._v(" "),e.arrange2d?n("Arrange2dMap",{ref:"arrange2dmap",on:{change:e.getMsgFormSon2d}}):e._e(),e._v(" "),e.arrange3d?n("Arrange3dMap",{ref:"arrange3dmap",on:{change:e.getMsgFormSon3d}}):e._e()],1)],1)],1)])},staticRenderFns:[]};var i=function(e){a("H5m4")},r=a("VU/8")(n.a,s,!1,i,"data-v-adfb7436",null);t.default=r.exports},"5X0f":function(e,t){},"6eFq":function(e,t,a){"use strict";(function(e){var n=a("mvHQ"),s=a.n(n),i=a("woOf"),r=a.n(i),o=a("5qI+"),l=a.n(o),c=a("j5PW"),d=(a.n(c),a("C7iZ")),u=(a.n(d),a("qONO")),m=(a.n(u),a("nQqC")),g=a("PO8r"),h=a("CTnB"),p=a("c2Ch");t.a={components:{Menu:g.a,Project:h.a,basecard:m.a},name:"BuildingManagement",data:function(){return{aoagw:this.$store.state.functionParts.aoagw,smoke:this.$store.state.functionParts.smoke,alertor:this.$store.state.functionParts.alertor,blesensor:this.$store.state.functionParts.blesensor,camera:this.$store.state.functionParts.camera,isCollapse:!1,activeMenu:"0",i8n:this.$store.state.i18n,vedio:!1,vedio2:!1,major:"",minor:"",contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,superId:this.$store.state.userInfo.superid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,delprio:this.$store.state.userInfo.delprio,intoProjectid:this.$store.state.intoProjectid,intoProjectType:this.$store.state.intoProjectType,loading:!1,trancheShow3D:!1,setArea3DMarker:"",buildid:"",currentProjectid:{groundid:""},searchList:{projectid:this.$store.state.intoProjectid,mapid:"",buildid:"",ground:"",groundid:"",page:1,count:20},TrancheDatas:{beaconids:"",tranche:"",alias:"",alarmid:""},currentPage2:1,totalArrange:0,dobuleClick:!1,groundListCopy:[],newGround:"",arrange3D:!1,cancelTranched:!1,searchArrangeList:{devtype:"",projectid:"",inallot:"",inuse:"",workstate:"",page:"",count:"",deveui:"",alias:""},searchDeveui:"",searchAlias:"",searchInuse:"",iconSrc:"",inuseType:[{index:1,value:this.$t("floormanagement.value1")},{index:2,value:this.$t("floormanagement.value2")}],groundid:"",selectArrangeData:"",arrangeData:[],showTable:!1,featureArrs:[],editFeatures3D:!1,setAreas:!1,setAnglimit3D:!1,setAreaDeveui:"",radio:"",oldRadio:"",areaInfo:"",setAreasUrl1:"../../../static/1.jpg",setAreasUrl2:"../../../static/2.jpg",setAreasUrl3:"../../../static/3.jpg",setAreasUrl4:"../../../static/4.jpg",setAreasUrl6:"../../../static/6.jpg",setAreasUrl7:"../../../static/7.jpg",setAreasUrl8:"../../../static/8.jpg",setAreasUrl9:"../../../static/9.jpg",setAreasUrl11:"../../../static/11.jpg",setAreasUrl12:"../../../static/12.jpg",setAreasUrl13:"../../../static/13.jpg",setAreasUrl14:"../../../static/14.jpg",setAreasUrl15:"../../../static/15.jpg",arrangeFeatures:"",editFeatureData:{deveui:"",alias:"",major:"",minor:"",devtype:""},editFeatureData3D:{deveui:"",alias:""},editFeatureInfo3D:"",editFeatureInfo3DText:"",source:null,clearBeaconList:!1,adjoinBeaconShow3D:!1,adjoinBeacon:[],adjoinBeaconAlias:"",adjoinBeaconData:{beaconid:"",nearbeacons:""},adjoinBeaconInfo:"",adjoinBeaconPopMarker:"",adjoinBeaconDataList:"",positionTrancheList:[],alarmTrancheList:[],setTrancheList:[],setAlarmTrancheList:[],addTranchePosition:!1,addTrancheAlarm:!1,projectTable:[],sub:!1,addPoint3D:!1,adj:!1,polygonOnce:!1,vectorList:[],subFlag:!1,map3d:null,lastGroupid:"",changeGroup:!0,fmapId:"",themeId:"",scrollFloorControl:"",layer:null,layerList:[],layer2:null,setNewMarker:!0,popMarker:null,popMarkerTip:!1,popMarkerList:[],resetIcon:!1,resetIconInfo:"",resetIconInfoText:"",pointList:[],currentFeature:[],pointLists:[],changeMajor:!0,changeMinor:!0,showOption:1==this.$store.state.intoProjectType?1:5,showOptionName:1==this.$store.state.intoProjectType?this.$t("change.showAliases"):this.$t("change.showAlarm"),showOptions:!1,isShowLines:!1,lineMarkerList:[],lineMarker:"",markerPointList:[],length:0,width:0,showDistance:!1,distanceData:{x:0,y:0}}},watch:{polygonOnce:function(e){e&&(this.closeSub(),this.polygonOnce=!1)},activeMenu:function(e){this.showOptions=0==e},"$i18n.locale":function(){this.i8n=this.$store.state.i18n,r()(this.$data.inuseType,this.$options.data.call(this).inuseType),r()(this.$data.showOptionName,this.$options.data.call(this).showOptionName)}},methods:{showOptionsTrue:function(e){switch(this.showOption=Number(e),this.showOption){case 1:this.showOptionName=this.$t("change.showAliases");break;case 2:this.showOptionName=this.$t("change.showMajor16");break;case 3:this.showOptionName=this.$t("change.showMajor10");break;case 4:this.showOptionName=this.$t("change.showPosition");break;case 5:this.showOptionName=this.$t("change.showAlarm")}this.clearArranges()},changeBase:function(e){"Major"==e.label?this.changMajor():"Minor"==e.label&&this.changMinor()},changMajor:function(){this.changeMajor?this.arrangeData.forEach(function(e){e.major=parseInt(e.major,16)}):this.arrangeData.forEach(function(e){switch(e.major=e.major.toString(16),e.major.length){case 1:e.major="000"+e.major;break;case 2:e.major="00"+e.major;break;case 3:e.major="0"+e.major}}),this.changeMajor=!this.changeMajor},changMinor:function(){this.changeMinor?this.arrangeData.forEach(function(e){e.minor=parseInt(e.minor,16)}):this.arrangeData.forEach(function(e){switch(e.minor=e.minor.toString(16),e.minor.length){case 1:e.minor="000"+e.minor;break;case 2:e.minor="00"+e.minor;break;case 3:e.minor="0"+e.minor}}),this.changeMinor=!this.changeMinor},removeGroundDevs:function(){var e=this;this.$confirm(this.$t("floormanagement.RemoveGroundDevText"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var t={groundid:e.groundid,projectid:e.intoProjectid,type:e.intoProjectType};Object(p._130)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("terminal.tet28"),type:"success"}),e.clearArranges()):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})})},setTable:function(){this.showTable=!this.showTable,this.showTable?(this.$refs.mapContent.style.width="70%",this.$refs.tableContent.style.width="30%",this.arrange3D&&(this.$refs.fengMap.style.width="70%")):(this.$refs.mapContent.style.width="100%",this.$refs.tableContent.style.width="0%",this.arrange3D&&(this.$refs.fengMap.style.width="90%"))},menuClick:function(e,t){var a=this;this.activeMenu=e;var n={devtype:e,tenantid:5==a.contrForPrionum?a.superId:a.tenantid_A,page:t,count:20,projectid:a.intoProjectid,inuse:a.searchInuse};switch(e){case"0":a.changeMajor=!0,a.changeMinor=!0,2==a.$store.state.intoProjectType?a.getGatewayPos(a.intoProjectid,1):1==a.$store.state.intoProjectType&&a.getBeaconPos(a.intoProjectid,1);break;case"1":case"2":case"3":case"5":Object(p._46)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code&&(a.arrangeData=e.data.list,a.totalArrange=e.data.size)})}},closeVedio:function(e){var t=document.getElementById(e);t.pause(),t.currentTime=0},setSub3D:function(){this.addPoint3D=!0,this.sub=!this.sub},closeSub3D:function(){this.addPoint3D=!1,this.sub=!this.sub},addSubPolygon3D:function(){if(this.isShowLines){var e=this;e.lineMarkerList=[];var t={groundid:this.groundid};Object(p._76)(t,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){if(1001===t.code){e.pointLists=t.data;var a=[];t.data.forEach(function(t){if(!isNaN(Number(t.pointid))){var n={x:t.nodeX,y:t.nodeY,xy:[t.nodeX,t.nodeY],id:t.pointid},s={mapCoord:{coord3:{x:t.nodeX,y:t.nodeY}},groupID:e.lastGroupid};e.addMarkerPoints(s,n)}0!==t.list.length&&t.list.forEach(function(e){a.push([e,t])})});var n=!1,s=[];a.forEach(function(e){0===s.length?s.push(e):(s.forEach(function(t){e[0].pointid===t[1].pointid&&e[1].pointid===t[0].pointid&&(n=!0)}),n||s.push(e),n=!1)}),s.forEach(function(t,a){var n=new l.a.FMSegment;n.points=[{x:t[0].nodeX,y:t[0].nodeY,z:1},{x:t[1].nodeX,y:t[1].nodeY,z:1}],n.level=e.lastGroupid,e.lineMarker=new l.a.FMLineMarker({segments:[n],width:2,color:"#ccc",type:l.a.FMLineType.FULL}),e.lineMarker.pointid=t[0].pointid,e.lineMarker.addTo(e.map3d),e.lineMarkerList.push(e.lineMarker)})}})}},onmap:function(e,t,a,n){document.oncontextmenu=function(e){return!1};var s=this;s.lastGroupid=e;var i={container:document.getElementById("fengMap"),level:e,visibleLevels:[e],focusAlpha:.1,appName:a,key:n,defaultControlsPose:0,viewMode:l.a.FMViewMode.MODE_2D,mapID:s.fmapId,themeID:s.themeId,zoomRange:[1,29]};this.map3d=new l.a.FMMap(i),this.map3d.on("loaded",function(){1==s.$store.state.intoProjectType?s.getArrangeBeaconPos3D(t,s.lastGroupid):2==s.$store.state.intoProjectType&&s.getArrangeGatewayPos3D(t,s.lastGroupid)}),this.map3d.on("click",function(e){if("64"==e.targets[0].type||"8"==e.targets[0].type)s.setNewMarker=!1,0==e.mouseEvent.button?s.addPopInfoWindowLeft(e.targets[0]):2===e.mouseEvent.button&&s.addPopInfoWindowRight(e.targets[0],s.lastGroupid);else if(0===e.mouseEvent.button){if(s.addPoint3D){var t={x:e.coords.x,y:e.coords.y},a={mapCoord:{coord3:t},groupID:s.lastGroupid},n={x:t.x,y:t.y,xy:[t.x,t.y],id:""};return void s.addMarkerPoint(a,n)}if(s.setNewMarker)if(s.resetIcon){s.resetIconInfo.moveTo({x:e.coords.x,y:e.coords.y,animate:!0,time:.5,finish:function(){s.resetIconInfo.selfAttr.x=e.coords.x,s.resetIconInfo.selfAttr.y=e.coords.y}});var i={projectid:s.intoProjectid,groundid:s.groundid,deveui:s.resetIconInfo.selfAttr.deveui,longi:e.coords.x,lati:e.coords.y,falg:!0};if(s.resetIconInfo.selfAttr.devtype){var r={projectid:s.intoProjectid,groundid:s.groundid,deveui:s.resetIconInfo.selfAttr.deveui,devtype:s.resetIconInfo.selfAttr.devtype,longi:e.coords.x,lati:e.coords.y,falg:!0};Object(p._165)(r,s.tenantkey_A,s.tenantid_A,s.userName).then(function(e){1001==e.code?(s.$message({message:s.$t("Building.Layoutsuccessful"),type:"success"}),s.resetIcon=!1):s.$message({message:"zh"==s.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else 1==s.intoProjectType?Object(p._143)(i,s.tenantkey_A,s.tenantid_A,s.userName).then(function(e){1001==e.code?(s.$message({message:s.$t("Building.Layoutsuccessful"),type:"success"}),s.resetIcon=!1):s.$message({message:"zh"==s.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):Object(p._158)(i,s.tenantkey_A,s.tenantid_A,s.userName).then(function(e){1001==e.code?(s.$message({message:s.$t("Building.Layoutsuccessful"),type:"success"}),s.resetIcon=!1):s.$message({message:"zh"==s.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else{var o={x:e.coords.x,y:e.coords.y};if(null==s.selectArrangeData||""==s.selectArrangeData)return void s.$message({message:s.$t("floormanagement.unuseddevice"),type:"warning"});var l,c={mapCoord:{coord2:o},groupID:s.lastGroupid};"0"!=s.activeMenu?l={x:o.x,y:o.y,alias:s.selectArrangeData.alias,deveui:s.selectArrangeData.deveui,major:s.selectArrangeData.major,minor:s.selectArrangeData.minor,devtype:s.selectArrangeData.devtype}:1==s.$store.state.intoProjectType?l={x:o.x,y:o.y,alias:s.selectArrangeData.alias,deveui:s.selectArrangeData.beaconid,major:s.selectArrangeData.major,minor:s.selectArrangeData.minor,type:s.selectArrangeData.type,tranche:s.selectArrangeData.tranche,clockin:s.selectArrangeData.clockin,anglimit:s.selectArrangeData.anglimit,warning:"",nearbeacons:""}:2==s.$store.state.intoProjectType&&(l={x:o.x,y:o.y,alias:s.selectArrangeData.alias,deveui:s.selectArrangeData.deveui,major:s.selectArrangeData.major,minor:s.selectArrangeData.minor,type:"",clockin:s.selectArrangeData.clockin,tranche:s.selectArrangeData.tranche,warning:s.selectArrangeData.warning,anglimit:s.selectArrangeData.anglimit,nearbeacons:""}),s.addMarker(c,l)}}})},getArrangeBeaconPos3D:function(e,t){var a=this,n={projectype:1,groundid:a.groundid,projectid:e,inallot:1,inuse:1};Object(p._35)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){if(1001==e.code){var n=e.data.devList,s=e.data.otherList;if(a.arrangeFeatures=n.concat(s),a.arrangeFeatures.length>0)for(var i=0;i<a.arrangeFeatures.length;i++)a.addMarkers(a.arrangeFeatures[i],t)}})},getArrangeGatewayPos3D:function(e,t){var a=this,n={projectype:2,groundid:this.groundid,projectid:e,inallot:1,inuse:1};Object(p._35)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){if(1001==e.code){var n=e.data.devList,s=e.data.otherList;if(a.arrangeFeatures=n.concat(s),a.arrangeFeatures.length>0)for(var i=0;i<a.arrangeFeatures.length;i++)a.addMarkers(a.arrangeFeatures[i],t)}})},addMarkers:function(e,t){null==e.tranche&&(e.tranche="");var a,n=e.alias;switch(this.showOption){case 1:n=e.alias;break;case 2:n=e.major+"/"+e.minor;break;case 3:n=parseInt(e.major,16)+"/"+parseInt(e.minor,16)}var s=e.alarmname?"/"+e.alarmname:"";if(4==this.showOption&&(s=e.tranche?"/"+e.tranche:""),e.devtype){n=e.alias;var i={x:e.lastx,y:e.lasty};a={x:e.lastx,y:e.lasty,xy:[e.lastx,e.lasty],alias:e.alias,deveui:e.deveui,major:e.major,minor:e.minor,devtype:e.devtype,tranche:e.tranche,alarmid:e.alarmid,alarmname:e.alarmname};var r=void 0;switch(e.devtype){case 1:r="../../../static/aoa.png";break;case 2:r="../../../static/smoke.png";break;case 3:r="../../../static/alarm.png";break;case 5:r="../../../static/camera.png"}this.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:n+s}},x:i.x,y:i.y,height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER},image:{url:r,size:[100,100]}})}else if(1==this.$store.state.intoProjectType){i={x:e.longi,y:e.lati};a={x:e.longi,y:e.lati,xy:[e.longi,e.lati],alias:e.alias,deveui:e.beaconid,major:e.major,minor:e.minor,type:e.type,clockin:e.clockin,tranche:e.tranche,anglimit:e.anglimit,warning:"",nearbeacons:"",alarmid:e.alarmid,alarmname:e.alarmname},2==e.type?this.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:n+s}},x:i.x,y:i.y,image:{url:"../../../static/beacon_sos.png",size:[100,100]},height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}}):1==e.type&&1==e.clockin?this.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fcollision:!1,ontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:n+s}},x:i.x,y:i.y,image:{url:"../../../static/clock.png",size:[100,100]},height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}}):this.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:n+s}},image:{url:this.iconSrc,size:[100,100]},x:i.x,y:i.y,collision:!1,height:1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}})}else if(2==this.$store.state.intoProjectType){n=e.alias;i={x:e.lastx,y:e.lasty};a={x:e.lastx,y:e.lasty,xy:[e.lastx,e.lasty],alias:e.alias,deveui:e.deveui,major:e.major,minor:e.minor,type:"",clockin:e.clockin,warning:e.warning,tranche:e.tranche,anglimit:e.anglimit,nearbeacons:"",alarmid:e.alarmid,alarmname:e.alarmname},2==e.warning?this.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:n+s}},x:i.x,y:i.y,image:{url:"../../../static/gateway_sos.png",size:[100,100]},height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}}):1==e.clockin?this.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:n+s}},x:i.x,y:i.y,image:{url:"../../../static/clock.png",size:[100,100]},height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}}):this.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:n+s}},x:i.x,y:i.y,height:10,image:{url:this.iconSrc,size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}})}this.layer.selfAttr=a;var o=this.map3d.getLevel(),c=this.map3d.getFloor(o);this.layer.addTo(c),this.layerList.push(this.layer)},addMarker:function(e,t){var a=this;a.resetIcon=!1;var n=e.mapCoord.coord2,s=t.alias;switch(a.showOption){case 1:s=t.alias;break;case 2:s=t.major+"/"+t.minor;break;case 3:s=parseInt(t.major,16)+"/"+parseInt(t.minor,16)}if(t.devtype&&(s=t.alias),2==this.$store.state.intoProjectType&&(s=t.alias),"0"!=a.activeMenu){var i=void 0;switch(a.activeMenu){case"1":i="../../../static/aoa.png";break;case"2":i="../../../static/smoke.png";break;case"3":i="../../../static/alarm.png";break;case"5":i="../../../static/camera.png"}a.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:s}},image:{url:i,size:[100,100]},x:n.x,y:n.y,height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}})}else 2==t.type?a.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:s}},image:{url:"../../../static/beacon_sos.png",size:[100,100]},x:n.x,y:n.y,height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}}):2==t.warning?a.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:s}},x:n.x,y:n.y,image:{url:"../../../static/gateway_sos.png",size:[100,100]},height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}}):a.layer=new l.a.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:l.a.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:s}},x:n.x,y:n.y,image:{url:a.iconSrc,size:[100,100]},height:1,collision:!1,anchor:{baseon:"image",anchor:l.a.FMMarkerAnchor.CENTER}});a.layer.selfAttr=t,a.layer.selfAttr.tranche="",a.layer.selfAttr.alarmid="",a.layer.selfAttr.alarmname="";var r=this.map3d.getLevel(),o=this.map3d.getFloor(r);a.layer.addTo(o),a.layerList.push(a.layer);var c={projectid:a.intoProjectid,groundid:a.groundid,deveui:t.deveui,longi:t.x,lati:t.y,falg:!0};if("0"!=a.activeMenu){var d={projectid:a.intoProjectid,groundid:a.groundid,deveui:t.deveui,devtype:a.activeMenu,longi:t.x,lati:t.y,falg:!0};Object(p._165)(d,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("Building.Layoutsuccessful"),type:"success"}),a.totalArrange-=1,a.delTableDev(n)):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else 1==a.intoProjectType?Object(p._143)(c,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("Building.Layoutsuccessful"),type:"success"}),a.totalArrange-=1,a.delTableDev(n)):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):Object(p._158)(c,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("Building.Layoutsuccessful"),type:"success"}),a.totalArrange-=1,a.delTableDev(n)):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},addMarkerPoint:function(e,t){var a=this,n=e.mapCoord.coord3;a.layer=new l.a.FMImageMarker({x:n.x,y:n.y,height:10,url:"../../../static/near.png",size:32,collision:!1}),a.layer.selfAttr=t;var s={groundid:this.groundid,nodeX:t.x,nodeY:t.y};Object(p.r)(s,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){a.$message({message:a.$t("floormanagement.Layoutpointsuccess"),type:"success"}),a.subFlag=!1,a.vectorList=[],a.layer.selfAttr.id=e.data;var t=a.map3d.getLevel(),n=a.map3d.getFloor(t);a.layer.addTo(n),a.markerPointList.push(a.layer),a.layerList.push(a.layer),a.pointLists.push({pointid:e.data,list:[]})}else a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a.subFlag=!1})},addMarkerPoints:function(e,t){var a=e.mapCoord.coord3;this.layer=new l.a.FMImageMarker({x:a.x,y:a.y,height:1,url:"../../../static/near.png",size:32}),this.layer.selfAttr=t;var n=this.map3d.getLevel(),s=this.map3d.getFloor(n);this.layer.addTo(s),this.markerPointList.push(this.layer),this.layerList.push(this.layer)},delTableDev:function(e){if(1==this.$store.state.intoProjectType){var t=void 0;if("0"!=this.activeMenu)for(var a=0;a<this.arrangeData.length;a++)this.selectArrangeData.deveui==this.arrangeData[a].deveui&&(t=a);else for(var n=0;n<this.arrangeData.length;n++)this.selectArrangeData.beaconid==this.arrangeData[n].beaconid&&(t=n);this.arrangeData[t].x=e.x,this.arrangeData[t].y=e.y,this.arrangeData.splice(t,1),this.selectArrangeData=""}else if(2==this.$store.state.intoProjectType){for(var s=void 0,i=0;i<this.arrangeData.length;i++)this.selectArrangeData.deveui==this.arrangeData[i].deveui&&(s=i);this.arrangeData.splice(s,1),this.selectArrangeData=""}},addPopInfoWindowLeft:function(e){if(e.selfAttr.devtype)this.$message({message:this.$t("floormanagement.selectNonOther"),type:"warning"});else if(window.event.shiftKey){if(this.currentFeature.includes(e.selfAttr.id)||this.currentFeature.includes(e.selfAttr.deveui))return this.currentFeature.includes(e.selfAttr.id)&&(this.currentFeature=this.currentFeature.filter(function(t){return t!=e.selfAttr.id}),e.url="../../../static/near.png"),void(this.currentFeature.includes(e.selfAttr.deveui)&&(this.currentFeature=this.currentFeature.filter(function(t){return t!=e.selfAttr.deveui}),e.setImage(this.iconSrc,[100,100]),e.update()));this.currentFeature.push(e.selfAttr.id||e.selfAttr.deveui),1==this.currentFeature.length?e.selfAttr.id?e.url="../../../static/near2.png":e.selfAttr.deveui&&(e.setImage("../../../static/beacon_sos.png",[100,100]),e.update()):e.selfAttr.id?e.url="../../../static/near1.png":e.selfAttr.deveui&&(e.setImage("../../../static/beacon_green.png",[100,100]),e.update())}else this.currentFeature=[]},showLines3D:function(){this.isShowLines?(this.isShowLines=!this.isShowLines,this.lineMarkerList.forEach(function(e){e.remove()}),this.markerPointList.forEach(function(e){e.remove()}),this.markerPointList=[]):(this.isShowLines=!this.isShowLines,this.addSubPolygon3D())},setAdj3D:function(){var e=this;if(0!==e.currentFeature.length)if(1!==e.currentFeature.length){var t=e.currentFeature[0],a=e.currentFeature.map(function(e,t){if(t>0)return e}).slice(1).join(","),n={groundid:e.groundid,pointid:t,pointidNears:a};Object(p.s)(n,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("floormanagement.Layoutsuccessful"),type:"success"}),e.currentFeature=[],e.clearArranges()):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else e.$message({message:e.$t("floormanagement.adjacentpoint"),type:"warning"});else e.$message({message:e.$t("floormanagement.Pleaseselectpoint"),type:"warning"})},cancelNearList3D:function(e,t){var a=this,n=e.selfAttr.deveui||e.selfAttr.id;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?a.$message({message:a.$t("warning.permissiondelete"),type:"warning"}):a.$confirm(a.$t("floormanagement.adjacencyrelationship"),a.$t("Building.tips"),{confirmButtonText:a.$t("terminal.confirm"),cancelButtonText:a.$t("terminal.cancel"),type:"warning"}).then(function(){Object(p.W)({groundid:a.groundid,pointid:n},a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("beacon.deletesuccess"),type:"success"}),a.clearArranges()):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t.remove(),a.popMarkerTip=!1})}).catch(function(){t.remove(),a.popMarkerTip=!1})},delPolygon3D:function(e,t){var a=this;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?a.$message({message:a.$t("warning.permissiondelete"),type:"warning"}):a.$confirm(a.$t("floormanagement.Aredelete"),a.$t("Building.tips"),{confirmButtonText:a.$t("terminal.confirm"),cancelButtonText:a.$t("terminal.cancel"),type:"warning"}).then(function(){Object(p.V)({pointid:e.selfAttr.id},a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.$message({message:a.$t("buildingmanagement.deletesuccess"),type:"success"}),a.clearArranges()):a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t.remove(),a.popMarkerTip=!1})})},addPopInfoWindowRight:function(e,t){var a=this;a.popMarkerTip&&a.popMarker.remove();var n=this.intoProjectType;if(e.selfAttr.deveui){e.selfAttr.devtype||a.pointLists.forEach(function(t){t.pointid==e.selfAttr.deveui&&(t.list.length>0?a.clearBeaconList=!0:a.clearBeaconList=!1)});var s={x:e.selfAttr.x,y:e.selfAttr.y,anchor:l.a.FMMarkerAnchor.LEFT_BOTTOM,domWidth:e.selfAttr.devtype?120:1==a.clearBeaconList?130:120,domHeight:e.selfAttr.devtype?160:1==a.clearBeaconList?280:240,collision:!1,content:' <div style=\'text-align:left;background: #f1f5f7\' calss="threecontent" >\n          <ul id="popup-content">\n            <li style="margin-top:5px;text-align:right">\n              <a style="margin-right:5px" href="#" id="polygonMenu-closer" class="ol-popup-closer" onclick="closeWindow3D()">\n                 <img src="../../../static/close.jpg"  width="11" height="11"/>\n              </a>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px">\n              <button onclick="del3D()" class="el-button  el-button--mini BUTTON DELETE" >'+a.$t("tet.delete")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px">\n              <button onclick="edit3D()" class="el-button  el-button--mini BUTTON" >'+a.$t("tet.edit")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px" '+(e.selfAttr.devtype?'class="hiddenclock"':"")+'>\n              <button onclick="setAreas3D()" class="el-button  el-button--mini BUTTON" >'+a.$t("floormanagement.Scanningarea")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px">\n              <button onclick="setArea3D()" class="el-button  el-button--mini BUTTON" >'+a.$t("floormanagement.Setarea")+'</button>\n            </li>\n              <li style="margin-top:3px;padding-bottom:3px" '+(""==e.selfAttr.tranche||1!=n||e.selfAttr.devtype?'class="hiddenclock"':"")+'>\n              <button onclick="setAdjoinBeacon3D()" class="el-button  el-button--mini BUTTON" >'+a.$t("tet.Adjacentbeacon")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px" '+((2==e.selfAttr.clockin&&1==e.selfAttr.type||1==e.selfAttr.warning&&2==e.selfAttr.clockin)&&!e.selfAttr.devtype?"":'class="hiddenclock"')+'>\n              <button onclick="setClock3D()" class="el-button  el-button--mini BUTTON" >'+a.$t("floormanagement.Setascheckin")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px" '+((1==e.selfAttr.clockin&&1==e.selfAttr.type||1==e.selfAttr.warning&&1==e.selfAttr.clockin)&&!e.selfAttr.devtype?"":'class="hiddenclock"')+'>\n              <button onclick="removeClock3D()" class="el-button  el-button--mini BUTTON" >'+a.$t("floormanagement.Cancelclockout")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px" '+(1!=a.clearBeaconList||e.selfAttr.devtype?'class="hiddenclock"':"")+'>\n              <button onclick="cancelNearList3D()" class="el-button  el-button--mini BUTTON DELETE " >'+a.$t("floormanagement.Deleteadjacency")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px">\n              <button onclick="reset3D()" class="el-button  el-button--mini BUTTON" >'+a.$t("tet.Rearrange")+'</button>\n            </li>\n              <li style="margin-top:3px;padding-bottom:3px">\n              <button onclick="calculatingDistance()" class="el-button  el-button--mini BUTTON" >'+a.$t("floormanagement.CalculateDistance")+"</button>\n            </li>\n          </ul>\n          </div>"};a.popMarker=new l.a.FMDomMarker(s),a.popMarker.selfAttr=e.selfAttr;var i=a.map3d.getLevel(),r=a.map3d.getFloor(i);a.popMarker.addTo(r),a.popMarkerList.push(a.popMarker),a.popMarkerTip=!0}if(e.selfAttr.id){a.pointLists.forEach(function(t){t.pointid==e.selfAttr.id&&(t.list.length>0?a.clearBeaconList=!0:a.clearBeaconList=!1)});s={x:e.selfAttr.x,y:e.selfAttr.y,anchor:l.a.FMMarkerAnchor.LEFT_BOTTOM,domWidth:1==a.clearBeaconList?120:80,domHeight:1==a.clearBeaconList?100:60,collision:!1,content:' <div style=\'text-align:left;background: #f1f5f7\' calss="threecontent" >\n          <ul id="popup-content">\n            <li style="margin-top:5px;text-align:right">\n              <a style="margin-right:5px" href="#" id="polygonMenu-closer" class="ol-popup-closer" onclick="closeWindow3D()">\n                 <img src="../../../static/close.jpg"  width="11" height="11"/>\n              </a>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px">\n              <button onclick="delPolygon3D()" class="el-button  el-button--mini BUTTON DELETE" >'+a.$t("tet.delete")+'</button>\n            </li>\n            <li style="margin-top:3px;padding-bottom:3px" '+(1==a.clearBeaconList?"":'class="hiddenclock"')+'>\n              <button onclick="cancelNearList3D()" class="el-button  el-button--mini BUTTON DELETE" >'+a.$t("floormanagement.Deleteadjacency")+"</button>\n            </li>\n           \n          </ul>\n          </div>"};a.popMarker=new l.a.FMDomMarker(s),a.popMarker.selfAttr=e.selfAttr;i=a.map3d.getLevel(),r=a.map3d.getFloor(i);a.popMarker.addTo(r),a.popMarkerList.push(a.popMarker),a.popMarkerTip=!0}window.del3D=function(){a.del3D(e,a.popMarker)},window.calculatingDistance=function(){a.calculatingDistance(a.popMarker,e)},window.closeWindow3D=function(){a.closeWindow3D(a.popMarker,e)},window.edit3D=function(){a.edit3D(a.popMarker,e,t)},window.setArea3D=function(){a.setArea3D(e,a.popMarker,t)},window.setAreas3D=function(){a.setAreas3D(e,a.popMarker,t)},window.removeArea3D=function(){a.removeArea3D(e,a.popMarker,t)},window.setAdjoinBeacon3D=function(){a.setAdjoinBeacon3D(e,a.popMarker,t)},window.setClock3D=function(){a.setClock3D(e,a.popMarker)},window.removeClock3D=function(){a.removeClock3D(e,a.popMarker)},window.cancelNearList3D=function(){a.cancelNearList3D(e,a.popMarker)},window.delPolygon3D=function(){a.delPolygon3D(e,a.popMarker)},window.reset3D=function(){a.resetIcon=!0,a.setNewMarker=!0,a.resetIconInfo=e,a.popMarker.remove(),a.popMarkerTip=!1},window.resetPoint3D=function(){a.resetIcon=!0,a.resetIconInfo=e,a.popMarker.remove(),a.popMarkerTip=!1}},del3D:function(e,t){var a=this;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?a.$message({message:a.$t("warning.permissiondelete"),type:"warning"}):a.$confirm(a.$t("floormanagement.Aredelete"),a.$t("change.tip"),{confirmButtonText:a.$t("terminal.confirm"),cancelButtonText:a.$t("terminal.cancel"),type:"warning"}).then(function(){var n={projectid:a.intoProjectid,groundid:a.groundid,deveui:e.selfAttr.deveui,longi:e.selfAttr.x,lati:e.selfAttr.y,falg:!1};e.selfAttr.devtype?(n.devtype=e.selfAttr.devtype,Object(p._165)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(n){1001==n.code?(a.$message({message:a.$t("staffmanagement.delsuccess"),type:"success"}),t.remove(),a.popMarkerTip=!1,e.remove(),a.menuClick(a.activeMenu,a.currentPage2)):a.$message({message:"zh"==a.$store.state.i18n?n.msg:n.enMsg,type:"error"})})):1==a.intoProjectType?Object(p._143)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(n){1001==n.code?(a.$message({message:a.$t("staffmanagement.delsuccess"),type:"success"}),t.remove(),a.popMarkerTip=!1,e.remove(),a.getBeaconPos(a.intoProjectid,a.currentPage2),a.lineMarkerList.forEach(function(t){t.pointid==e.selfAttr.deveui&&t.remove()}),a.addSubPolygon3D()):a.$message({message:"zh"==a.$store.state.i18n?n.msg:n.enMsg,type:"error"})}):Object(p._158)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(n){1001==n.code?(a.$message({message:a.$t("staffmanagement.delsuccess"),type:"success"}),t.remove(),a.popMarkerTip=!1,e.remove(),a.getGatewayPos(a.intoProjectid,a.currentPage2),a.lineMarkerList.forEach(function(t){t.pointid==e.selfAttr.deveui&&t.remove()}),a.addSubPolygon3D()):a.$message({message:"zh"==a.$store.state.i18n?n.msg:n.enMsg,type:"error"})})})},closeWindow3D:function(e,t){e.remove(),this.setNewMarker=!0,this.popMarkerTip=!1;for(var a=0;a<this.popMarkerList.length;a++)t.selfAttr.deveui==this.popMarkerList[a].selfAttr.deveui&&this.popMarkerList.splice(a,1)},calculatingDistance:function(e,t){e.remove(),this.popMarkerTip=!1,this.distanceData.x=Math.round(100*(t.selfAttr.x-this.length)),this.distanceData.y=Math.round(100*(t.selfAttr.y-this.width)),this.showDistance=!0},edit3D:function(e,t,a){e.remove(),this.popMarkerTip=!1,this.editFeatureData.alias=t.selfAttr.alias,this.editFeatureData.deveui=t.selfAttr.deveui,this.editFeatureData.tranche=t.selfAttr.tranche,this.editFeatureData.major=t.selfAttr.major,this.editFeatureData.minor=t.selfAttr.minor,this.editFeatureData.x=t.selfAttr.x,this.editFeatureData.y=t.selfAttr.y,this.editFeatureData.devtype=t.selfAttr.devtype,this.editFeatureInfo3D=t,this.editFeatures3D=!0},editFeatureCancel3D:function(){this.editFeatures3D=!1},editFeaturesTrue3D:function(){var e=this;this.editFeatures3D=!1;var t=this.editFeatureData.alias;switch(this.showOption){case 1:t=this.editFeatureData.alias;break;case 2:t=this.editFeatureData.major+"/"+this.editFeatureData.minor;break;case 3:t=parseInt(this.editFeatureData.major,16)+"/"+parseInt(this.editFeatureData.minor,16)}var a=t+(e.editFeatureInfo3D.selfAttr.alarmname?"/"+e.editFeatureInfo3D.selfAttr.alarmname:"");if(4==e.showOption&&(a=t+(e.editFeatureInfo3D.selfAttr.tranche?"/"+e.editFeatureInfo3D.selfAttr.tranche:"")),this.editFeatureData.devtype){t=e.editFeatureData.alias;var n={deveui:e.editFeatureData.deveui,alias:e.editFeatureData.alias};Object(p._163)(n,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("mapmanagement.editsuccess"),type:"success"}),e.editFeatureInfo3D.selfAttr.alias=e.editFeatureData.alias,e.editFeatureInfo3D.selfAttr.deveui=e.editFeatureData.deveui,e.editFeatureInfo3D.setText(a),e.editFeatureInfo3D.update()):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else if(1==e.intoProjectType){var s={beaconid:e.editFeatureData.deveui,alias:e.editFeatureData.alias};Object(p._140)(s,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("mapmanagement.editsuccess"),type:"success"}),e.editFeatureInfo3D.selfAttr.alias=e.editFeatureData.alias,e.editFeatureInfo3D.selfAttr.deveui=e.editFeatureData.deveui,e.editFeatureInfo3D.setText(a),e.editFeatureInfo3D.update()):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else{var i={deveui:e.editFeatureData.deveui,alias:e.editFeatureData.alias};Object(p._155)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("mapmanagement.editsuccess"),type:"success"}),e.editFeatureInfo3D.selfAttr.alias=e.editFeatureData.alias,e.editFeatureInfo3D.selfAttr.deveui=e.editFeatureData.deveui,e.editFeatureInfo3D.setText(a),e.editFeatureInfo3D.update()):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}},setArea3D:function(e,t,a){var n=this,s=this;this.setTrancheList=[],this.setAlarmTrancheList=[],e.selfAttr.tranche?s.TrancheDatas.tranche=e.selfAttr.tranche:s.TrancheDatas.tranche="",e.selfAttr.alarmid?s.TrancheDatas.alarmid=e.selfAttr.alarmid:s.TrancheDatas.alarmid="",s.TrancheDatas.alias=e.selfAttr.alias,s.TrancheDatas.beaconids=e.selfAttr.deveui,s.TrancheDatas.devtype=e.selfAttr.devtype,s.setArea3DMarker=e;var i={site:!0,groundid:s.groundid,projectid:5==s.contrForPrionum?s.$store.state.projectid:s.$store.state.intoProjectid},r={site:!1,groundid:this.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid};Object(p._98)(r,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(s.setAlarmTrancheList=e.data,Object(p._98)(i,n.tenantkey_A,n.tenantid_A,n.userName).then(function(e){1001==e.code?(s.setTrancheList=e.data,s.trancheShow3D=!0,t.remove(),s.popMarkerTip=!1):s.$message({message:"zh"==s.$store.state.i18n?e.msg:e.enMsg,type:"error"})})):s.$message({message:"zh"==s.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},updateTrancheCancel3D:function(){this.trancheShow3D=!1},updateTrancheTrue3D:function(){var e=this,t=this.setArea3DMarker;if(this.loading=!0,e.TrancheDatas.devtype){var a={tranche:e.TrancheDatas.tranche,alarmid:e.TrancheDatas.alarmid,deveui:e.TrancheDatas.beaconids};Object(p._167)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(a){if(1001==a.code){var n=void 0;switch(e.TrancheDatas.devtype){case 1:n="../../../static/aoa.png";break;case 2:n="../../../static/smoke.png";break;case 3:n="../../../static/alarm.png";break;case 5:n="../../../static/camera.png"}t.selfAttr.tranche=e.TrancheDatas.tranche,t.selfAttr.alarmid=e.TrancheDatas.alarmid;var s="",i="";t.selfAttr.tranche&&(s=e.setTrancheList.find(function(t){return t.name==e.TrancheDatas.tranche}))&&(t.selfAttr.tranche=s.name),t.selfAttr.alarmid&&(i=e.setAlarmTrancheList.find(function(t){return t.id==e.TrancheDatas.alarmid}))&&(t.selfAttr.alarmname=i.name);var r=i.name?"/"+i.name:"";4==e.showOption&&(r=s.name?"/"+s.name:""),t.setImage(n,[100,100]),t.setText(t.selfAttr.alias+r),t.update(),e.$message({message:e.$t("beacon.assinsuccess"),type:"success"}),e.loading=!1}else e.$message({message:"zh"==e.$store.state.i18n?a.msg:a.enMsg,type:"error"}),e.loading=!1;e.trancheShow3D=!1})}else{var n={groundid:e.groundid,tranche:e.TrancheDatas.tranche,alarmid:e.TrancheDatas.alarmid,deveui:e.TrancheDatas.beaconids};if(1==e.$store.state.intoProjectType){var s=t.selfAttr.alias;switch(e.showOption){case 1:s=t.selfAttr.alias;break;case 2:s=t.selfAttr.major+"/"+t.selfAttr.minor;break;case 3:s=parseInt(t.selfAttr.major,16)+"/"+parseInt(t.selfAttr.minor,16)}Object(p._144)(n,e.tenantkey_A,e.tenantid_A,e.userName).then(function(a){if(1001==a.code){t.selfAttr.tranche=e.TrancheDatas.tranche,t.selfAttr.alarmid=e.TrancheDatas.alarmid;var n="",i="";t.selfAttr.tranche&&(n=e.setTrancheList.find(function(t){return t.name==e.TrancheDatas.tranche}))&&(t.selfAttr.tranche=n.name),t.selfAttr.alarmid&&(i=e.setAlarmTrancheList.find(function(t){return t.id==e.TrancheDatas.alarmid}))&&(t.selfAttr.alarmname=i.name);var r=i.name?"/"+i.name:"";4==e.showOption&&(r=n.name?"/"+n.name:""),1==t.selfAttr.clockin?t.setImage("../../../static/clock.png",[100,100]):1==t.selfAttr.type?t.setImage("../../../static/beacon.png",[100,100]):t.setImage("../../../static/sos.png",[100,100]),t.setText(s+r),t.update(),e.$message({message:e.$t("beacon.assinsuccess"),type:"success"}),e.loading=!1}else e.$message({message:"zh"==e.$store.state.i18n?a.msg:a.enMsg,type:"error"}),e.loading=!1;e.trancheShow3D=!1})}else 2==e.$store.state.intoProjectType&&Object(p._162)(n,e.tenantkey_A,e.tenantid_A,e.userName).then(function(a){if(1001==a.code){t.selfAttr.tranche=e.TrancheDatas.tranche,t.selfAttr.alarmid=e.TrancheDatas.alarmid;var n="",s="";t.selfAttr.tranche&&(n=e.setTrancheList.find(function(t){return t.name==e.TrancheDatas.tranche}))&&(t.selfAttr.tranche=n.name),t.selfAttr.alarmid&&(s=e.setAlarmTrancheList.find(function(t){return t.id==e.TrancheDatas.alarmid}))&&(t.selfAttr.tranche=s.name);var i=s.name?"/"+s.name:"";4==e.showOption&&(i=n.name?"/"+n.name:""),1==t.selfAttr.clockin?t.setImage("../../../static/clock.png",[100,100]):t.setImage("../../../static/beacon.png",[100,100]),t.setText(t.selfAttr.alias+i),t.update(),e.$message({message:e.$t("beacon.assinsuccess"),type:"success"}),e.loading=!1}else e.$message({message:"zh"==e.$store.state.i18n?a.msg:a.enMsg,type:"error"}),e.loading=!1;e.trancheShow3D=!1})}},removeArea3D:function(e,t,a){var n=this;this.$confirm(n.$t("floormanagement.releasezone"),n.$t("change.tip"),{confirmButtonText:n.$t("terminal.confirm"),cancelButtonText:n.$t("terminal.cancel"),type:"warning"}).then(function(){var s=(n.map3d.getFMGroup(a).layers.textMarker[0]?n.map3d.getFMGroup(a).layers.textMarker[0].textMarkers:"").find(function(t){return t.selfAttr.deveui==e.selfAttr.deveui});if(n.editFeatureInfo3DText=s,e.selfAttr.devtype){var i={deveui:e.selfAttr.deveui,tranchid:""};Object(p._167)(i,n.tenantkey_A,n.tenantid_A,n.userName).then(function(a){if(1001==a.code){var s=void 0;switch(e.selfAttr.devtype){case 1:s="../../../static/aoa.png";break;case 2:s="../../../static/smoke.png";break;case 3:s="../../../static/alarm.png";break;case 5:s="../../../static/camera.png"}t.remove(),n.popMarkerTip=!1,e.selfAttr.tranche="",e.selfAttr.tranchid="",e.setImage(s,[100,100]),n.editFeatureInfo3DText.name=e.selfAttr.alias+(e.selfAttr.tranche?"/"+e.selfAttr.tranche:""),e.update()}else n.$message({message:"zh"==n.$store.state.i18n?a.msg:a.enMsg,type:"error"})})}else{var r={deveui:e.selfAttr.deveui,tranchid:""};if(1==n.$store.state.intoProjectType){var o=e.selfAttr.alias;switch(n.showOption){case 1:o=e.selfAttr.alias;break;case 2:o=e.selfAttr.major+"/"+e.selfAttr.minor;break;case 3:o=parseInt(e.selfAttr.major,16)+"/"+parseInt(e.selfAttr.minor,16)}Object(p._144)(r,n.tenantkey_A,n.tenantid_A,n.userName).then(function(a){1001==a.code?(t.remove(),n.popMarkerTip=!1,e.selfAttr.tranche="",e.selfAttr.tranchid="",1==e.selfAttr.clockin?e.setImage("../../../static/clock.png",[100,100]):1==e.selfAttr.type?e.setImage("../../../static/beacon.png",[100,100]):e.setImage("../../../static/sos.png",[100,100]),n.editFeatureInfo3DText.name=o+(e.selfAttr.tranche?"/"+e.selfAttr.tranche:""),e.update(),n.$message({message:n.$t("floormanagement.Releasesucceeded"),type:"success"})):n.$message({message:"zh"==n.$store.state.i18n?a.msg:a.enMsg,type:"error"})})}else 2==n.$store.state.intoProjectType&&Object(p._162)(r,n.tenantkey_A,n.tenantid_A,n.userName).then(function(a){1001==a.code?(t.remove(),n.popMarkerTip=!1,e.selfAttr.tranche="",e.selfAttr.tranchid="",1==e.selfAttr.clockin?e.setImage("../../../static/clock.png",[100,100]):e.setImage("../../../static/beacon.png",[100,100]),e.update(),n.editFeatureInfo3DText.name=e.selfAttr.alias+(e.selfAttr.tranche?"/"+e.selfAttr.tranche:""),n.$message({message:n.$t("floormanagement.Releasesucceeded"),type:"success"})):n.$message({message:"zh"==n.$store.state.i18n?a.msg:a.enMsg,type:"error"})})}})},setAdjoinBeacon3D:function(e,t,a){var n=this;this.adjoinBeaconInfo=e,this.adjoinBeaconPopMarker=t;var s={deveui:e.selfAttr.deveui,fortype:"2",inallot:"1",projectid:this.intoProjectid};Object(p._21)(s,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(n.adjoinBeaconInfo.selfAttr.nearbeacons=e.data.list[0].nearbeacons,n.adjoinBeaconShow3D=!0):n.$message({message:"zh"==n.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},closeAdjoinBeacon3D:function(){this.adjoinBeaconData={beaconid:"",nearbeacons:""},this.adjoinBeacon=[],this.adjoinBeaconShow3D=!1},openAdjoinBeacon3D:function(){this.adjoinBeaconData={beaconid:"",nearbeacons:""},this.adjoinBeaconAlias="";var e=this,t={projectid:this.intoProjectid,tranche:this.adjoinBeaconInfo.selfAttr.tranche,type:this.adjoinBeaconInfo.selfAttr.type,inallot:1,inuse:1,workstate:1,groundid:e.groundid};Object(p._22)(t,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){if(1001==t.code){e.adjoinBeaconDataList=t.data;for(var a=0;a<e.adjoinBeaconDataList.length;a++)e.adjoinBeaconDataList[a].beaconid==e.adjoinBeaconInfo.selfAttr.deveui&&e.adjoinBeaconDataList.splice(a,1);e.adjoinBeaconAlias=e.adjoinBeaconInfo.selfAttr.alias,e.adjoinBeaconData.beaconid=e.adjoinBeaconInfo.selfAttr.deveui;var n=[];if(e.adjoinBeaconInfo.selfAttr.nearbeacons)e.adjoinBeaconInfo.selfAttr.nearbeacons.split(",").forEach(function(e){n.push(e)});else e.userid=[];n.length>0&&n.forEach(function(t){e.adjoinBeacon.push(t)}),e.adjoinBeaconPopMarker.remove(),e.popMarkerTip=!1}else e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})},setAdjoinBeaconTrue3D:function(){var e=this;if(this.loading=!0,this.adjoinBeacon.length>0){for(var t=0;t<this.adjoinBeacon.length;t++)e.adjoinBeaconData.nearbeacons+=this.adjoinBeacon[t]+",";e.adjoinBeaconData.nearbeacons=e.adjoinBeaconData.nearbeacons.slice(0,e.adjoinBeaconData.nearbeacons.length-1)}else e.adjoinBeaconData.nearbeacons="";Object(p._176)(this.adjoinBeaconData,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(e.adjoinBeaconInfo.selfAttr.nearbeacons=e.adjoinBeaconData.nearbeacons,e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.loading=!1,e.adjoinBeaconShow3D=!1):(e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"}),e.loading=!1,e.adjoinBeaconShow3D=!1)})},setClock3D:function(e,t){var a=this;a.$confirm(a.$t("floormanagement.tippp"),a.$t("change.tip"),{confirmButtonText:a.$t("terminal.confirm"),cancelButtonText:a.$t("terminal.cancel"),type:"warning"}).then(function(){var n={deveui:e.selfAttr.deveui,clockin:1};1==a.$store.state.intoProjectType?Object(p._148)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(n){1001==n.code?(e.selfAttr.clockin=1,e.setImage("../../../static/clock.png",[100,100]),e.update(),t.remove(),a.popMarkerTip=!1,a.$message({message:a.$t("floormanagement.tippp1"),type:"success"})):a.$message({message:"zh"==a.$store.state.i18n?n.msg:n.enMsg,type:"error"})}):2==a.$store.state.intoProjectType&&Object(p._161)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(n){1001==n.code?(e.selfAttr.clockin=1,e.setImage("../../../static/clock.png",[100,100]),e.update(),t.remove(),a.popMarkerTip=!1,a.$message({message:a.$t("floormanagement.tippp1"),type:"success"})):a.$message({message:"zh"==a.$store.state.i18n?n.msg:n.enMsg,type:"error"})})})},removeClock3D:function(e,t){var a=this;this.$confirm(a.$t("floormanagement.tippp2"),a.$t("change.tip"),{confirmButtonText:a.$t("terminal.confirm"),cancelButtonText:a.$t("terminal.cancel"),type:"warning"}).then(function(){var n={deveui:e.selfAttr.deveui,clockin:2};1==a.$store.state.intoProjectType?Object(p._148)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(n){1001==n.code?(e.selfAttr.clockin=2,1==a.intoProjectType?e.setImage("../../../static/beacon.png",[100,100]):2==a.intoProjectType&&e.setImage("../../../static/gateway.png",[100,100]),e.update(),t.remove(),a.popMarkerTip=!1,a.$message({message:a.$t("floormanagement.tippp3"),type:"success"})):a.$message({message:"zh"==a.$store.state.i18n?n.msg:n.enMsg,type:"error"})}):2==a.$store.state.intoProjectType&&Object(p._161)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(n){1001==n.code?(e.selfAttr.clockin=2,1==a.intoProjectType?e.setImage("../../../static/beacon.png",[100,100]):2==a.intoProjectType&&e.setImage("../../../static/gateway.png",[100,100]),e.update(),t.remove(),a.popMarkerTip=!1,a.$message({message:a.$t("floormanagement.tippp3"),type:"success"})):a.$message({message:"zh"==a.$store.state.i18n?n.msg:n.enMsg,type:"error"})})})},closeMap3D:function(){this.map3d.dispose(),this.map3d=null},getAllFeatures3D:function(e){var t=void 0;if(this.featureArrs=[],this.map3d.getFMGroup(e).layers.imageMarker.length>0){t=this.map3d.getFMGroup(e).layers.imageMarker[0].imageMarkers;var a=void 0;if(1==this.$store.state.intoProjectType)for(var n=0;n<t.length;n++)a={longi:t[n].selfAttr.x,lati:t[n].selfAttr.y,beaconid:t[n].selfAttr.deveui,alias:t[n].selfAttr.alias},this.featureArrs.push(a);else if(2==this.$store.state.intoProjectType)for(var s=0;s<t.length;s++)a={lastx:t[s].selfAttr.x,lasty:t[s].selfAttr.y,deveui:t[s].selfAttr.deveui,alias:t[s].selfAttr.alias},this.featureArrs.push(a)}},arrangcancel3D:function(){var e=this,t=!1,a={groundid:this.groundid};Object(p._76)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(a){if(1001==a.code){if(0==a.data.length||1==a.data.length)return e.map3d.dispose(),e.map3d=null,e.arrange3D=!1,e.dobuleClick=!1,void e.$emit("change",!1);a.data.forEach(function(e){0==e.list.length&&(t=!0)}),t&&2!=e.intoProjectType?e.$confirm(e.$t("floormanagement.tippp6"),e.$t("Building.tips"),{confirmButtonText:e.$t("terminal.confirm"),cancelButtonText:e.$t("terminal.cancel"),type:"warning"}).then(function(){e.arrange3D=!1,e.dobuleClick=!1,e.$emit("change",!1),e.map3d.dispose(),e.map3d=null}).catch(function(){}):(e.arrange3D=!1,e.dobuleClick=!1,e.$emit("change",!1),e.map3d.dispose(),e.map3d=null)}})},projectList:function(){var e=this;return this.projectTable.filter(function(t){return t.id!==e.groundid})},getProjectLists:function(){var e=this,t={buildid:this.buildid};Object(p._23)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code&&(e.projectTable=t.data.list)})},editTranche:function(e){var t=this;if(this.currentProjectid.groundid="",this.getProjectLists(),"position"==e){var a={site:!0,groundid:this.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid};Object(p._98)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){t.positionTrancheList=e.data;for(var a=0;a<t.positionTrancheList.length;a++)1==t.positionTrancheList[a].fremove?t.positionTrancheList[a].fremove=!0:t.positionTrancheList[a].fremove=!1;t.addTranchePosition=!0}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else if("alarm"==e){var n={site:!1,groundid:this.groundid,projectid:5==t.contrForPrionum?t.$store.state.projectid:t.$store.state.intoProjectid};Object(p._98)(n,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(t.alarmTrancheList=e.data,t.addTrancheAlarm=!0):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}},addTrancheRowPosition:function(){this.positionTrancheList.push({})},addTrancheRowAlarm:function(){this.alarmTrancheList.push({})},importTranchePosition:function(e){if(e){var t=this,a={site:!0,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid,groundid:this.currentProjectid.groundid};Object(p._98)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){if(e.data.length>0){var a=e.data;t.positionTrancheList.forEach(function(e){a.forEach(function(t,n){t.name==e.name&&a.splice(n,1)})}),a.forEach(function(e){t.positionTrancheList.push({name:e.name,id:""})});for(var n=0;n<t.positionTrancheList.length;n++)1==t.positionTrancheList[n].fremove?t.positionTrancheList[n].fremove=!0:t.positionTrancheList[n].fremove=!1}}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}},importTrancheAlarm:function(e){if(e){var t=this,a={site:!1,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid,groundid:this.currentProjectid.groundid};Object(p._98)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){if(e.data.length>0){var a=e.data;t.alarmTrancheList.forEach(function(e){a.forEach(function(t,n){t.name==e.name&&a.splice(n,1)})}),a.forEach(function(e){t.alarmTrancheList.push({name:e.name,id:""})})}}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}},deleTrancheRowPosition:function(e,t,a){var n=this;if(5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio)n.$message({message:n.$t("warning.permissiondelete"),type:"warning"});else if(a){var i={site:!0,id:a,name:t,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid};Object(p._7)(s()(i),this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?n.positionTrancheList.splice(e,1):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else this.positionTrancheList.splice(e,1)},deleTrancheRowAlarm:function(e,t,a){var n=this;if(5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio)n.$message({message:n.$t("warning.permissiondelete"),type:"warning"});else if(a){var i={site:!1,id:a,name:t,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid};Object(p._7)(s()(i),this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?n.alarmTrancheList.splice(e,1):n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else this.alarmTrancheList.splice(e,1)},addTrancheRowTruePosition:function(){var t=this,a=!1,n=!1,i={};if(e.each(this.positionTrancheList,function(e,t){void 0===t.id&&(t.id=""),t.name||(a=!0),i[t.name]&&(n=!0),i[t.name]=!0}),a)t.$message({message:t.$t("floormanagement.tippp4"),type:"error"});else if(n)t.$message({message:t.$t("floormanagement.tippp5"),type:"error"});else{for(var r={site:!0,tranches:JSON.parse(s()(this.positionTrancheList)),groundid:t.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid},o=0;o<r.tranches.length;o++)!0===r.tranches[o].fremove||1===r.tranches[o].fremove?r.tranches[o].fremove=1:r.tranches[o].fremove=2;r.tranches=s()(r.tranches),Object(p.x)(r,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.$message({message:t.$t("Building.Setsuccessfully"),type:"success"}),t.addTranchePosition=!1,a=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a=!1)})}},addTrancheRowTrueAlarm:function(){var t=this,a=!1,n=!1,i={};if(e.each(this.alarmTrancheList,function(e,t){void 0===t.id&&(t.id=""),t.name||(a=!0),i[t.name]&&(n=!0),i[t.name]=!0}),a)t.$message({message:t.$t("floormanagement.tippp4"),type:"error"});else if(n)t.$message({message:t.$t("floormanagement.tippp5"),type:"error"});else{for(var r={site:!1,tranches:JSON.parse(s()(this.alarmTrancheList)),groundid:t.groundid,projectid:5==this.contrForPrionum?this.$store.state.projectid:this.$store.state.intoProjectid},o=0;o<r.tranches.length;o++)r.tranches[o].fremove=2;r.tranches=s()(r.tranches),Object(p.x)(r,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.$message({message:t.$t("Building.Setsuccessfully"),type:"success"}),t.addTrancheAlarm=!1,a=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a=!1)})}},addTrancheRowCancelPosition:function(){this.addTranchePosition=!1,this.positionTrancheList=[]},addTrancheRowCancelAlarm:function(){this.addTrancheAlarm=!1,this.alarmTrancheList=[]},setAreas3D:function(e,t,a){this.popMarker.remove(),this.popMarkerTip=!1,this.popMarkerTip=!1,this.areaInfo=e,this.setAreaDeveui=e.selfAttr.deveui,this.radio=e.selfAttr.anglimit,this.oldRadio=e.selfAttr.anglimit,this.setAnglimit3D=!0},setAreas3DCancel:function(){this.setAnglimit3D=!1},setAreas3DTrue:function(){var e=this;if(this.radio!=this.oldRadio){var t={deveui:this.setAreaDeveui,anglimit:this.radio};1==this.intoProjectType?Object(p._138)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.areaInfo.selfAttr.anglimit=e.radio,e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.setAnglimit3D=!1):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})}):2==this.intoProjectType&&Object(p._160)(t,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.areaInfo.values_.anglimit=e.radio,e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.setAnglimit3D=!1):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else e.setAnglimit3D=!1},searchArranges:function(){this.changeMajor=!0,this.changeMinor=!0,""==this.searchInuse&&""==this.searchDeveui&&""==this.searchAlias&&(this.searchInuse=2);var e,t=this;"0"!=this.activeMenu?e={deveui:t.searchDeveui,alias:t.searchAlias,inuse:t.searchInuse,devtype:t.activeMenu,tenantid:5==t.contrForPrionum?t.superId:t.tenantkey_A,page:1,count:20,projectid:t.intoProjectid}:1==this.$store.state.intoProjectType?e={deveui:this.searchDeveui,alias:this.searchAlias,inuse:this.searchInuse,fortype:"2",inallot:"1",projectid:this.intoProjectid,page:1,count:20}:2==this.$store.state.intoProjectType&&(e={deveui:this.searchDeveui,alias:this.searchAlias,inuse:this.searchInuse,inallot:"1",projectid:this.intoProjectid,page:1,count:20}),1==this.searchInuse&&(e.groundid=this.groundid),"0"!=this.activeMenu?Object(p._46)(e,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?(t.arrangeData=e.data.list,t.currentPage2=1,t.totalArrange=e.data.size):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):1==this.$store.state.intoProjectType?Object(p._21)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.arrangeData=e.data.list,t.currentPage2=1,t.totalArrange=e.data.size):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):2==this.$store.state.intoProjectType&&Object(p._47)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.arrangeData=e.data.list,t.currentPage2=1,t.totalArrange=e.data.size):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},clearArranges:function(){this.changeMajor=!0,this.changeMinor=!0;this.inuseType=[{index:1,message:this.$t("floormanagement.value1")},{index:2,message:this.$t("floormanagement.value2")}],r()(this.$data.inuseType,this.$options.data.call(this).inuseType),this.searchDeveui="",this.searchAlias="",this.searchInuse=2,this.currentPage2=1,this.searchArranges(),this.arrange3D&&(this.layerList.forEach(function(e){e.remove()}),this.layerList=[],this.currentFeature=[],this.lineMarkerList.forEach(function(e){e.remove()}),this.addSubPolygon3D(),1==this.$store.state.intoProjectType?this.getArrangeBeaconPos3D(this.intoProjectid,this.lastGroupid):2==this.$store.state.intoProjectType&&this.getArrangeGatewayPos3D(this.intoProjectid,this.lastGroupid))},handleCurrentChangeArrange:function(e){this.currentPage2=e,this.changePageSearchArrange(e)},changePageSearchArrange:function(e){var t;""==this.searchInuse&&""==this.searchDeveui&&""==this.searchAlias&&(this.searchInuse=2),t=""==e||void 0==e?1:e;var a,n=this;1==this.$store.state.intoProjectType?a={deveui:this.searchDeveui,alias:this.searchAlias,inuse:this.searchInuse,fortype:"2",inallot:"1",projectid:this.intoProjectid,page:t,count:20}:2==this.$store.state.intoProjectType&&(a={deveui:this.searchDeveui,alias:this.searchAlias,inuse:this.searchInuse,inallot:"1",projectid:this.intoProjectid,page:t,count:20}),1==this.searchInuse&&(a.groundid=this.groundid),1==this.$store.state.intoProjectType?Object(p._21)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(n.arrangeData=e.data.list,n.totalArrange=e.data.size):n.$message({message:"zh"==n.$store.state.i18n?e.msg:e.enMsg,type:"error"})}):2==this.$store.state.intoProjectType&&Object(p._47)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(n.arrangeData=e.data.list,n.totalArrange=e.data.size):n.$message({message:"zh"==n.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},arrangeMaps:function(e,t){var a=this;if(this.length=e.length,this.width=e.width,this.changeMajor=!0,this.changeMinor=!0,this.dobuleClick=!0,null===t.row.mapname)return a.$message({message:a.$t("floormanagement.Unboundmap"),type:"warning"}),void(a.dobuleClick=!1);if(1==a.intoProjectType?(a.iconSrc="../../../static/beacon.png",a.showOptions=!0,a.showOption=1):2==a.intoProjectType&&(a.iconSrc="../../../static/gateway.png",a.showOptions=!0,a.showOption=5),this.groundid=e.id,this.buildid=e.buildid,2==e.maptype){var n={buildid:e.buildid};Object(p._57)(n,a.tenantkey_A,a.tenantid_A,a.userName).then(function(t){if(1001==t.code){a.groundListCopy=[];for(var n=0;n<t.data.length;n++){var s={groundid:t.data[n].id,ground:t.data[n].ground,newground:n+1};a.groundListCopy.push(s)}a.newGround=a.groundListCopy.find(function(t){return t.ground==e.ground}),a.arrange3D=!0,a.showTable=!1,a.fmapId=e.filename,a.themeId=e.filetype,2==a.$store.state.intoProjectType?a.getGatewayPos(e.projectid,1):1==a.$store.state.intoProjectType&&a.getBeaconPos(e.projectid,1),setTimeout(function(){a.onmap(a.newGround.newground,e.projectid,e.appname,e.mapkey)},1)}else a.$message({message:"zh"==a.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}this.searchInuse=2},getGatewayPos:function(e,t){var a=this;this.searchArrangeList={projectid:e,inallot:1,inuse:2,workstate:1,page:t,count:20},Object(p._47)(this.searchArrangeList,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code&&(a.arrangeData=e.data.list,a.totalArrange=e.data.size)})},getBeaconPos:function(e,t){var a=this;this.searchArrangeList={fortype:2,projectid:e,inallot:1,inuse:2,workstate:1,page:t,count:20},Object(p._21)(this.searchArrangeList,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code&&(a.arrangeData=e.data.list,a.totalArrange=e.data.size)})},selectArrange:function(e){this.sub&&this.closeSub(),this.adj&&this.closeAdj();e&&2==e.inuse&&(this.selectArrangeData=e)}}}}).call(t,a("7t+N"))},"7iG5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAhJJREFUSEvtlkGITlEcxX8nGylZjNkqpUZmw0KIhimxodQwJRtZUKwoFjbm21CIbCYWmqmpUSaJxYgS0wxFCqVpQmKLzGRhweKvY+6bntv3zXtlYTO3vvf6eufec985/3v+T6QREX1AB7AYeA2cl/SjeD7fPSKWAKeA9cA4cF/SS8+RLxExDOwHfgFvgU7AgO2SvlUsvhx4AKwr4byxC5L6FBGHgOvACeC2pI8RsQe47ImSjlQQXAKOt8AcMMFdYKmk7jIoIgaAg0AjmxzpzX33sLStxpAJvgNDko5lBIeBa3U8mAczagKbYnO7JE2VTH8ELJLUVSGRcdtaYBom2GHXgTfAE+AhsC/99kq6VUHgxU2SDxfJlqKKvOBFYEVCuUxPSxqtI1FE7AIs6e6Ed4GclfT1D0FJFhu2NTe8DokxEeE3GXN5FnMWCP5Sb0GiymL6fxJFxAbgJNCTtjnohJU0Ubnt2fpvdtD6Jb13VGwGvFCzqOiW9LhmVBh3A2hLJ3qT+4oJ7gD+0yzsqDrVSfcvknpLibA25dMVE0wDw/8Y172SRrLYcZdcZgLnx09JOzPAVcDdLG84uWJnUjCey+Y/Az6YwMFk0JzeEbEa8I6e1myZG4Gjkl6l0CsivFHEddH+ngMvUi9oB1a6R1eYvAp4B8wA95LJ7jH2T3Np2uSz5aakyZplugawyf5s+Qx8KiL7NyyvI8uItY1cAAAAAElFTkSuQmCC"},H5m4:function(e,t){},LSmT:function(e,t){},"WB1+":function(e,t){},aMzu:function(e,t,a){e.exports=a.p+"static/media/3D~1.c8e343b.mp4"},bdLh:function(e,t,a){"use strict";var n=a("6eFq"),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"content"},[n("el-container",[n("el-main",[n("el-dialog",{attrs:{visible:e.vedio},on:{"update:visible":function(t){e.vedio=t},close:function(t){return e.closeVedio("video")}}},[n("video",{attrs:{width:"100%",controls:"",autoplay:"",id:"video"}},["zh"==e.i8n?n("source",{attrs:{src:a("cZaB"),type:"video/mp4"}}):e._e(),e._v(" "),"zh"!=e.i8n?n("source",{attrs:{src:a("urBA"),type:"video/mp4"}}):e._e()])]),e._v(" "),n("el-dialog",{attrs:{visible:e.vedio2},on:{"update:visible":function(t){e.vedio2=t},close:function(t){return e.closeVedio("video2")}}},[n("video",{attrs:{width:"100%",controls:"",autoplay:"",id:"video2"}},[n("source",{attrs:{src:a("aMzu"),type:"video/mp4"}})])]),e._v(" "),n("el-dialog",{staticClass:"arrangeDialog3D",attrs:{visible:e.arrange3D,"close-on-click-modal":!1,"show-close":!1,fullscreen:!0,width:"100%"},on:{"update:visible":function(t){e.arrange3D=t},close:function(t){return e.closeMap3D()}}},[n("div",[n("div",{staticClass:"searchArrange"},[n("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"}},[n("el-button",{staticStyle:{width:"90px",height:"30px","text-align":"left"},attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-left"},on:{click:function(t){return e.arrangcancel3D()}}},[e._v(e._s(e.$t("login.return")))]),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0%"},attrs:{label:e.$t("floormanagement.device")}},[n("el-input",{attrs:{placeholder:e.$t("floormanagement.devicenumber")},model:{value:e.searchDeveui,callback:function(t){e.searchDeveui=t},expression:"searchDeveui"}})],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0%"},attrs:{label:e.$t("floormanagement.Devicealias")}},[n("el-input",{attrs:{placeholder:e.$t("floormanagement.devicealias")},model:{value:e.searchAlias,callback:function(t){e.searchAlias=t},expression:"searchAlias"}})],1),e._v(" "),n("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"2%"},attrs:{label:e.$t("floormanagement.status")}},[n("el-select",{attrs:{filterable:"",placeholder:e.$t("floormanagement.usagestatus")},model:{value:e.searchInuse,callback:function(t){e.searchInuse=t},expression:"searchInuse"}},e._l(e.inuseType,function(e){return n("el-option",{key:e.index,attrs:{label:e.value,value:e.index}})}),1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"0"}},[n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.searchArranges()}}},[e._v(e._s(e.$t("floormanagement.search")))]),e._v(" "),n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.clearArranges()}}},[e._v(e._s(e.$t("floormanagement.reset")))]),e._v(" "),n("el-popover",{attrs:{placement:"top"}},[n("div",{staticStyle:{display:"flex"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editTranche("alarm")}}},[e._v(e._s(e.$t("floormanagement.Alarmarea")))]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editTranche("position")}}},[e._v(e._s(e.$t("floormanagement.Positioningarea")))])],1),e._v(" "),n("el-button",{staticClass:"reset",attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v(e._s(e.$t("floormanagement.Regionalsettings")))])],1),e._v(" "),3!=e.contrForPrionum&&4!=e.contrForPrionum&&5!=e.contrForPrionum||e.sub||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.setSub3D()}}},[e._v(e._s(e.$t("floormanagement.Addconnectionpoint")))]),e._v(" "),3!=e.contrForPrionum&&4!=e.contrForPrionum&&5!=e.contrForPrionum||!e.sub||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.closeSub3D()}}},[e._v(e._s(e.$t("floormanagement.Endsetting")))]),e._v(" "),e.isShowLines||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.showLines3D()}}},[e._v(e._s(e.$t("floormanagement.showConnectPoint")))]),e._v(" "),e.isShowLines&&1==e.intoProjectType?n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.showLines3D()}}},[e._v(e._s(e.$t("floormanagement.hideConnectPoint")))]):e._e(),e._v(" "),n("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(t){return e.removeGroundDevs()}}},[e._v(e._s(e.$t("floormanagement.RemoveGroundDev")))]),e._v(" "),3!=e.contrForPrionum&&4!=e.contrForPrionum&&5!=e.contrForPrionum||e.adj||1!=e.intoProjectType?e._e():n("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(t){return e.setAdj3D()}}},[e._v(e._s(e.$t("floormanagement.Setadjacency")))]),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                        "+e._s(e.$t("floormanagement.title"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title1"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title2"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title3"))),n("br"),e._v("\n                        "+e._s(e.$t("floormanagement.title4"))+"\n                      ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)],1)],1),e._v(" "),n("div",{staticStyle:{width:"100%",display:"flex","margin-top":"2%"}},[n("div",{ref:"mapContent",staticClass:"mapContent"},[n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{ref:"fengMap",attrs:{id:"fengMap"}},[n("p",{staticClass:"show_video"},[e._v("\n                      "+e._s(e.$t("floormanagement.arrangement1"))+"\n                      "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.vedio2=!0}}},[e._v("\n                        "+e._s(e.$t("floormanagement.Watchdemo"))+"\n                      ")])])]),e._v(" "),e.showOptions?n("div",{staticClass:"changShowButton"},[n("el-dropdown",{on:{command:e.showOptionsTrue}},[n("el-button",{attrs:{type:"primary"}},[e._v("\n                        "+e._s(e.showOptionName)),n("i",{staticClass:"el-icon-arrow-up el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[1==e.intoProjectType?n("el-dropdown-item",{attrs:{command:"1"}},[e._v(e._s(e.$t("change.showAliases")))]):e._e(),e._v(" "),1==e.intoProjectType?n("el-dropdown-item",{attrs:{command:"2"}},[e._v(e._s(e.$t("change.showMajor16")))]):e._e(),e._v(" "),1==e.intoProjectType?n("el-dropdown-item",{attrs:{command:"3"}},[e._v(e._s(e.$t("change.showMajor10")))]):e._e(),e._v(" "),n("el-dropdown-item",{attrs:{command:"4"}},[e._v(e._s(e.$t("change.showPosition")))]),e._v(" "),n("el-dropdown-item",{attrs:{command:"5"}},[e._v(e._s(e.$t("change.showAlarm")))])],1)],1)],1):e._e()])]),e._v(" "),n("div",{ref:"tableContent",staticClass:"tableContent"},[n("div",{staticClass:"show_table"},[n("svg",{staticClass:"hamburger",class:{"is-active":!e.showTable},attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},on:{click:function(t){return e.setTable()}}},[n("path",{attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}})]),e._v(" "),n("el-menu",{staticClass:"chose_table",attrs:{"default-active":e.activeMenu,collapse:e.isCollapse}},[n("el-menu-item",{attrs:{index:"0"},on:{click:function(t){return e.menuClick("0",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.beacon")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.beacon"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon beacon"})])],1),e._v(" "),e.aoagw?n("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.menuClick("1",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.aoaGateway")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.aoaGateway"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon aoagw"})])],1):e._e(),e._v(" "),e.smoke?n("el-menu-item",{attrs:{index:"3"},on:{click:function(t){return e.menuClick("2",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.smokeSensor")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.smokeSensor"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon smoke"})])],1):e._e(),e._v(" "),e.alertor?n("el-menu-item",{attrs:{index:"4"},on:{click:function(t){return e.menuClick("3",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.burglarAlarm")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.burglarAlarm"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon alarm"})])],1):e._e(),e._v(" "),e.camera?n("el-menu-item",{attrs:{index:"6"},on:{click:function(t){return e.menuClick("5",1)}}},[n("span",[e._v(e._s(e.$t("otherDev.camera")))]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("otherDev.camera"),placement:"right",disabled:!e.isCollapse}},[n("i",{staticClass:"icon camera"})])],1):e._e()],1)],1),e._v(" "),e.showTable?n("div",{staticClass:"table_data"},[n("el-table",{ref:"multipleTable",staticStyle:{"text-align":"center"},attrs:{data:e.arrangeData,"highlight-current-row":"","max-height":"660",border:""},on:{"current-change":e.selectArrange,"header-click":e.changeBase}},["0"==e.activeMenu&&1==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"major",label:"Major","show-overflow-tooltip":"","min-width":"60",align:"center"}}):e._e(),e._v(" "),"0"==e.activeMenu&&1==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"minor",label:e.$t("beacon.minor"),"show-overflow-tooltip":"","min-width":"60",align:"center"}}):e._e(),e._v(" "),"0"==e.activeMenu&&2==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"deveui",label:e.$t("beacon.beaconid"),"show-overflow-tooltip":"",align:"center"}}):e._e(),e._v(" "),"0"!=e.activeMenu?n("el-table-column",{key:Math.random(),attrs:{property:"deveui",label:e.$t("terminal.DeviceID"),"show-overflow-tooltip":"",align:"center"}}):e._e(),e._v(" "),n("el-table-column",{key:Math.random(),attrs:{property:"alias",label:e.$t("floormanagement.Devicealias2"),"show-overflow-tooltip":"",align:"center","min-width":"78"}}),e._v(" "),1==e.intoProjectType?n("el-table-column",{key:Math.random(),attrs:{property:"typestr",label:e.$t("floormanagement.DeviceType2"),"show-overflow-tooltip":"",align:"center","min-width":"78"}}):e._e(),e._v(" "),n("el-table-column",{key:Math.random(),attrs:{property:"inusestr",label:e.$t("floormanagement.status1"),"show-overflow-tooltip":"",align:"center","min-width":"78"}}),e._v(" "),n("el-table-column",{attrs:{property:"zh"==e.i8n?"workstatestr":"enworkstate",label:e.$t("floormanagement.workingcondition"),"show-overflow-tooltip":"",align:"center"}})],1),e._v(" "),n("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%"}},[n("el-pagination",{attrs:{"current-page":e.currentPage2,"page-size":20,layout:"total, prev, pager, next",total:e.totalArrange},on:{"current-change":e.handleCurrentChangeArrange}})],1)],1):e._e()])])]),e._v(" "),n("el-dialog",{staticClass:"showHeadr",staticStyle:{"text-align":"center"},attrs:{width:"30%",title:e.$t("floormanagement.Editdeviceinformation"),visible:e.editFeatures3D,modal:!1},on:{"update:visible":function(t){e.editFeatures3D=t}}},[n("el-form",{ref:"editFeatureData",staticStyle:{"text-align":"center"},attrs:{model:e.editFeatureData,"label-width":"100px"}},[n("el-form-item",{attrs:{label:e.$t("floormanagement.device")}},[n("el-input",{attrs:{disabled:""},model:{value:e.editFeatureData.deveui,callback:function(t){e.$set(e.editFeatureData,"deveui",t)},expression:"editFeatureData.deveui"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Devicealias")}},[n("el-input",{model:{value:e.editFeatureData.alias,callback:function(t){e.$set(e.editFeatureData,"alias",t)},expression:"editFeatureData.alias"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.editFeatureCancel3D()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editFeaturesTrue3D()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"showHeadr setAreas",staticStyle:{"text-align":"center"},attrs:{width:"30%",visible:e.setAnglimit3D,modal:!1},on:{"update:visible":function(t){e.setAnglimit3D=t},close:e.setAreas3DCancel}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("floormanagement.Setscanarea"))+"\n              "),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.scannedarea")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1),e._v(" "),n("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("el-radio",{attrs:{label:2}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl1,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:1}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl2,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:8}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl4,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:4}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl8,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:6}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl9,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:3}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl3,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:9}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl6,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:12}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl12,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:14}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl13,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:13}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl14,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:7}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl11,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:11}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl7,fit:"fit"}})],1),e._v(" "),n("el-radio",{attrs:{label:15}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.setAreasUrl15,fit:"fit"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.setAreas3DCancel()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setAreas3DTrue()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"edit showHeadr",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.Setarea"),visible:e.trancheShow3D,width:"30%",modal:!1},on:{"update:visible":function(t){e.trancheShow3D=t}}},[n("el-form",{ref:"TrancheDatas",staticStyle:{"text-align":"left","margin-left":"10px"},attrs:{"label-width":"130px"}},[n("el-form-item",{attrs:{label:e.$t("beacon.beaconid1")}},[n("el-input",{attrs:{disabled:""},model:{value:e.TrancheDatas.beaconids,callback:function(t){e.$set(e.TrancheDatas,"beaconids",t)},expression:"TrancheDatas.beaconids"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Alias")}},[n("el-input",{attrs:{disabled:""},model:{value:e.TrancheDatas.alias,callback:function(t){e.$set(e.TrancheDatas,"alias",t)},expression:"TrancheDatas.alias"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Positioningarea1")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("terminal.choose")},model:{value:e.TrancheDatas.tranche,callback:function(t){e.$set(e.TrancheDatas,"tranche",t)},expression:"TrancheDatas.tranche"}},e._l(e.setTrancheList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("floormanagement.Alarmarea1")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("terminal.choose")},model:{value:e.TrancheDatas.alarmid,callback:function(t){e.$set(e.TrancheDatas,"alarmid",t)},expression:"TrancheDatas.alarmid"}},e._l(e.setAlarmTrancheList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.updateTrancheCancel3D()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.updateTrancheTrue3D()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1),e._v(" "),n("el-dialog",{staticClass:"edit showHeadr setAdjoinBeacon",staticStyle:{"text-align":"center","margin-right":"2%"},attrs:{title:e.$t("tet.setup")+e.adjoinBeaconAlias+e.$t("tet.Adjacentbeacon"),visible:e.adjoinBeaconShow3D,width:"30%",modal:!1},on:{"update:visible":function(t){e.adjoinBeaconShow3D=t},close:e.closeAdjoinBeacon3D,open:e.openAdjoinBeacon3D}},[n("el-form",{staticStyle:{"text-align":"left","margin-left":"10px"},attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:e.$t("floormanagement.Adjacentbeacon"),prop:""}},[n("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",multiple:"",clearable:"",placeholder:e.$t("terminal.choose")},model:{value:e.adjoinBeacon,callback:function(t){e.adjoinBeacon=t},expression:"adjoinBeacon"}},e._l(e.adjoinBeaconDataList,function(e){return n("el-option",{key:e.id,attrs:{label:e.alias,value:e.major+e.minor}})}),1),e._v(" "),n("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v(e._s(e.$t("floormanagement.title5")))])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.closeAdjoinBeacon3D()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.setAdjoinBeaconTrue3D()}}},[e._v(e._s(e.$t("change.sure")))])],1)],1)],1),e._v(" "),n("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.Regionalmanagement"),visible:e.addTranchePosition,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.addTranchePosition=t},close:e.addTrancheRowCancelPosition}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title-text"},[e._v(e._s(e.$t("floormanagement.Regionalmanagement"))+"\n              "),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                    "+e._s(e.$t("floormanagement.title6"))+"\n                  ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)]),e._v(" "),n("el-radio-group",{attrs:{size:"small"}},[n("el-button",{staticClass:"add",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.addTrancheRowPosition}},[e._v(e._s(e.$t("floormanagement.add")))])],1),e._v(" "),n("el-form",{staticStyle:{"text-align":"center"}},[n("el-form-item",{staticStyle:{width:"60%","margin-left":"16%","text-align":"left","margin-top":"14px"},attrs:{label:e.$t("floormanagement.Import")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("floormanagement.Importbuilding")},on:{change:e.importTranchePosition},model:{value:e.currentProjectid.groundid,callback:function(t){e.$set(e.currentProjectid,"groundid",t)},expression:"currentProjectid.groundid"}},e._l(e.projectList(),function(e){return n("el-option",{key:e.id,attrs:{label:e.ground,value:e.id}})}),1)],1)],1),e._v(" "),e._l(e.positionTrancheList,function(t,a){return n("el-form",{key:t.id,staticClass:"demo-form-inline addTranche",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"0px"}},[n("el-form-item",[n("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"zh"==e.i8n?"12":"30",disabled:void 0!==t.id},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),e._v(" "),n("p",[n("el-button",{staticClass:"del",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return e.deleTrancheRowPosition(a,t.name,t.id)}}},[e._v(e._s(e.$t("floormanagement.delete")))])],1),e._v(" "),n("p",{staticClass:"tranchSwitch"},[n("span",[e._v(e._s(e.$t("floormanagement.Regionalshake")))]),e._v(" "),n("i-switch",{attrs:{size:"large",value:t.fremove},model:{value:t.fremove,callback:function(a){e.$set(t,"fremove",a)},expression:"item.fremove"}},[n("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("floormanagement.open")))]),e._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("floormanagement.close")))])])],1)],1)],1)}),e._v(" "),n("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-10px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.addTrancheRowCancelPosition()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTrancheRowTruePosition()}}},[e._v(e._s(e.$t("change.sure")))])],1)],2),e._v(" "),n("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:e.$t("floormanagement.Alarmarea"),visible:e.addTrancheAlarm,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.addTrancheAlarm=t},close:e.addTrancheRowCancelAlarm}},[n("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title-text"},[e._v(e._s(e.$t("floormanagement.Alarmarea"))+"\n              "),n("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("\n                    "+e._s(e.$t("floormanagement.title6"))+"\n                  ")])]),e._v(" "),n("i",{staticClass:"el-icon-question"})])],1)]),e._v(" "),n("el-radio-group",{attrs:{size:"small"}},[n("el-button",{staticClass:"add",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:e.addTrancheRowAlarm}},[e._v(e._s(e.$t("floormanagement.add")))])],1),e._v(" "),n("el-form",{staticStyle:{"text-align":"center"}},[n("el-form-item",{staticStyle:{width:"60%","margin-left":"16%","text-align":"left","margin-top":"14px"},attrs:{label:e.$t("floormanagement.Import")}},[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:e.$t("floormanagement.Importbuilding")},on:{change:e.importTrancheAlarm},model:{value:e.currentProjectid.groundid,callback:function(t){e.$set(e.currentProjectid,"groundid",t)},expression:"currentProjectid.groundid"}},e._l(e.projectList(),function(e){return n("el-option",{key:e.id,attrs:{label:e.ground,value:e.id}})}),1)],1)],1),e._v(" "),e._l(e.alarmTrancheList,function(t,a){return n("el-form",{key:t.id,staticClass:"demo-form-inline addTranche",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"0px"}},[n("el-form-item",[n("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"zh"==e.i8n?"12":"30",disabled:void 0!==t.id},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),e._v(" "),n("p",[n("el-button",{staticClass:"del",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return e.deleTrancheRowAlarm(a,t.name,t.id)}}},[e._v(e._s(e.$t("floormanagement.delete")))])],1)],1)],1)}),e._v(" "),n("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-10px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.addTrancheRowCancelAlarm()}}},[e._v(e._s(e.$t("change.cancle")))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTrancheRowTrueAlarm()}}},[e._v(e._s(e.$t("change.sure")))])],1)],2),e._v(" "),n("el-dialog",{staticClass:"showHeadr",staticStyle:{"text-align":"center"},attrs:{width:"30%",visible:e.showDistance,modal:!1},on:{"update:visible":function(t){e.showDistance=t}}},[n("p",[e._v(e._s(e.$t("floormanagement.Xaxis"))+e._s(e.distanceData.x)+"cm")]),e._v(" "),n("p",[e._v(e._s(e.$t("floormanagement.Yaxis"))+e._s(e.distanceData.y)+"cm")])])],1)],1)],1)])},staticRenderFns:[]};var i=function(e){a("LSmT"),a("5X0f")},r=a("VU/8")(n.a,s,!1,i,"data-v-26d1f61f",null);t.a=r.exports},cZaB:function(e,t,a){e.exports=a.p+"static/media/~1.344c3e4.mp4"},urBA:function(e,t,a){e.exports=a.p+"static/media/En.6c4719f.mp4"},wR3u:function(e,t,a){"use strict";t.b=function(e){return","==(e=e.replace(/\s*/g,"").replace(//gi,",").replace(/~{2,}/g,"~").replace(/-{2,}/g,"-").replace(/,{2,}/g,",")).charAt(e.length-1)?e=e.substring(0,e.lastIndexOf(",")):e},t.a=function(e){var t=new RegExp("[\\u4E00-\\u9FFF]+","g"),a=new RegExp("[a-zA-Z]+","g");return!!(/[!@#$%^&*()+=\[\]{}|\\;:'"./<>?]+/.test(e)||t.test(e)||a.test(e))},t.c=function(e){for(var t=[],a=0;a<e.length;a++)if(-1==e[a].indexOf("~")){var n=Number(e[a]);if(isNaN(n))return!1;if(0==n||n<-5||n>100)return!1;t.push(n)}else{var s=e[a].split("~");if(s.length>2)return!1;var i=Number(s[0]),r=Number(s[1]);if(isNaN(i)||isNaN(r))return!1;if(0==i||i<-5||i>100||0==r||r<-5||r>100)return!1;if(i>=r)return!1;for(var o=i;o<r+1;o++)0!=o&&t.push(o)}return t}}});
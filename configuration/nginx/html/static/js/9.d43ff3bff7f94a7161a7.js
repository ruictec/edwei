webpackJsonp([9],{"/uG6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAjZJREFUSEutljuMDXEUh79foxEJCYXKoyUesYlVYFUisRRC5RGxbIMECck2bEGQiIqEcrezHRIdVyGs2KxGRWJLiQKJTvGTc3NGZufeO3Nj76nmcc75/uc5IwYktseAC8AW4C0wIamlQfi3/QQ4mr5awEhejy0ZYHs18D0dDkmasx2AV8CbQQAKZ5OSbhQZsR2AkUEAVgI/wrGktj/bO4F3UYslA9LhPLAtTz8JXM/rh4sAtk8Ao8CuVIhueCZpuq4ZbE8AN7voHPgHqHRCVXdG0rFeENvLMyWbSzpTkk4VOfsA7Gho2TlJQzWQiH4q3/8G9kial+1zwKOS4SfgSt7fAzaV3o1LelwDuQ1cAy5Lut8uvO2gBj1kVtJw2YHt6IboipBpSSerANsRfRz0JXCknM4AfAXWp9GwpNkKoGi5eLwgaUMXgIFFc1DoBCB6OHo5pAnwU9Kqwth2tOY6oCXpV7fUBaDcw00p+ihpewkQed4o6XCvugTgDnC1zyLflRRFbEuug9flFVEFBaCc414HKZ53pLDJoJiDpznBdfox0YcqDRDLba+kfT1TlKEejJXQcJpRSc//C5CQuig6Tp827fVcW4NSweqi6Dh9Ai7FDpIUS7GrVLdprIGzFc0Hks5XrW2fAY4DpyUt9AtYBrwHtqZBTPVuSX9KkcZaWJHrI+YmvsE9peODU2nb/TmpayTdsh0rIWQGuCjpW19t2iX88Xy2Nn9FPscStB2/JS8kfWlyXLz/C+df8tB5FBOFAAAAAElFTkSuQmCC"},I65w:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAZxJREFUSEvtlb8uREEUxn/fK9AShAeQrEgklEodQoKEwlLSeQIdpT8Fya6EoFMqSSRC4gEIQssrHDmb2c11zd1ZxVacZDKTuWfmm/Od850r2mxq8/38AQAz6wLGgeEwO6uXwK3Pkt6b0dyUIjPbAhaAzoJLPoCKpPUikEIAM7PMoSpwAdyEvRFgApiv+0iK3hXdNLMZ4DgcnpZ0FnuhmU0Bp+HbrKSTvN8PADPrAO6BXmBIkq8LzcxKwB3wApQkfWadYwDLwB6wL6ncik7MzP39XFnSfgrA+Z7z5Erydc1yOSHLuZl5LirAkaRGXvxcLAIPtQfok+TrVgCczmfgVZKvGxYDeAT6ge5sjScicK28AU+SBlIAO8AK8K16EgD1atqVtJoCWAQOgKokF1nSzMz5d+6XJB2mADzch6DeQg1kclN/vat6MN86ioTmLWItXFKohYwG3HU71jJabRVe29fAVQAdA0ZD7de2ftUqMuF7y9gMqo7lwst4I9Yi6s7JH05oHZOAv9qHm0fi4zzfGvKvSAIkSyjh8A+QZPALxQSeGV7YKpIAAAAASUVORK5CYII="},"JG/u":function(t,e){},bIWv:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAhxJREFUSEu9lU2IjlEYhq97ZSNsKIyVHflJSpRiY6mQyWZYIcNimoVkY2ZjWCFN/nZS0igLC7FhIZT8JT8LC+Vn1iNbbj065+v93u8933yTPqfeejvnOec6536ecx/R56Ze1re9EFiTvl/AG+CDpB+zze8KsH0UOASsLSz0Grgl6UwJ1AiwvRy4COxKE+8BD4DPwG9gAFgN7AUWAy+BIUnv66AOgO0x4FQKnATOS/rUtEPb84BR4HQaH5M0Xo1tA9heBbxLAQckXZ9N4xi3vRLImxiQ9C3PqwNeABuAQUlTOcj2fEk/u8FsbwMeAnck7e4A2D4BTADjkkKmVqtM3iLpaQlkOyQdBo5Jin9aJ7D9ClgCbJQ0XQBE96ikc4WchFSxgWlJ61oA2wuAGeCypCP1yZUT5KFrkqJ8O5rtyNsQsEjSzN8T2N4EPEuldqMHQITclbSzIXYEiBNulfQ4A2I3V4Dtkh71CIiw58B+SR8rBZGTPSzp0n8DZInayrNhV9XDlSTaB9ysS5STPCVpsAeJuiX5NrCnLckp0VGm61OZxoVrugfRNyLpQqGCwsPeAl/ayjQB8kW7KulwAbBZUlRbY7N9FjjeeNES5F+sIiw93olmq0iAqtk1JrwgzQ7gfhorm12ChFVnL5qQdLKLJEuBkDPbe4eP9fLgfAdCuifA1/StAMJ3DgLL5vTg1JLbnyez4R7059EvaT+X/j+z+wwoM2JUNwAAAABJRU5ErkJggg=="},hgQF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("woOf"),n=i.n(a),s=i("3zDK"),o=i("PO8r"),r=i("nQqC"),l=i("Rj4H"),c=(i("ktr9"),i("czjk")),d=i("trid"),p=i("7rnj"),u=i("flqW"),g=i("Lfyu"),h=i("/LWt"),m=i("nq2H"),f=i("T18w"),v=i("Umvz"),b=i("WMwB"),y=i("Mjwz"),w=i("zOBh"),k=i("2YZ9"),x=i("lUmj"),_=i("c2Ch"),$=(i("s0MJ"),{components:{Menu:o.a,basecard:r.a,Asset:l.a},name:"CheckWork",data:function(){return{i8n:this.$store.state.i18n,activeName:"first",projectid:this.$store.state.intoProjectid,intoProjectid:this.$store.state.intoProjectid,intoProjectType:this.$store.state.intoProjectType,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,contrForPrionum:this.$store.state.userInfo.prionum,delprio:this.$store.state.userInfo.delprio,tenantid_A:this.$store.state.userInfo.tenantid,tableData:[],tableDataHis:[],multipleSelection:[],currentRow:null,currentRowHis:null,pickerOptions:{shortcuts:[{text:this.$t("terminal.pickeroptions4"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions5"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-1728e5),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions6"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-5184e5),t.$emit("pick",[i,e])}}]},tasktime:[],taskData:[],begingTime:"",endTime:"",departList:[],searchList:{projectid:this.$store.state.projectid,begintime:"",endtime:"",page:1,count:20,states:""},begindate:"",enddate:"",detail:!1,searchListHis:{userid:"",taskid:"",projectid:this.$store.state.projectid,taskdate:"",taskstatus:"",begintaskstatus:"",endtaskstatus:"",page:1,count:20},taskList:[],taskInfoTimeList:[],total:0,totalMember:0,pageCount:20,pageCountHis:20,pageCountMem:20,currentPage1:1,edit:!1,editData:{id:"",name:"",repetition:"",daily:"",begindate:"",enddate:"",begintime:"",endtime:"",memo:""},editRules:{name:[{required:!0,message:this.$t("inspection.patroltask"),trigger:"blur"}],repetition:[{required:!0,message:this.$t("inspection.duplicatedate"),trigger:"change"}]},add:!1,addData:{name:"",projectid:this.$store.state.projectid,repetition:"",daily:"",begindate:"",enddate:"",begintime:"",endtime:"",memo:"",timezone:3600*(0-(new Date).getTimezoneOffset()/60)},mapTypes:!0,setInspectionMap:!1,inspectionDetails:[],inspectionInfodetails:[],inspectionDetailsArr:[],inspectionName:"",inspectionId:"",isactive:"",isactiveGround:!1,buildingList:[],building:"",grounds:"",groundid:"",imgUrl:"",map:null,mapName:"allmap",mapNameHis:"allmapHis",arrangeFeatures:"",iconSrc:"",featureArrs:[],showInspection:!1,showInspectionData:[],showUser:!1,userDetails:[],groundListCopy:[],newGround:"",changemap:!0,map3d:null,fmapId:"",themeId:"",scrollFloorControl:"",layer:null,layerList:[],layer2:null,setNewMarker:!0,addRules:{name:[{required:!0,message:this.$t("inspection.patroltask"),trigger:"blur"}],repetition:[{type:"number",required:!0,message:this.$t("inspection.duplicatedate"),trigger:"change"}]},update:!1,updateData:{},userid:[],totleTime:"",totleDate:"",above_now:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},repetitionList:[{index:1,value:this.$t("inspection.Norepetition")},{index:5,value:this.$t("inspection.onehour")},{index:6,value:this.$t("inspection.twohours")},{index:7,value:this.$t("inspection.threehours")},{index:8,value:this.$t("inspection.fourhours")},{index:9,value:this.$t("inspection.fivehours")},{index:10,value:this.$t("inspection.sixhours")},{index:2,value:this.$t("inspection.Everyday")},{index:4,value:this.$t("inspection.weekly")},{index:3,value:this.$t("inspection.monthly")}],dailyList:[],dailyDays:[{value:"01",index:1},{value:"02",index:2},{value:"03",index:3},{value:"04",index:4},{value:"05",index:5},{value:"06",index:6},{value:"07",index:7},{value:"08",index:8},{value:"09",index:9},{value:"10",index:10},{value:"11",index:11},{value:"12",index:12},{value:"13",index:13},{value:"14",index:14},{value:"15",index:15},{value:"16",index:16},{value:"17",index:17},{value:"18",index:18},{value:"19",index:19},{value:"20",index:20},{value:"21",index:21},{value:"22",index:22},{value:"23",index:23},{value:"24",index:24},{value:"25",index:25},{value:"26",index:26},{value:"27",index:27},{value:"28",index:28},{value:"29",index:29},{value:"30",index:30},{value:"31",index:31}],dailyWeeks:[{index:1,value:this.$t("inspection.Monday")},{index:2,value:this.$t("inspection.Tuesday")},{index:3,value:this.$t("inspection.Wednesday")},{index:4,value:this.$t("inspection.Thursday")},{index:5,value:this.$t("inspection.Friday")},{index:6,value:this.$t("inspection.Saturday")},{index:7,value:this.$t("inspection.Sunday")}],statusList:[{index:1,value:this.$t("inspection.normal")},{index:2,value:this.$t("inspection.termination")}],statusHisList:[{index:1,value:this.$t("inspection.Notperformed")},{index:2,value:this.$t("inspection.inprogress")},{index:3,value:this.$t("inspection.complete")},{index:4,value:this.$t("inspection.incomplete")}],sexType:[{index:1,value:this.$t("inspection.man")},{index:2,value:this.$t("inspection.woman")}],del:!1,delHis:!1,loading:!1,deleteData:[],memberList:[],nameList:[],taskHisInfo:!1,lastGroup:!0,nextGroup:!0,lastBuilding:!0,nextBuilding:!0,lastGroup3D:!1,nextGroup3D:!1,taskHisInfoData:[],buildingListHis:[],groundListHis:[],taskHis:!1}},methods:{tableCellClassName:function(t){return 1==t.taskstatus?"not-conducted":2==t.taskstatus?"underway":3==t.taskstatus?"finished":4==t.taskstatus?"unfinished":void 0},datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var i=new Date(t);return i.getFullYear()+"-"+e(i.getMonth()+1)+"-"+e(i.getDate())+" "+(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+e(i.getMinutes())+":"+e(i.getSeconds())},formatDatectime:function(t,e){if(null==t.ctime||0==t.ctime)return"";var i=new Date(1e3*parseInt(t.ctime)).toUTCString();return this.datetimecut(i)},datetimecut1:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var i=new Date(t);i.getFullYear();return e(i.getMonth()+1)+"-"+e(i.getDate())+" "+(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+e(i.getMinutes())+":"+e(i.getSeconds())},formatDatetime:function(t){if(null==t||0==t)return"";var e=new Date(1e3*parseInt(t)).toUTCString();return this.datetimecut1(e)},formatSeconds:function(t){var e=parseInt(t),i=0,a=0;e>60&&(i=parseInt(e/60),e=parseInt(e%60),i>60&&(a=parseInt(i/60),i=parseInt(i%60)));var n=parseInt(e)+"s";return i>0&&(n=parseInt(i)+"m"+n),a>0&&(n=parseInt(a)+"h"+n),n},changeTab:function(t,e){switch(t.index){case"0":this.searchList={projectid:this.$store.state.projectid,begintime:"",endtime:"",page:1,count:20,states:""},this.currentPage1=1,this.pageCount=20,this.tasktime=[],this.taskHis=!1,this.getTaskNameIds(),this.getTaskManagementLists();break;case"1":this.searchListHis={userid:"",taskid:"",projectid:this.$store.state.projectid,taskdate:"",taskstatus:"",begintaskstatus:"",endtaskstatus:"",page:1,count:20},this.currentPage1=1,this.pageCountHis=20,this.taskData=[],this.taskHis=!0,this.getTaskNameIds(),this.getMemberLists2(),this.getTaskInfoLists()}},setInspection:function(t){this.inspectionDetails=[],this.isactive="",this.buildingList=[],this.grounds="",this.map&&(this.map.setTarget("nnnnnn"),this.map=null),this.map3d&&(this.map3d.dispose(),this.map3d=null),this.inspectionName=this.tableData[t].name,this.inspectionId=this.tableData[t].id,this.tableData[t].details&&(this.inspectionDetails=this.tableData[t].details.split(",")),this.getBuildings(),this.setInspectionMap=!0},removeInspection:function(t){var e=this;this.$confirm(this.$t("inspection.RemoveRouteText"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var i={id:e.tableData[t].id,name:e.tableData[t].name};Object(_._131)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.clearBtn(),e.$message({message:e.$t("terminal.tet28"),type:"success"})):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})})},getBuildings:function(t,e){var i=this,a={projectid:this.$store.state.intoProjectid};Object(_._26)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(a){if(1001==a.code&&(i.buildingList=a.data,!t&&!e&&i.buildingList.length>0&&(i.isactive=i.buildingList[0].id,i.getGrounds(i.isactive)),t)){var n=i.buildingList.find(function(e){return e.id==t});1==n.buildtype?(i.mapTypes=!0,i.getGroundLists(t,e)):2==n.buildtype&&(i.mapTypes=!1,i.getGroundLists3D(t,e))}})},getGrounds:function(t){var e=this.buildingList.find(function(e){return e.id==t});1==e.buildtype?(this.map3d&&(this.map3d.dispose(),this.map3d=null),this.mapTypes=!0,this.getGroundLists(t)):2==e.buildtype&&(this.mapTypes=!1,this.getGroundLists3D(t))},getGroundsHis:function(t){this.groundListHis=[];var e=this.buildingList.find(function(e){return e.id==t}),i=void 0;this.buildingListHis.forEach(function(e,a){t!=e.buildid||(i=a)}),this.lastBuilding=0===i,i==this.buildingListHis.length-1?this.nextBuilding=!0:this.nextBuilding=!1;var a=this.taskHisInfoData.filter(function(e){return e.buildid===t}),n={};(a=a.reduce(function(t,e){return!n[e.groundid]&&(n[e.groundid]=t.push(e)),t},[])).sort(function(t,e){return t.ground-e.ground});for(var s=0;s<a.length;s++)this.groundListHis.push(a[s].ground);this.groundListHis.sort(function(t,e){return t-e}),this.groundListHis=this.groundListHis.reverse(),this.isactive=t,this.building=t,1==e.buildtype?(1==this.groundListHis.length?(this.lastGroup=!0,this.nextGroup=!0):this.groundListHis.length>1&&(this.lastGroup=!0,this.nextGroup=!1),this.map3d&&(this.map3d.dispose(),this.map3d=null),this.mapTypes=!0,this.getBuildGroundLists(this.groundListHis[this.groundListHis.length-1])):2==e.buildtype&&(1==this.groundListHis.length?(this.lastGroup3D=!0,this.nextGroup3D=!0):this.groundListHis.length>1&&(this.lastGroup3D=!0,this.nextGroup3D=!1),this.mapTypes=!1,this.getGroundLists3D(t,a[0].ground))},lastBuildings:function(){this.nextBuilding=!1;var t=this,e=this.buildingListHis.findIndex(function(e){return e.buildid==t.isactive});this.isactive=t.buildingListHis[e-1].buildid,0==e&&(this.lastBuilding=!0),this.getGroundsHis(this.isactive)},lastGroups:function(){var t=this,e=this.groundListHis.findIndex(function(e){return e==t.isactiveGround});t.groundListHis=t.groundListHis.reverse(),this.isactiveGround=t.groundListHis[e],t.groundListHis=t.groundListHis.reverse(),this.getBuildGroundLists(this.isactiveGround)},nextBuildings:function(){this.lastBuilding=!1;var t=this,e=this.buildingListHis.findIndex(function(e){return e.buildid==t.isactive});this.isactive=t.buildingListHis[e+1].buildid,e==t.buildingListHis.length-1&&(this.nextBuilding=!0),this.getGroundsHis(this.isactive)},nextGroups:function(){var t=this,e=this.groundListHis.findIndex(function(e){return e==t.isactiveGround});t.groundListHis=t.groundListHis.reverse(),this.isactiveGround=t.groundListHis[e],t.groundListHis=t.groundListHis.reverse(),this.getBuildGroundLists(this.isactiveGround)},getGroundLists:function(t,e){var i=this;this.featureArrs=[],this.isactive=t;var a={buildid:t};Object(_._58)(a,i.tenantkey_A,i.tenantid_A,i.userName).then(function(a){1001==a.code&&(i.grounds=a.data.reverse(),i.building=t,e?i.getBuildGroundLists(e):i.getBuildGroundLists(i.grounds[i.grounds.length-1]))})},getGroundLists3D:function(t,e){var i=this;i.groundListCopy=[],this.isactive=t,this.building=t,this.map3d&&(this.map3d.dispose(),this.map3d=null);var a={buildid:t};Object(_._57)(a,i.tenantkey_A,i.tenantid_A,i.userName).then(function(t){if(1001==t.code){for(var a=0;a<t.data.length;a++){var n={groundid:t.data[a].id,ground:t.data[a].ground,newground:a+1};i.groundListCopy.push(n)}i.fmapId=t.data[0].filename,i.themeId=t.data[0].filetype,setTimeout(function(){var a=void 0;e&&(a=i.groundListCopy.find(function(t){return t.ground==e}).newground);0==i.taskHis?i.onmap(i.$store.state.intoProjectid,a,t.data[0].appname,t.data[0].mapkey):i.onmapHis(i.$store.state.intoProjectid,a,t.data[0].appname,t.data[0].mapkey)},1)}})},onmap:function(t,e,i,a){var n=void 0;n=e||1,document.oncontextmenu=function(t){return!1};var s=this,o={container:document.getElementById("fengMap"),level:n,visibleLevels:[n],appName:i,key:a,viewMode:fengmap.FMViewMode.MODE_2D,mapID:s.fmapId,themeID:s.themeId,zoomRange:[1,29]};this.map3d=new fengmap.FMMap(o),this.map3d.on("loaded",function(){s.loadScrollFloorCtrl();var e=s.groundListCopy.find(function(t){return t.newground==s.map3d.getLevel()}),i={projectid:s.intoProjectid,buildid:s.building,ground:e.ground};Object(_._23)(i,s.tenantkey_A,s.tenantid_A,s.userName).then(function(e){1001==e.code&&(s.groundid=e.data.list[0].id,1==s.$store.state.intoProjectType?s.getArrangeBeaconPos3D(t,s.map3d.getLevel()):2==s.$store.state.intoProjectType&&s.getArrangeGatewayPos3D(t,s.map3d.getLevel()))})}),this.map3d.on("levelChanged",function(e){s.layerList.length>0&&(s.layerList.forEach(function(t){t.remove()}),s.layerList=[]);var i=s.groundListCopy.find(function(t){return t.newground==s.map3d.getLevel()}),a={projectid:s.intoProjectid,buildid:s.building,ground:i.ground};Object(_._23)(a,s.tenantkey_A,s.tenantid_A,s.userName).then(function(e){1001==e.code&&(s.groundid=e.data.list[0].id,1==s.$store.state.intoProjectType?s.getArrangeBeaconPos3D(t,s.map3d.getLevel()):2==s.$store.state.intoProjectType&&s.getArrangeGatewayPos3D(t,s.map3d.getLevel()))})}),this.map3d.on("click",function(t){"64"==t.targets[0].type&&(s.setNewMarker=!1,0==t.mouseEvent.button&&s.map3dClick(t.targets[0]))})},onmapHis:function(t,e,i,a){var n=void 0;n=e||1,document.oncontextmenu=function(t){return!1};var s=this,o={container:document.getElementById("fengMapHis"),level:n,visibleLevels:[n],appName:i,key:a,viewMode:fengmap.FMViewMode.MODE_2D,mapID:s.fmapId,themeID:s.themeId};this.map3d=new fengmap.FMMap(o),this.map3d.on("loaded",function(){var e=s.groundListCopy.find(function(t){return t.newground==s.map3d.getLevel()}),i={projectid:s.intoProjectid,buildid:s.building,ground:e.ground};Object(_._23)(i,s.tenantkey_A,s.tenantid_A,s.userName).then(function(e){1001==e.code&&(s.groundid=e.data.list[0].id,1==s.$store.state.intoProjectType?s.getArrangeBeaconPos3D(t,s.map3d.getLevel()):2==s.$store.state.intoProjectType&&s.getArrangeGatewayPos3D(t,s.map3d.getLevel()))})}),this.map3d.on("levelChanged",function(e){s.layerList.forEach(function(t){t.remove()}),s.layerList=[];var i=s.groundListCopy.find(function(t){return t.newground==s.map3d.getLevel()}),a={projectid:s.intoProjectid,buildid:s.building,ground:i.ground};Object(_._23)(a,s.tenantkey_A,s.tenantid_A,s.userName).then(function(e){1001==e.code&&(s.groundid=e.data.list[0].id,1==s.$store.state.intoProjectType?s.getArrangeBeaconPos3D(t,s.map3d.getLevel()):2==s.$store.state.intoProjectType&&s.getArrangeGatewayPos3D(t,s.map3d.getLevel()))})})},changeGroup:function(){var t=this,e=t.groundListCopy.filter(function(e){return t.map3d.getLevel()>e.newground}),i=t.groundListCopy.filter(function(e){return t.map3d.getLevel()<e.newground});0==e.length?this.lastGroup3D=!0:this.lastGroup3D=!1,0==i.length?this.nextGroup3D=!0:this.nextGroup3D=!1},lastGroups3D:function(){var t=this;this.map3d.setLevel({level:this.map3d.getLevel()-1,finish:function(){t.changeGroup()}})},nextGroups3D:function(){var t=this;this.map3d.setLevel({level:this.map3d.getLevel()+1,finish:function(){t.changeGroup()}})},loadScrollFloorCtrl:function(){var t={position:fengmap.FMControlPosition.RIGHT_TOP,needAllLayerBtn:!1,offset:{x:-20,y:20}};this.scrollFloorControl=new fengmap.FMToolbar(t),this.scrollFloorControl.addTo(this.map3d)},getArrangeBeaconPos3D:function(t,e){var i=this,a={fortype:2,groundid:i.groundid,projectid:t,inallot:1,inuse:1};Object(_._21)(a,i.tenantkey_A,i.tenantid_A,i.userName).then(function(t){if(1001==t.code&&(i.arrangeFeatures=t.data.list,i.arrangeFeatures.length>0))for(var a=0;a<i.arrangeFeatures.length;a++){i.arrangeFeatures[a].inspection=!1;for(var n=0;n<i.inspectionDetails.length;n++)if(i.arrangeFeatures[a].beaconid==i.inspectionDetails[n]){i.arrangeFeatures[a].inspection=!0;break}0==i.taskHis?i.addMarkers(i.arrangeFeatures[a],e):i.addMarkersHis(i.arrangeFeatures[a],e)}})},getArrangeGatewayPos3D:function(t,e){var i=this,a={groundid:i.groundid,projectid:t,inallot:1,inuse:1};Object(_._47)(a,i.tenantkey_A,i.tenantid_A,i.userName).then(function(t){if(1001==t.code&&(i.arrangeFeatures=t.data.list,i.arrangeFeatures.length>0))for(var a=0;a<i.arrangeFeatures.length;a++){i.arrangeFeatures[a].inspection=!1;for(var n=0;n<i.inspectionDetails.length;n++)if(i.arrangeFeatures[a].deveui==i.inspectionDetails[n]){i.arrangeFeatures[a].inspection=!0;break}0==i.taskHis?i.addMarkers(i.arrangeFeatures[a],e):i.addMarkersHis(i.arrangeFeatures[a],e)}})},addMarkers:function(t,e){if(1==this.$store.state.intoProjectType)var i={x:t.longi,y:t.lati},a={x:t.longi,y:t.lati,alias:t.alias,deveui:t.beaconid,major:t.major,minor:t.minor,type:t.type,clockin:t.clockin,tranche:t.tranche,inspection:t.inspection,warning:""};else if(2==this.$store.state.intoProjectType)i={x:t.lastx,y:t.lasty},a={x:t.lastx,y:t.lasty,alias:t.alias,deveui:t.deveui,major:t.major,minor:t.minor,type:"",clockin:t.clockin,inspection:t.inspection,warning:t.warning};1==this.intoProjectType?t.inspection?this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,image:{url:"../../../static/beacon_sos.png",size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER},height:2}):this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:this.iconSrc,size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}}):2==this.intoProjectType&&(t.inspection?this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:"../../../static/gateway_sos.png",size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}}):this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:this.iconSrc,size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}})),this.layer.selfAttr=a;var n=this.map3d.getLevel(),s=this.map3d.getFloor(n);this.layer.addTo(s),this.layerList.push(this.layer)},addMarkersHis:function(t,e){if(1==this.$store.state.intoProjectType)var i={x:t.longi,y:t.lati},a={x:t.longi,y:t.lati,alias:t.alias,deveui:t.beaconid,major:t.major,minor:t.minor,type:t.type,clockin:t.clockin,tranche:t.tranche,inspection:t.inspection,warning:""};else if(2==this.$store.state.intoProjectType)i={x:t.lastx,y:t.lasty},a={x:t.lastx,y:t.lasty,alias:t.alias,deveui:t.deveui,major:t.major,minor:t.minor,type:"",clockin:t.clockin,inspection:t.inspection,warning:t.warning};if(1==this.intoProjectType)if(t.inspection)if(this.inspectionInfodetails.includes(t.beaconid)){var n=void 0;this.taskInfoTimeList.forEach(function(e){e.deveui==t.beaconid&&(n=e)}),this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias+"\n"+this.$t("inspection.start")+"："+this.formatDatetime(n.begintime)+"\n"+this.$t("inspection.stay")+"："+this.formatSeconds(n.staytime)}},x:i.x,y:i.y,height:2,image:{url:"../../../static/beacon_green.png",size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}})}else this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:"../../../static/beacon_sos.png",size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}});else this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:this.iconSrc,size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}});else 2==this.intoProjectType&&(t.inspection?this.inspectionInfodetails.includes(a.beaconid)?this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:"../../../static/gateway_green.png",size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}}):this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:"../../../static/gateway_sos.png",size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}}):this.layer=new fengmap.FMCompositeMarker({layout:{style:"timage-btext",align:"center"},text:{padding:[0,0,0,0],plateStrokeWidth:1,content:{textAlign:fengmap.FMTextAlign.Center,lineSpacing:2,fontSize:14,fontFamily:"Microsoft YaHei",fillColor:"rgba(0, 0, 238)",text:a.alias}},x:i.x,y:i.y,height:2,image:{url:this.iconSrc,size:[100,100]},collision:!1,anchor:{baseon:"image",anchor:fengmap.FMMarkerAnchor.CENTER}}));this.layer.selfAttr=a;var s=this.map3d.getLevel(),o=this.map3d.getFloor(s);this.layer.addTo(o),this.layerList.push(this.layer)},map3dClick:function(t){t.selfAttr.inspection?(t.setImage(this.iconSrc,[100,100]),t.selfAttr.inspection=!1,t.update(),this.inspectionDetails.splice(this.inspectionDetails.indexOf(t.selfAttr.deveui),1)):(1==this.intoProjectType?t.setImage("../../../static/beacon_sos.png",[100,100]):2==this.intoProjectType&&t.setImage("../../../static/gateway_sos.png",[100,100]),t.selfAttr.inspection=!0,t.update(),this.inspectionDetails.push(t.selfAttr.deveui))},getBuildGroundLists:function(t){var e=this;this.isactiveGround=t;var i=this.groundListHis.findIndex(function(t){return t==e.isactiveGround});this.nextGroup=0===i,i==this.groundListHis.length-1?this.lastGroup=!0:this.lastGroup=!1;var a={projectid:this.intoProjectid,buildid:this.building,ground:t};Object(_._23)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code&&(t.data.list.length>0?(e.imgUrl=s.a.host+"indoormap/"+t.data.list[0].filetype,e.groundid=t.data.list[0].id,0==e.taskHis?e.mapInit(t.data.list[0].length,t.data.list[0].width):e.mapInitHis(t.data.list[0].length,t.data.list[0].width),1==e.intoProjectType?e.getArrangeBeaconPos(e.intoProjectid):2==e.intoProjectType&&e.getArrangeGatewayPos(e.intoProjectid)):e.map&&(e.map.setTarget("mapppppp"),e.map=null))})},mapInit:function(t,e){this.map&&(this.map.setTarget("masssss"),this.map=null);var i=[0,0,t,e],a=new p.a({code:"xkcd-image",units:"pixels",extent:i});t>1399&&e>699?1400:t>1399&&e<700?1400:t<1400&&e>699?700:t<1400&&e<700&&t,this.$refs.map.style.width="100%",this.$refs.map.style.height="100%",this.map=new d.a({layers:[new c.a({source:new u.a({url:this.imgUrl,projection:a,imageExtent:i})})],target:this.mapName,view:new g.a({projection:a,center:Object(h.y)(i),zoom:1,maxZoom:6})}),this.mapClick()},mapInitHis:function(t,e){this.map&&(this.map.setTarget("masssss"),this.map=null);var i=[0,0,t,e],a=new p.a({code:"xkcd-image",units:"pixels",extent:i});t>1399&&e>699?1400:t>1399&&e<700?1400:t<1400&&e>699?700:t<1400&&e<700&&t,this.$refs.map.style.width="100%",this.$refs.map.style.height="100%",this.map=new d.a({layers:[new c.a({source:new u.a({url:this.imgUrl,projection:a,imageExtent:i})})],target:this.mapNameHis,view:new g.a({projection:a,center:Object(h.y)(i),zoom:1,maxZoom:6})})},getArrangeGatewayPos:function(t){var e=this,i={groundid:e.groundid,projectid:t,inallot:1,inuse:1};Object(_._47)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){if(1001==t.code&&(e.arrangeFeatures=t.data.list,e.arrangeFeatures.length>0))for(var i=0;i<e.arrangeFeatures.length;i++){e.arrangeFeatures[i].inspection=!1;for(var a=0;a<e.inspectionDetails.length;a++)if(e.arrangeFeatures[i].deveui==e.inspectionDetails[a]){e.arrangeFeatures[i].inspection=!0;break}0==e.taskHis?e.addIconMarkers(e.map,e.arrangeFeatures[i]):e.addIconMarkersHis(e.map,e.arrangeFeatures[i])}})},getArrangeBeaconPos:function(t){var e=this,i={fortype:2,groundid:e.groundid,projectid:t,inallot:1,inuse:1};Object(_._21)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){if(1001==t.code&&(e.arrangeFeatures=t.data.list,e.arrangeFeatures.length>0))for(var i=0;i<e.arrangeFeatures.length;i++){e.arrangeFeatures[i].inspection=!1;for(var a=0;a<e.inspectionDetails.length;a++)if(e.arrangeFeatures[i].beaconid==e.inspectionDetails[a]){e.arrangeFeatures[i].inspection=!0;break}0==e.taskHis?e.addIconMarkers(e.map,e.arrangeFeatures[i]):e.addIconMarkersHis(e.map,e.arrangeFeatures[i])}})},addIconMarkers:function(t,e){if(1==this.$store.state.intoProjectType)var i=new m.a({x:e.longi,y:e.lati,alias:e.alias,deveui:e.beaconid,major:e.major,minor:e.minor,type:e.type,clockin:e.clockin,inspection:e.inspection,warning:"",geometry:new f.a([e.longi,e.lati])});else if(2==this.$store.state.intoProjectType)i=new m.a({x:e.lastx,y:e.lasty,alias:e.alias,deveui:e.deveui,major:e.major,minor:e.minor,type:"",clockin:"",inspection:e.inspection,warning:e.warning,geometry:new f.a([e.lastx,e.lasty])});var a,n=new b.a({features:[i]});1==this.intoProjectType?a=e.inspection?new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/beacon_sos.png",scale:1}),text:new k.a({text:e.alias,font:"12px font-size",fill:new x.a({color:"red"}),offsetY:10})}):new y.c({image:new w.a({anchor:[.5,1],src:this.iconSrc,scale:1}),text:new k.a({text:e.alias,font:"14px font-size",fill:new x.a({color:"blue"}),offsetY:10})}):2==this.intoProjectType&&(a=e.inspection?new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/gateway_sos.png",scale:1}),text:new k.a({text:e.alias,font:"12px font-size",fill:new x.a({color:"red"}),offsetY:10})}):new y.c({image:new w.a({anchor:[.5,1],src:this.iconSrc,scale:1}),text:new k.a({text:e.alias,font:"14px font-size",fill:new x.a({color:"blue"}),offsetY:10})}));var s=new v.a({source:n,style:a});t.addLayer(s)},addIconMarkersHis:function(t,e){if(1==this.$store.state.intoProjectType)var i=new m.a({x:e.longi,y:e.lati,alias:e.alias,deveui:e.beaconid,major:e.major,minor:e.minor,type:e.type,clockin:e.clockin,inspection:e.inspection,warning:"",begintime:e.begintime,staytime:e.staytime,geometry:new f.a([e.longi,e.lati])});else if(2==this.$store.state.intoProjectType)i=new m.a({x:e.lastx,y:e.lasty,alias:e.alias,deveui:e.deveui,major:e.major,minor:e.minor,type:"",clockin:"",inspection:e.inspection,warning:e.warning,begintime:e.begintime,staytime:e.staytime,geometry:new f.a([e.lastx,e.lasty])});var a,n=new b.a({features:[i]});if(1==this.intoProjectType)if(e.inspection)if(this.inspectionInfodetails.includes(e.beaconid)){var s=void 0;this.taskInfoTimeList.forEach(function(t){t.deveui==e.beaconid&&(s=t)}),a=new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/beacon_green.png",scale:1}),text:new k.a({text:e.alias+"\n"+this.$t("inspection.start")+"："+this.formatDatetime(s.begintime)+"\n"+this.$t("inspection.stay")+"："+this.formatSeconds(s.staytime),font:"14px font-size",textAlign:"left",fill:new x.a({color:"green"}),offsetY:25,offsetX:-30})})}else a=new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/beacon_sos.png",scale:1}),text:new k.a({text:e.alias,font:"14px font-size",fill:new x.a({color:"red"}),offsetY:10})});else a=new y.c({image:new w.a({anchor:[.5,1],src:this.iconSrc,scale:1}),text:new k.a({text:e.alias,font:"14px font-size",fill:new x.a({color:"blue"}),offsetY:10})});else if(2==this.intoProjectType)if(e.inspection)if(this.inspectionInfodetails.includes(e.deveui)){var o=void 0;this.taskInfoTimeList.forEach(function(t){t.deveui==e.deveui&&(o=t)}),a=new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/gateway_green.png",scale:1}),text:new k.a({text:e.alias+"\n"+this.$t("inspection.start")+"："+this.formatDatetime(o.begintime)+"\n"+this.$t("inspection.stay")+"："+this.formatSeconds(o.staytime),font:"12px font-size",fill:new x.a({color:"red"}),offsetY:10})})}else a=new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/gateway_sos.png",scale:1}),text:new k.a({text:e.alias,font:"12px font-size",fill:new x.a({color:"red"}),offsetY:10})});else a=new y.c({image:new w.a({anchor:[.5,1],src:this.iconSrc,scale:1}),text:new k.a({text:e.alias,font:"14px font-size",fill:new x.a({color:"blue"}),offsetY:10})});var r=new v.a({source:n,style:a});t.addLayer(r)},mapClick:function(){var t=this,e=this;this.map.on("click",function(i){var a=t.map.forEachFeatureAtPixel(i.pixel,function(t){return t});a&&(a.values_.inspection?(e.inspectionDetails.splice(e.inspectionDetails.indexOf(a.values_.deveui),1),a.setStyle(new y.c({image:new w.a({anchor:[.5,1],src:e.iconSrc,scale:1}),text:new k.a({text:a.values_.alias,font:"14px font-size",fill:new x.a({color:"blue"}),offsetY:10})})),a.values_.inspection=!1):(e.inspectionDetails.push(a.values_.deveui),1==e.intoProjectType?a.setStyle(new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/beacon_sos.png",scale:1}),text:new k.a({text:a.values_.alias,font:"12px font-size",fill:new x.a({color:"red"}),offsetY:10})})):2==e.intoProjectType&&a.setStyle(new y.c({image:new w.a({anchor:[.5,1],src:"../../../static/gateway_sos.png",scale:1}),text:new k.a({text:a.values_.alias,font:"12px font-size",fill:new x.a({color:"red"}),offsetY:10})})),a.values_.inspection=!0))})},updateTaskManagementDetailsTrue:function(){var t=this;if(this.isactive){var e={details:t.inspectionDetails.toString(),name:t.inspectionName,id:t.inspectionId};Object(_._190)(e,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code?t.$message({message:t.$t("inspection.Savedsuccessfully"),type:"success"}):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}},getAllFeatures:function(){if(this.map){var t=this.map.getLayers().getArray();this.featureArrs=[];var e=void 0;if(1==this.$store.state.intoProjectType)for(var i=1;i<t.length;i++)t[i].getSource().getFeatures()[0].values_.inspection&&(e=t[i].getSource().getFeatures()[0].values_.deveui,this.featureArrs.push(e));else if(2==this.$store.state.intoProjectType)for(var a=1;a<t.length;a++)t[a].getSource().getFeatures()[0].values_.inspection&&(e=t[a].getSource().getFeatures()[0].values_.deveui,this.featureArrs.push(e))}},inspectioncancel:function(){this.setInspectionMap=!1},closeInspection:function(){this.showInspection=!1,this.getTaskManagementLists(),this.map3d&&(this.map3d.dispose(),this.map3d=null)},showButton:function(t){var e=new Date,i=(t.enddate+" "+t.endtime).replace("-","/");return e>(i=new Date(Date.parse(i)))},openDetail:function(t){var e=this;if(this.tableData[t].details){if(this.inspectionDetailsArr=this.tableData[t].details.split(","),this.inspectionDetails=this.tableData[t].details.split(","),this.inspectionName=this.tableData[t].name,this.inspectionId=this.tableData[t].id,1==this.$store.state.intoProjectType){var i={beaconids:e.tableData[t].details};Object(_._19)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?t.data.length>0?(e.showInspectionData=t.data,e.showInspection=!0):e.$message({message:e.$t("inspection.Nodatasettings"),type:"warning"}):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else if(2==this.$store.state.intoProjectType){var a={deveuis:e.tableData[t].details};Object(_._36)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.showInspectionData=t.data,e.showInspection=!0):e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}}else e.$message({message:this.$t("inspection.Nodatasettings"),type:"warning"})},goShowInspection:function(t){this.setInspectionMap=!0,this.getBuildings(this.showInspectionData[t].buildid,this.showInspectionData[t].ground)},delShowInspection:function(t){var e=this;this.$confirm(this.$t("warning.permissiondelete1"),this.$t("change.tip"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){1==e.$store.state.intoProjectType?e.inspectionDetailsArr.splice(e.inspectionDetailsArr.indexOf(e.showInspectionData[t].beaconid),1):2==e.$store.state.intoProjectType&&e.inspectionDetailsArr.splice(e.inspectionDetailsArr.indexOf(e.showInspectionData[t].deveui),1);var i={details:e.inspectionDetailsArr.toString(),name:e.inspectionName,id:e.inspectionId};Object(_._190)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(i){1001==i.code?(e.showInspectionData.splice(t,1),e.$message({message:e.$t("beacon.deletesuccess"),type:"success"})):e.$message({message:"zh"==e.$store.state.i18n?i.msg:i.enMsg,type:"error"})})})},addInspection:function(){this.totleDate="",this.totleTime="",this.addData={name:"",projectid:this.$store.state.projectid,repetition:"",daily:"",begindate:"",enddate:"",begintime:"",endtime:"",memo:"",timezone:3600*(0-(new Date).getTimezoneOffset()/60)},this.add=!0},showDetal:function(){if(1==this.addData.repetition){var t=null,e=null;this.above_now={onPick:function(i){!i.maxDate&&i.minDate?(t=i.minDate.getTime(),e=i.minDate.getTime()):i.maxDate&&i.minDate&&(t=e=null)},disabledDate:function(i){return t&&e?i.getTime()<t||i.getTime()>e:i.getTime()<Date.now()-864e5}}}else this.above_now={disabledDate:function(t){return t.getTime()<Date.now()-864e5}};3==this.addData.repetition&&(this.addData.daily="",this.dailyList=this.dailyDays),4==this.addData.repetition&&(this.addData.daily="",this.dailyList=this.dailyWeeks)},showDetalEdit:function(){if(1==this.editData.repetition){var t=null,e=null;this.above_now={onPick:function(i){!i.maxDate&&i.minDate?(t=i.minDate.getTime(),e=i.minDate.getTime()):i.maxDate&&i.minDate&&(t=e=null)},disabledDate:function(i){return t&&e?i.getTime()<t||i.getTime()>e:i.getTime()<Date.now()-864e5}}}else this.above_now={disabledDate:function(t){return t.getTime()<Date.now()-864e5}};3==this.editData.repetition&&(this.editData.daily="",this.dailyList=this.dailyDays),4==this.editData.repetition&&(this.editData.daily="",this.dailyList=this.dailyWeeks)},openDialog:function(t){this.$refs[t].resetFields()},addCancel:function(t){this.add=!1,this.loading=!1,this.$refs[t].resetFields()},addTrue:function(t){var e=this;4!=this.addData.repetition&&3!=this.addData.repetition||this.addData.daily[0]?this.totleTime||this.totleDate?(this.addData.begintime=this.totleTime[0],this.addData.endtime=this.totleTime[1],this.addData.begindate=this.totleDate[0],this.addData.enddate=this.totleDate[1],this.addData.daily&&(this.addData.daily=this.addData.daily.sort(function(t,e){return t-e}).toString()),this.$refs[t].validate(function(i){i&&(e.loading=!0,e.addData.timezone=3600*(0-(new Date).getTimezoneOffset()/60),Object(_._124)(e.addData,e.tenantkey_A,e.tenantid_A,e.userName).then(function(i){1001==i.code&&(e.add=!1,e.searchList.page=1,e.currentPage1=1,e.getTaskManagementLists(),e.$message({message:e.$t("beacon.addsuccess"),type:"success"}),e.loading=!1,e.$refs[t].resetFields())}))})):this.$message({message:this.$t("inspection.timeperiod"),type:"warning"}):this.$message({message:this.$t("inspection.duplicatedate"),type:"warning"})},editTask:function(t){this.editData.id=this.tableData[t].id,this.editData.name=this.tableData[t].name,this.editData.repetition=this.tableData[t].repetition,this.showDetalEdit(),this.editData.daily=this.tableData[t].daily.split(",").map(Number),this.totleDate=[this.tableData[t].begindate,this.tableData[t].enddate],this.totleTime=[this.tableData[t].begintime,this.tableData[t].endtime],this.editData.memo=this.tableData[t].memo,this.edit=!0},editCancel:function(){this.edit=!1,this.$refs.editData.resetFields()},editTaskTrue:function(){var t=this,e=this;4!=this.editData.repetition&&3!=this.editData.repetition||this.editData.daily[0]?this.totleTime||this.totleDate?(this.editData.begintime=this.totleTime[0],this.editData.endtime=this.totleTime[1],this.editData.begindate=this.totleDate[0],this.editData.enddate=this.totleDate[1],4==this.editData.repetition||3==this.editData.repetition?this.editData.daily=this.editData.daily.sort(function(t,e){return t-e}).toString():this.editData.daily="",this.$refs.editData.validate(function(i){i&&Object(_._189)(t.editData,t.tenantkey_A,t.tenantid_A,t.userName).then(function(t){1001==t.code?(e.edit=!1,e.getTaskManagementLists(),e.$message({message:e.$t("buildingmanagement.editsuccess"),type:"success"}),e.loading=!1):(e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"}),e.loading=!1)})})):this.$message({message:this.$t("inspection.timeperiod"),type:"warning"}):this.$message({message:this.$t("inspection.duplicatedate"),type:"warning"})},onTask:function(t,e){var i=this,a={id:this.tableData[t].id,name:this.tableData[t].name,details:this.tableData[t].details,states:e};Object(_._191)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(i.getTaskManagementLists(),i.$message({message:i.$t("buildingmanagement.editsuccess"),type:"success"}),i.loading=!1):(i.$message({message:"zh"==i.$store.state.i18n?t.msg:t.enMsg,type:"error"}),i.loading=!1)})},searchInfo:function(){var t=this;this.searchList.page=1,this.currentPage1=1,this.tasktime&&this.tasktime.length>0?(this.searchList.begintime=Date.parse(new Date(this.tasktime[0]))/1e3,this.searchList.endtime=Date.parse(new Date(this.tasktime[1]))/1e3):(this.searchList.begintime="",this.searchList.endtime=""),Object(_._90)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size,e.data.size>0?t.$message({message:t.$t("buildingmanagement.searchsuccess"),type:"success"}):t.$message({message:t.$t("buildingmanagement.nodata"),type:"warning"}))})},searchInfoHis:function(){var t=this;this.taskData?(t.begindate=t.taskData[0],t.enddate=t.taskData[1]):(t.begindate="",t.enddate=""),t.searchListHis.page=1,Object(_._88)(this.searchListHis,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.tableDataHis=e.data.list,t.total=e.data.size,e.data.size>0?t.$message({message:t.$t("buildingmanagement.searchsuccess"),type:"success"}):t.$message({message:t.$t("buildingmanagement.nodata"),type:"warning"})):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},handleCurrentChange:function(t){this.searchList.page=t,this.searchList.count=this.pageCount,this.getTaskManagementLists()},handleSizeChange:function(t){this.pageCount=t,this.searchList.count=t,this.searchList.page=1,this.currentPage1=1,this.getTaskManagementLists()},handleCurrentChangeHis:function(t){this.searchListHis.page=t,this.searchListHis.count=this.pageCountHis,this.getTaskInfoLists()},handleSizeChangeHis:function(t){this.pageCountHis=t,this.searchListHis.count=t,this.searchListHis.page=1,this.currentPage1=1,this.getTaskInfoLists()},getTaskManagementLists:function(){var t=this;Object(_._90)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size)})},getTaskInfoLists:function(){var t=this;Object(_._88)(this.searchListHis,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableDataHis=e.data.list,t.total=e.data.size)})},clearBtn:function(){this.searchList={projectid:this.$store.state.projectid,begintime:"",endtime:"",page:1,count:20,states:""},this.currentPage1=1,this.pageCount=20,this.tasktime=[],this.getTaskManagementLists()},clearBtnHis:function(){this.searchListHis={userid:"",taskid:"",projectid:this.$store.state.projectid,taskdate:"",taskstatus:"",begintaskstatus:"",endtaskstatus:"",page:1,count:20},this.currentPage1=1,this.pageCountHis=20,this.taskData=[],this.getTaskInfoLists()},delTask:function(t){var e=this,i=this;5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?this.$message({message:this.$t("warning.permissiondelete"),type:"warning"}):this.$confirm(this.$t("beacon.deletemsg1")+this.tableData[t].name+this.$t("beacon.Pinspectiontask"),this.$t("beacon.prompt"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var a;a={name:e.tableData[t].name,id:e.tableData[t].id},Object(_._2)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(i.getTaskManagementLists(),i.$message({message:i.$t("beacon.deletesuccess"),type:"success"})):i.$message({message:"zh"==i.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}).catch(function(){})},updateTask:function(t){var e=this;if(this.getMemberNameIds(),this.updateData={id:"",userids:""},e.userid=[],3!=this.tableData[t].states)if(this.tableData[t].details){var i=[];if(this.tableData[t].userids)this.tableData[t].userids.split(",").forEach(function(t){e.memberList.forEach(function(e){return t==e.id&&i.push(e)})});else this.userid=[];i.length>0&&i.forEach(function(t){e.userid.push(t.username)}),this.updateData.name=this.tableData[t].name,this.updateData.id=this.tableData[t].id,this.update=!0}else this.$message({message:this.$t("inspection.routeassigned"),type:"warning"});else this.$message({message:this.$t("inspection.Terminationssigned"),type:"warning"})},updateTaskTrue:function(){var t=this,e=[];t.userid.forEach(function(i){t.memberList.forEach(function(t){return i==t.username&&e.push(t)})});for(var i=0;i<e.length;i++)t.updateData.userids+=e[i].id+",";t.updateData.userids=t.updateData.userids.slice(0,t.updateData.userids.length-1);var a={id:this.updateData.id,userids:this.updateData.userids};Object(_._192)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.searchList.page=1,t.getTaskManagementLists(),t.$message({message:t.$t("beacon.editsuccess"),type:"success"}),t.loading=!1,t.update=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t.loading=!1)})},showInspectionPer:function(t){var e=this,i=this;if(null!=this.tableData[t].userids){var a=this.$loading({lock:!0,text:this.$t("tet.Loading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".action")});setTimeout(function(){var n={ids:e.tableData[t].userids};Object(_._64)(n,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(i.userDetails=t.data,i.showUser=!0):i.$message({message:"zh"==i.$store.state.i18n?t.msg:t.enMsg,type:"error"}),a.close()})},500)}else this.$message({message:this.$t("beacon.assignfirst"),type:"warning"})},closeAction:function(){this.userDetails=""},handleCurrentChangeIns:function(t){this.currentRow=t},handleRowClick:function(t,e,i){this.$refs.multipleTableHis.toggleRowSelection(t)},handleSelectionChangeHis:function(t){this.multipleSelection=t,this.currentRowHis=t[0]},delTaskListHis:function(){5==this.$store.state.userInfo.prionum&&2==this.delprio||4==this.$store.state.userInfo.prionum&&2==this.delprio?this.$message({message:this.$t("warning.permissiondelete"),type:"warning"}):0!=this.multipleSelection.length?(this.deleteData=this.multipleSelection,this.delHis=!0):this.$message({message:this.$t("downlink.deletedownlink1"),type:"warning"})},deleteTrueHis:function(){for(var t=this,e={ids:[]},i=0;i<this.deleteData.length;i++)e.ids.push(this.deleteData[i].id);this.loading=!0,Object(_._1)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.delHis=!1,t.searchListHis.page=1,t.currentPage1=1,t.getTaskInfoLists(),t.$message({message:t.$t("downlink.deletesuccess"),type:"success"}),t.loading=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t.loading=!1)})},taskListHisInfo:function(){var t=this,e=this;this.multipleSelection.length>1?e.$message({message:e.$t("inspection.tasktoview"),type:"warning"}):this.currentRowHis?3==this.currentRowHis.taskstatus||4==this.currentRowHis.taskstatus?(this.inspectionDetails=[],this.inspectionInfodetails=[],this.isactive="",this.buildingList=[],this.groundListHis=[],this.buildingListHis=[],this.grounds="",this.map&&(this.map.setTarget("nnnnnn"),this.map=null),this.map3d&&(this.map3d.dispose(),this.map3d=null),this.inspectionName=this.currentRowHis.name,this.inspectionId=this.currentRowHis.id,this.currentRowHis.details&&(e.inspectionDetails=e.currentRowHis.details.split(",")),this.currentRowHis.infodetails&&(e.inspectionInfodetails=e.currentRowHis.infodetails.split(",")),Object(_._89)({taskinfoid:e.currentRowHis.id},e.tenantkey_A,e.tenantid_A,e.userName).then(function(i){1001==i.code&&(e.taskInfoTimeList=i.data);var a={projectid:e.$store.state.intoProjectid};Object(_._26)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(i){if(1001==i.code){if(e.buildingList=i.data,1==e.$store.state.intoProjectType){var a={beaconids:e.currentRowHis.details};Object(_._19)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){if(1001==t.code)if(t.data.length>0){e.taskHisInfoData=t.data;for(var i=t.data,a=0;a<i.length;a++)""!=i[a].buildid&&null!=i[a].buildid||i.splice(a,1);var n={};i=i.reduce(function(t,e){return!n[e.buildid]&&(n[e.buildid]=t.push(e)),t},[]),e.buildingListHis=i,e.getGroundsHis(e.buildingListHis[0].buildid)}else e.$message({message:e.$t("buildingmanagement.nodata"),type:"warning"});else e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else if(2==t.$store.state.intoProjectType){var n={deveuis:e.currentRowHis.details};Object(_._36)(n,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){if(1001==t.code)if(t.data.length>0){e.taskHisInfoData=t.data;var i=t.data,a={};i=i.reduce(function(t,e){return!a[e.buildid]&&(a[e.buildid]=t.push(e)),t},[]),e.buildingListHis=i,e.getGroundsHis(i[0].buildid)}else e.$message({message:e.$t("buildingmanagement.nodata"),type:"warning"});else e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}t.taskHisInfo=!0}else e.$message({message:"zh"==e.$store.state.i18n?i.msg:i.enMsg,type:"error"})})})):e.$message({message:this.$t("inspection.uncompletedpatrol"),type:"warning"}):e.$message({message:e.$t("inspection.tasktoview"),type:"warning"})},closeTaskInfoHis:function(){this.taskHisInfo=!1,this.getTaskInfoLists(),this.map3d&&(this.map3d.dispose(),this.map3d=null)},closeTaskInfoHisCancle:function(){this.taskHisInfo=!1},getMemberNameIds:function(){var t=this,e={projectid:this.$store.state.projectid,inallot:2};Object(_._68)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.memberList=e.data)})},getTaskNameIds:function(){var t=this,e={projectid:this.$store.state.projectid};Object(_._91)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.taskList=e.data)})},getDepart:function(){var t=this,e={tenantid:this.tenantid_A,projectid:this.$store.state.projectid};Object(_._34)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.departList=e.data)})},getMemberLists2:function(){var t=this,e={username:"",sex:"",cardno:"",worktype:"",tenantid:this.$store.state.userInfo.tenantid,projectid:this.$store.state.projectid,depart:"",maplabel:"",inallot:"",taskid:"",page:"",count:""};Object(_._66)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.nameList=e.data.list)})}},beforeMount:function(){this.getTaskManagementLists(),this.getMemberNameIds(),1==this.$store.state.intoProjectType?this.iconSrc="../../../static/beacon.png":2==this.$store.state.intoProjectType&&(this.iconSrc="../../../static/gateway.png")},watch:{"$i18n.locale":function(){this.i8n=this.$store.state.i18n,n()(this.$data.repetitionList,this.$options.data.call(this).repetitionList),n()(this.$data.statusList,this.$options.data.call(this).statusList),n()(this.$data.statusHisList,this.$options.data.call(this).statusHisList),n()(this.$data.pickerOptions,this.$options.data.call(this).pickerOptions),n()(this.$data.addRules,this.$options.data.call(this).addRules)}}}),D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:5!=t.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[a("div",{staticClass:"menu_header"},[5!=t.contrForPrionum?a("Menu"):t._e()],1),t._v(" "),a("div",{staticClass:"content"},[a("el-container",{class:5==t.contrForPrionum?"user":"asi"},[5!=t.contrForPrionum?a("el-aside",[a("Asset")],1):t._e(),t._v(" "),a("el-main",[a("el-tabs",{on:{"tab-click":t.changeTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.$t("inspection.Inspectiontasks"),name:"first"}},[a("div",{staticClass:"checkwork_input"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"},attrs:{model:t.searchList}},[a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("inspection.state")}},[a("el-select",{attrs:{placeholder:t.$t("inspection.title"),clearable:"",filterable:""},model:{value:t.searchList.states,callback:function(e){t.$set(t.searchList,"states",e)},expression:"searchList.states"}},t._l(t.statusList,function(t){return a("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("inspection.time")}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":t.$t("checkwork.to"),"start-placeholder":t.$t("checkwork.starttime"),"end-placeholder":t.$t("checkwork.endtime")},model:{value:t.tasktime,callback:function(e){t.tasktime=e},expression:"tasktime"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"1%"}},[a("el-button",{staticClass:"querry",attrs:{type:"primary"},on:{click:function(e){return t.searchInfo()}}},[t._v(t._s(t.$t("inspection.search")))]),t._v(" "),a("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.clearBtn()}}},[t._v(t._s(t.$t("inspection.reset")))]),t._v(" "),a("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.addInspection()}}},[t._v(t._s(t.$t("inspection.addtask")))]),a("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("\n                        "+t._s(t.$t("inspection.tttt2"))),a("br"),t._v("\n                        "+t._s(t.$t("inspection.tttt3"))),a("br"),t._v("\n                        "+t._s(t.$t("inspection.tttt4"))),a("br"),t._v("\n                        "+t._s(t.$t("inspection.tttt5"))+"\n                      ")])]),t._v(" "),a("i",{staticClass:"el-icon-question"})])],1)],1)],1),t._v(" "),a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"98%","text-align":"center","margin-left":"2%","z-index":"1"},attrs:{data:t.tableData,border:"","highlight-current-row":""},on:{"current-change":t.handleCurrentChangeIns}},[a("el-table-column",{attrs:{property:"name",label:t.$t("inspection.Inspectiontasks1"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"details",label:t.$t("inspection.route"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"zh"==t.i8n?"repetitionstr":"enrepetition",label:t.$t("inspection.Isitredundant"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"daily",label:t.$t("inspection.repeatdate"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"begindate",label:t.$t("inspection.startdate"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"enddate",label:t.$t("inspection.enddate"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"begintime",label:t.$t("inspection.Startingtime"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"endtime",label:t.$t("inspection.EndTime"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"zh"==t.i8n?"statestr":"enstates",label:t.$t("inspection.State"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"ctime",label:t.$t("inspection.creationtime"),"show-overflow-tooltip":"",formatter:t.formatDatectime,align:"center",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:t.$t("inspection.Remark1"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("inspection.assignstaff"),"min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.userids&&null!=e.row.userids?a("el-button",{staticStyle:{width:"60%"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.showInspectionPer(e.$index)}}},[t._v(t._s(t.$t("inspection.Check")))]):t._e(),t._v(" "),""==e.row.userids||null==e.row.userids?a("p",[t._v("\n                      "+t._s(t.$t("inspection.Unassigned"))+"\n                    ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:t.$t("inspection.Operate"),"min-width":"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{attrs:{size:"mini",type:"primary",trigger:"click"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("staff.operate"),placement:"top"}},[a("el-button",{staticClass:"icon_button",attrs:{type:"primary"}},[a("img",{attrs:{src:i("VJ6t")}})])],1),t._v(" "),a("el-dropdown-menu",{staticClass:"selects",staticStyle:{"background-color":"rgb(219, 222, 231)"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[a("el-button",{staticClass:"edits",attrs:{size:"mini"},on:{click:function(i){return t.editTask(e.$index,t.tableData)}}},[t._v(t._s(t.$t("inspection.edit")))])],1),t._v(" "),a("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[a("el-button",{staticClass:"edits",attrs:{size:"mini"},on:{click:function(i){return t.updateTask(e.$index,t.tableData)}}},[t._v(t._s(t.$t("inspection.distribution")))])],1),t._v(" "),a("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[a("el-button",{staticClass:"dels",attrs:{size:"mini"},on:{click:function(i){return t.delTask(e.$index,t.tableData)}}},[t._v(t._s(t.$t("inspection.delete")))])],1)],1)],1),t._v(" "),a("el-dropdown",{attrs:{size:"mini",type:"primary",trigger:"click"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("inspection.route"),placement:"top"}},[a("el-button",{staticClass:"icon_button",attrs:{type:"primary"}},[a("img",{attrs:{src:i("/uG6")}})])],1),t._v(" "),a("el-dropdown-menu",{staticClass:"selects",staticStyle:{"background-color":"rgb(219, 222, 231)"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[a("el-button",{staticClass:"edits",attrs:{size:"mini"},on:{click:function(i){return t.setInspection(e.$index,t.tableData)}}},[t._v(t._s(t.$t("inspection.setroute")))])],1),t._v(" "),a("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[a("el-button",{staticClass:"edits",attrs:{size:"mini"},on:{click:function(i){return t.openDetail(e.$index)}}},[t._v(t._s(t.$t("inspection.route1")))])],1),t._v(" "),a("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[a("el-button",{staticClass:"edits",attrs:{size:"mini"},on:{click:function(i){return t.removeInspection(e.$index)}}},[t._v(t._s(t.$t("inspection.RemoveRoute")))])],1)],1)],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("inspection.start"),placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.row.states,expression:"scope.row.states == 2"}],staticClass:"icon_button",attrs:{type:"danger",disabled:t.showButton(e.row)},on:{click:function(i){return t.onTask(e.$index,1)}}},[a("img",{attrs:{src:i("bIWv")}})])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("inspection.stop"),placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:2!==e.row.states,expression:"scope.row.states !== 2"}],staticClass:"icon_button",attrs:{type:"danger",size:"mini",disabled:t.showButton(e.row)},on:{click:function(i){return t.onTask(e.$index,2)}}},[a("img",{attrs:{src:i("I65w")}})])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[a("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":t.pageCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:t.$t("inspection.Inspectionhistory"),name:"second"}},[a("div",{staticClass:"taskHis"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"},attrs:{model:t.searchListHis}},[a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0",width:"12%"},attrs:{label:t.$t("inspection.Name")}},[a("el-select",{attrs:{filterable:"",placeholder:t.$t("inspection.text")},model:{value:t.searchListHis.userid,callback:function(e){t.$set(t.searchListHis,"userid",e)},expression:"searchListHis.userid"}},t._l(t.nameList,function(t){return a("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0",width:"12%"},attrs:{label:t.$t("inspection.Taskname")}},[a("el-select",{attrs:{filterable:"",placeholder:t.$t("inspection.text")},model:{value:t.searchListHis.taskid,callback:function(e){t.$set(t.searchListHis,"taskid",e)},expression:"searchListHis.taskid"}},t._l(t.taskList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0",width:"14%"},attrs:{label:t.$t("inspection.Taskstatus")}},[a("el-select",{attrs:{placeholder:t.$t("inspection.text1"),clearable:"",filterable:""},model:{value:t.searchListHis.taskstatus,callback:function(e){t.$set(t.searchListHis,"taskstatus",e)},expression:"searchListHis.taskstatus"}},t._l(t.statusHisList,function(t){return a("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("inspection.time")}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:t.$t("inspection.Selectdate")},model:{value:t.searchListHis.taskdate,callback:function(e){t.$set(t.searchListHis,"taskdate",e)},expression:"searchListHis.taskdate"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"z-index":"1","margin-left":"1%"}},[a("el-button",{staticClass:"querry",attrs:{type:"primary"},on:{click:function(e){return t.searchInfoHis()}}},[t._v(t._s(t.$t("inspection.search")))]),t._v(" "),a("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.clearBtnHis()}}},[t._v(t._s(t.$t("inspection.reset")))]),t._v(" "),a("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.delTaskListHis()}}},[t._v(t._s(t.$t("inspection.batchdeletion")))]),t._v(" "),a("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.taskListHisInfo()}}},[t._v(t._s(t.$t("inspection.Inspectiondetails")))])],1)],1)],1),t._v(" "),a("div",{staticClass:"checkHistory"},[a("el-table",{ref:"multipleTableHis",staticStyle:{width:"97%","text-align":"center","margin-left":"2%","z-index":"1"},attrs:{data:t.tableDataHis,border:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChangeHis,"row-click":t.handleRowClick}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{property:"username",label:t.$t("inspection.name"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:t.$t("inspection.taskname"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"details",label:t.$t("inspection.MissionDetails"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"infodetails",label:t.$t("inspection.Inspectionrecord"),"show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[t._v(t._s(t.$t("inspection.Inspectionrecord")))]),t._v(" "),a("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("\n                          "+t._s(t.$t("inspection.tttt"))+"\n                        ")])]),t._v(" "),a("i",{staticClass:"el-icon-question"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"taskdate",label:t.$t("inspection.Inspectiondate"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"begintime",label:t.$t("inspection.Startingtime"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"endtime",label:t.$t("inspection.EndTime"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"missnum",label:t.$t("inspection.number"),"show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"cell",staticStyle:{"padding-right":"0"}},[t._v(t._s(t.$t("inspection.number")))]),t._v(" "),a("el-tooltip",{staticClass:"item",staticStyle:{"font-size":"130%"},attrs:{effect:"light",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("\n                          "+t._s(t.$t("inspection.tttt1"))+"\n                        ")])]),t._v(" "),a("i",{staticClass:"el-icon-question"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"missdetails",label:t.$t("inspection.detail"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"zh"==t.i8n?"taskstatustr":"entaskstatus",label:t.$t("inspection.taskstatus"),"show-overflow-tooltip":"",align:"center","class-name":"taskstatustr"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{class:t.tableCellClassName(e.row)}),t._v(" "),a("span",[t._v("\n                      "+t._s("zh"==t.i8n?e.row.taskstatustr:e.row.entaskstatus)+"\n                    ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:t.$t("inspection.Remark1"),"show-overflow-tooltip":"",align:"center"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[a("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":t.pageCountHis},on:{"size-change":t.handleSizeChangeHis,"current-change":t.handleCurrentChangeHis,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:t.$t("inspection.text2"),visible:t.delHis},on:{"update:visible":function(e){t.delHis=e}}},[a("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{data:t.deleteData,"max-height":"660",stripe:""}},[a("el-table-column",{attrs:{property:"username",label:t.$t("inspection.name"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:t.$t("inspection.taskname"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"details",label:t.$t("inspection.MissionDetails"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"infodetails",label:t.$t("inspection.Inspectionrecord"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"taskdate",label:t.$t("inspection.Inspectiondate"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"begintime",label:t.$t("inspection.Startingtime"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"endtime",label:t.$t("inspection.EndTime"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"missnum",label:t.$t("inspection.number"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"zh"==t.i8n?"taskstatustr":"entaskstatus",label:t.$t("inspection.taskstatus"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:t.$t("inspection.Remark1"),"show-overflow-tooltip":"",align:"center"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delHis=!1,t.loading=!1}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.deleteTrueHis()}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),a("el-dialog",{staticClass:"setInspection",attrs:{visible:t.taskHisInfo,fullscreen:!0,width:"100%","close-on-press-escape":!1},on:{"update:visible":function(e){t.taskHisInfo=e},close:t.closeTaskInfoHis}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap","margin-left":"0"}},[a("el-button",{staticStyle:{width:"90px",height:"30px","text-align":"left"},attrs:{type:"primary",round:"",size:"mini",icon:"el-icon-arrow-left"},on:{click:function(e){return t.closeTaskInfoHisCancle()}}},[t._v(t._s(t.$t("login.return")))]),t._v(" "),a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("inspection.Building")}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("terminal.choose")},on:{change:function(e){return t.getGroundsHis(t.isactive)}},model:{value:t.isactive,callback:function(e){t.isactive=e},expression:"isactive"}},t._l(t.buildingListHis,function(t){return a("el-option",{key:t.buildid,attrs:{label:t.building,value:t.buildid}})}),1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.mapTypes,expression:"mapTypes"}],staticClass:"mapConent"},[a("div",{ref:"map",staticClass:"allmap",attrs:{id:"allmapHis"}}),t._v(" "),a("div",{staticClass:"selectGround"},[a("div",{staticClass:"fm-control-groups",staticStyle:{width:"42px","background-color":"white","box-shadow":"rgba(0, 0, 0, 0.3) 2px 2px 3px","border-radius":"2px"}},[a("div",{staticClass:"fm-layer-list",staticStyle:{overflow:"hidden"}},t._l(t.groundListHis,function(e,i){return a("div",{key:e,class:t.isactiveGround==e?"addclass":"",on:{click:function(i){return t.getBuildGroundLists(e)}}},[a("label",{staticStyle:{display:"inline-block","text-align":"center",width:"42px",height:"42px","line-height":"42px",margin:"0px",cursor:"pointer","font-size":"0.8em","font-weight":"bold",color:"rgb(102, 102, 102)"},attrs:{"data-gid":"2",id:"gid_24.99322021/3/1/11:04:43"}},[e>0?a("span",[t._v("F"+t._s(e))]):t._e(),t._v(" "),e<0?a("span",[t._v("B"+t._s(-e))]):t._e()]),t._v(" "),a("hr",{directives:[{name:"show",rawName:"v-show",value:t.grounds.length>1&&i!==t.grounds.length-1,expression:"\n                        grounds.length > 1 && index !== grounds.length - 1\n                      "}],staticStyle:{height:"1px","border-top":"1px solid rgba(153, 153, 153, 0.45)","border-right":"none","border-bottom":"none","border-left":"none","border-image":"initial",width:"60%",margin:"0px 20%"}})])}),0)])]),t._v(" "),a("div",{staticClass:"groundControl"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",disabled:t.lastBuilding},on:{click:t.lastBuildings}},[t._v(t._s(t.$t("inspection.previousbuilding")))]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",disabled:t.lastGroup},on:{click:t.lastGroups}},[t._v(t._s(t.$t("inspection.previouslayer")))]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.nextGroup},on:{click:t.nextGroups}},[t._v(t._s(t.$t("inspection.Nextlevel"))),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.nextBuilding},on:{click:t.nextBuildings}},[t._v(t._s(t.$t("inspection.nextbuilding"))),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mapTypes,expression:"!mapTypes"}],staticClass:"mapConentD"},[a("div",{attrs:{id:"fengMapHis"}},[a("div",{staticClass:"groundControl3D"},[a("el-button-group",[a("el-button",{staticStyle:{"z-index":"1"},attrs:{type:"primary",icon:"el-icon-arrow-left",disabled:t.lastBuilding},on:{click:t.lastBuildings}},[t._v(t._s(t.$t("inspection.previousbuilding")))]),t._v(" "),a("el-button",{staticStyle:{"z-index":"1"},attrs:{type:"primary",icon:"el-icon-arrow-left",disabled:t.lastGroup3D},on:{click:t.lastGroups3D}},[t._v(t._s(t.$t("inspection.previouslayer")))]),t._v(" "),a("el-button",{staticStyle:{"z-index":"1"},attrs:{type:"primary",disabled:t.nextGroup3D},on:{click:t.nextGroups3D}},[t._v(t._s(t.$t("inspection.Nextlevel"))),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})]),t._v(" "),a("el-button",{staticStyle:{"z-index":"1"},attrs:{type:"primary",disabled:t.nextBuilding},on:{click:t.nextBuildings}},[t._v(t._s(t.$t("inspection.nextbuilding"))),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)])])],1),t._v(" "),a("el-dialog",{staticClass:"setInspection",attrs:{visible:t.setInspectionMap,fullscreen:!0,width:"100%","close-on-press-escape":!1},on:{"update:visible":function(e){t.setInspectionMap=e},close:t.closeInspection}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap","margin-left":"0"}},[a("el-button",{staticStyle:{width:"90px",height:"30px","text-align":"left"},attrs:{type:"primary",round:"",size:"mini",icon:"el-icon-arrow-left"},on:{click:function(e){return t.inspectioncancel()}}},[t._v(t._s(t.$t("login.return")))]),t._v(" "),a("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("inspection.Building")}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("terminal.choose")},on:{change:function(e){return t.getGrounds(t.isactive)}},model:{value:t.isactive,callback:function(e){t.isactive=e},expression:"isactive"}},t._l(t.buildingList,function(t){return a("el-option",{key:t.id,attrs:{label:t.building,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"0"}},[a("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.updateTaskManagementDetailsTrue()}}},[t._v(t._s(t.$t("inspection.preservation")))])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.mapTypes,expression:"mapTypes"}],staticClass:"mapConent"},[a("div",{ref:"map",staticClass:"allmap",attrs:{id:"allmap"}}),t._v(" "),a("div",{staticClass:"selectGround"},[a("div",{staticClass:"fm-control-groups",staticStyle:{width:"42px","background-color":"white","box-shadow":"rgba(0, 0, 0, 0.3) 2px 2px 3px","border-radius":"2px"}},[a("div",{staticClass:"fm-layer-list",staticStyle:{overflow:"hidden"}},t._l(t.grounds,function(e,i){return a("div",{key:e,class:t.isactiveGround==e?"addclass":"",on:{click:function(i){return t.getBuildGroundLists(e)}}},[a("label",{staticStyle:{display:"inline-block","text-align":"center",width:"42px",height:"42px","line-height":"42px",margin:"0px",cursor:"pointer","font-size":"0.8em","font-weight":"bold",color:"rgb(102, 102, 102)"},attrs:{"data-gid":"2",id:"gid_24.99322021/3/1/11:04:43"}},[e>0?a("span",[t._v("F"+t._s(e))]):t._e(),t._v(" "),e<0?a("span",[t._v("B"+t._s(-e))]):t._e()]),t._v(" "),a("hr",{directives:[{name:"show",rawName:"v-show",value:t.grounds.length>1&&i!==t.grounds.length-1,expression:"\n                        grounds.length > 1 && index !== grounds.length - 1\n                      "}],staticStyle:{height:"1px","border-top":"1px solid rgba(153, 153, 153, 0.45)","border-right":"none","border-bottom":"none","border-left":"none","border-image":"initial",width:"60%",margin:"0px 20%"}})])}),0)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mapTypes,expression:"!mapTypes"}],staticClass:"mapConentD"},[a("div",{attrs:{id:"fengMap"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mapTypes,expression:"!mapTypes"}],staticClass:"mapConentD"})])],1),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("inspection.text3"),visible:t.showInspection,width:"40%"},on:{"update:visible":function(e){t.showInspection=e},close:t.closeInspection}},[a("div",{staticStyle:{"padding-bottom":"3%"}},[a("el-table",{attrs:{data:t.showInspectionData,border:"","max-height":"660"}},[1==t.intoProjectType?a("el-table-column",{attrs:{property:"beaconid",label:t.$t("inspection.DeviceNo"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}):t._e(),t._v(" "),2==t.intoProjectType?a("el-table-column",{attrs:{property:"deveui",label:t.$t("inspection.DeviceNo"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{property:"alias",label:t.$t("inspection.alias"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"building",label:t.$t("inspection.building"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"ground",label:t.$t("inspection.floor"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:t.$t("inspection.Operate"),width:"170",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"edits",attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.goShowInspection(e.$index,t.showInspectionData)}}},[t._v(t._s(t.$t("inspection.Check")))]),t._v(" "),a("el-button",{staticClass:"dels",attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.delShowInspection(e.$index,t.showInspectionData)}}},[t._v(t._s(t.$t("inspection.delete")))])]}}])})],1)],1)]),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("inspection.text4"),width:"40%",visible:t.add},on:{"update:visible":function(e){t.add=e},close:function(e){return t.addCancel("addData")},opened:function(e){return t.openDialog("addData")}}},[a("el-form",{ref:"addData",staticClass:"addInspection",staticStyle:{"text-align":"left","margin-top":"2%"},attrs:{model:t.addData,"label-width":"100px",rules:t.addRules}},[a("el-form-item",{attrs:{label:t.$t("inspection.Task"),prop:"name"}},[a("el-input",{model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.Repeat"),prop:"repetition"}},[a("el-select",{attrs:{clearable:"",placeholder:t.$t("inspection.text")},on:{change:function(e){return t.showDetal()}},model:{value:t.addData.repetition,callback:function(e){t.$set(t.addData,"repetition",e)},expression:"addData.repetition"}},t._l(t.repetitionList,function(t){return a("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:3==t.addData.repetition||4==t.addData.repetition,expression:"addData.repetition == 3 || addData.repetition == 4"}],attrs:{multiple:"",clearable:"",placeholder:t.$t("inspection.text")},model:{value:t.addData.daily,callback:function(e){t.$set(t.addData,"daily",e)},expression:"addData.daily"}},t._l(t.dailyList,function(t){return a("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.Date")}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":t.$t("inspection.to"),"start-placeholder":t.$t("inspection.startdate"),"end-placeholder":t.$t("inspection.enddate"),"picker-options":t.above_now},model:{value:t.totleDate,callback:function(e){t.totleDate=e},expression:"totleDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.time")}},[a("el-time-picker",{attrs:{"is-range":"","picker-options":{selectableRange:"00:00 - 24:00"},format:"HH:mm","value-format":"HH:mm","range-separator":t.$t("inspection.to"),"start-placeholder":t.$t("inspection.Startingtime"),"end-placeholder":t.$t("inspection.EndTime"),placeholder:t.$t("tet.tet14")},model:{value:t.totleTime,callback:function(e){t.totleTime=e},expression:"totleTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.Remark")}},[a("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:"64",rows:"4"},model:{value:t.addData.memo,callback:function(e){t.$set(t.addData,"memo",e)},expression:"addData.memo"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.addCancel("addData")}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.addTrue("addData")}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("inspection.text5"),width:"40%",visible:t.edit},on:{"update:visible":function(e){t.edit=e},close:function(e){return t.editCancel("editData")}}},[a("el-form",{ref:"editData",staticClass:"addInspection",staticStyle:{"text-align":"left","margin-top":"2%"},attrs:{model:t.editData,"label-width":"100px",rules:t.editRules}},[a("el-form-item",{attrs:{label:t.$t("inspection.Task"),prop:"name"}},[a("el-input",{model:{value:t.editData.name,callback:function(e){t.$set(t.editData,"name",e)},expression:"editData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.Repeat"),prop:"repetition"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:t.$t("inspection.text")},on:{change:function(e){return t.showDetalEdit()}},model:{value:t.editData.repetition,callback:function(e){t.$set(t.editData,"repetition",e)},expression:"editData.repetition"}},t._l(t.repetitionList,function(t){return a("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:3==t.editData.repetition||4==t.editData.repetition,expression:"editData.repetition == 3 || editData.repetition == 4"}],attrs:{multiple:"",clearable:"",placeholder:t.$t("inspection.text")},model:{value:t.editData.daily,callback:function(e){t.$set(t.editData,"daily",e)},expression:"editData.daily"}},t._l(t.dailyList,function(t){return a("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.Date")}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","range-separator":t.$t("inspection.to"),"start-placeholder":t.$t("inspection.startdate"),"end-placeholder":t.$t("inspection.enddate"),"picker-options":t.above_now},model:{value:t.totleDate,callback:function(e){t.totleDate=e},expression:"totleDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.time")}},[a("el-time-picker",{attrs:{"is-range":"","arrow-control":"","picker-options":{selectableRange:"00:00 - 24:00"},format:"HH:mm","value-format":"HH:mm","range-separator":t.$t("inspection.to"),"start-placeholder":t.$t("inspection.Startingtime"),"end-placeholder":t.$t("inspection.EndTime"),placeholder:t.$t("tet.tet14")},model:{value:t.totleTime,callback:function(e){t.totleTime=e},expression:"totleTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.Remark")}},[a("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:"64",rows:"4"},model:{value:t.editData.memo,callback:function(e){t.$set(t.editData,"memo",e)},expression:"editData.memo"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.editCancel("addData")}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.editTaskTrue("addData")}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("inspection.text6"),width:"30%",visible:t.update},on:{"update:visible":function(e){t.update=e}}},[a("el-form",{ref:"editData",staticClass:"addInspection",staticStyle:{"text-align":"left","margin-top":"2%"},attrs:{"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"70%","margin-left":"0"},attrs:{label:t.$t("inspection.taskname1"),prop:"name"}},[a("el-input",{attrs:{disabled:""},model:{value:t.updateData.name,callback:function(e){t.$set(t.updateData,"name",e)},expression:"updateData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("inspection.staff"),prop:"repetition"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"",placeholder:t.$t("terminal.choose")},model:{value:t.userid,callback:function(e){t.userid=e},expression:"userid"}},t._l(t.memberList,function(t){return a("el-option",{key:t.id,attrs:{label:t.username,value:t.username}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.update=!1}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.updateTaskTrue("addData")}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("inspection.Personneldetails"),width:"40%",visible:t.showUser},on:{"update:visible":function(e){t.showUser=e},close:t.closeAction}},[a("div",{staticStyle:{"padding-bottom":"3%"}},[a("el-table",{attrs:{data:t.userDetails,border:"","max-height":"600"}},[a("el-table-column",{attrs:{property:"username",label:t.$t("inspection.name"),align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{property:"depart",label:t.$t("inspection.Department"),align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{property:"worktype",label:t.$t("inspection.Typeofwork"),align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{property:"maplabel",label:t.$t("inspection.Workcardnumber"),align:"center","show-overflow-tooltip":"","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{property:"cardno",label:t.$t("inspection.Jobnumber"),align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{property:"tel",label:t.$t("inspection.telephone"),align:"center","show-overflow-tooltip":""}})],1)],1)])],1)],1)],1)])},staticRenderFns:[]};var A=i("VU/8")($,D,!1,function(t){i("JG/u")},"data-v-4e2f5e2a",null);e.default=A.exports}});
webpackJsonp([53],{USnC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("PO8r"),s=n("c2Ch"),a={components:{Menu:i.a},name:"Message",data:function(){return{i8n:this.$store.state.i18n,contrForPrioNum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,multipleSelection:[],searchList:{username:this.$store.state.userInfo.username,status:"",page:1,count:20},currentPage1:1,pageCount:20,total:0,tableData:[]}},mounted:function(){this.getMsg()},methods:{handelClickCell:function(t){t&&1==t.status&&(this.upMsg(t.id),this.$EventBus.$emit("pushData",t.id))},upMsg:function(t){var e=this,n=[];n.push(t);var i={ids:n};Object(s._177)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(n){for(var i=0;i<e.tableData.length;i++)e.tableData[i].id==t&&(e.tableData[i].status=2)})},handleCurrentChange:function(t){this.searchList.page=t,this.searchList.count=this.pageCount,this.getMsg()},handleSizeChange:function(t){this.pageCount=t,this.searchList.count=t,this.searchList.page=1,this.currentPage1=1,this.getMsg()},getDevLists:function(){},handleSelectionChange:function(t){this.multipleSelection=t},deleteMsg:function(){for(var t=this,e=this,n=[],i=0;i<this.multipleSelection.length;i++)n.push(this.multipleSelection[i].id);var a={ids:n};this.$confirm(this.$t("warning.permissiondelete1"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){Object(s.T)(a,t.tenantkey_A,t.tenantid_A,t.userName).then(function(t){1001==t.code&&(e.$message({message:e.$t("buildingmanagement.deletesuccess"),type:"success"}),e.getMsg())})})},deleteRow:function(t){var e=this,n=this,i=[];i.push(this.tableData[t].id);var a={ids:i};this.$confirm(this.$t("warning.permissiondelete1"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){Object(s.T)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code&&(n.$message({message:n.$t("buildingmanagement.deletesuccess"),type:"success"}),n.getMsg())})})},getMsg:function(){var t=this;Object(s._71)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size)})},datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var n=new Date(t);return n.getFullYear()+"-"+e(n.getMonth()+1)+"-"+e(n.getDate())+" "+(n.getHours()<10?"0"+n.getHours():n.getHours())+":"+e(n.getMinutes())+":"+e(n.getSeconds())},formatDateRegtime:function(t,e){if(null==t.time||0==t.time)return"";var n=new Date(1e3*parseInt(t.time)).toUTCString();return this.datetimecut(n)}},watch:{"$i18n.locale":function(){this.i8n=this.$store.state.i18n}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:5!=t.contrForPrioNum?"home":"",staticStyle:{height:"100%"}},[5!=t.$store.state.userInfo.prionum?n("div",{staticClass:"menu_header"},[n("Menu")],1):t._e(),t._v(" "),n("div",{staticClass:"msgcontent",class:5!=t.contrForPrioNum?"admin":""},[n("div",{staticClass:"anniu"},[n("h1",{staticStyle:{"font-size":"20px",padding:"10px"}},[t._v("\n        "+t._s(t.$t("tet.NotificationCenter"))+"\n      ")]),t._v(" "),n("el-button",{staticClass:"anniu1",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.deleteMsg()}}},[t._v(t._s(t.$t("tet.Batchdelete")))])],1),t._v(" "),n("el-table",{ref:"multipleTable",staticClass:"xc",staticStyle:{width:"70%"},attrs:{data:t.tableData,"cell-style":{background:"rgb(243, 241, 241)"},"empty-text":t.$t("tet.Nomessage")},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"zh"==t.i8n?"notice":"ennotice","min-width":"90","show-overflow-tooltip":"",type:"text"}}),t._v(" "),n("el-table-column",{attrs:{prop:"zh"==t.i8n?"msg":"enmsg","min-width":"700",type:"text"}}),t._v(" "),n("el-table-column",{attrs:{prop:"time","min-width":"140",formatter:t.formatDateRegtime,"show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?n("span",{staticStyle:{color:"red",cursor:"pointer"},on:{click:function(n){return t.handelClickCell(e.row)}}},[t._v(t._s(t.$t("tet.Markasread")))]):n("span",{staticStyle:{color:"green",cursor:"pointer"}},[t._v(t._s(t.$t("tet.Read")))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.deleteRow(e.$index)}}},[t._v(t._s(t.$t("tet.delete")))])]}}])})],1),t._v(" "),n("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[n("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":t.pageCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1)])},staticRenderFns:[]};var o=n("VU/8")(a,r,!1,function(t){n("dy/6")},"data-v-03bfb9ce",null);e.default=o.exports},"dy/6":function(t,e){}});
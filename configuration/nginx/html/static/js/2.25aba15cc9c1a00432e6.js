webpackJsonp([2],{"+HRN":function(t,e,i){"use strict";var r=i("kkc6").Buffer,n=i(4);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);for(var e,i,n,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,i=o,n=a,e.copy(i,n),a+=s.data.length,s=s.next;return o},t}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},"+IQu":function(t,e,i){"use strict";t.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},"+T9J":function(t,e,i){"use strict";var r=i("3lo0");function n(t,e){if(Array.isArray(e)){for(var i=0;i<e.length;i++)o(e[i])(t);return t}if(e)return o(e)(t),t;for(e in r)o(e)(t);return t}function o(t){var e=r[t];if(!e)throw new Error("Unknown keyword "+t);return e}t.exports=n,n.get=o},"+W7P":function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i++)e(t[i],i,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,i){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:i})}}catch(t){return function(t,e,i){t[e]=i}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var i=e.contentWindow,r=i.eval,n=i.execScript;!r&&n&&(n.call(i,"null"),r=i.eval),forEach(Object_keys(t),function(e){i[e]=t[e]}),forEach(globals,function(e){t[e]&&(i[e]=t[e])});var o=Object_keys(i),s=r.call(i,this.code);return forEach(Object_keys(i),function(e){(e in t||-1===indexOf(o,e))&&(t[e]=i[e])}),forEach(globals,function(e){e in t||defineProp(t,e,i[e])}),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),i=this.runInContext(e);return t&&forEach(Object_keys(e),function(i){t[i]=e[i]}),i},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var i=Script(e);return i[t].apply(i,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(i){e[i]=t[i]}),e}},"+e0g":function(t,e,i){"use strict";var r=i("3PYz"),n=i("hQ80"),o=i("TkWM"),s=o.assert,a=o.parseBytes,u=i("RzOE"),h=i("hkfz");function l(t){if(s("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof l))return new l(t);t=n[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}t.exports=l,l.prototype.sign=function(t,e){t=a(t);var i=this.keyFromSecret(e),r=this.hashInt(i.messagePrefix(),t),n=this.g.mul(r),o=this.encodePoint(n),s=this.hashInt(o,i.pubBytes(),t).mul(i.priv()),u=r.add(s).umod(this.curve.n);return this.makeSignature({R:n,S:u,Rencoded:o})},l.prototype.verify=function(t,e,i){if(t=a(t),(e=this.makeSignature(e)).S().gte(e.eddsa.curve.n)||e.S().isNeg())return!1;var r=this.keyFromPublic(i),n=this.hashInt(e.Rencoded(),r.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(r.pub().mul(n)).eq(o)},l.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},l.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},l.prototype.makeSignature=function(t){return t instanceof h?t:new h(this,t)},l.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},l.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),r=0!=(128&t[e]),n=o.intFromLE(i);return this.curve.pointFromY(n,r)},l.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(t){return o.intFromLE(t)},l.prototype.isPoint=function(t){return t instanceof this.pointClass}},"+hAD":function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f="errs__"+n,A=t.util.copy(t);A.level++;var p="valid"+A.level,d="i"+n,m=A.dataLevel=t.dataLevel+1,y="data"+m,g=t.baseId,v=t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all);if(r+="var "+f+" = errors;var "+c+";",v){var b=t.compositeRule;t.compositeRule=A.compositeRule=!0,A.schema=s,A.schemaPath=a,A.errSchemaPath=u,r+=" var "+p+" = false; for (var "+d+" = 0; "+d+" < "+l+".length; "+d+"++) { ",A.errorPath=t.util.getPathExpr(t.errorPath,d,t.opts.jsonPointers,!0);var w=l+"["+d+"]";A.dataPathArr[m]=d;var x=t.validate(A);A.baseId=g,t.util.varOccurences(x,y)<2?r+=" "+t.util.varReplace(x,y,w)+" ":r+=" var "+y+" = "+w+"; "+x+" ",r+=" if ("+p+") break; }  ",t.compositeRule=A.compositeRule=b,r+="  if (!"+p+") {"}else r+=" if ("+l+".length == 0) {";var M=M||[];M.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should contain a valid item' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var _=r;return r=M.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",v&&(r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),t.opts.allErrors&&(r+=" } "),r}},"+jDU":function(t,e,i){var r=i("/y0r"),n=i("X3l8").Buffer,o=i("BCiZ"),s=i("6hW9"),a=i("z+8S"),u=i("BEbT"),h=i("Cgw8");function l(t,e,i){a.call(this),this._cache=new c,this._last=void 0,this._cipher=new u.AES(e),this._prev=n.from(i),this._mode=t,this._autopadding=!0}function c(){this.cache=n.allocUnsafe(0)}function f(t,e,i){var a=o[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=n.from(i)),"GCM"!==a.mode&&i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);if("string"==typeof e&&(e=n.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new s(a.module,e,i,!0):"auth"===a.type?new r(a.module,e,i,!0):new l(a.module,e,i)}i("LC74")(l,a),l.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,e),r.push(i);return n.concat(r)},l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var i=-1;for(;++i<e;)if(t[i+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},c.prototype.add=function(t){this.cache=n.concat([this.cache,t])},c.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},c.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var i=o[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var r=h(e,!1,i.key,i.iv);return f(t,r.key,r.iv)},e.createDecipheriv=f},"/MLu":function(t,e,i){t.exports=i("cSWu").PassThrough},"/Nss":function(t,e,i){"use strict";var r=i("7ar3"),n=i("oKL6"),o=n([r("%String.prototype.indexOf%")]);t.exports=function(t,e){var i=r(t,!!e);return"function"==typeof i&&o(t,".prototype.")>-1?n([i]):i}},"/Ose":function(t,e,i){"use strict";var r=i("x4q6");function n(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,r=-271733879,n=-1732584194,o=271733878,c=0;c<t.length;c+=16){var f=i,A=r,p=n,d=o;r=h(r=h(r=h(r=h(r=u(r=u(r=u(r=u(r=a(r=a(r=a(r=a(r=s(r=s(r=s(r=s(r,n=s(n,o=s(o,i=s(i,r,n,o,t[c+0],7,-680876936),r,n,t[c+1],12,-389564586),i,r,t[c+2],17,606105819),o,i,t[c+3],22,-1044525330),n=s(n,o=s(o,i=s(i,r,n,o,t[c+4],7,-176418897),r,n,t[c+5],12,1200080426),i,r,t[c+6],17,-1473231341),o,i,t[c+7],22,-45705983),n=s(n,o=s(o,i=s(i,r,n,o,t[c+8],7,1770035416),r,n,t[c+9],12,-1958414417),i,r,t[c+10],17,-42063),o,i,t[c+11],22,-1990404162),n=s(n,o=s(o,i=s(i,r,n,o,t[c+12],7,1804603682),r,n,t[c+13],12,-40341101),i,r,t[c+14],17,-1502002290),o,i,t[c+15],22,1236535329),n=a(n,o=a(o,i=a(i,r,n,o,t[c+1],5,-165796510),r,n,t[c+6],9,-1069501632),i,r,t[c+11],14,643717713),o,i,t[c+0],20,-373897302),n=a(n,o=a(o,i=a(i,r,n,o,t[c+5],5,-701558691),r,n,t[c+10],9,38016083),i,r,t[c+15],14,-660478335),o,i,t[c+4],20,-405537848),n=a(n,o=a(o,i=a(i,r,n,o,t[c+9],5,568446438),r,n,t[c+14],9,-1019803690),i,r,t[c+3],14,-187363961),o,i,t[c+8],20,1163531501),n=a(n,o=a(o,i=a(i,r,n,o,t[c+13],5,-1444681467),r,n,t[c+2],9,-51403784),i,r,t[c+7],14,1735328473),o,i,t[c+12],20,-1926607734),n=u(n,o=u(o,i=u(i,r,n,o,t[c+5],4,-378558),r,n,t[c+8],11,-2022574463),i,r,t[c+11],16,1839030562),o,i,t[c+14],23,-35309556),n=u(n,o=u(o,i=u(i,r,n,o,t[c+1],4,-1530992060),r,n,t[c+4],11,1272893353),i,r,t[c+7],16,-155497632),o,i,t[c+10],23,-1094730640),n=u(n,o=u(o,i=u(i,r,n,o,t[c+13],4,681279174),r,n,t[c+0],11,-358537222),i,r,t[c+3],16,-722521979),o,i,t[c+6],23,76029189),n=u(n,o=u(o,i=u(i,r,n,o,t[c+9],4,-640364487),r,n,t[c+12],11,-421815835),i,r,t[c+15],16,530742520),o,i,t[c+2],23,-995338651),n=h(n,o=h(o,i=h(i,r,n,o,t[c+0],6,-198630844),r,n,t[c+7],10,1126891415),i,r,t[c+14],15,-1416354905),o,i,t[c+5],21,-57434055),n=h(n,o=h(o,i=h(i,r,n,o,t[c+12],6,1700485571),r,n,t[c+3],10,-1894986606),i,r,t[c+10],15,-1051523),o,i,t[c+1],21,-2054922799),n=h(n,o=h(o,i=h(i,r,n,o,t[c+8],6,1873313359),r,n,t[c+15],10,-30611744),i,r,t[c+6],15,-1560198380),o,i,t[c+13],21,1309151649),n=h(n,o=h(o,i=h(i,r,n,o,t[c+4],6,-145523070),r,n,t[c+11],10,-1120210379),i,r,t[c+2],15,718787259),o,i,t[c+9],21,-343485551),i=l(i,f),r=l(r,A),n=l(n,p),o=l(o,d)}return[i,r,n,o]}function o(t,e,i,r,n,o){return l((s=l(l(e,t),l(r,o)))<<(a=n)|s>>>32-a,i);var s,a}function s(t,e,i,r,n,s,a){return o(e&i|~e&r,t,e,n,s,a)}function a(t,e,i,r,n,s,a){return o(e&r|i&~r,t,e,n,s,a)}function u(t,e,i,r,n,s,a){return o(e^i^r,t,e,n,s,a)}function h(t,e,i,r,n,s,a){return o(i^(e|~r),t,e,n,s,a)}function l(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}t.exports=function(t){return r(t,n)}},"/TgO":function(t,e,i){"use strict";t.exports=Math.max},"/Unp":function(t,e,i){"use strict";t.exports=function(t){return t.currentRequest?t.currentRequest:t.loaders.slice(t.loaderIndex).map(t=>t.request).concat([t.resource]).join("!")}},"/Wqo":function(t,e,i){var r;r=function(){return e=[function(t,e,i){"use strict";i.r(e);for(var r=[],n=0;n<256;n++)r[n]=(n<16?"0":"")+n.toString(16);var o={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(r[255&t]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+"-"+r[255&e]+r[e>>8&255]+"-"+r[e>>16&15|64]+r[e>>24&255]+"-"+r[63&i|128]+r[i>>8&255]+"-"+r[i>>16&255]+r[i>>24&255]+r[255&n]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*o.DEG2RAD},radToDeg:function(t){return t*o.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var o=Math.cos,s=Math.sin,a=o(i/2),u=(i=s(i/2),o((e+r)/2)),h=s((e+r)/2),l=o((e-r)/2),c=s((e-r)/2);o=o((r-e)/2),s=s((r-e)/2);"XYX"===n?t.set(a*h,i*l,i*c,a*u):"YZY"===n?t.set(i*c,a*h,i*l,a*u):"ZXZ"===n?t.set(i*l,i*c,a*h,a*u):"XZX"===n?t.set(a*h,i*s,i*o,a*u):"YXY"===n?t.set(i*o,a*h,i*s,a*u):"ZYZ"===n&&t.set(i*s,i*o,a*h,a*u)}};function s(t,e,i,r){this.u=t||0,this.v=e||0,this.M=i||0,this.A=void 0!==r?r:1}Object.assign(s,{slerp:function(t,e,i,r){return i.copy(t).slerp(e,r)},slerpFlat:function(t,e,i,r,n,o,s){var a,u,h,l=i[r+0],c=i[r+1],f=i[r+2],A=(i=i[r+3],r=n[o+0],n[o+1]),p=n[o+2];i===(n=n[o+3])&&l===r&&c===A&&f===p||(o=1-s,a=0<=(u=l*r+c*A+f*p+i*n)?1:-1,(h=1-u*u)>Number.EPSILON&&(h=Math.sqrt(h),u=Math.atan2(h,u*a),o=Math.sin(o*u)/h,s=Math.sin(s*u)/h),l=l*o+r*(u=s*a),c=c*o+A*u,f=f*o+p*u,i=i*o+n*u,o===1-s&&(l*=h=1/Math.sqrt(l*l+c*c+f*f+i*i),c*=h,f*=h,i*=h)),t[e]=l,t[e+1]=c,t[e+2]=f,t[e+3]=i}}),Object.defineProperties(s.prototype,{x:{get:function(){return this.u},set:function(t){this.u=t,this.S()}},y:{get:function(){return this.v},set:function(t){this.v=t,this.S()}},z:{get:function(){return this.M},set:function(t){this.M=t,this.S()}},w:{get:function(){return this.A},set:function(t){this.A=t,this.S()}}}),Object.assign(s.prototype,{isQuaternion:!0,set:function(t,e,i,r){return this.u=t,this.v=e,this.M=i,this.A=r,this.S(),this},clone:function(){return new this.constructor(this.u,this.v,this.M,this.A)},copy:function(t){return this.u=t.x,this.v=t.y,this.M=t.z,this.A=t.w,this.S(),this},setFromEuler:function(t,e){var i,r,n,o,s,a,u;if(t&&t.isEuler)return s=t.u,a=t.v,i=t.M,t=t.order,o=Math.cos,u=Math.sin,r=o(s/2),n=o(a/2),o=o(i/2),s=u(s/2),a=u(a/2),u=u(i/2),"XYZ"===t?(this.u=s*n*o+r*a*u,this.v=r*a*o-s*n*u,this.M=r*n*u+s*a*o,this.A=r*n*o-s*a*u):"YXZ"===t?(this.u=s*n*o+r*a*u,this.v=r*a*o-s*n*u,this.M=r*n*u-s*a*o,this.A=r*n*o+s*a*u):"ZXY"===t?(this.u=s*n*o-r*a*u,this.v=r*a*o+s*n*u,this.M=r*n*u+s*a*o,this.A=r*n*o-s*a*u):"ZYX"===t?(this.u=s*n*o-r*a*u,this.v=r*a*o+s*n*u,this.M=r*n*u-s*a*o,this.A=r*n*o+s*a*u):"YZX"===t?(this.u=s*n*o+r*a*u,this.v=r*a*o+s*n*u,this.M=r*n*u-s*a*o,this.A=r*n*o-s*a*u):"XZY"===t&&(this.u=s*n*o-r*a*u,this.v=r*a*o-s*n*u,this.M=r*n*u+s*a*o,this.A=r*n*o+s*a*u),!1!==e&&this.S(),this;throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this.u=t.x*i,this.v=t.y*i,this.M=t.z*i,this.A=Math.cos(e),this.S(),this},setFromRotationMatrix:function(t){var e,i=(t=t.elements)[0],r=t[4],n=t[8],o=t[1],s=t[5],a=t[9],u=t[2],h=t[6],l=i+s+(t=t[10]);return 0<l?(e=.5/Math.sqrt(l+1),this.A=.25/e,this.u=(h-a)*e,this.v=(n-u)*e,this.M=(o-r)*e):s<i&&t<i?(e=2*Math.sqrt(1+i-s-t),this.A=(h-a)/e,this.u=.25*e,this.v=(r+o)/e,this.M=(n+u)/e):t<s?(e=2*Math.sqrt(1+s-i-t),this.A=(n-u)/e,this.u=(r+o)/e,this.v=.25*e,this.M=(a+h)/e):(e=2*Math.sqrt(1+t-i-s),this.A=(o-r)/e,this.u=(n+u)/e,this.v=(a+h)/e,this.M=.25*e),this.S(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.u=-t.y,this.v=t.x,this.M=0):(this.u=0,this.v=-t.z,this.M=t.y)):(this.u=t.y*e.z-t.z*e.y,this.v=t.z*e.x-t.x*e.z,this.M=t.x*e.y-t.y*e.x),this.A=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(o.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0!==i&&(e=Math.min(1,e/i),this.slerp(t,e)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this.u*=-1,this.v*=-1,this.M*=-1,this.S(),this},dot:function(t){return this.u*t.u+this.v*t.v+this.M*t.M+this.A*t.A},lengthSq:function(){return this.u*this.u+this.v*this.v+this.M*this.M+this.A*this.A},length:function(){return Math.sqrt(this.u*this.u+this.v*this.v+this.M*this.M+this.A*this.A)},normalize:function(){var t=this.length();return 0===t?(this.u=0,this.v=0,this.M=0,this.A=1):(this.u=this.u*(t=1/t),this.v=this.v*t,this.M=this.M*t,this.A=this.A*t),this.S(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t.u,r=t.v,n=t.M,o=(t=t.A,e.u),s=e.v,a=e.M;e=e.A;return this.u=i*e+t*o+r*a-n*s,this.v=r*e+t*s+n*o-i*a,this.M=n*e+t*a+i*s-r*o,this.A=t*e-i*o-r*s-n*a,this.S(),this},slerp:function(t,e){if(0!==e){if(1===e)return this.copy(t);var i,r=this.u,n=this.v,o=this.M,s=this.A,a=s*t.A+r*t.u+n*t.v+o*t.M;a<0?(this.A=-t.A,this.u=-t.u,this.v=-t.v,this.M=-t.M,a=-a):this.copy(t),1<=a?(this.A=s,this.u=r,this.v=n,this.M=o):((t=1-a*a)<=Number.EPSILON?(this.A=(i=1-e)*s+e*this.A,this.u=i*r+e*this.u,this.v=i*n+e*this.v,this.M=i*o+e*this.M,this.normalize()):(i=Math.sqrt(t),t=Math.atan2(i,a),a=Math.sin((1-e)*t)/i,e=Math.sin(e*t)/i,this.A=s*a+this.A*e,this.u=r*a+this.u*e,this.v=n*a+this.v*e,this.M=o*a+this.M*e),this.S())}return this},equals:function(t){return t.u===this.u&&t.v===this.v&&t.M===this.M&&t.A===this.A},fromArray:function(t,e){return this.u=t[e=void 0===e?0:e],this.v=t[e+1],this.M=t[e+2],this.A=t[e+3],this.S(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.u,t[e+1]=this.v,t[e+2]=this.M,t[e+3]=this.A,t},fromBufferAttribute:function(t,e){return this.u=t.getX(e),this.v=t.getY(e),this.M=t.getZ(e),this.A=t.getW(e),this},R:function(t){return this.S=t,this},S:function(){}});var a=new h,u=new s;function h(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}Object.assign(h.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler,this.applyQuaternion(u.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(u.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=1/((t=t.elements)[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,o=t.y,s=t.z,a=(t=t.w)*e+o*r-s*i,u=t*i+s*e-n*r,h=t*r+n*i-o*e;e=-n*e-o*i-s*r;return this.x=a*t+e*-n+u*-s-h*-o,this.y=u*t+e*-o+h*-n-a*-s,this.z=h*t+e*-s+a*-o-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,r=t.y,n=(t=t.z,e.x),o=e.y;e=e.z;return this.x=r*e-t*o,this.y=t*n-i*e,this.z=i*o-r*n,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return a.copy(this).projectOnVector(t),this.sub(a)},reflect:function(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(o.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var l=new h,c=new y,f=new h(0,0,0),A=new h(1,1,1),p=new h,d=new h,m=new h;function y(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length}function g(){this.type="Curve",this.arcLengthDivisions=200}function v(t,e){this.x=t||0,this.y=e||0}function b(t,e,i,r,n,o,s,a){g.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=r||1,this.aStartAngle=n||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}Object.assign(y.prototype,{isMatrix4:!0,set:function(t,e,i,r,n,o,s,a,u,h,l,c,f,A,p,d){var m=this.elements;return m[0]=t,m[4]=e,m[8]=i,m[12]=r,m[1]=n,m[5]=o,m[9]=s,m[13]=a,m[2]=u,m[6]=h,m[10]=l,m[14]=c,m[3]=f,m[7]=A,m[11]=p,m[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new y).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,i=t.elements,r=1/l.setFromMatrixColumn(t,0).length(),n=1/l.setFromMatrixColumn(t,1).length();t=1/l.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler;var e,i,r,n,o,s,a,u,h,l,c,f,A=this.elements,p=t.x,d=t.y,m=t.z,y=Math.cos(p),g=(p=Math.sin(p),Math.cos(d)),v=(d=Math.sin(d),Math.cos(m));m=Math.sin(m);return"XYZ"===t.order?(o=y*v,s=y*m,a=p*v,u=p*m,A[0]=g*v,A[4]=-g*m,A[8]=d,A[1]=s+a*d,A[5]=o-u*d,A[9]=-p*g,A[2]=u-o*d,A[6]=a+s*d,A[10]=y*g):"YXZ"===t.order?(i=g*m,r=d*v,A[0]=(e=g*v)+(n=d*m)*p,A[4]=r*p-i,A[8]=y*d,A[1]=y*m,A[5]=y*v,A[9]=-p,A[2]=i*p-r,A[6]=n+e*p,A[10]=y*g):"ZXY"===t.order?(i=g*m,r=d*v,A[0]=(e=g*v)-(n=d*m)*p,A[4]=-y*m,A[8]=r+i*p,A[1]=i+r*p,A[5]=y*v,A[9]=n-e*p,A[2]=-y*d,A[6]=p,A[10]=y*g):"ZYX"===t.order?(o=y*v,s=y*m,a=p*v,u=p*m,A[0]=g*v,A[4]=a*d-s,A[8]=o*d+u,A[1]=g*m,A[5]=u*d+o,A[9]=s*d-a,A[2]=-d,A[6]=p*g,A[10]=y*g):"YZX"===t.order?(h=y*g,l=y*d,c=p*g,f=p*d,A[0]=g*v,A[4]=f-h*m,A[8]=c*m+l,A[1]=m,A[5]=y*v,A[9]=-p*v,A[2]=-d*v,A[6]=l*m+c,A[10]=h-f*m):"XZY"===t.order&&(h=y*g,l=y*d,c=p*g,f=p*d,A[0]=g*v,A[4]=-m,A[8]=d*v,A[1]=h*m+f,A[5]=y*v,A[9]=l*m-c,A[2]=c*m-l,A[6]=p*v,A[10]=f*m+h),A[3]=0,A[7]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(f,t,A)},lookAt:function(t,e,i){var r=this.elements;return m.subVectors(t,e),0===m.lengthSq()&&(m.z=1),m.normalize(),p.crossVectors(i,m),0===p.lengthSq()&&(1===Math.abs(i.z)?m.x+=1e-4:m.z+=1e-4,m.normalize(),p.crossVectors(i,m)),p.normalize(),d.crossVectors(m,p),r[0]=p.x,r[4]=d.x,r[8]=m.x,r[1]=p.y,r[5]=d.y,r[9]=m.y,r[2]=p.z,r[6]=d.z,r[10]=m.z,this},multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){t=t.elements,e=e.elements;var i=this.elements,r=t[0],n=t[4],o=t[8],s=t[12],a=t[1],u=t[5],h=t[9],l=t[13],c=t[2],f=t[6],A=t[10],p=t[14],d=t[3],m=t[7],y=t[11],g=(t=t[15],e[0]),v=e[4],b=e[8],w=e[12],x=e[1],M=e[5],_=e[9],S=e[13],B=e[2],E=e[6],C=e[10],T=e[14],F=e[3],P=e[7],O=e[11];e=e[15];return i[0]=r*g+n*x+o*B+s*F,i[4]=r*v+n*M+o*E+s*P,i[8]=r*b+n*_+o*C+s*O,i[12]=r*w+n*S+o*T+s*e,i[1]=a*g+u*x+h*B+l*F,i[5]=a*v+u*M+h*E+l*P,i[9]=a*b+u*_+h*C+l*O,i[13]=a*w+u*S+h*T+l*e,i[2]=c*g+f*x+A*B+p*F,i[6]=c*v+f*M+A*E+p*P,i[10]=c*b+f*_+A*C+p*O,i[14]=c*w+f*S+A*T+p*e,i[3]=d*g+m*x+y*B+t*F,i[7]=d*v+m*M+y*E+t*P,i[11]=d*b+m*_+y*C+t*O,i[15]=d*w+m*S+y*T+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],o=t[1],s=t[5],a=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+n*a*l-r*u*l-n*s*c+i*u*c+r*s*f-i*a*f)+t[7]*(+e*a*f-e*u*c+n*o*c-r*o*f+r*u*h-n*a*h)+t[11]*(+e*u*l-e*s*f-n*o*l+i*o*f+n*s*h-i*u*h)+t[15]*(-r*s*h-e*a*l+e*s*c+r*o*l-i*o*c+i*a*h)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this},getInverse:function(t,e){e=this.elements;var i=(t=t.elements)[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],h=t[7],l=t[8],c=t[9],f=t[10],A=t[11],p=t[12],d=t[13],m=t[14],y=c*m*h-d*f*h+d*u*A-a*m*A-c*u*(t=t[15])+a*f*t,g=p*f*h-l*m*h-p*u*A+s*m*A+l*u*t-s*f*t,v=l*d*h-p*c*h+p*a*A-s*d*A-l*a*t+s*c*t,b=p*c*u-l*d*u-p*a*f+s*d*f+l*a*m-s*c*m,w=i*y+r*g+n*v+o*b;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(e[0]=y*(y=1/w),e[1]=(d*f*o-c*m*o-d*n*A+r*m*A+c*n*t-r*f*t)*y,e[2]=(a*m*o-d*u*o+d*n*h-r*m*h-a*n*t+r*u*t)*y,e[3]=(c*u*o-a*f*o-c*n*h+r*f*h+a*n*A-r*u*A)*y,e[4]=g*y,e[5]=(l*m*o-p*f*o+p*n*A-i*m*A-l*n*t+i*f*t)*y,e[6]=(p*u*o-s*m*o-p*n*h+i*m*h+s*n*t-i*u*t)*y,e[7]=(s*f*o-l*u*o+l*n*h-i*f*h-s*n*A+i*u*A)*y,e[8]=v*y,e[9]=(p*c*o-l*d*o-p*r*A+i*d*A+l*r*t-i*c*t)*y,e[10]=(s*d*o-p*a*o+p*r*h-i*d*h-s*r*t+i*a*t)*y,e[11]=(l*a*o-s*c*o-l*r*h+i*c*h+s*r*A-i*a*A)*y,e[12]=b*y,e[13]=(l*d*n-p*c*n+p*r*f-i*d*f-l*r*m+i*c*m)*y,e[14]=(p*a*n-s*d*n-p*r*u+i*d*u+s*r*m-i*a*m)*y,e[15]=(s*c*n-l*a*n+l*r*u-i*c*u-s*r*f+i*a*f)*y,this)},invert:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8],l=t[9],c=t[10],f=t[11],A=t[12],p=t[13],d=t[14],m=t[15],y=l*d*u-p*c*u+p*a*f-s*d*f-l*a*m+s*c*m,g=A*c*u-h*d*u-A*a*f+o*d*f+h*a*m-o*c*m,v=h*p*u-A*l*u+A*s*f-o*p*f-h*s*m+o*l*m,b=A*l*a-h*p*a-A*s*c+o*p*c+h*s*d-o*l*d,w=e*y+i*g+r*v+n*b;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(t[0]=y*(y=1/w),t[1]=(p*c*n-l*d*n-p*r*f+i*d*f+l*r*m-i*c*m)*y,t[2]=(s*d*n-p*a*n+p*r*u-i*d*u-s*r*m+i*a*m)*y,t[3]=(l*a*n-s*c*n-l*r*u+i*c*u+s*r*f-i*a*f)*y,t[4]=g*y,t[5]=(h*d*n-A*c*n+A*r*f-e*d*f-h*r*m+e*c*m)*y,t[6]=(A*a*n-o*d*n-A*r*u+e*d*u+o*r*m-e*a*m)*y,t[7]=(o*c*n-h*a*n+h*r*u-e*c*u-o*r*f+e*a*f)*y,t[8]=v*y,t[9]=(A*l*n-h*p*n-A*i*f+e*p*f+h*i*m-e*l*m)*y,t[10]=(o*p*n-A*s*n+A*i*u-e*p*u-o*i*m+e*s*m)*y,t[11]=(h*s*n-o*l*n-h*i*u+e*l*u+o*i*f-e*s*f)*y,t[12]=b*y,t[13]=(h*p*r-A*l*r+A*i*c-e*p*c-h*i*d+e*l*d)*y,t[14]=(A*s*r-o*p*r-A*i*a+e*p*a+o*i*d-e*s*d)*y,t[15]=(o*l*r-h*s*r+h*i*a-e*l*a-o*i*c+e*s*c)*y,this)},scale:function(t){var e=this.elements,i=t.x,r=t.y;t=t.z;return e[0]*=i,e[4]*=r,e[8]*=t,e[1]*=i,e[5]*=r,e[9]*=t,e[2]*=i,e[6]*=r,e[10]*=t,e[3]*=i,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=(i=this.elements)[0]*i[0]+i[1]*i[1]+i[2]*i[2],e=i[4]*i[4]+i[5]*i[5]+i[6]*i[6],i=i[8]*i[8]+i[9]*i[9]+i[10]*i[10];return Math.sqrt(Math.max(t,e,i))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=(e=Math.sin(e),1-i),n=t.x,o=t.y,s=(t=t.z,r*n),a=r*o;return this.set(s*n+i,s*o-e*t,s*t+e*o,0,s*o+e*t,a*o+i,a*t-e*n,0,s*t-e*o,a*t+e*n,r*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var r=this.elements,n=e.u,o=e.v,s=e.M,a=(e=e.A,n*(l=n+n)),u=n*(c=o+o),h=(n=n*(f=s+s),o*c),l=(o=o*f,s=s*f,e*l),c=e*c,f=(e=e*f,i.x),A=i.y;i=i.z;return r[0]=(1-(h+s))*f,r[1]=(u+e)*f,r[2]=(n-c)*f,r[3]=0,r[4]=(u-e)*A,r[5]=(1-(a+s))*A,r[6]=(o+l)*A,r[7]=0,r[8]=(n+c)*i,r[9]=(o-l)*i,r[10]=(1-(a+h))*i,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,i){var r=this.elements,n=l.set(r[0],r[1],r[2]).length(),o=l.set(r[4],r[5],r[6]).length(),s=l.set(r[8],r[9],r[10]).length(),a=(t=(this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],c.copy(this),1/n),r=1/o,1/s);return c.elements[0]*=t,c.elements[1]*=t,c.elements[2]*=t,c.elements[4]*=r,c.elements[5]*=r,c.elements[6]*=r,c.elements[8]*=a,c.elements[9]*=a,c.elements[10]*=a,e.setFromRotationMatrix(c),i.x=n,i.y=o,i.z=s,this},makePerspective:function(t,e,i,r,n,o){var s=this.elements,a=2*n/(i-r),u=(e+t)/(e-t);i=(i+r)/(i-r),r=-(o+n)/(o-n),o=-2*o*n/(o-n);return s[0]=2*n/(e-t),s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=a,s[9]=i,s[13]=0,s[2]=0,s[6]=0,s[10]=r,s[14]=o,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,i,r,n,o){var s=this.elements,a=1/(e-t),u=1/(i-r),h=1/(o-n);e=(e+t)*a,t=(i+r)*u,i=(o+n)*h;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-e,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-t,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-i,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.assign(g.prototype,{getPoint:function(){return null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,r=[],n=this.getPoint(0),o=0;for(r.push(0),i=1;i<=t;i++)o+=(e=this.getPoint(i/t)).distanceTo(n),r.push(o),n=e;return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){for(var i,r=this.getLengths(),n=0,o=r.length,s=e||t*r[o-1],a=0,u=o-1;a<=u;)if((i=r[n=Math.floor(a+(u-a)/2)]-s)<0)a=n+1;else{if(!(0<i)){u=n;break}u=n-1}return r[n=u]===s?n/(o-1):(n+(s-(e=r[n]))/(r[n+1]-e))/(o-1)},getTangent:function(t){var e=t-1e-4;1<(t=t+1e-4)&&(t=1),e=this.getPoint(e=e<0?0:e);return this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){for(var i,r=new h,n=[],s=[],a=[],u=new h,l=new y,c=0;c<=t;c++)n[c]=this.getTangentAt(c/t),n[c].normalize();s[0]=new h,a[0]=new h;var f=Number.MAX_VALUE,A=Math.abs(n[0].x),p=Math.abs(n[0].y),d=Math.abs(n[0].z);for(A<=f&&(f=A,r.set(1,0,0)),p<=f&&(f=p,r.set(0,1,0)),d<=f&&r.set(0,0,1),u.crossVectors(n[0],r).normalize(),s[0].crossVectors(n[0],u),a[0].crossVectors(n[0],s[0]),c=1;c<=t;c++)s[c]=s[c-1].clone(),a[c]=a[c-1].clone(),u.crossVectors(n[c-1],n[c]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(o.clamp(n[c-1].dot(n[c]),-1,1)),s[c].applyMatrix4(l.makeRotationAxis(u,i))),a[c].crossVectors(n[c],s[c]);if(!0===e)for(i=Math.acos(o.clamp(s[0].dot(s[t]),-1,1)),i/=t,0<n[0].dot(u.crossVectors(s[0],s[t]))&&(i=-i),c=1;c<=t;c++)s[c].applyMatrix4(l.makeRotationAxis(n[c],i*c)),a[c].crossVectors(n[c],s[c]);return{tangents:n,normals:s,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Object.defineProperties(v.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(v.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),r=(e=Math.sin(e),this.x-t.x),n=this.y-t.y;return this.x=r*i-n*e+t.x,this.y=r*e+n*i+t.y,this}}),((b.prototype=Object.create(g.prototype)).constructor=b).prototype.isEllipseCurve=!0,b.prototype.getPoint=function(t,e){e=e||new v;for(var i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,n=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;i<r;)r-=i;r<Number.EPSILON&&(r=n?0:i),!0!==this.aClockwise||n||(r===i?r=-i:r-=i);var o,s,a,u;n=this.aStartAngle+t*r,t=this.aX+this.xRadius*Math.cos(n),n=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(o=Math.cos(this.aRotation),s=Math.sin(this.aRotation),t=(a=t-this.aX)*o-(u=n-this.aY)*s+this.aX,n=a*s+u*o+this.aY),e.set(t,n)},b.prototype.copy=function(t){return g.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};var w={FULL:0,DOTTED:2,DOT_DASH:4,CENTER:8,DASH:16,DOUBLE_DOT_DASH:32,TRI_DOT_DASH:64,FMARROW:128,ARROW:256},x=new h,M=new h,_=new h,S=new h,B=new h,E=new h,C=new h;function T(t,e){this.origin=void 0!==t?t:new h,this.direction=void 0!==e?e:new h(0,0,-1)}function F(){this.mask=1}function P(t,e,i,r){this.ray=new T(t,e),this.near=i||0,this.far=r||1/0,this.camera=null,this.layers=new F,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function O(t,e){return t.distance-e.distance}function D(t,e,i,r){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===r)for(var n=t.children,o=0,s=n.length;o<s;o++)D(n[o],e,i,!0)}Object.assign(T.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(e=new h),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,x)),this},closestPointToPoint:function(t,e){return void 0===e&&(e=new h),e.subVectors(t,this.origin),(t=e.dot(this.direction))<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=x.subVectors(t,this.origin).dot(this.direction);return(e<0?this.origin:(x.copy(this.direction).multiplyScalar(e).add(this.origin),x)).distanceToSquared(t)},distanceSqToSegment:function(t,e,i,r){M.copy(t).add(e).multiplyScalar(.5),_.copy(e).sub(t).normalize(),S.copy(this.origin).sub(M);t=.5*t.distanceTo(e),e=-this.direction.dot(_);var n,o,s,a=S.dot(this.direction),u=-S.dot(_),h=S.lengthSq(),l=Math.abs(1-e*e);return l=0<l?(o=e*a-u,s=t*l,0<=(n=e*u-a)?-s<=o?o<=s?(n*=l=1/l)*(n+e*(o*=l)+2*a)+o*(e*n+o+2*u)+h:(o=t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h):(o=-t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h):o<=-s?-(n=Math.max(0,-(-e*t+a)))*n+(o=0<n?-t:Math.min(Math.max(-t,-u),t))*(o+2*u)+h:o<=s?(n=0,(o=Math.min(Math.max(-t,-u),t))*(o+2*u)+h):-(n=Math.max(0,-(e*t+a)))*n+(o=0<n?t:Math.min(Math.max(-t,-u),t))*(o+2*u)+h):(o=0<e?-t:t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h),i&&i.copy(this.direction).multiplyScalar(n).add(this.origin),r&&r.copy(_).multiplyScalar(o).add(M),l},intersectSphere:function(t,e){x.subVectors(t.center,this.origin);var i=x.dot(this.direction),r=x.dot(x)-i*i;return(t=t.radius*t.radius)<r||(r=i+(t=Math.sqrt(t-r)),(i-=t)<0&&r<0)?null:i<0?this.at(r,e):this.at(i,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,r,n,o=1/this.direction.x,s=1/this.direction.y,a=1/this.direction.z,u=this.origin;o=0<=o?(i=(t.min.x-u.x)*o,(t.max.x-u.x)*o):(i=(t.max.x-u.x)*o,(t.min.x-u.x)*o);return(s=0<=s?(n=(t.min.y-u.y)*s,(t.max.y-u.y)*s):(n=(t.max.y-u.y)*s,(t.min.y-u.y)*s))<i||o<n||((i<n||i!=i)&&(i=n),(s<o||o!=o)&&(o=s),(n=0<=a?(r=(t.min.z-u.z)*a,(t.max.z-u.z)*a):(r=(t.max.z-u.z)*a,(t.min.z-u.z)*a))<i)||o<r||((i<r||i!=i)&&(i=r),(o=n<o||o!=o?n:o)<0)?null:this.at(0<=i?i:o,e)},intersectsBox:function(t){return null!==this.intersectBox(t,x)},intersectTriangle:function(t,e,i,r,n){var o;if(B.subVectors(e,t),E.subVectors(i,t),C.crossVectors(B,E),0<(e=this.direction.dot(C))){if(r)return null;o=1}else{if(!(e<0))return null;o=-1,e=-e}return S.subVectors(this.origin,t),(i=o*this.direction.dot(E.crossVectors(S,E)))<0||(r=o*this.direction.dot(B.cross(S)))<0||e<i+r||(t=-o*S.dot(C))<0?null:this.at(t/e,n)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(F.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}}),Object.assign(P.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)},intersectObject:function(t,e,i){return D(t,this,i=i||[],e),i.sort(O),i},intersectObjects:function(t,e,i){var r=i||[];if(!1===Array.isArray(t));else{for(var n=0,o=t.length;n<o;n++)D(t[n],this,r,e);r.sort(O)}return r}});var R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},I={h:0,s:0,l:0},U={h:0,s:0,l:0};function L(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function k(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function j(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Q(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}Object.assign(L.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){return t=o.euclideanModulo(t,1),e=o.clamp(e,0,1),i=o.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(this.r=k(e=2*i-(i=i<=.5?i*(1+e):i+e-i*e),i,t+1/3),this.g=k(e,i,t),this.b=k(e,i,t-1/3)),this},setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}if(u=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r,n,o,s=u[1],a=u[2];switch(s){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return r=parseFloat(i[1])/360,n=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,e(i[5]),this.setHSL(r,n,o)}}else if(u=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=(s=u[1]).length;if(3===u)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var e=R[t];return void 0!==e&&this.setHex(e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return e=0<(e=void 0===e?2:e)?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=j(t.r),this.g=j(t.g),this.b=j(t.b),this},copyLinearToSRGB:function(t){return this.r=Q(t.r),this.g=Q(t.g),this.b=Q(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,i=this.r,r=this.g,n=this.b,o=Math.max(i,r,n),s=Math.min(i,r,n),a=(s+o)/2;if(s===o)h=e=0;else{var u=o-s,h=a<=.5?u/(o+s):u/(2-o-s);switch(o){case i:e=(r-n)/u+(r<n?6:0);break;case r:e=(n-i)/u+2;break;case n:e=(i-r)/u+4}e/=6}return t.h=e,t.s=h,t.l=a,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(I),I.h+=t,I.s+=e,I.l+=i,this.setHSL(I.h,I.s,I.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(I),t.getHSL(U);t=o.lerp(I.h,U.h,e);var i=o.lerp(I.s,U.s,e);e=o.lerp(I.l,U.l,e);return this.setHSL(t,i,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}}),L.NAMES=R;var N=[new h,new h,new h,new h,new h,new h,new h,new h],z=new h,H=new tt,V=new h,G=new h,K=new h,Y=new h,X=new h,W=new h,q=new h,Z=new h,J=new h,$=new h;function tt(t,e){this.min=void 0!==t?t:new h(1/0,1/0,1/0),this.max=void 0!==e?e:new h(-1/0,-1/0,-1/0)}function et(t,e,i,r,n){for(var o=0,s=t.length-3;o<=s;o+=3){$.fromArray(t,o);var a=n.x*Math.abs($.x)+n.y*Math.abs($.y)+n.z*Math.abs($.z),u=e.dot($),h=i.dot($),l=r.dot($);if(Math.max(-Math.max(u,h,l),Math.min(u,h,l))>a)return!1}return!0}function it(){}function rt(t,e,i,r){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==r?r:1}Object.assign(tt.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,s=-1/0,a=0,u=t.length;a<u;a+=3){var h=t[a],l=t[a+1],c=t[a+2];h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),o<l&&(o=l),s<c&&(s=c)}return this.min.set(e,i,r),this.max.set(n,o,s),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,s=-1/0,a=0,u=t.count;a<u;a++){var h=t.getX(a),l=t.getY(a),c=t.getZ(a);h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),o<l&&(o=l),s<c&&(s=c)}return this.min.set(e,i,r),this.max.set(n,o,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=z.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(t=new h),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new h),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);for(var e=t.geometry,i=(void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),H.copy(e.boundingBox),H.applyMatrix4(t.matrixWorld),this.union(H)),t.children),r=0,n=i.length;r<n;r++)this.expandByObject(i[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(e=new h),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,z),z.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,i=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x);return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(q),Z.subVectors(this.max,q),V.subVectors(t.a,q),G.subVectors(t.b,q),K.subVectors(t.c,q),Y.subVectors(G,V),X.subVectors(K,G),W.subVectors(V,K),!!et([0,-Y.z,Y.y,0,-X.z,X.y,0,-W.z,W.y,Y.z,0,-Y.x,X.z,0,-X.x,W.z,0,-W.x,-Y.y,Y.x,0,-X.y,X.x,0,-W.y,W.x,0],V,G,K,Z))&&!!et([1,0,0,0,1,0,0,0,1],V,G,K,Z)&&(J.crossVectors(Y,X),et([J.x,J.y,J.z],V,G,K,Z))},clampPoint:function(t,e){return void 0===e&&(e=new h),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return z.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(z).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(N[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),N[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),N[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),N[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),N[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),N[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),N[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),N[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(N)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(it.prototype,{addEventListener:function(t,e){void 0===this.j&&(this.j={});var i=this.j;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){var i;return void 0!==this.j&&void 0!==(i=this.j)[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){var i;void 0!==this.j&&void 0!==(t=this.j[t])&&-1!==(i=t.indexOf(e))&&t.splice(i,1)},dispatchEvent:function(t){if(void 0!==this.j){var e=this.j[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t)}}}}),Object.defineProperties(rt.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(rt.prototype,{isVector4:!0,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r+t[12]*n,this.y=t[1]*e+t[5]*i+t[9]*r+t[13]*n,this.z=t[2]*e+t[6]*i+t[10]*r+t[14]*n,this.w=t[3]*e+t[7]*i+t[11]*r+t[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r,n,o,s,a,u,h,l,c=(t=t.elements)[0],f=t[4],A=t[8],p=t[1],d=t[5],m=t[9],y=t[2],g=t[6];t=t[10];return Math.abs(f-p)<.01&&Math.abs(A-y)<.01&&Math.abs(m-g)<.01?Math.abs(f+p)<.1&&Math.abs(A+y)<.1&&Math.abs(m+g)<.1&&Math.abs(c+d+t-3)<.1?this.set(1,0,0,0):(n=Math.PI,s=(t+1)/2,a=(f+p)/4,u=(A+y)/4,h=(m+g)/4,(o=(d+1)/2)<(l=(c+1)/2)&&s<l?r=l<.01?(e=0,i=.707106781):(i=a/(e=Math.sqrt(l)),u/e):s<o?r=o<.01?(i=0,e=.707106781):(e=a/(i=Math.sqrt(o)),h/i):s<.01?(i=e=.707106781,r=0):(e=u/(r=Math.sqrt(s)),i=h/r),this.set(e,i,r,n)):(l=Math.sqrt((g-m)*(g-m)+(A-y)*(A-y)+(p-f)*(p-f)),Math.abs(l)<.001&&(l=1),this.x=(g-m)/l,this.y=(A-y)/l,this.z=(p-f)/l,this.w=Math.acos((c+d+t-1)/2)),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}});var nt=new h;function ot(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function st(t,e,i){ot.call(this,new Int8Array(t),e,i)}function at(t,e,i){ot.call(this,new Uint8Array(t),e,i)}function ut(t,e,i){ot.call(this,new Uint8ClampedArray(t),e,i)}function ht(t,e,i){ot.call(this,new Int16Array(t),e,i)}function lt(t,e,i){ot.call(this,new Uint16Array(t),e,i)}function ct(t,e,i){ot.call(this,new Int32Array(t),e,i)}function ft(t,e,i){ot.call(this,new Uint32Array(t),e,i)}function At(t,e,i){ot.call(this,new Float32Array(t),e,i)}function pt(t,e,i){ot.call(this,new Float64Array(t),e,i)}Object.defineProperty(ot.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ot.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new L),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new v),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new h),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new rt),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},applyMatrix3:function(t){for(var e=0,i=this.count;e<i;e++)nt.x=this.getX(e),nt.y=this.getY(e),nt.z=this.getZ(e),nt.applyMatrix3(t),this.setXYZ(e,nt.x,nt.y,nt.z);return this},applyMatrix4:function(t){for(var e=0,i=this.count;e<i;e++)nt.x=this.getX(e),nt.y=this.getY(e),nt.z=this.getZ(e),nt.applyMatrix4(t),this.setXYZ(e,nt.x,nt.y,nt.z);return this},applyNormalMatrix:function(t){for(var e=0,i=this.count;e<i;e++)nt.x=this.getX(e),nt.y=this.getY(e),nt.z=this.getZ(e),nt.applyNormalMatrix(t),this.setXYZ(e,nt.x,nt.y,nt.z);return this},transformDirection:function(t){for(var e=0,i=this.count;e<i;e++)nt.x=this.getX(e),nt.y=this.getY(e),nt.z=this.getZ(e),nt.transformDirection(t),this.setXYZ(e,nt.x,nt.y,nt.z);return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(st.prototype=Object.create(ot.prototype)).constructor=st,(at.prototype=Object.create(ot.prototype)).constructor=at,(ut.prototype=Object.create(ot.prototype)).constructor=ut,(ht.prototype=Object.create(ot.prototype)).constructor=ht,lt.prototype=Object.create(ot.prototype),lt.prototype.constructor=lt,(ct.prototype=Object.create(ot.prototype)).constructor=ct,ft.prototype=Object.create(ot.prototype),ft.prototype.constructor=ft,(At.prototype=Object.create(ot.prototype)).constructor=At,(pt.prototype=Object.create(ot.prototype)).constructor=pt;var dt=new tt;function mt(t,e){this.center=void 0!==t?t:new h,this.radius=void 0!==e?e:0}function yt(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(mt.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){for(var i=this.center,r=(void 0!==e?i.copy(e):dt.setFromPoints(t).getCenter(i),0),n=0,o=t.length;n<o;n++)r=Math.max(r,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(e=new h),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(t=new tt),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(yt.prototype,{computeGroups:function(t){for(var e,i=[],r=void 0,n=t.faces,o=0;o<n.length;o++){var s=n[o];s.materialIndex!==r&&(r=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e=t.faces,i=t.vertices,r=t.faceVertexUvs,n=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,a=s.length;if(0<a){for(var u=[],h=0;h<a;h++)u[h]={name:s[h].name,data:[]};this.morphTargets.position=u}var l=t.morphNormals,c=l.length;if(0<c){var f=[];for(h=0;h<c;h++)f[h]={name:l[h].name,data:[]};this.morphTargets.normal=f}var A=t.skinIndices,p=t.skinWeights,d=A.length===i.length,m=p.length===i.length;for(0<i.length&&e.length,h=0;h<e.length;h++){var y,g,b=e[h];3===(g=(3===(g=(this.vertices.push(i[b.a],i[b.b],i[b.c]),b.vertexNormals)).length?this.normals.push(g[0],g[1],g[2]):(g=b.normal,this.normals.push(g,g,g)),b.vertexColors)).length?this.colors.push(g[0],g[1],g[2]):(g=b.color,this.colors.push(g,g,g)),!0===n&&(void 0!==(y=r[0][h])?this.uvs.push(y[0],y[1],y[2]):this.uvs.push(new v,new v,new v)),!0===o&&(void 0!==(y=r[1][h])?this.uvs2.push(y[0],y[1],y[2]):this.uvs2.push(new v,new v,new v));for(var w=0;w<a;w++){var x=s[w].vertices;u[w].data.push(x[b.a],x[b.b],x[b.c])}for(w=0;w<c;w++){var M=l[w].vertexNormals[h];f[w].data.push(M.a,M.b,M.c)}d&&this.skinIndices.push(A[b.a],A[b.b],A[b.c]),m&&this.skinWeights.push(p[b.a],p[b.b],p[b.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var gt=new y,vt=new s;function bt(t,e,i,r){this.u=t||0,this.v=e||0,this.M=i||0,this.O=r||bt.DefaultOrder}function wt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length}bt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],bt.DefaultOrder="XYZ",Object.defineProperties(bt.prototype,{x:{get:function(){return this.u},set:function(t){this.u=t,this.S()}},y:{get:function(){return this.v},set:function(t){this.v=t,this.S()}},z:{get:function(){return this.M},set:function(t){this.M=t,this.S()}},order:{get:function(){return this.O},set:function(t){this.O=t,this.S()}}}),Object.assign(bt.prototype,{isEuler:!0,set:function(t,e,i,r){return this.u=t,this.v=e,this.M=i,this.O=r||this.O,this.S(),this},clone:function(){return new this.constructor(this.u,this.v,this.M,this.O)},copy:function(t){return this.u=t.u,this.v=t.v,this.M=t.M,this.O=t.O,this.S(),this},setFromRotationMatrix:function(t,e,i){var r=o.clamp,n=(t=t.elements)[0],s=t[4],a=t[8],u=t[1],h=t[5],l=t[9],c=t[2],f=t[6];t=t[10];return"XYZ"===(e=e||this.O)?(this.v=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this.u=Math.atan2(-l,t),this.M=Math.atan2(-s,n)):(this.u=Math.atan2(f,h),this.M=0)):"YXZ"===e?(this.u=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this.v=Math.atan2(a,t),this.M=Math.atan2(u,h)):(this.v=Math.atan2(-c,n),this.M=0)):"ZXY"===e?(this.u=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this.v=Math.atan2(-c,t),this.M=Math.atan2(-s,h)):(this.v=0,this.M=Math.atan2(u,n))):"ZYX"===e?(this.v=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this.u=Math.atan2(f,t),this.M=Math.atan2(u,n)):(this.u=0,this.M=Math.atan2(-s,h))):"YZX"===e?(this.M=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this.u=Math.atan2(-l,h),this.v=Math.atan2(-c,n)):(this.u=0,this.v=Math.atan2(a,t))):"XZY"===e&&(this.M=Math.asin(-r(s,-1,1)),Math.abs(s)<.9999999?(this.u=Math.atan2(f,h),this.v=Math.atan2(a,n)):(this.u=Math.atan2(-l,t),this.v=0)),this.O=e,!1!==i&&this.S(),this},setFromQuaternion:function(t,e,i){return gt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(gt,e,i)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this.O)},reorder:function(t){return vt.setFromEuler(this),this.setFromQuaternion(vt,t)},equals:function(t){return t.u===this.u&&t.v===this.v&&t.M===this.M&&t.O===this.O},fromArray:function(t){return this.u=t[0],this.v=t[1],this.M=t[2],void 0!==t[3]&&(this.O=t[3]),this.S(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.u,t[e+1]=this.v,t[e+2]=this.M,t[e+3]=this.O,t},toVector3:function(t){return t?t.set(this.u,this.v,this.M):new h(this.u,this.v,this.M)},R:function(t){return this.S=t,this},S:function(){}}),Object.assign(wt.prototype,{isMatrix3:!0,set:function(t,e,i,r,n,o,s,a,u){var h=this.elements;return h[0]=t,h[1]=r,h[2]=s,h[3]=e,h[4]=n,h[5]=a,h[6]=i,h[7]=o,h[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){t=t.elements,e=e.elements;var i=this.elements,r=t[0],n=t[3],o=t[6],s=t[1],a=t[4],u=t[7],h=t[2],l=t[5],c=(t=t[8],e[0]),f=e[3],A=e[6],p=e[1],d=e[4],m=e[7],y=e[2],g=e[5];e=e[8];return i[0]=r*c+n*p+o*y,i[3]=r*f+n*d+o*g,i[6]=r*A+n*m+o*e,i[1]=s*c+a*p+u*y,i[4]=s*f+a*d+u*g,i[7]=s*A+a*m+u*e,i[2]=h*c+l*p+t*y,i[5]=h*f+l*d+t*g,i[8]=h*A+l*m+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t,e=(t=this.elements)[0],i=t[1],r=t[2],n=t[3],o=t[4],s=t[5],a=t[6],u=t[7];return e*o*(t=t[8])-e*s*u-i*n*t+i*s*a+r*n*u-r*o*a},getInverse:function(t,e){e=t.elements,t=this.elements;var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],l=(e=e[8])*s-a*h,c=a*u-e*o,f=h*o-s*u,A=i*l+r*c+n*f;return 0==A?this.set(0,0,0,0,0,0,0,0,0):(t[0]=l*(l=1/A),t[1]=(n*h-e*r)*l,t[2]=(a*r-n*s)*l,t[3]=c*l,t[4]=(e*i-n*u)*l,t[5]=(n*o-a*i)*l,t[6]=f*l,t[7]=(r*u-h*i)*l,t[8]=(s*i-r*o)*l,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,r,n,o,s){var a=Math.cos(n);n=Math.sin(n);this.set(i*a,i*n,-i*(a*o+n*s)+o+t,-r*n,r*a,-r*(-n*o+a*s)+s+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=(t=Math.sin(t),this.elements),r=i[0],n=i[3],o=i[6],s=i[1],a=i[4],u=i[7];return i[0]=e*r+t*s,i[3]=e*n+t*a,i[6]=e*o+t*u,i[1]=-t*r+e*s,i[4]=-t*n+e*a,i[7]=-t*o+e*u,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var xt=0,Mt=new h,_t=new s,St=new y,Bt=new h,Et=new h,Ct=new h,Tt=new s,Ft=new h(1,0,0),Pt=new h(0,1,0),Ot=new h(0,0,1),Dt={type:"added"},Rt={type:"removed"};function It(){Object.defineProperty(this,"id",{value:xt++}),this.uuid=o.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=It.DefaultUp.clone();var t=new h,e=new bt,i=new s,r=new h(1,1,1);e.R(function(){i.setFromEuler(e,!1)}),i.R(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new y},normalMatrix:{value:new wt}}),this.matrix=new y,this.matrixWorld=new y,this.matrixAutoUpdate=It.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new F,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}It.DefaultUp=new h(0,1,0),It.DefaultMatrixAutoUpdate=!0,It.prototype=Object.assign(Object.create(it.prototype),{constructor:It,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return _t.setFromAxisAngle(t,e),this.quaternion.multiply(_t),this},rotateOnWorldAxis:function(t,e){return _t.setFromAxisAngle(t,e),this.quaternion.premultiply(_t),this},rotateX:function(t){return this.rotateOnAxis(Ft,t)},rotateY:function(t){return this.rotateOnAxis(Pt,t)},rotateZ:function(t){return this.rotateOnAxis(Ot,t)},translateOnAxis:function(t,e){return Mt.copy(t).applyQuaternion(this.quaternion),this.position.add(Mt.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Ft,t)},translateY:function(t){return this.translateOnAxis(Pt,t)},translateZ:function(t){return this.translateOnAxis(Ot,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(St.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?Bt.copy(t):Bt.set(t,e,i),t=this.parent,this.updateWorldMatrix(!0,!1),Et.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?St.lookAt(Et,Bt,this.up):St.lookAt(Bt,Et,this.up),this.quaternion.setFromRotationMatrix(St),t&&(St.extractRotation(t.matrixWorld),_t.setFromRotationMatrix(St),this.quaternion.premultiply(_t.inverse()))},add:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.add(arguments[e]);else t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(Dt));return this},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);else{var i=this.children.indexOf(t);-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Rt))}return this},attach:function(t){return this.updateWorldMatrix(!0,!1),St.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),St.multiply(t.parent.matrixWorld)),t.applyMatrix4(St),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(t=new h),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(t=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Et,t,Ct),t},getWorldScale:function(t){return void 0===t&&(t=new h),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Et,Tt,t),t},getWorldDirection:function(t){void 0===t&&(t=new h),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,n=0,o=r.length;n<o;n++)r[n].updateWorldMatrix(!1,!0)},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}});var Ut=1,Lt=new y,kt=new It,jt=new h,Qt=new tt,Nt=new tt,zt=new h;function Ht(){Object.defineProperty(this,"id",{value:Ut+=2}),this.uuid=o.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ht.prototype=Object.assign(Object.create(it.prototype),{constructor:Ht,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<function(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}(t)?ft:lt)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e,i=(void 0!==(e=(void 0!==(e=this.attributes.position)&&(e.applyMatrix4(t),e.needsUpdate=!0),this.attributes.normal))&&(i=(new wt).getNormalMatrix(t),e.applyNormalMatrix(i),e.needsUpdate=!0),this.attributes.tangent);return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Lt.makeRotationX(t),this.applyMatrix4(Lt),this},rotateY:function(t){return Lt.makeRotationY(t),this.applyMatrix4(Lt),this},rotateZ:function(t){return Lt.makeRotationZ(t),this.applyMatrix4(Lt),this},translate:function(t,e,i){return Lt.makeTranslation(t,e,i),this.applyMatrix4(Lt),this},scale:function(t,e,i){return Lt.makeScale(t,e,i),this.applyMatrix4(Lt),this},lookAt:function(t){return kt.lookAt(t),kt.updateMatrix(),this.applyMatrix4(kt.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(jt).negate(),this.translate(jt.x,jt.y,jt.z),this},setFromObject:function(t){var e,i,r=t.geometry;return t.isPoints||t.isLine?(i=new At(3*r.vertices.length,3),e=new At(3*r.colors.length,3),this.setAttribute("position",i.copyVector3sArray(r.vertices)),this.setAttribute("color",e.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(i=new At(r.lineDistances.length,1),this.setAttribute("lineDistance",i.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new At(e,3)),this},updateFromObject:function(t){var e,i=t.geometry;if(t.isMesh){var r=i.T;if(!0===i.elementsNeedUpdate&&(r=void 0,i.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(i);r.verticesNeedUpdate=i.verticesNeedUpdate,r.normalsNeedUpdate=i.normalsNeedUpdate,r.colorsNeedUpdate=i.colorsNeedUpdate,r.uvsNeedUpdate=i.uvsNeedUpdate,r.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=r}return!0===i.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(i.vertices),e.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(i.normals),e.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(i.colors),e.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(i.uvs),e.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(i.lineDistances),e.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.T=(new yt).fromGeometry(t),this.fromDirectGeometry(t.T)},fromDirectGeometry:function(t){var e,i=new Float32Array(3*t.vertices.length);for(e in this.setAttribute("position",new ot(i,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(i=new Float32Array(3*t.normals.length),this.setAttribute("normal",new ot(i,3).copyVector3sArray(t.normals))),0<t.colors.length&&(i=new Float32Array(3*t.colors.length),this.setAttribute("color",new ot(i,3).copyColorsArray(t.colors))),0<t.uvs.length&&(i=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new ot(i,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(i=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new ot(i,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){for(var r=[],n=t.morphTargets[e],o=0,s=n.length;o<s;o++){var a=n[o],u=new At(3*a.data.length,3);u.name=a.name,r.push(u.copyVector3sArray(a.data))}this.morphAttributes[e]=r}return 0<t.skinIndices.length&&(i=new At(4*t.skinIndices.length,4),this.setAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new At(4*t.skinWeights.length,4),this.setAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new tt);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var n=e[i];Qt.setFromBufferAttribute(n),this.morphTargetsRelative?(zt.addVectors(this.boundingBox.min,Qt.min),this.boundingBox.expandByPoint(zt),zt.addVectors(this.boundingBox.max,Qt.max),this.boundingBox.expandByPoint(zt)):(this.boundingBox.expandByPoint(Qt.min),this.boundingBox.expandByPoint(Qt.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mt);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var i=this.boundingSphere.center;if(Qt.setFromBufferAttribute(t),e)for(var r=0,n=e.length;r<n;r++){var o=e[r];Nt.setFromBufferAttribute(o),this.morphTargetsRelative?(zt.addVectors(Qt.min,Nt.min),Qt.expandByPoint(zt),zt.addVectors(Qt.max,Nt.max),Qt.expandByPoint(zt)):(Qt.expandByPoint(Nt.min),Qt.expandByPoint(Nt.max))}Qt.getCenter(i);var s=0;for(r=0,n=t.count;r<n;r++)zt.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(zt));if(e)for(r=0,n=e.length;r<n;r++){o=e[r];for(var a=this.morphTargetsRelative,u=0,h=o.count;u<h;u++)zt.fromBufferAttribute(o,u),a&&(jt.fromBufferAttribute(t,u),zt.add(jt)),s=Math.max(s,i.distanceToSquared(zt))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new ot(new Float32Array(i.length),3));else for(var r=e.normal.array,n=0,o=r.length;n<o;n++)r[n]=0;var s,a,u,l=e.normal.array,c=new h,f=new h,A=new h,p=new h,d=new h;if(t){var m=t.array;for(n=0,o=t.count;n<o;n+=3)s=3*m[n+0],a=3*m[n+1],u=3*m[n+2],c.fromArray(i,s),f.fromArray(i,a),A.fromArray(i,u),p.subVectors(A,f),d.subVectors(c,f),p.cross(d),l[s]+=p.x,l[1+s]+=p.y,l[2+s]+=p.z,l[a]+=p.x,l[1+a]+=p.y,l[2+a]+=p.z,l[u]+=p.x,l[1+u]+=p.y,l[2+u]+=p.z}else for(n=0,o=i.length;n<o;n+=9)c.fromArray(i,n),f.fromArray(i,n+3),A.fromArray(i,n+6),p.subVectors(A,f),d.subVectors(c,f),p.cross(d),l[n]=p.x,l[n+1]=p.y,l[n+2]=p.z,l[n+3]=p.x,l[n+4]=p.y,l[n+5]=p.z,l[n+6]=p.x,l[n+7]=p.y,l[n+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)zt.x=t.getX(e),zt.y=t.getY(e),zt.z=t.getZ(e),zt.normalize(),t.setXYZ(e,zt.x,zt.y,zt.z)},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Vt=0;function Gt(){Object.defineProperty(this,"id",{value:Vt++}),this.uuid=o.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Kt(t){Gt.call(this),this.type="LineBasicMaterial",this.color=new L(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}Gt.prototype=Object.assign(Object.create(it.prototype),{constructor:Gt,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i,r=t[e];void 0===r||("shading"===e?this.flatShading=1===r:void 0===(i=this[e])||(i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[e]=r))}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,i=null;if(null!==e)for(var r=e.length,n=(i=new Array(r),0);n!==r;++n)i[n]=e[n].clone();return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Gt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),((Kt.prototype=Object.create(Gt.prototype)).constructor=Kt).prototype.isLineBasicMaterial=!0,Kt.prototype.copy=function(t){return Gt.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Yt=new h,Xt=new h,Wt=new y,qt=new T,Zt=new mt;function Jt(t,e,i){It.call(this),this.type="Line",this.geometry=void 0!==t?t:new Ht,this.material=void 0!==e?e:new Kt}function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===$t(t=function(t,e){if("object"!==$t(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==$t(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Jt.prototype=Object.assign(Object.create(It.prototype),{constructor:Jt,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,i=[0],r=1,n=e.count;r<n;r++)Yt.fromBufferAttribute(e,r-1),Xt.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Yt.distanceTo(Xt);t.setAttribute("lineDistance",new At(i,1))}}else if(t.isGeometry){var o=t.vertices;for((i=t.lineDistances)[0]=0,r=1,n=o.length;r<n;r++)i[r]=i[r-1],i[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(t,e){var i=this.geometry,r=this.matrixWorld,n=t.params.Line.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),Zt.copy(i.boundingSphere),Zt.applyMatrix4(r),Zt.radius+=n,!1!==t.ray.intersectsSphere(Zt)){Wt.getInverse(r),qt.copy(t.ray).applyMatrix4(Wt);var o=(r=n/((this.scale.x+this.scale.y+this.scale.z)/3))*r,s=new h,a=new h,u=new h,l=new h,c=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){n=i.index;var f=i.attributes.position.array;if(null!==n)for(var A=n.array,p=0,d=A.length-1;p<d;p+=c){var m=A[p],y=A[p+1];s.fromArray(f,3*m),a.fromArray(f,3*y),o<qt.distanceSqToSegment(s,a,l,u)||(l.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(l))<t.near)||g>t.far||e.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}else for(p=0,d=f.length/3-1;p<d;p+=c)s.fromArray(f,3*p),a.fromArray(f,3*p+3),o<qt.distanceSqToSegment(s,a,l,u)||(l.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(l))<t.near)||g>t.far||e.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}else if(i.isGeometry){var g,v=i.vertices,b=v.length;for(p=0;p<b-1;p+=c)o<qt.distanceSqToSegment(v[p],v[p+1],l,u)||(l.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(l))<t.near)||g>t.far||e.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});i=function(t,e,i){return e&&te(t.prototype,e),i&&te(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.j={}});var ee=(Object.assign(i.prototype,{k:function(t,e){this.B(t,e)||(void 0===this.j[t]&&(this.j[t]=[]),this.j[t].push(e))},B:function(t,e){return e?void 0!==this.j[t]&&-1!==this.j[t].indexOf(e):void 0!==this.j[t]&&0<this.j[t].length},I:function(t,e){void 0!==this.j[t]&&-1!==(e=this.j[t].indexOf(e))&&this.j[t].splice(e,1)},_:function(t){if(void 0!==this.j[t.type])for(var e=this.j[t.type].slice(0),i=0,r=e.length;i<r;i++)e[i].call(this,t)}}),i);function ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,s,a=[],u=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;u=!1}else for(;!(u=(r=o.call(i)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,n=t}finally{try{if(!u&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(h)throw n}}return a}}(t,e)||re(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(t,e){var i;if(t)return"string"==typeof t?ne(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ne(t,e):void 0}function ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function oe(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ue(r.key),r)}}function ue(t){return"symbol"===se(t=function(t,e){if("object"!==se(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==se(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}i=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.P=e,this.C="none",this.currentobj=null,this.V={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QoOAiAd1TTTFgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABfElEQVRYw81XO26EMBB9poAIrBwh2hPgMt1WS7cSN+AonAXtIahSpfLWVNtFewXLkG7SeCVIbH5rBZ40jYGZ8fjxPMOwDAcARwAnAO8A3sz6HcAVwAeATwBf8IgIQAGgA0AzrTPfRM8GPy8I6rLz2l1fPAR/2GVJNV4B3DwGf9jN+J7cuTM4Y4yEEFSWJUkpSWtNWmuSUlJZliSEIMbYVBKjlXCWPcsyUkrRFJRSlGXZ1HHMJ1wYhlRVFS1FVVUUhuFsYkau4FJKWgsp5VgSg6MobC+t2bmtEo4Ein4Cne3MfcHBia4vr3/YPodwc6GUcv0dh8Bo+wBpmoJz7k3LOedI09T26BiYi2WAPM/hGw6fJ9iE5xnmj/0RNmFihgwv/bS01ojj2GsF2rZFkiS/l78DbIzANBMDNE3jPZDD5z0wncwAdV17T8Dh82pVQSGEdxIKIZxquKkQ7UKKd3EZbX4db96Q7KIl20VTunlbvovBZBej2b8Np2zr8fwHFGE/6k/Mu0oAAAAASUVORK5CYII=",size:32,height:1,collision:!1},this.L={width:5,type:w.FULL,color:"#FF0000",height:3},this.F={color:"#FF0000",borderWidth:3,borderColor:"#0000FF",opacity:.5,height:3},this.D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QocCDgHXcqo9wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEQ0lEQVRYw71XTWhcVRg9584kVGzHZKYlTFpsJ/PeKBaKMjN05aYIKgguupASqaKCC1cFVxaSaQW7dSW4KRFBEETEje5qtWK1SdP409L0zZgpJrEtvqY/qebNe/e46KSZDMkkmSR9mwdz35zv3O8737nfJdbxuG7xdQp7EfCj8au//NkORqzd4Lls8S0SgzR8UTHbm0qlr/r+9ORDIZDLFt6B4SDJXQBAci/AbHeyd8L3p6qbSsB1C++SLJHc0fg7yQyFbFd37z83b05d3hQCrls8SrBEcutS6yR3k8wnU713fH9qbEMJuG7hPYIDAAyAGsl447qk6wDmACQIPJVMpWd8f/r3lXDjqwne07PvUQmXBfUbKQS5U8AAyZ568LNW0RGJAalOyRgTRbN1srYVNtsR4Z49hSc6O3iKZBoArPTjzMzsCzduXLy7VizTDgGSAqCGXdDaqK3NmI0S6PYVSrgmAq6bP+S6+cKyzGI2WlxbsRWDbds6D7hu/vCqCOScwquAGaSNpZcDrNXCCEDYWJQoeowtSpYizIDrFl9rScBxiv0gBwn2yWhZwI4OGy4ioNZilhAA2G2AweZMxBvs9RVQA6RxJNQAPJ3LFW8jVCeoTruo77mjqYUTgD3oOIXbS6dZ++9LlRnKDDhOMfS8c589aEPHKRw0xDHS7G0wlrsADSBTz5RpSmuzEYUrdE584Vt7EVZHx8sjXzGXzb8sY44bch8e4mOlc5I9akA+u1xwafG7YWXdBAxZNOBLcYvwpLEdvTQ8tCiE1Q8wGJMQSYoEhhRrov6jkAD1Jsnk/Dkg4AsCNUgEDAFRBAGQQo6GzzWV7DsLfFnXQD5rYAZoeHh+h7I6Mu4Nf7gU+76+/ONxY07RsK9O9ufQ2ucrlZFbS33vOMV+Q3xCMvYguFTyvOHTBgA8b6Q8VwsGZe3QfHrZIs9RZAIRwarTfb+rVK/9mcja4543fHqRD1SrYxNBGJUEDa0IaMyaRGCpCKBk7RgjfVAuj5xa0ogmJkarsVhUkrVDUYtTlPxXBKM1HF5WUhnCifHK8DctrfjSpdFqENpSLDTfLgcYBGEIaG61BKRoGrTHx8vDn69qIJmYGG05WG7ZsjUEtGoNeN75cwDOtj0RAUAms79nYUfBNjIeNQnzkXQ6XwMAa2sEgGvXfp2dX17XROQ4ToLsehvgGw1/dObtVcI9wf5kAAokYI3A74Hax1eujE2ueyj1fX8ukeiZjMXMk4Y8QHI7SbMgMnSQ6AOZIZERUJEw5Hmjv23YVDwz8/etVGJXBUZZktkmVwPJusfbr62N3i+Xz5/Z8HuBPzN5rTvZe5VAhuSehjabD/4pYEued2F0025Gvj9VTXalrwvMk9y+cHbYoaAWliqVC96m3w39m9NXUqn0HYDPkOiywslaGB2rVi9U14rV9u3Y96fHkqmd92T1x1ygE9Xq+b/awfkfmzntCAO/rwcAAAAASUVORK5CYII=",this.H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QoOAiAd1TTTFgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABfElEQVRYw81XO26EMBB9poAIrBwh2hPgMt1WS7cSN+AonAXtIahSpfLWVNtFewXLkG7SeCVIbH5rBZ40jYGZ8fjxPMOwDAcARwAnAO8A3sz6HcAVwAeATwBf8IgIQAGgA0AzrTPfRM8GPy8I6rLz2l1fPAR/2GVJNV4B3DwGf9jN+J7cuTM4Y4yEEFSWJUkpSWtNWmuSUlJZliSEIMbYVBKjlXCWPcsyUkrRFJRSlGXZ1HHMJ1wYhlRVFS1FVVUUhuFsYkau4FJKWgsp5VgSg6MobC+t2bmtEo4Ein4Cne3MfcHBia4vr3/YPodwc6GUcv0dh8Bo+wBpmoJz7k3LOedI09T26BiYi2WAPM/hGw6fJ9iE5xnmj/0RNmFihgwv/bS01ojj2GsF2rZFkiS/l78DbIzANBMDNE3jPZDD5z0wncwAdV17T8Dh82pVQSGEdxIKIZxquKkQ7UKKd3EZbX4db96Q7KIl20VTunlbvovBZBej2b8Np2zr8fwHFGE/6k/Mu0oAAAAASUVORK5CYII=",this.objectArray=[],this.Y=[],this.N=[],this.X=[],this.U=[],this.Z=null,this.G=null,this.q=null,this.W=null,this.K=void 0,this.J="#FF0000",this.$=this.P.getRenderManager().renderer.domElement,this.tt=this.tt.bind(this),this.it=this.it.bind(this),this.nt=this.nt.bind(this),this.st=new P,this.rt=new ee,this.et=null,this.ht=null,this.ot()}var e,i;return e=t,(i=[{key:"editUrl",get:function(){return this.H},set:function(t){this.H=t}},{key:"centerUrl",get:function(){return this.D},set:function(t){this.D=t}},{key:"PointStyle",get:function(){return this.V},set:function(t){this.V=t}},{key:"operate",get:function(){return this.K},set:function(t){this.K=t;for(var e=0;e<this.X.length;e++)this.X[e].visible=!1,"move"===t?"center"===this.X[e]._opetype&&(this.X[e].visible=!0):"center"!==this.X[e]._opetype&&(this.X[e].visible=!0)}},{key:"LineStyle",get:function(){return this.L},set:function(t){this.L=t}},{key:"PolygonStyle",get:function(){return this.F},set:function(t){this.F=t}},{key:"DrawTool",get:function(){return this.C},set:function(t){if(this.C=t,"edit"!==this.C){for(var e=0;e<this.X.length;e++)this.X[e].remove();null!==this.ht&&(this.ht.parent.remove(this.ht),this.ht=null,this.P.enableUpdateRender()),this.Y.length=0,this.N.length=0,this.X.length=0,this.G=null,this.Z=null}}},{key:"edit",value:function(t,e){if("none"===this.DrawTool||"edit"===this.DrawTool)if(t&&t.shapetype){if(!(0<this.X.length||null!==this.ht)&&(e||null==this.G||this.G.id!==t.id)&&(!t.opetype||"no"===t.opetype.type)){for(var i=0;i<this.X.length;i++)this.X[i].remove();null!==this.ht&&(this.ht.parent.remove(this.ht),this.ht=null,this.P.enableUpdateRender()),this.X.length=0,this.Z=null,this.G=t,e||(this.W=t.id),t.type===fengmap.FMType.POLYGON_MARKER?(this.ut(t),this.DrawTool="edit"):t.type===fengmap.FMType.LINE_MARKER?(this.ct(t),this.DrawTool="edit"):t.type===fengmap.FMType.IMAGE_MARKER&&(this.DrawTool="edit",this.q=null,this.ft(t))}}else{for(var r=0;r<this.X.length;r++)this.X[r].remove();this.X.length=0,(this.G=null)!==this.ht&&(this.ht.parent.remove(this.ht),this.ht=null,this.P.enableUpdateRender())}}},{key:"on",value:function(t,e){this.rt.k(t,e)}},{key:"dispose",value:function(){this.$.removeEventListener("mousedown",this.tt,!1),this.$.removeEventListener("mousemove",this.it,!1),this.$.removeEventListener("mouseup",this.nt,!1)}},{key:"createMarkerByInfo",value:function(t){var e;if("circle"===t.shapetype||"ellipse"===t.shapetype||"rect"===t.shapetype||"polygon"===t.shapetype)return e=new fengmap.FMPolygonMarkerEdit(t),n=this.P.getFloor(t.level),e.addTo(n),e.mapEdit=this,t.id&&(e.id=t.id),e;if("line"!==t.shapetype)return n=this.P.getFloor(t.level),(e=new fengmap.FMImageMarkerEdit(t)).addTo(n),e.mapEdit=this,t.id&&(e.id=t.id),e;var i=new fengmap.FMSegment;i.points=[];for(var r=0;r<t.points.length;r++)i.points.push({x:t.points[r].x,y:t.points[r].y,z:t.points[r].z});i.level=t.level,t.segments=[i];var n=new fengmap.FMLineMarkerEdit(t);return n.addTo(this.P),n.mapEdit=this,t.id&&(n.id=t.id),n}}])&&ae(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var he=((Le=(Object.assign(i.prototype,{ot:function(){this.$.addEventListener("mousedown",this.tt,!1),this.$.addEventListener("mousemove",this.it,!1),this.$.addEventListener("mouseup",this.nt,!1)},lt:function(t,e){if(("none"===this.DrawTool||"edit"===this.DrawTool)&&(null!==this.ht&&(this.ht.parent.remove(this.ht),this.ht=null,this.P.enableUpdateRender()),t)&&(e||null==this.G||this.G.id!==t.id)&&(!t.opetype||"no"===t.opetype.type)){for(var i=0;i<this.X.length;i++)this.X[i].remove();this.X.length=0,this.Z=null,this.G=t,e||(this.W=t.id),t.type===fengmap.FMType.POLYGON_MARKER?(this.ut(t),this.DrawTool="edit"):t.type===fengmap.FMType.LINE_MARKER?(this.ct(t),this.DrawTool="edit"):t.type===fengmap.FMType.IMAGE_MARKER&&(this.DrawTool="edit",this.q=null,this.ft(t))}},vt:function(t){return(t=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(i),!0).forEach(function(e){var r,n;r=t,n=i[e=e],(e=ue(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):oe(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},t)).buildingID===this.P.getMapOptions().mapID&&(t.buildingID=null),t},dt:function(t,e){var i=new v;if(i.x=t/this.$.getBoundingClientRect().width*2-1,i.y=-e/this.$.getBoundingClientRect().height*2+1,"point"===this.G.shapetype)return t=[this.G.getRenderNode()],this.st.setFromCamera(i,this.P.camera),0<(e=this.st.intersectObjects(t,!0)).length?e[0].object:null;for(var r=[],n=0;n<this.X.length;n++)this.X[n].opetype.node.visible&&r.push(this.X[n].opetype.node);return this.st.setFromCamera(i,this.P.camera),0<(t=this.st.intersectObjects(r,!0)).length?t[0].object:null},yt:function(t,e){var i=t.offsetX,r=(t=t.offsetY,new h);r.x=i/this.$.clientWidth*2-1,r.y=-t/this.$.clientHeight*2+1,r.z=.5,this.st.setFromCamera(r,this.P.camera);var n,o=null,s=function(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=re(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.P.getRenderManager().getRenderList());try{for(s.s();!(n=s.n()).done;)for(var a=ie(n.value,2),u=(a[0],a[1]),l=this.st.intersectObject(u,!0),c=0;c<l.length;c++)l[c].object.mapNode&&(o=l[c].object)}catch(t){s.e(t)}finally{s.f()}null!==o&&o.mapNode?o.mapNode.type!==fengmap.FMType.LINE_MARKER?this.et={buildingID:o.mapNode.parent.parent.parent.buildingID,level:o.mapNode.level}:(i=o.mapNode.segments[0],this.et={buildingID:i.buildingID,level:i.level}):this.et={buildingID:this.P.getMapOptions().mapID,level:this.P.getLevel()},e&&e()},tt:function(t){var e=this;this.yt(t,function(){if("none"!==e.DrawTool)if(2===t.button)"edit"!==e.DrawTool?e.Mt():(null!==e.Z||null!==e.G&&"point"===e.G.shapetype)&&e.bt(),e.Z=null;else{var i=t.clientX-e.$.getBoundingClientRect().left,r=t.clientY-e.$.getBoundingClientRect().top;if("edit"===e.DrawTool){if(null===e.Z){if(null===e.G)return;var n=e.dt(i,r);"point"!==e.G.shapetype?null!==n&&(e.Z=n.mapNode,e.wt(!1)):null!==n&&(e.q={x:e.G.x,y:e.G.y},e.wt(!1))}}else(n=fengmap.FMUtil.coordsScreenToMap(e.P,{x:i,y:r})).buildingID=e.et.buildingID,n.level=e.et.level,"point"===e.DrawTool?(e.gt(n),e.rt._({type:"drawend",info:e.vt(e.currentobj.info),object:e.currentobj}),e.currentobj=null,e.et=null):"line"===e.DrawTool?e.Y.push(n):"circle"===e.DrawTool?0===e.N.length?e.N.push(n):(e.At(n),e.rt._({type:"drawend",info:e.vt(e.currentobj.info),object:e.currentobj}),e.N.length=0,e.currentobj=null,e.et=null):"rect"===e.DrawTool?0===e.N.length?e.N.push(n):(e.Et(n),e.rt._({type:"drawend",info:e.vt(e.currentobj.info),object:e.currentobj}),e.N.length=0,e.currentobj=null,e.et=null):"polygon"===e.DrawTool?e.N.push(n):"ellipse"===e.DrawTool&&(0===e.N.length?e.N.push(n):(e.St(n),e.rt._({type:"drawend",info:e.vt(e.currentobj.info),object:e.currentobj}),e.N.length=0,e.currentobj=null,e.et=null))}})},it:function(t){if("none"!==this.DrawTool){var e=t.clientX-this.$.getBoundingClientRect().left;t=t.clientY-this.$.getBoundingClientRect().top,e=fengmap.FMUtil.coordsScreenToMap(this.P,{x:e,y:t});if("edit"===this.DrawTool)return null!==this.G&&"point"===this.G.shapetype&&null!==this.q?(this.G.moveTo({animate:!1,x:e.x,y:e.y}),void this.rt._({type:"drawing",info:this.vt(this.G.info),object:this.G})):void(null!==this.G&&null!==this.Z&&(this.Rt(e),this.G.id=this.W,this.rt._({type:"drawing",info:this.vt(this.G.info),object:this.G})));"line"===this.DrawTool?this.xt(e):"circle"===this.DrawTool?this.At(e):"rect"===this.DrawTool?this.Et(e):"polygon"===this.DrawTool?this.jt(e):"ellipse"===this.DrawTool&&this.St(e),this.P.enableUpdateRender(),null!==this.currentobj&&this.rt._({type:"drawing",info:this.vt(this.currentobj.info),object:this.currentobj})}},nt:function(t){if(2!==t.button&&"edit"===this.DrawTool&&null!==this.G&&("point"===this.G.shapetype||null!==this.Z)){if("point"===this.G.shapetype)this.lt(this.G,!0);else if("center"!==this.Z.opetype.type){if("ellipse"===this.G.shapetype||"circle"===this.G.shapetype)this.q=this.Ot(this.G.points);else if("rect"===this.G.shapetype){this.q=this.G.points;var e=((t=this.Tt("center")).visible=!0,void 0!==this.K&&"edit"===this.K&&(t.visible=!1),this.Tt("point",!0));t.position.x=(e[0].position.x+e[1].position.x)/2,t.position.z=(e[0].position.z+e[1].position.z)/2,this.U.length=0,this.U.push({x:Math.abs(e[0].position.x-e[1].position.x)/2,y:Math.abs(e[0].position.z-e[1].position.z)/2})}else if("polygon"===this.G.shapetype){this.q=this.G.points;for(var i=this.Ot(this.q).center,r=this.U.length=0;r<this.q.length;r++)this.U.push({x:this.q[r].x-i.x,y:this.q[r].y-i.y});(t=this.Tt("center")).position.x=i.x-this.P.x,t.position.z=this.P.y-i.y}else if("line"===this.G.shapetype){this.q=this.G.points;for(var n=this.Ot(this.q).center,o=this.U.length=0;o<this.q.length;o++)this.U.push({x:this.q[o].x-n.x,y:this.q[o].y-n.y});(e=this.Tt("center")).position.x=n.x-this.P.x,e.position.z=this.P.y-n.y}}else this.lt(this.G,!0);this.wt(!0),this.Z=null,this.G.id=this.W,this.rt._({type:"editend",info:this.vt(this.G.info),object:this.G})}},ft:function(t){t.getRenderNode().position;var e=[new h(-.5,0,.5),new h(-.5,0,-.5),new h(.5,0,-.5),new h(.5,0,.5),new h(-.5,0,.5)],i=(e=(new Ht).setFromPoints(e),new Kt({color:new L(this.J)}));(e=(i.depthTest=!1,i.depthWrite=!1,new Jt(e,i))).scale.set(1.1,1.1,1.1),t.getRenderNode().add(e),this.ht=e,this.P.enableUpdateRender()},Rt:function(t){if(null!==this.Z){var e=this;if("ellipse"!==this.G.shapetype?(this.Z.opetype.node.position.x=t.x-this.P.x,this.Z.opetype.node.position.z=this.P.y-t.y):"xradius"===this.Z.opetype.type?this.Z.opetype.node.position.x=t.x-this.P.x:("yradius"!==this.Z.opetype.type&&(this.Z.opetype.node.position.x=t.x-this.P.x),this.Z.opetype.node.position.z=this.P.y-t.y),"circle"===this.G.shapetype)"yradius"===this.Z.opetype.type?(o=x("center"),this.N.length=0,this.N.push({x:this.P.x+o.position.x,y:this.P.y-o.position.z}),this.At(t,!0)):(x("yradius").visible=!1,this.N.length=0,this.N.push({x:t.x,y:t.y}),this.At({x:t.x,y:t.y+this.q.yradius},!0));else if("ellipse"===this.G.shapetype)this.N.length=0,"yradius"===this.Z.opetype.type||"xradius"===this.Z.opetype.type?(o=x("center"),o={x:this.P.x+o.position.x,y:this.P.y-o.position.z},n=null,n="yradius"===this.Z.opetype.type?this.kt(o,this.q.xradius,Math.abs(o.y-t.y)):this.kt(o,Math.abs(o.x-t.x),this.q.yradius),this.St(n,!0)):(x("xradius").visible=!1,x("yradius").visible=!1,o=this.kt(t,this.q.xradius,this.q.yradius),this.St(o,!0));else if("rect"===this.G.shapetype)if("center"===this.Z.opetype.type){for(var i=x("point",!0),r=0;r<i.length;r++)i[r].visible=!1;this.N.length=0,this.N.push({x:t.x+this.U[0].x,y:t.y-this.U[0].y}),this.Et({x:t.x-this.U[0].x,y:t.y+this.U[0].y},!0)}else{var n=x("center"),o=x("point",n.visible=!1,this.Z.opetype.node.uuid);null!==o&&(this.N.length=0,this.N.push({x:this.P.x+o.position.x,y:this.P.y-o.position.z}),this.Et(t,!0))}else if("polygon"===this.G.shapetype)if("center"===this.Z.opetype.type){for(var s=this.Tt("point",!0),a=0;a<s.length;a++)s[a].visible=!1;for(var u=this.Z.opetype.node.position.x,h=this.Z.opetype.node.position.z,l=[],c=0;c<this.U.length;c++)l.push({x:u+this.U[c].x,y:h-this.U[c].y});this.jt(l,!0)}else{for(var f=this.Tt("point",!0),A=[],p=0;p<f.length;p++)A.push({x:f[p].position.x,y:f[p].position.z});this.jt(A,!0)}else if("line"===this.G.shapetype){var d=this.Tt("point",!0),m=[];if("center"===this.Z.opetype.type){for(var y=0;y<d.length;y++)d[y].visible=!1;for(var g=this.Z.opetype.node.position.x,v=this.Z.opetype.node.position.z,b=0;b<this.U.length;b++)m.push({x:g+this.U[b].x,y:v-this.U[b].y})}else for(var w=0;w<d.length;w++)m.push({x:d[w].position.x,y:d[w].position.z});this.xt(m,!0)}}function x(t,i,r){return e.Tt(t,i,r)}},Tt:function(t,e,i){var r=this,n=null;e&&(n=[]);for(var o=0;o<r.X.length;o++)if(r.X[o].opetype.type===t)if(e)(!i||r.X[o].opetype.node.uuid!==i)&&n.push(r.X[o].opetype.node);else{if(!i){n=r.X[o].opetype.node;break}if(r.X[o].opetype.node.uuid!==i){n=r.X[o].opetype.node;break}}return n},Mt:function(){var t;"line"===this.DrawTool?this.xt():"circle"===this.DrawTool?this.At():"rect"===this.DrawTool?this.Et():"polygon"===this.DrawTool?this.jt():"ellipse"===this.DrawTool&&this.St(),"line"!==this.DrawTool&&"polygon"!==this.DrawTool||(t=!0,"line"===this.DrawTool?this.Y.length<2&&(t=!1):"polygon"===this.DrawTool&&this.N.length<3&&(t=!1),t&&(this.rt._({type:"drawend",info:this.vt(this.currentobj.info),object:this.currentobj}),this.et=null),"line"===this.DrawTool&&(this.Y.length=0,this.currentobj=null),"polygon"===this.DrawTool&&(this.N.length=0,this.currentobj=null))},bt:function(){if(this.q){if("circle"===this.G.shapetype)this.N.length=0,this.N.push({x:this.q.center.x,y:this.q.center.y}),this.At({x:this.q.center.x,y:this.q.center.y+this.q.yradius},!0);else if("ellipse"===this.G.shapetype){this.N.length=0;var t=this.kt({x:this.q.center.x,y:this.q.center.y},this.q.xradius,this.q.yradius);this.St(t,!0)}else if("rect"===this.G.shapetype)this.Et(),this.lt(this.G);else if("polygon"===this.G.shapetype){for(var e=[],i=0;i<this.q.length;i++)e.push({x:this.q[i].x-this.P.x,y:this.P.y-this.q[i].y});this.jt(e,!0)}else if("line"===this.G.shapetype){for(var r=[],n=0;n<this.q.length;n++)r.push({x:this.q[n].x-this.P.x,y:this.P.y-this.q[n].y});this.xt(r,!0)}else if("point"===this.G.shapetype)return this.G.moveTo({animate:!1,x:this.q.x,y:this.q.y}),this.rt._({type:"editend",info:this.vt(this.G.info),object:this.G}),void(this.G=null);this.G.id=this.W,this.rt._({type:"editend",info:this.vt(this.G.info),object:this.G}),this.lt(this.G,!0)}},gt:function(t){var e,i={},r=this.PointStyle;for(e in r)i[e]=r[e];i.x=t.x,i.y=t.y,i.buildingID=this.et.buildingID;t=this.P.getBuilding(this.et.buildingID).getFloor(this.et.level);var n=new fengmap.FMImageMarkerEdit(i);n.addTo(t),(n.mapEdit=this).currentobj=n},xt:function(t,e){var i,r=new fengmap.FMSegment,n=(r.points=[],{}),o=this.LineStyle;for(i in o)n[i]=o[i];if(void 0===n.height&&(n.height=3),e){null!==this.G&&this.G.remove();for(var s=0;s<t.length;s++)r.points.push({x:this.P.x+t[s].x,y:this.P.y-t[s].y,z:n.height})}else{if(0===this.Y.length)return;if(null!==this.currentobj&&(this.currentobj.remove(),!t)&&1===this.Y.length)return;for(var a=0;a<this.Y.length;a++)r.points.push({x:this.Y[a].x,y:this.Y[a].y,z:n.height});t&&r.points.push({x:t.x,y:t.y,z:n.height})}e?(r.level=this.et.level,r.buildingID=this.et.buildingID):(r.level=this.Y[0].level,r.buildingID=this.Y[0].buildingID),n.segments=[r];var u=new fengmap.FMLineMarkerEdit(n);u.addTo(this.P),u.mapEdit=this,e?this.G=u:this.currentobj=u},At:function(t,e){if(0!==this.N.length){if(e)null!==this.G&&this.G.remove();else if(null!==this.currentobj&&(this.currentobj.remove(),!t))return this.N.length=0,void(this.currentobj=null);var i,r=this.N[0],n=(t=Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)),this.PolygonStyle),o={};for(i in n)o[i]=n[i];o.points=fengmap.FMCalculator.circleBuilder(t,this.N[0],32),o.shapetype="circle";var s;t=new fengmap.FMPolygonMarkerEdit(o);e?(s=this.P.getBuilding(this.et.buildingID).getFloor(this.et.level),t.addTo(s)):(s=this.P.getBuilding(r.buildingID).getFloor(r.level),t.addTo(s)),t.mapEdit=this,e?this.G=t:this.currentobj=t}},Et:function(t,e){var i=[];if(t||e){if(0===this.N.length)return;if(e)null!==this.G&&this.G.remove();else if(null!==this.currentobj&&(this.currentobj.remove(),!t))return this.N.length=0,void(this.currentobj=null);var r=this.N[0];i=[r,{x:t.x,y:r.y},t,{x:r.x,y:t.y}]}else if("edit"===mapdraw.DrawTool)i=this.q,null!==this.G&&this.G.remove();else if(null!==this.currentobj)return this.currentobj.remove(),this.N.length=0,void(this.currentobj=null);if(0!==i.length){var n,o=this.PolygonStyle,s={};for(n in o)s[n]=o[n];s.points=i,s.shapetype="rect",r=new fengmap.FMPolygonMarkerEdit(s),e?(i=this.P.getBuilding(this.et.buildingID).getFloor(this.et.level),r.addTo(i)):(i=this.P.getBuilding(this.N[0].buildingID).getFloor(this.N[0].level),r.addTo(i)),r.mapEdit=this,!t&&!e||e?this.G=r:this.currentobj=r}},jt:function(t,e){var i=[];if(e){null!==this.G&&this.G.remove();for(var r=0;r<t.length;r++)i.push({x:this.P.x+t[r].x,y:this.P.y-t[r].y})}else{if(0===this.N.length)return;null!==this.currentobj&&this.currentobj.remove();for(var n=0;n<this.N.length;n++)i.push({x:this.N[n].x,y:this.N[n].y});if(t)i.push({x:t.x,y:t.y});else if(2===i.length)return}var o,s=this.PolygonStyle,a={};for(o in s)a[o]=s[o];a.points=i;var u,h=new fengmap.FMPolygonMarkerEdit(a);e?(u=this.P.getBuilding(this.et.buildingID).getFloor(this.et.level),h.addTo(u)):(u=this.P.getBuilding(this.N[0].buildingID).getFloor(this.N[0].level),h.addTo(u)),h.mapEdit=this,e?this.G=h:this.currentobj=h},St:function(t,e){var i=null;if(e)null!==this.G&&this.G.remove(),i=t;else{if(0===this.N.length)return;if(null!==this.currentobj&&this.currentobj.remove(),!t)return this.N.length=0,void(this.currentobj=null);var r=this.N[0],n=Math.abs(t.x-r.x);i=(t=Math.abs(t.y-r.y))<n?this.kt(r,n,n/2):this.kt(r,t/2,t)}for(var o=[],s=0;s<i.length;s++)o.push({x:i[s].x,y:i[s].y});var a,u=this.PolygonStyle,h={};for(a in u)h[a]=u[a];h.points=o,h.shapetype="ellipse",n=new fengmap.FMPolygonMarkerEdit(h),e?(r=this.P.getBuilding(this.et.buildingID).getFloor(this.et.level),n.addTo(r)):(t=this.P.getBuilding(this.N[0].buildingID).getFloor(this.N[0].level),n.addTo(t)),n.mapEdit=this,e?this.G=n:this.currentobj=n},kt:function(t,e,i){return new b(t.x,t.y,e,i,0,2*Math.PI,!1,0).getPoints(32)},ct:function(t){for(var e=[],i=(this.q=t.points,this.Ot(t.points).center),r=this.U.length=0;r<t.points.length;r++)e.push(t.points[r]),this.U.push({x:t.points[r].x-i.x,y:t.points[r].y-i.y});e.push({x:i.x,y:i.y,optype:"center"}),this.Bt(e,t)},ut:function(t){var e,i=[];if("polygon"===t.shapetype){this.q=t.points;for(var r=this.Ot(t.points).center,n=this.U.length=0;n<t.points.length;n++)i.push(t.points[n]),this.U.push({x:t.points[n].x-r.x,y:t.points[n].y-r.y});i.push({x:r.x,y:r.y,optype:"center"})}else"rect"===t.shapetype?(this.q=t.points,i.push(t.points[0]),i.push(t.points[2]),i.push({x:(t.points[0].x+t.points[2].x)/2,y:(t.points[0].y+t.points[2].y)/2,optype:"center"}),this.U.length=0,this.U.push({x:Math.abs(t.points[0].x-t.points[2].x)/2,y:Math.abs(t.points[0].y-t.points[2].y)/2})):"circle"!==t.shapetype&&"ellipse"!==t.shapetype||(e=this.Ot(t.points),this.q=e,i.push({x:e.center.x,y:e.center.y,optype:"center"}),i.push({x:e.center.x,y:e.center.y+e.yradius,optype:"yradius"}),"ellipse"===t.shapetype&&i.push({x:e.center.x+e.xradius,y:e.center.y,optype:"xradius"}));this.Bt(i,t)},Bt:function(t,e){for(var i=this,r=(i.P.getFloor(i.P.getLevel()),0);r<t.length;r++){var n=(n=t[r].optype)||"point",o=i.editUrl,s=(o=("center"===n&&(o=i.centerUrl),new fengmap.FMImageMarkerEdit({url:o,size:16,height:e.height+1,x:t[r].x,y:t[r].y,collision:!1,opetype:n})),this.P.getBuilding(e.info.buildingID).getFloor(e.info.level));o.addTo(s),void 0!==this.K&&("move"===this.K?"center"!==n&&(o.visible=!1):"edit"===this.K&&"center"===n&&(o.visible=!1)),i.X.push(o)}},Ot:function(t){for(var e=null,i=null,r=null,n=null,o=0;o<t.length;o++)0===o?(e=t[o].x,i=t[o].y,r=t[o].x,n=t[o].y):(e>t[o].x&&(e=t[o].x),i>t[o].y&&(i=t[o].y),r<t[o].x&&(r=t[o].x),n<t[o].y&&(n=t[o].y));return{center:{x:(e+r)/2,y:(i+n)/2},xradius:Math.abs(r-e)/2,yradius:Math.abs(n-i)/2}},It:function(t){var e=t.buildingID;t=t.level;null===e&&(e=this.P.getMapOptions().mapID,t=this.P.getLevel()),null===this.currentobj&&(this.et={buildingID:e,level:t})},wt:function(t){var e=this.P.getInteracations();e.enableDrag=t,e.enableRotate=t,e.enableTilt=t,e.enableZoom=t},_t:function(t){if(this.G&&this.G.id===t){for(var e=0;e<this.X.length;e++)this.X[e].remove();this.X.length=0}}}),{NONE:0,EXTRUDE_MARKER:2,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30})).LAYER_NODE_TYPE=new Map,Le.LAYER_NODE_TYPE.set(Le.EXTENT_LAYER,Le.EXTENT),Le.LAYER_NODE_TYPE.set(Le.EXTERNAL_MODEL_LAYER,Le.EXTERNAL_MODEL),Le.LAYER_NODE_TYPE.set(Le.MODEL_LAYER,Le.MODEL),Le.LAYER_NODE_TYPE.set(Le.FACILITY_LAYER,Le.FACILITY),Le.LAYER_NODE_TYPE.set(Le.LABEL_LAYER,Le.LABEL),Le.LAYER_NODE_TYPE.set(Le.DOM_MARKER,Le.DOM_MARKER),Le.LAYER_NODE_TYPE.set(Le.DYNAMIC_MODEL_MARKER,Le.DYNAMIC_MODEL_MARKER),Le.LAYER_NODE_TYPE.set(Le.EXTRUDE_MARKER,Le.EXTRUDE_MARKER),Le.LAYER_NODE_TYPE.set(Le.HEAT_MAP_MARKER,Le.HEAT_MAP_MARKER),Le.LAYER_NODE_TYPE.set(Le.LINE_MARKER,Le.LINE_MARKER),Le.LAYER_NODE_TYPE.set(Le.LOCATION_MARKER,Le.LOCATION_MARKER),Le.LAYER_NODE_TYPE.set(Le.POLYGON_MARKER,Le.POLYGON_MARKER),Le.LAYER_NODE_TYPE.set(Le.TEXT_MARKER,Le.TEXT_MARKER),Le.LAYER_NODE_TYPE.set(Le.IMAGE_MARKER,Le.IMAGE_MARKER),Le.LAYER_NODE_TYPE.set(Le.FLOW_LINE_LAYER,Le.FLOW_LINE_MARKER),Le.LAYER_NODE_TYPE.set(Le.FIRE_MARKER,Le.FIRE_MARKER),Le.LAYER_NODE_TYPE.set(Le.WALL_MARKER,Le.WALL_MARKER),Le.LAYER_NODE_TYPE.set(Le.TUBE_MARKER,Le.TUBE_MARKER),Le.LAYER_NODE_TYPE.set(Le.LINE3D_MARKER,Le.LINE3D_MARKER),Le.LAYER_NODE_TYPE.set(Le.SPHERE_MARKER,Le.SPHERE_MARKER),Le),le=function(t,e,i){i=i||2;var r,n,o,s,a,u=e&&e.length,h=u?e[0]*i:t.length,l=ce(t,0,h,i,!0),c=[];if(l&&l.next!==l.prev){if(u&&(l=function(t,e,i,r){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=ce(t,s=e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(function(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}(s));for(a.sort(Ae),n=0;n<a.length;n++)!function(t,e){(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&s<a){if((s=a)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!i)return null;if(n!==s){var u,h=i,l=i.x,c=i.y,f=1/0;for(r=i;n>=r.x&&r.x>=l&&n!==r.x&&de(o<c?n:s,o,l,c,o<c?s:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),we(r,t))&&(u<f||u===f&&(r.x>i.x||r.x===i.x&&function(t,e){return me(t.prev,t,e.prev)<0&&me(e.next,t,t.next)<0}(i,r)))&&(i=r,f=u),(r=r.next)!==h;);}return i}(t,e))&&(t=xe(e,t),fe(e,e.next),fe(t,t.next))}(a[n],i),i=fe(i,i.next);return i}(t,e,l,i)),t.length>80*i){for(var f=r=t[0],A=n=t[1],p=i;p<h;p+=i)(o=t[p])<f&&(f=o),(s=t[p+1])<A&&(A=s),r<o&&(r=o),n<s&&(n=s);a=0!==(a=Math.max(r-f,n-A))?1/a:0}!function t(e,i,r,n,o,s,a){if(e){if(!a&&s){for(var u=e,h=n,l=o,c=s,f=u;null===f.z&&(f.z=pe(f.x,f.y,h,l,c)),f.prevZ=f.prev,f.nextZ=f.next,(f=f.next)!==u;);f.prevZ.nextZ=null,f.prevZ=null;var A,p,d,m,y,g,v,b,w=f,x=1;do{for(p=w,y=w=null,g=0;p;){for(g++,d=p,A=v=0;A<x&&(v++,d=d.nextZ);A++);for(b=x;0<v||0<b&&d;)0!==v&&(0===b||!d||p.z<=d.z)?(p=(m=p).nextZ,v--):(d=(m=d).nextZ,b--),y?y.nextZ=m:w=m,m.prevZ=y,y=m;p=d}}while(y.nextZ=null,x*=2,1<g)}for(var M,_,S=e;e.prev!==e.next;)if(M=e.prev,_=e.next,s?function(t,e,i,r){var n=t.prev,o=t,s=t.next;if(!(0<=me(n,o,s))){for(var a=(n.x<o.x?n.x<s.x?n:s:o.x<s.x?o:s).x,u=(n.y<o.y?n.y<s.y?n:s:o.y<s.y?o:s).y,h=(n.x>o.x?n.x>s.x?n:s:o.x>s.x?o:s).x,l=(n.y>o.y?n.y>s.y?n:s:o.y>s.y?o:s).y,c=pe(a,u,e,i,r),f=pe(h,l,e,i,r),A=t.prevZ,p=t.nextZ;A&&A.z>=c&&p&&p.z<=f;){if(A!==t.prev&&A!==t.next&&de(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=me(A.prev,A,A.next))return;if(A=A.prevZ,p!==t.prev&&p!==t.next&&de(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=me(p.prev,p,p.next))return;p=p.nextZ}for(;A&&A.z>=c;){if(A!==t.prev&&A!==t.next&&de(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=me(A.prev,A,A.next))return;A=A.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&de(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=me(p.prev,p,p.next))return;p=p.nextZ}return 1}}(e,n,o,s):function(t){var e=t.prev,i=t,r=t.next;if(!(0<=me(e,i,r))){for(var n=t.next.next;n!==t.prev;){if(de(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=me(n.prev,n,n.next))return;n=n.next}return 1}}(e))i.push(M.i/r),i.push(e.i/r),i.push(_.i/r),_e(e),e=_.next,S=_.next;else if((e=_)===S){a?1===a?t(e=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next}while(!ye(n,o)&&ge(n,r,r.next,o)&&we(n,o)&&we(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),_e(r),_e(r.next),r=t=o),(r=r.next)!==t);return fe(r)}(fe(e),i,r),i,r,n,o,s,2):2===a&&function(e,i,r,n,o,s){var a=e;do{for(var u,h=a.next.next;h!==a.prev;){if(a.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&ge(i,i.next,t,e))return 1}while((i=i.next)!==t)}(t,e)&&(we(t,e)&&we(e,t)&&function(t,e){for(var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),(i=i.next)!==t;);return r}(t,e)&&(me(t.prev,t,e.prev)||me(t,e.prev,e))||ye(t,e)&&0<me(t.prev,t,t.next)&&0<me(e.prev,e,e.next))}(a,h))return u=xe(a,h),a=fe(a,a.next),u=fe(u,u.next),t(a,i,r,n,o,s),t(u,i,r,n,o,s);h=h.next}}while((a=a.next)!==e)}(e,i,r,n,o,s):t(fe(e),i,r,n,o,s,1);break}}}(l,c,i,f,A,a)}return c};function ce(t,e,i,r,n){var o,s;if(n===0<function(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}(t,e,i,r))for(o=e;o<i;o+=r)s=Me(o,t[o],t[o+1],s);else for(o=i-r;e<=o;o-=r)s=Me(o,t[o],t[o+1],s);return s&&ye(s,s.next)&&(_e(s),s=s.next),s}function fe(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!ye(r,r.next)&&0!==me(r.prev,r,r.next))r=r.next;else{if(_e(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function Ae(t,e){return t.x-e.x}function pe(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function de(t,e,i,r,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(i-s)*(e-a)&&0<=(i-s)*(o-a)-(n-s)*(r-a)}function me(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function ye(t,e){return t.x===e.x&&t.y===e.y}function ge(t,e,i,r){var n=be(me(t,e,i)),o=be(me(t,e,r)),s=be(me(i,r,t)),a=be(me(i,r,e));return n!==o&&s!==a||0===n&&ve(t,i,e)||0===o&&ve(t,r,e)||0===s&&ve(i,t,r)||!(0!==a||!ve(i,e,r))}function ve(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function be(t){return 0<t?1:t<0?-1:0}function we(t,e){return me(t.prev,t,t.next)<0?0<=me(t,e,t.next)&&0<=me(t,t.prev,e):me(t,e,t.prev)<0||me(t,t.next,e)<0}function xe(t,e){var i=new Se(t.i,t.x,t.y),r=new Se(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function Me(t,e,i,r){return t=new Se(t,e,i),r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function _e(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Se(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Be(t){return function(t){if(Array.isArray(t))return Ee(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?Ee(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ee(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var Ce={area:function(t){for(var e=t.length,i=0,r=e-1,n=0;n<e;r=n++)i+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*i},isClockWise:function(t){return Ce.area(t)<0},triangulateShape:function(t,e){var i=[],r=[],n=[],o=(Te(t),Fe(i,t),t.length);e.forEach(Te);for(var s=0;s<e.length;s++)r.push(o),o+=e[s].length,Fe(i,e[s]);for(var a=le(i,r),u=0;u<a.length;u+=3)n.push(a.slice(u,u+3));return n},triangulate:function(t){(n=[]).push.apply(n,Be(t[0]));for(var e=[],i=1;i<t.length;i++){var r=[];r.push.apply(r,Be(t[i])),e.push(r)}if(!Ce.isClockWise(n))for(var n=n.reverse(),o=0,s=e.length;o<s;o++){var a=e[o];Ce.isClockWise(a)&&(e[o]=a.reverse())}return Ce.triangulateShape(n,e)}};function Te(t){var e,i=t.length;2<i&&(i=t[i-1],e=t[0],i.x===e.x)&&i.y===e.y&&t.pop()}function Fe(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Pe(t=function(t,e){if("object"!==Pe(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Pe(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var De=1e-5,Re=.001,Ie=Math.PI/180,Ue=180/Math.PI,Le=function(t,e,i){return e&&Oe(t.prototype,e),i&&Oe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(Le.prototype,{Pt:function(){return De},Ct:function(){return Ie},Vt:function(){return Ue},Lt:function(t){return t<De&&-De<t},Ft:function(t){return De<t},Dt:function(t){return t<-De},Ht:function(t,e,i){return e=(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y),Math.abs(e)<De?0:e},distanceOfTwoPoints:function(t,e){return t&&e?Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)):Number.NaN},distance:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},isPolygonContainPoint:function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].x,o=t[r].y,s=0,a=(r<t.length-1?(s=t[r+1].x,t[r+1]):(s=t[0].x,t[0])).y;if(n===e.x&&o===e.y||s===e.x&&a===e.y)return!0;if(a!==o){var u=n+(e.y-o)*(s-n)/(a-o);if(u===e.x)return!0;n!==s?u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&u!==n&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++):u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++)}}return 0<i%2},Yt:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y))},Nt:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y)||0===this.Ht(i,e,t)&&0===this.Ht(e,r,t)||this.Ht(i,e,t)*this.Ht(e,r,t)<0||this.Ht(t,r,i)*this.Ht(r,e,i)<0)},Xt:function(t,e,i){return!(t.x<e.x||t.y<e.y||t.x>i.x||t.y>i.y)},Ut:function(t,e,i){var r=Math.min(e.x,i.x),n=Math.max(e.x,i.x),o=Math.min(e.y,i.y);e=Math.max(e.y,i.y);return!(t.x<r||t.x>n||t.y<o||t.y>e)},Zt:function(t,e,i){var r=Math.min(i.x,e.x),n=Math.max(i.x,e.x),o=Math.min(i.y,e.y);i=Math.max(i.y,e.y);return!(t.x<r||t.x>n||t.y<o||t.y>i)},Gt:function(t,e,i){for(var r,n,o=!1,s=0;s<i;s++)r=e[s],n=e[(s+1)%i],(r.y<t.y&&n.y>=t.y||n.y<t.y&&r.y>=t.y)&&(r.x<=t.x||n.x<=t.x)&&r.x+(t.y-r.y)/(n.y-r.y)*(n.x-r.x)<t.x&&(o=!o);return o},qt:function(t,e,i){return(t.x-e.x)*(i.y-e.y)==(i.x-e.x)*(t.y-e.y)&&Math.min(e.x,i.x)<=t.x&&t.x<=Math.max(e.x,i.x)&&Math.min(e.y,i.y)<=t.y&&t.y<=Math.max(e.y,i.y)},zt:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},Qt:function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},Wt:function(t,e,i){var r=e.x,n=(e=e.y,i.x),o=(i=i.y,t.x),s=n-r,a=i-e,u=s*s+a*a,h=o-r,l=(t=t.y)-e,c=h*h+l*l;return this.Lt(u)?this.Lt(c)?0:c:(u=Math.sqrt(u),l=this.Ft(a=(s/=u)*h+(h=a/u)*l)?this.Dt(a-u)?(l=o-(r+a*s))*l+(u=t-(e+a*h))*u:(r=o-n)*r+(s=t-i)*s:c,this.Lt(l)?0:l)},Kt:function(t,e,i,r){var n,o=e.x,s=e.y,a=i.x,u=i.y,h=t.x,l=(t=t.y,a-o),c=u-s,f=Math.sqrt(l*l+c*c),A=h-o,p=t-s,d=Math.sqrt(A*A+p*p);return this.Lt(f)?(r.x=e.x,r.y=e.y,this.Lt(n=d)?0:n):(n=this.Ft(c=(l/=f)*A+(A=c/f)*p)?this.Dt(c-f)?(f=h-(p=o+c*l),l=t-(o=s+c*A),s=Math.sqrt(f*f+l*l),r.x=p,r.y=o,s):(c=h-a,A=t-u,f=Math.sqrt(c*c+A*A),r.x=i.x,r.y=i.y,f):(r.x=e.x,r.y=e.y,d),this.Lt(n)?0:n)},Jt:function(t,e){for(var i=0,r=0,n=0,o=0;o<e;o++){var s=t[o],a=t[(o+1)%e],u=(s.x*a.y-s.y*a.x)/2;i+=u,r+=u*(s.x+a.x)/3,n+=u*(s.y+a.y)/3}return{x:r/=i,y:n/=i}},$t:function(t){for(var e=Ce.triangulate([t]),i=0,r=0,n=0,o=0;o<e.length;o++){var s=t[e[o][0]],a=t[e[o][1]],u=t[e[o][2]],h=a.x-s.x,l=a.y-s.y,c=u.x-s.x;i+=h=(h*(u.y-s.y)-c*l)/2,r+=(s.x+a.x+u.x)/3*h,n+=(s.y+a.y+u.y)/3*h}return{x:r/i,y:n/i}},ti:function(t,e){if(e<3)return 0;for(var i=0,r=0;r<e;++r){var n=t[r],o=t[(r+1)%e];i+=n.x*o.y-n.y*o.x}return Math.abs(i/2)},ii:function(t,e,i,r,n){var o,s;return this.Nt(t,e,i,r)?(o=(r.x-i.x)*(t.y-e.y)-(e.x-t.x)*(i.y-r.y),s=(t.y-i.y)*(e.x-t.x)*(r.x-i.x)+i.x*(r.y-i.y)*(e.x-t.x)-t.x*(e.y-t.y)*(r.x-i.x),n.x=s/o,o=(t.x-e.x)*(r.y-i.y)-(e.y-t.y)*(i.x-r.x),s=e.y*(t.x-e.x)*(r.y-i.y)+(r.x-e.x)*(r.y-i.y)*(t.y-e.y)-r.y*(i.x-r.x)*(e.y-t.y),n.y=s/o,1):0},ni:function(t,e,i,r,n){var o=Math.min(i.x,r.x),s=Math.max(i.x,r.x),a=Math.min(i.y,r.y),u=Math.max(i.y,r.y),h=t.x,l=t.y,c=i.x,f=i.y,A=r.x,p=r.y;if(90==e)return!(t.x<o||t.x>s||(Math.abs(s-o<Re)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.x<f?(n.x=c,n.y=f,0):!(p<f&&t.x<p)||(n.x=A,n.y=p,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,d<l||!this.Zt(n,i,r))));if(270==e)return!(t.x<o||t.x>s||(Math.abs(s-o<Re)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.y>p?(n.x=A,n.y=p,0):!(p<f&&t.y>f)||(n.x=c,n.y=f,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,l<d||!this.Zt(n,i,r))));if(270!=e&&90!=e&&Math.abs(s-o<Re)){t=o;var d=Math.tan(e/180*Math.PI)*(t-h)+l;if(n.y=d,n.x=t,this.Zt(n,i,r))return s=d-l,0<(o=t-h)/Math.sqrt(o*o+s*s)*Math.cos(e/180*Math.PI)}return Math.abs(u-a<=Re)?(d=a,t=1/Math.tan(e/180*Math.PI)*(d-l)+h,n.x=t,n.y=d,!!this.Zt(n,i,r)&&(o=d-l,0<(s=t-h)/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI))):(t=l+(u=Math.tan(e/180*Math.PI))*((d=(f-l-((a=(p-f)/(A-c))*c-u*h))/(u-a))-h),n.x=d,n.y=t,!!this.Zt(n,i,r)&&(s=d-h,o=t-l,Math.abs(s)<=Re&&Math.abs(o)<=Re||0<s/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI)))},si:function(t,e){return Math.abs(t.x-e.x)<De&&Math.abs(t.y-e.y)<De},ri:function(t,e,i,r){var n,o,s,a,u=t.x,h=t.y,l=e.x,c=e.y,f=i.x,A=i.y;return this.si(t,e)||this.si(t,i)?(r.x=u,r.y=h,!0):(s=Math.min(e.x,i.x),a=Math.max(e.x,i.x),n=Math.min(e.y,i.y),o=Math.max(e.y,i.y),Math.abs(l-f)<1e-5?(r.x=l,n<=(r.y=h)&&h<=o):Math.abs(c-A)<1e-5?(r.x=u,r.y=c,s<=u&&u<=a):(a=h+(n=-1/((A-c)/(f-l)))*((s=(c-h-((o=(A-c)/(f-l))*l-n*u))/(n-o))-u),r.x=s,r.y=a,!!this.Zt(r,e,i)||!(!this.si(t,e)&&!this.si(t,i))))},ei:function(t,e){return{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}},hi:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},oi:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},ui:function(t,e){return t.x*e.x+t.y*e.y},ai:function(t,e){return t.x*e.y-t.y*e.x},ci:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},fi:function(t,e){var i,r;return 0==t.x&&0==t.y||0==e.x&&0==e.y?0:(i={x:t.x,y:t.y,z:0},r={x:e.x,y:e.y,z:0},i=this.ei(i,r),r=this.ui(t,e),r=Math.acos(r/(this.ci(t)*this.ci(e))),0<i.z?r/Math.PI*180:360-r/Math.PI*180)},li:function(t,e,i,r){for(var n=0;n<i.length;n++){var o=i[n],s=i[(n+1)%i.length];if(1==this.ii(t,e,o,s,r))return!0}return!1},vi:function(t,e,i,r,n){var o=Math.min(t.x,i.x,r.x),s=Math.max(t.x,i.x,r.x),a=Math.min(t.y,i.y,r.y),u=Math.max(t.y,i.y,r.y);s=Math.sqrt((s-o)*(s-o)+(u-a)*(u-a)),o=e/180*Math.PI,u=s*Math.cos(o)+t.x,a=s*Math.sin(o)+t.y;return 1==this.ii(t,{x:u,y:a},i,r,n)},di:function(t){for(var e={x:null,y:null},i=0,r=0,n=0;n<t.length;n++)i+=t[n].x,r+=t[n].y;return e.x=i/t.length,e.y=r/t.length,e},yi:function(t,e,i,r){var n=[],o=t.x-e,s=t.x+e,a=t.y-e,u=t.y+e,h=Math.min(i.x,r.x),l=Math.max(i.x,r.x),c=Math.min(i.y,r.y),f=Math.max(i.y,r.y);return l<o||s<h||f<a||u<c||(o=r.x-i.x,s=r.y-i.y,(a=(t=(o*(a=t.x-i.x)+s*(u=t.y-i.y))/(r=o*o+s*s))*t-(a*a+u*u-e*e)/r)<0)||(u=Math.sqrt(a),r={x:i.x-o*(e=-t+u),y:i.y-s*e},o={x:i.x-o*(a=-t-u),y:i.y-s*a},e!==a&&(h<=r.x&&r.x<=l&&c<=r.y&&r.y<=f&&n.push(r),h<=o.x)&&o.x<=l&&c<=o.y&&o.y<=f&&n.push(o)),n},pi:function(t,e,i){var r,n={};if(t.x!=e.x)return r=e=(e.y-t.y)/(e.x-t.x),e=t.y-e*t.x,n.x=(+i.x- -1*r*i.y-r*e)/(r*r+1),n.y=(r*r*i.y- -1*r*i.x- -1*e)/(r*r+1),n;n.x=t.x,n.y=i.y},mi:function(t,e,i,r){var n,o,s,a,u={point:null,isintersect:!1};return t==i||t==r?(u.isintersect=!0,u.point=t):e==i||e==r?(u.isintersect=!0,u.point=e):(n={x:e.x-t.x,y:e.y-t.y},o={x:r.x-i.x,y:r.y-i.y},s={x:i.x-t.x,y:i.y-t.y},r={x:r.x-t.x,y:r.y-t.y},e={x:e.x-i.x,y:e.y-i.y},i={x:-s.x,y:-s.y},a=this.ai(o,n),Math.abs(a)<=1e-5||this.ai(s,n)*this.ai(r,n)<=5e-4&&this.ai(i,o)*this.ai(e,o)<5e-4&&(r=this.ai(o,s)/a,u.point={x:t.x+n.x*r,y:t.y+n.y*r},u.isintersect=!0)),u},Mi:function(t,e,i){t.x===e.x&&(e.x=e.x+1),t.y===e.y&&(e.y=e.y+1),e.x===i.x&&(i.x=i.x+1),e.y===i.y&&(i.y=i.y+1);var r=e.x-t.x,n=(t=e.y-t.y,i.x-e.x);return!(0<r*(i.y-e.y)-t*n)},getAngle:function(t){var e=t.p1,i=(t=t.p2).x-e.x;t=t.y-e.y,e=Math.sqrt(i*i+t*t),e=Math.asin(Math.abs(t)/e);return 0<i&&0<t?e:i<0&&0<t?Math.PI-e:i<0&&t<0?Math.PI+e:0<i&&t<0?2*Math.PI-e:0==i&&0<t?e:0==i&&t<0?3*Math.PI/2:0<i&&0==t?e:i<0&&0==t?Math.PI:null},bi:function(t){var e=this.distanceOfTwoPoints(t[0],t[1]),i=this.distanceOfTwoPoints(t[1],t[2]),r=(e+i+(t=this.distanceOfTwoPoints(t[0],t[2])))/2;return Math.sqrt(r*(r-e)*(r-i)*(r-t))},wi:function(t,e){var i,r,n,o,s;return this.Kt(t,e[0],e[1],{})<1e-4||this.Kt(t,e[0],e[2],{})<1e-4||this.Kt(t,e[1],e[2],{})<1e-4||(o={x:e[1].x-e[0].x,y:e[1].y-e[0].y},i={x:e[0].x-e[2].x,y:e[0].y-e[2].y},r={x:e[2].x-e[1].x,y:e[2].y-e[1].y},s={x:t.x-e[0].x,y:t.y-e[0].y},n={x:t.x-e[1].x,y:t.y-e[1].y},t={x:t.x-e[2].x,y:t.y-e[2].y},e=this.ai(o,s),o=this.ai(r,n),s=this.ai(i,t),De<e*o&&De<o*s)},gi:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null,type:0,outer:null},o=[];if(this.wi(t,i)&&(n.start=t),this.wi(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0,n.type=1;else{for(var s=(i[1].x+i[2].x)/2,a=(i[1].y+i[2].y)/2,u=1;u<r;u++){var h,l=this.mi(t,e,i[u-1],i[u]);if(l.isintersect){if(null!=n.start)return n.end=l.point,n.isintersect=!0,n.outer="end",h=this.fi({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;if(null!=n.end)return n.start=l.point,n.isintersect=!0,n.outer="start",h=this.fi({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;o.push(l)}}var c,f=this.mi(t,e,i[0],i[r-1]);if(f.isintersect){if(null!=n.start)return n.end=f.point,n.isintersect=!0,n.outer="end",c=this.fi({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;if(null!=n.end)return n.start=f.point,n.isintersect=!0,n.outer="start",c=this.fi({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;o.push(f)}2!=o.length||this.distanceOfTwoPoints(o[0].point,o[1].point)<.01||(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?(n.start=o[0].point,n.end=o[1].point):(n.start=o[1].point,n.end=o[0].point),n.isintersect=!0,n.type=4)}return n},Ai:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null},o=[];if(this.wi(t,i)&&(n.start=t),this.wi(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0;else{for(var s=1;s<r;s++){var a=this.mi(t,e,i[s-1],i[s]);if(a.isintersect){if(null!=n.start)return n.end=a.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(a)}}var u=this.mi(t,e,i[0],i[r-1]);if(u.isintersect){if(null!=n.start)return n.end=u.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(u)}2==o.length&&(n.start=(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.end=(this.distanceOfTwoPoints(o[0].point,t)>this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.isintersect=!0)}return n},Ei:function(t,e){if(0==e.length)return[t];var i,r,n=this.Si(e),o=[],s=(n.sort(function(e,i){var r=(e.Ri.x-t.Ri.x)*(e.Ri.x-t.Ri.x)+(e.Ri.y-t.Ri.y)*(e.Ri.y-t.Ri.y),n=(i.Ri.x-t.Ri.x)*(i.Ri.x-t.Ri.x)+(i.Ri.y-t.Ri.y)*(i.Ri.y-t.Ri.y);e=(e.xi.x-t.Ri.x)*(e.xi.x-t.Ri.x)+(e.xi.y-t.Ri.y)*(e.xi.y-t.Ri.y),i=(i.xi.x-t.Ri.x)*(i.xi.x-t.Ri.x)+(i.xi.y-t.Ri.y)*(i.xi.y-t.Ri.y);return(r<e?r:e)<(n<i?n:i)}),0);for(s=0;s<n.length;s++)this.distanceOfTwoPoints(n[s].Ri,n[s].xi)<.01||(i=this.distanceOfTwoPoints(n[s].Ri,t.Ri),r=this.distanceOfTwoPoints(n[s].xi,t.Ri),i<.01?t.Ri=n[s].xi:r<.01?t.Ri=n[s].Ri:i<r?.1<this.distanceOfTwoPoints(t.Ri,n[s].Ri)&&(o.push({ji:t.ji,Ri:t.Ri,xi:n[s].Ri,zt:t.zt,Oi:t.Oi}),t.Ri=n[s].xi):.1<this.distanceOfTwoPoints(t.Ri,n[s].xi)&&(o.push({ji:t.ji,Ri:t.Ri,xi:n[s].xi,zt:t.zt,Oi:t.Oi}),t.Ri=n[s].Ri),n.splice(s,1));return.1<this.distanceOfTwoPoints(t.Ri,t.xi)&&o.push(t),o},Si:function(t){var e=[];if(1==t.length)return t;for(var i=t[0],r=1;0<t.length;){if(r>=t.length){if(e.push(i),t.splice(0,1),t.length<1)break;i=t[0],r=1}if(1===t.length){e.push(i);break}this.Ti(i.Ri,i.xi,t[r].Ri)?(this.Ti(i.Ri,i.xi,t[r].xi)||(i.xi=t[r].xi),t.splice(r,1)):this.Ti(i.Ri,i.xi,t[r].xi)?(i.Ri=t[r].Ri,t.splice(r,1)):this.Ti(t[r].Ri,t[r].xi,i.Ri)?(this.Ti(t[r].Ri,t[r].xi,i.xi)||(t[r].xi=i.xi),i=t[r],t.splice(r,1)):this.Ti(t[r].Ri,t[r].xi,i.xi)?(t[r].Ri=i.Ri,i=t[r],t.splice(r,1)):r++}return e},Ti:function(t,e,i){var r=t.x-i.x,n=t.y-i.y,o=e.x-i.x,s=e.y-i.y,a=this.distanceOfTwoPoints(t,i);i=this.distanceOfTwoPoints(e,i),t=this.distanceOfTwoPoints(t,e);return r*s-n*o<1e-5&&a+i-t<.001}});var ke=new Le;function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===je(t=function(t,e){if("object"!==je(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==je(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ne(t=function(t,e){if("object"!==Ne(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ne(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Le=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.P=e,this.$=this.P.getContainer(),this.ki={border:"border:2px solid #0000FF",backgroundColor:null,opacity:null},this.Bi=[he.MODEL,he.FACILITY,he.LABEL,he.EXTERNAL_MODEL],this.Ii=0,this._i=!1,this.tt=this.tt.bind(this),this.it=this.it.bind(this),this.nt=this.nt.bind(this),this.Pi=null,this.Ci=null,this.rt=new ee,this.Vi=new fengmap.FMSearchAnalyser({map:this.P}),this.ot()}var e,i;return e=t,(i=[{key:"dispose",value:function(){this.$.removeEventListener("mousedown",this.tt,!1),document.removeEventListener("mousemove",this.it,!1),document.removeEventListener("mouseup",this.nt,!1),this.Vi.dispose()}},{key:"boxStyle",get:function(){return this.ki},set:function(t){this.ki=t}},{key:"enable",get:function(){return this._i},set:function(t){this._i=t}},{key:"mouseKey",get:function(){return 0===this.Ii?"left":"right"},set:function(t){this.Ii="left"===t?0:2}},{key:"types",get:function(){return this.Bi},set:function(t){this.Bi=t}},{key:"on",value:function(t,e){this.rt.k(t,e)}}])&&Qe(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign(Le.prototype,{ot:function(){this.P.getRenderManager().renderer.domElement.style.left="0px",this.$.addEventListener("mousedown",this.tt,!1),document.addEventListener("mousemove",this.it,!1),document.addEventListener("mouseup",this.nt,!1)},Li:function(t){return{x:t.getBoundingClientRect().left,y:t.getBoundingClientRect().top}},tt:function(t){var e,i;this._i&&t.button===this.Ii&&(this.Pi&&this.Pi.parentNode&&(this.Pi.parentNode.removeChild(this.Pi),this.Pi=null),e=this.Li(this.P.getRenderManager().renderer.domElement),i=t.clientX-e.x,t=t.clientY-e.y,this.Ci={x:i,y:t},this.wt(!1),this.Pi=document.createElement("div"),this.Pi.style.cssText="position:absolute;top:"+t+"px;left:"+i+"px;width:0px;height:0px;"+this.ki.border+";",this.$.appendChild(this.Pi),this.ki.backgroundColor&&(this.Pi.style.backgroundColor=this.ki.backgroundColor),void 0!==this.ki.opacity)&&null!==this.ki.opacity&&(this.Pi.style.opacity=this.ki.opacity)},it:function(t){var e,i;this._i&&null!==this.Ci&&(e=this.Li(this.P.getRenderManager().renderer.domElement),i=t.clientX-e.x,t=t.clientY-e.y,i<this.Ci.x&&(this.Pi.style.left=i+"px"),t<this.Ci.y&&(this.Pi.style.top=t+"px"),this.Pi.style.width=Math.abs(i-this.Ci.x)+"px",this.Pi.style.height=Math.abs(t-this.Ci.y)+"px")},nt:function(t){var e=this;if(this._i&&null!==this.Pi&&t.button===this.Ii){this.wt(!0);var i=this.Fi(),r=[],n=this.P.getMapOptions(),o=[],s=[];if(n.buildings&&0<n.buildings.length)for(var a=0;a<n.buildings.length;a++)!function(t){for(var r=(t=e.P.getBuilding(t).bound).min,n=(t=t.max,[{x:r.x,y:r.y},{x:r.x,y:t.y},{x:t.x,y:t.y},{x:t.x,y:r.y}]),o=0;o<n.length;o++)if(ke.Gt(n[o],i,i.length))return 1;for(var s=0;s<i.length;s++)if(ke.Gt(i[s],n,n.length))return 1;for(var a=0;a<i.length-1;a++){for(var u=i[a],h=i[a+1],l=0;l<n.length-1;l++){var c=n[l],f=n[l+1];if(ke.Nt(u,h,c,f))return 1}var A=n[n.length-1],p=n[0];if(ke.Nt(u,h,p,A))return 1}for(var d=i[0],m=i[i.length-1],y=0;y<n.length-1;y++){var g=n[y],v=n[y+1];if(ke.Nt(d,m,g,v))return 1}if(t=n[n.length-1],r=n[0],ke.Nt(d,m,r,t))return 1}(n.buildings[a].bid)||(o.push(n.buildings[a].mid),s.push(n.buildings[a].bid));for(var u=[],h=0;h<this.Bi.length;h++){for(var l=new fengmap.FMSearchRequest,c=(l.levels=[this.P.getBuilding(n.buildingID).level],l.type=this.Bi[h],l.addCondition({polygon:i}),[]),f=0;f<s.length;f++)c.push({buildingID:s[f],levels:[this.P.getBuilding(s[f]).level]});0<c.length&&(l.buildings=c),u.push(l)}this.Ci=null,this.Pi.parentNode&&this.Pi.parentNode.removeChild(this.Pi),this.Pi=null;var A,p=0;A=null,function t(){var n;p<u.length?(n=u[p],e.Vi.query(n,function(e){r.push({type:n.type,children:e}),p++,A=setTimeout(t(),1)})):(null!==A&&clearTimeout(A),e.rt._({type:"boxselected",targets:r,coords:i}))}()}},wt:function(t){var e=this.P.getInteracations();e.enableDrag=t,e.enableRotate=t,e.enableTilt=t,e.enableZoom=t},Fi:function(){for(var t=[],e=this.Pi.getBoundingClientRect(),i=(r=this.Li(this.P.getRenderManager().renderer.domElement)).x,r=r.y,n=(t.push({x:e.left-i,y:e.top-r}),t.push({x:e.right-i,y:e.top-r}),t.push({x:e.right-i,y:e.bottom-r}),t.push({x:e.left-i,y:e.bottom-r}),[]),o=0;o<t.length;o++){var s=fengmap.FMUtil.coordsScreenToMap(this.P,t[o]);n.push(s)}return n}});var He=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,i;return e=t,i=[{key:"round",value:function(t){return 0<t.toFixed(2)?Math.ceil(t.toFixed(2)):Math.floor(t.toFixed(2))}},{key:"generateUUID",value:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);var i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;i=t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&r]+t[r>>8&255]+"-"+t[r>>16&15|64]+t[r>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&o]+t[o>>8&255]+t[o>>16&255]+t[o>>24&255];return t.length=0,i.toUpperCase()}},{key:"findNearNthPowerOfTwo",value:function(t){return t-=1,(t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)<0?1:1+t}},{key:"rgbToArray",value:function(t){var e=new L;return e.setStyle(t),[e.r,e.g,e.b]}},{key:"toRgba",value:function(t){var e;return void 0===t?t:"number"!=typeof t?3<=(e=t.split(",")).length?"rgba("+parseInt(e[0])+","+parseInt(e[1])+","+parseInt(e[2])+",1)":t:"rgba("+parseInt(255*new L(t).r)+","+parseInt(255*new L(t).g)+","+parseInt(255*new L(t).b)+",1)"}},{key:"toColor",value:function(t){var e;return"number"==typeof t?t:3<=(e=t.split(",")).length?parseInt(e[0])<<16|parseInt(e[1])<<8|parseInt(e[2]):0}}],null&&ze(e.prototype,null),i&&ze(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ve(t=function(t,e){if("object"!==Ve(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ve(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Ke(){return(Ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xe(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function Ye(t,e){return(Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var We=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Xe(t);if(i=e?(i=Xe(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Ve(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this,t)).info2=t,e.id=""+He.generateUUID(),e.shapetype2="point",e.opetype2="no",t.opetype&&(e.opetype2=t.opetype,e.shapetype2="no"),e.mapEdit=null,e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"info",get:function(){return this.info2.id=this.id,this.info2.x=this.u,this.info2.y=this.v,this.info2.height=this._height,this.info2.shapetype=this.shapetype,this.info2.level=this.level,this.info2}},{key:"opetype",get:function(){if(this.opetype2)return{node:this.getRenderNode(),type:this.opetype2}}},{key:"shapetype",get:function(){return this.shapetype2}},{key:"deleteMarker",value:function(){Ke(Xe(r.prototype),"remove",this).call(this)}}])&&Ge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(fengmap.FMImageMarker);function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===qe(t=function(t,e){if("object"!==qe(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==qe(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Je(){return(Je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ti(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function $e(t,e){return($e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ei=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ti(t);if(i=e?(i=ti(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===qe(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this,t)).info2=t,e.shapetype2="polygon",e.id=""+He.generateUUID(),t.shapetype&&(e.shapetype2=t.shapetype),e.mapEdit=null,e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"info",get:function(){return this.info2.id=this.id,this.info2.shapetype=this.shapetype2,this.info2.level=this.level,this.info2.buildingID=this.parent.parent.parent.buildingID,this.info2}},{key:"shapetype",get:function(){return this.shapetype2}},{key:"deleteMarker",value:function(){Je(ti(r.prototype),"remove",this).call(this),null!==this.mapEdit&&this.mapEdit._t(this.id)}}])&&Ze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(fengmap.FMPolygonMarker);function ii(t){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ii(t=function(t,e){if("object"!==ii(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ii(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function ni(){return(ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=si(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function oi(t,e){return(oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ai=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oi(e,t);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=si(t);if(i=e?(i=si(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===ii(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this,t)).shapetype2="line",e.info2=t,e.id=""+He.generateUUID(),e.mapEdit=null,e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"info",get:function(){return this.info2.id=this.id,this.info2.points=this.points,this.info2.shapetype=this.shapetype,this.info2.level=this.segments[0].level,this.info2.buildingID=this.segments[0].buildingID,this.info2}},{key:"points",get:function(){return 0===this.segments.length?[]:this.segments[0].points}},{key:"shapetype",get:function(){return this.shapetype2}},{key:"deleteMarker",value:function(){ni(si(r.prototype),"remove",this).call(this),null!==this.mapEdit&&this.mapEdit._t(this.id)}}])&&ri(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(fengmap.FMLineMarker);function ui(t){return(ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ui(t=function(t,e){if("object"!==ui(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ui(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var li=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.P=e.map,this.$=this.P.getContainer(),this.Di=e.highlightColor,void 0===this.Di&&(this.Di="#FF0000"),this.Hi=e.radius,void 0===this.Hi&&(this.Hi=1),this.it=this.it.bind(this),this.st=new P,this.st.params.Line.threshold=this.Hi,this.rt=new ee,this.Yi=[],this.Ni={},this.ot()}var e,i;return e=t,(i=[{key:"removeTargets",value:function(){for(var t=0;t<this.Yi.length;t++)this.Yi[t].parent.remove(this.Yi[t]);this.Ni={},this.Yi.length=0}},{key:"addTargets",value:function(t){this.removeTargets();for(var e=0;e<t.length;e++)if(t[e].type===fengmap.FMType.LINE_MARKER){for(var i=t[e].segments[0].points,r=[],n=0;n<i.length;n++)r.push(new h(i[n].x-this.P.x,i[n].z,-i[n].y+this.P.y));var o=new Kt({visible:!1});(o=new Jt((new Ht).setFromPoints(r),o)).myobject=t[e],o.mapNode=t[e],t[e].parent.scene.add(o),this.Yi.push(o)}else if(t[e].type===fengmap.FMType.POLYGON_MARKER&&t[e].getRenderNode()){this.Ni[""+t[e].id]={borderColor:t[e].borderColor,color:t[e].color};for(var s=t[e].points,a=[],u=0;u<s.length;u++)a.push(new h(s[u].x-this.P.x,t[e].height,-s[u].y+this.P.y));o=new Kt({visible:!1});var l=new Jt((new Ht).setFromPoints(a),o);l.myobject=t[e],l.mapNode=t[e],t[e].getRenderNode().parent.add(l),this.Yi.push(l)}}},{key:"dispose",value:function(){this.removeTargets(),this.Yi.length=0,this.$.removeEventListener("mousemove",this.it,!1)}},{key:"radius",get:function(){return this.Hi},set:function(t){this.Hi=t,this.st.params.Line.threshold=this.Hi}},{key:"on",value:function(t,e){this.rt.k(t,e)}}])&&hi(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ci(t){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,s,a=[],u=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;u=!1}else for(;!(u=(r=o.call(i)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,n=t}finally{try{if(!u&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(h)throw n}}return a}}(t,e)||pi(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ai(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=pi(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pi(t,e){var i;if(t)return"string"==typeof t?di(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?di(t,e):void 0}function di(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function mi(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ci(t=function(t,e){if("object"!==ci(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ci(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Object.assign(li.prototype,{ot:function(){this.$.addEventListener("mousemove",this.it,!1)},it:function(t){if(0!==this.Yi.length){for(var e=this,i=new v,r=this.$.getBoundingClientRect(),n=(i=(i.x=(t.clientX-r.left)/r.width*2-1,i.y=-(t.clientY-r.top)/r.height*2+1,this.st.setFromCamera(i,this.P.camera),t.clientX-r.left),t=t.clientY-r.top,r=fengmap.FMUtil.coordsScreenToMap(this.P,{x:i,y:t}),this.st.intersectObjects(function(){for(var t=[],i=0;i<e.Yi.length;i++)e.Yi[i].mapNode&&e.Yi[i].mapNode.level&&e.Yi[i].mapNode.level===e.P.getLevel()&&t.push(e.Yi[i]);return t}(this.Yi),!0)),o=[],s=[],a=0;a<n.length;a++)!function(t,e){for(var i=!0,r=0;r<t.length;r++)if(t[r].uuid===e.uuid){i=!1;break}return i}(o,n[a].object)||(o.push(n[a].object),s.push(n[a].point));var u=[],h=[];if(0<o.length){for(var l=0;l<o.length;l++){u.push(o[l].myobject);var c=s[l];h.push({x:c.x+this.P.x,y:this.P.y-c.z})}for(var f=r,A=u,p=h,d=0;d<A.length-1;d++)for(var m=0;m<A.length-1-d;m++){var y=Math.sqrt((A[m].x-f.x)*(A[m].x-f.x)+(A[m].y-f.y)*(A[m].y-f.y));Math.sqrt((A[m+1].x-f.x)*(A[m+1].x-f.x)+(A[m+1].y-f.y)*(A[m+1].y-f.y))<y&&(y=A[m],A[m]=A[m+1],A[m+1]=y,y=p[m],p[m]=p[m+1],p[m+1]=y)}}0===u.length&&(h=u=null);for(var g=0;g<this.Yi.length;g++){var b=this.Ni[""+this.Yi[g].myobject.id];b&&(this.Yi[g].myobject.color=b.color,this.Yi[g].myobject.borderColor=b.borderColor)}null!==u&&u[0].type===fengmap.FMType.POLYGON_MARKER&&(u[0].color=this.Di,u[0].borderColor=this.Di),this.rt._({type:"snap",coords:r,targets:u,targetsCoords:h,level:this.P.getLevel()})}}});var yi=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.P=e.map,this.Xi=e.defaultStyle,this.Ui=e.isdirect,this.Zi=new Map,this.Gi=new Map,this.qi=new Map,this.zi=this.zi.bind(this),this.P.on("beforeRender",this.zi)}var e,i;return e=t,(i=[{key:"add",value:function(t){var e=this;if(void 0===t.buildingID&&(t.buildingID=this.P.getMapOptions().mapID),void 0===t.type&&(t.type=1),void 0===t.levels){t.levels=[];for(var i=this.P.getBuilding(t.buildingID).getFloorInfos(),r=0;r<i.length;r++)t.levels.push(i[r].level)}for(var n=t.result,o=t.levels,s=t.roadRanks,a=0;a<o.length;a++)for(var u=0;u<s.length;u++)for(var h=function(t,e,i){for(var r=[],n=0;n<t.length;n++)if(""+t[n].level==""+e)for(var o=t[n].roadVector,s=0;s<o.length;s++)""+o[s].roadRank==""+i&&r.push(o[s]);return r}(n,o[a],s[u]),l=(y=p=l=void 0,t.type),c=o[a],f=t.height,A=s[u],p=h,d=t.zoomRange,m=e.Qi(A),y=0;y<p.length;y++)p[y].buildingID||(p[y].buildingID=e.P.getMapOptions().mapID),""+l=="1"?(e.Wi(m,c,f,A,p[y].startPoint,p[y].startId,d,p[y].buildingID),e.Wi(m,c,f,A,p[y].endPoint,p[y].endId,d,p[y].buildingID),e.Ki(m,c,f,A,p[y].startPoint,p[y].endPoint,d,p[y].buildingID,p[y].roadEntry)):""+l=="2"?e.Ki(m,c,f,A,p[y].startPoint,p[y].endPoint,d,p[y].buildingID,p[y].roadEntry):""+l=="3"&&(e.Wi(m,c,f,A,p[y].startPoint,p[y].startId,d,p[y].buildingID),e.Wi(m,c,f,A,p[y].endPoint,p[y].endId,d,p[y].buildingID))}},{key:"getNaviLineByRanks",value:function(t){return this.Ji(t,this.Gi)}},{key:"getNaviNodeByRanks",value:function(t){return this.Ji(t,this.Zi)}},{key:"remove",value:function(t){for(var e=this,i=(void 0===t.buildingID&&(t.buildingID=this.P.getMapOptions().mapID),t.type),r=(void 0===i&&(i=1),t.levels),n=t.roadRanks,o=0;o<r.length;o++)for(var s=0;s<n.length;s++)""+i=="1"?(a(r[o],n[s]),u(r[o],n[s])):""+i=="2"?a(r[o],n[s]):""+i=="3"&&u(r[o],n[s]);function a(i,r){for(var n=e.Gi.get(t.buildingID+""+i),o=h(n,r);-1!==o;)n[o].object.remove(),n.splice(o,1),o=h(n,r);var s=e.qi.get(t.buildingID+""+i);if(s)for(o=h(s,r);-1!==o;)s[o].object.remove(),s.splice(o,1),o=h(s,r)}function u(i,r){for(var n=e.Zi.get(t.buildingID+""+i),o=h(n,r);-1!==o;)n[o].object.remove(),n.splice(o,1),o=h(n,r)}function h(t,e){for(var i=-1,r=0;r<t.length;r++)if(""+t[r].roadRank==""+e){i=r;break}return i}}},{key:"changeVisible",value:function(t){}},{key:"dispose",value:function(){var t,e=Ai(this.Zi);try{for(e.s();!(t=e.n()).done;){for(var i=fi(t.value,2),r=(i[0],i[1]),n=0;n<r.length;n++)r[n].object.remove();r.length=0}}catch(t){e.e(t)}finally{e.f()}var o,s=Ai(this.Gi);try{for(s.s();!(o=s.n()).done;){for(var a=fi(o.value,2),u=(a[0],a[1]),h=0;h<u.length;h++)u[h].object.remove();u.length=0}}catch(t){s.e(t)}finally{s.f()}var l,c=Ai(this.qi);try{for(c.s();!(l=c.n()).done;){for(var f=fi(l.value,2),A=(f[0],f[1]),p=0;p<A.length;p++)A[p].object.remove();A.length=0}}catch(t){c.e(t)}finally{c.f()}this.qi.clear(),this.Gi.clear(),this.Zi.clear(),this.P.on("beforeRender",this.zi)}}])&&mi(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),gi=(Object.assign(yi.prototype,{Qi:function(t){for(var e=null,i=0;i<this.Xi.length;i++)if(""+this.Xi[i].roadRank==""+t){e=this.Xi[i];break}return e},Ki:function(t,e,i,r,n,o,s,a,u){var h,l=this,c=((h=((h=new fengmap.FMSegment).points=[{x:n.x,y:n.y,z:i},{x:o.x,y:o.y,z:i}],h.level=e,h.buildingID=a,new fengmap.FMLineMarker({segments:[h],width:t.lineWidth,color:t.lineColor,type:fengmap.FMLineType.FULL}))).addTo(this.P),this.Gi.get(a+""+e));function f(n,o){var s=new fengmap.FMSegment;(n=((o=(s.points=[{x:n.p1.x,y:n.p1.y,z:i},{x:o.x,y:o.y,z:i},{x:n.p2.x,y:n.p2.y,z:i}],s.level=e,s.buildingID=a,new fengmap.FMLineMarker({segments:[s],width:t.lineWidth,color:t.lineColor,type:fengmap.FMLineType.FULL,smooth:!1}))).addTo(l.P),l.qi.get(a+""+e)))?n.push({roadRank:r,object:o}):l.qi.set(a+""+e,[{roadRank:r,object:o}])}function A(t,e){var i=(t.x+e.x)/2,r=(t=(t.y+e.y)/2,Math.PI/4);return{p1:{x:(i-e.x)*Math.cos(r)-(t-e.y)*Math.sin(r)+e.x,y:(t-e.y)*Math.cos(r)+(i-e.x)*Math.sin(r)+e.y},p2:{x:(i-e.x)*Math.cos(2*Math.PI-r)-(t-e.y)*Math.sin(2*Math.PI-r)+e.x,y:(t-e.y)*Math.cos(2*Math.PI-r)+(i-e.x)*Math.sin(2*Math.PI-r)+e.y}}}c?c.push({roadRank:r,object:h,zoomRange:s}):this.Gi.set(a+""+e,[{roadRank:r,object:h,zoomRange:s}]),this.Ui&&(c={x:(n.x+o.x)/2,y:(n.y+o.y)/2},h={x:(n.x+c.x)/2,y:(n.y+c.y)/2},s={x:(o.x+c.x)/2,y:(o.y+c.y)/2},""+u=="1"?f(A(h,c),c):""+u=="2"?f(A(s,c),c):""+u=="3"&&(f(A(h,c),c),f(A(s,c),c)))},Wi:function(t,e,i,r,n,o,s,a){var u;this.$i(a+""+e,o)&&(u={x:n.x,y:n.y},u={points:fengmap.FMCalculator.rectangleBuilder(t.pointSize,t.pointSize,u),x:n.x,y:n.y,height:i,color:t.pointColor,borderWidth:0,opacity:1},n=this.P.getBuilding(a).getFloor(e),(i=new fengmap.FMPolygonMarker(u)).addTo(n),i.id=o,(t=this.Zi.get(a+""+e))?t.push({roadRank:r,object:i,zoomRange:s}):this.Zi.set(a+""+e,[{roadRank:r,object:i,zoomRange:s}]))},$i:function(t,e){var i,r=!0,n=Ai(this.Zi);try{for(n.s();!(i=n.n()).done;){var o=fi(i.value,2),s=o[0],a=o[1];if(""+s==""+t)for(var u=0;u<a.length;u++)if(""+a[u].object.id==""+e){r=!1;break}if(!r)break}}catch(t){n.e(t)}finally{n.f()}return r},tn:function(t,e){for(var i=!1,r=0;r<e.length;r++)if(""+e[r]==""+t){i=!0;break}return i},zi:function(){for(var t=this.P.camera,e=this.P.getVisibleLevels(),i=this.P.getZoom(),r=0;r<e.length;r++){var n=this.P.getFloor(e[r]),o=this.Gi.get(""+e[r]);if(o)for(var s,a,u=0;u<o.length;u++)i<o[u].zoomRange[0]||i>o[u].zoomRange[1]?o[u].object.parent&&o[u].object.remove():(s=new h((a=o[u].object.segments[0].points)[0].x-this.P.x,a[0].z+n.height,-a[0].y+this.P.y),a=new h(a[1].x-this.P.x,a[1].z+n.height,-a[1].y+this.P.y),s=s.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix),a=a.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix),(1<Math.abs(s.x)||1<Math.abs(s.y)||1<Math.abs(s.z))&&(1<Math.abs(a.x)||1<Math.abs(a.y)||1<Math.abs(a.z))?o[u].object.parent&&o[u].object.remove():o[u].object.parent||o[u].object.addTo(this.P));var l=this.Zi.get(""+e[r]);if(l)for(var c=0;c<l.length;c++){var f,A=l[c].object;i<l[c].zoomRange[0]||i>l[c].zoomRange[1]?A.parent&&A.remove():(f=new h(A.x-this.P.x,A.height+n.height,-A.y+this.P.y).applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix),1<Math.abs(f.x)||1<Math.abs(f.y)||1<Math.abs(f.z)?A.parent&&A.remove():A.parent||A.addTo(n))}}this.P.enableUpdateRender()},Ji:function(t,e){var i=t.roadRanks,r=t.levels;if(void 0===t.buildingID&&(t.buildingID=this.P.getMapOptions().mapID),void 0===r){r=[];for(var n=this.P.getBuilding(t.buildingID).getFloorInfos(),o=0;o<n.length;o++)r.push(n[o].level)}for(var s=[],a=0;a<r.length;a++){var u=e.get(t.buildingID+""+r[a]);if(u)for(var h=0;h<u.length;h++)this.tn(u[h].roadRank,i)&&s.push(u[h].object)}return s}}),"v3.1.4"),vi=window.fengmap||{};vi.VERSION=gi,vi.BUILD=70,vi.FMMapEditor=i,vi.FMBoxSelectTool=Le,vi.FMImageMarkerEdit=We,vi.FMPolygonMarkerEdit=ei,vi.FMLineMarkerEdit=ai,vi.FMSnapCtrl=li,vi.FMNaviPathLineTool=yi,e.default=vi}],i={},t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"nn",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.nn)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.nn?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=0).default;function t(r){var n;return(i[r]||(n=i[r]={i:r,l:!1,exports:{}},e[r].call(n.exports,n,n.exports,t),n.l=!0,n)).exports}var e,i},t.exports=r()},"/vd3":function(t,e,i){"use strict";e.pbkdf2=i("GUE9"),e.pbkdf2Sync=i("Zq1s")},"/y0r":function(t,e,i){var r=i("BEbT"),n=i("X3l8").Buffer,o=i("z+8S"),s=i("LC74"),a=i("UPHp"),u=i("H2Pp"),h=i("4sPJ");function l(t,e,i,s){o.call(this);var u=n.alloc(4,0);this._cipher=new r.AES(e);var l=this._cipher.encryptBlock(u);this._ghash=new a(l),i=function(t,e,i){if(12===e.length)return t._finID=n.concat([e,n.from([0,0,0,1])]),n.concat([e,n.from([0,0,0,2])]);var r=new a(i),o=e.length,s=o%16;r.update(e),s&&(s=16-s,r.update(n.alloc(s,0))),r.update(n.alloc(8,0));var u=8*o,l=n.alloc(8);l.writeUIntBE(u,0,8),r.update(l),t._finID=r.state;var c=n.from(t._finID);return h(c),c}(this,i,l),this._prev=n.from(i),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}s(l,o),l.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=n.alloc(e,0),this._ghash.update(e))}this._called=!0;var i=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(i),this._len+=t.length,i},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var i=0;t.length!==e.length&&i++;for(var r=Math.min(t.length,e.length),n=0;n<r;++n)i+=t[n]^e[n];return i}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},l.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=l},"040L":function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f=t.opts.$data&&s&&s.$data;f&&(r+=" var schema"+n+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; "),f||(r+=" var schema"+n+" = validate.schema"+a+";"),r+="var "+c+" = equal("+l+", schema"+n+"); if (!"+c+") {   ";var A=A||[];A.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValue: schema"+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be equal to constant' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var p=r;return r=A.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+p+"]); ":r+=" validate.errors = ["+p+"]; return false; ":r+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}},"08Lv":function(t,e){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=i,i.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},"0Gko":function(t,e,i){"use strict";var r=["number","integer","string","boolean","null"];t.exports=function t(e){return t.definition={type:"array",compile:function(t,e,i){var n=i.util.equal,o=function(t,e){return t.map(function(t){var i=e.items&&e.items.properties,n=i&&i[t]&&i[t].type;return Array.isArray(n)?n.indexOf("object")<0&&n.indexOf("array")<0:r.indexOf(n)>=0})}(t,e);return function(e){if(e.length>1)for(var i=0;i<t.length;i++){var r,s=t[i];if(o[i]){var a={};for(r=e.length;r--;)if(e[r]&&"object"==typeof e[r]){var u=e[r][s];if(!u||"object"!=typeof u){if("string"==typeof u&&(u='"'+u),a[u])return!1;a[u]=!0}}}else for(r=e.length;r--;)if(e[r]&&"object"==typeof e[r])for(var h=r;h--;)if(e[h]&&"object"==typeof e[h]&&n(e[r][s],e[h][s]))return!1}return!0}},metaSchema:{type:"array",items:{type:"string"}}},e.addKeyword("uniqueItemProperties",t.definition),e}},"0pvR":function(t,e,i){"use strict";(function(e){var r=i("9DG0").Transform;function n(t){r.call(this),this._block=new e(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i("LC74")(n,r),n.prototype._transform=function(t,i,r){var n=null;try{"buffer"!==i&&(t=new e(t,i)),this.update(t)}catch(t){n=t}r(n)},n.prototype._flush=function(t){var e=null;try{this.push(this._digest())}catch(t){e=t}t(e)},n.prototype.update=function(t,i){if(!e.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");e.isBuffer(t)||(t=new e(t,i||"binary"));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var s=0,a=8*t.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},n.prototype._update=function(t){throw new Error("_update is not implemented")},n.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();return void 0!==t&&(e=e.toString(t)),e},n.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=n}).call(e,i("EuP9").Buffer)},"0ufc":function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f=t.opts.$data&&s&&s.$data;f&&(r+=" var schema"+n+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var A="schema"+n;if(!f)if(s.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var p=[],d=s;if(d)for(var m,y=-1,g=d.length-1;y<g;){m=d[y+=1];var v=t.schema.properties[m];v&&(t.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:t.util.schemaHasRules(v,t.RULES.all))||(p[p.length]=m)}}else p=s;if(f||p.length){var b=t.errorPath,w=f||p.length>=t.opts.loopRequired,x=t.opts.ownProperties;if(h)if(r+=" var missing"+n+"; ",w){f||(r+=" var "+A+" = validate.schema"+a+"; ");var M="' + "+(T="schema"+n+"["+(B="i"+n)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,T,t.opts.jsonPointers)),r+=" var "+c+" = true; ",f&&(r+=" if (schema"+n+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+n+")) "+c+" = false; else {"),r+=" for (var "+B+" = 0; "+B+" < "+A+".length; "+B+"++) { "+c+" = "+l+"["+A+"["+B+"]] !== undefined ",x&&(r+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+A+"["+B+"]) "),r+="; if (!"+c+") break; } ",f&&(r+="  }  "),r+="  if (!"+c+") {   ",(C=C||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",!1!==t.opts.messages&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var _=r;r=C.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var S=p;if(S)for(var B=-1,E=S.length-1;B<E;){P=S[B+=1],B&&(r+=" || "),r+=" ( ( "+(I=l+(R=t.util.getProperty(P)))+" === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(P)+"') "),r+=") && (missing"+n+" = "+t.util.toQuotedString(t.opts.jsonPointers?P:R)+") ) "}r+=") {  ";var C;M="' + "+(T="missing"+n)+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,T,!0):b+" + "+T),(C=C||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",!1!==t.opts.messages&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";_=r;r=C.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(w){f||(r+=" var "+A+" = validate.schema"+a+"; ");var T;M="' + "+(T="schema"+n+"["+(B="i"+n)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,T,t.opts.jsonPointers)),f&&(r+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",!1!==t.opts.messages&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "),r+=" for (var "+B+" = 0; "+B+" < "+A+".length; "+B+"++) { if ("+l+"["+A+"["+B+"]] === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+A+"["+B+"]) "),r+=") {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",!1!==t.opts.messages&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(r+="  }  ")}else{var F=p;if(F)for(var P,O=-1,D=F.length-1;O<D;){P=F[O+=1];var R=t.util.getProperty(P),I=(M=t.util.escapeQuotes(P),l+R);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,P,t.opts.jsonPointers)),r+=" if ( "+I+" === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(P)+"') "),r+=") {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+M+"' } ",!1!==t.opts.messages&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=b}else h&&(r+=" if (true) {");return r}},10:function(t,e){},11:function(t,e){},12:function(t,e){},"16On":function(t,e,i){var r=i("LC74");function n(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=n,n.prototype.isError=function(t){return t instanceof o},n.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},n.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},n.prototype.enterKey=function(t){return this._reporterState.path.push(t)},n.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},n.prototype.leaveKey=function(t,e,i){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=i)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},n.prototype.leaveObject=function(t){var e=this._reporterState,i=e.obj;return e.obj=t,i},n.prototype.error=function(t){var e,i=this._reporterState,r=t instanceof o;if(e=r?t:new o(i.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!i.options.partial)throw e;return r||i.errors.push(e),e},n.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},"19bf":function(t,e,i){"use strict";var r=i("KDHK");e.certificate=i("lQBd");var n=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=n;var o=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=o;var s=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});e.PublicKey=a;var u=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});e.PrivateKey=u;var h=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=h;var l=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=l,e.DSAparam=r.define("DSAparam",function(){this.int()});var c=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),f=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(c),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=f,e.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},"1lLf":function(t,e,i){"use strict";var r=i("08Lv"),n=i("LC74");function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=n,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var r=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?i[r++]=s:s<2048?(i[r++]=s>>6|192,i[r++]=63&s|128):o(t,n)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++n)),i[r++]=s>>18|240,i[r++]=s>>12&63|128,i[r++]=s>>6&63|128,i[r++]=63&s|128):(i[r++]=s>>12|224,i[r++]=s>>6&63|128,i[r++]=63&s|128)}else for(n=0;n<t.length;n++)i[n]=0|t[n];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=a(t[i].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];"little"===e&&(n=s(n)),i+=u(n.toString(16))}return i},e.zero2=a,e.zero8=u,e.join32=function(t,e,i,n){var o=i-e;r(o%4==0);for(var s=new Array(o/4),a=0,u=e;a<s.length;a++,u+=4){var h;h="big"===n?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[a]=h>>>0}return s},e.split32=function(t,e){for(var i=new Array(4*t.length),r=0,n=0;r<t.length;r++,n+=4){var o=t[r];"big"===e?(i[n]=o>>>24,i[n+1]=o>>>16&255,i[n+2]=o>>>8&255,i[n+3]=255&o):(i[n+3]=o>>>24,i[n+2]=o>>>16&255,i[n+1]=o>>>8&255,i[n]=255&o)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},e.sum32_5=function(t,e,i,r,n){return t+e+i+r+n>>>0},e.sum64=function(t,e,i,r){var n=t[e],o=r+t[e+1]>>>0,s=(o<r?1:0)+i+n;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,r){return e+r>>>0},e.sum64_4_hi=function(t,e,i,r,n,o,s,a){var u=0,h=e;return u+=(h=h+r>>>0)<e?1:0,u+=(h=h+o>>>0)<o?1:0,t+i+n+s+(u+=(h=h+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,i,r,n,o,s,a){return e+r+o+a>>>0},e.sum64_5_hi=function(t,e,i,r,n,o,s,a,u,h){var l=0,c=e;return l+=(c=c+r>>>0)<e?1:0,l+=(c=c+o>>>0)<o?1:0,l+=(c=c+a>>>0)<a?1:0,t+i+n+s+u+(l+=(c=c+h>>>0)<h?1:0)>>>0},e.sum64_5_lo=function(t,e,i,r,n,o,s,a,u,h){return e+r+o+a+h>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},"219a":function(t,e,i){"use strict";t.exports=function(t){return t.remainingRequest?t.remainingRequest:t.loaders.slice(t.loaderIndex+1).map(t=>t.request).concat([t.resource]).join("!")}},"24Y6":function(t,e,i){"use strict";var r=i("TkWM"),n=i("YP8Q"),o=i("LC74"),s=i("B6Bn"),a=r.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new n(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function h(t,e,i,r,o){s.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(e,16),this.y=new n(i,16),this.z=r?new n(r,16):this.curve.one,this.t=o&&new n(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,s),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,i,r){return this.point(t,e,i,r)},u.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=this.c2.redSub(this.a.redMul(i)),o=this.one.redSub(this.c2.redMul(this.d).redMul(i)),s=r.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var u=a.fromRed().isOdd();return(e&&!u||!e&&u)&&(a=a.redNeg()),this.point(t,a)},u.prototype.pointFromY=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=i.redSub(this.c2),o=i.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),r=e.redMul(this.a).redAdd(i),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return 0===r.cmp(n)},o(h,s.BasePoint),u.prototype.pointFromJSON=function(t){return h.fromJSON(this,t)},u.prototype.point=function(t,e,i,r){return new h(this,t,e,i,r)},h.fromJSON=function(t,e){return new h(t,e[0],e[1],e[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},h.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=r.redAdd(e),s=o.redSub(i),a=r.redSub(e),u=n.redMul(s),h=o.redMul(a),l=n.redMul(a),c=s.redMul(o);return this.curve.point(u,h,c,l)},h.prototype._projDbl=function(){var t,e,i,r,n,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var h=(r=this.curve._mulA(a)).redAdd(u);this.zOne?(t=s.redSub(a).redSub(u).redMul(h.redSub(this.curve.two)),e=h.redMul(r.redSub(u)),i=h.redSqr().redSub(h).redSub(h)):(n=this.z.redSqr(),o=h.redSub(n).redISub(n),t=s.redSub(a).redISub(u).redMul(o),e=h.redMul(r.redSub(u)),i=h.redMul(o))}else r=a.redAdd(u),n=this.curve._mulC(this.z).redSqr(),o=r.redSub(n).redSub(n),t=this.curve._mulC(s.redISub(r)).redMul(o),e=this.curve._mulC(r).redMul(a.redISub(u)),i=r.redMul(o);return this.curve.point(t,e,i)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),o=i.redSub(e),s=n.redSub(r),a=n.redAdd(r),u=i.redAdd(e),h=o.redMul(s),l=a.redMul(u),c=o.redMul(u),f=s.redMul(a);return this.curve.point(h,l,f,c)},h.prototype._projAdd=function(t){var e,i,r=this.z.redMul(t.z),n=r.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),u=n.redSub(a),h=n.redAdd(a),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),c=r.redMul(u).redMul(l);return this.curve.twisted?(e=r.redMul(h).redMul(s.redSub(this.curve._mulA(o))),i=u.redMul(h)):(e=r.redMul(h).redMul(s.redSub(o)),i=this.curve._mulC(u).redMul(h)),this.curve.point(c,e,i)},h.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},h.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},h.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},h.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},h.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},"2Ejg":function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(12).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function h(t,e,i,r){for(var n=0,o=Math.min(t.length,i),s=e;s<o;s++){var a=t.charCodeAt(s)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o=0,s=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,s=o%r,a=Math.min(o,o-s)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var c=1;for(u=h(t,l,t.length,e),l=0;l<s;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function A(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=67108863&s,u=s/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),A=Math.max(0,h-t.length+1);A<=f;A++){var p=h-A|0;l+=(s=(n=0|t.words[p])*(o=0|e.words[A])+c)/67108864|0,c=67108863&s}i.words[h]=0|c,u=0|l}return 0!==u?i.words[h]=0|u:i.length--,i.strip()}o.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],A=f[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var d=p.modn(A).toString(t);i=(p=p.idivn(A)).isZero()?d+i:l[h-d.length]+d+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,h=new t(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[a]=s;for(;a<o;a++)h[a]=0}else{for(a=0;a<o-n;a++)h[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[o-a-1]=s}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|i.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<i.length;s++)o=(e=(0|i.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,s=t.words,a=e.words,u=i.words,h=0,l=0|s[0],c=8191&l,f=l>>>13,A=0|s[1],p=8191&A,d=A>>>13,m=0|s[2],y=8191&m,g=m>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],M=8191&x,_=x>>>13,S=0|s[5],B=8191&S,E=S>>>13,C=0|s[6],T=8191&C,F=C>>>13,P=0|s[7],O=8191&P,D=P>>>13,R=0|s[8],I=8191&R,U=R>>>13,L=0|s[9],k=8191&L,j=L>>>13,Q=0|a[0],N=8191&Q,z=Q>>>13,H=0|a[1],V=8191&H,G=H>>>13,K=0|a[2],Y=8191&K,X=K>>>13,W=0|a[3],q=8191&W,Z=W>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,At=0|a[9],pt=8191&At,dt=At>>>13;i.negative=t.negative^e.negative,i.length=19;var mt=(h+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,z))+Math.imul(f,N)|0))<<13)|0;h=((o=Math.imul(f,z))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,z))+Math.imul(d,N)|0,o=Math.imul(d,z);var yt=(h+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,V)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,z))+Math.imul(g,N)|0,o=Math.imul(g,z),r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(d,V)|0,o=o+Math.imul(d,G)|0;var gt=(h+(r=r+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(b,N),n=(n=Math.imul(b,z))+Math.imul(w,N)|0,o=Math.imul(w,z),r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0,r=r+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(d,Y)|0,o=o+Math.imul(d,X)|0;var vt=(h+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,q)|0))<<13)|0;h=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(M,N),n=(n=Math.imul(M,z))+Math.imul(_,N)|0,o=Math.imul(_,z),r=r+Math.imul(b,V)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(y,Y)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(d,q)|0,o=o+Math.imul(d,Z)|0;var bt=(h+(r=r+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(B,N),n=(n=Math.imul(B,z))+Math.imul(E,N)|0,o=Math.imul(E,z),r=r+Math.imul(M,V)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(b,Y)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,Z)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(d,$)|0,o=o+Math.imul(d,tt)|0;var wt=(h+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;h=((o=o+Math.imul(f,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,N),n=(n=Math.imul(T,z))+Math.imul(F,N)|0,o=Math.imul(F,z),r=r+Math.imul(B,V)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,r=r+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(d,it)|0,o=o+Math.imul(d,rt)|0;var xt=(h+(r=r+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,st)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,z))+Math.imul(D,N)|0,o=Math.imul(D,z),r=r+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,G)|0,r=r+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(d,ot)|0,o=o+Math.imul(d,st)|0;var Mt=(h+(r=r+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,N),n=(n=Math.imul(I,z))+Math.imul(U,N)|0,o=Math.imul(U,z),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,G)|0,r=r+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,r=r+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(d,ut)|0,o=o+Math.imul(d,ht)|0;var _t=(h+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,z))+Math.imul(j,N)|0,o=Math.imul(j,z),r=r+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,G)|0,r=r+Math.imul(O,Y)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,r=r+Math.imul(T,q)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(F,q)|0,o=o+Math.imul(F,Z)|0,r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(_,it)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(d,ct)|0,o=o+Math.imul(d,ft)|0;var St=(h+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(f,pt)|0))<<13)|0;h=((o=o+Math.imul(f,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(k,V),n=(n=Math.imul(k,G))+Math.imul(j,V)|0,o=Math.imul(j,G),r=r+Math.imul(I,Y)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(U,Y)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,r=r+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var Bt=(h+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,dt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((o=o+Math.imul(d,dt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(k,Y),n=(n=Math.imul(k,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(I,q)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,Z)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(T,it)|0,n=(n=n+Math.imul(T,rt)|0)+Math.imul(F,it)|0,o=o+Math.imul(F,rt)|0,r=r+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,dt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((o=o+Math.imul(g,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(k,q),n=(n=Math.imul(k,Z))+Math.imul(j,q)|0,o=Math.imul(j,Z),r=r+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(D,it)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ft)|0;var Ct=(h+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((o=o+Math.imul(w,dt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(k,$),n=(n=Math.imul(k,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(I,it)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(U,it)|0,o=o+Math.imul(U,rt)|0,r=r+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var Tt=(h+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,dt)|0)+Math.imul(_,pt)|0))<<13)|0;h=((o=o+Math.imul(_,dt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(k,it),n=(n=Math.imul(k,rt))+Math.imul(j,it)|0,o=Math.imul(j,rt),r=r+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(U,ot)|0,o=o+Math.imul(U,st)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(T,ct)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(F,ct)|0,o=o+Math.imul(F,ft)|0;var Ft=(h+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,dt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((o=o+Math.imul(E,dt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(k,ot),n=(n=Math.imul(k,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(U,ut)|0,o=o+Math.imul(U,ht)|0,r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Pt=(h+(r=r+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,dt)|0)+Math.imul(F,pt)|0))<<13)|0;h=((o=o+Math.imul(F,dt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(k,ut),n=(n=Math.imul(k,ht))+Math.imul(j,ut)|0,o=Math.imul(j,ht),r=r+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(U,ct)|0,o=o+Math.imul(U,ft)|0;var Ot=(h+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,dt)|0)+Math.imul(D,pt)|0))<<13)|0;h=((o=o+Math.imul(D,dt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,ct),n=(n=Math.imul(k,ft))+Math.imul(j,ct)|0,o=Math.imul(j,ft);var Dt=(h+(r=r+Math.imul(I,pt)|0)|0)+((8191&(n=(n=n+Math.imul(I,dt)|0)+Math.imul(U,pt)|0))<<13)|0;h=((o=o+Math.imul(U,dt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Rt=(h+(r=Math.imul(k,pt))|0)+((8191&(n=(n=Math.imul(k,dt))+Math.imul(j,pt)|0))<<13)|0;return h=((o=Math.imul(j,dt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=mt,u[1]=yt,u[2]=gt,u[3]=vt,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=_t,u[9]=St,u[10]=Bt,u[11]=Et,u[12]=Ct,u[13]=Tt,u[14]=Ft,u[15]=Pt,u[16]=Ot,u[17]=Dt,u[18]=Rt,0!==h&&(u[19]=h,i.length++),i};function d(t,e,i){return(new m).mulp(t,e,i)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=A),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?A(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var s=n;n=0;for(var a=67108863&r,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;a=67108863&(f=f+a|0),n+=(s=(s=s+(c/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}i.words[o]=a,r=s,s=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},m.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},m.prototype.permute=function(t,e,i,r,n,o){for(var s=0;s<o;s++)r[s]=e[t[s]],n[s]=i[t[s]]},m.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var c=u,f=h,A=0;A<s;A++){var p=i[l+A],d=r[l+A],m=i[l+A+s],y=r[l+A+s],g=c*m-f*y;y=c*y+f*m,m=g,i[l+A]=p+m,r[l+A]=d+y,i[l+A+s]=p-m,r[l+A+s]=d-y,A!==a&&(g=u*c-h*f,f=u*f+h*c,c=g)}},m.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},m.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},m.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,n),this.transform(h,o,l,c,r,n);for(var A=0;A<r;A++){var p=a[A]*l[A]-u[A]*c[A];u[A]=a[A]*c[A]+u[A]*l[A],a[A]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this.length=0===t?1:this.length,this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i)&&!!(this.words[i]&n)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,s=0|n.words[n.length-1];0!==(i=26-this._countBits(s))&&(n=n.ushln(i),r.iushln(i),s=0|n.words[n.length-1]);var a,u=r.length-n.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=r.clone()._ishlnsubmul(n,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var l=i.clone(),c=e.clone();!e.isZero();){for(var f=0,A=1;0==(e.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(l),s.isub(c)),n.iushrn(1),s.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(c)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),s.isub(u)):(i.isub(e),a.isub(n),u.isub(s))}return{a:a,b:u,gcd:i.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new o(1),a=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(a)):(i.isub(e),a.isub(s))}return(n=0===e.cmpn(1)?s:a).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},n(v,g),v.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,g),n(w,g),n(x,g),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),A=this.pow(t,n),p=s;0!==A.cmp(a);){for(var d=A,m=0;0!==d.cmp(a);m++)d=d.redSqr();r(m<p);var y=this.pow(c,new o(1).iushln(p-m-1));f=f.redMul(y),c=y.redSqr(),A=A.redMul(c),p=m}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var h=e.words[r],l=u-1;l>=0;l--){var c=h>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++a||0===r&&0===l)&&(n=this.mul(n,i[s]),a=0,s=0)):a=0}u=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new _(t)},n(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(e,i("3IRH")(t))},"2JY6":function(t,e,i){"use strict";var r=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>r||e!=e)throw new TypeError("Bad key length")}},"2KBj":function(t,e,i){"use strict";t.exports=Error},"2tI2":function(t,e,i){"use strict";t.exports=Object},3:function(t,e){},"35aj":function(t,e,i){"use strict";(function(e,i){var r;if(e.process&&e.process.browser)r="utf-8";else if(e.process&&e.process.version){r=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else r="utf-8";t.exports=r}).call(e,i("DuR2"),i("W2nU"))},"3D9i":function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.schema[e],o=t.errSchemaPath+"/"+e,s=(t.opts.allErrors,t.util.toQuotedString(n));return!0===t.opts.$comment?r+=" console.log("+s+");":"function"==typeof t.opts.$comment&&(r+=" self._opts.$comment("+s+", "+t.util.toQuotedString(o)+", validate.root.schema);"),r}},"3IRH":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"3PYz":function(t,e,i){var r=e;r.utils=i("1lLf"),r.common=i("YSDb"),r.sha=i("NCTB"),r.ripemd=i("CKAI"),r.hmac=i("3kRU"),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},"3UtB":function(t,e,i){var r=e;r.Reporter=i("16On").Reporter,r.DecoderBuffer=i("iTY7").DecoderBuffer,r.EncoderBuffer=i("iTY7").EncoderBuffer,r.Node=i("vugd")},"3b/5":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("b5i5"),n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:5!=t.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[5!=t.contrForPrionum?r("div",{staticClass:"menu_header"},[r("Menu",{ref:"menu"})],1):t._e(),t._v(" "),r("div",{staticClass:"content"},[r("el-container",{class:5==t.contrForPrionum?"user":"asi"},[5!=t.contrForPrionum?r("el-aside",[r("Asset")],1):t._e(),t._v(" "),r("el-main",[r("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"},attrs:{model:t.searchList}},[r("el-form-item",{staticStyle:{display:"flex",width:"12%","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("staff.name")}},[r("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text")},model:{value:t.searchList.username,callback:function(e){t.$set(t.searchList,"username",e)},expression:"searchList.username"}},t._l(t.searchSelectPerson,function(t){return r("el-option",{key:t.id,attrs:{label:t.username,value:t.username}})}),1)],1),t._v(" "),r("el-form-item",{staticStyle:{display:"flex",width:"10%","margin-left":"1%","margin-right":"0"},attrs:{label:t.$t("staff.gender")}},[r("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text")},model:{value:t.searchList.sex,callback:function(e){t.$set(t.searchList,"sex",e)},expression:"searchList.sex"}},t._l(t.sexType,function(t){return r("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),r("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"1%","margin-right":"0"},attrs:{label:t.$t("staff.WorkersCard")}},[r("el-input",{staticStyle:{width:"95%",float:"left"},model:{value:t.searchList.maplabel,callback:function(e){t.$set(t.searchList,"maplabel",e)},expression:"searchList.maplabel"}})],1),t._v(" "),r("el-form-item",{staticStyle:{display:"flex",width:"12%","margin-left":"1%","margin-right":"0"},attrs:{label:t.$t("staff.Department")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("staff.text")},model:{value:t.searchList.depart,callback:function(e){t.$set(t.searchList,"depart",e)},expression:"searchList.depart"}},t._l(t.departList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),r("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"1%","margin-right":"0"},attrs:{label:t.$t("staff.Jobnumber")}},[r("el-input",{staticStyle:{width:"95%",float:"left"},model:{value:t.searchList.cardno,callback:function(e){t.$set(t.searchList,"cardno",e)},expression:"searchList.cardno"}})],1),t._v(" "),r("el-form-item",{staticStyle:{display:"flex","margin-left":"0","z-index":"1"}},[r("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(e){return t.searchStaff()}}},[t._v(t._s(t.$t("staff.search")))]),t._v(" "),r("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.clearBtn()}}},[t._v(t._s(t.$t("staff.reset")))]),t._v(" "),r("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(e){return t.importExcel()}}},[t._v(t._s(t.$t("terminal.import")))]),t._v(" "),r("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(e){return t.exportExcel()}}},[t._v(t._s(t.$t("terminal.export")))]),t._v(" "),r("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(e){return t.exportExcelAll()}}},[t._v(t._s(t.$t("terminal.exportAll")))]),t._v(" "),r("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){return t.addStaff()}}},[t._v(t._s(t.$t("staff.Addemployees")))])],1)],1),t._v(" "),r("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"}},[r("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"2%","margin-right":"0"}},[r("el-button",{staticClass:"add move",attrs:{type:"danger"},on:{click:function(e){return t.removeStaffs()}}},[t._v(t._s(t.$t("staff.unbind")))]),t._v(" "),r("el-button",{staticClass:"add move",attrs:{type:"primary"},on:{click:function(e){return t.goSetDepart()}}},[t._v(t._s(t.$t("staff.DepartmentSettings")))]),t._v(" "),r("el-button",{staticClass:"add move",attrs:{type:"primary"},on:{click:function(e){return t.goSetWorktype()}}},[t._v(t._s(t.$t("staff.Tradesettings")))]),t._v(" "),r("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(e){return t.importExcelWorktype()}}},[t._v(t._s(t.$t("staff.importWorktype")))]),t._v(" "),r("el-button",{staticClass:"reset",staticStyle:{"margin-left":"0%"},attrs:{type:"primary"},on:{click:function(e){return t.exportExcelWorkType()}}},[t._v(t._s(t.$t("staff.exportWorktype")))])],1)],1),t._v(" "),r("div",{staticClass:"content_staff"},[r("div",{staticClass:"exportContent",staticStyle:{display:"flex"}},[r("input",{staticClass:"x_file",attrs:{id:"articleImageFile",name:"excelFile",type:"file",accept:".xls,.xlsx"},on:{change:t.importExcels}}),t._v(" "),r("input",{staticClass:"x_file",attrs:{id:"articleWorktypeFile",name:"excelFile",type:"file",accept:".xls,.xlsx"},on:{change:t.importExcelWorktypes}})]),t._v(" "),r("el-table",{ref:"multipleTable",staticStyle:{width:"98%","text-align":"center","margin-left":"2%","z-index":"1"},attrs:{data:t.tableData,"max-height":"660",border:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),r("el-table-column",{attrs:{property:"username",label:t.$t("staff.employeename"),"min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"birthday",label:t.$t("staff.age"),align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.ages(e.row.birthday))+"\n              ")]}}])}),t._v(" "),r("el-table-column",{attrs:{property:"zh"==t.i8n?"sexstr":"ensex",label:t.$t("staff.gender1"),align:"center","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"tel",label:t.$t("staff.telephone"),align:"center","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"depart",label:t.$t("staff.Department1"),align:"center",sortable:"","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"worktype",label:t.$t("staff.Typeofwork"),align:"center",sortable:"","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"maplabel",label:t.$t("staff.Workcardnumber"),align:"center",sortable:"","show-overflow-tooltip":"","min-width":"150"}}),t._v(" "),r("el-table-column",{attrs:{property:"cardno",label:t.$t("staff.Jobnumber1"),align:"center",sortable:"","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"memo",label:t.$t("staff.Remark"),"min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{fixed:"right",label:t.$t("staff.operate"),"min-width":"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-dropdown",{attrs:{size:"mini",type:"primary",trigger:"click"}},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("staff.operate"),placement:"top-start"}},[r("el-button",{staticClass:"icon_button",attrs:{type:"primary"}},[r("img",{attrs:{src:i("VJ6t")}})])],1),t._v(" "),r("el-dropdown-menu",{staticClass:"selects",staticStyle:{"background-color":"rgb(219, 222, 231)"},attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[r("el-button",{staticClass:"edits",attrs:{size:"mini"},on:{click:function(i){return t.staffEdit(e.$index,t.tableData)}}},[t._v(t._s(t.$t("staff.edit")))])],1),t._v(" "),r("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[r("el-button",{staticClass:"dels",attrs:{size:"mini"},on:{click:function(i){return t.staffDele(e.$index)}}},[t._v(t._s(t.$t("staff.delete")))])],1)],1)],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("staff.position"),placement:"top-start"}},[r("el-button",{staticClass:"edits icon_button",attrs:{type:"primary"},on:{click:function(i){return t.goLocation(e.$index,t.tableData)}}},[r("img",{attrs:{src:i("F5RF")}})])],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("staffmanagement.trajectory"),placement:"top-start"}},[r("el-button",{staticClass:"edits icon_button",staticStyle:{"margin-left":"0"},attrs:{type:"primary"},on:{click:function(i){return t.staffAction(e.$index,t.tableData)}}},[r("img",{attrs:{src:i("nmTc")}})])],1)]}}])})],1),t._v(" "),r("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[r("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":20},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1),t._v(" "),r("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("staff.text1"),width:"30%",visible:t.add},on:{"update:visible":function(e){t.add=e},close:function(e){return t.addCancel("addData")}}},[r("el-upload",{ref:"upload",attrs:{action:t.ImagePath,"list-type":"picture-card","file-list":t.fileListAdd,"on-preview":t.handlePictureCardPreview,accept:".png, .jpg, .jpeg",limit:1,data:t.userIdForPic,"on-success":t.picSuccess,"on-error":t.picError,headers:t.myHeader,"auto-upload":!1,"on-exceed":t.handleExceed,"before-upload":t.beforeAvatarUpload,"on-change":t.handleChange,"on-remove":t.handleRemove}},[r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n              "+t._s(t.$t("staff.text2"))+"\n            ")]),t._v(" "),r("i",{staticClass:"el-icon-plus"})]),t._v(" "),r("el-form",{ref:"addData",staticStyle:{"text-align":"left","margin-top":"2%"},attrs:{model:t.addData,"label-width":"120px",rules:t.editRules}},[r("el-form-item",{attrs:{label:t.$t("staff.name1"),prop:"username"}},[r("el-input",{attrs:{maxlength:"32"},model:{value:t.addData.username,callback:function(e){t.$set(t.addData,"username",e)},expression:"addData.username"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Jobnumber")}},[r("el-input",{attrs:{maxlength:"16"},model:{value:t.addData.cardno,callback:function(e){t.$set(t.addData,"cardno",e)},expression:"addData.cardno"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.age1"),prop:""}},[r("el-date-picker",{attrs:{type:"date",placeholder:t.$t("staff.birthdayPlaceholder"),"value-format":"yyyy-MM-dd"},model:{value:t.addData.birthday,callback:function(e){t.$set(t.addData,"birthday",e)},expression:"addData.birthday"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.gender")}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text")},model:{value:t.addData.sex,callback:function(e){t.$set(t.addData,"sex",e)},expression:"addData.sex"}},t._l(t.sexType,function(t){return r("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.telephone1"),prop:"zh"==t.i8n?"tel":""}},[r("el-input",{model:{value:t.addData.tel,callback:function(e){t.$set(t.addData,"tel",e)},expression:"addData.tel"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Department2")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("staff.text")},model:{value:t.addData.depart,callback:function(e){t.$set(t.addData,"depart",e)},expression:"addData.depart"}},t._l(t.departList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Typeofwork1")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("staff.text")},model:{value:t.addData.worktype,callback:function(e){t.$set(t.addData,"worktype",e)},expression:"addData.worktype"}},t._l(t.worktypeList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),2!=t.ProjectTye?r("el-form-item",{attrs:{label:t.$t("staff.Workcardnumber1")}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text")},model:{value:t.addData.maplabel,callback:function(e){t.$set(t.addData,"maplabel",e)},expression:"addData.maplabel"}},t._l(t.maplabelList,function(t){return r("el-option",{key:t.deveui,attrs:{label:t.deveui,value:t.deveui}})}),1)],1):t._e(),t._v(" "),2==t.ProjectTye?r("el-form-item",{attrs:{label:t.$t("staff.Workcardnumber1")}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text")},model:{value:t.addData.maplabel,callback:function(e){t.$set(t.addData,"maplabel",e)},expression:"addData.maplabel"}},t._l(t.maplabelList,function(t){return r("el-option",{key:t.deveui,attrs:{label:t.deveui+" / "+t.major+" / "+t.minor,value:t.deveui}})}),1)],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Remark1")}},[r("el-input",{attrs:{type:"textarea",maxlength:"64","show-word-limit":"",rows:"4"},model:{value:t.addData.memo,callback:function(e){t.$set(t.addData,"memo",e)},expression:"addData.memo"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){return t.addCancel("addData")}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.addTrue("addData")}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),r("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),r("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:t.$t("staff.text3"),visible:t.edit,width:"30%"},on:{"update:visible":function(e){t.edit=e},close:function(e){return t.editCancel("editData")}}},[r("el-upload",{ref:"upload",attrs:{action:t.ImagePathEdit,"list-type":"picture-card","file-list":t.fileListEdit,"on-preview":t.handlePictureCardPreviewEdit,accept:".png, .jpg, .jpeg",limit:1,data:t.userIdForPicEdit,"on-success":t.picSuccessEdit,"on-error":t.picErrorEdit,headers:t.myHeaderEdit,"auto-upload":!1,"on-change":t.handleChange,"on-remove":t.handleRemove,"on-exceed":t.handleExceedEdit,"before-upload":t.beforeAvatarUploadEdit}},[r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n              "+t._s(t.$t("staff.text2"))+"\n            ")]),t._v(" "),r("i",{staticClass:"el-icon-plus"})]),t._v(" "),r("el-form",{ref:"editData",staticStyle:{"text-align":"left","margin-top":"2%"},attrs:{model:t.editData,"label-width":"120px",rules:t.editRules}},[r("el-form-item",{attrs:{label:t.$t("staff.name1"),prop:"username"}},[r("el-input",{attrs:{disabled:""},model:{value:t.editData.username,callback:function(e){t.$set(t.editData,"username",e)},expression:"editData.username"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Jobnumber")}},[r("el-input",{attrs:{maxlength:"16"},model:{value:t.editData.cardno,callback:function(e){t.$set(t.editData,"cardno",e)},expression:"editData.cardno"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.age1"),prop:""}},[r("el-date-picker",{attrs:{type:"date",placeholder:t.$t("staff.birthdayPlaceholder"),"value-format":"yyyy-MM-dd"},model:{value:t.editData.birthday,callback:function(e){t.$set(t.editData,"birthday",e)},expression:"editData.birthday"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.gender")}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text")},model:{value:t.editData.sex,callback:function(e){t.$set(t.editData,"sex",e)},expression:"editData.sex"}},t._l(t.sexType,function(t){return r("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.telephone1"),prop:"zh"==t.i8n?"tel":""}},[r("el-input",{model:{value:t.editData.tel,callback:function(e){t.$set(t.editData,"tel",e)},expression:"editData.tel"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Department2")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("staff.text")},model:{value:t.editData.depart,callback:function(e){t.$set(t.editData,"depart",e)},expression:"editData.depart"}},t._l(t.departList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Typeofwork1")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("staff.text")},model:{value:t.editData.worktype,callback:function(e){t.$set(t.editData,"worktype",e)},expression:"editData.worktype"}},t._l(t.worktypeList,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),2!=t.ProjectTye?r("el-form-item",{attrs:{label:t.$t("staff.Workcardnumber1")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("staff.text")},model:{value:t.editData.maplabel,callback:function(e){t.$set(t.editData,"maplabel",e)},expression:"editData.maplabel"}},t._l(t.maplabelList,function(t){return r("el-option",{key:t.deveui,attrs:{label:t.deveui,value:t.deveui}})}),1)],1):t._e(),t._v(" "),2==t.ProjectTye?r("el-form-item",{attrs:{label:t.$t("staff.Workcardnumber1")}},[r("el-select",{attrs:{filterable:"",placeholder:t.$t("staff.text")},model:{value:t.editData.maplabel,callback:function(e){t.$set(t.editData,"maplabel",e)},expression:"editData.maplabel"}},t._l(t.maplabelList,function(t){return r("el-option",{key:t.deveui,attrs:{label:t.deveui+" / "+t.major+" / "+t.minor,value:t.deveui}})}),1)],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:t.$t("staff.Remark1")}},[r("el-input",{attrs:{type:"textarea",maxlength:"64","show-word-limit":"",rows:"4"},model:{value:t.editData.memo,callback:function(e){t.$set(t.editData,"memo",e)},expression:"editData.memo"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){return t.editCancel("editData")}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.editTrue("editData")}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),r("el-dialog",{staticClass:"action",staticStyle:{"text-align":"center"},attrs:{visible:t.actions,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){t.actions=e},close:t.closeAction}},[r("el-dialog",{staticClass:"trajectory",staticStyle:{"text-align":"center"},attrs:{visible:t.trajectory,width:"80%","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.trajectory=e},close:t.closetrajectoryAction}},[r("Trajectory",{ref:"trajectory",on:{closePopup2d:t.closePopup}})],1),t._v(" "),r("el-dialog",{staticClass:"trajectory",staticStyle:{"text-align":"center"},attrs:{visible:t.trajectory3d,width:"80%","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.trajectory3d=e},close:t.closetrajectoryAction3d}},[r("Trajectorys",{ref:"trajectorys",on:{closePopup3d:t.closePopup3d}})],1),t._v(" "),r("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap","margin-left":"1%",width:"100%"},attrs:{model:t.actionData}},[r("el-form-item",{staticStyle:{display:"flex","margin-left":"1%","margin-right":"1%",width:"16%"},attrs:{label:t.$t("staff.name1")}},[r("el-input",{model:{value:t.actionData.username,callback:function(e){t.$set(t.actionData,"username",e)},expression:"actionData.username"}})],1),t._v(" "),r("el-form-item",{staticStyle:{display:"flex","margin-left":"1%","margin-right":"2%",width:"30%"},attrs:{label:t.$t("staff.Workcardnumber1")}},[r("el-input",{model:{value:t.actionData.maplabel,callback:function(e){t.$set(t.actionData,"maplabel",e)},expression:"actionData.maplabel"}})],1),t._v(" "),r("el-form-item",{staticStyle:{display:"flex","margin-left":"1%","margin-right":"0",width:"40%"},attrs:{label:t.$t("staff.time")}},[r("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":t.$t("terminal.to"),"start-placeholder":t.$t("terminal.startdate"),"end-placeholder":t.$t("terminal.enddate")},model:{value:t.actionTime,callback:function(e){t.actionTime=e},expression:"actionTime"}})],1),t._v(" "),r("el-form-item",{staticStyle:{"margin-left":"1%",width:"20%"}},[r("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(e){return t.searchAction()}}},[t._v(t._s(t.$t("staff.search")))]),t._v(" "),r("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(e){return t.showTrajectory()}}},[t._v(t._s(t.$t("staff.Viewtrack")))])],1)],1),t._v(" "),r("div",{staticClass:"actionDetails"},t._l(t.actionTableData,function(e){return r("Timeline",{key:e.id},[1==e.postype?r("TimelineItem",[r("p",{staticClass:"time"},[t._v("\n                  "+t._s(t.$t("LocationIndoorHis.time"))+t._s(e.gpstime)+"\n                ")]),t._v(" "),r("p",{staticClass:"content"},[t._v("\n                  "+t._s(t.$t("LocationIndoorHis.Building"))+t._s(e.building)+"\n                ")]),t._v(" "),r("p",{staticClass:"content"},[t._v("\n                  "+t._s(t.$t("LocationIndoorHis.floor"))+t._s(e.groundname)+"\n                ")]),t._v(" "),r("p",{staticClass:"content"},[t._v("\n                  "+t._s(t.$t("warning.area1"))+t._s(e.tranche)+"\n                ")]),t._v(" "),r("p",{staticClass:"content"},[t._v("\n                  "+t._s(t.$t("tet.Residencetime"))+t._s(t.formatSeconds(e.remaintime))+"\n                ")])]):t._e(),t._v(" "),2==e.postype?r("TimelineItem",[r("p",{staticClass:"time"},[t._v("\n                  "+t._s(t.$t("LocationIndoorHis.time"))+t._s(e.gpstime)+"\n                ")]),t._v(" "),r("p",{staticClass:"content"},[t._v("\n                  "+t._s(t.$t("warning.area1"))+t._s(e.tranche)+"\n                ")]),t._v(" "),r("p",{staticClass:"content"},[t._v("\n                  "+t._s(t.$t("tet.Residencetime"))+t._s(t.formatSeconds(e.remaintime))+"\n                ")])]):t._e()],1)}),1)],1),t._v(" "),r("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("staff.text4"),visible:t.deleTpl},on:{"update:visible":function(e){t.deleTpl=e}}},[r("el-form",[r("p",{staticStyle:{"line-height":"0px","margin-bottom":"10px",color:"red","font-size":"20px"}},[t._v("\n              "+t._s(t.$t("staff.text5"))+t._s(t.deleStaff)+t._s(t.$t("staff.text6"))+"\n            ")])]),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.deleTpl=!1,t.loading=!1}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.deleTrue}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),r("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:t.$t("staff.text7"),visible:t.removeStaff,width:"50%"},on:{"update:visible":function(e){t.removeStaff=e}}},[r("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{data:t.removeDatas,"max-height":"660",stripe:""}},[r("el-table-column",{attrs:{property:"username",label:t.$t("staff.name2"),"show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"maplabel",label:t.$t("staff.Workcardnumber"),"show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{property:"projectname",label:t.$t("staff.projectname"),"show-overflow-tooltip":""}})],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.removeStaff=!1,t.loading=!1}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.removeTrue()}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],1),t._v(" "),r("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:t.$t("staff.text8"),visible:t.addWorktype,width:"30%","close-on-press-escape":!1,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.addWorktype=e}}},[r("div",{staticClass:"import_type"},[r("el-radio-group",{attrs:{size:"small"}},[r("el-button",{staticClass:"add",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.addWorktypeRow}},[t._v(t._s(t.$t("staff.add")))])],1),t._v(" "),r("el-form",{staticStyle:{"text-align":"center"}},[r("el-form-item",{staticStyle:{width:"60%","margin-left":"16%","text-align":"left","margin-top":"14px"},attrs:{label:t.$t("staff.import")}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text9")},on:{change:t.importWorktype},model:{value:t.currentProjectid.projectid,callback:function(e){t.$set(t.currentProjectid,"projectid",e)},expression:"currentProjectid.projectid"}},t._l(t.projectList(),function(t){return r("el-option",{key:t.projectid,attrs:{label:t.name,value:t.projectid}})}),1),t._v(" "),r("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("p",[t._v("\n                      "+t._s(t.$t("staff.text9"))+"\n                    ")])]),t._v(" "),r("i",{staticClass:"el-icon-question"})])],1)],1)],1),t._v(" "),t._l(t.worktypeList,function(e,i){return r("el-form",{key:e.id,staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"80px"}},[r("el-form-item",{staticClass:"work_type_list"},[r("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"zh"==t.i8n?"12":"30",disabled:void 0!==e.id},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),t._v(" "),r("el-button",{staticClass:"del",attrs:{type:"primary",size:"small"},on:{click:function(r){return t.deleWorktypeRow(i,e.id,e.name,e.tenantid,e.projectid)}}},[t._v(t._s(t.$t("staff.delete")))]),t._v(" "),r("el-image",{staticStyle:{width:"32px",height:"32px",cursor:"pointer"},attrs:{src:t.assetBase+"/image/"+e.colour+".png",fit:"fill"},nativeOn:{click:function(i){return t.changeIcon(e)}}})],1)],1)}),t._v(" "),r("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-10px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.addWorktype=!1}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addWorktypeRowTrue()}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],2),t._v(" "),r("el-dialog",{attrs:{visible:t.showIcon,width:"25%"},on:{"update:visible":function(e){t.showIcon=e}}},[r("span",{attrs:{slot:"title"},slot:"title"},[t._v("  ")]),t._v(" "),r("el-radio-group",{staticStyle:{"text-align":"left"},on:{change:function(e){return t.chooseIcon()}},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[r("el-radio",{attrs:{label:1}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc1,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:2}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc2,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:3}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc3,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:4}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc4,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:5}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc5,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:6}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc6,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:7}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc7,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:8}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc8,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:9}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc9,fit:"fit"}})],1),t._v(" "),r("el-radio",{attrs:{label:10}},[r("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t.IconSrc10,fit:"fit"}})],1)],1)],1),t._v(" "),r("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:t.$t("staff.text10"),visible:t.addDepartktype,width:"30%","close-on-press-escape":!1,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.addDepartktype=e}}},[r("el-radio-group",{attrs:{size:"small"}},[r("el-button",{staticClass:"add",staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:t.addDepartRow}},[t._v(t._s(t.$t("staff.add")))])],1),t._v(" "),r("el-form",{staticStyle:{"text-align":"center"}},[r("el-form-item",{staticStyle:{width:"60%","margin-left":"16%","text-align":"left","margin-top":"14px"},attrs:{label:t.$t("staff.import")}},[r("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("staff.text11")},on:{change:t.importDepart},model:{value:t.currentProjectid.projectid,callback:function(e){t.$set(t.currentProjectid,"projectid",e)},expression:"currentProjectid.projectid"}},t._l(t.projectList(),function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.projectid}})}),1),t._v(" "),r("el-tooltip",{staticClass:"item",staticStyle:{position:"absolute","font-size":"130%",top:"50%",transform:"translateY(-50%)","margin-left":"5px"},attrs:{effect:"light",placement:"right-start"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("p",[t._v("\n                    "+t._s(t.$t("staff.text11"))+"\n                  ")])]),t._v(" "),r("i",{staticClass:"el-icon-question"})])],1)],1),t._v(" "),t._l(t.departList,function(e,i){return r("el-form",{key:i,staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"80px"}},[r("el-form-item",[r("el-input",{staticStyle:{float:"left",width:"70%"},attrs:{maxlength:"zh"==t.i8n?"12":"30",disabled:void 0!==e.id},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),t._v(" "),r("el-button",{staticClass:"del",staticStyle:{float:"left","margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(r){return t.deleDepartRow(i,e.id,e.name,e.tenantid,e.projectid)}}},[t._v(t._s(t.$t("staff.delete")))])],1)],1)}),t._v(" "),r("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-10px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.addDepartktype=!1}}},[t._v(t._s(t.$t("warning.Cancel")))]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addDepartRowTrue()}}},[t._v(t._s(t.$t("warning.Sure")))])],1)],2)],1)],1)],1)])},staticRenderFns:[]};var o=function(t){i("qsNF")},s=i("VU/8")(r.a,n,!1,o,"data-v-6af7b031",null);e.default=s.exports},"3cnB":function(t,e,i){"use strict";const r=i("Zd9X"),n=i("5U1j"),o=i("xHa+"),s=i("219a"),a=i("/Unp"),u=i("q6ws"),h=i("FNEQ"),l=i("PznY"),c=i("evxy"),f=i("nF6k");e.getOptions=r,e.parseQuery=n,e.stringifyRequest=o,e.getRemainingRequest=s,e.getCurrentRequest=a,e.isUrlRequest=u,e.urlToRequest=h,e.parseString=l,e.getHashDigest=c,e.interpolateName=f},"3fzc":function(t,e,i){var r=i("rOku");t.exports=g,g.simpleSieve=m,g.fermatTest=y;var n=i("s83z"),o=new n(24),s=new(i("aK3A")),a=new n(1),u=new n(2),h=new n(5),l=(new n(16),new n(8),new n(10)),c=new n(3),f=(new n(7),new n(11)),A=new n(4),p=(new n(12),null);function d(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,i=3;i<1048576;i+=2){for(var r=Math.ceil(Math.sqrt(i)),n=0;n<e&&t[n]<=r&&i%t[n]!=0;n++);e!==n&&t[n]<=r||(t[e++]=i)}return p=t,t}function m(t){for(var e=d(),i=0;i<e.length;i++)if(0===t.modn(e[i]))return 0===t.cmpn(e[i]);return!0}function y(t){var e=n.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function g(t,e){if(t<16)return new n(2===e||5===e?[140,123]:[140,39]);var i,p;for(e=new n(e);;){for(i=new n(r(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd(a),i.testn(1)||i.iadd(u),e.cmp(u)){if(!e.cmp(h))for(;i.mod(l).cmp(c);)i.iadd(A)}else for(;i.mod(o).cmp(f);)i.iadd(A);if(m(p=i.shrn(1))&&m(i)&&y(p)&&y(i)&&s.test(p)&&s.test(i))return i}}},"3kRU":function(t,e,i){"use strict";var r=i("1lLf"),n=i("08Lv");function o(t,e,i){if(!(this instanceof o))return new o(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,i))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},"3lo0":function(t,e,i){"use strict";t.exports={instanceof:i("pymM"),range:i("aNYs"),regexp:i("fSjk"),typeof:i("dK10"),dynamicDefaults:i("PC2b"),allRequired:i("P3PB"),anyRequired:i("toHR"),oneRequired:i("ZHok"),prohibited:i("fPvb"),uniqueItemProperties:i("0Gko"),deepProperties:i("VWGE"),deepRequired:i("P7se"),formatMinimum:i("MnmI"),formatMaximum:i("Fv+a"),patternRequired:i("YgMt"),switch:i("3vUZ"),select:i("6H47"),transform:i("I8ie")}},"3nYK":function(t,e,i){"use strict";var r=i("1lLf").rotr32;function n(t,e,i){return t&e^~t&i}function o(t,e,i){return t&e^t&i^e&i}function s(t,e,i){return t^e^i}e.ft_1=function(t,e,i,r){return 0===t?n(e,i,r):1===t||3===t?s(e,i,r):2===t?o(e,i,r):void 0},e.ch32=n,e.maj32=o,e.p32=s,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},"3vUZ":function(t,e,i){"use strict";var r=i("sakm");t.exports=function t(e){if(!e.RULES.keywords.switch||!e.RULES.keywords.if){var n=r.metaSchemaRef(e);return t.definition={inline:i("nYxf"),statements:!0,errors:"full",metaSchema:{type:"array",items:{required:["then"],properties:{if:n,then:{anyOf:[{type:"boolean"},n]},continue:{type:"boolean"}},additionalProperties:!1,dependencies:{continue:["if"]}}}},e.addKeyword("switch",t.definition),e}}},4:function(t,e){},"4/4u":function(t,e,i){t.exports=i("cSWu").Transform},"49tr":function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f="errs__"+n,A=t.util.copy(t),p="";A.level++;var d="valid"+A.level,m="i"+n,y=A.dataLevel=t.dataLevel+1,g="data"+y,v=t.baseId;if(r+="var "+f+" = errors;var "+c+";",Array.isArray(s)){var b=t.schema.additionalItems;if(!1===b){r+=" "+c+" = "+l+".length <= "+s.length+"; ";var w=u;u=t.errSchemaPath+"/additionalItems",r+="  if (!"+c+") {   ";var x=x||[];x.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { limit: "+s.length+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have more than "+s.length+" items' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var M=r;r=x.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+M+"]); ":r+=" validate.errors = ["+M+"]; return false; ":r+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=w,h&&(p+="}",r+=" else { ")}var _=s;if(_)for(var S,B=-1,E=_.length-1;B<E;)if(S=_[B+=1],t.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:t.util.schemaHasRules(S,t.RULES.all)){r+=" "+d+" = true; if ("+l+".length > "+B+") { ";var C=l+"["+B+"]";A.schema=S,A.schemaPath=a+"["+B+"]",A.errSchemaPath=u+"/"+B,A.errorPath=t.util.getPathExpr(t.errorPath,B,t.opts.jsonPointers,!0),A.dataPathArr[y]=B;var T=t.validate(A);A.baseId=v,t.util.varOccurences(T,g)<2?r+=" "+t.util.varReplace(T,g,C)+" ":r+=" var "+g+" = "+C+"; "+T+" ",r+=" }  ",h&&(r+=" if ("+d+") { ",p+="}")}if("object"==typeof b&&(t.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:t.util.schemaHasRules(b,t.RULES.all))){A.schema=b,A.schemaPath=t.schemaPath+".additionalItems",A.errSchemaPath=t.errSchemaPath+"/additionalItems",r+=" "+d+" = true; if ("+l+".length > "+s.length+") {  for (var "+m+" = "+s.length+"; "+m+" < "+l+".length; "+m+"++) { ",A.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers,!0);C=l+"["+m+"]";A.dataPathArr[y]=m;T=t.validate(A);A.baseId=v,t.util.varOccurences(T,g)<2?r+=" "+t.util.varReplace(T,g,C)+" ":r+=" var "+g+" = "+C+"; "+T+" ",h&&(r+=" if (!"+d+") break; "),r+=" } }  ",h&&(r+=" if ("+d+") { ",p+="}")}}else if(t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all)){A.schema=s,A.schemaPath=a,A.errSchemaPath=u,r+="  for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",A.errorPath=t.util.getPathExpr(t.errorPath,m,t.opts.jsonPointers,!0);C=l+"["+m+"]";A.dataPathArr[y]=m;T=t.validate(A);A.baseId=v,t.util.varOccurences(T,g)<2?r+=" "+t.util.varReplace(T,g,C)+" ":r+=" var "+g+" = "+C+"; "+T+" ",h&&(r+=" if (!"+d+") break; "),r+=" }"}return h&&(r+=" "+p+" if ("+f+" == errors) {"),r}},"4R/o":function(t,e,i){"use strict";(function(t,r){function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=i("X3l8"),s=i("rOku"),a=o.Buffer,u=o.kMaxLength,h=t.crypto||t.msCrypto,l=Math.pow(2,32)-1;function c(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>l||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,i){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>l||t<0)throw new TypeError("size must be a uint32");if(t+e>i||t>u)throw new RangeError("buffer too small")}function A(t,e,i,n){if(r.browser){var o=t.buffer,a=new Uint8Array(o,e,i);return h.getRandomValues(a),n?void r.nextTick(function(){n(null,t)}):t}if(!n)return s(i).copy(t,e),t;s(i,function(i,r){if(i)return n(i);r.copy(t,e),n(null,t)})}h&&h.getRandomValues||!r.browser?(e.randomFill=function(e,i,r,n){if(!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof i)n=i,i=0,r=e.length;else if("function"==typeof r)n=r,r=e.length-i;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return c(i,e.length),f(r,i,e.length),A(e,i,r,n)},e.randomFillSync=function(e,i,r){void 0===i&&(i=0);if(!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');c(i,e.length),void 0===r&&(r=e.length-i);return f(r,i,e.length),A(e,i,r)}):(e.randomFill=n,e.randomFillSync=n)}).call(e,i("DuR2"),i("W2nU"))},"4Vh3":function(t,e){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},"4aPv":function(t,e,i){"use strict";var r=i("TWA+"),n=i("EHWV"),o=i("oyTM"),s=i("LBph"),a=i("bvvg");function u(t,e,i){var r=this._refs[i];if("string"==typeof r){if(!this._refs[r])return u.call(this,t,e,r);r=this._refs[r]}if((r=r||this._schemas[i])instanceof s)return A(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var n,o,a,l=h.call(this,e,i);return l&&(n=l.schema,e=l.root,a=l.baseId),n instanceof s?o=n.validate||t.call(this,n.schema,e,void 0,a):void 0!==n&&(o=A(n,this._opts.inlineRefs)?n:t.call(this,n,e,void 0,a)),o}function h(t,e){var i=r.parse(e),n=d(i),o=p(this._getId(t.schema));if(0===Object.keys(t.schema).length||n!==o){var a=y(n),u=this._refs[a];if("string"==typeof u)return function(t,e,i){var r=h.call(this,t,e);if(r){var n=r.schema,o=r.baseId;t=r.root;var s=this._getId(n);return s&&(o=g(o,s)),c.call(this,i,o,n,t)}}.call(this,t,u,i);if(u instanceof s)u.validate||this._compile(u),t=u;else{if(!((u=this._schemas[a])instanceof s))return;if(u.validate||this._compile(u),a==y(e))return{schema:u,root:t,baseId:o};t=u}if(!t.schema)return;o=p(this._getId(t.schema))}return c.call(this,i,o,t.schema,t)}t.exports=u,u.normalizeId=y,u.fullPath=p,u.url=g,u.ids=function(t){var e=y(this._getId(t)),i={"":e},s={"":p(e,!1)},u={},h=this;return a(t,{allKeys:!0},function(t,e,a,l,c,f,A){if(""!==e){var p=h._getId(t),d=i[l],m=s[l]+"/"+c;if(void 0!==A&&(m+="/"+("number"==typeof A?A:o.escapeFragment(A))),"string"==typeof p){p=d=y(d?r.resolve(d,p):p);var g=h._refs[p];if("string"==typeof g&&(g=h._refs[g]),g&&g.schema){if(!n(t,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(m))if("#"==p[0]){if(u[p]&&!n(t,u[p]))throw new Error('id "'+p+'" resolves to more than one schema');u[p]=t}else h._refs[p]=m}i[e]=d,s[e]=m}}),u},u.inlineRef=A,u.schema=h;var l=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function c(t,e,i,r){if(t.fragment=t.fragment||"","/"==t.fragment.slice(0,1)){for(var n=t.fragment.split("/"),s=1;s<n.length;s++){var a=n[s];if(a){if(void 0===(i=i[a=o.unescapeFragment(a)]))break;var u;if(!l[a]&&((u=this._getId(i))&&(e=g(e,u)),i.$ref)){var c=g(e,i.$ref),f=h.call(this,r,c);f&&(i=f.schema,r=f.root,e=f.baseId)}}}return void 0!==i&&i!==r.schema?{schema:i,root:r,baseId:e}:void 0}}var f=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function A(t,e){return!1!==e&&(void 0===e||!0===e?function t(e){var i;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(i=e[r])&&!t(i))return!1}else for(var n in e){if("$ref"==n)return!1;if("object"==typeof(i=e[n])&&!t(i))return!1}return!0}(t):e?function t(e){var i,r=0;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(i=e[n])&&(r+=t(i)),r==1/0)return 1/0}else for(var o in e){if("$ref"==o)return 1/0;if(f[o])r++;else if("object"==typeof(i=e[o])&&(r+=t(i)+1),r==1/0)return 1/0}return r}(t)<=e:void 0)}function p(t,e){return!1!==e&&(t=y(t)),d(r.parse(t))}function d(t){return r.serialize(t).split("#")[0]+"#"}var m=/#\/?$/;function y(t){return t?t.replace(m,""):""}function g(t,e){return e=y(e),r.resolve(t,e)}},"4sPJ":function(t,e){t.exports=function(t){for(var e,i=t.length;i--;){if(255!==(e=t.readUInt8(i))){e++,t.writeUInt8(e,i);break}t.writeUInt8(0,i)}}},5:function(t,e){},"5JwX":function(t,e,i){"use strict";const r=i("Ya8g"),n=i("o/zv"),o=i("T70N"),s=i("+T9J"),a=i("H0ar"),u=new o({allErrors:!0,useDefaults:!0,errorDataPath:"property"});s(u,["instanceof","typeof"]);t.exports=((t,e,i)=>{if("string"==typeof t&&(t=r.readFileSync(n.resolve(t),"utf8"),t=JSON.parse(t)),!u.validate(t,e))throw new a(u.errors,i);return!0})},"5QAX":function(t,e,i){var r=i("2Ejg"),n=i("X3l8").Buffer;t.exports=function(t,e){return n.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},"5U1j":function(t,e,i){"use strict";const r=i("ZmO1"),n={null:null,true:!0,false:!1};t.exports=function(t){if("?"!==t.substr(0,1))throw new Error("A valid query string passed to parseQuery should begin with '?'");if(!(t=t.substr(1)))return{};if("{"===t.substr(0,1)&&"}"===t.substr(-1))return r.parse(t);const e=t.split(/[,&]/g),i=Object.create(null);return e.forEach(t=>{const e=t.indexOf("=");if(e>=0){let r=t.substr(0,e),o=decodeURIComponent(t.substr(e+1));n.hasOwnProperty(o)&&(o=n[o]),"[]"===r.substr(-2)?(r=decodeURIComponent(r.substr(0,r.length-2)),Array.isArray(i[r])||(i[r]=[]),i[r].push(o)):(r=decodeURIComponent(r),i[r]=o)}else"-"===t.substr(0,1)?i[decodeURIComponent(t.substr(1))]=!1:"+"===t.substr(0,1)?i[decodeURIComponent(t.substr(1))]=!0:i[decodeURIComponent(t)]=!0}),i}},"5x49":function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.schema[e],o=t.schemaPath+t.util.getProperty(e),s=t.errSchemaPath+"/"+e,a=!t.opts.allErrors,u=t.util.copy(t),h="";u.level++;var l="valid"+u.level,c=u.baseId,f=!0,A=n;if(A)for(var p,d=-1,m=A.length-1;d<m;)p=A[d+=1],(t.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||!1===p:t.util.schemaHasRules(p,t.RULES.all))&&(f=!1,u.schema=p,u.schemaPath=o+"["+d+"]",u.errSchemaPath=s+"/"+d,r+="  "+t.validate(u)+" ",u.baseId=c,a&&(r+=" if ("+l+") { ",h+="}"));return a&&(r+=f?" if (true) { ":" "+h.slice(0,-1)+" "),r}},6:function(t,e){},"6Gb6":function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n,o=" ",s=t.level,a=t.dataLevel,u=t.schema[e],h=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,f="data"+(a||""),A="valid"+s,p="errs__"+s,d=t.opts.$data&&u&&u.$data;d?(o+=" var schema"+s+" = "+t.util.getData(u.$data,a,t.dataPathArr)+"; ",n="schema"+s):n=u;var m,y,g,v,b,w="definition"+s,x=this.definition,M="";if(d&&x.$data){b="keywordValidate"+s;var _=x.validateSchema;o+=" var "+w+" = RULES.custom['"+e+"'].definition; var "+b+" = "+w+".validate;"}else{if(!(v=t.useCustomRule(this,u,t.schema,t)))return;n="validate.schema"+h,b=v.code,m=x.compile,y=x.inline,g=x.macro}var S=b+".errors",B="i"+s,E="ruleErr"+s,C=x.async;if(C&&!t.async)throw new Error("async keyword in sync schema");if(y||g||(o+=S+" = null;"),o+="var "+p+" = errors;var "+A+";",d&&x.$data&&(M+="}",o+=" if ("+n+" === undefined) { "+A+" = true; } else { ",_&&(M+="}",o+=" "+A+" = "+w+".validateSchema("+n+"); if ("+A+") { ")),y)x.statements?o+=" "+v.validate+" ":o+=" "+A+" = "+v.validate+"; ";else if(g){var T=t.util.copy(t);M="";T.level++;var F="valid"+T.level;T.schema=v.validate,T.schemaPath="";var P=t.compositeRule;t.compositeRule=T.compositeRule=!0;var O=t.validate(T).replace(/validate\.schema/g,b);t.compositeRule=T.compositeRule=P,o+=" "+O}else{(U=U||[]).push(o),o="",o+="  "+b+".call( ",t.opts.passContext?o+="this":o+="self",m||!1===x.schema?o+=" , "+f+" ":o+=" , "+n+" , "+f+" , validate.schema"+t.schemaPath+" ",o+=" , (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath);var D=a?"data"+(a-1||""):"parentData",R=a?t.dataPathArr[a]:"parentDataProperty",I=o+=" , "+D+" , "+R+" , rootData )  ";o=U.pop(),!1===x.errors?(o+=" "+A+" = ",C&&(o+="await "),o+=I+"; "):o+=C?" var "+(S="customErrors"+s)+" = null; try { "+A+" = await "+I+"; } catch (e) { "+A+" = false; if (e instanceof ValidationError) "+S+" = e.errors; else throw e; } ":" "+S+" = null; "+A+" = "+I+"; "}if(x.modifying&&(o+=" if ("+D+") "+f+" = "+D+"["+R+"];"),o+=""+M,x.valid)c&&(o+=" if (true) { ");else{var U;o+=" if ( ",void 0===x.valid?(o+=" !",o+=g?""+F:""+A):o+=" "+!x.valid+" ",o+=") { ",r=this.keyword,(U=U||[]).push(o),o="",(U=U||[]).push(o),o="",!1!==t.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ";var L=o;o=U.pop(),!t.compositeRule&&c?t.async?o+=" throw new ValidationError(["+L+"]); ":o+=" validate.errors = ["+L+"]; return false; ":o+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var k=o;o=U.pop(),y?x.errors?"full"!=x.errors&&(o+="  for (var "+B+"="+p+"; "+B+"<errors; "+B+"++) { var "+E+" = vErrors["+B+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+l+'"; } ',t.opts.verbose&&(o+=" "+E+".schema = "+n+"; "+E+".data = "+f+"; "),o+=" } "):!1===x.errors?o+=" "+k+" ":(o+=" if ("+p+" == errors) { "+k+" } else {  for (var "+B+"="+p+"; "+B+"<errors; "+B+"++) { var "+E+" = vErrors["+B+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+l+'"; } ',t.opts.verbose&&(o+=" "+E+".schema = "+n+"; "+E+".data = "+f+"; "),o+=" } } "):g?(o+="   var err =   ",!1!==t.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===x.errors?o+=" "+k+" ":(o+=" if (Array.isArray("+S+")) { if (vErrors === null) vErrors = "+S+"; else vErrors = vErrors.concat("+S+"); errors = vErrors.length;  for (var "+B+"="+p+"; "+B+"<errors; "+B+"++) { var "+E+" = vErrors["+B+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+t.errorPath+";  "+E+'.schemaPath = "'+l+'";  ',t.opts.verbose&&(o+=" "+E+".schema = "+n+"; "+E+".data = "+f+"; "),o+=" } } else { "+k+" } "),o+=" } ",c&&(o+=" else { ")}return o}},"6H47":function(t,e,i){"use strict";var r=i("sakm");t.exports=function t(e){if(!e._opts.$data)return e;var i=r.metaSchemaRef(e),n=[];return t.definition={validate:function t(e,i,r){if(void 0===r.selectCases)throw new Error('keyword "selectCases" is absent');var n=o(r,!1),s=n.cases[e];if(void 0===s&&(s=n.default),"boolean"==typeof s)return s;var a=s(i);return a||(t.errors=s.errors),a},$data:!0,metaSchema:{type:["string","number","boolean","null"]}},e.addKeyword("select",t.definition),e.addKeyword("selectCases",{compile:function(t,e){var i=o(e);for(var r in t)i.cases[r]=s(t[r]);return function(){return!0}},valid:!0,metaSchema:{type:"object",additionalProperties:i}}),e.addKeyword("selectDefault",{compile:function(t,e){return o(e).default=s(t),function(){return!0}},valid:!0,metaSchema:i}),e;function o(t,e){var i;return n.some(function(e){if(e.parentSchema===t)return i=e,!0}),i||!1===e||(i={parentSchema:t,cases:{},default:!0},n.push(i)),i}function s(t){return"boolean"==typeof t?t:e.compile(t)}}},"6ZSt":function(t,e){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},"6drS":function(t,e,i){"use strict";var r=i("xthj"),n=i("oyTM").toHash;t.exports=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],e=["type","$comment"];return t.all=n(e),t.types=n(["number","integer","string","array","object","boolean","null"]),t.forEach(function(i){i.rules=i.rules.map(function(i){var n;if("object"==typeof i){var o=Object.keys(i)[0];n=i[o],i=o,n.forEach(function(i){e.push(i),t.all[i]=!0})}return e.push(i),t.all[i]={keyword:i,code:r[i],implements:n}}),t.all.$comment={keyword:"$comment",code:r.$comment},i.type&&(t.types[i.type]=i)}),t.keywords=n(e.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t}},"6hW9":function(t,e,i){var r=i("BEbT"),n=i("X3l8").Buffer,o=i("z+8S");function s(t,e,i,s){o.call(this),this._cipher=new r.AES(e),this._prev=n.from(i),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=s,this._mode=t}i("LC74")(s,o),s.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},t.exports=s},7:function(t,e){},"76UX":function(t,e,i){"use strict";var r="undefined"!=typeof Symbol&&Symbol,n=i("9MlZ");t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&n())))}},"7VT+":function(t,e,i){"use strict";var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=i("Cgw8"),a=i("tXf9"),u=i("X3l8").Buffer;t.exports=function(t,e){var i,h=t.toString(),l=h.match(r);if(l){var c="aes"+l[1],f=u.from(l[2],"hex"),A=u.from(l[3].replace(/[\r\n]/g,""),"base64"),p=s(e,f.slice(0,8),parseInt(l[1],10)).key,d=[],m=a.createDecipheriv(c,p,f);d.push(m.update(A)),d.push(m.final()),i=u.concat(d)}else{var y=h.match(o);i=u.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:h.match(n)[1],data:i}}},"7ar3":function(t,e,i){"use strict";var r=i("2tI2"),n=i("2KBj"),o=i("d6cF"),s=i("hPi6"),a=i("Jo86"),u=i("XHij"),h=i("xTtY"),l=i("CWVY"),c=i("yY1b"),f=i("GJov"),A=i("/TgO"),p=i("Ih7h"),d=i("wTgI"),m=i("Ne07"),y=i("yzIx"),g=Function,v=function(t){try{return g('"use strict"; return ('+t+").constructor;")()}catch(t){}},b=i("kCPa"),w=i("ow1b"),x=function(){throw new h},M=b?function(){try{return arguments.callee,x}catch(t){try{return b(arguments,"callee").get}catch(t){return x}}}():x,_=i("76UX")(),S=i("dDmH"),B=i("aRdZ"),E=i("lXu4"),C=i("9RdJ"),T=i("llro"),F={},P="undefined"!=typeof Uint8Array&&S?S(Uint8Array):void 0,O={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":_&&S?S([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":F,"%AsyncGenerator%":F,"%AsyncGeneratorFunction%":F,"%AsyncIteratorPrototype%":F,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"==typeof Float16Array?void 0:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":F,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_&&S?S(S([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&_&&S?S((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&_&&S?S((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_&&S?S(""[Symbol.iterator]()):void 0,"%Symbol%":_?Symbol:void 0,"%SyntaxError%":u,"%ThrowTypeError%":M,"%TypedArray%":P,"%TypeError%":h,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":T,"%Function.prototype.apply%":C,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":B,"%Math.abs%":c,"%Math.floor%":f,"%Math.max%":A,"%Math.min%":p,"%Math.pow%":d,"%Math.round%":m,"%Math.sign%":y,"%Reflect.getPrototypeOf%":E};if(S)try{null.error}catch(t){var D=S(S(t));O["%Error.prototype%"]=D}var R={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=i("PiFy"),U=i("P8fb"),L=I.call(T,Array.prototype.concat),k=I.call(C,Array.prototype.splice),j=I.call(T,String.prototype.replace),Q=I.call(T,String.prototype.slice),N=I.call(T,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,H=/\\(\\)?/g,V=function(t,e){var i,r=t;if(U(R,r)&&(r="%"+(i=R[r])[0]+"%"),U(O,r)){var n=O[r];if(n===F&&(n=function t(e){var i;if("%AsyncFunction%"===e)i=v("async function () {}");else if("%GeneratorFunction%"===e)i=v("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=v("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(i=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=t("%AsyncGenerator%");n&&S&&(i=S(n.prototype))}return O[e]=i,i}(r)),void 0===n&&!e)throw new h("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:n}}throw new u("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new h("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new h('"allowMissing" argument must be a boolean');if(null===N(/^%?[^%]*%?$/,t))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=function(t){var e=Q(t,0,1),i=Q(t,-1);if("%"===e&&"%"!==i)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new u("invalid intrinsic syntax, expected opening `%`");var r=[];return j(t,z,function(t,e,i,n){r[r.length]=i?j(n,H,"$1"):e||t}),r}(t),r=i.length>0?i[0]:"",n=V("%"+r+"%",e),o=n.name,s=n.value,a=!1,l=n.alias;l&&(r=l[0],k(i,L([0,1],l)));for(var c=1,f=!0;c<i.length;c+=1){var A=i[c],p=Q(A,0,1),d=Q(A,-1);if(('"'===p||"'"===p||"`"===p||'"'===d||"'"===d||"`"===d)&&p!==d)throw new u("property names with quotes must have matching quotes");if("constructor"!==A&&f||(a=!0),U(O,o="%"+(r+="."+A)+"%"))s=O[o];else if(null!=s){if(!(A in s)){if(!e)throw new h("base intrinsic for "+t+" exists, but the property is not available.");return}if(b&&c+1>=i.length){var m=b(s,A);s=(f=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:s[A]}else f=U(s,A),s=s[A];f&&!a&&(O[o]=s)}}return s}},"7dSG":function(t,e,i){"use strict";(function(e,r){var n=i("ypnx");function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;t.entry=null;for(;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=y;var s,a=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:n.nextTick;y.WritableState=m;var u=Object.create(i("jOgh"));u.inherits=i("LC74");var h={deprecate:i("iP15")},l=i("UcPO"),c=i("kkc6").Buffer,f=(void 0!==r?r:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var A,p=i("x0Ha");function d(){}function m(t,e){s=s||i("DsFX"),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var u=t.highWaterMark,h=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:r&&(h||0===h)?h:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,o=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,r,o){--e.pendingcb,i?(n.nextTick(o,r),n.nextTick(M,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(o(r),t._writableState.errorEmitted=!0,t.emit("error",r),M(t,e))}(t,i,r,e,o);else{var s=w(i);s||i.corked||i.bufferProcessing||!i.bufferedRequest||b(t,i),r?a(v,t,i,s,o):v(t,i,s,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(t){if(s=s||i("DsFX"),!(A.call(y,this)||this instanceof s))return new y(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),l.call(this)}function g(t,e,i,r,n,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function v(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),M(t,e)}function b(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),s=e.corkedRequestsFree;s.entry=i;for(var a=0,u=!0;i;)n[a]=i,i.isBuf||(u=!1),i=i.next,a+=1;n.allBuffers=u,g(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,l=i.encoding,c=i.callback;if(g(t,e,!1,e.objectMode?1:h.length,h,l,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function M(t,e){var i=w(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,n.nextTick(x,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}u.inherits(y,l),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!A.call(this,t)||this===y&&(t&&t._writableState instanceof m)}})):A=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var r,o=this._writableState,s=!1,a=!o.objectMode&&(r=t,c.isBuffer(r)||r instanceof f);return a&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof i&&(i=d),o.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),n.nextTick(e,i)}(this,i):(a||function(t,e,i,r){var o=!0,s=!1;return null===i?s=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),n.nextTick(r,s),o=!1),o}(this,o,t,i))&&(o.pendingcb++,s=function(t,e,i,r,n,o){if(!i){var s=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,i));return e}(e,r,n);r!==s&&(i=!0,n="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else g(t,e,!1,a,r,n,o);return u}(this,o,a,t,e,i)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||b(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,i){e.ending=!0,M(t,e),i&&(e.finished?n.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,r,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=p.destroy,y.prototype._undestroy=p.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,i("W2nU"),i("DuR2"))},"7oWD":function(t,e,i){"use strict";var r=i("oyTM"),n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,h=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,c=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,f=/^(?:\/(?:[^~/]|~0|~1)*)*$/,A=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function d(t){return t="full"==t?"full":"fast",r.copy(d[t])}function m(t){var e=t.match(n);if(!e)return!1;var i=+e[1],r=+e[2],s=+e[3];return r>=1&&r<=12&&s>=1&&s<=(2==r&&function(t){return t%4==0&&(t%100!=0||t%400==0)}(i)?29:o[r])}function y(t,e){var i=t.match(s);if(!i)return!1;var r=i[1],n=i[2],o=i[3],a=i[5];return(r<=23&&n<=59&&o<=59||23==r&&59==n&&60==o)&&(!e||a)}t.exports=d,d.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":h,url:l,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:c,"json-pointer":f,"json-pointer-uri-fragment":A,"relative-json-pointer":p},d.full={date:m,time:y,"date-time":function(t){var e=t.split(g);return 2==e.length&&m(e[0])&&y(e[1],!0)},uri:function(t){return v.test(t)&&u.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":h,url:l,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:c,"json-pointer":f,"json-pointer-uri-fragment":A,"relative-json-pointer":p};var g=/t|\s/i;var v=/\/|:/;var b=/[^\\]\\Z/;function w(t){if(b.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}}},8:function(t,e){},"8/0b":function(t,e,i){"use strict";var r=i("1lLf"),n=i("YSDb"),o=i("08Lv"),s=r.rotr64_hi,a=r.rotr64_lo,u=r.shr64_hi,h=r.shr64_lo,l=r.sum64,c=r.sum64_hi,f=r.sum64_lo,A=r.sum64_4_hi,p=r.sum64_4_lo,d=r.sum64_5_hi,m=r.sum64_5_lo,y=n.BlockHash,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=g,this.W=new Array(160)}function b(t,e,i,r,n){var o=t&i^~t&n;return o<0&&(o+=4294967296),o}function w(t,e,i,r,n,o){var s=e&r^~e&o;return s<0&&(s+=4294967296),s}function x(t,e,i,r,n){var o=t&i^t&n^i&n;return o<0&&(o+=4294967296),o}function M(t,e,i,r,n,o){var s=e&r^e&o^r&o;return s<0&&(s+=4294967296),s}function _(t,e){var i=s(t,e,28)^s(e,t,2)^s(e,t,7);return i<0&&(i+=4294967296),i}function S(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function B(t,e){var i=s(t,e,14)^s(t,e,18)^s(e,t,9);return i<0&&(i+=4294967296),i}function E(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function C(t,e){var i=s(t,e,1)^s(t,e,8)^u(t,e,7);return i<0&&(i+=4294967296),i}function T(t,e){var i=a(t,e,1)^a(t,e,8)^h(t,e,7);return i<0&&(i+=4294967296),i}function F(t,e){var i=s(t,e,19)^s(e,t,29)^u(t,e,6);return i<0&&(i+=4294967296),i}function P(t,e){var i=a(t,e,19)^a(e,t,29)^h(t,e,6);return i<0&&(i+=4294967296),i}r.inherits(v,y),t.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=F(i[r-4],i[r-3]),o=P(i[r-4],i[r-3]),s=i[r-14],a=i[r-13],u=C(i[r-30],i[r-29]),h=T(i[r-30],i[r-29]),l=i[r-32],c=i[r-31];i[r]=A(n,o,s,a,u,h,l,c),i[r+1]=p(n,o,s,a,u,h,l,c)}},v.prototype._update=function(t,e){this._prepareBlock(t,e);var i=this.W,r=this.h[0],n=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],h=this.h[5],A=this.h[6],p=this.h[7],y=this.h[8],g=this.h[9],v=this.h[10],C=this.h[11],T=this.h[12],F=this.h[13],P=this.h[14],O=this.h[15];o(this.k.length===i.length);for(var D=0;D<i.length;D+=2){var R=P,I=O,U=B(y,g),L=E(y,g),k=b(y,g,v,C,T),j=w(y,g,v,C,T,F),Q=this.k[D],N=this.k[D+1],z=i[D],H=i[D+1],V=d(R,I,U,L,k,j,Q,N,z,H),G=m(R,I,U,L,k,j,Q,N,z,H);R=_(r,n),I=S(r,n),U=x(r,n,s,a,u),L=M(r,n,s,a,u,h);var K=c(R,I,U,L),Y=f(R,I,U,L);P=T,O=F,T=v,F=C,v=y,C=g,y=c(A,p,V,G),g=f(p,p,V,G),A=u,p=h,u=s,h=a,s=r,a=n,r=c(V,G,K,Y),n=f(V,G,K,Y)}l(this.h,0,r,n),l(this.h,2,s,a),l(this.h,4,u,h),l(this.h,6,A,p),l(this.h,8,y,g),l(this.h,10,v,C),l(this.h,12,T,F),l(this.h,14,P,O)},v.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},"87vf":function(t,e,i){t.exports=i("7dSG")},"8YCc":function(t,e){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},"8d0M":function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f="key"+n,A="idx"+n,p="patternMatched"+n,d="dataProperties"+n,m="",y=t.opts.ownProperties;r+="var "+c+" = true;",y&&(r+=" var "+d+" = undefined;");var g=s;if(g)for(var v,b=-1,w=g.length-1;b<w;){v=g[b+=1],r+=" var "+p+" = false;  ",r+=y?" "+d+" = "+d+" || Object.keys("+l+"); for (var "+A+"=0; "+A+"<"+d+".length; "+A+"++) { var "+f+" = "+d+"["+A+"]; ":" for (var "+f+" in "+l+") { ",r+=" "+p+" = "+t.usePattern(v)+".test("+f+"); if ("+p+") break; } ";var x=t.util.escapeQuotes(v);r+=" if (!"+p+") { "+c+" = false;  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'patternRequired' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingPattern: '"+x+"' } ",!1!==t.opts.messages&&(r+=" , message: 'should have property matching pattern \\'"+x+"\\'' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",h&&(m+="}",r+=" else { ")}return r+=""+m}},"8qUe":function(t,e,i){var r;r=function(){return e=[function(t,e,i){"use strict";i.r(e);var r={};function n(){}i.r(r),i.d(r,"ShadowMaterial",function(){return ue}),i.d(r,"SpriteMaterial",function(){return he}),i.d(r,"RawShaderMaterial",function(){return be}),i.d(r,"ShaderMaterial",function(){return ve}),i.d(r,"PointsMaterial",function(){return Q}),i.d(r,"MeshPhysicalMaterial",function(){return xe}),i.d(r,"MeshStandardMaterial",function(){return we}),i.d(r,"MeshPhongMaterial",function(){return Me}),i.d(r,"MeshToonMaterial",function(){return _e}),i.d(r,"MeshNormalMaterial",function(){return Se}),i.d(r,"MeshLambertMaterial",function(){return Be}),i.d(r,"MeshDepthMaterial",function(){return Ee}),i.d(r,"MeshDistanceMaterial",function(){return Ce}),i.d(r,"MeshBasicMaterial",function(){return Te}),i.d(r,"MeshMatcapMaterial",function(){return Fe}),i.d(r,"LineDashedMaterial",function(){return Oe}),i.d(r,"LineBasicMaterial",function(){return Pe}),i.d(r,"Material",function(){return O}),Object.assign(n.prototype,{addEventListener:function(t,e){void 0===this.u&&(this.u={});var i=this.u;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){var i;return void 0!==this.u&&void 0!==(i=this.u)[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){var i;void 0!==this.u&&void 0!==(t=this.u[t])&&-1!==(i=t.indexOf(e))&&t.splice(i,1)},dispatchEvent:function(t){if(void 0!==this.u){var e=this.u[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t)}}}});for(var o=0,s=1,a=2,u=0,h=1,l=100,c=204,f=205,A=3,p=0,d=306,m=1e3,y=1001,g=1003,v=1006,b=1009,w=1022,x=1023,M=3e3,_=3200,S=0,B=7680,E=519,C=[],T=0;T<256;T++)C[T]=(T<16?"0":"")+T.toString(16);var F={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(C[255&t]+C[t>>8&255]+C[t>>16&255]+C[t>>24&255]+"-"+C[255&e]+C[e>>8&255]+"-"+C[e>>16&15|64]+C[e>>24&255]+"-"+C[63&i|128]+C[i>>8&255]+"-"+C[i>>16&255]+C[i>>24&255]+C[255&r]+C[r>>8&255]+C[r>>16&255]+C[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*F.DEG2RAD},radToDeg:function(t){return t*F.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var o=Math.cos,s=Math.sin,a=o(i/2),u=(i=s(i/2),o((e+r)/2)),h=s((e+r)/2),l=o((e-r)/2),c=s((e-r)/2);o=o((r-e)/2),s=s((r-e)/2);"XYX"===n?t.set(a*h,i*l,i*c,a*u):"YZY"===n?t.set(i*c,a*h,i*l,a*u):"ZXZ"===n?t.set(i*l,i*c,a*h,a*u):"XZX"===n?t.set(a*h,i*s,i*o,a*u):"YXY"===n?t.set(i*o,a*h,i*s,a*u):"ZYZ"===n&&t.set(i*s,i*o,a*h,a*u)}},P=0;function O(){Object.defineProperty(this,"id",{value:P++}),this.uuid=F.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=h,this.side=o,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=c,this.blendDst=f,this.blendEquation=l,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=A,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=E,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=B,this.stencilZFail=B,this.stencilZPass=B,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}O.prototype=Object.assign(Object.create(n.prototype),{constructor:O,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i,r=t[e];void 0===r||("shading"===e?this.flatShading=1===r:void 0===(i=this[e])||(i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[e]=r))}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,i=null;if(null!==e)for(var r=e.length,n=(i=new Array(r),0);n!==r;++n)i[n]=e[n].clone();return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(O.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});var D={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},R={h:0,s:0,l:0},I={h:0,s:0,l:0};function U(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function L(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function k(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function j(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Q(t){O.call(this),this.type="PointsMaterial",this.color=new U(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function N(t,e,i,r){this.v=t||0,this._=e||0,this.A=i||0,this.S=void 0!==r?r:1}Object.assign(U.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){return t=F.euclideanModulo(t,1),e=F.clamp(e,0,1),i=F.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(this.r=L(e=2*i-(i=i<=.5?i*(1+e):i+e-i*e),i,t+1/3),this.g=L(e,i,t),this.b=L(e,i,t-1/3)),this},setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}if(u=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r,n,o,s=u[1],a=u[2];switch(s){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return r=parseFloat(i[1])/360,n=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,e(i[5]),this.setHSL(r,n,o)}}else if(u=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=(s=u[1]).length;if(3===u)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var e=D[t];return void 0!==e&&this.setHex(e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return e=0<(e=void 0===e?2:e)?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=k(t.r),this.g=k(t.g),this.b=k(t.b),this},copyLinearToSRGB:function(t){return this.r=j(t.r),this.g=j(t.g),this.b=j(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,i=this.r,r=this.g,n=this.b,o=Math.max(i,r,n),s=Math.min(i,r,n),a=(s+o)/2;if(s===o)h=e=0;else{var u=o-s,h=a<=.5?u/(o+s):u/(2-o-s);switch(o){case i:e=(r-n)/u+(r<n?6:0);break;case r:e=(n-i)/u+2;break;case n:e=(i-r)/u+4}e/=6}return t.h=e,t.s=h,t.l=a,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(R),R.h+=t,R.s+=e,R.l+=i,this.setHSL(R.h,R.s,R.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(R),t.getHSL(I);t=F.lerp(R.h,I.h,e);var i=F.lerp(R.s,I.s,e);e=F.lerp(R.l,I.l,e);return this.setHSL(t,i,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}}),U.NAMES=D,((Q.prototype=Object.create(O.prototype)).constructor=Q).prototype.isPointsMaterial=!0,Q.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},Object.assign(N,{slerp:function(t,e,i,r){return i.copy(t).slerp(e,r)},slerpFlat:function(t,e,i,r,n,o,s){var a,u,h,l=i[r+0],c=i[r+1],f=i[r+2],A=(i=i[r+3],r=n[o+0],n[o+1]),p=n[o+2];i===(n=n[o+3])&&l===r&&c===A&&f===p||(o=1-s,a=0<=(u=l*r+c*A+f*p+i*n)?1:-1,(h=1-u*u)>Number.EPSILON&&(h=Math.sqrt(h),u=Math.atan2(h,u*a),o=Math.sin(o*u)/h,s=Math.sin(s*u)/h),l=l*o+r*(u=s*a),c=c*o+A*u,f=f*o+p*u,i=i*o+n*u,o===1-s&&(l*=h=1/Math.sqrt(l*l+c*c+f*f+i*i),c*=h,f*=h,i*=h)),t[e]=l,t[e+1]=c,t[e+2]=f,t[e+3]=i}}),Object.defineProperties(N.prototype,{x:{get:function(){return this.v},set:function(t){this.v=t,this.T()}},y:{get:function(){return this._},set:function(t){this._=t,this.T()}},z:{get:function(){return this.A},set:function(t){this.A=t,this.T()}},w:{get:function(){return this.S},set:function(t){this.S=t,this.T()}}}),Object.assign(N.prototype,{isQuaternion:!0,set:function(t,e,i,r){return this.v=t,this._=e,this.A=i,this.S=r,this.T(),this},clone:function(){return new this.constructor(this.v,this._,this.A,this.S)},copy:function(t){return this.v=t.x,this._=t.y,this.A=t.z,this.S=t.w,this.T(),this},setFromEuler:function(t,e){var i,r,n,o,s,a,u;if(t&&t.isEuler)return s=t.v,a=t._,i=t.A,t=t.order,o=Math.cos,u=Math.sin,r=o(s/2),n=o(a/2),o=o(i/2),s=u(s/2),a=u(a/2),u=u(i/2),"XYZ"===t?(this.v=s*n*o+r*a*u,this._=r*a*o-s*n*u,this.A=r*n*u+s*a*o,this.S=r*n*o-s*a*u):"YXZ"===t?(this.v=s*n*o+r*a*u,this._=r*a*o-s*n*u,this.A=r*n*u-s*a*o,this.S=r*n*o+s*a*u):"ZXY"===t?(this.v=s*n*o-r*a*u,this._=r*a*o+s*n*u,this.A=r*n*u+s*a*o,this.S=r*n*o-s*a*u):"ZYX"===t?(this.v=s*n*o-r*a*u,this._=r*a*o+s*n*u,this.A=r*n*u-s*a*o,this.S=r*n*o+s*a*u):"YZX"===t?(this.v=s*n*o+r*a*u,this._=r*a*o+s*n*u,this.A=r*n*u-s*a*o,this.S=r*n*o-s*a*u):"XZY"===t&&(this.v=s*n*o-r*a*u,this._=r*a*o-s*n*u,this.A=r*n*u+s*a*o,this.S=r*n*o+s*a*u),!1!==e&&this.T(),this;throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this.v=t.x*i,this._=t.y*i,this.A=t.z*i,this.S=Math.cos(e),this.T(),this},setFromRotationMatrix:function(t){var e,i=(t=t.elements)[0],r=t[4],n=t[8],o=t[1],s=t[5],a=t[9],u=t[2],h=t[6],l=i+s+(t=t[10]);return 0<l?(e=.5/Math.sqrt(l+1),this.S=.25/e,this.v=(h-a)*e,this._=(n-u)*e,this.A=(o-r)*e):s<i&&t<i?(e=2*Math.sqrt(1+i-s-t),this.S=(h-a)/e,this.v=.25*e,this._=(r+o)/e,this.A=(n+u)/e):t<s?(e=2*Math.sqrt(1+s-i-t),this.S=(n-u)/e,this.v=(r+o)/e,this._=.25*e,this.A=(a+h)/e):(e=2*Math.sqrt(1+t-i-s),this.S=(o-r)/e,this.v=(n+u)/e,this._=(a+h)/e,this.A=.25*e),this.T(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.v=-t.y,this._=t.x,this.A=0):(this.v=0,this._=-t.z,this.A=t.y)):(this.v=t.y*e.z-t.z*e.y,this._=t.z*e.x-t.x*e.z,this.A=t.x*e.y-t.y*e.x),this.S=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(F.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0!==i&&(e=Math.min(1,e/i),this.slerp(t,e)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this.v*=-1,this._*=-1,this.A*=-1,this.T(),this},dot:function(t){return this.v*t.v+this._*t._+this.A*t.A+this.S*t.S},lengthSq:function(){return this.v*this.v+this._*this._+this.A*this.A+this.S*this.S},length:function(){return Math.sqrt(this.v*this.v+this._*this._+this.A*this.A+this.S*this.S)},normalize:function(){var t=this.length();return 0===t?(this.v=0,this._=0,this.A=0,this.S=1):(this.v=this.v*(t=1/t),this._=this._*t,this.A=this.A*t,this.S=this.S*t),this.T(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t.v,r=t._,n=t.A,o=(t=t.S,e.v),s=e._,a=e.A;e=e.S;return this.v=i*e+t*o+r*a-n*s,this._=r*e+t*s+n*o-i*a,this.A=n*e+t*a+i*s-r*o,this.S=t*e-i*o-r*s-n*a,this.T(),this},slerp:function(t,e){if(0!==e){if(1===e)return this.copy(t);var i,r=this.v,n=this._,o=this.A,s=this.S,a=s*t.S+r*t.v+n*t._+o*t.A;a<0?(this.S=-t.S,this.v=-t.v,this._=-t._,this.A=-t.A,a=-a):this.copy(t),1<=a?(this.S=s,this.v=r,this._=n,this.A=o):((t=1-a*a)<=Number.EPSILON?(this.S=(i=1-e)*s+e*this.S,this.v=i*r+e*this.v,this._=i*n+e*this._,this.A=i*o+e*this.A,this.normalize()):(i=Math.sqrt(t),t=Math.atan2(i,a),a=Math.sin((1-e)*t)/i,e=Math.sin(e*t)/i,this.S=s*a+this.S*e,this.v=r*a+this.v*e,this._=n*a+this._*e,this.A=o*a+this.A*e),this.T())}return this},equals:function(t){return t.v===this.v&&t._===this._&&t.A===this.A&&t.S===this.S},fromArray:function(t,e){return this.v=t[e=void 0===e?0:e],this._=t[e+1],this.A=t[e+2],this.S=t[e+3],this.T(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.v,t[e+1]=this._,t[e+2]=this.A,t[e+3]=this.S,t},fromBufferAttribute:function(t,e){return this.v=t.getX(e),this._=t.getY(e),this.A=t.getZ(e),this.S=t.getW(e),this},M:function(t){return this.T=t,this},T:function(){}});var z=new V,H=new N;function V(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}Object.assign(V.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler,this.applyQuaternion(H.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(H.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=1/((t=t.elements)[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,o=t.y,s=t.z,a=(t=t.w)*e+o*r-s*i,u=t*i+s*e-n*r,h=t*r+n*i-o*e;e=-n*e-o*i-s*r;return this.x=a*t+e*-n+u*-s-h*-o,this.y=u*t+e*-o+h*-n-a*-s,this.z=h*t+e*-s+a*-o-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,r=t.y,n=(t=t.z,e.x),o=e.y;e=e.z;return this.x=r*e-t*o,this.y=t*n-i*e,this.z=i*o-r*n,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return z.copy(this).projectOnVector(t),this.sub(z)},reflect:function(t){return this.sub(z.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(F.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var G=[new V,new V,new V,new V,new V,new V,new V,new V],K=new V,Y=new nt,X=new V,W=new V,q=new V,Z=new V,J=new V,$=new V,tt=new V,et=new V,it=new V,rt=new V;function nt(t,e){this.min=void 0!==t?t:new V(1/0,1/0,1/0),this.max=void 0!==e?e:new V(-1/0,-1/0,-1/0)}function ot(t,e,i,r,n){for(var o=0,s=t.length-3;o<=s;o+=3){rt.fromArray(t,o);var a=n.x*Math.abs(rt.x)+n.y*Math.abs(rt.y)+n.z*Math.abs(rt.z),u=e.dot(rt),h=i.dot(rt),l=r.dot(rt);if(Math.max(-Math.max(u,h,l),Math.min(u,h,l))>a)return!1}return!0}function st(t,e,i,r){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==r?r:1}function at(t,e){this.x=t||0,this.y=e||0}Object.assign(nt.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,s=-1/0,a=0,u=t.length;a<u;a+=3){var h=t[a],l=t[a+1],c=t[a+2];h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),o<l&&(o=l),s<c&&(s=c)}return this.min.set(e,i,r),this.max.set(n,o,s),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,s=-1/0,a=0,u=t.count;a<u;a++){var h=t.getX(a),l=t.getY(a),c=t.getZ(a);h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),o<l&&(o=l),s<c&&(s=c)}return this.min.set(e,i,r),this.max.set(n,o,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=K.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(t=new V),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new V),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);for(var e=t.geometry,i=(void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Y.copy(e.boundingBox),Y.applyMatrix4(t.matrixWorld),this.union(Y)),t.children),r=0,n=i.length;r<n;r++)this.expandByObject(i[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(e=new V),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,K),K.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,i=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x);return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(tt),et.subVectors(this.max,tt),X.subVectors(t.a,tt),W.subVectors(t.b,tt),q.subVectors(t.c,tt),Z.subVectors(W,X),J.subVectors(q,W),$.subVectors(X,q),!!ot([0,-Z.z,Z.y,0,-J.z,J.y,0,-$.z,$.y,Z.z,0,-Z.x,J.z,0,-J.x,$.z,0,-$.x,-Z.y,Z.x,0,-J.y,J.x,0,-$.y,$.x,0],X,W,q,et))&&!!ot([1,0,0,0,1,0,0,0,1],X,W,q,et)&&(it.crossVectors(Z,J),ot([it.x,it.y,it.z],X,W,q,et))},clampPoint:function(t,e){return void 0===e&&(e=new V),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return K.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(K).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(G[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),G[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),G[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),G[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),G[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),G[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),G[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),G[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(G)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.defineProperties(st.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(st.prototype,{isVector4:!0,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r+t[12]*n,this.y=t[1]*e+t[5]*i+t[9]*r+t[13]*n,this.z=t[2]*e+t[6]*i+t[10]*r+t[14]*n,this.w=t[3]*e+t[7]*i+t[11]*r+t[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r,n,o,s,a,u,h,l,c=(t=t.elements)[0],f=t[4],A=t[8],p=t[1],d=t[5],m=t[9],y=t[2],g=t[6];t=t[10];return Math.abs(f-p)<.01&&Math.abs(A-y)<.01&&Math.abs(m-g)<.01?Math.abs(f+p)<.1&&Math.abs(A+y)<.1&&Math.abs(m+g)<.1&&Math.abs(c+d+t-3)<.1?this.set(1,0,0,0):(n=Math.PI,s=(t+1)/2,a=(f+p)/4,u=(A+y)/4,h=(m+g)/4,(o=(d+1)/2)<(l=(c+1)/2)&&s<l?r=l<.01?(e=0,i=.707106781):(i=a/(e=Math.sqrt(l)),u/e):s<o?r=o<.01?(i=0,e=.707106781):(e=a/(i=Math.sqrt(o)),h/i):s<.01?(i=e=.707106781,r=0):(e=u/(r=Math.sqrt(s)),i=h/r),this.set(e,i,r,n)):(l=Math.sqrt((g-m)*(g-m)+(A-y)*(A-y)+(p-f)*(p-f)),Math.abs(l)<.001&&(l=1),this.x=(g-m)/l,this.y=(A-y)/l,this.z=(p-f)/l,this.w=Math.acos((c+d+t-1)/2)),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Object.defineProperties(at.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(at.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),r=(e=Math.sin(e),this.x-t.x),n=this.y-t.y;return this.x=r*i-n*e+t.x,this.y=r*e+n*i+t.y,this}});var ut=new V;function ht(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function lt(t,e,i){ht.call(this,new Int8Array(t),e,i)}function ct(t,e,i){ht.call(this,new Uint8Array(t),e,i)}function ft(t,e,i){ht.call(this,new Uint8ClampedArray(t),e,i)}function At(t,e,i){ht.call(this,new Int16Array(t),e,i)}function pt(t,e,i){ht.call(this,new Uint16Array(t),e,i)}function dt(t,e,i){ht.call(this,new Int32Array(t),e,i)}function mt(t,e,i){ht.call(this,new Uint32Array(t),e,i)}function yt(t,e,i){ht.call(this,new Float32Array(t),e,i)}function gt(t,e,i){ht.call(this,new Float64Array(t),e,i)}Object.defineProperty(ht.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ht.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new U),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new at),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new V),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new st),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},applyMatrix3:function(t){for(var e=0,i=this.count;e<i;e++)ut.x=this.getX(e),ut.y=this.getY(e),ut.z=this.getZ(e),ut.applyMatrix3(t),this.setXYZ(e,ut.x,ut.y,ut.z);return this},applyMatrix4:function(t){for(var e=0,i=this.count;e<i;e++)ut.x=this.getX(e),ut.y=this.getY(e),ut.z=this.getZ(e),ut.applyMatrix4(t),this.setXYZ(e,ut.x,ut.y,ut.z);return this},applyNormalMatrix:function(t){for(var e=0,i=this.count;e<i;e++)ut.x=this.getX(e),ut.y=this.getY(e),ut.z=this.getZ(e),ut.applyNormalMatrix(t),this.setXYZ(e,ut.x,ut.y,ut.z);return this},transformDirection:function(t){for(var e=0,i=this.count;e<i;e++)ut.x=this.getX(e),ut.y=this.getY(e),ut.z=this.getZ(e),ut.transformDirection(t),this.setXYZ(e,ut.x,ut.y,ut.z);return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(lt.prototype=Object.create(ht.prototype)).constructor=lt,(ct.prototype=Object.create(ht.prototype)).constructor=ct,(ft.prototype=Object.create(ht.prototype)).constructor=ft,(At.prototype=Object.create(ht.prototype)).constructor=At,pt.prototype=Object.create(ht.prototype),pt.prototype.constructor=pt,(dt.prototype=Object.create(ht.prototype)).constructor=dt,mt.prototype=Object.create(ht.prototype),mt.prototype.constructor=mt,(yt.prototype=Object.create(ht.prototype)).constructor=yt,(gt.prototype=Object.create(ht.prototype)).constructor=gt;var vt=new nt;function bt(t,e){this.center=void 0!==t?t:new V,this.radius=void 0!==e?e:0}function wt(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(bt.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){for(var i=this.center,r=(void 0!==e?i.copy(e):vt.setFromPoints(t).getCenter(i),0),n=0,o=t.length;n<o;n++)r=Math.max(r,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(e=new V),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(t=new nt),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(wt.prototype,{computeGroups:function(t){for(var e,i=[],r=void 0,n=t.faces,o=0;o<n.length;o++){var s=n[o];s.materialIndex!==r&&(r=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e=t.faces,i=t.vertices,r=t.faceVertexUvs,n=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,a=s.length;if(0<a){for(var u=[],h=0;h<a;h++)u[h]={name:s[h].name,data:[]};this.morphTargets.position=u}var l=t.morphNormals,c=l.length;if(0<c){var f=[];for(h=0;h<c;h++)f[h]={name:l[h].name,data:[]};this.morphTargets.normal=f}var A=t.skinIndices,p=t.skinWeights,d=A.length===i.length,m=p.length===i.length;for(0<i.length&&e.length,h=0;h<e.length;h++){var y,g,v=e[h];3===(g=(3===(g=(this.vertices.push(i[v.a],i[v.b],i[v.c]),v.vertexNormals)).length?this.normals.push(g[0],g[1],g[2]):(g=v.normal,this.normals.push(g,g,g)),v.vertexColors)).length?this.colors.push(g[0],g[1],g[2]):(g=v.color,this.colors.push(g,g,g)),!0===n&&(void 0!==(y=r[0][h])?this.uvs.push(y[0],y[1],y[2]):this.uvs.push(new at,new at,new at)),!0===o&&(void 0!==(y=r[1][h])?this.uvs2.push(y[0],y[1],y[2]):this.uvs2.push(new at,new at,new at));for(var b=0;b<a;b++){var w=s[b].vertices;u[b].data.push(w[v.a],w[v.b],w[v.c])}for(b=0;b<c;b++){var x=l[b].vertexNormals[h];f[b].data.push(x.a,x.b,x.c)}d&&this.skinIndices.push(A[v.a],A[v.b],A[v.c]),m&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var xt=new V,Mt=new Tt,_t=new V(0,0,0),St=new V(1,1,1),Bt=new V,Et=new V,Ct=new V;function Tt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length}Object.assign(Tt.prototype,{isMatrix4:!0,set:function(t,e,i,r,n,o,s,a,u,h,l,c,f,A,p,d){var m=this.elements;return m[0]=t,m[4]=e,m[8]=i,m[12]=r,m[1]=n,m[5]=o,m[9]=s,m[13]=a,m[2]=u,m[6]=h,m[10]=l,m[14]=c,m[3]=f,m[7]=A,m[11]=p,m[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Tt).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,i=t.elements,r=1/xt.setFromMatrixColumn(t,0).length(),n=1/xt.setFromMatrixColumn(t,1).length();t=1/xt.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler;var e,i,r,n,o,s,a,u,h,l,c,f,A=this.elements,p=t.x,d=t.y,m=t.z,y=Math.cos(p),g=(p=Math.sin(p),Math.cos(d)),v=(d=Math.sin(d),Math.cos(m));m=Math.sin(m);return"XYZ"===t.order?(o=y*v,s=y*m,a=p*v,u=p*m,A[0]=g*v,A[4]=-g*m,A[8]=d,A[1]=s+a*d,A[5]=o-u*d,A[9]=-p*g,A[2]=u-o*d,A[6]=a+s*d,A[10]=y*g):"YXZ"===t.order?(i=g*m,r=d*v,A[0]=(e=g*v)+(n=d*m)*p,A[4]=r*p-i,A[8]=y*d,A[1]=y*m,A[5]=y*v,A[9]=-p,A[2]=i*p-r,A[6]=n+e*p,A[10]=y*g):"ZXY"===t.order?(i=g*m,r=d*v,A[0]=(e=g*v)-(n=d*m)*p,A[4]=-y*m,A[8]=r+i*p,A[1]=i+r*p,A[5]=y*v,A[9]=n-e*p,A[2]=-y*d,A[6]=p,A[10]=y*g):"ZYX"===t.order?(o=y*v,s=y*m,a=p*v,u=p*m,A[0]=g*v,A[4]=a*d-s,A[8]=o*d+u,A[1]=g*m,A[5]=u*d+o,A[9]=s*d-a,A[2]=-d,A[6]=p*g,A[10]=y*g):"YZX"===t.order?(h=y*g,l=y*d,c=p*g,f=p*d,A[0]=g*v,A[4]=f-h*m,A[8]=c*m+l,A[1]=m,A[5]=y*v,A[9]=-p*v,A[2]=-d*v,A[6]=l*m+c,A[10]=h-f*m):"XZY"===t.order&&(h=y*g,l=y*d,c=p*g,f=p*d,A[0]=g*v,A[4]=-m,A[8]=d*v,A[1]=h*m+f,A[5]=y*v,A[9]=l*m-c,A[2]=c*m-l,A[6]=p*v,A[10]=f*m+h),A[3]=0,A[7]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(_t,t,St)},lookAt:function(t,e,i){var r=this.elements;return Ct.subVectors(t,e),0===Ct.lengthSq()&&(Ct.z=1),Ct.normalize(),Bt.crossVectors(i,Ct),0===Bt.lengthSq()&&(1===Math.abs(i.z)?Ct.x+=1e-4:Ct.z+=1e-4,Ct.normalize(),Bt.crossVectors(i,Ct)),Bt.normalize(),Et.crossVectors(Ct,Bt),r[0]=Bt.x,r[4]=Et.x,r[8]=Ct.x,r[1]=Bt.y,r[5]=Et.y,r[9]=Ct.y,r[2]=Bt.z,r[6]=Et.z,r[10]=Ct.z,this},multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){t=t.elements,e=e.elements;var i=this.elements,r=t[0],n=t[4],o=t[8],s=t[12],a=t[1],u=t[5],h=t[9],l=t[13],c=t[2],f=t[6],A=t[10],p=t[14],d=t[3],m=t[7],y=t[11],g=(t=t[15],e[0]),v=e[4],b=e[8],w=e[12],x=e[1],M=e[5],_=e[9],S=e[13],B=e[2],E=e[6],C=e[10],T=e[14],F=e[3],P=e[7],O=e[11];e=e[15];return i[0]=r*g+n*x+o*B+s*F,i[4]=r*v+n*M+o*E+s*P,i[8]=r*b+n*_+o*C+s*O,i[12]=r*w+n*S+o*T+s*e,i[1]=a*g+u*x+h*B+l*F,i[5]=a*v+u*M+h*E+l*P,i[9]=a*b+u*_+h*C+l*O,i[13]=a*w+u*S+h*T+l*e,i[2]=c*g+f*x+A*B+p*F,i[6]=c*v+f*M+A*E+p*P,i[10]=c*b+f*_+A*C+p*O,i[14]=c*w+f*S+A*T+p*e,i[3]=d*g+m*x+y*B+t*F,i[7]=d*v+m*M+y*E+t*P,i[11]=d*b+m*_+y*C+t*O,i[15]=d*w+m*S+y*T+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],o=t[1],s=t[5],a=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+n*a*l-r*u*l-n*s*c+i*u*c+r*s*f-i*a*f)+t[7]*(+e*a*f-e*u*c+n*o*c-r*o*f+r*u*h-n*a*h)+t[11]*(+e*u*l-e*s*f-n*o*l+i*o*f+n*s*h-i*u*h)+t[15]*(-r*s*h-e*a*l+e*s*c+r*o*l-i*o*c+i*a*h)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this},getInverse:function(t,e){e=this.elements;var i=(t=t.elements)[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],h=t[7],l=t[8],c=t[9],f=t[10],A=t[11],p=t[12],d=t[13],m=t[14],y=c*m*h-d*f*h+d*u*A-a*m*A-c*u*(t=t[15])+a*f*t,g=p*f*h-l*m*h-p*u*A+s*m*A+l*u*t-s*f*t,v=l*d*h-p*c*h+p*a*A-s*d*A-l*a*t+s*c*t,b=p*c*u-l*d*u-p*a*f+s*d*f+l*a*m-s*c*m,w=i*y+r*g+n*v+o*b;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(e[0]=y*(y=1/w),e[1]=(d*f*o-c*m*o-d*n*A+r*m*A+c*n*t-r*f*t)*y,e[2]=(a*m*o-d*u*o+d*n*h-r*m*h-a*n*t+r*u*t)*y,e[3]=(c*u*o-a*f*o-c*n*h+r*f*h+a*n*A-r*u*A)*y,e[4]=g*y,e[5]=(l*m*o-p*f*o+p*n*A-i*m*A-l*n*t+i*f*t)*y,e[6]=(p*u*o-s*m*o-p*n*h+i*m*h+s*n*t-i*u*t)*y,e[7]=(s*f*o-l*u*o+l*n*h-i*f*h-s*n*A+i*u*A)*y,e[8]=v*y,e[9]=(p*c*o-l*d*o-p*r*A+i*d*A+l*r*t-i*c*t)*y,e[10]=(s*d*o-p*a*o+p*r*h-i*d*h-s*r*t+i*a*t)*y,e[11]=(l*a*o-s*c*o-l*r*h+i*c*h+s*r*A-i*a*A)*y,e[12]=b*y,e[13]=(l*d*n-p*c*n+p*r*f-i*d*f-l*r*m+i*c*m)*y,e[14]=(p*a*n-s*d*n-p*r*u+i*d*u+s*r*m-i*a*m)*y,e[15]=(s*c*n-l*a*n+l*r*u-i*c*u-s*r*f+i*a*f)*y,this)},invert:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8],l=t[9],c=t[10],f=t[11],A=t[12],p=t[13],d=t[14],m=t[15],y=l*d*u-p*c*u+p*a*f-s*d*f-l*a*m+s*c*m,g=A*c*u-h*d*u-A*a*f+o*d*f+h*a*m-o*c*m,v=h*p*u-A*l*u+A*s*f-o*p*f-h*s*m+o*l*m,b=A*l*a-h*p*a-A*s*c+o*p*c+h*s*d-o*l*d,w=e*y+i*g+r*v+n*b;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(t[0]=y*(y=1/w),t[1]=(p*c*n-l*d*n-p*r*f+i*d*f+l*r*m-i*c*m)*y,t[2]=(s*d*n-p*a*n+p*r*u-i*d*u-s*r*m+i*a*m)*y,t[3]=(l*a*n-s*c*n-l*r*u+i*c*u+s*r*f-i*a*f)*y,t[4]=g*y,t[5]=(h*d*n-A*c*n+A*r*f-e*d*f-h*r*m+e*c*m)*y,t[6]=(A*a*n-o*d*n-A*r*u+e*d*u+o*r*m-e*a*m)*y,t[7]=(o*c*n-h*a*n+h*r*u-e*c*u-o*r*f+e*a*f)*y,t[8]=v*y,t[9]=(A*l*n-h*p*n-A*i*f+e*p*f+h*i*m-e*l*m)*y,t[10]=(o*p*n-A*s*n+A*i*u-e*p*u-o*i*m+e*s*m)*y,t[11]=(h*s*n-o*l*n-h*i*u+e*l*u+o*i*f-e*s*f)*y,t[12]=b*y,t[13]=(h*p*r-A*l*r+A*i*c-e*p*c-h*i*d+e*l*d)*y,t[14]=(A*s*r-o*p*r-A*i*a+e*p*a+o*i*d-e*s*d)*y,t[15]=(o*l*r-h*s*r+h*i*a-e*l*a-o*i*c+e*s*c)*y,this)},scale:function(t){var e=this.elements,i=t.x,r=t.y;t=t.z;return e[0]*=i,e[4]*=r,e[8]*=t,e[1]*=i,e[5]*=r,e[9]*=t,e[2]*=i,e[6]*=r,e[10]*=t,e[3]*=i,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=(i=this.elements)[0]*i[0]+i[1]*i[1]+i[2]*i[2],e=i[4]*i[4]+i[5]*i[5]+i[6]*i[6],i=i[8]*i[8]+i[9]*i[9]+i[10]*i[10];return Math.sqrt(Math.max(t,e,i))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=(e=Math.sin(e),1-i),n=t.x,o=t.y,s=(t=t.z,r*n),a=r*o;return this.set(s*n+i,s*o-e*t,s*t+e*o,0,s*o+e*t,a*o+i,a*t-e*n,0,s*t-e*o,a*t+e*n,r*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var r=this.elements,n=e.v,o=e._,s=e.A,a=(e=e.S,n*(l=n+n)),u=n*(c=o+o),h=(n=n*(f=s+s),o*c),l=(o=o*f,s=s*f,e*l),c=e*c,f=(e=e*f,i.x),A=i.y;i=i.z;return r[0]=(1-(h+s))*f,r[1]=(u+e)*f,r[2]=(n-c)*f,r[3]=0,r[4]=(u-e)*A,r[5]=(1-(a+s))*A,r[6]=(o+l)*A,r[7]=0,r[8]=(n+c)*i,r[9]=(o-l)*i,r[10]=(1-(a+h))*i,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,i){var r=this.elements,n=xt.set(r[0],r[1],r[2]).length(),o=xt.set(r[4],r[5],r[6]).length(),s=xt.set(r[8],r[9],r[10]).length(),a=(t=(this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],Mt.copy(this),1/n),r=1/o,1/s);return Mt.elements[0]*=t,Mt.elements[1]*=t,Mt.elements[2]*=t,Mt.elements[4]*=r,Mt.elements[5]*=r,Mt.elements[6]*=r,Mt.elements[8]*=a,Mt.elements[9]*=a,Mt.elements[10]*=a,e.setFromRotationMatrix(Mt),i.x=n,i.y=o,i.z=s,this},makePerspective:function(t,e,i,r,n,o){var s=this.elements,a=2*n/(i-r),u=(e+t)/(e-t);i=(i+r)/(i-r),r=-(o+n)/(o-n),o=-2*o*n/(o-n);return s[0]=2*n/(e-t),s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=a,s[9]=i,s[13]=0,s[2]=0,s[6]=0,s[10]=r,s[14]=o,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,i,r,n,o){var s=this.elements,a=1/(e-t),u=1/(i-r),h=1/(o-n);e=(e+t)*a,t=(i+r)*u,i=(o+n)*h;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-e,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-t,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-i,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}});var Ft=new Tt,Pt=new N;function Ot(t,e,i,r){this.v=t||0,this._=e||0,this.A=i||0,this.P=r||Ot.DefaultOrder}function Dt(){this.mask=1}function Rt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length}Ot.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ot.DefaultOrder="XYZ",Object.defineProperties(Ot.prototype,{x:{get:function(){return this.v},set:function(t){this.v=t,this.T()}},y:{get:function(){return this._},set:function(t){this._=t,this.T()}},z:{get:function(){return this.A},set:function(t){this.A=t,this.T()}},order:{get:function(){return this.P},set:function(t){this.P=t,this.T()}}}),Object.assign(Ot.prototype,{isEuler:!0,set:function(t,e,i,r){return this.v=t,this._=e,this.A=i,this.P=r||this.P,this.T(),this},clone:function(){return new this.constructor(this.v,this._,this.A,this.P)},copy:function(t){return this.v=t.v,this._=t._,this.A=t.A,this.P=t.P,this.T(),this},setFromRotationMatrix:function(t,e,i){var r=F.clamp,n=(t=t.elements)[0],o=t[4],s=t[8],a=t[1],u=t[5],h=t[9],l=t[2],c=t[6];t=t[10];return"XYZ"===(e=e||this.P)?(this._=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this.v=Math.atan2(-h,t),this.A=Math.atan2(-o,n)):(this.v=Math.atan2(c,u),this.A=0)):"YXZ"===e?(this.v=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._=Math.atan2(s,t),this.A=Math.atan2(a,u)):(this._=Math.atan2(-l,n),this.A=0)):"ZXY"===e?(this.v=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._=Math.atan2(-l,t),this.A=Math.atan2(-o,u)):(this._=0,this.A=Math.atan2(a,n))):"ZYX"===e?(this._=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this.v=Math.atan2(c,t),this.A=Math.atan2(a,n)):(this.v=0,this.A=Math.atan2(-o,u))):"YZX"===e?(this.A=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this.v=Math.atan2(-h,u),this._=Math.atan2(-l,n)):(this.v=0,this._=Math.atan2(s,t))):"XZY"===e&&(this.A=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this.v=Math.atan2(c,u),this._=Math.atan2(s,n)):(this.v=Math.atan2(-h,t),this._=0)),this.P=e,!1!==i&&this.T(),this},setFromQuaternion:function(t,e,i){return Ft.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ft,e,i)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this.P)},reorder:function(t){return Pt.setFromEuler(this),this.setFromQuaternion(Pt,t)},equals:function(t){return t.v===this.v&&t._===this._&&t.A===this.A&&t.P===this.P},fromArray:function(t){return this.v=t[0],this._=t[1],this.A=t[2],void 0!==t[3]&&(this.P=t[3]),this.T(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.v,t[e+1]=this._,t[e+2]=this.A,t[e+3]=this.P,t},toVector3:function(t){return t?t.set(this.v,this._,this.A):new V(this.v,this._,this.A)},M:function(t){return this.T=t,this},T:function(){}}),Object.assign(Dt.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}}),Object.assign(Rt.prototype,{isMatrix3:!0,set:function(t,e,i,r,n,o,s,a,u){var h=this.elements;return h[0]=t,h[1]=r,h[2]=s,h[3]=e,h[4]=n,h[5]=a,h[6]=i,h[7]=o,h[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){t=t.elements,e=e.elements;var i=this.elements,r=t[0],n=t[3],o=t[6],s=t[1],a=t[4],u=t[7],h=t[2],l=t[5],c=(t=t[8],e[0]),f=e[3],A=e[6],p=e[1],d=e[4],m=e[7],y=e[2],g=e[5];e=e[8];return i[0]=r*c+n*p+o*y,i[3]=r*f+n*d+o*g,i[6]=r*A+n*m+o*e,i[1]=s*c+a*p+u*y,i[4]=s*f+a*d+u*g,i[7]=s*A+a*m+u*e,i[2]=h*c+l*p+t*y,i[5]=h*f+l*d+t*g,i[8]=h*A+l*m+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t,e=(t=this.elements)[0],i=t[1],r=t[2],n=t[3],o=t[4],s=t[5],a=t[6],u=t[7];return e*o*(t=t[8])-e*s*u-i*n*t+i*s*a+r*n*u-r*o*a},getInverse:function(t,e){e=t.elements,t=this.elements;var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],l=(e=e[8])*s-a*h,c=a*u-e*o,f=h*o-s*u,A=i*l+r*c+n*f;return 0==A?this.set(0,0,0,0,0,0,0,0,0):(t[0]=l*(l=1/A),t[1]=(n*h-e*r)*l,t[2]=(a*r-n*s)*l,t[3]=c*l,t[4]=(e*i-n*u)*l,t[5]=(n*o-a*i)*l,t[6]=f*l,t[7]=(r*u-h*i)*l,t[8]=(s*i-r*o)*l,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,r,n,o,s){var a=Math.cos(n);n=Math.sin(n);this.set(i*a,i*n,-i*(a*o+n*s)+o+t,-r*n,r*a,-r*(-n*o+a*s)+s+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=(t=Math.sin(t),this.elements),r=i[0],n=i[3],o=i[6],s=i[1],a=i[4],u=i[7];return i[0]=e*r+t*s,i[3]=e*n+t*a,i[6]=e*o+t*u,i[1]=-t*r+e*s,i[4]=-t*n+e*a,i[7]=-t*o+e*u,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var It=0,Ut=new V,Lt=new N,kt=new Tt,jt=new V,Qt=new V,Nt=new V,zt=new N,Ht=new V(1,0,0),Vt=new V(0,1,0),Gt=new V(0,0,1),Kt={type:"added"},Yt={type:"removed"};function Xt(){Object.defineProperty(this,"id",{value:It++}),this.uuid=F.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xt.DefaultUp.clone();var t=new V,e=new Ot,i=new N,r=new V(1,1,1);e.M(function(){i.setFromEuler(e,!1)}),i.M(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Tt},normalMatrix:{value:new Rt}}),this.matrix=new Tt,this.matrixWorld=new Tt,this.matrixAutoUpdate=Xt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Xt.DefaultUp=new V(0,1,0),Xt.DefaultMatrixAutoUpdate=!0,Xt.prototype=Object.assign(Object.create(n.prototype),{constructor:Xt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Lt.setFromAxisAngle(t,e),this.quaternion.multiply(Lt),this},rotateOnWorldAxis:function(t,e){return Lt.setFromAxisAngle(t,e),this.quaternion.premultiply(Lt),this},rotateX:function(t){return this.rotateOnAxis(Ht,t)},rotateY:function(t){return this.rotateOnAxis(Vt,t)},rotateZ:function(t){return this.rotateOnAxis(Gt,t)},translateOnAxis:function(t,e){return Ut.copy(t).applyQuaternion(this.quaternion),this.position.add(Ut.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Ht,t)},translateY:function(t){return this.translateOnAxis(Vt,t)},translateZ:function(t){return this.translateOnAxis(Gt,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(kt.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?jt.copy(t):jt.set(t,e,i),t=this.parent,this.updateWorldMatrix(!0,!1),Qt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?kt.lookAt(Qt,jt,this.up):kt.lookAt(jt,Qt,this.up),this.quaternion.setFromRotationMatrix(kt),t&&(kt.extractRotation(t.matrixWorld),Lt.setFromRotationMatrix(kt),this.quaternion.premultiply(Lt.inverse()))},add:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.add(arguments[e]);else t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(Kt));return this},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);else{var i=this.children.indexOf(t);-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Yt))}return this},attach:function(t){return this.updateWorldMatrix(!0,!1),kt.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),kt.multiply(t.parent.matrixWorld)),t.applyMatrix4(kt),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(t=new V),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(t=new N),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Qt,t,Nt),t},getWorldScale:function(t){return void 0===t&&(t=new V),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Qt,zt,t),t},getWorldDirection:function(t){void 0===t&&(t=new V),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,n=0,o=r.length;n<o;n++)r[n].updateWorldMatrix(!1,!0)},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}});var Wt=1,qt=new Tt,Zt=new Xt,Jt=new V,$t=new nt,te=new nt,ee=new V;function ie(){Object.defineProperty(this,"id",{value:Wt+=2}),this.uuid=F.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ie.prototype=Object.assign(Object.create(n.prototype),{constructor:ie,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<function(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}(t)?mt:pt)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e,i=(void 0!==(e=(void 0!==(e=this.attributes.position)&&(e.applyMatrix4(t),e.needsUpdate=!0),this.attributes.normal))&&(i=(new Rt).getNormalMatrix(t),e.applyNormalMatrix(i),e.needsUpdate=!0),this.attributes.tangent);return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return qt.makeRotationX(t),this.applyMatrix4(qt),this},rotateY:function(t){return qt.makeRotationY(t),this.applyMatrix4(qt),this},rotateZ:function(t){return qt.makeRotationZ(t),this.applyMatrix4(qt),this},translate:function(t,e,i){return qt.makeTranslation(t,e,i),this.applyMatrix4(qt),this},scale:function(t,e,i){return qt.makeScale(t,e,i),this.applyMatrix4(qt),this},lookAt:function(t){return Zt.lookAt(t),Zt.updateMatrix(),this.applyMatrix4(Zt.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jt).negate(),this.translate(Jt.x,Jt.y,Jt.z),this},setFromObject:function(t){var e,i,r=t.geometry;return t.isPoints||t.isLine?(i=new yt(3*r.vertices.length,3),e=new yt(3*r.colors.length,3),this.setAttribute("position",i.copyVector3sArray(r.vertices)),this.setAttribute("color",e.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(i=new yt(r.lineDistances.length,1),this.setAttribute("lineDistance",i.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new yt(e,3)),this},updateFromObject:function(t){var e,i=t.geometry;if(t.isMesh){var r=i.L;if(!0===i.elementsNeedUpdate&&(r=void 0,i.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(i);r.verticesNeedUpdate=i.verticesNeedUpdate,r.normalsNeedUpdate=i.normalsNeedUpdate,r.colorsNeedUpdate=i.colorsNeedUpdate,r.uvsNeedUpdate=i.uvsNeedUpdate,r.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=r}return!0===i.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(i.vertices),e.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(i.normals),e.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(i.colors),e.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(i.uvs),e.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(i.lineDistances),e.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.L=(new wt).fromGeometry(t),this.fromDirectGeometry(t.L)},fromDirectGeometry:function(t){var e,i=new Float32Array(3*t.vertices.length);for(e in this.setAttribute("position",new ht(i,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(i=new Float32Array(3*t.normals.length),this.setAttribute("normal",new ht(i,3).copyVector3sArray(t.normals))),0<t.colors.length&&(i=new Float32Array(3*t.colors.length),this.setAttribute("color",new ht(i,3).copyColorsArray(t.colors))),0<t.uvs.length&&(i=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new ht(i,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(i=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new ht(i,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){for(var r=[],n=t.morphTargets[e],o=0,s=n.length;o<s;o++){var a=n[o],u=new yt(3*a.data.length,3);u.name=a.name,r.push(u.copyVector3sArray(a.data))}this.morphAttributes[e]=r}return 0<t.skinIndices.length&&(i=new yt(4*t.skinIndices.length,4),this.setAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new yt(4*t.skinWeights.length,4),this.setAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new nt);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var n=e[i];$t.setFromBufferAttribute(n),this.morphTargetsRelative?(ee.addVectors(this.boundingBox.min,$t.min),this.boundingBox.expandByPoint(ee),ee.addVectors(this.boundingBox.max,$t.max),this.boundingBox.expandByPoint(ee)):(this.boundingBox.expandByPoint($t.min),this.boundingBox.expandByPoint($t.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new bt);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var i=this.boundingSphere.center;if($t.setFromBufferAttribute(t),e)for(var r=0,n=e.length;r<n;r++){var o=e[r];te.setFromBufferAttribute(o),this.morphTargetsRelative?(ee.addVectors($t.min,te.min),$t.expandByPoint(ee),ee.addVectors($t.max,te.max),$t.expandByPoint(ee)):($t.expandByPoint(te.min),$t.expandByPoint(te.max))}$t.getCenter(i);var s=0;for(r=0,n=t.count;r<n;r++)ee.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(ee));if(e)for(r=0,n=e.length;r<n;r++){o=e[r];for(var a=this.morphTargetsRelative,u=0,h=o.count;u<h;u++)ee.fromBufferAttribute(o,u),a&&(Jt.fromBufferAttribute(t,u),ee.add(Jt)),s=Math.max(s,i.distanceToSquared(ee))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new ht(new Float32Array(i.length),3));else for(var r=e.normal.array,n=0,o=r.length;n<o;n++)r[n]=0;var s,a,u,h=e.normal.array,l=new V,c=new V,f=new V,A=new V,p=new V;if(t){var d=t.array;for(n=0,o=t.count;n<o;n+=3)s=3*d[n+0],a=3*d[n+1],u=3*d[n+2],l.fromArray(i,s),c.fromArray(i,a),f.fromArray(i,u),A.subVectors(f,c),p.subVectors(l,c),A.cross(p),h[s]+=A.x,h[1+s]+=A.y,h[2+s]+=A.z,h[a]+=A.x,h[1+a]+=A.y,h[2+a]+=A.z,h[u]+=A.x,h[1+u]+=A.y,h[2+u]+=A.z}else for(n=0,o=i.length;n<o;n+=9)l.fromArray(i,n),c.fromArray(i,n+3),f.fromArray(i,n+6),A.subVectors(f,c),p.subVectors(l,c),A.cross(p),h[n]=A.x,h[n+1]=A.y,h[n+2]=A.z,h[n+3]=A.x,h[n+4]=A.y,h[n+5]=A.z,h[n+6]=A.x,h[n+7]=A.y,h[n+8]=A.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)ee.x=t.getX(e),ee.y=t.getY(e),ee.z=t.getZ(e),ee.normalize(),t.setXYZ(e,ee.x,ee.y,ee.z)},dispose:function(){this.dispatchEvent({type:"dispose"})}});var re={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function ne(t,e,i){var r=this,n=!1,o=0,s=0,a=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,!1===n&&void 0!==r.onStart&&r.onStart(t,o,s),n=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,s),o===s&&(n=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){return-1!==(t=u.indexOf(t))&&u.splice(t,2),this},this.getHandler=function(t){for(var e=0,i=u.length;e<i;e+=2){var r=u[e],n=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return n}return null},this.isLoaded=function(){return o===s}}var oe=new ne,se={};function ae(t){Re.call(this,t)}function ue(t){O.call(this),this.type="ShadowMaterial",this.color=new U(0),this.transparent=!0,this.setValues(t)}function he(t){O.call(this),this.type="SpriteMaterial",this.color=new U(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}function le(t){var e,i={};for(e in t)for(var r in i[e]={},t[e]){var n=t[e][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?i[e][r]=n.clone():Array.isArray(n)?i[e][r]=n.slice():i[e][r]=n}return i}function ce(t){for(var e={},i=0;i<t.length;i++){var r,n=le(t[i]);for(r in n)e[r]=n[r]}return e}ae.prototype=Object.assign(Object.create(Re.prototype),{constructor:ae,load:function(t,e,i,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,o=re.get(t);if(void 0!==o)return n.manager.itemStart(t),setTimeout(function(){e&&e(o),n.manager.itemEnd(t)},0),o;if(void 0===se[t]){var s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var a=s[1],u=!!s[2],h=s[3];h=decodeURIComponent(h);u&&(h=atob(h));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":for(var c=new Uint8Array(h.length),f=0;f<h.length;f++)c[f]=h.charCodeAt(f);A="blob"===l?new Blob([c.buffer],{type:a}):c.buffer;break;case"document":var A=(new DOMParser).parseFromString(h,a);break;case"json":A=JSON.parse(h);break;default:A=h}setTimeout(function(){e&&e(A),n.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){r&&r(e),n.manager.itemError(t),n.manager.itemEnd(t)},0)}}else{se[t]=[],se[t].push({onLoad:e,onProgress:i,onError:r});var p,d=new XMLHttpRequest;for(p in d.open("GET",t,!0),d.addEventListener("load",function(e){var i=this.response,r=se[t];if(delete se[t],200===this.status||0===this.status){this.status,re.add(t,i);for(var o=0,s=r.length;o<s;o++)(a=r[o]).onLoad&&a.onLoad(i)}else{var a;for(o=0,s=r.length;o<s;o++)(a=r[o]).onError&&a.onError(e);n.manager.itemError(t)}n.manager.itemEnd(t)},!1),d.addEventListener("progress",function(e){for(var i=se[t],r=0,n=i.length;r<n;r++){var o=i[r];o.onProgress&&o.onProgress(e)}},!1),d.addEventListener("error",function(e){var i=se[t];delete se[t];for(var r=0,o=i.length;r<o;r++){var s=i[r];s.onError&&s.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)},!1),d.addEventListener("abort",function(e){var i=se[t];delete se[t];for(var r=0,o=i.length;r<o;r++){var s=i[r];s.onError&&s.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)},!1),void 0!==this.responseType&&(d.responseType=this.responseType),void 0!==this.withCredentials&&(d.withCredentials=this.withCredentials),d.overrideMimeType&&d.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)d.setRequestHeader(p,this.requestHeader[p]);d.send(null)}return n.manager.itemStart(t),d}se[t].push({onLoad:e,onProgress:i,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),((ue.prototype=Object.create(O.prototype)).constructor=ue).prototype.isShadowMaterial=!0,ue.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this},((he.prototype=Object.create(O.prototype)).constructor=he).prototype.isSpriteMaterial=!0,he.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var fe,Ae,pe,de,me={clone:le,merge:ce},ye="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",ge="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n";function ve(t){O.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=ye,this.fragmentShader=ge,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(t.attributes,this.setValues(t))}function be(t){ve.call(this,t),this.type="RawShaderMaterial"}function we(t){O.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new U(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=S,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function xe(t){we.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new at(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}function Me(t){O.call(this),this.type="MeshPhongMaterial",this.color=new U(16777215),this.specular=new U(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=S,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _e(t){O.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new U(16777215),this.specular=new U(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=S,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Se(t){O.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=S,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Be(t){O.call(this),this.type="MeshLambertMaterial",this.color=new U(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ee(t){O.call(this),this.type="MeshDepthMaterial",this.depthPacking=_,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Ce(t){O.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Te(t){O.call(this),this.type="MeshBasicMaterial",this.color=new U(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}function Fe(t){O.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new U(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=S,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Pe(t){O.call(this),this.type="LineBasicMaterial",this.color=new U(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}function Oe(t){Pe.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function De(t){Re.call(this,t),this.textures={}}function Re(t){this.manager=void 0!==t?t:oe,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}function Ie(t){Re.call(this,t)}((ve.prototype=Object.create(O.prototype)).constructor=ve).prototype.isShaderMaterial=!0,ve.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=le(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},((be.prototype=Object.create(ve.prototype)).constructor=be).prototype.isRawShaderMaterial=!0,((we.prototype=Object.create(O.prototype)).constructor=we).prototype.isMeshStandardMaterial=!0,we.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},((xe.prototype=Object.create(we.prototype)).constructor=xe).prototype.isMeshPhysicalMaterial=!0,xe.prototype.copy=function(t){return we.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new U).copy(t.sheen):this.sheen=null,this.transparency=t.transparency,this},((Me.prototype=Object.create(O.prototype)).constructor=Me).prototype.isMeshPhongMaterial=!0,Me.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((_e.prototype=Object.create(O.prototype)).constructor=_e).prototype.isMeshToonMaterial=!0,_e.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Se.prototype=Object.create(O.prototype)).constructor=Se).prototype.isMeshNormalMaterial=!0,Se.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Be.prototype=Object.create(O.prototype)).constructor=Be).prototype.isMeshLambertMaterial=!0,Be.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Ee.prototype=Object.create(O.prototype)).constructor=Ee).prototype.isMeshDepthMaterial=!0,Ee.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},((Ce.prototype=Object.create(O.prototype)).constructor=Ce).prototype.isMeshDistanceMaterial=!0,Ce.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},((Te.prototype=Object.create(O.prototype)).constructor=Te).prototype.isMeshBasicMaterial=!0,Te.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},((Fe.prototype=Object.create(O.prototype)).constructor=Fe).prototype.isMeshMatcapMaterial=!0,Fe.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Pe.prototype=Object.create(O.prototype)).constructor=Pe).prototype.isLineBasicMaterial=!0,Pe.prototype.copy=function(t){return O.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},((Oe.prototype=Object.create(Pe.prototype)).constructor=Oe).prototype.isLineDashedMaterial=!0,Oe.prototype.copy=function(t){return Pe.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this},De.prototype=Object.assign(Object.create(Re.prototype),{constructor:De,load:function(t,e,i,r){var n=this,o=new ae(n.manager);o.setPath(n.path),o.load(t,function(t){e(n.parse(JSON.parse(t)))},i,r)},parse:function(t){var e=this.textures;function i(t){return e[t],e[t]}var n,o=new r[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.sheen&&(o.sheen=(new U).setHex(t.sheen)),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(o.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(o.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(o.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(o.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(o.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(o.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(o.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(o.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.vertexTangents&&(o.vertexTangents=t.vertexTangents),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?o.vertexColors=0<t.vertexColors:o.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var s in t.uniforms){var a=t.uniforms[s];switch(o.uniforms[s]={},a.type){case"t":o.uniforms[s].value=i(a.value);break;case"c":o.uniforms[s].value=(new U).setHex(a.value);break;case"v2":o.uniforms[s].value=(new at).fromArray(a.value);break;case"v3":o.uniforms[s].value=(new V).fromArray(a.value);break;case"v4":o.uniforms[s].value=(new st).fromArray(a.value);break;case"m3":o.uniforms[s].value=(new Rt).fromArray(a.value);case"m4":o.uniforms[s].value=(new Tt).fromArray(a.value);break;default:o.uniforms[s].value=a.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var u in t.extensions)o.extensions[u]=t.extensions[u];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=i(t.map)),void 0!==t.matcap&&(o.matcap=i(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(o.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(n=t.normalScale,!1===Array.isArray(n)&&(n=[n,n]),o.normalScale=(new at).fromArray(n)),void 0!==t.displacementMap&&(o.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=i(t.specularMap)),void 0!==t.envMap&&(o.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(o.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(o.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new at).fromArray(t.clearcoatNormalScale)),o},setTextures:function(t){return this.textures=t,this}}),Object.assign(Re.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),Object.assign(Re.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var r=[],n=0;n<t.length;++n)r[n]=this.createMaterial(t[n],e,i);return r},createMaterial:(fe={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Ae=new U,pe=new ke,de=new De,function(t,e,i){var r={};function n(t,n,o,s,a){t=e+t;var u=(null!==(u=(new ne).getHandler(t))?u:(pe.setCrossOrigin(i),pe)).load(t);void 0!==n&&(u.repeat.fromArray(n),1!==n[0]&&(u.wrapS=1e3),1!==n[1])&&(u.wrapT=1e3),void 0!==o&&u.offset.fromArray(o),void 0!==s&&("repeat"===s[0]&&(u.wrapS=1e3),"mirror"===s[0]&&(u.wrapS=1002),"repeat"===s[1]&&(u.wrapT=1e3),"mirror"===s[1])&&(u.wrapT=1002),void 0!==a&&(u.anisotropy=a),t=F.generateUUID();return r[t]=u,t}var o,s={uuid:F.generateUUID(),type:"MeshLambertMaterial"};for(o in t){var a=t[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":s.name=a;break;case"blending":s.blending=fe[a];break;case"colorAmbient":case"mapAmbient":break;case"colorDiffuse":s.color=Ae.fromArray(a).getHex();break;case"colorSpecular":s.specular=Ae.fromArray(a).getHex();break;case"colorEmissive":s.emissive=Ae.fromArray(a).getHex();break;case"specularCoef":s.shininess=a;break;case"shading":"basic"===a.toLowerCase()&&(s.type="MeshBasicMaterial"),"phong"===a.toLowerCase()&&(s.type="MeshPhongMaterial"),"standard"===a.toLowerCase()&&(s.type="MeshStandardMaterial");break;case"mapDiffuse":s.map=n(a,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":s.emissiveMap=n(a,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":s.lightMap=n(a,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":s.aoMap=n(a,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":s.bumpMap=n(a,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":s.bumpScale=a;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":s.normalMap=n(a,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":s.normalScale=a;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":s.specularMap=n(a,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":s.metalnessMap=n(a,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":s.roughnessMap=n(a,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":s.alphaMap=n(a,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":s.side=1;break;case"doubleSided":s.side=2;break;case"transparency":s.opacity=a;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":s[o]=a;break;case"vertexColors":!0===a&&(s.vertexColors=2),"face"===a&&(s.vertexColors=1)}}return"MeshBasicMaterial"===s.type&&delete s.emissive,"MeshPhongMaterial"!==s.type&&delete s.specular,s.opacity<1&&(s.transparent=!0),de.setTextures(r),de.parse(s)})}),Ie.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ie,load:function(t,e,i,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n,o=this,s=re.get(t);return void 0!==s?(o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s):((n=document.createElementNS("http://www.w3.org/1999/xhtml","img")).addEventListener("load",a,!1),n.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),o.manager.itemStart(t),n.src=t,n);function a(){n.removeEventListener("load",a,!1),n.removeEventListener("error",u,!1),re.add(t,this),e&&e(this),o.manager.itemEnd(t)}function u(e){n.removeEventListener("load",a,!1),n.removeEventListener("error",u,!1),r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}}});var Ue=0;function Le(t,e,i,r,n,o,s,a,u,h){Object.defineProperty(this,"id",{value:Ue++}),this.uuid=F.generateUUID(),this.name="",this.image=void 0!==t?t:Le.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Le.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:y,this.wrapT=void 0!==r?r:y,this.magFilter=void 0!==n?n:v,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==s?s:x,this.internalFormat=null,this.type=void 0!==a?a:b,this.offset=new at(0,0),this.repeat=new at(1,1),this.center=new at(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:M,this.version=0,this.onUpdate=null}function ke(t){Re.call(this,t)}Le.DEFAULT_IMAGE=void 0,Le.DEFAULT_MAPPING=300,Le.prototype=Object.assign(Object.create(n.prototype),{constructor:Le,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case m:t.x=t.x-Math.floor(t.x);break;case y:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case m:t.y=t.y-Math.floor(t.y);break;case y:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}return t}}),Object.defineProperty(Le.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),ke.prototype=Object.assign(Object.create(Re.prototype),{constructor:ke,load:function(t,e,i,r){var n=new Le,o=new Ie(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){n.image=i,i=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data\:image\/jpeg/),n.format=i?w:x,n.needsUpdate=!0,void 0!==e&&e(n)},i,r),n}});var je=new V,Qe=new V,Ne=new V,ze=new V,He=new V,Ve=new V,Ge=new V;function Ke(t,e){this.origin=void 0!==t?t:new V,this.direction=void 0!==e?e:new V(0,0,-1)}Object.assign(Ke.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(e=new V),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,je)),this},closestPointToPoint:function(t,e){return void 0===e&&(e=new V),e.subVectors(t,this.origin),(t=e.dot(this.direction))<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=je.subVectors(t,this.origin).dot(this.direction);return(e<0?this.origin:(je.copy(this.direction).multiplyScalar(e).add(this.origin),je)).distanceToSquared(t)},distanceSqToSegment:function(t,e,i,r){Qe.copy(t).add(e).multiplyScalar(.5),Ne.copy(e).sub(t).normalize(),ze.copy(this.origin).sub(Qe);t=.5*t.distanceTo(e),e=-this.direction.dot(Ne);var n,o,s,a=ze.dot(this.direction),u=-ze.dot(Ne),h=ze.lengthSq(),l=Math.abs(1-e*e);return l=0<l?(o=e*a-u,s=t*l,0<=(n=e*u-a)?-s<=o?o<=s?(n*=l=1/l)*(n+e*(o*=l)+2*a)+o*(e*n+o+2*u)+h:(o=t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h):(o=-t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h):o<=-s?-(n=Math.max(0,-(-e*t+a)))*n+(o=0<n?-t:Math.min(Math.max(-t,-u),t))*(o+2*u)+h:o<=s?(n=0,(o=Math.min(Math.max(-t,-u),t))*(o+2*u)+h):-(n=Math.max(0,-(e*t+a)))*n+(o=0<n?t:Math.min(Math.max(-t,-u),t))*(o+2*u)+h):(o=0<e?-t:t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h),i&&i.copy(this.direction).multiplyScalar(n).add(this.origin),r&&r.copy(Ne).multiplyScalar(o).add(Qe),l},intersectSphere:function(t,e){je.subVectors(t.center,this.origin);var i=je.dot(this.direction),r=je.dot(je)-i*i;return(t=t.radius*t.radius)<r||(r=i+(t=Math.sqrt(t-r)),(i-=t)<0&&r<0)?null:i<0?this.at(r,e):this.at(i,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,r,n,o=1/this.direction.x,s=1/this.direction.y,a=1/this.direction.z,u=this.origin;o=0<=o?(i=(t.min.x-u.x)*o,(t.max.x-u.x)*o):(i=(t.max.x-u.x)*o,(t.min.x-u.x)*o);return(s=0<=s?(n=(t.min.y-u.y)*s,(t.max.y-u.y)*s):(n=(t.max.y-u.y)*s,(t.min.y-u.y)*s))<i||o<n||((i<n||i!=i)&&(i=n),(s<o||o!=o)&&(o=s),(n=0<=a?(r=(t.min.z-u.z)*a,(t.max.z-u.z)*a):(r=(t.max.z-u.z)*a,(t.min.z-u.z)*a))<i)||o<r||((i<r||i!=i)&&(i=r),(o=n<o||o!=o?n:o)<0)?null:this.at(0<=i?i:o,e)},intersectsBox:function(t){return null!==this.intersectBox(t,je)},intersectTriangle:function(t,e,i,r,n){var o;if(He.subVectors(e,t),Ve.subVectors(i,t),Ge.crossVectors(He,Ve),0<(e=this.direction.dot(Ge))){if(r)return null;o=1}else{if(!(e<0))return null;o=-1,e=-e}return ze.subVectors(this.origin,t),(i=o*this.direction.dot(Ve.crossVectors(ze,Ve)))<0||(r=o*this.direction.dot(He.cross(ze)))<0||e<i+r||(t=-o*ze.dot(Ge))<0?null:this.at(t/e,n)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Ye=new Tt,Xe=new Ke,We=new bt,qe=new V;function Ze(t,e){Xt.call(this),this.type="Points",this.geometry=void 0!==t?t:new ie,this.material=void 0!==e?e:new Q,this.updateMorphTargets()}function Je(t,e,i,r,n,o,s){var a=Xe.distanceSqToPoint(t);a<i&&(i=new V,Xe.closestPointToPoint(t,i),i.applyMatrix4(r),(t=n.ray.origin.distanceTo(i))<n.near||t>n.far||o.push({distance:t,distanceToRay:Math.sqrt(a),point:i,index:e,face:null,object:s}))}function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===$e(t=function(t,e){if("object"!==$e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==$e(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Ze.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Ze,isPoints:!0,raycast:function(t,e){var i=this.geometry,r=this.matrixWorld,n=t.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),We.copy(i.boundingSphere),We.applyMatrix4(r),We.radius+=n,!1!==t.ray.intersectsSphere(We)){Ye.getInverse(r),Xe.copy(t.ray).applyMatrix4(Ye);var o=(n=n/((this.scale.x+this.scale.y+this.scale.z)/3))*n;if(i.isBufferGeometry){n=i.index;var s=i.attributes.position.array;if(null!==n)for(var a=n.array,u=0,h=a.length;u<h;u++){var l=a[u];qe.fromArray(s,3*l),Je(qe,l,o,r,t,e,this)}else{u=0;for(var c=s.length/3;u<c;u++)qe.fromArray(s,3*u),Je(qe,u,o,r,t,e,this)}}else{var f=i.vertices;for(u=0,c=f.length;u<c;u++)Je(f[u],u,o,r,t,e,this)}}},updateMorphTargets:function(){var t,e,i,r=this.geometry;if(r.isBufferGeometry){var n=r.morphAttributes,o=Object.keys(n);if(0<o.length){var s=n[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)i=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}else void 0!==(n=r.morphTargets)&&n.length},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ei=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var r=new Q({opacity:1,transparent:!0,depthTest:!1,size:5});this.material=r,this.geo=new ie,i=(new ke).load(i);r.map=i,r.needsUpdate=!0,this.pointsArrayLength=e.length,this.pointsArray=e,this.geo.setFromPoints(e),this.plength=e.length,this.points=new Ze(this.geo,r)}var e,i;return e=t,(i=[{key:"updatePoints",value:function(t){this.geo.setFromPoints(t)}},{key:"changePositions",value:function(t,e,i,r,n){for(var o=this.geo.attributes.position,s=0;s<this.plength;s++){var a=o.getX(s)+t*this.runstatus[s].x.sign*this.runstatus[s].x.weight,u=o.getY(s)+e*this.runstatus[s].y.sign*this.runstatus[s].y.weight,h=o.getZ(s)+i*this.runstatus[s].z.sign*this.runstatus[s].z.weight;r(a,u,h)?o.setXYZ(s,a,u,h):(a=n(),o.setXYZ(s,a.x,a.y,a.z))}o.needsUpdate=!0}},{key:"setRunStatus",value:function(t){this.runstatus=t}},{key:"setParticleCount",value:function(t){this.pointsArray.length=this.pointsArrayLength*t,this.geo.setFromPoints(this.pointsArray),this.points=new Ze(this.geo,this.material)}}])&&ti(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ii=((i={NONE:0,EXTRUDE_MARKER:2,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30}).LAYER_NODE_TYPE=new Map,i.LAYER_NODE_TYPE.set(i.EXTENT_LAYER,i.EXTENT),i.LAYER_NODE_TYPE.set(i.EXTERNAL_MODEL_LAYER,i.EXTERNAL_MODEL),i.LAYER_NODE_TYPE.set(i.MODEL_LAYER,i.MODEL),i.LAYER_NODE_TYPE.set(i.FACILITY_LAYER,i.FACILITY),i.LAYER_NODE_TYPE.set(i.LABEL_LAYER,i.LABEL),i.LAYER_NODE_TYPE.set(i.DOM_MARKER,i.DOM_MARKER),i.LAYER_NODE_TYPE.set(i.DYNAMIC_MODEL_MARKER,i.DYNAMIC_MODEL_MARKER),i.LAYER_NODE_TYPE.set(i.EXTRUDE_MARKER,i.EXTRUDE_MARKER),i.LAYER_NODE_TYPE.set(i.HEAT_MAP_MARKER,i.HEAT_MAP_MARKER),i.LAYER_NODE_TYPE.set(i.LINE_MARKER,i.LINE_MARKER),i.LAYER_NODE_TYPE.set(i.LOCATION_MARKER,i.LOCATION_MARKER),i.LAYER_NODE_TYPE.set(i.POLYGON_MARKER,i.POLYGON_MARKER),i.LAYER_NODE_TYPE.set(i.TEXT_MARKER,i.TEXT_MARKER),i.LAYER_NODE_TYPE.set(i.IMAGE_MARKER,i.IMAGE_MARKER),i.LAYER_NODE_TYPE.set(i.FLOW_LINE_LAYER,i.FLOW_LINE_MARKER),i.LAYER_NODE_TYPE.set(i.FIRE_MARKER,i.FIRE_MARKER),i.LAYER_NODE_TYPE.set(i.WALL_MARKER,i.WALL_MARKER),i.LAYER_NODE_TYPE.set(i.TUBE_MARKER,i.TUBE_MARKER),i.LAYER_NODE_TYPE.set(i.LINE3D_MARKER,i.LINE3D_MARKER),i.LAYER_NODE_TYPE.set(i.SPHERE_MARKER,i.SPHERE_MARKER),i);function ri(t,e){this.name="",this.color=new U(t),this.density=void 0!==e?e:25e-5}function ni(){Xt.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function si(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function ai(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===oi(t=function(t,e){if("object"!==oi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==oi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Object.assign(ri.prototype,{isFogExp2:!0,clone:function(){return new ri(this.color,this.density)}}),ni.prototype=Object.assign(Object.create(Xt.prototype),{constructor:ni,isScene:!0,copy:function(t,e){return Xt.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ui=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.type="effect",this.waterLayers=new Map,this.bloom=null,this.outLine=null,this.particle=null,this.sky=null,this.rain=null,this.flowlines=new Map,this.sweep=null,this.sao=null,this.fogEffect=null,this.fristRenderScene=new ni}var e,i;return e=t,(i=[{key:"render",value:function(){for(var t=this,e=(this.renderer.clear(),this.resize(),this.renderer.render(this.fristRenderScene,this.parent.camera),this.skyNeedTexture&&this.skyNeedTexture.render(),this.sky&&this.sky.render(),this.getTileLayScene()),i=(e&&this.renderer.render(e,this.parent.camera),this.getGroundLayerScene()),r=(i&&this.renderer.render(i,this.parent.camera),this.get3DTilesLayerSceneArr()),n=0;n<r.length;n++)this.renderer.render(r[n],this.parent.camera);this.parent.getInteracations().autoCameraNearFar.reset(),this.parent.getInteracations().autoCameraNearFar.update(this.getRenderList()),this.parent.getInteracations().autoCameraNearFar.update([e,i].concat(function(t){return function(t){if(Array.isArray(t))return si(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?si(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?si(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r))),this.sao&&this.sao.render(),this.outLine&&this.outLine.F(this.renderer);for(var o=Array.from(this.getRenderList()),s=0;s<o.length;s++){var a,u,h=o[s][0].split("%A%B%C%D"),l=(parseInt(h[1]),parseInt(h[2]));this.sweep&&this.sweep.render(o[s][1]),this.sao&&this.sao.add(o[s][1]),this.bloom||this.outLine||this.renderer.render(o[s][1],this.parent.camera),this.bloom&&(this.outLine||this.renderer.render(o[s][1],this.parent.camera),(u=this.bloom.N.get(h[0]+"_"+h[1]))&&(a=this.getLayerType(l),u=u.get(a))&&(c(u.scene),this.bloom.updateCamera(),this.bloom.D.add(u.scene),this.bloom.C.render(),this.bloom.D.remove(u.scene)),a=this.bloom.singleSceneList.get(h[0]+"_"+h[1]))&&(u=this.getLayerType(l),u=a.get(u))&&(c(u),this.renderer.render(u,this.parent.camera),this.bloom.updateCamera(),this.bloom.D.add(u),this.bloom.C.render(),this.bloom.D.remove(u),this.outLine)&&this.outLine.R(u),this.outLine&&(l===fengmap.FMType.EXTERNAL_MODEL_LAYER||l===fengmap.FMType.MODEL_LAYER||l===fengmap.FMType.DYNAMIC_MODEL_MARKER?this.outLine.R(o[s][1]):this.renderer.render(o[s][1],this.parent.camera)),u=h[0]+"_"+h[1],h=l,0<t.waterLayers.size&&(u=t.waterLayers.get(u))&&""+u.I==""+h&&(t.bloom||t.outLine?(null!==t.fogEffect?null===u.O.fog&&(u.O.fog=new ri(new U(t.fogEffect.U),t.fogEffect.j)):null!==u.O.fog&&(u.O.fog=null),h=t.renderer.getRenderTarget(),u.traverse(function(e){e.k.material.uniforms.time.value+=1/60,null!==t.fogEffect?e.k.material.fog||(e.k.material.fog=!0):e.k.material.fog&&(e.k.material.fog=!1),!1===t.renderer.autoClear&&(t.renderer.setRenderTarget(e.k.renderTarget),t.renderer.clear())}),t.renderer.setRenderTarget(h),t.renderer.render(u.O,t.parent.camera),t.renderer.render(u.H,t.parent.camera)):u.traverse(function(t){t.k.material.uniforms.time.value+=1/60}))}function c(t){for(var e=0;e<t.children.length;e++)"DirectionalLight"!==t.children[e].type&&"AmbientLight"!==t.children[e].type||(t.children[e].visible=!0)}this.parent.getMarkerGroup()&&this.renderer.render(this.parent.getMarkerGroup().scene,this.parent.camera),this.particle&&this.particle.render(),this.rain&&this.rain.render(),this.needLogo&&this.xx45f6&&this.renderer.render(this.xx45f6,this.parent.camera)}},{key:"getLayerType",value:function(t){switch(t){case ii.EXTENT:return ii.EXTENT_LAYER;case ii.EXTERNAL_MODEL:return ii.EXTERNAL_MODEL_LAYER;case ii.MODEL:return ii.MODEL_LAYER;case ii.FACILITY:return ii.FACILITY_LAYER;case ii.LABEL:return ii.LABEL_LAYER;default:return t}}}])&&ai(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===hi(t=function(t,e){if("object"!==hi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==hi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function ci(){Xt.call(this),this.type="Camera",this.matrixWorldInverse=new Tt,this.projectionMatrix=new Tt,this.projectionMatrixInverse=new Tt}function fi(t,e,i,r,n,o){ci.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ai(t,e,i,r){ie.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};for(var n=(t=t||1)/2,o=(e=e||1)/2,s=Math.floor(i)||1,a=Math.floor(r)||1,u=s+1,h=a+1,l=t/s,c=e/a,f=[],A=[],p=[],d=[],m=0;m<h;m++)for(var y=m*c-o,g=0;g<u;g++)A.push(g*l-n,-y,0),p.push(0,0,1),d.push(g/s),d.push(1-m/a);for(m=0;m<a;m++)for(g=0;g<s;g++){var v=g+u*(m+1),b=g+1+u*(m+1),w=g+1+u*m;f.push(g+u*m,v,w),f.push(v,b,w)}this.setIndex(f),this.setAttribute("position",new yt(A,3)),this.setAttribute("normal",new yt(p,3)),this.setAttribute("uv",new yt(d,2))}i=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.O=new ni,this.X=null,this.G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UqDnYQ6ZChOlkQK8VRqlgEC6Wt0KqDyaVf0MSQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIk6OToouU+L+k0CLGg+N+vLv3uHsHCK06U82+SUDVLCObSoqF4ooYfEUAEfiRQFxipp7OLeThOb7u4ePrXYxneZ/7cwwqJZMBPpF4lumGRbxOnNi0dM77xGFWlRTic+IJgy5I/Mh12eU3zhWHBZ4ZNvLZOeIwsVjpYbmHWdVQiaeJo4qqUb5QcFnhvMVZrTdY5578haGStpzjOs0IUlhEGhmIkNFADXVYiNGqkWIiS/tJD/+o48+QSyZXDYwc89iACsnxg//B727NcnzKTQolgcCLbX+MAcFdoN207e9j226fAP5n4Err+jdawMwn6c2uFj0ChraBi+uuJu8BlzvAyJMuGZIj+WkK5TLwfkbfVASGb4GBVbe3zj5OH4A8dbV0AxwcAuMVyl7zeHd/b2//nun09wPqUXLXvsrewQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+QFHAQMLuREfnwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA9UlEQVQY002Pu0oDQRRA7517d0ISFwKaIKLgphPSqGltxEYk/2AnBNILdhba2PkBNv6BJn8QxLR2KVwEH6xBEk1G3ezMXBsDOeWpzgGYoxPbZvsxa807BgC4ibNSYhy9TdwGAvjzrglrK5oaUTDCTmx3p06O343rhzl1azK/hwC9coEOCeGMHVN38JlerZb4WxNeLCHZl6HdekjS9mZUvFdifhEJlpMvd6QUsngIKgt0WWR8IgRk1kG9zFJLJv46/phuF7S6G6d+J1rM1f2Pf8ZZZO8182uhOhUR7cGerId53q/ygAEAGlEw+t/siwgdVPPD2eYf14pkaPQAZiEAAAAASUVORK5CYII=",this.points=[],this.pointsStatus=[],this.S=e.getBound().size.x,this.V=e.getBound().size.y,this.Y=1e5,this.W=0,this.q=this.q.bind(this),this.Z(this.Y),this.K()}var e,i;return e=t,(i=[{key:"enable",value:function(){(this.B.getRenderManager().particle=this).B.on("beforeRender",this.q)}},{key:"disable",value:function(){this.B.getRenderManager().particle=null,this.B.off("beforeRender",this.q),this.q()}},{key:"dispose",value:function(){this.disable(),this.G=null,this.O.dispose(),this.O=null,this.points=null,this.pointsStatus=null}},{key:"setUrl",value:function(t){this.O.children[0].material.map=(new ke).load(t),this.G=t}},{key:"setAmount",value:function(t){this.O.remove(this.X.points),this.points=[],this.pointsStatus=[],t=this.Y*t,this.Z(t)}},{key:"render",value:function(){var t=this;null!==this.X&&this.X.changePositions(.1,-.32,.1,function(t,e){return 0<=e},function(){return new V((Math.random()-.5)*t.S,1e3*Math.random(),(Math.random()-.5)*t.V)}),this.B.getRenderManager().renderer.render(this.O,this.B.camera)}}])&&li(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign(i.prototype,{q:function(){this.B.enableUpdateRender()},J:function(t,e,i){for(var r=0;r<t;r++){var n=(Math.random()-.5)*this.S,o=1e3*Math.random(),s=(Math.random()-.5)*this.V,a=(a=Math.random()-.5)/Math.abs(a),u=3*Math.random(),h=(h=Math.random()-.5)/Math.abs(h);e.push(new V(n,o,s)),i.push({x:{sign:a,weight:u},y:{sign:1,weight:1},z:{sign:h,weight:3*Math.random()}})}},Z:function(t){this.J(t,this.points,this.pointsStatus),this.X=new ei(this.points,this.G),this.X.setRunStatus(this.pointsStatus),this.O.add(this.X.points)},K:function(){"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui)}}),ci.prototype=Object.assign(Object.create(Xt.prototype),{constructor:ci,isCamera:!0,copy:function(t,e){return Xt.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(t=new V),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Xt.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Xt.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),fi.prototype=Object.assign(Object.create(ci.prototype),{constructor:fi,isOrthographicCamera:!0,copy:function(t,e){return ci.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,r,n,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),r=(n=(this.right+this.left)/2)-e,n=n+e,o=(e=(o=(this.top+this.bottom)/2)+i,o-i);null!==this.view&&this.view.enabled&&(i=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom,n=(r+=i*this.view.offsetX)+i*this.view.width,o=(e-=t*this.view.offsetY)-t*this.view.height),this.projectionMatrix.makeOrthographic(r,n,e,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}),(Ai.prototype=Object.create(ie.prototype)).constructor=Ai;var pi=new V,di=new V,mi=new Rt;function yi(t,e){this.normal=void 0!==t?t:new V(1,0,0),this.constant=void 0!==e?e:0}Object.assign(yi.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,i){return i=pi.subVectors(i,e).cross(di.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(e=new V),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(e=new V);var i=t.delta(pi),r=this.normal.dot(i);return 0===r?0===this.distanceToPoint(t.start)?e.copy(t.start):void 0:(r=-(t.start.dot(this.normal)+this.constant)/r)<0||1<r?void 0:e.copy(i).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);return e<0&&0<t||t<0&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(t=new V),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){return e=e||mi.getNormalMatrix(t),t=this.coplanarPoint(pi).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var gi=new V,vi=new V,bi=new V,wi=new V,xi=new V,Mi=new V,_i=new V,Si=new V,Bi=new V,Ei=new V;function Ci(t,e,i){this.a=void 0!==t?t:new V,this.b=void 0!==e?e:new V,this.c=void 0!==i?i:new V}function Ti(t,e,i,r,n,o){this.a=t,this.b=e,this.c=i,this.normal=r&&r.isVector3?r:new V,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new U,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==o?o:0}Object.assign(Ci,{getNormal:function(t,e,i,r){return void 0===r&&(r=new V),r.subVectors(i,e),gi.subVectors(t,e),r.cross(gi),0<(i=r.lengthSq())?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(t,e,i,r,n){gi.subVectors(r,e),vi.subVectors(i,e),bi.subVectors(t,e);r=gi.dot(gi),i=gi.dot(vi),t=gi.dot(bi),e=vi.dot(vi);var o=vi.dot(bi),s=r*e-i*i;return void 0===n&&(n=new V),0==s?n.set(-2,-1,-1):n.set(1-(e=(e*t-i*o)*(n=1/s))-(s=(r*o-i*t)*n),s,e)},containsPoint:function(t,e,i,r){return Ci.getBarycoord(t,e,i,r,wi),0<=wi.x&&0<=wi.y&&wi.x+wi.y<=1},getUV:function(t,e,i,r,n,o,s,a){return this.getBarycoord(t,e,i,r,wi),a.set(0,0),a.addScaledVector(n,wi.x),a.addScaledVector(o,wi.y),a.addScaledVector(s,wi.z),a},isFrontFacing:function(t,e,i,r){return gi.subVectors(i,e),vi.subVectors(t,e),gi.cross(vi).dot(r)<0}}),Object.assign(Ci.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return gi.subVectors(this.c,this.b),vi.subVectors(this.a,this.b),.5*gi.cross(vi).length()},getMidpoint:function(t){return void 0===t&&(t=new V),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Ci.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(t=new yi),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Ci.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,i,r,n){return Ci.getUV(t,this.a,this.b,this.c,e,i,r,n)},containsPoint:function(t){return Ci.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Ci.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(e=new V);var i=this.a,r=this.b,n=this.c,o=(xi.subVectors(r,i),Mi.subVectors(n,i),Si.subVectors(t,i),xi.dot(Si)),s=Mi.dot(Si);if(o<=0&&s<=0)return e.copy(i);Bi.subVectors(t,r);var a=xi.dot(Bi),u=Mi.dot(Bi);if(0<=a&&u<=a)return e.copy(r);var h=o*u-a*s;if(h<=0&&0<=o&&a<=0)return l=o/(o-a),e.copy(i).addScaledVector(xi,l);Ei.subVectors(t,n);t=xi.dot(Ei);var l,c,f=Mi.dot(Ei);return 0<=f&&t<=f?e.copy(n):(o=t*s-o*f)<=0&&0<=s&&f<=0?(c=s/(s-f),e.copy(i).addScaledVector(Mi,c)):(s=a*f-t*u)<=0&&0<=u-a&&0<=t-f?(_i.subVectors(n,r),c=(u-a)/(u-a+(t-f)),e.copy(r).addScaledVector(_i,c)):(l=o*(n=1/(s+o+h)),c=h*n,e.copy(i).addScaledVector(xi,l).addScaledVector(Mi,c))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Object.assign(Ti.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Fi=new Tt,Pi=new Ke,Oi=new bt,Di=new V,Ri=new V,Ii=new V,Ui=new V,Li=new V,ki=new V,ji=new V,Qi=new V,Ni=new V,zi=new at,Hi=new at,Vi=new at,Gi=new V,Ki=new V;function Yi(t,e){Xt.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ie,this.material=void 0!==e?e:new Te,this.updateMorphTargets()}function Xi(t,e,i,r,n,o,u,h){return null===(r=e.side===s?r.intersectTriangle(u,o,n,!0,h):r.intersectTriangle(n,o,u,e.side!==a,h))?null:(Ki.copy(h),Ki.applyMatrix4(t.matrixWorld),(n=i.ray.origin.distanceTo(Ki))<i.near||n>i.far?null:{distance:n,point:Ki.clone(),object:t})}function Wi(t,e,i,r,n,o,s,a,u,h,l,c){Di.fromBufferAttribute(n,h),Ri.fromBufferAttribute(n,l),Ii.fromBufferAttribute(n,c);var f=t.morphTargetInfluences;if(e.morphTargets&&o&&f){ji.set(0,0,0),Qi.set(0,0,0),Ni.set(0,0,0);for(var A=0,p=o.length;A<p;A++){var d=f[A],m=o[A];0!==d&&(Ui.fromBufferAttribute(m,h),Li.fromBufferAttribute(m,l),ki.fromBufferAttribute(m,c),s?(ji.addScaledVector(Ui,d),Qi.addScaledVector(Li,d),Ni.addScaledVector(ki,d)):(ji.addScaledVector(Ui.sub(Di),d),Qi.addScaledVector(Li.sub(Ri),d),Ni.addScaledVector(ki.sub(Ii),d)))}Di.add(ji),Ri.add(Qi),Ii.add(Ni)}return(n=Xi(t,e,i,r,Di,Ri,Ii,Gi))&&(a&&(zi.fromBufferAttribute(a,h),Hi.fromBufferAttribute(a,l),Vi.fromBufferAttribute(a,c),n.uv=Ci.getUV(Gi,Di,Ri,Ii,zi,Hi,Vi,new at)),u&&(zi.fromBufferAttribute(u,h),Hi.fromBufferAttribute(u,l),Vi.fromBufferAttribute(u,c),n.uv2=Ci.getUV(Gi,Di,Ri,Ii,zi,Hi,Vi,new at)),t=new Ti(h,l,c),Ci.getNormal(Di,Ri,Ii,t.normal),n.face=t),n}function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===qi(t=function(t,e){if("object"!==qi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==qi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Ji(t,e,i){return e&&Zi(t.prototype,e),i&&Zi(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function $i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Yi.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Yi,isMesh:!0,copy:function(t){return Xt.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,i,r=this.geometry;if(r.isBufferGeometry){var n=r.morphAttributes,o=Object.keys(n);if(0<o.length){var s=n[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)i=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}else void 0!==(n=r.morphTargets)&&n.length},raycast:function(t,e){var i=this.geometry,r=this.material,n=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),Oi.copy(i.boundingSphere),Oi.applyMatrix4(n),!1!==t.ray.intersectsSphere(Oi)&&(Fi.getInverse(n),Pi.copy(t.ray).applyMatrix4(Fi),null===i.boundingBox||!1!==Pi.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,s,a,u,h,l,c,f,A,p=i.index,d=i.attributes.position,m=i.morphAttributes.position,y=i.morphTargetsRelative,g=i.attributes.uv,v=i.attributes.uv2,b=i.groups,w=i.drawRange;if(null!==p)if(Array.isArray(r))for(u=0,l=b.length;u<l;u++)for(A=r[(f=b[u]).materialIndex],h=Math.max(f.start,w.start),c=Math.min(f.start+f.count,w.start+w.count);h<c;h+=3)o=p.getX(h),s=p.getX(h+1),a=p.getX(h+2),(P=Wi(this,A,t,Pi,d,m,y,g,v,o,s,a))&&(P.faceIndex=Math.floor(h/3),P.face.materialIndex=f.materialIndex,e.push(P));else for(u=Math.max(0,w.start),l=Math.min(p.count,w.start+w.count);u<l;u+=3)o=p.getX(u),s=p.getX(u+1),a=p.getX(u+2),(P=Wi(this,r,t,Pi,d,m,y,g,v,o,s,a))&&(P.faceIndex=Math.floor(u/3),e.push(P));else if(void 0!==d)if(Array.isArray(r))for(u=0,l=b.length;u<l;u++)for(A=r[(f=b[u]).materialIndex],h=Math.max(f.start,w.start),c=Math.min(f.start+f.count,w.start+w.count);h<c;h+=3)(P=Wi(this,A,t,Pi,d,m,y,g,v,o=h,s=h+1,a=h+2))&&(P.faceIndex=Math.floor(h/3),P.face.materialIndex=f.materialIndex,e.push(P));else for(u=Math.max(0,w.start),l=Math.min(d.count,w.start+w.count);u<l;u+=3)(P=Wi(this,r,t,Pi,d,m,y,g,v,o=u,s=u+1,a=u+2))&&(P.faceIndex=Math.floor(u/3),e.push(P))}else if(i.isGeometry){var x,M=Array.isArray(r),_=i.vertices,S=i.faces;0<(n=i.faceVertexUvs[0]).length&&(x=n);for(var B=0,E=S.length;B<E;B++){var C,T,F,P,O=S[B],D=M?r[O.materialIndex]:r;void 0!==D&&(C=_[O.a],T=_[O.b],F=_[O.c],P=Xi(this,D,t,Pi,C,T,F,Gi))&&(x&&x[B]&&(D=x[B],zi.copy(D[0]),Hi.copy(D[1]),Vi.copy(D[2]),P.uv=Ci.getUV(Gi,C,T,F,zi,Hi,Vi,new at)),P.face=O,P.faceIndex=B,e.push(P))}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var tr,er,ir=Ji(function t(){$i(this,t),this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}),rr=(Object.assign(ir.prototype,{setSize:function(){},render:function(){}}),ir.FullScreenQuad=(tr=new fi(-1,1,1,-1,0,1),er=new Ai(2,2),Lr=Ji(function t(e){$i(this,t),this.$=new Yi(er,e)}),Object.defineProperty(Lr.prototype,"material",{get:function(){return this.$.material},set:function(t){this.$.material=t}}),Object.assign(Lr.prototype,{render:function(t){t.render(this.$,tr)}}),Lr),{uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")});function nr(t,e,i){this.width=t,this.height=e,this.scissor=new st(0,0,t,e),this.scissorTest=!1,this.viewport=new st(0,0,t,e),this.texture=new Le(void 0,(i=i||{}).mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:v,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){return(sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ar(t){return(ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}nr.prototype=Object.assign(Object.create(n.prototype),{constructor:nr,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ur=function(){var t=r,e=ir;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sr(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ar(t);if(i=e?(i=ar(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===or(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(t=i.call(this)).renderTarget=new nr(1,1,{minFilter:v,magFilter:v,format:x}),t.compositeMaterial=t.getCompositeMaterial(t.nMips);var e=rr;return t.copyUniforms=me.clone(e.uniforms),t.copyUniforms.opacity.value=1,t.materialCopy=new ve({uniforms:t.copyUniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),t.clearColor=new U(0,0,0),t.oldClearColor=new U,t.oldClearAlpha=1,t.basic=new Te,t.basic.transparent=!0,t.fsQuad=new ir.FullScreenQuad(null),t}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lr(t,e){return(lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.assign(ur.prototype,{dispose:function(){this.renderTarget.dispose()},setSize:function(t,e){t=Math.round(t/2),e=Math.round(e/2),this.renderTarget.setSize(t,e)},render:function(t,e,i,r,n){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),n&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,t.setRenderTarget(null),this.fsQuad.render(t)),this.fsQuad.material=this.compositeMaterial,t.setRenderTarget(this.renderTarget),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTarget.texture,n&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?t.setRenderTarget(null):t.setRenderTarget(i),this.fsQuad.render(t),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getCompositeMaterial:function(){return new ve({uniforms:{iTime:{value:0},rainSize:{value:.1},iResolution:{value:new at(300,200)},iChannel3:{value:null}},vertexShader:"\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"\n                varying vec2 vUv;\n                uniform float iTime;\n                uniform float rainSize;\n                uniform vec2 iResolution;\n                uniform vec2 iMouse;\n                uniform sampler2D iChannel3;\n                uniform sampler2D tDiffuse;\n\n                void main() {\n                  float speed = fract(iTime);\n                  vec3 col = vec3(0.0, 0.0, 0.0);\n                  float aspect = iResolution.x / iResolution.y;\n\n                  // uv 0~1\n                  vec2 q = gl_FragCoord.xy / iResolution.xy;\n                  q.x *= aspect;\n\n                  // , 1: ; -1:\n                  float rainDir = 1.;\n                  // \n                  float tiltIntensity = 0.2;\n                  float offsetX = speed + q.y * rainDir * tiltIntensity;\n\n                  // uv\n                  vec2 p = -1.0 + 2.0 * q;\n                  vec2 st = p * vec2(.5, 0.01) + vec2(offsetX, speed);\n\n                  // \n                  float opacity = .655;\n                  // \n                  float f = texture2D(iChannel3, st).y;\n                  // \n                  f *= texture2D(iChannel3, st * 0.775).y;\n                  f *= opacity;\n\n                  col += f;\n                  col *= min(rainSize, 1.0);\n                  gl_FragColor = vec4(clamp(col, 0.0, 1.0), 1.0);\n                }\n                "})}});var fr=function(){var t=r,e=ir;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lr(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=cr(t);if(i=e?(i=cr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===hr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n,o,s){var a;if(this instanceof r)return(a=i.call(this)).scene=t,a.camera=e,a.overrideMaterial=n,a.clearColor=o,a.clearAlpha=void 0!==s?s:0,a.clear=!0,a.clearDepth=!1,a.needsSwap=!1,a;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){return(pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.assign(fr.prototype,{setPass:function(t,e){this.scene=t,this.camera=e},render:function(t,e,i){var r,n,o=t.autoClear;t.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,void 0!==this.clearColor&&(r=t.getClearColor().getHex(),n=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:i),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),void 0!==this.clearColor&&t.setClearColor(r,n),this.scene.overrideMaterial=null,t.autoClear=o}});var mr=function(){var t=r,e=ir;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pr(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=dr(t);if(i=e?(i=dr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Ar(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){var n;if(this instanceof r)return(n=i.call(this)).textureID=void 0!==e?e:"tDiffuse",t instanceof ve?(n.uniforms=t.uniforms,n.material=t):t&&(n.uniforms=me.clone(t.uniforms),n.material=new ve({defines:Object.assign({},t.defines),uniforms:n.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),n.fsQuad=new ir.FullScreenQuad(n.material),n;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===yr(t=function(t,e){if("object"!==yr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==yr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function vr(t,e,i){return e&&gr(t.prototype,e),i&&gr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Mr(t);i=e?(i=Mr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this;if(i&&("object"===yr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function Mr(t){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.assign(mr.prototype,{render:function(t,e,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?t.setRenderTarget(null):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil)),this.fsQuad.render(t)}});var _r=function(){wr(e,ir);var t=xr(e);function e(i,r){var n;return br(this,e),(n=t.call(this)).scene=i,n.camera=r,n.clear=!0,n.needsSwap=!1,n.inverse=!1,n}return vr(e)}(),Sr=(Object.assign(_r.prototype,{render:function(t,e,i){var r,n,o=t.getContext(),s=t.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),n=this.inverse?(r=0,1):(r=1,0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),s.buffers.stencil.setClear(n),t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP)}}),function(){wr(e,ir);var t=xr(e);function e(){var i;return br(this,e),(i=t.call(this)).needsSwap=!1,i}return vr(e)}());function Br(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Er(t=function(t,e){if("object"!==Er(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Er(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Tr(t,e,i){return e&&Cr(t.prototype,e),i&&Cr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.assign(Sr.prototype,{render:function(t){t.state.buffers.stencil.setTest(!1)}}),Object.assign(Br.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=((t=("undefined"==typeof performance?Date:performance).now())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}});var Pr,Or,Dr=Tr(function t(e,i){var r,n;Fr(this,t),this.renderer=e,void 0===i?(r={minFilter:v,magFilter:v,format:x,stencilBuffer:!1},n=e.getSize(new at),this.tt=e.getPixelRatio(),this.nt=n.width,this.et=n.height,(i=new nr(this.nt*this.tt,this.et*this.tt,r)).texture.name="EffectComposer.rt1"):(this.tt=1,this.nt=i.width,this.et=i.height),this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new mr(rr),this.clock=new Br}),Rr=(Object.assign(Dr.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},clearPass:function(){for(var t=0;t<this.passes.length;t++)this.passes[t].scene=null,this.passes[t].camera=null},addPass:function(t){this.passes.push(t),t.setSize(this.nt*this.tt,this.et*this.tt)},insertPass:function(t,e){this.passes.splice(e,0,t)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());for(var e,i,r,n=this.renderer.getRenderTarget(),o=!1,s=this.passes.length,a=0;a<s;a++)!1!==(r=this.passes[a]).enabled&&(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),r.render(this.renderer,this.writeBuffer,this.readBuffer,t,o),r.needsSwap&&(o&&(e=this.renderer.getContext(),(i=this.renderer.state.buffers.stencil).setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),i.setFunc(e.EQUAL,1,4294967295)),this.swapBuffers()),void 0!==_r)&&(r instanceof _r?o=!0:r instanceof Sr&&(o=!1));this.renderer.setRenderTarget(n)},reset:function(t){var e;void 0===t&&(e=this.renderer.getSize(new at),this.tt=this.renderer.getPixelRatio(),this.nt=e.width,this.et=e.height,(t=this.renderTarget1.clone()).setSize(this.nt*this.tt,this.et*this.tt)),this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this.nt=t,this.et=e;var i=this.nt*this.tt,r=this.et*this.tt;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(i,r)},setPixelRatio:function(t){this.tt=t,this.setSize(this.nt,this.et)}}),Tr(function t(){Fr(this,t),this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}));function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ir(t=function(t,e){if("object"!==Ir(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ir(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Object.assign(Rr.prototype,{setSize:function(){},render:function(){}}),Rr.FullScreenQuad=(Pr=new fi(-1,1,1,-1,0,1),Or=new Ai(2,2),Lr=Tr(function t(e){Fr(this,t),this.$=new Yi(Or,e)}),Object.defineProperty(Lr.prototype,"material",{get:function(){return this.$.material},set:function(t){this.$.material=t}}),Object.assign(Lr.prototype,{dispose:function(){this.$.geometry.dispose()},render:function(t){t.render(this.$,Pr)}}),Lr);var Lr=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.it=-1,this.rt=-1,this.ot=this.st(),this.q=this.q.bind(this),this.Z(i)}var e,i;return e=t,(i=[{key:"getRaindrops",value:function(){return this.ht}},{key:"setRaindrops",value:function(t){this.ht=t}},{key:"getUrl",value:function(){return this.G}},{key:"setUrl",value:function(t){this.G=t,this.lt.compositeMaterial.uniforms.iChannel3.value=(new ke).load(t,function(t){t.wrapS=m,t.wrapT=m,t.anisotropy=16,t.repeat.set(4,4)})}},{key:"enable",value:function(){(this.B.getRenderManager().rain=this).B.on("beforeRender",this.q)}},{key:"disable",value:function(){this.B.getRenderManager().rain=null,this.B.off("beforeRender",this.q),this.q()}},{key:"dispose",value:function(){this.disable(),this.lt.dispose(),this.O.dispose(),this.lt=null,this.O=null,this.ut=null,this.ct=null}},{key:"render",value:function(){this.ft(),this.dt+=.05,this.lt.compositeMaterial.uniforms.iTime.value=this.dt,this.lt.compositeMaterial.uniforms.rainSize.value=this.ht,this.ut.render()}}])&&Ur(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),kr=(Object.assign(Lr.prototype,{q:function(){this.B.enableUpdateRender()},st:function(){return"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui),this.B.getRenderManager()},Z:function(t){this.G=t.url,this.lt=new ur,this.O=new ni,this.ct=new fr(this.O,this.B.camera),this.ct.clear=!1,this.ut=new Dr(this.ot.renderer),this.ut.addPass(this.ct),this.ut.addPass(this.lt),this.setUrl(this.G),this.lt.compositeMaterial.uniforms.iTime.value=.2,this.lt.compositeMaterial.uniforms.iResolution.value=new at(60,60),this.dt=.6,this.ht=t.raindrops},ft:function(){var t,e,i;this.ut&&(t=(e=this.ut.renderer.domElement).clientWidth,e=e.clientHeight,i=!1,this.it!=t&&(i=!0,this.it=t),this.rt!=e&&(i=!0,this.rt=e),i)&&this.lt&&this.ut.setSize(this.it,this.rt)}}),0),jr=new Tt,Qr=new Xt,Nr=new V;function zr(){Object.defineProperty(this,"id",{value:kr+=2}),this.uuid=F.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Hr(t){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Hr(t=function(t,e){if("object"!==Hr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Hr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Gr(t,e,i){return e&&Vr(t.prototype,e),i&&Vr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=qr(t);i=e?(i=qr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this;if(i&&("object"===Hr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return Wr(r)}}function Wr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zr(){var t=new ve({fragmentShader:(t=Zr.SkyShader).fragmentShader,vertexShader:t.vertexShader,uniforms:me.clone(t.uniforms),side:s});Yi.call(this,new $r(1,1,1),t)}zr.prototype=Object.assign(Object.create(n.prototype),{constructor:zr,isGeometry:!0,applyMatrix4:function(t){for(var e=(new Rt).getNormalMatrix(t),i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(t);for(i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];n.normal.applyMatrix3(e).normalize();for(var o=0,s=n.vertexNormals.length;o<s;o++)n.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return jr.makeRotationX(t),this.applyMatrix4(jr),this},rotateY:function(t){return jr.makeRotationY(t),this.applyMatrix4(jr),this},rotateZ:function(t){return jr.makeRotationZ(t),this.applyMatrix4(jr),this},translate:function(t,e,i){return jr.makeTranslation(t,e,i),this.applyMatrix4(jr),this},scale:function(t,e,i){return jr.makeScale(t,e,i),this.applyMatrix4(jr),this},lookAt:function(t){return Qr.lookAt(t),Qr.updateMatrix(),this.applyMatrix4(Qr.matrix),this},fromBufferGeometry:function(t){var e=this,i=null!==t.index?t.index.array:void 0,r=t.attributes;if(void 0===r.position);else{var n=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,s=void 0!==r.color?r.color.array:void 0,a=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var h=0;h<n.length;h+=3)e.vertices.push((new V).fromArray(n,h)),void 0!==s&&e.colors.push((new U).fromArray(s,h));var l=t.groups;if(0<l.length)for(h=0;h<l.length;h++)for(var c=l[h],f=c.start,A=f,p=f+c.count;A<p;A+=3)void 0!==i?d(i[A],i[A+1],i[A+2],c.materialIndex):d(A,A+1,A+2,c.materialIndex);else if(void 0!==i)for(h=0;h<i.length;h+=3)d(i[h],i[h+1],i[h+2]);else for(h=0;h<n.length/3;h+=3)d(h,h+1,h+2);this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone())}return this;function d(t,i,r,n){var h=void 0===s?[]:[e.colors[t].clone(),e.colors[i].clone(),e.colors[r].clone()];h=new Ti(t,i,r,void 0===o?[]:[(new V).fromArray(o,3*t),(new V).fromArray(o,3*i),(new V).fromArray(o,3*r)],h,n);e.faces.push(h),void 0!==a&&e.faceVertexUvs[0].push([(new at).fromArray(a,2*t),(new at).fromArray(a,2*i),(new at).fromArray(a,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new at).fromArray(u,2*t),(new at).fromArray(u,2*i),(new at).fromArray(u,2*r)])}},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nr).negate(),this.translate(Nr.x,Nr.y,Nr.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=0===(e=this.boundingSphere.radius)?1:1/e,i=new Tt;return i.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var t=new V,e=new V,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],o=this.vertices[n.a],s=this.vertices[n.b],a=this.vertices[n.c];t.subVectors(a,s),e.subVectors(o,s),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){var e,i,r;for(void 0===t&&(t=!0),r=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)r[e]=new V;if(t)for(var n,o,s,a=new V,u=new V,h=0,l=this.faces.length;h<l;h++)c=this.faces[h],n=this.vertices[c.a],o=this.vertices[c.b],s=this.vertices[c.c],a.subVectors(s,o),u.subVectors(n,o),a.cross(u),r[c.a].add(a),r[c.b].add(a),r[c.c].add(a);else for(this.computeFaceNormals(),h=0,l=this.faces.length;h<l;h++)r[(c=this.faces[h]).a].add(c.normal),r[c.b].add(c.normal),r[c.c].add(c.normal);for(e=0,i=this.vertices.length;e<i;e++)r[e].normalize();for(h=0,l=this.faces.length;h<l;h++){var c,f=(c=this.faces[h]).vertexNormals;3===f.length?(f[0].copy(r[c.a]),f[1].copy(r[c.b]),f[2].copy(r[c.c])):(f[0]=r[c.a].clone(),f[1]=r[c.b].clone(),f[2]=r[c.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i,r=(i=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i;for(s=0,a=this.faces.length;s<a;s++)for((i=this.faces[s]).vt?i.vt.copy(i.normal):i.vt=i.normal.clone(),i.gt||(i.gt=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.gt[t]?i.gt[t].copy(i.vertexNormals[t]):i.gt[t]=i.vertexNormals[t].clone();var r=new zr;for(r.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];for(var n=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals,s=0,a=this.faces.length;s<a;s++)u=new V,h={a:new V,b:new V,c:new V},n.push(u),o.push(h)}var u,h,l=this.morphNormals[t];for(r.vertices=this.morphTargets[t].vertices,r.computeFaceNormals(),r.computeVertexNormals(),s=0,a=this.faces.length;s<a;s++)i=this.faces[s],u=l.faceNormals[s],h=l.vertexNormals[s],u.copy(i.normal),h.a.copy(i.vertexNormals[0]),h.b.copy(i.vertexNormals[1]),h.c.copy(i.vertexNormals[2])}for(s=0,a=this.faces.length;s<a;s++)(i=this.faces[s]).normal=i.vt,i.vertexNormals=i.gt},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new nt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new bt),this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){for(var t,e,i,r,n={},o=[],s=[],a=Math.pow(10,4),u=0,h=this.vertices.length;u<h;u++)t=this.vertices[u],void 0===n[t=Math.round(t.x*a)+"_"+Math.round(t.y*a)+"_"+Math.round(t.z*a)]?(n[t]=u,o.push(this.vertices[u]),s[u]=o.length-1):s[u]=s[n[t]];var l=[];for(u=0,h=this.faces.length;u<h;u++){(e=this.faces[u]).a=s[e.a],e.b=s[e.b],e.c=s[e.c];for(var c=[e.a,e.b,e.c],f=0;f<3;f++)if(c[f]===c[(f+1)%3]){l.push(u);break}}for(u=l.length-1;0<=u;u--){var A=l[u];for(this.faces.splice(A,1),i=0,r=this.faceVertexUvs.length;i<r;i++)this.faceVertexUvs[i].splice(A,1)}var p=this.vertices.length-o.length;return this.vertices=o,p},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var r=t[e];this.vertices.push(new V(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._t=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,n,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(o&&o.length===e&&(r=[]),s&&s.length===e&&(n=[]),i=0;i<e;i++){var a=t[i]._t;r&&r.push(o[a]),n&&n.push(s[a])}r&&(this.faceVertexUvs[0]=r),n&&(this.faceVertexUvs[1]=n)},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Jr=function(){Yr(e,zr);var t=Xr(e);function e(i,r,n,o,s,a){var u;return Kr(this,e),(u=t.call(this)).type="BoxGeometry",u.parameters={width:i,height:r,depth:n,widthSegments:o,heightSegments:s,depthSegments:a},u.fromBufferGeometry(new $r(i,r,n,o,s,a)),u.mergeVertices(),u}return Gr(e)}(),$r=function(){Yr(e,ie);var t=Xr(e);function e(i,r,n,o,s,a){Kr(this,e),(u=t.call(this)).type="BoxBufferGeometry",u.parameters={width:i,height:r,depth:n,widthSegments:o,heightSegments:s,depthSegments:a};var u,h=Wr(u),l=(i=i||1,r=r||1,n=n||1,o=Math.floor(o)||1,s=Math.floor(s)||1,a=Math.floor(a)||1,[]),c=[],f=[],A=[],p=0,d=0;function m(t,e,i,r,n,o,s,a,u,m,y){for(var g=o/u,v=s/m,b=o/2,w=s/2,x=a/2,M=u+1,_=m+1,S=0,B=0,E=new V,C=0;C<_;C++)for(var T=C*v-w,F=0;F<M;F++)E[t]=(F*g-b)*r,E[e]=T*n,E[i]=x,c.push(E.x,E.y,E.z),E[t]=0,E[e]=0,E[i]=0<a?1:-1,f.push(E.x,E.y,E.z),A.push(F/u),A.push(1-C/m),S+=1;for(C=0;C<m;C++)for(F=0;F<u;F++){var P=p+F+M*C,O=p+F+M*(C+1),D=p+(F+1)+M*(C+1),R=p+(F+1)+M*C;l.push(P,O,R),l.push(O,D,R),B+=6}h.addGroup(d,B,y),d+=B,p+=S}return m("z","y","x",-1,-1,n,r,i,a,s,0),m("z","y","x",1,-1,n,r,-i,a,s,1),m("x","z","y",1,1,i,n,r,o,a,2),m("x","z","y",1,-1,i,n,-r,o,a,3),m("x","y","z",1,-1,i,r,n,o,s,4),m("x","y","z",-1,-1,i,r,-n,o,s,5),u.setIndex(l),u.setAttribute("position",new yt(c,3)),u.setAttribute("normal",new yt(f,3)),u.setAttribute("uv",new yt(A,2)),u}return Gr(e)}();function tn(t,e,i,r,n,o,s){zr.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:n,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new en(t,e,i,r,n,o,s)),this.mergeVertices()}function en(t,e,i,r,n,o,s){ie.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:n,thetaStart:o,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;for(var a,u=Math.min(o+s,Math.PI),h=0,l=[],c=new V,f=new V,A=[],p=[],d=[],m=[],y=0;y<=i;y++){var g=[],v=y/i,b=0;for(0==y&&0==o?b=.5/e:y==i&&u==Math.PI&&(b=-.5/e),a=0;a<=e;a++){var w=a/e;c.x=-t*Math.cos(r+w*n)*Math.sin(o+v*s),c.y=t*Math.cos(o+v*s),c.z=t*Math.sin(r+w*n)*Math.sin(o+v*s),p.push(c.x,c.y,c.z),f.copy(c).normalize(),d.push(f.x,f.y,f.z),m.push(w+b,1-v),g.push(h++)}l.push(g)}for(y=0;y<i;y++)for(a=0;a<e;a++){var x=l[y][a+1],M=l[y][a],_=l[y+1][a],S=l[y+1][a+1];(0!==y||0<o)&&A.push(x,M,S),(y!==i-1||u<Math.PI)&&A.push(M,_,S)}this.setIndex(A),this.setAttribute("position",new yt(p,3)),this.setAttribute("normal",new yt(d,3)),this.setAttribute("uv",new yt(m,2))}function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===rn(t=function(t,e){if("object"!==rn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==rn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Zr.prototype=Object.create(Yi.prototype),Zr.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new V},up:{value:new V(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunFade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunFade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunFade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunFade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunFade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")},(tn.prototype=Object.create(zr.prototype)).constructor=tn,(en.prototype=Object.create(ie.prototype)).constructor=en;var on=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.O=new ni,this.yt=null,this.xt=null,this.xt={turbidity:10,rayleigh:3,mieCoefficient:.005,mieDirectionalG:.7,luminance:1,inclination:.49,azimuth:.25,scale:500},this.bt=4e5,this.wt=0,this.At=1,this.Z(),this.K()}var e,i;return e=t,(i=[{key:"getState",value:function(){var t=this.sky.material.uniforms;return{turbidity:t.turbidity.value,rayleigh:t.rayleigh.value,luminance:t.luminance.value,scale:this.sky.scale.x}}},{key:"setState",value:function(t){t.scale&&this.sky.scale.setScalar(t.scale);var e=this.sky.material.uniforms;e.turbidity.value=("number"==typeof t.turbidity?t:this.xt).turbidity,e.rayleigh.value=("number"==typeof t.rayleigh?t:this.xt).rayleigh,e.luminance.value=("number"==typeof t.luminance?t:this.xt).luminance,this.St(this.xt.inclination)}},{key:"enable",value:function(){(this.B.getRenderManager().sky=this).B.enableUpdateNode()}},{key:"disable",value:function(){this.B.getRenderManager().sky=null,this.B.enableUpdateNode()}},{key:"setTime",value:function(t){1<(t=(t-6)/12)&&(t-=2),this.St(t)}},{key:"autoTime",value:function(){}},{key:"render",value:function(){this.B.getRenderManager().renderer.render(this.O,this.B.camera)}}])&&nn(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),sn=(Object.assign(on.prototype,{Z:function(){this.sky=new Zr,this.sky.scale.setScalar(this.xt.scale),this.O.add(this.sky),this.yt=new Yi(new en(2e4,16,8),new Te({color:16777215})),this.yt.position.y=-7e5,this.yt.visible=!0,this.O.add(this.yt),this.setState(this.xt)},K:function(){"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui)},St:function(t){var e=this.sky.material.uniforms,i=(t=Math.PI*(t+1),2*Math.PI*(this.xt.azimuth-.5));this.yt.position.z=this.bt*Math.cos(i),this.yt.position.y=this.bt*Math.sin(i)*Math.sin(t),this.yt.position.x=this.bt*Math.sin(i)*Math.cos(t),e.sunPosition.value=this.yt.position,this.B.enableUpdateRender()}}),{common:{diffuse:{value:new U(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Rt},uv2Transform:{value:new Rt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new at(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new U(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new U(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new U(15658734)},opacity:{value:1},center:{value:new at(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rt}}}),an={alphamap_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",alphamap_pars_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",alphatest_fragment:"\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",aomap_fragment:"\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n",aomap_pars_fragment:"\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",bsdfs:'\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disneys reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)G(v) / 4(nl)(nv)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disneys reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n',bumpmap_pars_fragment:"\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",clipping_planes_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",clipping_planes_pars_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",clipping_planes_pars_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n",clipping_planes_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n",color_fragment:"\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",color_pars_fragment:"\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",color_pars_vertex:"\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",color_vertex:"\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n",common:"\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n  return m[ 2 ][ 3 ] == - 1.0;\n\n}\n",cube_uv_reflection_fragment:"\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\n\n// These shader functions convert between the UV coordinates of a single face of\n// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n// sampling a textureCube (not generally normalized).\n\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\n\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\n\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n\n// These defines must match with PMREMGenerator\n\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\n\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n  }\n  return mip;\n}\n\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif\n",defaultnormal_vertex:"\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",displacementmap_pars_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",displacementmap_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",emissivemap_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",emissivemap_pars_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",encodings_fragment:"\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t}  else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",envmap_common_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",envmap_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",envmap_pars_vertex:"\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",envmap_physical_pars_fragment:"\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n",envmap_vertex:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) { \n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n",fog_pars_vertex:"\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n",fog_fragment:"\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",fog_pars_fragment:"\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",gradientmap_pars_fragment:"\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n\n",lightmap_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n",lightmap_pars_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",lights_lambert_vertex:"\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n",lights_pars_begin:"\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",lights_toon_fragment:"\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_toon_pars_fragment:"\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_phong_fragment:"\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n",lights_physical_pars_fragment:"\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n",lights_fragment_begin:"\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",lights_fragment_maps:"\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n",lights_fragment_end:"\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",logdepthbuf_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",logdepthbuf_pars_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",logdepthbuf_pars_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",logdepthbuf_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",map_fragment:"\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",map_fragment_1:"\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\t\n\tif(mapMixColor){\n\t    diffuseColor = texelColor*texelColor.a + diffuseColor*(1.0-texelColor.a);\n\t}else {\n\t    diffuseColor *= texelColor;\n\t}\n\n#endif\n",map_pars_fragment:"\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",map_particle_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",map_particle_pars_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",metalnessmap_fragment:"\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",metalnessmap_pars_fragment:"\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",morphnormal_vertex:"\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n",morphtarget_pars_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n",morphtarget_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",normal_fragment_begin:"\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",normal_fragment_maps:"\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n",normalmap_pars_fragment:"\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",clearcoat_normal_fragment_begin:"\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",clearcoat_normal_fragment_maps:"\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n",clearcoat_pars_fragment:"\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",packing:"\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",project_vertex:"\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",dithering_pars_fragment:"\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",roughnessmap_fragment:"\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",roughnessmap_pars_fragment:"\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",shadowmap_pars_fragment:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",shadowmap_pars_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",shadowmap_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",shadowmask_pars_fragment:"\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",skinbase_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",skinning_pars_vertex:"\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",skinning_vertex:"\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",skinnormal_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",specularmap_fragment:"\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",specularmap_pars_fragment:"\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",tonemapping_fragment:"\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",tonemapping_pars_fragment:"\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n",uv_pars_fragment:"\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",uv_pars_vertex:"\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",uv_vertex:"\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",uv2_pars_fragment:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",uv2_pars_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n",uv2_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n",worldpos_vertex:"\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",background_frag:"\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",background_vert:"\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",cube_frag:"\n\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",cube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",depth_frag:"\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n",depth_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n",distanceRGBA_frag:"\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",distanceRGBA_vert:"\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",equirect_frag:"\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",equirect_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",linedashed_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",linedashed_vert:"\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",meshbasic_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",meshbasic_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshlambert_frag:"\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshmatcap_frag:"\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",meshmatcap_vert:"\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",meshtoon_frag:"\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshtoon_vert:"\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphong_frag:"\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphong_vert:"\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphysical_frag:"\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphysical_vert:"\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",normal_frag:"\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n",normal_vert:"\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",points_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",points_vert:"\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",shadow_frag:"\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",shadow_vert:"\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",sprite_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",sprite_vert:"\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n"};function un(t,e,i,r){ci.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){return(ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}un.prototype=Object.assign(Object.create(ci.prototype),{constructor:un,isPerspectiveCamera:!0,copy:function(t,e){return ci.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*F.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*F.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*F.RAD2DEG*Math.atan(Math.tan(.5*F.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,r,n,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e=this.near,i=e*Math.tan(.5*F.DEG2RAD*this.fov)/this.zoom,r=2*i,n=this.aspect*r,o=-.5*n,s=this.view,a=(null!==this.view&&this.view.enabled&&(a=s.fullWidth,t=s.fullHeight,o+=s.offsetX*n/a,i-=s.offsetY*r/t,n*=s.width/a,r*=s.height/t),this.filmOffset);0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,i,i-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}});var An=function(){var t=r,e=Yi;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ln(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=fn(t);if(i=e?(i=fn(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===hn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return cn(r)}}(r);function r(t,e){var n,s,a,u,h,l,c,f,A,p,d,m,y,g,b,x,M,_,S,B,E,C,T,P,O,D;if(this instanceof r)return n=cn(t=i.call(this,t)),t.parentNode=e.parentNode,O=void 0!==(e=e||{}).textureWidth?e.textureWidth:512,D=void 0!==e.textureHeight?e.textureHeight:512,s=void 0!==e.clipBias?e.clipBias:0,a=void 0!==e.alpha?e.alpha:1,u=void 0!==e.time?e.time:0,h=void 0!==e.waterNormals?e.waterNormals:null,l=void 0!==e.sunDirection?e.sunDirection:new V(.70707,.70707,0),c=new U(void 0!==e.sunColor?e.sunColor:16777215),f=new U(void 0!==e.waterColor?e.waterColor:8355711),A=void 0!==e.eye?e.eye:new V(0,0,0),p=void 0!==e.distortionScale?e.distortionScale:20,d=void 0!==e.side?e.side:o,e=void 0!==e.fog&&e.fog,m=new yi,y=new V,g=new V,b=new V,x=new Tt,M=new V(0,0,-1),_=new st,S=new V,B=new V,E=new st,C=new Tt,T=new un,P=new nr(O,D,{minFilter:v,magFilter:v,format:w,stencilBuffer:!1,depthBuffer:!0}),t.renderTarget=P,F.isPowerOfTwo(O)&&F.isPowerOfTwo(D)||(P.texture.generateMipmaps=!1),(D=new ve({fragmentShader:(O={uniforms:me.merge([sn.fog,sn.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new Tt},sunColor:{value:new U(8355711)},sunDirection:{value:new V(.70707,.70707,0)},eye:{value:new V},waterColor:{value:new U(5592405)}}]),vertexShader:["uniform mat4 textureMatrix;","uniform float time;","#include <logdepthbuf_pars_vertex>","varying vec4 mirrorCoord;","varying vec4 worldPosition;","#include <common>",an.fog_pars_vertex,an.shadowmap_pars_vertex,"void main() {","\tmirrorCoord = modelMatrix * vec4( position, 1.0 );","\tworldPosition = mirrorCoord.xyzw;","\tmirrorCoord = textureMatrix * mirrorCoord;","\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;","\t#include <logdepthbuf_vertex>",an.fog_vertex,an.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D mirrorSampler;","uniform float alpha;","uniform float time;","uniform float size;","uniform float distortionScale;","uniform sampler2D normalSampler;","uniform vec3 sunColor;","uniform vec3 sunDirection;","uniform vec3 eye;","uniform vec3 waterColor;","varying vec4 mirrorCoord;","varying vec4 worldPosition;","#include <logdepthbuf_pars_fragment>","vec4 getNoise( vec2 uv ) {","\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);","\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );","\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );","\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );","\tvec4 noise = texture2D( normalSampler, uv0 ) +","\t\ttexture2D( normalSampler, uv1 ) +","\t\ttexture2D( normalSampler, uv2 ) +","\t\ttexture2D( normalSampler, uv3 );","\treturn noise * 0.5 - 1.0;","}","void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {","\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );","\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );","\tspecularColor += pow( direction, shiny ) * sunColor * spec;","\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;","}",an.common,an.packing,an.bsdfs,an.fog_pars_fragment,an.lights_pars_begin,an.shadowmap_pars_fragment,an.shadowmask_pars_fragment,"void main() {","\t#include <logdepthbuf_fragment>","\tvec4 noise = getNoise( worldPosition.xz * size );","\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );","\tvec3 diffuseLight = vec3(0.0);","\tvec3 specularLight = vec3(0.0);","\tvec3 worldToEye = eye-worldPosition.xyz;","\tvec3 eyeDirection = normalize( worldToEye );","\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );","\tfloat distance = length(worldToEye);","\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;","\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );","\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );","\tfloat rf0 = 0.3;","\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;","\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);","\tvec3 outgoingLight = albedo;","\tgl_FragColor = vec4( outgoingLight, alpha );",an.tonemapping_fragment,an.fog_fragment,"}"].join("\n")}).fragmentShader,vertexShader:O.vertexShader,uniforms:me.clone(O.uniforms),lights:!0,side:d,fog:e,transparent:!0,depthTest:!0,depthWrite:!1})).uniforms.mirrorSampler.value=P.texture,D.uniforms.textureMatrix.value=C,D.uniforms.alpha.value=a,D.uniforms.time.value=u,D.uniforms.normalSampler.value=h,D.uniforms.sunColor.value=c,D.uniforms.waterColor.value=f,D.uniforms.sunDirection.value=l,D.uniforms.distortionScale.value=p,D.uniforms.eye.value=A,n.material=D,n.onBeforeRender=function(t,e,i){if(g.setFromMatrixPosition(n.matrixWorld),b.setFromMatrixPosition(i.matrixWorld),x.extractRotation(n.matrixWorld),y.set(0,0,1),y.applyMatrix4(x),S.subVectors(g,b),!(0<S.dot(y))){S.reflect(y).negate(),S.add(g),x.extractRotation(i.matrixWorld),M.set(0,0,-1),M.applyMatrix4(x),M.add(b),B.subVectors(g,M),B.reflect(y).negate(),B.add(g),T.position.copy(S),T.up.set(0,1,0),T.up.applyMatrix4(x),T.up.reflect(y),T.lookAt(B),T.far=i.far,T.updateMatrixWorld(),T.projectionMatrix.copy(i.projectionMatrix),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(T.projectionMatrix),C.multiply(T.matrixWorldInverse),m.setFromNormalAndCoplanarPoint(y,g),m.applyMatrix4(T.matrixWorldInverse),_.set(m.normal.x,m.normal.y,m.normal.z,m.constant);var r=T.projectionMatrix,o=(r=(E.x=(Math.sign(_.x)+r.elements[8])/r.elements[0],E.y=(Math.sign(_.y)+r.elements[9])/r.elements[5],E.z=-1,E.w=(1+r.elements[10])/r.elements[14],_.multiplyScalar(2/_.dot(E)),r.elements[2]=_.x,r.elements[6]=_.y,r.elements[10]=_.z+1-s,r.elements[14]=_.w,A.setFromMatrixPosition(i.matrixWorld),t.getRenderTarget()),t.xr.enabled),a=t.shadowMap.autoUpdate;if(n.visible=!1,t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(P),!1===t.autoClear&&t.clear(),n.parentNode&&n.parentNode.Tt&&n.parentNode.Tt.Mt)for(var u=0;u<n.parentNode.Tt.Mt.length;u++)t.render(n.parentNode.Tt.Mt[u],T);n.visible=!0,t.xr.enabled=o,t.shadowMap.autoUpdate=a,t.setRenderTarget(r),void 0!==(o=i.viewport)&&t.state.viewport(o)}},t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function pn(){this.type="Curve",this.arcLengthDivisions=200}function dn(t,e,i,r,n,o,s,a){pn.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=r||1,this.aStartAngle=n||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function mn(t,e,i,r,n,o){dn.call(this,t,e,i,i,r,n,o),this.type="ArcCurve"}function yn(){var t=0,e=0,i=0,r=0;function n(n,o,s,a){i=-3*(t=n)+3*o-2*(e=s)-a,r=2*n-2*o+s+a}return{initCatmullRom:function(t,e,i,r,o){n(e,i,o*(i-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,i,r,o,s,a){t=(e-t)/o-(i-t)/(o+s)+(i-e)/s,o=(i-e)/s-(r-e)/(s+a)+(r-i)/a,n(e,i,t*=s,o*=s)},calc:function(n){var o=n*n;return t+e*n+i*o+r*(o*n)}}}Object.assign(pn.prototype,{getPoint:function(){return null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,r=[],n=this.getPoint(0),o=0;for(r.push(0),i=1;i<=t;i++)o+=(e=this.getPoint(i/t)).distanceTo(n),r.push(o),n=e;return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){for(var i,r=this.getLengths(),n=0,o=r.length,s=e||t*r[o-1],a=0,u=o-1;a<=u;)if((i=r[n=Math.floor(a+(u-a)/2)]-s)<0)a=n+1;else{if(!(0<i)){u=n;break}u=n-1}return r[n=u]===s?n/(o-1):(n+(s-(e=r[n]))/(r[n+1]-e))/(o-1)},getTangent:function(t){var e=t-1e-4;1<(t=t+1e-4)&&(t=1),e=this.getPoint(e=e<0?0:e);return this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){for(var i,r=new V,n=[],o=[],s=[],a=new V,u=new Tt,h=0;h<=t;h++)n[h]=this.getTangentAt(h/t),n[h].normalize();o[0]=new V,s[0]=new V;var l=Number.MAX_VALUE,c=Math.abs(n[0].x),f=Math.abs(n[0].y),A=Math.abs(n[0].z);for(c<=l&&(l=c,r.set(1,0,0)),f<=l&&(l=f,r.set(0,1,0)),A<=l&&r.set(0,0,1),a.crossVectors(n[0],r).normalize(),o[0].crossVectors(n[0],a),s[0].crossVectors(n[0],o[0]),h=1;h<=t;h++)o[h]=o[h-1].clone(),s[h]=s[h-1].clone(),a.crossVectors(n[h-1],n[h]),a.length()>Number.EPSILON&&(a.normalize(),i=Math.acos(F.clamp(n[h-1].dot(n[h]),-1,1)),o[h].applyMatrix4(u.makeRotationAxis(a,i))),s[h].crossVectors(n[h],o[h]);if(!0===e)for(i=Math.acos(F.clamp(o[0].dot(o[t]),-1,1)),i/=t,0<n[0].dot(a.crossVectors(o[0],o[t]))&&(i=-i),h=1;h<=t;h++)o[h].applyMatrix4(u.makeRotationAxis(n[h],i*h)),s[h].crossVectors(n[h],o[h]);return{tangents:n,normals:o,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),((dn.prototype=Object.create(pn.prototype)).constructor=dn).prototype.isEllipseCurve=!0,dn.prototype.getPoint=function(t,e){e=e||new at;for(var i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,n=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;i<r;)r-=i;r<Number.EPSILON&&(r=n?0:i),!0!==this.aClockwise||n||(r===i?r=-i:r-=i);var o,s,a,u;n=this.aStartAngle+t*r,t=this.aX+this.xRadius*Math.cos(n),n=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(o=Math.cos(this.aRotation),s=Math.sin(this.aRotation),t=(a=t-this.aX)*o-(u=n-this.aY)*s+this.aX,n=a*s+u*o+this.aY),e.set(t,n)},dn.prototype.copy=function(t){return pn.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},((mn.prototype=Object.create(dn.prototype)).constructor=mn).prototype.isArcCurve=!0;var gn=new V,vn=new yn,bn=new yn,wn=new yn;function xn(t,e,i,r){pn.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=r||.5}function Mn(t,e,i,r,n){var o=t*t;return(2*i-2*r+(e=.5*(r-e))+(n=.5*(n-i)))*(t*o)+(-3*i+3*r-2*e-n)*o+e*t+i}function _n(t,e,i,r){return(n=1-(n=t))*n*e+2*(1-t)*t*i+t*t*r;var n}function Sn(t,e,i,r,n){return(o=1-(o=t))*o*o*e+3*(o=1-t)*o*t*i+3*(1-t)*t*t*r+t*t*t*n;var o}function Bn(t,e,i,r){pn.call(this),this.type="CubicBezierCurve",this.v0=t||new at,this.v1=e||new at,this.v2=i||new at,this.v3=r||new at}function En(t,e,i,r){pn.call(this),this.type="CubicBezierCurve3",this.v0=t||new V,this.v1=e||new V,this.v2=i||new V,this.v3=r||new V}function Cn(t,e){pn.call(this),this.type="LineCurve",this.v1=t||new at,this.v2=e||new at}function Tn(t,e){pn.call(this),this.type="LineCurve3",this.v1=t||new V,this.v2=e||new V}function Fn(t,e,i){pn.call(this),this.type="QuadraticBezierCurve",this.v0=t||new at,this.v1=e||new at,this.v2=i||new at}function Pn(t){pn.call(this),this.type="SplineCurve",this.points=t||[]}function On(){pn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Dn(t){On.call(this),this.type="Path",this.currentPoint=new at,t&&this.setFromPoints(t)}function Rn(t){Dn.call(this,t),this.uuid=F.generateUUID(),this.type="Shape",this.holes=[]}((xn.prototype=Object.create(pn.prototype)).constructor=xn).prototype.isCatmullRomCurve3=!0,xn.prototype.getPoint=function(t,e){e=e||new V;var i,r,n,o,s=this.points,a=s.length,u=(t=(a-(this.closed?0:1))*t,Math.floor(t));t-=u;return this.closed?u+=0<u?0:(Math.floor(Math.abs(u)/a)+1)*a:0===t&&u===a-1&&(u=a-2,t=1),i=this.closed||0<u?s[(u-1)%a]:(gn.subVectors(s[0],s[1]).add(s[0]),gn),r=s[u%a],n=s[(u+1)%a],u=this.closed||u+2<a?s[(u+2)%a]:(gn.subVectors(s[a-1],s[a-2]).add(s[a-1]),gn),"centripetal"===this.curveType||"chordal"===this.curveType?(s="chordal"===this.curveType?.5:.25,a=Math.pow(i.distanceToSquared(r),s),(o=Math.pow(r.distanceToSquared(n),s))<1e-4&&(o=1),a<1e-4&&(a=o),(s=Math.pow(n.distanceToSquared(u),s))<1e-4&&(s=o),vn.initNonuniformCatmullRom(i.x,r.x,n.x,u.x,a,o,s),bn.initNonuniformCatmullRom(i.y,r.y,n.y,u.y,a,o,s),wn.initNonuniformCatmullRom(i.z,r.z,n.z,u.z,a,o,s)):"catmullrom"===this.curveType&&(vn.initCatmullRom(i.x,r.x,n.x,u.x,this.tension),bn.initCatmullRom(i.y,r.y,n.y,u.y,this.tension),wn.initCatmullRom(i.z,r.z,n.z,u.z,this.tension)),e.set(vn.calc(t),bn.calc(t),wn.calc(t)),e},xn.prototype.copy=function(t){pn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},((Bn.prototype=Object.create(pn.prototype)).constructor=Bn).prototype.isCubicBezierCurve=!0,Bn.prototype.getPoint=function(t,e){e=e||new at;var i=this.v0,r=this.v1,n=this.v2,o=this.v3;return e.set(Sn(t,i.x,r.x,n.x,o.x),Sn(t,i.y,r.y,n.y,o.y)),e},Bn.prototype.copy=function(t){return pn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},((En.prototype=Object.create(pn.prototype)).constructor=En).prototype.isCubicBezierCurve3=!0,En.prototype.getPoint=function(t,e){e=e||new V;var i=this.v0,r=this.v1,n=this.v2,o=this.v3;return e.set(Sn(t,i.x,r.x,n.x,o.x),Sn(t,i.y,r.y,n.y,o.y),Sn(t,i.z,r.z,n.z,o.z)),e},En.prototype.copy=function(t){return pn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},((Cn.prototype=Object.create(pn.prototype)).constructor=Cn).prototype.isLineCurve=!0,Cn.prototype.getPoint=function(t,e){return e=e||new at,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Cn.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Cn.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Cn.prototype.copy=function(t){return pn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},((Tn.prototype=Object.create(pn.prototype)).constructor=Tn).prototype.isLineCurve3=!0,Tn.prototype.getPoint=function(t,e){return e=e||new V,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Tn.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Tn.prototype.copy=function(t){return pn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},((Fn.prototype=Object.create(pn.prototype)).constructor=Fn).prototype.isQuadraticBezierCurve=!0,Fn.prototype.getPoint=function(t,e){e=e||new at;var i=this.v0,r=this.v1,n=this.v2;return e.set(_n(t,i.x,r.x,n.x),_n(t,i.y,r.y,n.y)),e},Fn.prototype.copy=function(t){return pn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},((Pn.prototype=Object.create(pn.prototype)).constructor=Pn).prototype.isSplineCurve=!0,Pn.prototype.getPoint=function(t,e){e=e||new at,t=((s=this.points).length-1)*t;var i=Math.floor(t),r=(t=t-i,s[0===i?i:i-1]),n=s[i],o=s[i>s.length-2?s.length-1:i+1],s=s[i>s.length-3?s.length-1:i+2];return e.set(Mn(t,r.x,n.x,o.x,s.x),Mn(t,r.y,n.y,o.y,s.y)),e},Pn.prototype.copy=function(t){pn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this},On.prototype=Object.assign(Object.create(pn.prototype),{constructor:On,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Cn(e,t))},getPoint:function(t){for(var e,i,r,n=t*this.getLength(),o=this.getCurveLengths(),s=0;s<o.length;){if(o[s]>=n)return e=o[s]-n,r=(i=this.curves[s]).getLength(),i.getPointAt(0===r?0:1-e/r);s++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,r=this.curves.length;i<r;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],r=0,n=this.curves;r<n.length;r++)for(var o=n[r],s=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s),u=0;u<a.length;u++){var h=a[u];e&&e.equals(h)||(i.push(h),e=h)}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){pn.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}}),Dn.prototype=Object.assign(Object.create(On.prototype),{constructor:Dn,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var i=new Cn(this.currentPoint.clone(),new at(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,i,r){return t=new Fn(this.currentPoint.clone(),new at(t,e),new at(i,r)),this.curves.push(t),this.currentPoint.set(i,r),this},bezierCurveTo:function(t,e,i,r,n,o){return t=new Bn(this.currentPoint.clone(),new at(t,e),new at(i,r),new at(n,o)),this.curves.push(t),this.currentPoint.set(n,o),this},splineThru:function(t){var e=new Pn([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,i,r,n,o){var s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+s,e+a,i,r,n,o),this},absarc:function(t,e,i,r,n,o){return this.absellipse(t,e,i,i,r,n,o),this},ellipse:function(t,e,i,r,n,o,s,a){var u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+u,e+h,i,r,n,o,s,a),this},absellipse:function(t,e,i,r,n,o,s,a){return t=new dn(t,e,i,r,n,o,s,a),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),i=t.getPoint(1),this.currentPoint.copy(i),this},copy:function(t){return On.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this}}),Rn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Rn,getPointsHoles:function(t){for(var e=[],i=0,r=this.holes.length;i<r;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Dn.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push(r.clone())}return this}});var In=function(t,e,i){i=i||2;var r,n,o,s,a,u=e&&e.length,h=u?e[0]*i:t.length,l=Un(t,0,h,i,!0),c=[];if(l&&l.next!==l.prev){if(u&&(l=function(t,e,i,r){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=Un(t,s=e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(function(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}(s));for(a.sort(kn),n=0;n<a.length;n++)!function(t,e){(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&s<a){if((s=a)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!i)return null;if(n===s)return i.prev;var u,h=i,l=i.x,c=i.y,f=1/0;for(r=i.next;r!==h;)n>=r.x&&r.x>=l&&n!==r.x&&Qn(o<c?n:s,o,l,c,o<c?s:n,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(n-r.x))<f||u===f&&r.x>i.x)&&Vn(r,t)&&(i=r,f=u),r=r.next;return i}(t,e))&&Ln(e=Gn(e,t),e.next)}(a[n],i),i=Ln(i,i.next);return i}(t,e,l,i)),t.length>80*i){for(var f=r=t[0],A=n=t[1],p=i;p<h;p+=i)(o=t[p])<f&&(f=o),(s=t[p+1])<A&&(A=s),r<o&&(r=o),n<s&&(n=s);a=0!==(a=Math.max(r-f,n-A))?1/a:0}!function t(e,i,r,n,o,s,a){if(e){if(!a&&s){for(var u=e,h=n,l=o,c=s,f=u;null===f.z&&(f.z=jn(f.x,f.y,h,l,c)),f.prevZ=f.prev,f.nextZ=f.next,(f=f.next)!==u;);f.prevZ.nextZ=null,f.prevZ=null;var A,p,d,m,y,g,v,b,w=f,x=1;do{for(p=w,y=w=null,g=0;p;){for(g++,d=p,A=v=0;A<x&&(v++,d=d.nextZ);A++);for(b=x;0<v||0<b&&d;)0!==v&&(0===b||!d||p.z<=d.z)?(p=(m=p).nextZ,v--):(d=(m=d).nextZ,b--),y?y.nextZ=m:w=m,m.prevZ=y,y=m;p=d}}while(y.nextZ=null,x*=2,1<g)}for(var M,_,S=e;e.prev!==e.next;)if(M=e.prev,_=e.next,s?function(t,e,i,r){var n=t.prev,o=t,s=t.next;if(!(0<=Nn(n,o,s))){for(var a=(n.x<o.x?n.x<s.x?n:s:o.x<s.x?o:s).x,u=(n.y<o.y?n.y<s.y?n:s:o.y<s.y?o:s).y,h=(n.x>o.x?n.x>s.x?n:s:o.x>s.x?o:s).x,l=(n.y>o.y?n.y>s.y?n:s:o.y>s.y?o:s).y,c=jn(a,u,e,i,r),f=jn(h,l,e,i,r),A=t.prevZ,p=t.nextZ;A&&A.z>=c&&p&&p.z<=f;){if(A!==t.prev&&A!==t.next&&Qn(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=Nn(A.prev,A,A.next))return;if(A=A.prevZ,p!==t.prev&&p!==t.next&&Qn(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=Nn(p.prev,p,p.next))return;p=p.nextZ}for(;A&&A.z>=c;){if(A!==t.prev&&A!==t.next&&Qn(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=Nn(A.prev,A,A.next))return;A=A.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Qn(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=Nn(p.prev,p,p.next))return;p=p.nextZ}return 1}}(e,n,o,s):function(t){var e=t.prev,i=t,r=t.next;if(!(0<=Nn(e,i,r))){for(var n=t.next.next;n!==t.prev;){if(Qn(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=Nn(n.prev,n,n.next))return;n=n.next}return 1}}(e))i.push(M.i/r),i.push(e.i/r),i.push(_.i/r),Yn(e),e=_.next,S=_.next;else if((e=_)===S){a?1===a?t(e=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next}while(!zn(n,o)&&Hn(n,r,r.next,o)&&Vn(n,o)&&Vn(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),Yn(r),Yn(r.next),r=t=o),(r=r.next)!==t);return r}(e,i,r),i,r,n,o,s,2):2===a&&function(e,i,r,n,o,s){var a=e;do{for(var u,h=a.next.next;h!==a.prev;){if(a.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Hn(i,i.next,t,e))return 1}while((i=i.next)!==t)}(t,e)&&Vn(t,e)&&Vn(e,t)&&function(t,e){for(var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),(i=i.next)!==t;);return r}(t,e)}(a,h))return u=Gn(a,h),a=Ln(a,a.next),u=Ln(u,u.next),t(a,i,r,n,o,s),t(u,i,r,n,o,s);h=h.next}}while((a=a.next)!==e)}(e,i,r,n,o,s):t(Ln(e),i,r,n,o,s,1);break}}}(l,c,i,f,A,a)}return c};function Un(t,e,i,r,n){var o,s;if(n===0<function(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}(t,e,i,r))for(o=e;o<i;o+=r)s=Kn(o,t[o],t[o+1],s);else for(o=i-r;e<=o;o-=r)s=Kn(o,t[o],t[o+1],s);return s&&zn(s,s.next)&&(Yn(s),s=s.next),s}function Ln(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!zn(r,r.next)&&0!==Nn(r.prev,r,r.next))r=r.next;else{if(Yn(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function kn(t,e){return t.x-e.x}function jn(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Qn(t,e,i,r,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(i-s)*(e-a)&&0<=(i-s)*(o-a)-(n-s)*(r-a)}function Nn(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function zn(t,e){return t.x===e.x&&t.y===e.y}function Hn(t,e,i,r){return zn(t,i)&&zn(e,r)||zn(t,r)&&zn(i,e)||0<Nn(t,e,i)!=0<Nn(t,e,r)&&0<Nn(i,r,t)!=0<Nn(i,r,e)}function Vn(t,e){return Nn(t.prev,t,t.next)<0?0<=Nn(t,e,t.next)&&0<=Nn(t,t.prev,e):Nn(t,e,t.prev)<0||Nn(t,t.next,e)<0}function Gn(t,e){var i=new Xn(t.i,t.x,t.y),r=new Xn(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function Kn(t,e,i,r){return t=new Xn(t,e,i),r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function Yn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xn(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Wn={area:function(t){for(var e=t.length,i=0,r=e-1,n=0;n<e;r=n++)i+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*i},isClockWise:function(t){return Wn.area(t)<0},triangulateShape:function(t,e){var i=[],r=[],n=[],o=(qn(t),Zn(i,t),t.length);e.forEach(qn);for(var s=0;s<e.length;s++)r.push(o),o+=e[s].length,Zn(i,e[s]);var a=In(i,r);for(s=0;s<a.length;s+=3)n.push(a.slice(s,s+3));return n}};function qn(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Zn(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){zr.call(this),this.type="ShapeGeometry","object"===Jn(e)&&(e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new to(t,e)),this.mergeVertices()}function to(t,e){ie.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],n=[],o=[],s=0,a=0;if(!1===Array.isArray(t))h(t);else for(var u=0;u<t.length;u++)h(t[u]),this.addGroup(s,a,u),s+=a,a=0;function h(t){var s,u=r.length/3,h=(t=t.extractPoints(e)).shape,l=t.holes;for(!1===Wn.isClockWise(h)&&(h=h.reverse()),f=0,A=l.length;f<A;f++)s=l[f],!0===Wn.isClockWise(s)&&(l[f]=s.reverse());for(var c=Wn.triangulateShape(h,l),f=0,A=l.length;f<A;f++)s=l[f],h=h.concat(s);for(f=0,A=h.length;f<A;f++){var p=h[f];r.push(p.x,p.y,0),n.push(0,0,1),o.push(p.x,p.y)}for(f=0,A=c.length;f<A;f++){var d=(y=c[f])[0]+u,m=y[1]+u,y=y[2]+u;i.push(d,m,y),a+=3}}this.setIndex(i),this.setAttribute("position",new yt(r,3)),this.setAttribute("normal",new yt(n,3)),this.setAttribute("uv",new yt(o,2))}function eo(t){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function io(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===eo(t=function(t,e){if("object"!==eo(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==eo(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}($n.prototype=Object.create(zr.prototype)).constructor=$n,(to.prototype=Object.create(ie.prototype)).constructor=to;var ro=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.Et=[],this.Tt=null,this.Pt=fengmap.FMType.MODEL_LAYER|fengmap.FMType.EXTERNAL_MODEL_LAYER,this.I=fengmap.FMType.EXTERNAL_MODEL_LAYER,this.O=new ni,this.O.name="waterScene",this.H=new ni,this.H.name="sprayScene",this.Mt=[],this.Lt=!1}var e,i;return e=t,(i=[{key:"traverse",value:function(t){for(var e=0;e<this.Et.length;e++)t(this.Et[e])}},{key:"removeForm",value:function(){for(var t=this.Tt.getLayers(this.Pt),e=0;e<t.length;e++)this.O.remove(t[e].scene)}}])&&io(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),no=(Object.assign(ro.prototype,{Z:function(){this.Ft(),this.Lt=!0},Ft:function(t){var e,i;!t&&this.Lt||(t=this.Tt.getLayers(fengmap.FMType.EXTERNAL_MODEL_LAYER)[0],e=this.Tt.getLayers(fengmap.FMType.MODEL_LAYER)[0],this.Lt||(this.Mt.push(e.scene),this.Mt.push(t.scene)),(i=this.B.getRenderManager()).bloom||i.bloom?(this.O.parent&&this.O.parent.remove(this.O),this.H.parent&&this.H.parent.remove(this.H),this.H.position.y=this.Tt.height,this.O.position.y=this.Tt.height):(this.H.position.y=0,this.O.position.y=0,(this.I===fengmap.FMType.EXTERNAL_MODEL_LAYER?(t.scene.add(this.O),t):(e.scene.add(this.O),e)).scene.add(this.H)))},Nt:function(t){var e=(this.Tt=t).parent.buildingID;this.B.getRenderManager().waterLayers.set(e+"_"+t.level,this),this.Z()},Dt:function(){for(var t=this.Tt.parent.buildingID,e=(this.B.getRenderManager().waterLayers.delete(t+"_"+this.Tt.level),this.Tt.getLayers(this.Pt)),i=0;i<e.length;i++)this.O.remove(e[i].scene);this.Tt=null},Ct:function(t){t.Tt=this,(t.Rt||t.Z())&&this.It(t),this.O.add(t.k)},It:function(t){this.Et.push(t)},Ot:function(t){this.Ut(t),t.k.parent&&t.k.parent.remove(t.k),t.jt(),-1<(t=this.Et.indexOf(t))&&this.Et.splice(t,1),0===this.Et.length&&this.Dt()},Ut:function(t){t.Tt=void 0,this.O.remove(t.k)}}),ro);function oo(t,e,i,r,n,o,s,a,u){Le.call(this,t,e,i,r,n,o,s,a,u),this.needsUpdate=!0}function so(t){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===so(t=function(t,e){if("object"!==so(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==so(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}((oo.prototype=Object.create(Le.prototype)).constructor=oo).prototype.isCanvasTexture=!0;ro=function(t,e,i){return e&&ao(t.prototype,e),i&&ao(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.kt=e.kt,this.Ht=this.kt.speed,void 0===this.Ht&&(this.Ht=1),this.Tt=e,this.k=null,this.zt=null,this.Bt=null,this.Xt=0,this.Gt=null,this.Vt=null,this.Yt=5,this.Qt=this.Qt.bind(this),this.Wt=1});var uo=(Object.assign(ro.prototype,{Z:function(t){var e=this,i=this.Tt.B.getBuilding(this.Tt.B.getMapOptions().buildingID),r=new Rn;r.moveTo(this.Tt.qt[0].x-i.x,this.Tt.qt[0].y-i.y);for(var n=1;n<this.Tt.qt.length;n++)r.lineTo(this.Tt.qt[n].x-i.x,this.Tt.qt[n].y-i.y);for(var o=this.Tt.B.getBuilding(this.Tt.B.getMapOptions().buildingID),s=new $n(r),a=o.bound.min.x,u=o.bound.min.y,h=o.bound.max.x-a,l=o.bound.max.y-u,c=s.faces,f=c.length,A=0;A<f;A++){var p=s.vertices[c[A].a],d=s.vertices[c[A].b],m=s.vertices[c[A].c];s.faceVertexUvs[0][A][0].x=(p.x+i.x-a)/h,s.faceVertexUvs[0][A][0].y=(p.y+i.y-u)/l,s.faceVertexUvs[0][A][1].x=(d.x+i.x-a)/h,s.faceVertexUvs[0][A][1].y=(d.y+i.y-u)/l,s.faceVertexUvs[0][A][2].x=(m.x+i.x-a)/h,s.faceVertexUvs[0][A][2].y=(m.y+i.y-u)/l}this.Zt(function(i){(i=new Te({transparent:!0,map:i})).map.needsUpdate=!0,i.polygonOffset=!0,i.polygonOffsetFactor=1,i.polygonOffsetUnits=4,e.k=new Yi(s,i),e.k.isNoPick=!0,e.k.rotation.x=-Math.PI/2,e.k.position.y=e.Tt.et,e.Tt.B.on("update",e.Qt),t&&t(e.k)})},Zt:function(t){var e=this,i=this.Tt.B.getBuilding(this.Tt.B.getMapOptions().buildingID).bound,r=(this.Vt=i,new Image);r.crossOrigin="Anonymous",r.onload=function(){e.Gt=r,e.Bt=document.createElement("canvas"),e.Bt.width=r.width,e.Bt.height=r.height,e.Bt.getContext("2d").drawImage(r,0,e.Xt,r.width,r.height);for(var n=document.createElement("canvas"),o=(n.width=i.size.x*e.Yt,n.height=i.size.y*e.Yt,n.getContext("2d")),s=e.kt.pointsInfo,a=0;a<s.length;a++){var u=(s[a].x-i.min.x)*e.Yt,h=(i.max.y-s[a].y)*e.Yt,l=document.createElement("canvas"),c=2*e.Yt*Math.sqrt(s[a].width/2*(s[a].width/2)+s[a].height/2*(s[a].height/2)),f=(l.width=c,l.height=c,l.getContext("2d"));f.save(),f.translate(l.width/2,l.height/2),f.rotate(-s[a].angle*Math.PI/180),f.drawImage(e.Bt,-s[a].width/2*e.Yt,-s[a].height/2*e.Yt,e.Yt*s[a].width,e.Yt*s[a].height),f.translate(0,0),o.drawImage(l,u-e.Yt*s[a].width/2,h-e.Yt*s[a].height/2,c,c)}e.zt=n;var A=document.createElement("canvas");A.width=4096,A.height=4096,A.getContext("2d").drawImage(n,0,0,A.width,A.height),n=new oo(A),t&&t(n)},r.src=this.kt.sprayUrl},Qt:function(){this.Xt>.3*this.Bt.height?this.Wt=-1:this.Xt<0&&(this.Wt=1),this.Xt=this.Xt+this.Ht*this.Wt;for(var t=this.Bt.getContext("2d"),e=(t.clearRect(0,0,this.Bt.width,this.Bt.height),t.drawImage(this.Gt,0,this.Xt,this.Gt.width,this.Gt.height),this.zt.getContext("2d")),i=(e.clearRect(0,0,this.zt.width,this.zt.height),this.kt.pointsInfo),r=0;r<i.length;r++){var n=this.Yt*(i[r].x-this.Vt.min.x),o=this.Yt*(this.Vt.max.y-i[r].y),s=document.createElement("canvas"),a=2*this.Yt*Math.sqrt(i[r].width/2*(i[r].width/2)+i[r].height/2*(i[r].height/2)),u=(s.width=a,s.height=a,s.getContext("2d"));u.save(),u.translate(s.width/2,s.height/2),u.rotate(-i[r].angle*Math.PI/180),u.drawImage(this.Bt,this.Yt*(-i[r].width/2),this.Yt*(-i[r].height/2),this.Yt*i[r].width,this.Yt*i[r].height),u.translate(0,0),e.drawImage(s,n-this.Yt*i[r].width/2,o-this.Yt*i[r].height/2,a,a)}(t=document.createElement("canvas")).width=4096,t.height=4096,t.getContext("2d").drawImage(this.zt,0,0,t.width,t.height),t=new oo(t),this.k.material.map.dispose(),this.k.material.map=t,this.k.material.map.needsUpdate=!0},jt:function(){this.k.parent.remove(this.k),this.k.geometry.dispose(),this.k.material.dispose(),this.k=void 0,this.Tt.B.off("update",this.Qt)}}),ro);function ho(t){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ho(t=function(t,e){if("object"!==ho(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ho(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}ro=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.Kt=i.color,this.Jt=i.alpha,this.et="number"==typeof i.height?i.height:0,this.qt=i.points,this.G=i.url,this.kt=i.sprayInfos,this.I=i.intoLayerType,this.Tt=null,this.k=null,this.$t=null,this.Rt=!1,this.q=this.q.bind(this)}var e,i;return e=t,(i=[{key:"color",get:function(){return this.Kt},set:function(t){this.Kt=t,this.k&&(this.k.material.uniforms.waterColor.value=new U(t))}},{key:"alpha",get:function(){return this.Jt},set:function(t){isNaN(""+t)&&(t=1),this.Jt=t,this.k&&(this.k.material.uniforms.alpha.value=t)}},{key:"height",get:function(){return this.et},set:function(t){this.et=t,this.k&&(this.k.position.y=t)}},{key:"addTo",value:function(t){var e,i=((e=this.B.getRenderManager()).waterLayers||"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui),t.parent.buildingID);(e=e.waterLayers.get(i+"_"+t.level))||(e=new no(this.B),void 0!==this.I&&(e.I=this.I),e.Nt(t)),e.Ct(this),this.tn(e.H),this.B.on("beforeRender",this.q)}},{key:"remove",value:function(){this.$t&&this.$t.jt(),this.Tt.Ot(this)}}])&&lo(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var co=(Object.assign(ro.prototype,{Z:function(){var t=this.B.getBuilding(this.B.getMapOptions().buildingID),e=new Rn;e.moveTo(this.qt[0].x-t.x,this.qt[0].y-t.y);for(var i=1;i<this.qt.length;i++)e.lineTo(this.qt[i].x-t.x,this.qt[i].y-t.y);var r=new to(e);return this.k=new An(r,{textureWidth:512,textureHeight:512,waterNormals:(new ke).load(this.G,function(t){t.wrapS=t.wrapT=m}),alpha:this.Jt,waterColor:this.Kt,distortionScale:5.7,parentNode:this}),this.k.isNoPick=!0,this.k.rotation.x=-Math.PI/2,this.k.position.y=this.et,this.k.renderOrder=-1,this.Rt=!0,this.Rt},tn:function(t){void 0!==this.kt&&void 0!==this.kt.sprayUrl&&void 0!==this.kt.pointsInfo&&0!==this.kt.pointsInfo.length&&(this.$t=new uo(this),this.$t.Z(function(e){t.add(e)}))},q:function(){this.B.enableUpdateRender()},jt:function(){this.k.geometry.dispose(),this.k.geometry=null,this.k.material.dispose(),this.k.material=null,this.k=null,this.Rt=!1}}),{shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new U(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")});function fo(t){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ao(t,e){return(Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function po(t){return(po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mo=function(){var t=r,e=ir;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ao(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=po(t);if(i=e?(i=po(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===fo(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n,o){var s;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(s=i.call(this)).strength=void 0!==e?e:1,s.radius=n,s.threshold=o,s.resolution=void 0!==t?new at(t.x,t.y):new at(256,256),s.clearColor=new U(0,0,0);var a={minFilter:v,magFilter:v,format:x},u=(s.renderTargetsHorizontal=[],s.renderTargetsVertical=[],s.nMips=5,Math.round(s.resolution.x/2)),h=Math.round(s.resolution.y/2);s.renderTargetBright=new nr(u,h,a),s.renderTargetBright.texture.name="UnrealBloomPass.bright",s.renderTargetBright.texture.generateMipmaps=!1;for(var l=0;l<s.nMips;l++){var c;(c=((c=new nr(u,h,a)).texture.name="UnrealBloomPass.h"+l,c.texture.generateMipmaps=!1,s.renderTargetsHorizontal.push(c),new nr(u,h,a))).texture.name="UnrealBloomPass.v"+l,c.texture.generateMipmaps=!1,s.renderTargetsVertical.push(c),u=Math.round(u/2),h=Math.round(h/2)}n=co;var f=(s.highPassUniforms=me.clone(n.uniforms),s.highPassUniforms.luminosityThreshold.value=o,s.highPassUniforms.smoothWidth.value=.01,s.materialHighPassFilter=new ve({uniforms:s.highPassUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,defines:{}}),s.separableBlurMaterials=[],[3,5,7,9,11]);for(u=Math.round(s.resolution.x/2),h=Math.round(s.resolution.y/2),l=0;l<s.nMips;l++)s.separableBlurMaterials.push(s.getSeperableBlurMaterial(f[l])),s.separableBlurMaterials[l].uniforms.texSize.value=new at(u,h),u=Math.round(u/2),h=Math.round(h/2);return s.compositeMaterial=s.getCompositeMaterial(s.nMips),s.compositeMaterial.uniforms.blurTexture1.value=s.renderTargetsVertical[0].texture,s.compositeMaterial.uniforms.blurTexture2.value=s.renderTargetsVertical[1].texture,s.compositeMaterial.uniforms.blurTexture3.value=s.renderTargetsVertical[2].texture,s.compositeMaterial.uniforms.blurTexture4.value=s.renderTargetsVertical[3].texture,s.compositeMaterial.uniforms.blurTexture5.value=s.renderTargetsVertical[4].texture,s.compositeMaterial.uniforms.bloomStrength.value=e,s.compositeMaterial.uniforms.bloomRadius.value=.1,s.compositeMaterial.needsUpdate=!0,s.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],s.bloomTintColors=[new V(1,1,1),new V(1,1,1),new V(1,1,1),new V(1,1,1),new V(1,1,1)],s.compositeMaterial.uniforms.bloomTintColors.value=s.bloomTintColors,t=rr,s.copyUniforms=me.clone(t.uniforms),s.copyUniforms.opacity.value=1,s.materialCopy=new ve({uniforms:s.copyUniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,blending:2,depthTest:!1,depthWrite:!1,transparent:!0}),s.enabled=!0,s.needsSwap=!1,s.oldClearColor=new U,s.oldClearAlpha=1,s.basic=new Te,s.fsQuad=new ir.FullScreenQuad(null),s}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function yo(t){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function go(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,s,a=[],u=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;u=!1}else for(;!(u=(r=o.call(i)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,n=t}finally{try{if(!u&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(h)throw n}}return a}}(t,e)||bo(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=bo(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bo(t,e){var i;if(t)return"string"==typeof t?wo(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?wo(t,e):void 0}function wo(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function xo(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===yo(t=function(t,e){if("object"!==yo(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==yo(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Mo(t,e,i,r){this.renderScene=e,this.renderCamera=i,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new U(1,1,1),this.hiddenEdgeColor=new U(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,ir.call(this),this.resolution=void 0!==t?new at(t.x,t.y):new at(256,256),e={minFilter:v,magFilter:v,format:x},i=Math.round(this.resolution.x/this.downSampleRatio),r=Math.round(this.resolution.y/this.downSampleRatio),this.maskBufferMaterial=new Te({color:16777215}),this.maskBufferMaterial.side=a,this.renderTargetMaskBuffer=new nr(this.resolution.x,this.resolution.y,e),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Ee,this.depthMaterial.side=a,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=u,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=a,this.prepareMaskMaterial.fragmentShader=function(t,e){return e=e.isPerspectiveCamera?"perspective":"orthographic",t.replace(/DEPTH_TO_VIEW_Z/g,e+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new nr(this.resolution.x,this.resolution.y,e),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new nr(i,r,e),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new nr(i,r,e),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new nr(Math.round(i/2),Math.round(r/2),e),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new nr(i,r,e),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new nr(Math.round(i/2),Math.round(r/2),e),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(i,r),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(i/2),Math.round(r/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),t=rr,this.copyUniforms=me.clone(t.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new ve({uniforms:this.copyUniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,blending:u,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new U,this.oldClearAlpha=1,this.fsQuad=new ir.FullScreenQuad(null),this.tempPulseColor1=new U,this.tempPulseColor2=new U,this.textureMatrix=new Tt}function _o(t,e,i,r){Rr.call(this),this.scene=t,this.camera=e,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==i?i:0,this.clearAlpha=void 0!==r?r:0,t=rr,this.copyUniforms=me.clone(t.uniforms),this.copyMaterial=new ve({uniforms:this.copyUniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:2,depthTest:!1,depthWrite:!1}),this.fsQuad=new Rr.FullScreenQuad(this.copyMaterial)}function So(t,e,i,r){_o.call(this,t,e,i,r),this.sampleLevel=0,this.accumulate=!1}Object.assign(mo.prototype,{dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,e){var i=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(i,r);for(var n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(i,r),this.renderTargetsVertical[n].setSize(i,r),this.separableBlurMaterials[n].uniforms.texSize.value=new at(i,r),i=Math.round(i/2),r=Math.round(r/2)},render:function(t,e,i,r,n){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();for(var o=t.autoClear,s=(t.autoClear=!1,t.setClearColor(this.clearColor,1),n&&t.state.buffers.stencil.setTest(!1),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t),this.renderTargetBright),a=0;a<this.nMips;a++)this.fsQuad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.enableAlpha.value=1!==this.oldClearAlpha,this.separableBlurMaterials[a].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[a].uniforms.direction.value=mo.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[a]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[a].uniforms.enableAlpha.value=1!==this.oldClearAlpha,this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=mo.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[a]),t.clear(),this.fsQuad.render(t),s=this.renderTargetsVertical[a];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,n&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?t.setRenderTarget(null):t.setRenderTarget(i),this.fsQuad.render(t),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getSeperableBlurMaterial:function(t){return new ve({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{enableAlpha:{value:!1},colorTexture:{value:null},texSize:{value:new at(.5,.5)},direction:{value:new at(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"\n                varying vec2 vUv;\n                uniform sampler2D colorTexture;\n                uniform vec2 texSize;\n                uniform vec2 direction;\n                uniform bool enableAlpha;\n         \n                float gaussianPdf( in float x, in float sigma) {\n                    return 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n                }\n                \n                void main() {\n                    vec2 invSize = 1.0 / texSize; \n                    float fSigma = float(SIGMA);\n                    float weightSum = gaussianPdf(0.0, fSigma);\n                    float alphaSum = 0.0;\n                    vec3 diffuseSum = texture2D(colorTexture, vUv).rgb * weightSum;\n                    \n                    for (int i = 1; i < KERNEL_RADIUS; i++) {\n                    \n                        float x = float(i);\n                        float w = gaussianPdf(x, fSigma);\n                        \n                        vec2 uvOffset = direction * invSize * x;\n                        vec4 sample1 = texture2D(colorTexture, vUv + uvOffset);\n                        vec4 sample2 = texture2D(colorTexture, vUv - uvOffset);\n                        \n                        diffuseSum += (sample1.rgb + sample2.rgb) * w;\n                        alphaSum += (sample1.a + sample2.a) * w;\n                        weightSum += 2.0 * w;\n                    }\n                    \n                    if(enableAlpha){\n                        gl_FragColor = vec4(diffuseSum / weightSum, alphaSum / weightSum);\n                    } else{\n                        gl_FragColor = vec4(diffuseSum / weightSum, 1.0);\n                    }\n                    \n                }"})},getCompositeMaterial:function(t){return new ve({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;            uniform sampler2D blurTexture1;            uniform sampler2D blurTexture2;            uniform sampler2D blurTexture3;            uniform sampler2D blurTexture4;            uniform sampler2D blurTexture5;            uniform sampler2D dirtTexture;            uniform float bloomStrength;            uniform float bloomRadius;            uniform float bloomFactors[NUM_MIPS];            uniform vec3 bloomTintColors[NUM_MIPS];                        float lerpBloomFactor(const in float factor) {                float mirrorFactor = 1.2 - factor;                return mix(factor, mirrorFactor, bloomRadius);            }                        void main() {                gl_FragColor = bloomStrength * (                    lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +                    lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +                    lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +                    lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +                    lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );            }"})}}),mo.BlurDirectionX=new at(1,0),mo.BlurDirectionY=new at(0,1);var Bo=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.nn="number"==typeof(i=i||{}).strength?i.strength:.62,this.en="number"==typeof i.radius?i.radius:.6,this.rn="number"==typeof i.threshold?i.threshold:.4,this.ot=null,this.D=new ni,this.N=new Map,this.on=null,this.singleSceneList=new Map,this.Wt=1,this.an=!1,this.sn=1,this.hn=1,this.ln=1,this.un=1,this.cn=[],this.fn=[],this.Z()}var e,i;return e=t,(i=[{key:"getThreshold",value:function(){return this.on.threshold}},{key:"setThreshold",value:function(t){this.on.threshold=t,this.rn=t,this.B.enableUpdateRender()}},{key:"getStrength",value:function(){return this.on.strength}},{key:"setStrength",value:function(t){this.on.strength=t,this.nn=t,this.B.enableUpdateRender()}},{key:"getRadius",value:function(){return this.on.radius}},{key:"setRadius",value:function(t){this.on.radius=t,this.en=t,this.B.enableUpdateRender()}},{key:"enable",value:function(){this.ot.bloom=this;for(var t=0;t<this.fn.length;t++)this.dn(this.fn[t]);for(var e=0;e<this.cn.length;e++)this.dn(this.cn[e]);this.vn(),this.B.on("update",this.mn),this.B.enableUpdateRender()}},{key:"disable",value:function(){this.ot.bloom=null;var t,e=vo(this.singleSceneList);try{for(e.s();!(t=e.n()).done;){var i,r=go(t.value,2),n=(r[0],r[1]),o=vo(n);try{for(o.s();!(i=o.n()).done;)for(var s=go(i.value,2),a=(s[0],s[1]);0<a.children.length;){var u=a.children[0];u.parent.remove(u),u.mapNode&&u.mapNode.parent.scene.add(u)}}catch(t){o.e(t)}finally{o.f()}n.clear()}}catch(t){e.e(t)}finally{e.f()}this.vn(),this.B.off("update",this.mn),this.singleSceneList.clear(),this.B.enableUpdateRender()}},{key:"add",value:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.dn(t[e]);else this.dn(t);this.B.enableUpdateRender()}},{key:"remove",value:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.pn(t[e]);else this.pn(t);this.B.enableUpdateRender()}},{key:"clear",value:function(){this.N.forEach(function(t,e,i){t.clear()}),this.N.clear();var t,e=vo(this.singleSceneList);try{for(e.s();!(t=e.n()).done;){var i,r=go(t.value,2),n=(r[0],r[1]),o=vo(n);try{for(o.s();!(i=o.n()).done;)for(var s=go(i.value,2),a=(s[0],s[1]);0<a.children.length;){var u=a.children[0];u.parent.remove(u),u.mapNode&&u.mapNode.parent.scene.add(u)}}catch(t){o.e(t)}finally{o.f()}n.clear()}}catch(t){e.e(t)}finally{e.f()}this.singleSceneList.clear(),this.cn.length=0,this.fn.length=0,this.B.enableUpdateRender()}},{key:"updateCamera",value:function(){for(var t=0;t<this.C.passes.length;t++)this.C.passes[t].constructor===fr&&this.C.passes[t].setPass(this.D,this.B.camera)}},{key:"breath",value:function(t){this.an||(this.an=!0,this.sn=t.size,this.hn=t.duration,this.on.threshold=0,this.ln=(this.sn-1)/(30*this.hn),this.B.on("update",this.gn))}},{key:"stopBreath",value:function(){this.an&&(this.an=!1,this.on.threshold=this.rn,this.on.radius=this.en,this.on.strength=this.nn,this.un=1,this.B.enableUpdateRender(),this.B.off("update",this.gn))}}])&&xo(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Eo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,s,a=[],u=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;u=!1}else for(;!(u=(r=o.call(i)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,n=t}finally{try{if(!u&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(h)throw n}}return a}}(t,e)||Co(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(t,e){var i;if(t)return"string"==typeof t?To(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?To(t,e):void 0}function To(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Po(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Fo(t=function(t,e){if("object"!==Fo(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Fo(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Object.assign(Bo.prototype,{Z:function(){"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui),this.ot=this.B.getRenderManager(),this._n(),this.C=new Dr(this.ot.renderer);var t=new fr(this.D,this.B.camera,null,0,1);this.C.addPass(t),this.on=new mo(new at(this.B.getContainer().clientWidth,this.B.getContainer().clientHeight),this.nn,this.en,this.rn),this.C.addPass(this.on),this.ft=this.ft.bind(this),this.gn=this.gn.bind(this),this.mn=this.mn.bind(this),this.B.on("resize",this.ft)},ft:function(){var t,e;this.C&&(t=(e=this.B.getContainer()).clientWidth,e=e.clientHeight,this.C.setSize(t,e))},_n:function(){var t,e=vo(this.ot.waterLayers.values());try{for(e.s();!(t=e.n()).done;)t.value.removeForm()}catch(t){e.e(t)}finally{e.f()}},pn:function(t){var e,i,r;t.isLayer?(e=(r=t).parent.level,i=r.parent.parent.buildingID,(i=this.N.get(i+"_"+e))&&i.delete(r.type)):(t.isMarker?-1!==(e=this.yn(t))&&this.fn.splice(e,1):-1!==(i=this.xn(t))&&this.cn.splice(i,1),(r=t.getRenderNode())&&(t.isMarker&&(r.bloom=void 0),r.parent.remove(r),t.parent.scene.add(r)))},xn:function(t){for(var e=-1,i=0;i<this.cn.length;i++)if(this.cn[i].FID===t.FID){e=i;break}return e},yn:function(t){for(var e=-1,i=0;i<this.fn.length;i++)t.getRenderNode().uuid===this.fn[i].getRenderNode().uuid&&(e=i);return e},dn:function(t){if(t.isLayer){var e=t,i=e.parent.level,r=e.parent.parent.buildingID,n=this.N.get(r+"_"+i);n||(n=new Map,this.N.set(r+"_"+i,n)),n.set(e.type,e)}else if(t.isMarker?-1===this.yn(t)&&this.fn.push(t):-1===this.xn(t)&&this.cn.push(t),null!==this.ot.bloom){if(r=t.parent.parent,i=t.parent,n=r.level,e=r.parent.buildingID,(r=this.singleSceneList.get(e+"_"+n))||(r=new Map,this.singleSceneList.set(e+"_"+n,r)),!(e=r.get(i.type))){(e=new ni).position.y=i.scene.position.y;for(var o,s=e,a=[],u=null,h=i.scene,l=0;l<h.children.length;l++)h.children[l].mapNode||((o=h.children[l].clone()).visible=!0,s.add(o),"DirectionalLight"===o.type&&a.push(o),"Object3D"===o.type&&(u=o));for(var c=0;c<a.length;c++)a[c].target=u;r.set(i.type,e)}(n=t.getRenderNode())&&(n.bloom=this,n.parent.remove(n),e.add(n))}},gn:function(){this.sn<1?(this.un<=this.sn&&(this.Wt=-1),1<=this.un&&(this.Wt=1)):(this.un>=this.sn&&(this.Wt=-1),this.un<1&&(this.Wt=1)),this.un=this.un+this.Wt*this.ln,this.on.radius=this.en*this.un,this.on.strength=this.nn*this.un,this.B.enableUpdateRender()},mn:function(){for(var t=0;t<this.cn.length;t++){var e,i,r=this.cn[t].getRenderNode(),n=this.cn[t];r&&(i=n.parent.parent,n=n.parent,e=i.level,i=i.parent.buildingID,(i=this.singleSceneList.get(i+"_"+e).get(n.type)).uuid!==r.parent.uuid)&&(r.parent.remove(r),i.add(r))}},vn:function(){if(0<this.ot.waterLayers.size){var t,e=vo(this.ot.waterLayers);try{for(e.s();!(t=e.n()).done;){var i=go(t.value,2);i[0],i[1].Ft(!0)}}catch(t){e.e(t)}finally{e.f()}}}}),Mo.prototype=Object.assign(Object.create(ir.prototype),{constructor:Mo,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(t,e){this.renderTargetMaskBuffer.setSize(t,e),t=Math.round(t/this.downSampleRatio),e=Math.round(e/this.downSampleRatio),this.renderTargetMaskDownSampleBuffer.setSize(t,e),this.renderTargetBlurBuffer1.setSize(t,e),this.renderTargetEdgeBuffer1.setSize(t,e),this.separableBlurMaterial1.uniforms.texSize.value.set(t,e),t=Math.round(t/2),e=Math.round(e/2),this.renderTargetBlurBuffer2.setSize(t,e),this.renderTargetEdgeBuffer2.setSize(t,e),this.separableBlurMaterial2.uniforms.texSize.value.set(t,e)},changeVisibilityOfSelectedObjects:function(t){function e(e){e.isMesh&&(t?(e.visible=e.userData.oldVisible,delete e.userData.oldVisible):(e.userData.oldVisible=e.visible,e.visible=t))}for(var i=0;i<this.selectedObjects.length;i++)this.selectedObjects[i].traverse(e)},changeVisibilityOfNonSelectedObjects:function(t){var e=[];function i(t){t.isMesh&&e.push(t)}for(var r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(i);this.renderScene.traverse(function(i){if(i.isMesh||i.isLine||i.isSprite){for(var r,n=!1,o=0;o<e.length;o++)if(e[o].id===i.id){n=!0;break}n||(r=i.visible,t&&!i.bVisible||(i.visible=t),i.bVisible=r)}})},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(t,e,i,r,n){var o,s;0<this.selectedObjects.length&&(this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha(),o=t.autoClear,t.autoClear=!1,n&&t.state.buffers.stencil.setTest(!1),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1),s=this.renderScene.background,this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,t.setRenderTarget(this.renderTargetDepthBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,t.setRenderTarget(this.renderTargetMaskBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this.renderScene.background=s,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,t.setRenderTarget(this.renderTargetMaskDownSampleBuffer),t.clear(),this.fsQuad.render(t),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),0<this.pulsePeriod&&(s=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2,this.tempPulseColor1.multiplyScalar(s),this.tempPulseColor2.multiplyScalar(s)),this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Mo.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,t.setRenderTarget(this.renderTargetBlurBuffer1),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Mo.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Mo.BlurDirectionX,t.setRenderTarget(this.renderTargetBlurBuffer2),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Mo.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer2),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,n&&t.state.buffers.stencil.setTest(!0),t.setRenderTarget(i),this.fsQuad.render(t),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o),this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,t.setRenderTarget(null),this.fsQuad.render(t))},getPrepareMaskMaterial:function(){return new ve({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new at(.5,.5)},textureMatrix:{value:null}},vertexShader:["#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","varying vec4 projTexCoord;","varying vec4 vPosition;","uniform mat4 textureMatrix;","void main() {","\t#include <skinbase_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\tvPosition = mvPosition;","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tprojTexCoord = textureMatrix * worldPosition;","}"].join("\n"),fragmentShader:["#include <packing>","varying vec4 vPosition;","varying vec4 projTexCoord;","uniform sampler2D depthTexture;","uniform vec2 cameraNearFar;","void main() {","\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));","\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );","\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;","\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);","}"].join("\n")})},getEdgeDetectionMaterial:function(){return new ve({uniforms:{maskTexture:{value:null},texSize:{value:new at(.5,.5)},visibleEdgeColor:{value:new V(1,1,1)},hiddenEdgeColor:{value:new V(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(t){return new ve({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new at(.5,.5)},direction:{value:new at(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\t\t\t\t}"})},getOverlayMaterial:function(){return new ve({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}),Mo.BlurDirectionX=new at(1,0),Mo.BlurDirectionY=new at(0,1),_o.prototype=Object.assign(Object.create(Rr.prototype),{constructor:_o,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(t,e){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(t,e)},render:function(t,e,i){this.sampleRenderTarget||(this.sampleRenderTarget=new nr(i.width,i.height,{minFilter:v,magFilter:v,format:x}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");for(var r=_o.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],n=t.autoClear,o=(t.autoClear=!1,t.getClearColor().getHex()),s=t.getClearAlpha(),a=1/r.length,u=(this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,i.width),h=i.height,l=0;l<r.length;l++){var c=r[l];c=(this.camera.setViewOffset&&this.camera.setViewOffset(u,h,.0625*c[0],.0625*c[1],u,h),a);this.unbiased&&(c+=1/32*((l+.5)/r.length-.5)),this.copyUniforms.opacity.value=c,t.setClearColor(this.clearColor,this.clearAlpha),t.setRenderTarget(this.sampleRenderTarget),t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(this.renderToScreen?null:e),0===l&&(t.setClearColor(this.clearColor,0),t.clear()),this.fsQuad.render(t)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),t.autoClear=n,t.setClearColor(o,s)}}),So.JitterVectors=_o.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],So.prototype=Object.assign(Object.create(_o.prototype),{constructor:So,render:function(t,e,i,r){if(this.accumulate){var n=So.JitterVectors[5],o=(this.sampleRenderTarget||(this.sampleRenderTarget=new nr(i.width,i.height,this.params),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),this.holdRenderTarget||(this.holdRenderTarget=new nr(i.width,i.height,this.params),this.holdRenderTarget.texture.name="TAARenderPass.hold"),this.accumulate&&-1===this.accumulateIndex&&(_o.prototype.render.call(this,t,this.holdRenderTarget,i,r),this.accumulateIndex=0),t.autoClear),s=(t.autoClear=!1,1/n.length);if(0<=this.accumulateIndex&&this.accumulateIndex<n.length){this.copyUniforms.opacity.value=s,this.copyUniforms.tDiffuse.value=e.texture;for(var a=Math.pow(2,this.sampleLevel),u=0;u<a;u++){var h=n[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(i.width,i.height,.0625*h[0],.0625*h[1],i.width,i.height),t.setRenderTarget(e),t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(this.sampleRenderTarget),0===this.accumulateIndex&&t.clear(),this.fsQuad.render(t),this.accumulateIndex++,this.accumulateIndex>=n.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}0<(s=this.accumulateIndex*s)&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,t.setRenderTarget(e),t.clear(),this.fsQuad.render(t)),s<1&&(this.copyUniforms.opacity.value=1-s,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,t.setRenderTarget(e),0==s&&t.clear(),this.fsQuad.render(t)),t.autoClear=o}else _o.prototype.render.call(this,t,e,i,r),this.accumulateIndex=-1}});var Oo=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.bn=3,void 0!==i.edgeStrength&&(this.bn=i.edgeStrength),void(this.wn=0)!==i.edgeGlow&&(this.wn=i.edgeGlow),this.An=1,void 0!==i.edgeThickness&&(this.An=i.edgeThickness),void(this.Sn=0)!==i.pulsePeriod&&(this.Sn=i.pulsePeriod),this.Tn="#FFFFFF",void 0!==i.visibleEdgeColor&&(this.Tn=i.visibleEdgeColor),this.Mn="#FFFFFF",void 0!==i.hiddenEdgeColor?this.Mn=i.hiddenEdgeColor:this.Mn=this.Tn,this.ot=null,this.ct=new ni,this.En=new ni,this.Pn=new ni,this.ct.add(this.Pn),this.N=new Map,this.Ln=null,this.Fn=null,this.Nn=[],this.Dn=null,this.C=null,this.Z()}var e,i;return e=t,(i=[{key:"updateCamera",value:function(){for(var t=0;t<this.C.passes.length;t++)this.C.passes[t].constructor===fr&&this.C.passes[t].setPass(this.En,this.B.camera)}},{key:"enable",value:function(){(this.ot.outLine=this).vn(),this.B.on("update",this.Qt),this.B.on("resize",this.ft),this.B.on("viewModeChanged",this.Cn)}},{key:"disable",value:function(){this.ot.outLine=null,this.vn();for(var t=0;t<this.Pn.children.length;t++)for(var e=this.Pn.children[t],i=0;i<e.children.length;i++)"DirectionalLight"!==e.children[i].type&&"AmbientLight"!==e.children[i].type||(e.children[i].visible=!0);this.B.off("update",this.Qt),this.B.off("resize",this.ft),this.B.off("viewModeChanged",this.Cn)}},{key:"add",value:function(t){if(this.remove(),Array.isArray(t))for(var e=0;e<t.length;e++){var i=t[e].type;i!==fengmap.FMType.MODEL&&i!==fengmap.FMType.EXTERNAL_MODEL&&i!==fengmap.FMType.DYNAMIC_MODEL_MARKER||this.Nn.push(t[e])}else{var r=t.type;r!==fengmap.FMType.MODEL&&r!==fengmap.FMType.EXTERNAL_MODEL&&r!==fengmap.FMType.DYNAMIC_MODEL_MARKER||this.Nn.push(t)}}},{key:"remove",value:function(t){var e=this;if(t){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i].type!==fengmap.FMType.MODEL&&t[i].type!==fengmap.FMType.EXTERNAL_MODEL&&t[i].type!==fengmap.FMType.DYNAMIC_MODEL_MARKER||n(t[i]);else{var r=t.type;r!==fengmap.FMType.MODEL&&r!==fengmap.FMType.EXTERNAL_MODEL&&r!==fengmap.FMType.DYNAMIC_MODEL_MARKER||n(t)}0===this.Nn.length&&(this.Ln.selectedObjects=[])}else this.Nn.length=0,this.Ln.selectedObjects=[];function n(t){for(var i=0;i<e.Nn.length;i++)if(e.Nn[i].FID===t.FID){e.Nn.splice(i,1);break}}this.B.enableUpdateRender()}}])&&Po(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Do(t){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Do(t=function(t,e){if("object"!==Do(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Do(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Object.assign(Oo.prototype,{Z:function(){"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui),this.ot=this.B.getRenderManager(),this.C=new Dr(this.ot.renderer);var t=new fr(this.En,this.B.camera),e=(t=(this.C.addPass(t),this.ot.renderer.getClearColor()),this.ot.renderer.getClearAlpha());this.Fn=new So(this.En,this.B.camera,t,e),this.Fn.unbiased=!1,this.C.addPass(this.Fn),this.Ln=new Mo(new at(this.B.getContainer().clientWidth,this.B.getContainer().clientHeight),this.En,this.B.camera),this.Ln.edgeStrength=this.bn,this.Ln.edgeGlow=this.wn,this.Ln.edgeThickness=this.An,this.Ln.pulsePeriod=this.Sn,this.Ln.visibleEdgeColor=new U(this.Tn),this.Ln.hiddenEdgeColor=new U(this.Mn),this.C.addPass(this.Ln),this.ft=this.ft.bind(this),this.Qt=this.Qt.bind(this),this.Cn=this.Cn.bind(this)},ft:function(){var t,e;this.C&&(t=(e=this.B.getContainer()).clientWidth,e=e.clientHeight,this.C.setSize(t,e))},Qt:function(){for(var t=[],e=0;e<this.Nn.length;e++)this.Nn[e].getRenderNode()&&t.push(this.Nn[e].getRenderNode());this.Ln.selectedObjects=t,0<this.Ln.selectedObjects.length&&this.B.enableUpdateRender()},Rn:function(){for(;0<this.Pn.children.length;)this.Pn.remove(this.Pn.children[0])},Cn:function(){this.Ln.renderCamera=this.B.camera,this._ssaa.camera=this.B.camera},R:function(t){var e=this,i=[],r=null;if(!this.Dn){for(var n,o=0;o<t.children.length;o++)t.children[o].mapNode||(n=t.children[o].clone(),this.ct.add(n),"DirectionalLight"===n.type&&i.push(n),"Object3D"===n.type&&(r=n));for(var s=0;s<i.length;s++)i[s].target=r;this.Dn=!0}for(var a=0;a<t.children.length;a++)"DirectionalLight"!==t.children[a].type&&"AmbientLight"!==t.children[a].type||(t.children[a].visible=!1);!function(){for(var i=!0,r=0;r<e.Pn.children.length;r++)if(e.Pn.children[r].uuid===t.uuid){i=!1;break}return i}()||this.Pn.add(t)},F:function(t){this.B.getZoom()<20?this.Fn.sampleLevel=2:20<this.B.getZoom()&&this.B.getZoom()<22?this.Fn.sampleLevel=3:this.Fn.sampleLevel=4,t.render(this.ct,this.B.camera),this.updateCamera(),this.En.add(this.ct),this.C.render(),this.En.remove(this.ct),this.Rn()},vn:function(){if(0<this.ot.waterLayers.size){var t,e=function(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=Co(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.ot.waterLayers);try{for(e.s();!(t=e.n()).done;){var i=Eo(t.value,2);i[0],i[1].Ft(!0)}}catch(t){e.e(t)}finally{e.f()}}}});var Io=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.In=[],this.On={x:0,y:0,maxR:0,radius:0,minR:0,widthR:0,length:0,distance:0,width:0,height:0,color_a:0,color_r:0,point:null,endPoint:null,startPoint:null,se2N:null,speed:1,se2RN:null},this.Un=!1,this.jn=!1,this.ot=this.st(),this.kn=(new Date).getTime(),this.q=this.q.bind(this),this.Hn=!1,this.Z()}var e,i;return e=t,(i=[{key:"enable",value:function(){this.Hn=!0,(this.ot.sweep=this).B.on("beforeRender",this.q)}},{key:"disable",value:function(){this.Hn=!1;for(var t=Array.from(this.ot.getRenderList()),e=0;e<t.length;e++){var i=t[e][1];this.render(i,!0)}this.ot.sweep=null,this.B.off("beforeRender",this.q)}},{key:"annulus",value:function(t){var e=this;this.On.x=t.x,this.On.y=t.y,this.On.maxR=t.maxRadius,this.On.minR=t.minRadius,this.On.radius=t.minRadius+t.width,this.On.widthR=t.width,this.On.duration_a=1e3*t.duration,this.On.color_a=new U(t.color),this.On.sweepStrength=t.strength,void 0===this.On.sweepStrength&&(this.On.sweepStrength=1),this.On.isSweepTexture=!1,void 0!==t.url&&(new ke).load(t.url,function(t){e.On.sweepTexture=t,e.On.isSweepTexture=!0}),this.Un=!0}},{key:"rect",value:function(t){var e=this,i=(this.On.endPoint=new at(t.endPoint.x-this.B.x,-t.endPoint.y+this.B.y),this.On.startPoint=new at(t.startPoint.x-this.B.x,-t.startPoint.y+this.B.y),this.On.point=this.On.startPoint.clone(),new at(t.endPoint.x-t.startPoint.x,-t.endPoint.y+t.startPoint.y));this.On.se2N=i.normalize(),this.On.se2RN=i.clone().rotateAround(new at(0,0),Math.PI/2).normalize(),this.On.duration_r=1e3*t.duration,this.On.width=t.width,this.On.height=t.height,this.On.distance=this.On.endPoint.distanceTo(this.On.startPoint),this.On.color_r=new U(t.color),this.jn=!0,this.On.sweepStrength=t.strength,void 0===this.On.sweepStrength&&(this.On.sweepStrength=1),this.On.isSweepTexture=!1,void 0!==t.url&&(new ke).load(t.url,function(t){e.On.sweepTexture=t,e.On.isSweepTexture=!0})}},{key:"render",value:function(t,e){var i,r=this;this.Un&&(this.On.radius<this.On.maxR?this.On.radius+=((new Date).getTime()-this.kn)*this.On.maxR/this.On.duration_a:this.On.radius=this.On.minR),this.jn&&(i=((new Date).getTime()-this.kn)*this.On.distance/this.On.duration_r,i=this.On.se2N.clone().multiplyScalar(i),this.On.length<=this.On.distance?(this.On.point.add(i),this.On.length+=i.length()):(this.On.point=this.On.startPoint.clone(),this.On.length=0)),t.traverse(function(t){"Mesh"===t.type&&"FMMeshStandardMaterial"===t.material.type&&(r.Un&&(t.material.uniforms.isAnnulus.value||(t.material.uniforms.isAnnulus.value=!0,t.material.uniforms.circleC.value=new at(r.On.x-r.B.x,-r.On.y+r.B.y),t.material.uniforms.color_a.value=r.On.color_a),t.material.uniforms.maxR.value=r.On.radius+r.On.widthR,t.material.uniforms.minR.value=r.On.radius,t.material.uniforms.isEnable.value=r.Hn,t.material.uniforms.isSweepTexture.value=r.On.isSweepTexture,t.material.uniforms.sweepTexture.value=r.On.sweepTexture,t.material.uniforms.sweepStrength.value=r.On.sweepStrength,t.material.uniformsNeedUpdate=!0,e)&&r.B.enableUpdateRender(),r.jn)&&(t.material.uniforms.isRect.value||(t.material.uniforms.isRect.value=!0,t.material.uniforms.sweepW.value=r.On.width,t.material.uniforms.sweepH.value=r.On.height,t.material.uniforms.se2N.value=r.On.se2N,t.material.uniforms.se2RN.value=r.On.se2RN,t.material.uniforms.color_r.value=r.On.color_r),t.material.uniforms.moveP.value=r.On.point,t.material.uniforms.isEnable.value=r.Hn,t.material.uniforms.isSweepTexture.value=r.On.isSweepTexture,t.material.uniforms.sweepTexture.value=r.On.sweepTexture,t.material.uniforms.sweepStrength.value=r.On.sweepStrength,t.material.uniformsNeedUpdate=!0,e)&&r.B.enableUpdateRender()}),this.kn=(new Date).getTime()}}])&&Ro(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Uo=(Object.assign(Io.prototype,{q:function(){this.B.enableUpdateRender()},st:function(){return"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui),this.B.getRenderManager()},Z:function(){for(var t=this,e=this.B.getBuilding(this.B.getMapOptions().buildingID).getFloors(),i=0;i<e.length;i++)for(var r=e[i].getLayers(),n=0;n<r.length;n++)r[n].type===fengmap.FMType.EXTERNAL_MODEL_LAYER&&r[n].scene.traverse(function(e){e.isGltf&&"Mesh"===e.type&&t.In.push(e)})}}),{uniforms:{tDiffuse:{value:null},resolution:{value:new at(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")}),Lo={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new at(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Tt},cameraInverseProjectionMatrix:{value:new Tt},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","uniform sampler2D tDepth;","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float scale;","uniform float intensity;","uniform float bias;","uniform float kernelRadius;","uniform float minResolution;","uniform vec2 size;","uniform float randomSeed;","// RGBA depth","#include <packing>","vec4 getDefaultColor( const in vec2 screenPosition ) {","\t#if DIFFUSE_TEXTURE == 1","\treturn texture2D( tDiffuse, vUv );","\t#else","\treturn vec4( 1.0 );","\t#endif","}","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","\tclipPosition *= clipW; // unprojection.","\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","\t#if NORMAL_TEXTURE == 1","\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","\t#else","\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","\t#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","\tvec3 viewDelta = sampleViewPosition - centerViewPosition;","\tfloat viewDistance = length( viewDelta );","\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;","\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );","}","// moving costly divides into consts","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","\t// precompute some variables require in getOcclusion.","\tscaleDividedByCameraFar = scale / cameraFar;","\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;","\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/","\tfloat angle = rand( vUv + randomSeed ) * PI2;","\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;","\tvec2 radiusStep = radius;","\tfloat occlusionSum = 0.0;","\tfloat weightSum = 0.0;","\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {","\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;","\t\tradius += radiusStep;","\t\tangle += ANGLE_STEP;","\t\tfloat sampleDepth = getDepth( sampleUv );","\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {","\t\t\tcontinue;","\t\t}","\t\tfloat sampleViewZ = getViewZ( sampleDepth );","\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","\t\tweightSum += 1.0;","\t}","\tif( weightSum == 0.0 ) discard;","\treturn occlusionSum * ( intensity / weightSum );","}","void main() {","\tfloat centerDepth = getDepth( vUv );","\tif( centerDepth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = getViewZ( centerDepth );","\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );","\tgl_FragColor = getDefaultColor( vUv );","\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;","}"].join("\n")},ko={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new at(512,512)},sampleUvOffsets:{value:[new at(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:["#include <common>","uniform vec2 size;","varying vec2 vUv;","varying vec2 vInvSize;","void main() {","\tvUv = uv;","\tvInvSize = 1.0 / size;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","uniform float depthCutoff;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","varying vec2 vInvSize;","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","void main() {","\tfloat depth = getDepth( vUv );","\tif( depth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = -getViewZ( depth );","\tbool rBreak = false, lBreak = false;","\tfloat weightSum = sampleWeights[0];","\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","\t\tfloat sampleWeight = sampleWeights[i];","\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;","\t\tvec2 sampleUv = vUv + sampleUvOffset;","\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;","\t\tif( ! rBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t\tsampleUv = vUv - sampleUvOffset;","\t\tviewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;","\t\tif( ! lBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t}","\tgl_FragColor = diffuseSum / weightSum;","}"].join("\n")},jo={createSampleWeights:function(t,e){for(var i,r,n=[],o=0;o<=t;o++)n.push((i=o,r=e,Math.exp(-i*i/(r*r*2))/(Math.sqrt(2*Math.PI)*r)));return n},createSampleOffsets:function(t,e){for(var i=[],r=0;r<=t;r++)i.push(e.clone().multiplyScalar(r));return i},configure:function(t,e,i,r){t.defines.KERNEL_RADIUS=e,t.uniforms.sampleUvOffsets.value=jo.createSampleOffsets(e,r),t.uniforms.sampleWeights.value=jo.createSampleWeights(e,i),t.needsUpdate=!0}},Qo={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","\tgl_FragColor = vec4( vec3( depth ), opacity );","}"].join("\n")};function No(t,e,i,r,n,o,s,a,u,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Le.call(this,null,r,n,o,s,a,h,i=void 0===(i=void 0===i&&1026===h?1012:i)&&1027===h?1020:i,u),this.image={width:t,height:e},this.magFilter=void 0!==s?s:g,this.minFilter=void 0!==a?a:g,this.flipY=!1,this.generateMipmaps=!1}function zo(t,e,i,r,n){ir.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=void 0!==i&&i,this.supportsNormalTexture=void 0!==r&&r,this.originalClearColor=new U,this.oldClearColor=new U,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=void 0!==n?new at(n.x,n.y):new at(256,256),this.saoRenderTarget=new nr(this.resolution.x,this.resolution.y,{minFilter:v,magFilter:v,format:x}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new nr(this.resolution.x,this.resolution.y,{minFilter:g,magFilter:g,format:x}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension&&((i=new No).type=1012,i.minFilter=g,i.maxFilter=g,this.beautyRenderTarget.depthTexture=i,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new Ee,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=u,this.normalMaterial=new Se,this.normalMaterial.blending=u,this.saoMaterial=new ve({defines:Object.assign({},Lo.defines),fragmentShader:Lo.fragmentShader,vertexShader:Lo.vertexShader,uniforms:me.clone(Lo.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?i:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(this.camera.projectionMatrix),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=u,this.vBlurMaterial=new ve({uniforms:me.clone(ko.uniforms),defines:Object.assign({},ko.defines),vertexShader:ko.vertexShader,fragmentShader:ko.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?i:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=u,this.hBlurMaterial=new ve({uniforms:me.clone(ko.uniforms),defines:Object.assign({},ko.defines),vertexShader:ko.vertexShader,fragmentShader:ko.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?i:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=u,this.materialCopy=new ve({uniforms:me.clone(rr.uniforms),vertexShader:rr.vertexShader,fragmentShader:rr.fragmentShader,blending:u}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=5,this.materialCopy.blendSrc=208,this.materialCopy.blendDst=200,this.materialCopy.blendEquation=l,this.materialCopy.blendSrcAlpha=206,this.materialCopy.blendDstAlpha=200,this.materialCopy.blendEquationAlpha=l,this.depthCopy=new ve({uniforms:me.clone(Qo.uniforms),vertexShader:Qo.vertexShader,fragmentShader:Qo.fragmentShader,blending:u}),this.fsQuad=new ir.FullScreenQuad(null)}function Ho(t){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vo(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ho(t=function(t,e){if("object"!==Ho(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ho(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}((No.prototype=Object.create(Le.prototype)).constructor=No).prototype.isDepthTexture=!0,zo.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4},zo.prototype=Object.assign(Object.create(ir.prototype),{constructor:zo,render:function(t,e,i){var r,n;this.renderToScreen&&(this.materialCopy.blending=u,this.materialCopy.uniforms.tDiffuse.value=i.texture,this.materialCopy.needsUpdate=!0,this.renderPass(t,this.materialCopy,null)),1!==this.params.output&&(this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha(),r=t.autoClear,t.autoClear=!1,t.setRenderTarget(this.depthRenderTarget),t.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far,n=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near),this.vBlurMaterial.uniforms.depthCutoff.value=n,this.hBlurMaterial.uniforms.depthCutoff.value=n,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(jo.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new at(0,1)),jo.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new at(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),t.setClearColor(0),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(t,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(t,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(t,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(t,this.hBlurMaterial,this.saoRenderTarget,16777215,1)),n=this.materialCopy,3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,n=this.depthCopy):(4===this.params.output?this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture:this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?n.blending=5:n.blending=u,this.renderPass(t,n,this.renderToScreen?null:i),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=r)},renderPass:function(t,e,i,r,n){this.originalClearColor.copy(t.getClearColor());var o=t.getClearAlpha(),s=t.autoClear;t.setRenderTarget(i),t.autoClear=!1,null!=r&&(t.setClearColor(r),t.setClearAlpha(n||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=s,t.setClearColor(this.originalClearColor),t.setClearAlpha(o)},renderOverride:function(t,e,i,r,n){this.originalClearColor.copy(t.getClearColor());var o=t.getClearAlpha(),s=t.autoClear;t.setRenderTarget(i),t.autoClear=!1,r=e.clearColor||r,n=e.clearAlpha||n,null!=r&&(t.setClearColor(r),t.setClearAlpha(n||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=s,t.setClearColor(this.originalClearColor),t.setClearAlpha(o)},setSize:function(t,e){this.beautyRenderTarget.setSize(t,e),this.saoRenderTarget.setSize(t,e),this.blurIntermediateRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.depthRenderTarget.setSize(t,e),this.saoMaterial.uniforms.size.value.set(t,e),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(this.camera.projectionMatrix),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(t,e),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(t,e),this.hBlurMaterial.needsUpdate=!0}});var Go=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.O=new ni,this.ot=this.st(),this.Z(i)}var e,i;return e=t,(i=[{key:"getAttribute",value:function(t){for(var e in this.zn.params)if(e.toLowerCase()===("sao"+t).toLowerCase())return this.zn.params[e]}},{key:"setAttribute",value:function(t,e){for(var i in this.zn.params)i.toLowerCase()===("sao"+t).toLowerCase()&&(this.zn.params[i]=e)}},{key:"add",value:function(t){this.O.add(t)}},{key:"enable",value:function(){this.ot.sao=this}},{key:"disable",value:function(){this.ot.sao=null}},{key:"render",value:function(){this.Bn.render()}}])&&Vo(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ko(t,e,i,r,n,o){zr.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:n},o=new Yo(t,e,i,r,n),this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Yo(t,e,i,r,n){ie.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:n},e=e||64,i=i||1,r=r||8,n=n||!1;var o,s,a=t.computeFrenetFrames(e,n),u=(this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,new V),h=new V,l=new at,c=new V,f=[],A=[],p=[],d=[];for(o=0;o<e;o++)b(o);for(b(!1===n?e:0),o=0;o<=e;o++)for(s=0;s<=r;s++)l.x=o/e,l.y=s/r,p.push(l.x,l.y);for(s=1;s<=e;s++)for(o=1;o<=r;o++){var m=(r+1)*(s-1)+(o-1),y=(r+1)*s+(o-1),g=(r+1)*s+o,v=(r+1)*(s-1)+o;d.push(m,y,v),d.push(y,g,v)}function b(n){c=t.getPointAt(n/e,c);var o=a.normals[n],l=a.binormals[n];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,d=Math.sin(p);p=-Math.cos(p);h.x=p*o.x+d*l.x,h.y=p*o.y+d*l.y,h.z=p*o.z+d*l.z,h.normalize(),A.push(h.x,h.y,h.z),u.x=c.x+i*h.x,u.y=c.y+i*h.y,u.z=c.z+i*h.z,f.push(u.x,u.y,u.z)}}this.setIndex(d),this.setAttribute("position",new yt(f,3)),this.setAttribute("normal",new yt(A,3)),this.setAttribute("uv",new yt(p,2))}function Xo(t){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wo(t,e){return(Wo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qo(t){return(qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.assign(Go.prototype,{st:function(){return"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui),this.B.getRenderManager()},Z:function(t){this.Bn=new Dr(this.ot.renderer),this.Xn=new mr(Uo),this.Xn.uniforms.resolution.value.set(1/this.B.getContainer().clientWidth,1/this.B.getContainer().clientHeight),this.Gn=new fr(this.O,this.B.camera),this.zn=new zo(this.O,this.B.camera,!1,!0),this.zn.params.output=zo.OUTPUT.Default,this.zn.params.saoBias=t.bias||-.8,this.zn.params.saoIntensity=t.intensity||12e-5,this.zn.params.saoScale=t.scale||30,this.zn.params.saoKernelRadius=t.radius||30,this.zn.params.saoMinResolution=t.minResolution||0,this.zn.params.saoBlurRadius=t.blurRadius||4.1,this.zn.params.saoBlurStdDev=t.blurStdDev||4,this.zn.params.saoBlurDepthCutoff=t.blurDepthCutoff||.01,this.Bn.addPass(this.Gn),this.Bn.addPass(this.zn),this.Bn.addPass(this.Xn)}}),(Ko.prototype=Object.create(zr.prototype)).constructor=Ko,(Yo.prototype=Object.create(ie.prototype)).constructor=Yo;var Zo=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wo(e,t);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=qo(t);if(i=e?(i=qo(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Xo(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return i.call(this,{type:ii.FLOW_LINE_LAYER});throw new TypeError("Cannot call a class as a function")}return e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}(fengmap.FMMarkerLayer);function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Jo(t=function(t,e){if("object"!==Jo(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Jo(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var ts=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.G=i.url,this.Kt=i.color,void 0===this.Kt&&(this.Kt="#FF0000"),this.Vn=i.backgroundColor,void 0===this.Vn&&(this.Vn="#FF0000"),this.Yn=i.points,this.Qn=i.lineWidth,void 0===this.Qn&&(this.Qn=2),this.Wn=i.lineLength,void 0===this.Wn&&(this.Wn=500),this.Ht=i.speed,void 0===this.Ht&&(this.Ht=1),this.qn=i.opacity,void 0===this.qn&&(this.qn=1),this.Zn=i.smoothparam,void 0===this.Zn&&(this.Zn=35),this.O=new ni,this.Tt=null,this.Kn=null,this.Jn=null,this.$n=null,this.te=i.count,void 0===this.te&&(this.te=5),this.ne=null,this.Rt=!1,this.ft=this.ft.bind(this),this.q=this.q.bind(this),this.ee=this.ee.bind(this),this.vertexShader="\n            varying vec2 vUv;\n            void main(){\n                    vUv = uv;\n                    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n                    gl_Position = projectionMatrix * mvPosition;\n            }\n        ",this.fragmentShader="\n            uniform float time;\n            uniform float repeat;\n            varying vec2 vUv;\n            uniform sampler2D texture;\n            uniform sampler2D background;\n            void main( void ) {\n                vec4 backcolor=texture2D(background,vUv);\n                if(backcolor.a==0.0) discard;\n                vec4 colora = texture2D( texture, vec2(fract( vUv.x + time )*repeat, vUv.y));\n                colora.r = colora.r * colora.a * 10.0;\n                colora.g = colora.g * colora.a * 10.0;\n                colora.b = colora.b * colora.a * 10.0;\n                gl_FragColor = vec4(vec3(mix(colora,backcolor,1.0-colora.a)),1.0);   \n            }\n        "}var e,i;return e=t,(i=[{key:"parent",get:function(){return this.Tt}},{key:"getUrl",value:function(){return this.G}},{key:"setUrl",value:function(t){var e=this;this.G=t,this.ie(function(t){(t=new oo(t)).wrapS=t.wrapT=m,t.repeat.set(e.te,1),t.needsUpdate=!0,e.$n.uniforms.texture.value=t})}},{key:"getColor",value:function(){return this.Kt}},{key:"setColor",value:function(t){var e=this;this.Kt=t,this.G=void 0,this.ie(function(t){(t=new oo(t)).wrapS=t.wrapT=m,t.repeat.set(e.te,1),t.needsUpdate=!0,e.$n.uniforms.texture.value=t})}},{key:"getBackgroundColor",value:function(){return this.Vn}},{key:"setBackgroundColor",value:function(t){this.Vn=t,this.$n.uniforms.background.value=new oo(this.re())}},{key:"getLineWidth",value:function(){return this.Qn}},{key:"setLineWidth",value:function(t){this.Qn=t,this.Tt.scene.remove(this.Kn),this.oe()}},{key:"getSpeed",value:function(){return this.Ht}},{key:"setSpeed",value:function(t){this.Ht=t,this.Kn.userData.speed=t}},{key:"addTo",value:function(t){fengmap.FMMarkerFun.LAYER_CLASS.get(ii.FLOW_LINE_LAYER)||fengmap.FMMarkerFun.LAYER_CLASS.set(ii.FLOW_LINE_LAYER,Zo);var e=t.parent.buildingID;this.ne=e+"_"+t.level,this.Rt||this.Z(t)}},{key:"remove",value:function(){this.jt()}},{key:"dispose",value:function(){this.remove()}}])&&$o(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function es(t){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function is(t,e){return(is=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rs(t){return(rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.assign(ts.prototype,{q:function(){this.$n&&(this.$n.uniforms.time.value-=this.Ht/1e3,this.B.enableUpdateNode())},Z:function(t){this.oe(t),this.Rt=!0},oe:function(t){var e=this;this.ie(function(i){i=new oo(i);for(var r=(e.Jn=i,e.ae(e.Yn,e.Qn/4)),n=(i=(i.wrapS=i.wrapT=m,i.repeat.set(e.te,1),i.needsUpdate=!0,new ve({uniforms:{time:{value:0},repeat:{value:e.te},texture:{value:i},background:{value:new oo(e.re())}},transparent:!0,depthWrite:!0,depthTest:!0,side:s,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),e.$n=i,new On),o=0;o<r.length-1;o++){var a=new Tn(r[o],r[o+1]);n.curves.push(a)}var u=new Ko(n,e.Zn*(r.length-1),e.Qn/2,3);e.Kn=new Yi(u,i),e.Kn.isNoPickup=!0,t?(u=t.getOrCreateLayer(ii.FLOW_LINE_LAYER),e.Tt=u,e.Tt.scene.add(e.Kn),e.B.on("update",e.q)):e.Tt.scene.add(e.Kn)})},re:function(){var t,e=document.createElement("canvas");return(t=((t=(e.width=1024,e.height=600,e.getContext("2d"))).rect(0,200,1024,200),t.fillStyle=new U(this.Vn).getStyle(),t.fill(),document.createElement("canvas"))).width=1024,t.height=1024,t.getContext("2d").drawImage(e,0,0,1024,1024),t},ie:function(t){var e,i,r=this,n=document.createElement("canvas"),o=(n.width=1024,n.height=1024,n.getContext("2d")),s=document.createElement("canvas"),a=(s.width=1024,s.height=600,s.getContext("2d"));void 0!==r.G?((e=new Image).crossOrigin="Anonymous",e.onload=function(){a.drawImage(e,0,200,1024,200),o.drawImage(s,0,0,1024,1024),t&&t(n)},e.src=r.G):(r=new U(r.Kt),(i=a.createLinearGradient(0,0,1024,0)).addColorStop(0,"rgba("+255*r.r+", "+255*r.g+","+255*r.b+", 0.2)"),i.addColorStop(.8,"rgba("+255*r.r+", "+255*r.g+","+255*r.b+", 0.3)"),i.addColorStop(1,"rgba("+255*r.r+", "+255*r.g+","+255*r.b+", 1)"),a.fillStyle=i,a.fillRect(0,200,1024,200),o.drawImage(s,0,0,1024,1024),t&&t(n))},ee:function(){this.O.position.y=this.Tt.height},ft:function(){var t=this.B.getContainer();t.clientWidth,t.clientHeight},ae:function(t,e){for(var i=[],r=t.length/3,n=0;n<r;n++){var o=new V(t[3*n]-this.B.x,t[3*n+2]+e,-t[3*n+1]+this.B.y);i.push(o)}return i},jt:function(){this.B.off("update",this.q),this.Tt.scene.remove(this.Kn),this.Kn.geometry.dispose(),this.Kn.material.dispose(),this.Kn=null,this.Rt=!1}});var ns=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&is(e,t);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=rs(t);if(i=e?(i=rs(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===es(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return i.call(this,{type:ii.FIRE_MARKER});throw new TypeError("Cannot call a class as a function")}return e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}(fengmap.FMMarkerLayer),os={FOV:35,CAMERA_NEAR:1,CAMERA_FAR:1e5,ZOOM_UPPER_BOUND:30,TILT_UPPER_BOUND:90,THOUSAND:1e3,DEG2RAD:.0174532,RAD2DEG:57.2957795,DRAW_TIME:500,EPS:.001},ss=(Object.freeze(os),os);function as(t){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===as(t=function(t,e){if("object"!==as(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==as(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var hs=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,i;return e=t,i=[{key:"round",value:function(t){return 0<t.toFixed(2)?Math.ceil(t.toFixed(2)):Math.floor(t.toFixed(2))}},{key:"generateUUID",value:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);var i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;i=t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&r]+t[r>>8&255]+"-"+t[r>>16&15|64]+t[r>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&o]+t[o>>8&255]+t[o>>16&255]+t[o>>24&255];return t.length=0,i.toUpperCase()}},{key:"findNearNthPowerOfTwo",value:function(t){return t-=1,(t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)<0?1:1+t}},{key:"rgbToArray",value:function(t){var e=new U;return e.setStyle(t),[e.r,e.g,e.b]}},{key:"toRgba",value:function(t){var e;return void 0===t?t:"number"!=typeof t?3<=(e=t.split(",")).length?"rgba("+parseInt(e[0])+","+parseInt(e[1])+","+parseInt(e[2])+",1)":t:"rgba("+parseInt(255*new U(t).r)+","+parseInt(255*new U(t).g)+","+parseInt(255*new U(t).b)+",1)"}},{key:"toColor",value:function(t){var e;return"number"==typeof t?t:3<=(e=t.split(",")).length?parseInt(e[0])<<16|parseInt(e[1])<<8|parseInt(e[2]):0}}],null&&us(e.prototype,null),i&&us(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ls(t=function(t,e){if("object"!==ls(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ls(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}os=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.se=(e=e||{}).src,this.he=e.dest,this.Tt=null,this.le=[],this.kn=0,this.ue=0,this.ce=0,this.fe=ss.THOUSAND,this.de=!1,this.ve=!1,this.me=!0,this.Qt=null,this.pe=null,this.ge=hs.generateUUID()}var e,i;return e=t,(i=[{key:"play",value:function(){return this._e()}},{key:"pause",value:function(){return this.ve=!0,this}},{key:"resume",value:function(){return this.ve=!1,this.kn+=this.ce,this.ce=0,this}},{key:"stop",value:function(){return this.me=!0,this}},{key:"finish",value:function(){return this.me=!0,this.pe&&this.pe(),this.le=[],this}}])&&cs(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var fs=(Object.assign(os.prototype,{jt:function(){for(var t in this)this[""+t]=null,delete this[""+t]},ye:function(t){return this.se=t,this},xe:function(t){return this.he=t,this},be:function(t){return this.fe=t*ss.THOUSAND,this},we:function(t){return this.ue=t*ss.THOUSAND,this},Ae:function(t){return this.Qt=t,this},Se:function(t){return this.pe=t,this},Te:function(t){return this.de=t,this},_e:function(){return this.me=!1,this.Tt&&(this.kn=this.Tt.Me),this},Ee:function(){var t=new this.constructor({src:this.se,dest:this.he});return t.kn=this.kn,t.ue=this.ue,t.fe=this.fe,t.de=this.de,t.Qt=this.Qt,t.pe=this.pe,t},Pe:function(){var t=this.he.concat(),e=this.se.concat();return this.se=t,this.he=e,this}}),os);function As(t){return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ps(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===As(t=function(t,e){if("object"!==As(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==As(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}os=function(t,e,i){return e&&ps(t.prototype,e),i&&ps(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Et=new Map,this.Le=[],this.Me=(new Date).getTime(),this.Fe=new Map,this.Ne=null,this.De=this.De.bind(this),this.Ce=0,this.Re()});var ds=(Object.assign(os.prototype,{Ct:function(t){if(Array.isArray(t)){this.Et.set(t[0].ge,t[0]),t[0].Tt=this;for(var e=1;e<t.length;e++)t[e].kn=t[e-1].kn+t[e-1].fe,t[e].ue=t[e-1].ue+t[e-1].fe,this.Et.set(t[e].ge,t[e]),t[e].Tt=this}else this.Et.has(t.ge)||(this.Et.set(t.ge,t),t.Tt=this,t.kn=this.Me)},Ot:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.Et.delete(t[e].ge);else this.Et.delete(t.ge)},Ie:function(t){this.Le.push(t)},Oe:function(t){-1<(t=this.Le.indexOf(t))&&this.Le.splice(t,1)},Ue:function(t){this.Fe.set(t.ge=hs.generateUUID(),t)},je:function(t){this.Fe.delete(t.ge)},Qt:function(t,e,i){for(var r=[],n=[],o=0;o<t.se.length;o++)void 0===t.le[o]&&(t.le[o]=0),1<=e?(r.push(t.he[o]),n.push(t.he[o]-t.se[o]-t.le[o])):(r.push((t.he[o]-t.se[o])*e+t.se[o]),n.push((t.he[o]-t.se[o])*i),t.le[o]+=(t.he[o]-t.se[o])*i);t.Qt({destination:r,delta:n}),n.length=r.length=0},Re:function(){var t=this,e=(this.Ce=requestAnimationFrame(this.Re.bind(this)),(new Date).getTime()),i=e-this.Me;this.Fe.forEach(function(t){return t(i)});for(var r=0;r<this.Le.length;r++)this.Le[r].update(i/1e3);this.Et.forEach(function(r){var n,o;r.me||(r.ve?r.ce+=i:(n=(e-r.kn)/r.fe,o=i/r.fe,t.Qt(r,n,o),n=e-r.kn-r.ue,r.fe<=n&&(r.le=[],r.de?(r.kn=e,r.pe&&r.pe()):(o=r.me,r.me=!0,!o&&r.pe&&r.pe()))))}),this.Me=e,this.Ne&&0===this.Et.size&&this.De()},jt:function(t){this.Ne=t},De:function(){this.Ce&&(window.cancelAnimationFrame(this.Ce),this.Ce=0),this.Et.forEach(function(t){t.jt()}),this.Et.clear(),this.Le=[],this.Fe.clear(),this.Ne&&this.Ne({name:"Animator"})}}),os),ms={defines:{ITERATIONS:"20",OCTIVES:"3"},uniforms:{fireTex:{type:"t",value:null},color:{type:"c",value:null},time:{type:"f",value:0},seed:{type:"f",value:0},invModelMatrix:{type:"m4",value:null},scale:{type:"v3",value:null},noiseScale:{type:"v4",value:new st(1,2,1,.3)},magnitude:{type:"f",value:1.3},lacunarity:{type:"f",value:2},gain:{type:"f",value:.5}},vertexShader:["varying vec3 vWorldPos;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","vWorldPos = (modelMatrix * vec4(position, 1.0)).xyz;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform float time;","uniform float seed;","uniform mat4 invModelMatrix;","uniform vec3 scale;","uniform vec4 noiseScale;","uniform float magnitude;","uniform float lacunarity;","uniform float gain;","uniform sampler2D fireTex;","varying vec3 vWorldPos;","vec3 mod289(vec3 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 mod289(vec4 x) {","return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec4 permute(vec4 x) {","return mod289(((x * 34.0) + 1.0) * x);","}","vec4 taylorInvSqrt(vec4 r) {","return 1.79284291400159 - 0.85373472095314 * r;","}","float snoise(vec3 v) {","const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);","const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);","vec3 i  = floor(v + dot(v, C.yyy));","vec3 x0 = v - i + dot(i, C.xxx);","vec3 g = step(x0.yzx, x0.xyz);","vec3 l = 1.0 - g;","vec3 i1 = min(g.xyz, l.zxy);","vec3 i2 = max(g.xyz, l.zxy);","vec3 x1 = x0 - i1 + C.xxx;","vec3 x2 = x0 - i2 + C.yyy;","vec3 x3 = x0 - D.yyy;","i = mod289(i); ","vec4 p = permute(permute(permute( ","i.z + vec4(0.0, i1.z, i2.z, 1.0))","+ i.y + vec4(0.0, i1.y, i2.y, 1.0)) ","+ i.x + vec4(0.0, i1.x, i2.x, 1.0));","float n_ = 0.142857142857;","vec3  ns = n_ * D.wyz - D.xzx;","vec4 j = p - 49.0 * floor(p * ns.z * ns.z);","vec4 x_ = floor(j * ns.z);","vec4 y_ = floor(j - 7.0 * x_);","vec4 x = x_ * ns.x + ns.yyyy;","vec4 y = y_ * ns.x + ns.yyyy;","vec4 h = 1.0 - abs(x) - abs(y);","vec4 b0 = vec4(x.xy, y.xy);","vec4 b1 = vec4(x.zw, y.zw);","vec4 s0 = floor(b0) * 2.0 + 1.0;","vec4 s1 = floor(b1) * 2.0 + 1.0;","vec4 sh = -step(h, vec4(0.0));","vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;","vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;","vec3 p0 = vec3(a0.xy, h.x);","vec3 p1 = vec3(a0.zw, h.y);","vec3 p2 = vec3(a1.xy, h.z);","vec3 p3 = vec3(a1.zw, h.w);","vec4 norm = taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));","p0 *= norm.x;","p1 *= norm.y;","p2 *= norm.z;","p3 *= norm.w;","vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);","m = m * m;","return 42.0 * dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));","}","float turbulence(vec3 p) {","float sum = 0.0;","float freq = 1.0;","float amp = 1.0;","for(int i = 0; i < OCTIVES; i++) {","sum += abs(snoise(p * freq)) * amp;","freq *= lacunarity;","amp *= gain;","}","return sum;","}","vec4 samplerFire (vec3 p, vec4 scale) {","vec2 st = vec2(sqrt(dot(p.xz, p.xz)), p.y);","if(st.x <= 0.0 || st.x >= 1.0 || st.y <= 0.0 || st.y >= 1.0) return vec4(0.0);","p.y -= (seed + time) * scale.w;","p *= scale.xyz;","st.y += sqrt(st.y) * magnitude * turbulence(p);","if(st.y <= 0.0 || st.y >= 1.0) return vec4(0.0);","return texture2D(fireTex, st);","}","vec3 localize(vec3 p) {","return (invModelMatrix * vec4(p, 1.0)).xyz;","}","void main() {","vec3 rayPos = vWorldPos;","vec3 rayDir = normalize(rayPos - cameraPosition);","float rayLen = 0.0288 * length(scale.xyz);","vec4 col = vec4(0.0);","for(int i = 0; i < ITERATIONS; i++) {","rayPos += rayDir * rayLen;","vec3 lp = localize(rayPos);","lp.y += 0.5;","lp.xz *= 2.0;","col += samplerFire(lp, noiseScale);","}","col.a = col.r;","gl_FragColor = col;","}"].join("\n")};function ys(t,e){var i=new ve({defines:ms.defines,uniforms:me.clone(ms.uniforms),vertexShader:ms.vertexShader,fragmentShader:ms.fragmentShader,transparent:!0,depthWrite:!1,depthTest:!0});t.magFilter=t.minFilter=v,t.wrapS=t.wrapT=y,i.uniforms.fireTex.value=t,i.uniforms.color.value=new U(e),i.uniforms.invModelMatrix.value=new Tt,i.uniforms.scale.value=new V(1,1,1),i.uniforms.seed.value=19.19*Math.random(),Yi.call(this,new Jr(1,1,1),i)}((ys.prototype=Object.create(Yi.prototype)).constructor=ys).prototype.update=function(t){var e=this.material.uniforms.invModelMatrix.value;this.updateMatrixWorld(),e.getInverse(this.matrixWorld),void 0!==t&&(this.material.uniforms.time.value=t),this.material.uniforms.invModelMatrix.value=e,this.material.uniforms.scale.value=this.scale};var gs=["attribute vec3  customColor;","attribute float customOpacity;","attribute float customSize;","attribute float customAngle;","attribute float customVisible;","varying vec4  vColor;","varying float vAngle;","void main()","{","if ( customVisible > 0.5 )","vColor = vec4( customColor, customOpacity );","else","vColor = vec4(0.0, 0.0, 0.0, 0.0);","vAngle = customAngle;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_PointSize = customSize * ( 300.0 / length( mvPosition.xyz ) );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),vs=["uniform sampler2D texture;","varying vec4 vColor;","varying float vAngle;","void main()","{","gl_FragColor = vColor;","float c = cos(vAngle);","float s = sin(vAngle);","vec2 rotatedUV = vec2(c * (gl_PointCoord.x - 0.5) + s * (gl_PointCoord.y - 0.5) + 0.5,","c * (gl_PointCoord.y - 0.5) - s * (gl_PointCoord.x - 0.5) + 0.5);","vec4 rotatedTexture = texture2D( texture,  rotatedUV );","gl_FragColor = gl_FragColor * rotatedTexture;","}"].join("\n");function bs(t,e){this.times=t||[],this.values=e||[]}function ws(){this.position=new V,this.velocity=new V,this.acceleration=new V,this.angle=0,this.angleVelocity=0,this.angleAcceleration=0,this.size=16,this.color=new U,this.opacity=1,this.age=0,this.alive=0}bs.prototype.lerp=function(t){for(var e,i=0,r=this.times.length;i<r&&t>this.times[i];)i++;return 0==i?this.values[0]:i==r?this.values[r-1]:(e=(t-this.times[i-1])/(this.times[i]-this.times[i-1]),this.values[0]instanceof V?this.values[i-1].clone().lerp(this.values[i],e):this.values[i-1]+e*(this.values[i]-this.values[i-1]))},ws.prototype.update=function(t){this.position.add(this.velocity.clone().multiplyScalar(t)),this.velocity.add(this.acceleration.clone().multiplyScalar(t)),this.angle+=.01745329251*this.angleVelocity*t,this.angleVelocity+=.01745329251*this.angleAcceleration*t,this.age+=t,0<this.sizeTween.times.length&&(this.size=this.sizeTween.lerp(this.age)),0<this.colorTween.times.length&&(t=this.colorTween.lerp(this.age),this.color=(new U).setHSL(t.x,t.y,t.z)),0<this.opacityTween.times.length&&(this.opacity=this.opacityTween.lerp(this.age))};var xs=Object.freeze({CUBE:1,SPHERE:2});function Ms(t){this.scene=t,this.positionStyle=xs.CUBE,this.positionBase=new V,this.positionSpread=new V,this.positionRadius=0,this.velocityStyle=xs.CUBE,this.velocityBase=new V,this.velocitySpread=new V,this.speedBase=0,this.speedSpread=0,this.accelerationBase=new V,this.accelerationSpread=new V,this.angleBase=0,this.angleSpread=0,this.angleVelocityBase=0,this.angleVelocitySpread=0,this.angleAccelerationBase=0,this.angleAccelerationSpread=0,this.sizeBase=0,this.sizeSpread=0,this.sizeTween=new bs,this.colorBase=new V(0,1,.5),this.colorSpread=new V(0,0,0),this.colorTween=new bs,this.opacityBase=1,this.opacitySpread=0,this.opacityTween=new bs,this.blendStyle=h,this.particleArray=[],this.particlesPerSecond=100,this.particleDeathAge=1,this.emitterAge=0,this.emitterAlive=!0,this.emitterDeathAge=60,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.emitterDeathAge),this.particleGeometry=new ie,this.particleTexture=null,this.particleMaterial=new ve({uniforms:{texture:{type:"t",value:this.particleTexture}},vertexShader:gs,fragmentShader:vs,blending:h,depthTest:!0,depthWrite:!1,side:a,transparent:!0,opacity:1}),this.particleMesh=new Yi}function _s(t){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ss(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===_s(t=function(t,e){if("object"!==_s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==_s(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Ms.prototype.setValues=function(t){if(void 0!==t){for(var e in this.sizeTween=new bs,this.colorTween=new bs,this.opacityTween=new bs,t)this[e]=t[e];ws.prototype.sizeTween=this.sizeTween,ws.prototype.colorTween=this.colorTween,ws.prototype.opacityTween=this.opacityTween,this.particleArray=[],this.emitterAge=0,this.emitterAlive=!0,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.emitterDeathAge),this.particleGeometry=new zr,this.particleMaterial=new ve({uniforms:{texture:{type:"t",value:this.particleTexture}},vertexShader:gs,fragmentShader:vs,blending:h,depthTest:!0,depthWrite:!1,side:a,transparent:!0,opacity:1}),this.particleMesh=new Ze}},Ms.prototype.randomValue=function(t,e){return t+e*(Math.random()-.5)},Ms.prototype.randomVector3=function(t,e){var i=new V(Math.random()-.5,Math.random()-.5,Math.random()-.5);return(new V).addVectors(t,(new V).multiplyVectors(e,i))},Ms.prototype.createParticle=function(){var t,e,i=new ws,r=new V,n=(this.positionStyle==xs.CUBE&&(i.position=this.randomVector3(r,this.positionSpread)),this.positionStyle==xs.SPHERE&&(e=2*Math.random()-1,t=6.2832*Math.random(),n=new V((n=Math.sqrt(1-e*e))*Math.cos(t),n*Math.sin(t),e),i.position=(new V).addVectors(r,n.multiplyScalar(this.positionRadius))),this.velocityStyle==xs.CUBE&&(i.velocity=this.randomVector3(this.velocityBase,this.velocitySpread)),this.velocityStyle==xs.SPHERE&&(t=(new V).subVectors(i.position,r),e=this.randomValue(this.speedBase,this.speedSpread),i.velocity=t.normalize().multiplyScalar(e)),i.acceleration=this.randomVector3(this.accelerationBase,this.accelerationSpread),i.angle=this.randomValue(this.angleBase,this.angleSpread),i.angleVelocity=this.randomValue(this.angleVelocityBase,this.angleVelocitySpread),i.angleAcceleration=this.randomValue(this.angleAccelerationBase,this.angleAccelerationSpread),i.size=this.randomValue(this.sizeBase,this.sizeSpread),this.randomVector3(this.colorBase,this.colorSpread));return i.color=(new U).setHSL(n.x,n.y,n.z),i.opacity=this.randomValue(this.opacityBase,this.opacitySpread),i.age=0,i.alive=0,i},Ms.prototype.initialize=function(){for(var t=[],e=[],i=[],r=[],n=[],o=0;o<this.particleCount;o++)this.particleArray[o]=this.createParticle(),this.particleGeometry.vertices[o]=this.particleArray[o].position,t.push(this.particleArray[o].alive),e.push(this.particleArray[o].color),i.push(this.particleArray[o].opacity),r.push(this.particleArray[o].size),n.push(this.particleArray[o].angle);for(o=0;o<this.particleCount-2;o+=3){var s=new Ti(o,o+1,o+2);this.particleGeometry.faces.push(s)}this.bufferGeometry=new ie,this.bufferGeometry.fromGeometry(this.particleGeometry),this.bufferGeometry.setAttribute("customVisible",new ht(new Float32Array(t),1)),this.bufferGeometry.setAttribute("customColor",new ht(new Float32Array(3*e.length),3).copyColorsArray(e)),this.bufferGeometry.setAttribute("customOpacity",new ht(new Float32Array(i),1)),this.bufferGeometry.setAttribute("customSize",new ht(new Float32Array(r),1)),this.bufferGeometry.setAttribute("customAngle",new ht(new Float32Array(n),1)),this.particleMaterial.blending=this.blendStyle,this.blendStyle!=h&&(this.particleMaterial.depthTest=!0),this.particleMesh=new Ze(this.bufferGeometry,this.particleMaterial),this.particleMesh.dynamic=!0,this.particleMesh.sortParticles=!0,this.particleMesh.position.set(this.positionBase.x,this.positionBase.y,this.positionBase.z),this.scene.add(this.particleMesh),this.isShow=!0},Ms.prototype.update=function(t){for(var e=[],i=[],r=[],n=[],o=[],s=[],a=0;a<this.particleCount;a++)this.particleArray[a].alive&&(this.particleArray[a].update(t),this.particleGeometry.vertices[a]=this.particleArray[a].position,this.particleArray[a].age>this.particleDeathAge&&(this.particleArray[a].alive=0,e.push(a)),i.push(this.particleArray[a].alive),r.push(this.particleArray[a].color),n.push(this.particleArray[a].opacity),o.push(this.particleArray[a].size),s.push(this.particleArray[a].angle));if(this.bufferGeometry.fromGeometry(this.particleGeometry),this.bufferGeometry.getAttribute("customVisible").copyArray(i),this.bufferGeometry.getAttribute("customColor").copyColorsArray(r),this.bufferGeometry.getAttribute("customOpacity").copyArray(n),this.bufferGeometry.getAttribute("customSize").copyArray(o),this.bufferGeometry.getAttribute("customAngle").copyArray(s),this.bufferGeometry.getAttribute("customVisible").needsUpdate=!0,this.bufferGeometry.getAttribute("customColor").needsUpdate=!0,this.bufferGeometry.getAttribute("customOpacity").needsUpdate=!0,this.bufferGeometry.getAttribute("customSize").needsUpdate=!0,this.bufferGeometry.getAttribute("customAngle").needsUpdate=!0,this.emitterAlive){if(this.emitterAge<this.particleDeathAge){var u=Math.round(this.particlesPerSecond*(this.emitterAge+0)),h=Math.round(this.particlesPerSecond*(this.emitterAge+t));for(h>this.particleCount&&(h=this.particleCount),a=u;a<h;a++)this.particleArray[a].alive=1}for(var l=0;l<e.length;l++)a=e[l],this.particleArray[a]=this.createParticle(),this.particleArray[a].alive=1,this.particleGeometry.vertices[a]=this.particleArray[a].position;this.emitterAge+=t,this.emitterAge>this.emitterDeathAge&&(this.emitterAlive=!1)}},Ms.prototype.destroy=function(){this.scene.remove(this.particleMesh),this.isShow=!1},Ms.prototype.show=function(){this.scene.add(this.particleMesh),this.isShow=!0},Ms.prototype.hide=function(){this.scene.remove(this.particleMesh),this.isShow=!1};var Bs=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ke=e,this.He=this.ke.smokeDensity,void 0===this.He&&(this.He=30),this.ze=new Br,this.Be=new V(this.ke.x,this.ke.y,this.ke.z),this.Xe=null,this.Ge=null,this.O=null,this.Ve=null,this.Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5wEMBTcTolE0kwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAJKUlEQVRYw41XTW4bRxOtqu6eGXIoSlTiID824I29kK6QhS+Qba5D3UcXyMIL5QBeBRYQBDCMGLAQK/ohRc50d/19C1FG4jjB94DBNAYYvNfVVa+6EP4d6O5wcnKCAEA//PADdl2Hv//+O04mE2zbFgEAHj9+DKrqzOzPnj3zV69e+d3dnb948cIAwAEAENH/leRzH90dT05O8MWLF3R5eUkAEJ4/f07v378Pk8mESim0WCw+/tv3vTOzlVKs6zodhsHm87leXl7ag5B/E/GpAFwul3h8fIw3Nzf0/PnzAADxr4+qBncPs9mMEBHbtnVVtRCCppQ0xijjOEpKSfq+l6urK33z5o29fv3aT05O/iEkfkoOAAQA9M0330QRSW3bNrXWJqXUiEgTQkgxxuDuoWkaVFUXETUzZWZumqYCQK211pxzBQA+OjqSR48eGQCYu//tSOKn5IeHh+HDhw/pq6++alJKbdM0HQBMAKCLMXbu3tZaU9M0wczQ3b2UoiEERsQiIpmIMgCMMcZcay1d19XvvvuOz87O4Ozs7G8i8OHMT09P6eLiIoYQ0t7eXnt4eNi1bTtNKfUhhJ6IenfvRaRT1ZaIQtM0FGM0EVFELDHGHELYuvu2lLLdrYcQQu77vjRNw8+ePRMAsAcBEQDwxx9/pKOjozCbzeLBwUEzmUy6GOMMAPaIaF5rnccY5wAwI6JpjLETkWhmhIjWtq2klLKZDQCwMbN1jLEdxzGmlGgymQAA+DAMfnp66rtNGyJ6XC6XeHFxQfP5PBweHqa2bbsYY9913V6McaGqCwBYiMiBu+8R0Ww6nbZN0yR3pxCCpZQ4hFBEZKOqdyIyyTk3pZTAzDCOo08mE2dme/z4sf3yyy9+cnLiAODx/Pwcv//+e+r7Ps7n86Zt287MZu6+DwCLlNKXZvYlMy/MbH86nfYi0qWUEgCQuxszMwBkANgCwMrMWmYO7g4iYoho4ziKmclqtdInT57YYrEwAMB4dHSEXdeF+XyeiKh192nbtjNVPXD3L0IIX7r7I1U9VNV9EelDCB0AREQkZjYiEjPLRLRl5lZEoruDu7uIKBHxMAy11sohBPnjjz8UAGy5XHoEAAr3iETUhhAmiDiLMc5DCAtm/kJEvjCzQwCY7wS0RBTdnXYJJQBQ3L0VkTiOI4qI1VqFmTMzj2Y25pwzM5emacJ8Ppf3799DfPr0KQFACCFEd29qrZMYY+/ue4g4Tyntxxj3iWi/1rpHRNMQQrsTjH4PUdXGzIKq4s4T6niPjYhs3H3j7ltVjXd3dyGEQMfHxxj7vkcAIBFJZta0bdsy80RV+1rrLMa4F0LYc/eZu/dmNnH3VEqJTdMgALiIiKoGEUEz81IK53tscs49AEyYuXX3RkQSEdHbt28JADB2XYcAQLXWgIjR3RsAaImoM7MJM3fM3JlZa2atqjabzSaFEAjv4eM4krsjABgz8zAMXSmlE5EJInYi0jJzU0qJIYSQc6bZbIa//fYbxtvbW+z7nlJKVGsN4zhGVU0hhISISUQaZk6ImBAxAkBIKYXpdEoAgLtOiMxsZhaZObl7AoAGAFKtNQ3DkMwsqmpgZtpsNnR5eYkAAHG9XmPf98DMGEIgIqJaK9VaSVUJEcndP75TShRjRFXFWiuaGZRSsJRCqkq70iQzIzMjEaFSCjEzmRmpKm63W6i1YowR4nw+dwAAM3NEdEQ0MzN3dzPzh7W7u6o6Ebmq+mazgRCCuzuM4+hm5gDgu+bkqmru7iEETylZztmGYfBhGDylBHd3d75YLCAeHBx4ztmJyJhZ3V2JSHalxSIiiChmJgAgzBxLKSgiAAC4E6kAoO4uZialFAEAiTFy0zRSaxVE1JyzmpmVUrxt2/tekHP2cRyt73s1M2FmRsRqZtnMMgBkIspEVEQk1VqDmcFut+juTkRKRFxrrSJSHv4DgOzuuZRSa62ccxZV1RCC3d7e+rt37zxut1sHAB3HUUMI1cyKiIwiMqjq1sy2ZjZt27aJMZKqgt4jqiruupqYWc05DyKyRcRtjHELAFsRGURkLKUURKzjOKqZ6Z9//ulPnjzx2Pe9XVxc2HQ65RBCdfdRVQdm3tRa10Q0JaJGVcMuV0xVW2aOiIi73BAAKGa2VdU1AKzcfWVm61rrZr1eD8w8MnMVEWZmOzg4sNPTU4g3Nzdea30494qIIwBsRGTFzB0iNuG+PMDMNOdcc86d+72N75qREFFGxC0irojoWlWv3f3WzFallE3OeSyl1BCC5Jz1+vraAMDjYrGwpml0vV5zCKHslG5KKY27p53fwy7JSq11lnPuaq3p4T4gIgwAOaW0MbM1AFwDwJ8ppWtmXonIhpnHnHMxM6616mw2u2/Hr1+/9m+//Vavr69lPp9XZh5rrVFVw44AhmEwM6vuPuwsuttZNzGzMTMTUQ4hbAFgTUS3KaVrRLxW1dXOkkcRqU3TyGaz0VevXhkAQDg7O4M3b97Ar7/+ikQEIgLu95cWRHQRMXeXnb9XZs6llNHdN6p6V0pZ1VpXqnpTa72utV6p6jUi3gDALTOvh2HYllLGYRhKCEG+/vprPT8/v48AIvpyufTDw0MFAByGocQY0cyg6zoDAEkplV0236nqhIgaZk4AgETkMUZW1Wpm465qNma2EZFNjHEAgJGICgDIOI76008/+ceh5TNX8jgMQ1LVdm9vrwOAbrvdTt19sl6vO2buVDU9+DoRmYioiLCq5lJKDiGMKaUhxpiZORNRWa1WDADy888/P0xMfxPwcRoCAHr79m18+vRp7LourdfrxszacRzbYRgaZk4iklSVttstIqLbPXgcR1bVqqpFREpKqYYQGADkc+T/mIz+KuIhGruGFVU13d7exs1mEwEgMDON44jM7KpqqqrDMIiqyi7TZX9/X8ZxlEePHtnnyD+djD4OC8vl0o6Pj/3ly5fetq0eHh7Ku3fveLVahaZpaBxHurq6IgCA7XYLKSUbx9G22611Xafr9Vr7vlcAsPPz878S+/81nP41GsfHx/jy5Uu6ubnBDx8+0N7eHpVSsNaKl5eXAABwdXXlROQXFxcGAA+E/0n82Qh8Jhq+E+nL5RIAAD98+ICbzQYBAM7Pz/+m+ROy/yR+wP8AibG5JpmwKwsAAAAASUVORK5CYII="}var e,i;return e=t,(i=[{key:"init",value:function(t){var e=this;this.O=t,(new ke).load(this.Ye,function(t){e.Ge=t,e.createSmoke()})}},{key:"createSmoke",value:function(){this.Xe&&this.Xe.destroy(),this.Ve=(new Date).getTime(),this.Xe=new Ms(this.O);var t=this.He;1===t&&(t=2),this.Xe.setValues({positionStyle:xs.SPHERE,positionBase:this.Be,positionRadius:3,velocityStyle:xs.CUBE,velocityBase:new V(0,20,0),velocitySpread:new V(8,15,8),accelerationBase:new V(0,-10,0),particleTexture:this.Ge,angleBase:0,angleSpread:720,angleVelocityBase:0,angleVelocitySpread:720,sizeTween:new bs([0,.8,1.5],[10,80,50]),opacityTween:new bs([0,.4,1.5],[0,.9,0]),colorTween:new bs([.3,1.2],[new V(0,0,.6),new V(0,0,.3)]),worldEffectTween:new bs([.5,1.5],[new V(0,0,0),new V(-1,0,-.2)]),particlesPerSecond:t,particleDeathAge:t,emitterDeathAge:60}),this.Xe.initialize(),this.Xe.particleMesh.renderOrder=1,this.Xe.particleMesh.isNoPickup=!0}},{key:"update",value:function(){var t=this.ze.getDelta();((new Date).getTime()-this.Ve)/1e3<60?this.Xe&&this.Xe.update(.5*t):this.O&&this.Be&&this.createSmoke()}}])&&Ss(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Es(t){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Es(t=function(t,e){if("object"!==Es(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Es(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}os=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Qe={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.We={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var e,i;return e=t,(i=[{key:"min",get:function(){return this.Qe}},{key:"max",get:function(){return this.We}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}},{key:"copy",value:function(t){return this.We.x=t.max.x,this.We.y=t.max.y,this.Qe.x=t.min.x,this.Qe.y=t.min.y,this}},{key:"clone",value:function(){return(new t).copy(this)}},{key:"reset",value:function(){this.Qe={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.We={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}},{key:"toObject",value:function(){return{min:this.min,max:this.max,center:this.center,size:this.size}}},{key:"expand",value:function(t){this.qe(t)}},{key:"expandByCoords",value:function(t){this.Ze(t)}},{key:"valid",value:function(){return this.Ke()}},{key:"isCross",value:function(t){var e=!0;return t.max.x<this.min.x&&(e=!1),t.min.x>this.max.x&&(e=!1),t.max.y<this.min.y&&(e=!1),!(t.min.y>this.max.y)&&e}}])&&Cs(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Ts=(Object.assign(os.prototype,{Ke:function(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},qe:function(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},Ze:function(t){var e=this;t&&0!=t.length&&t.forEach(function(t){t.x<e.min.x&&(e.min.x=t.x),t.y<e.min.y&&(e.min.y=t.y),t.x>e.max.x&&(e.max.x=t.x),t.y>e.max.y&&(e.max.y=t.y)})}}),os);function Fs(t){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Fs(t=function(t,e){if("object"!==Fs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Fs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Os(t,e,i,r,n,o,s,a,u,h,l,c){Le.call(this,null,o,s,a,u,h,r,n,l,c),this.image={data:t||null,width:e||1,height:i||1},this.magFilter=void 0!==u?u:g,this.minFilter=void 0!==h?h:g,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Ds(t){Re.call(this,t)}function Rs(t){Ds.call(this,t),this.type=b}function Is(t,e,i,r,n,o,s,a,u,h){Le.call(this,t=void 0!==t?t:[],e=void 0!==e?e:301,i,r,n,o,s=void 0!==s?s:w,a,u,h),this.flipY=!1}function Us(t){Re.call(this,t)}function Ls(t){Re.call(this,t),this.hdrLoader=new Rs,this.type=b}function ks(t,e,i,r){Xt.call(this),this.type="CubeCamera";var n=new un(90,1,t,e),o=(n.up.set(0,-1,0),n.lookAt(new V(1,0,0)),this.add(n),new un(90,1,t,e)),s=(o.up.set(0,-1,0),o.lookAt(new V(-1,0,0)),this.add(o),new un(90,1,t,e)),a=(s.up.set(0,0,1),s.lookAt(new V(0,1,0)),this.add(s),new un(90,1,t,e)),u=(a.up.set(0,0,-1),a.lookAt(new V(0,-1,0)),this.add(a),new un(90,1,t,e)),h=(u.up.set(0,-1,0),u.lookAt(new V(0,0,1)),this.add(u),new un(90,1,t,e));h.up.set(0,-1,0),h.lookAt(new V(0,0,-1)),this.add(h),this.renderTarget=new js(i,r=r||{format:w,magFilter:v,minFilter:v}),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=t.getRenderTarget(),r=this.renderTarget,l=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,n),t.setRenderTarget(r,1),t.render(e,o),t.setRenderTarget(r,2),t.render(e,s),t.setRenderTarget(r,3),t.render(e,a),t.setRenderTarget(r,4),t.render(e,u),r.texture.generateMipmaps=l,t.setRenderTarget(r,5),t.render(e,h),t.setRenderTarget(i)},this.clear=function(t,e,i,r){for(var n=t.getRenderTarget(),o=this.renderTarget,s=0;s<6;s++)t.setRenderTarget(o,s),t.clear(e,i,r);t.setRenderTarget(n)}}function js(t,e,i){Number.isInteger(e)&&(e=i),nr.call(this,t,t,e)}function Qs(t){return(Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ns(t,e,i){return(e=function(t){return"symbol"===Qs(t=function(t,e){if("object"!==Qs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Qs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}os=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ke=e,this.Tt=null,this.B=null,this.v=this.ke.x,this._=this.ke.y,this.et=this.ke.height,void 0===this.et&&(this.et=0),this.Je=null,this.$e=null,this.ti=null,this.ni=null,this.ei=new ds,this.ii=new Br,this.ri=4,this.oi=9.5,this.ai=!0,this.si=null,void 0!==this.ke.flameSize&&(this.oi=this.ke.flameSize),this.hi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5wEMBgInI5K8yQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAClUlEQVRIx5WVXW7bQAyEv11xJcuyY7QP7RXy0Jv3QjlEgaZJHHn/+8AV5ChNmgggYMDLITkz3DWT42cu3MYCpULlU9+dnEZuQ+bHJULIEPPnQOT7EeYET15jDgr0URD5doJLhN0MYsEawH8cRI4TjAl6B65TgFqheIjlAwDSQdeBvUrOBVKBEiD/pw3JHXSAszChySFrpAyX9P4oUioYC8aAczCNcErgI4TUAN8ZRULS2TurMTg4jgrgk3ZRAqQ32pDZQxZwoiqIgbGH0wghKkCuMMd/8yGPz5q8c9ALDI2TaYC0V4CU1aWXCNtp5P7cABrI2MNoFeQwaHIsWr0U8Bt/yONZJewbwNRDdLAXVeYwqL1jWse59oc8ebBWo+/AOwg9lEGTpYPjThUJSzdhHUV8bDICwUKMSl7JQFUu+gbyHJWHmFTaCkiuQFa0VFqbLdmgne2NcnQY4OxVkbgA1AqYRkxVtheWOqPVxSrReweja6MmPWvhJasViFUPnIOuuI/6Ry8NoHnGABajNmYDkipc8jp3LmqyoanTtRy75G4wKI2TkFT7XPSwsxrWLB288VV0xlSbEwuYqpVt69oAdiGtvgNU60ryos7S8SsSrz/TlOisHqzNzrWsoPatZIsy3Tebi9HEnNttVTYkbpOdhV0Hk8DYNrQkdWnM6xsivVEj1k3lUeCmh2MPewu2qJzzclO1BJlcW9VlOZrWhwZw46A3kJuxnqPuQV46+DqsAEv1pfW9wGB0sc4BHjw8tRcsLwW/9Fesm+Z7s7otJH25fnu4j/o7XckuYnTjzIbR5Z2cM5wjPCQ4tzXO1zfSH6+XxqJ7rasDQ7vCLgkuBXyBtPGN/Jq56+y6UC8sXHQHYtUor0139xfT44J2OsN7dwAAAABJRU5ErkJggg==",this.Qt=this.Qt.bind(this)}var e,i;return e=t,(i=[{key:"addTo",value:function(t){fengmap.FMMarkerFun.LAYER_CLASS.get(ii.FIRE_MARKER)||fengmap.FMMarkerFun.LAYER_CLASS.set(ii.FIRE_MARKER,ns),this.Z(t)}},{key:"remove",value:function(){this.Tt&&(this.stop(),this.Tt.scene.remove(this.Je),this.$e.Xe.destroy(),this.$e.Xe.particleMesh.geometry.dispose(),this.$e.Xe.particleMesh.material=void 0,this.$e.Xe.particleMesh.geometry=void 0,this.$e.Xe.particleMesh=void 0,this.Je.geometry.dispose(),this.Je.material.dispose(),this.Je.geometry=void 0,this.Je=void 0,this.B.off("update",this.Qt))}},{key:"stop",value:function(){this.ti&&(this.ei.Ot(this.ti),this.ti=null)}},{key:"moveTo",value:function(t){var e=this,i=t.duration||.5;t.animate?(this.ti||(this.ti=new fs),this.ti.ye([this.v,this._]),this.ti.xe([t.x,t.y]),this.ti.be(i).Ae(function(t){e.v=t.destination[0],e._=t.destination[1],e.li()}).Se(function(){e.v=t.x,e._=t.y,e.li(),t.finish&&t.finish()}),this.ei.Ct(this.ti._e())):(this.v=t.x,this._=t.y,this.li())}},{key:"x",get:function(){return this.v}},{key:"y",get:function(){return this._}},{key:"height",get:function(){return this.et},set:function(t){this.et=t,this.Je.position.y=this.et+2.5,this.$e.Xe.particleMesh.position.y=this.et+2.5,this.$e.Be.y=this.et+2.5,this.$e.Xe.positionBase.y=this.et+2.5,this.B.enableUpdateRender()}},{key:"flameSize",get:function(){return this.oi},set:function(t){this.oi=t,this.Je.material.uniforms.magnitude.value=10-t,this.B.enableUpdateRender()}},{key:"smokeDensity",get:function(){return void 0===this.ke.smokeDensity?30:this.ke.smokeDensity},set:function(t){this.ke.smokeDensity=t,this.$e.He=t,this.$e.createSmoke(),this.B.enableUpdateRender()}},{key:"level",get:function(){return this.ni}},{key:"type",get:function(){return ii.FIRE_MARKER}},{key:"visible",get:function(){return this.ai},set:function(t){this.ai!==t&&(this.ai=t,(this.Je.visible=t)?this.$e.createSmoke():this.$e.Xe.destroy())}},{key:"bound",get:function(){return null===this.si&&(this.si=new Ts,void 0!==this.v)&&void 0!==this._&&this.si.expandByCoords([{x:this.v,y:this._}]),this.si.clone()}}])&&Ps(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign(os.prototype,{Z:function(t){var e=this;this.B=t.parent.parent,this.ni=t.level,t=t.getOrCreateLayer(ii.FIRE_MARKER);this.Tt=t,(new ke).load(this.hi,function(t){e.Je=new ys(t),e.Je.material.uniforms.magnitude.value=10-e.oi,e.Je.position.set(e.v-e.B.x,e.et+2.5,-e._+e.B.y),e.Je.scale.set(4,5,4),e.Tt.scene.add(e.Je),e.Je.isNoPickup=!0}),t={x:this.v-this.B.x,y:this.et+2.5,z:-this._+this.B.y,smokeDensity:this.ke.smokeDensity},this.$e=new Bs(t),this.$e.init(this.Tt.scene),this.B.on("update",this.Qt)},Qt:function(){var t=this.ii.getElapsedTime()*this.ri;null!==this.Je&&this.Je.update(t),this.$e.update(),this.B.enableUpdateRender()},li:function(){this.Je.position.x=this.v-this.B.x,this.Je.position.z=-this._+this.B.y,this.$e.Xe.particleMesh.position.x=this.v-this.B.x,this.$e.Xe.particleMesh.position.z=-this._+this.B.y,this.$e.Be.x=this.v-this.B.x,this.$e.Be.z=-this._+this.B.y,this.$e.Xe.positionBase.x=this.v-this.B.x,this.$e.Xe.positionBase.z=-this._+this.B.y,this.B.enableUpdateRender()}}),((Os.prototype=Object.create(Le.prototype)).constructor=Os).prototype.isDataTexture=!0,Ds.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ds,load:function(t,e,i,r){var n=this,o=new Os,s=new ae(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(t,function(t){(t=n.parse(t))&&(void 0!==t.image?o.image=t.image:void 0!==t.data&&(o.image.width=t.width,o.image.height=t.height,o.image.data=t.data),o.wrapS=void 0!==t.wrapS?t.wrapS:y,o.wrapT=void 0!==t.wrapT?t.wrapT:y,o.magFilter=void 0!==t.magFilter?t.magFilter:v,o.minFilter=void 0!==t.minFilter?t.minFilter:v,o.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(o.format=t.format),void 0!==t.type&&(o.type=t.type),void 0!==t.mipmaps&&(o.mipmaps=t.mipmaps,o.minFilter=1008),1===t.mipmapCount&&(o.minFilter=v),o.needsUpdate=!0,e)&&e(o,t)},i,r),o}}),Rs.prototype=Object.assign(Object.create(Ds.prototype),{constructor:Rs,parse:function(t){var e,i,r=function(t,e,i){e=e||1024;for(var r=t.pos,n=-1,o=0,s="",a=String.fromCharCode.apply(null,new Uint16Array(t.subarray(r,r+128)));(n=a.indexOf("\n"))<0&&o<e&&r<t.byteLength;)s+=a,o+=a.length,r+=128,a+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(r,r+128)));return-1<n&&(!1!==i&&(t.pos+=o+n+1),s+a.slice(0,n))},n=(e=new Float32Array(1),i=new Int32Array(e.buffer),function(t,e,i,r){var n=t[e+3];n=Math.pow(2,n-128)/255;i[r+0]=o(t[e+0]*n),i[r+1]=o(t[e+1]*n),i[r+2]=o(t[e+2]*n)});function o(t){e[0]=t;var r=(t=i[0])>>16&32768,n=t>>12&2047,o=t>>23&255;if(!(o<103)){if(142<o)return 31744|r|((255==o?0:1)&&8388607&t);if(o<113)return r|((n|=2048)>>114-o)+(n>>113-o&1);r=(r|o-112<<10|n>>1)+(1&n)}return r}var s,a,u,h,l,c=((t=new Uint8Array(t)).pos=0,function(t){var e,i,n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(t.pos>=t.byteLength||!(e=r(t)))return-1;if(!(i=e.match(/^#\?(\S+)$/)))return-1;for(u.valid|=1,u.programtype=i[1],u.string+=e+"\n";!1!==(e=r(t));)if(u.string+=e+"\n","#"===e.charAt(0))u.comments+=e+"\n";else if((i=e.match(n))&&(u.gamma=parseFloat(i[1],10)),(i=e.match(o))&&(u.exposure=parseFloat(i[1],10)),(i=e.match(s))&&(u.valid|=2,u.format=i[1]),(i=e.match(a))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break;return 2&u.valid&&4&u.valid?u:-1}(t));if(-1!==c){var f=c.width,A=c.height,p=function(t,e,i){var r,n,o,s,a,u,h,l,c,f,A,p,d,m=e,y=i;if(m<8||32767<m||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(m!==(t[2]<<8|t[3]))return-1;if(!(r=new Uint8Array(4*e*i))||!r.length)return-1;for(o=n=0,l=4*m,d=new Uint8Array(4),u=new Uint8Array(l);0<y&&o<t.byteLength;){if(o+4>t.byteLength)return-1;if(d[0]=t[o++],d[1]=t[o++],d[2]=t[o++],d[3]=t[o++],2!=d[0]||2!=d[1]||(d[2]<<8|d[3])!=m)return-1;for(h=0;h<l&&o<t.byteLength;){if((p=128<(s=t[o++]))&&(s-=128),0===s||l<h+s)return-1;if(p)for(a=t[o++],c=0;c<s;c++)u[h++]=a;else u.set(t.subarray(o,o+s),h),h+=s,o+=s}for(f=m,c=0;c<f;c++)r[n]=u[c+(A=0)],A+=m,r[n+1]=u[c+A],A+=m,r[n+2]=u[c+A],A+=m,r[n+3]=u[c+A],n+=4;y--}return r}(t.subarray(t.pos),f,A);if(-1!==p){switch(this.type){case b:var d=p,m=1023,y=b;break;case 1015:for(var g=p.length/4*3,v=new Float32Array(g),x=0;x<g;x++)u=v,h=3*x,l=void 0,l=(s=p)[3+(a=4*x)],l=Math.pow(2,l-128)/255,u[h+0]=s[a+0]*l,u[h+1]=s[a+1]*l,u[h+2]=s[a+2]*l;d=v,m=w,y=1015;break;case 1016:g=p.length/4*3;var M=new Uint16Array(g);for(x=0;x<g;x++)n(p,4*x,M,3*x);d=M,m=w,y=1016}return{width:f,height:A,data:d,header:c.string,gamma:c.gamma,exposure:c.exposure,format:m,type:y}}}return null},setDataType:function(t){return this.type=t,this},load:function(t,e,i,r){return Ds.prototype.load.call(this,t,function(t,i){switch(t.type){case b:t.encoding=3002,t.minFilter=g,t.magFilter=g,t.generateMipmaps=!1,t.flipY=!0;break;case 1015:case 1016:t.encoding=M,t.minFilter=v,t.magFilter=v,t.generateMipmaps=!1,t.flipY=!0}e&&e(t,i)},i,r)}}),((Is.prototype=Object.create(Le.prototype)).constructor=Is).prototype.isCubeTexture=!0,Object.defineProperty(Is.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Us.prototype=Object.assign(Object.create(Re.prototype),{constructor:Us,load:function(t,e,i,r){for(var n=new Is,o=new Ie(this.manager),s=(o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),0),a=0;a<t.length;++a)!function(i){o.load(t[i],function(t){n.images[i]=t,6==++s&&(n.needsUpdate=!0,e)&&e(n)},void 0,r)}(a);return n}}),Ls.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ls,load:function(t,e,i,r){Array.isArray(t)||(this.setDataType(t),t=e,e=i,i=r,r=arguments[4]);var n=new Is;switch(n.type=this.type,n.type){case b:n.encoding=3002,n.format=x,n.minFilter=g,n.magFilter=g,n.generateMipmaps=!1;break;case 1015:case 1016:n.encoding=M,n.format=w,n.minFilter=v,n.magFilter=v,n.generateMipmaps=!1}for(var o=this,s=0,a=0;a<t.length;a++)!function(e,i,r,a){new ae(o.manager).setPath(o.path).setResponseType("arraybuffer").load(t[e],function(t){s++,(t=o.hdrLoader.parse(t))&&(void 0!==t.data&&((t=new Os(t.data,t.width,t.height)).type=n.type,t.encoding=n.encoding,t.format=n.format,t.minFilter=n.minFilter,t.magFilter=n.magFilter,t.generateMipmaps=n.generateMipmaps,n.images[e]=t),6===s)&&(n.needsUpdate=!0,i)&&i(n)},r,a)}(a,e,i,r);return n},setDataType:function(t){return this.type=t,this.hdrLoader.setDataType(t),this}}),(ks.prototype=Object.create(Xt.prototype)).constructor=ks,((js.prototype=Object.create(nr.prototype)).constructor=js).prototype.isWebGLCubeRenderTarget=!0,js.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var i,r=new ni;(i=new ve({type:"CubemapFromEquirect",uniforms:le((i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")}).uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:s,blending:u})).uniforms.tEquirect.value=e,e=new Yi(new $r(5,5,5),i);return(i=(r.add(e),new ks(1,10,1))).renderTarget=this,i.renderTarget.texture.name="CubeCameraTexture",i.update(t,r),e.geometry.dispose(),e.material.dispose(),this};var zs=4,Hs=8,Vs=Math.pow(2,Hs),Gs=[.125,.215,.35,.446,.526,.582],Ks=Hs-zs+1+Gs.length,Ys=20,Xs=Ns(Ns(Ns(Ns(Ns(Ns(Ns({},M,0),3001,1),3002,2),3004,3),3005,4),3006,5),3007,6),Ws=new fi,qs=((aa=new be({defines:{n:aa=Ys},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:$s=new Float32Array(aa)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:sa=new V(0,1,0)},inputEncoding:{value:Xs[M]},outputEncoding:{value:Xs[M]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:u,depthTest:!1,depthWrite:!1})).type="SphericalGaussianBlur",aa),Zs=null,Js=null,$s=function(){for(var t=[],e=[],i=[],r=Hs,n=0;n<Ks;n++){for(var o=Math.pow(2,r),s=(e.push(o),1/o),a=[o=-(s=(Hs-zs<n?s=Gs[n-Hs+zs-1]:0==n&&(s=0),i.push(s),1/(o-1)))/2,o,s=1+s/2,o,s,s,o,o,s,s,o,s],u=new Float32Array(108),h=new Float32Array(72),l=new Float32Array(36),c=0;c<6;c++){var f=[f=c%3*2/3-1,A=2<c?0:-1,0,f+2/3,A,0,f+2/3,1+A,0,f,A,0,f+2/3,1+A,0,f,1+A,0],A=(u.set(f,18*c),h.set(a,12*c),[c,c,c,c,c,c]);l.set(A,6*c)}(o=new ie).setAttribute("position",new ht(u,3)),o.setAttribute("uv",new ht(h,2)),o.setAttribute("faceIndex",new ht(l,1)),t.push(o),zs<r&&r--}return{ui:t,ci:e,fi:i}}(),ta=$s.ui,ea=$s.ci,ia=$s.fi,ra=null,na=null,oa=null,sa=(1+Math.sqrt(5))/2,aa=1/sa,ua=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,sa,aa),new V(0,sa,-aa),new V(aa,0,sa),new V(-aa,0,sa),new V(sa,aa,0),new V(-sa,aa,0)];function ha(t){na=t,fa(qs)}function la(t){var e={magFilter:g,minFilter:g,generateMipmaps:!1,type:t?t.type:b,format:t?t.format:1023,encoding:t?t.encoding:3002,depthBuffer:!1,stencilBuffer:!1},i=Aa(e);return i.depthBuffer=!t,ra=Aa(e),i}function ca(t){ra.dispose(),na.setRenderTarget(oa),t.scissorTest=!1,t.setSize(t.width,t.height)}function fa(t){var e=new ni;e.add(new Yi(ta[0],t)),na.compile(e,Ws)}function Aa(t){return(t=new nr(3*Vs,3*Vs,t)).texture.mapping=d,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function pa(t,e,i,r,n){t.viewport.set(e,i,r,n),t.scissor.set(e,i,r,n)}function da(t){var e=na.autoClear;na.autoClear=!1;for(var i=1;i<Ks;i++)ma(t,i-1,i,Math.sqrt(ia[i]*ia[i]-ia[i-1]*ia[i-1]),ua[(i-1)%ua.length]);na.autoClear=e}function ma(t,e,i,r,n){ya(t,ra,e,i,r,"latitudinal",n),ya(ra,t,i,i,r,"longitudinal",n)}function ya(t,e,i,r,n,o,s){for(var a=new ni,u=(a.add(new Yi(ta[r],qs)),qs.uniforms),h=ea[i]-1,l=n/(h=isFinite(n)?Math.PI/(2*h):2*Math.PI/(2*Ys-1)),c=isFinite(n)?1+Math.floor(3*l):Ys,f=[],A=0,p=0;p<Ys;++p){var d=p/l,m=Math.exp(-d*d/2);f.push(m),0==p?A+=m:p<c&&(A+=2*m)}for(p=0;p<f.length;p++)f[p]=f[p]/A;u.envMap.value=t.texture,u.samples.value=c,u.weights.value=f,u.latitudinal.value="latitudinal"===o,s&&(u.poleAxis.value=s),u.dTheta.value=h,u.mipInt.value=Hs-i,u.inputEncoding.value=Xs[t.texture.encoding],u.outputEncoding.value=Xs[t.texture.encoding],n=ea[r],pa(e,d=3*Math.max(0,Vs-2*n),(0===r?0:2*Vs)+2*n*(Hs-zs<r?r-Hs+zs:0),3*n,2*n),na.setRenderTarget(e),na.render(a,Ws)}function ga(){var t=new be({uniforms:{envMap:{value:null},texelSize:{value:new at(1,1)},inputEncoding:{value:Xs[M]},outputEncoding:{value:Xs[M]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:u,depthTest:!1,depthWrite:!1});return t.type="EquirectangularToCubeUV",t}function va(){var t=new be({uniforms:{envMap:{value:null},inputEncoding:{value:Xs[M]},outputEncoding:{value:Xs[M]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:u,depthTest:!1,depthWrite:!1});return t.type="CubemapToCubeUV",t}ha.prototype={constructor:ha,fromScene:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:100,o=(oa=na.getRenderTarget(),la()),s=t,a=o,u=new un(90,1,t=r,r=n),h=[1,1,1,1,-1,1],l=[1,1,-1,-1,-1,1],c=(t=na.outputEncoding,r=na.toneMapping,n=na.toneMappingExposure,na.getClearColor()),f=na.getClearAlpha(),A=(na.toneMapping=1,na.toneMappingExposure=1,na.outputEncoding=M,s.scale.z*=-1,s.background);A&&A.isColor&&(A.convertSRGBToLinear(),e=Math.max(A.r,A.g,A.b),e=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127),A=A.multiplyScalar(Math.pow(2,-e)),e=(e+128)/255,na.setClearColor(A,e),s.background=null);for(var p=0;p<6;p++){var d=p%3;0==d?(u.up.set(0,h[p],0),u.lookAt(l[p],0,0)):1==d?(u.up.set(0,0,h[p]),u.lookAt(0,l[p],0)):(u.up.set(0,h[p],0),u.lookAt(0,0,l[p])),pa(a,d*Vs,2<p?Vs:0,Vs,Vs),na.setRenderTarget(a),na.render(s,u)}return na.toneMapping=r,na.toneMappingExposure=n,na.outputEncoding=t,na.setClearColor(c,f),s.scale.z*=-1,0<i&&ma(o,0,0,i),da(o),ca(o),o},fromEquirectangular:function(t){return t.magFilter=g,t.minFilter=g,t.generateMipmaps=!1,this.fromCubemap(t)},fromCubemap:function(t){oa=na.getRenderTarget();var e=la(t),i=e,r=new ni,n=(t.isCubeTexture?null==Js&&(Js=va()):null==Zs&&(Zs=ga()),t.isCubeTexture?Js:Zs);return r.add(new Yi(ta[0],n)),((n=n.uniforms).envMap.value=t).isCubeTexture||n.texelSize.value.set(1/t.image.width,1/t.image.height),n.inputEncoding.value=Xs[t.encoding],n.outputEncoding.value=Xs[t.encoding],pa(i,0,0,3*Vs,2*Vs),na.setRenderTarget(i),na.render(r,Ws),da(e),ca(e),e},compileCubemapShader:function(){null==Js&&fa(Js=va())},compileEquirectangularShader:function(){null==Zs&&fa(Zs=ga())},dispose:function(){qs.dispose(),null!=Js&&Js.dispose(),null!=Zs&&Zs.dispose();for(var t=0;t<ta.length;t++)ta[t].dispose()}};var ba={basic:{uniforms:ce([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:ce([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.fog,sn.lights,{emissive:{value:new U(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:ce([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.fog,sn.lights,{emissive:{value:new U(0)},specular:{value:new U(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:ce([sn.common,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.roughnessmap,sn.metalnessmap,sn.fog,sn.lights,{emissive:{value:new U(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:ce([sn.common,sn.specularmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.gradientmap,sn.fog,sn.lights,{emissive:{value:new U(0)},specular:{value:new U(1118481)},shininess:{value:30}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:ce([sn.common,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:ce([sn.points,sn.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:ce([sn.common,sn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:ce([sn.common,sn.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:ce([sn.common,sn.bumpmap,sn.normalmap,sn.displacementmap,{opacity:{value:1}}]),vertexShader:an.normal_vert,fragmentShader:an.normal_frag},sprite:{uniforms:ce([sn.sprite,sn.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null}},vertexShader:an.background_vert,fragmentShader:an.background_frag},cube:{uniforms:ce([sn.envmap,{opacity:{value:1}}]),vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:ce([sn.common,sn.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:ce([sn.lights,sn.fog,{color:{value:new U(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};function wa(t){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===wa(t=function(t,e){if("object"!==wa(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==wa(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}ba.physical={uniforms:ce([ba.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new at(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new U(0)},transparency:{value:0}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};var Ma=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var e=le(ba.cube.uniforms);e.projectionMatrixFixZoom={value:[]},this.boxMesh=new Yi(new $r(1,1,1),new ve({type:"BackgroundCubeMaterial",uniforms:e,vertexShader:"varying vec3 vWorldDirection;\n    #include <common>\n    // zoom,\n    uniform mat4 projectionMatrixFixZoom;\n    void main() {\n\n      vWorldDirection = transformDirection( position, modelMatrix );\n\n      #include <begin_vertex>\n      #include <project_vertex>\n\n      if (isPerspectiveMatrix(projectionMatrix)) {\n        gl_Position = projectionMatrix * mvPosition;\n      } else {\n        gl_Position = projectionMatrixFixZoom * mvPosition;\n      }\n      gl_Position.z = gl_Position.w; // set z to camera.far\n    }",fragmentShader:"\n      #include <envmap_common_pars_fragment>\n      uniform float opacity;\n      varying vec3 vWorldDirection;\n      #include <cube_uv_reflection_fragment>\n      void main() {\n        vec3 vReflect = vWorldDirection;\n        #include <envmap_fragment>\n        gl_FragColor = envColor;\n        gl_FragColor.a *= opacity;\n\n        #include <tonemapping_fragment>\n        #include <encodings_fragment>\n      }",side:s,depthTest:!1,depthWrite:!1,fog:!1})),this.boxMesh.frustumCulled=!1,this.boxMesh.geometry.deleteAttribute("normal"),this.boxMesh.geometry.deleteAttribute("uv"),this.boxMesh.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(this.boxMesh.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),this.tempMatix=new Tt}var e,i;return e=t,(i=[{key:"setTexture",value:function(t){this.boxMesh.material.uniforms.envMap.value=t,this.boxMesh.material.uniforms.flipEnvMap.value=t.isCubeTexture?-1:1,this.boxMesh.material.needsUpdate=!0,this.Jn=t}},{key:"setOrthographicScale",value:function(t,e){var i;"OrthographicCamera"===t.type&&(i=t.zoom,t.zoom=e,t.updateProjectionMatrix(),this.tempMatix.copy(t.projectionMatrix),this.boxMesh.material.uniforms.projectionMatrixFixZoom.value=this.tempMatix,t.zoom=i,t.updateProjectionMatrix())}}])&&xa(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _a(t,e,i){return(e=Ea(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ba(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ea(r.key),r)}}function Ea(t){return"symbol"===Sa(t=function(t,e){if("object"!==Sa(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Sa(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}function Ca(t){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ca(t=function(t,e){if("object"!==Ca(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ca(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Object.assign(Ma.prototype,{jt:function(){this.tempMatix=null,this.boxMesh&&(this.boxMesh.geometry.dispose(),this.boxMesh.material.dispose(),this.Jn&&this.Jn.dispose(),this.boxMesh=null)}}),$s=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.SkyBoxType={cube6HDR:0,cube6Normal:1,cube1HDR:2,cube1Normal:3},this.B=e,this.di=!0,this.vi=1,this.mi=2e3,this.pi=!1,this.O=null,this.gi=null,this._i=[],this.yi=!1,this.xi=null,this.bi=null,this.wi=this.Ai(),this.Si=this.Ti(),"basic"===this.B.getRenderManager().type&&this.B.setRenderManager(new ui)}var e,i;return e=t,(i=[{key:"isHDR",get:function(){return this.yi}},{key:"exposure",get:function(){return this.vi},set:function(t){this.vi=t}},{key:"imagePath",get:function(){return this.gi},set:function(t){this.gi=t}},{key:"scale",get:function(){return this.mi},set:function(t){this.mi=t}},{key:"imageNames",get:function(){return this._i},set:function(t){var e=(e=t[0]).slice(e.match(/(?=\.)/).index+1).toLocaleLowerCase();this.yi="hdr"===e,this._i=t}},{key:"enable",value:function(){this.di=!0,(this.B.getRenderManager().skyNeedTexture=this).B.enableUpdateNode()}},{key:"disable",value:function(){this.di=!1,this.B.getRenderManager().skyNeedTexture=null,this.B.enableUpdateNode()}},{key:"render",value:function(){this.F(this.B.getRenderManager().renderer,this.B.camera)}},{key:"setState",value:function(t){var e=t.imagePath,i=t.imageNames,r=(t.enable,t.exposure);t=t.scale;e&&(this.imagePath=e),i&&(this.imageNames=i),(e||i)&&this.Mi(),void 0!==r&&(this.exposure=r),void 0!==t&&(this.scale=t),this.B.enableUpdateNode()}},{key:"getState",value:function(){return{exposure:this.vi,imageNames:this._i,imagePath:this.gi,scale:this.mi}}},{key:"dispose",value:function(){this.disable(),this.xi&&this.xi.jt(),this.gi=null,this._i=[],this.xi=null,this.wi=null,this.Si=null,this.pi=!1}}])&&Ba(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign($s.prototype,{Ai:function(){var t=this;return _a(_a(_a(_a({},this.SkyBoxType.cube6HDR,function(e){e.toneMappingExposure=t.exposure,e.toneMapping=1,e.outputEncoding=3001}),this.SkyBoxType.cube6Normal,function(t){}),this.SkyBoxType.cube1HDR,function(e){e.toneMappingExposure=t.exposure,e.toneMapping=5,e.outputEncoding=3001}),this.SkyBoxType.cube1Normal,function(t){})},Ti:function(){var t=this;return _a(_a(_a(_a({},this.SkyBoxType.cube6HDR,function(){(new Ls).setPath(t.gi).setDataType(b).load(t._i,function(e){e.magFilter=v,e.needsUpdate=!0,t.Ei(e),t.pi=!0})}),this.SkyBoxType.cube6Normal,function(){var e=[];t.imageNames.forEach(function(i){e.push(t.gi+i)}),(new Us).load(e,function(e){e.mapping=301,t.Ei(e),t.pi=!0})}),this.SkyBoxType.cube1HDR,function(){var e=new ha(t.B.getRenderManager().renderer);e.compileEquirectangularShader(),(new Rs).setPath(t.gi).load(t._i[0],function(i){var r=e.fromEquirectangular(i);i.dispose(),e.dispose(),t.Ei(r.texture),t.pi=!0})}),this.SkyBoxType.cube1Normal,function(){(new ke).load(t.gi+t._i[0],function(e){e.mapping=300,e=new js(1024,{generateMipmaps:!0,minFilter:1008,magFilter:v}).fromEquirectangularTexture(t.B.getRenderManager().renderer,e),t.Ei(e),t.pi=!0})})},Ei:function(t){this.xi&&this.xi.jt(),this.xi=new Ma,this.xi.setTexture(t),0<this.O.children.length&&this.O.remove(this.O.children[0]),this.O.add(this.xi.boxMesh),this.B.enableUpdateNode()},F:function(t,e){var i,r,n,o;this.di&&this.pi&&(i=t.toneMappingExposure,r=t.toneMapping,n=t.outputEncoding,this.xi&&this.xi.setOrthographicScale(e,this.mi),(o=this.wi[this.bi])&&o(t),t.render(this.O,e),t.toneMappingExposure=i,t.toneMapping=r,t.outputEncoding=n)},Mi:function(){null!==this.gi&&0!==this._i.length&&null!=this.Si&&(this.O||(this.O=new ni),this.bi=null,6===this.imageNames.length&&this.isHDR&&(this.bi=this.SkyBoxType.cube6HDR),6===this.imageNames.length&&!1===this.isHDR&&(this.bi=this.SkyBoxType.cube6Normal),1===this.imageNames.length&&this.isHDR&&(this.bi=this.SkyBoxType.cube1HDR),1===this.imageNames.length&&!1===this.isHDR&&(this.bi=this.SkyBoxType.cube1Normal),null===this.bi||this.Si[this.bi]())}}),sa=$s;aa=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.url=e.url}var e,i;return e=t,(i=[{key:"load",value:function(t,e){(new Rs).setDataType(b).load(this.url,function(i){var r=((r=new ha(t.getRenderManager().renderer)).compileEquirectangularShader(),r.fromEquirectangular(i).texture);e&&e(r)})}}])&&Ta(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fa(t){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Fa(t=function(t,e){if("object"!==Fa(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Fa(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Oa=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Kt=e.Kt,this.G=i.url,this.Y=i.count,this.Pi=e.Pi,this.Ht=e.Ht,null==this.Ht&&(this.Ht=0),void(this.Li=0)!==e.Li&&"y"===e.Li&&(this.Li=1),0===this.Li&&(this.Ht=this.Ht/this.Y),void 0===this.Pi&&(this.Pi=1),this.Fi=null,this.Ni=null,this.Di="\n            #include <common>\n            #include <logdepthbuf_pars_vertex>\n            varying vec2 vUv;\n            varying vec3 fNormal;\n            varying vec3 vPosition;\n            void main(){\n                    vUv = uv;\n                    vPosition = position;\n                    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n                    gl_Position = projectionMatrix * mvPosition;\n                    #include <logdepthbuf_vertex>\n            }\n        ",this.Ci="\n            uniform float time;\n            uniform float luminance;\n            uniform float repeat;\n            varying vec2 vUv;\n            uniform sampler2D flowTexturefront;\n            uniform sampler2D flowTextureback;\n            uniform sampler2D bgTexture;\n            uniform float direct;\n            uniform float isBgColor;\n            #include <logdepthbuf_pars_fragment>\n            void main( void ) {\n                #include <logdepthbuf_fragment>\n                vec2 position = vUv;\n                if(direct==1.0){\n                    vec4 colora = texture2D( flowTextureback, vec2( vUv.x*repeat, fract(vUv.y + time )));\n                    if(vUv.y>0.5){\n                        colora = texture2D( flowTexturefront, vec2( vUv.x*repeat, fract(vUv.y - time )));\n                    }\n                    if(isBgColor==1.0){\n                        vec4 colorb = texture2D( bgTexture , position.xy);\n                        colora.r = colora.r * colorb.a * luminance;\n                        colora.g = colora.g * colorb.a * luminance;\n                        colora.b = colora.b * colorb.a * luminance;\n\n                        colorb.r = colorb.r * colorb.a * luminance;\n                        colorb.g = colorb.g * colorb.a * luminance;\n                        colorb.b = colorb.b * colorb.a * luminance;\n\n                        gl_FragColor = colorb + colora;  \n                    } else {\n                        gl_FragColor = colora; \n                    }             \n                } else {\n                    vec4 colora = texture2D( flowTextureback, vec2( fract( vUv.x - time )*repeat, vUv.y));\n                    if(vUv.y>0.5){\n                        colora = texture2D( flowTexturefront, vec2( fract( vUv.x - time )*repeat, vUv.y));\n                    }\n                    if(isBgColor==1.0){\n                        vec4 colorb = texture2D( bgTexture , position.xy);\n                    \n                        colora.r = colora.r * colorb.a* luminance;\n                        colora.g = colora.g * colorb.a* luminance;\n                        colora.b = colora.b * colorb.a* luminance;\n\n                        colorb.r = colorb.r * colorb.a * luminance;\n                        colorb.g = colorb.g * colorb.a * luminance;\n                        colorb.b = colorb.b * colorb.a * luminance;\n                        gl_FragColor = colorb + colora;\n                    } else {\n                        colora.r = colora.r * colora.a * luminance;\n                        colora.g = colora.g * colora.a * luminance;\n                        colora.b = colora.b * colora.a * luminance;\n                        gl_FragColor = colora; \n                    }        \n                }\n            }\n        "}var e,i;return e=t,(i=[{key:"init",value:function(t){var e=this,i=this;function r(t){var e=document.createElement("canvas"),i=(e.width=t.width,e.height=t.height,e.getContext("2d"));return i.translate(e.width,0),i.scale(-1,1),i.drawImage(t,0,0,e.width,e.height),e}function n(t,e){if(!t){for(var r=function(t){var e=i.Kt.toLowerCase();if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var r="#",n=1;n<4;n+=1)r+=e.slice(n,n+1).concat(e.slice(n,n+1));e=r}var o=[];for(n=1;n<7;n+=2)o.push(parseInt("0x"+e.slice(n,n+2)));return o}return e}(),n=document.createElement("canvas"),o=(n.width=1024,n.height=2048,n.getContext("2d")),s=o.createLinearGradient(0,0,0,1024),a=.3,u=0;u<=1e3;u++)s.addColorStop(u/1e3,"rgba("+r[0]+", "+r[1]+","+r[2]+", "+a+")"),a+=7e-4;o.fillStyle=s,o.fillRect(0,0,1024,1024);s=o.createLinearGradient(0,1024,0,2048),a=1;for(var h=0;h<=1e3;h++)s.addColorStop(h/1e3,"rgba("+r[0]+", "+r[1]+","+r[2]+", "+a+")"),a-=7e-4;return o.fillStyle=s,o.fillRect(0,1024,1024,1024),n}var l=new Image;l.crossOrigin="Anonymous",l.onload=function(){var t=document.createElement("canvas"),i=(t.width=512,t.height=512,t.getContext("2d"));i.drawImage(l,0,0,512,256),i.drawImage(l,0,256,512,256),e&&e(t)},l.src=t}n(this.G,function(i){e.Fi=new oo(r(i)),e.Fi.wrapS=e.Fi.wrapT=m,e.Ni=new oo(r((i=i,(a=document.createElement("canvas")).width=512,a.height=512,(s=a.getContext("2d")).translate(256,256),s.rotate(Math.PI),s.drawImage(i,-256,-256),r(a)))),e.Ni.wrapS=e.Ni.wrapT=m;var s=null,a=(i=0,void 0!==e.Kt&&(s=new oo(n()),i=1),new ve({uniforms:{time:{value:0},luminance:{value:e.Pi},flowTexturefront:{value:e.Fi},flowTextureback:{value:e.Ni},bgTexture:{value:s},isBgColor:{value:i},direct:{value:e.Li},repeat:{value:e.Y}},transparent:!0,depthWrite:!0,depthTest:!0,side:o,vertexShader:e.Di,fragmentShader:e.Ci}));t(a)})}}])&&Pa(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Da(t){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ra(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Da(t=function(t,e){if("object"!==Da(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Da(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Ia=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Kt=e.Kt,this.G=i.url,this.Y=i.count,this.Pi=e.Pi,this.Ht=e.Ht,this.Ht=this.Ht/this.Y,this.Jn=null,this.Di="\n            #include <common>\n            #include <logdepthbuf_pars_vertex>\n            varying vec2 vUv;\n            void main(){\n                    vUv = uv;\n                    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n                    gl_Position = projectionMatrix * mvPosition;\n                    #include <logdepthbuf_vertex>\n            }\n        ",this.Ci="\n            uniform float time;\n            uniform float luminance;\n            uniform float repeat;\n            varying vec2 vUv;\n            uniform sampler2D texture;\n            uniform sampler2D background;\n            uniform bool isbackground;\n            #include <logdepthbuf_pars_fragment>\n            void main( void ) {\n                #include <logdepthbuf_fragment>\n                vec4 backcolor=texture2D(background,vUv);\n                vec4 colora = texture2D( texture, vec2(fract( vUv.x + time )*repeat, vUv.y));\n                colora.r = colora.r * colora.a * luminance;\n                colora.g = colora.g * colora.a * luminance;\n                colora.b = colora.b * colora.a * luminance;\n                if(isbackground){\n                    gl_FragColor = vec4(vec3(mix(colora,backcolor,1.0-colora.a)),1.0); \n                } else {\n                    gl_FragColor = colora; \n                }            \n            }\n        "}var e,i;return e=t,(i=[{key:"init",value:function(t){var e,i,r,n=this,o=this;e=this.G,i=function(e){n.Jn=new oo(e);e=null;var i=!(n.Jn.wrapS=n.Jn.wrapT=m);void 0!==n.Kt&&(e=new oo(o.getBackgroundCanvas()),i=!0),e=new ve({uniforms:{time:{value:0},luminance:{value:n.Pi},texture:{value:n.Jn},background:{value:e},isbackground:{value:i},repeat:{value:n.Y}},transparent:!0,depthWrite:!0,depthTest:!0,side:a,vertexShader:n.Di,fragmentShader:n.Ci});t(e)},(r=new Image).crossOrigin="Anonymous",r.onload=function(){var t=document.createElement("canvas"),e=(t.width=512,t.height=512,t.getContext("2d"));e.drawImage(r,0,0,r.width,r.height/2,0,256,512,256),e.drawImage(r,0,r.height/2,r.width,r.height/2,0,0,512,256),i&&i(t)},r.src=e}},{key:"getBackgroundCanvas",value:function(){var t=document.createElement("canvas"),e=(t.width=128,t.height=128,t.getContext("2d"));return e.rect(0,0,128,128),e.fillStyle=new U(this.Kt).getStyle(),e.fill(),t}}])&&Ra(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ua(t){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function La(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ua(t=function(t,e){if("object"!==Ua(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ua(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function ka(t){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ja(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ka(t=function(t,e){if("object"!==ka(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ka(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}$s=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ri="FMFlowEffect",this.Ii=null,this.Oi=null,this.Kt=e.color,this.G=e.url,this.Y=e.count,this.Pi=e.strength,this.Ht=e.speed,null==this.Ht&&(this.Ht=0),this.Li=e.direct,void 0===this.Li&&(this.Li="x")}var e,i;return e=t,(i=[{key:"type",get:function(){return this.Ri}},{key:"direct",get:function(){return this.Li},set:function(t){this.Li=t}},{key:"speed",get:function(){return this.Ht},set:function(t){this.Ht=t}},{key:"add",value:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)t[e].addEffect(this,this.Pi,this.Kt);else t.addEffect(this,this.Pi,this.Kt)}},{key:"remove",value:function(t){t.removeEffect(this)}},{key:"update",value:function(t){var e=t.getRenderNode().material,i=0,r=(1===(i=void 0!==this.Li&&"y"===this.Li?1:i)&&t.type!==fengmap.FMType.WALL_MARKER&&(i=0),e.uniforms.direct&&e.uniforms.direct.value!==i&&(e.uniforms.direct.value=i),e.uniforms.repeat&&e.uniforms.repeat.value!==t.count&&(e.uniforms.repeat.value=t.count),this.Ht);0===i&&(r=this.Ht/t.count),e.uniforms.time.value+=r/1e3}},{key:"getMaterial",value:function(t,e){t.type===fengmap.FMType.WALL_MARKER?new Oa(this,t).init(function(t){e(t)}):t.type===fengmap.FMType.TUBE_MARKER&&new Ia(this,t).init(function(t){e(t)})}}])&&La(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Qa=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ri="FMDiffusion",this.Kt=e.color,this.Ui=e.maxScale,void 0===this.Ui&&(this.Ui=10),this.Ht=e.speed,void 0===this.Ht&&(this.Ht=1),this.ji=!1,void 0!==this.Kt&&(this.ji=!0),this.Di="\n            #include <common>\n            #include <logdepthbuf_pars_vertex>\n            varying vec3 vPosition;\n            varying vec3 vNormal;\n            varying vec2 vUv;\n            \n            void main() {\n            \n                vPosition =  vec3(modelMatrix * vec4( position, 1.0 ));\n                vNormal =  normal;\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                #include <logdepthbuf_vertex>\n                \n            }\n        ",this.Ci="\n            varying vec3 vPosition;\n            varying vec3 vNormal;\n            varying vec2 vUv;\n            \n            uniform vec3 color;\n            uniform bool iscolor;\n            uniform float opacity;\n            uniform bool isTexture;\n            uniform sampler2D texture;\n            #include <logdepthbuf_pars_fragment>\n            \n            void main() {\n                #include <logdepthbuf_fragment>\n\n                vec3 viewDir = normalize(cameraPosition - vPosition);\n                \n                float res = max(dot(viewDir,vNormal),0.20);\n            \n                float alpha = (1.0 - res);\n            \n                alpha *= alpha;\n                if(!isTexture){\n                    gl_FragColor = 3.0*vec4(color, alpha * opacity);\n                } else {\n                    vec4 tex = texture2D( texture, vUv );\n                    if(!iscolor){\n                        gl_FragColor = 3.0*vec4(tex.rgb, alpha * opacity*tex.a);\n                    } else {\n                        gl_FragColor = 3.0*vec4(tex.rgb+color, alpha * opacity*tex.a);\n                    }\n                }\n            }\n        "}var e,i;return e=t,(i=[{key:"type",get:function(){return this.Ri}},{key:"maxScale",get:function(){return this.Ui},set:function(t){this.Ui=t}},{key:"speed",get:function(){return this.Ht},set:function(t){this.Ht=t}},{key:"getMaterial",value:function(t,e){var i,r,n,o=this;void 0!==t.url?(i=t.url,r=function(t){t=new oo(t),t=new ve({uniforms:{color:{value:new U(o.Kt)},opacity:{value:1},texture:{value:t},isTexture:{value:!0},iscolor:{value:o.ji}},transparent:!0,depthTest:!0,depthWrite:!1,vertexShader:o.Di,fragmentShader:o.Ci}),e(t)},(n=new Image).crossOrigin="Anonymous",n.onload=function(){var t=document.createElement("canvas");t.width=512,t.height=512,t.getContext("2d").drawImage(n,0,0,512,512),r&&r(t)},n.src=i):(t=new ve({uniforms:{color:{value:new U(i=void 0===(i=this.Kt)?t.color:i)},opacity:{value:1},texture:{value:null},isTexture:{value:!1},iscolor:{value:!0}},transparent:!0,depthTest:!0,depthWrite:!1,vertexShader:this.Di,fragmentShader:this.Ci}),e(t))}},{key:"add",value:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)t[e].addEffect(this);else t.addEffect(this)}},{key:"remove",value:function(t){t.removeEffect(this)}},{key:"update",value:function(t){var e=this.Ht/60;t.scale.x+=e,t.scale.y+=e,t.scale.z+=e,t.scale.x>this.Ui-.4*this.Ui&&(t.material.uniforms.opacity.value-=.005),t.scale.x>this.Ui&&(t.scale.x=.1,t.scale.y=.1,t.scale.z=.1,t.material.uniforms.opacity.value=.8)}}])&&ja(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Na(t){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Na(t=function(t,e){if("object"!==Na(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Na(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Ha=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.B=e,this.U=(i=void 0===i?{}:i).color,void 0===this.U&&(this.U="#CCE0FF"),this.j=i.density,void 0===this.j&&(this.j=25e-5),this.Hn=!1,this.Qt=this.Qt.bind(this)}var e,i;return e=t,(i=[{key:"color",get:function(){return this.U},set:function(t){if(this.U=t,this.Hn){for(var e=this.B.getVisibleLevels(),i=0;i<e.length;i++)for(var r=this.B.getFloor(e[i]).getLayers(fengmap.FMType.EXTENT_LAYER|fengmap.FMType.MODEL_LAYER|fengmap.FMType.EXTERNAL_MODEL_LAYER),n=0;n<r.length;n++)r[n].scene.fog?r[n].scene.fog.color=new U(this.U):r[n].scene.fog=new ri(new U(this.U),this.j),0===i&&r[n].type===fengmap.FMType.EXTENT_LAYER&&(r[n].scene.background=new U(this.U));this.B.enableUpdateRender()}}},{key:"density",get:function(){return this.j},set:function(t){if(this.j=t,this.Hn){for(var e=this.B.getVisibleLevels(),i=0;i<e.length;i++)for(var r=this.B.getFloor(e[i]).getLayers(fengmap.FMType.EXTENT_LAYER|fengmap.FMType.MODEL_LAYER|fengmap.FMType.EXTERNAL_MODEL_LAYER),n=0;n<r.length;n++)r[n].scene.fog?r[n].scene.fog.density=this.j:r[n].scene.fog=new ri(new U(this.U),this.j);this.B.enableUpdateRender()}}},{key:"enable",value:function(){this.Hn=!0,this.di(this.Hn),this.B.on("update",this.Qt)}},{key:"disable",value:function(){this.Hn=!1,this.di(this.Hn),this.B.off("update",this.Qt),this.ki(!1)}}])&&za(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.assign(Ha.prototype,{di:function(t){for(var e,i,r,n,o,s,a=this,u=this,h=this.B.getRenderManager(),l=("basic"===h.type&&this.B.setRenderManager(new ui),t?(h.fogEffect=this,e=function(t){t=new oo(t),h.fristRenderScene.fog=new ri(new U(a.U),a.j),h.fristRenderScene.background=t},""===(i=u.B.getMapOptions().container.style.backgroundImage)?((r=document.createElement("canvas")).height=1024,r.width=1024,n=r.getContext("2d"),""!==(o=u.B.getMapOptions().container.style.backgroundColor)&&(n.fillStyle=o,n.fillRect(0,0,r.width,r.height)),n.globalAlpha=.8,n.fillStyle=u.U,n.fillRect(0,0,r.width,r.height),e&&e(r)):(i=(i=i.substring(i.indexOf("(")+1,i.indexOf(")"))).replaceAll('"',""),(s=new Image).crossOrigin="Anonymous",s.onload=function(){var t=document.createElement("canvas"),i=(t.height=s.height/2,t.width=s.width/2,t.getContext("2d"));i.drawImage(s,0,0,t.width,t.height),i.globalAlpha=.8,i.fillStyle=u.U,i.fillRect(0,0,t.width,t.height),e&&e(t)},s.src=i)):(h.fogEffect=null,h.fristRenderScene.fog=null,h.fristRenderScene.background=null),this.B.getVisibleLevels()),c=0;c<l.length;c++)for(var f=this.B.getFloor(l[c]).getLayers(fengmap.FMType.EXTENT_LAYER|fengmap.FMType.MODEL_LAYER|fengmap.FMType.EXTERNAL_MODEL_LAYER),A=0;A<f.length;A++)t?f[A].scene.fog||(f[A].scene.fog=new ri(new U(this.U),this.j)):(f[A].scene.fog=null,f[A].scene.background=null);this.B.enableUpdateRender()},Qt:function(){this.ki(!0)},ki:function(t){for(var e=this.B.getVisibleLevels(),i=0;i<e.length;i++)for(var r=this.B.getFloor(e[i]).getLayers(fengmap.FMType.MODEL_LAYER),n=0;n<r.length;n++)for(var o=r[n].scene.children,s=0;s<o.length;s++)o[s].mapNode&&o[s].mapNode.type===fengmap.FMType.MODEL&&(t?o[s].material.polygonOffset||(o[s].material.polygonOffset=!0,o[s].material.polygonOffsetFactor=1,o[s].material.polygonOffsetUnits=4):(o[s].material.polygonOffset=!1,o[s].material.polygonOffsetFactor=0,o[s].material.polygonOffsetUnits=0));this.B.enableUpdateRender()}});var Va,Ga={FMParticle:i,FMRain:Lr,FMSky:on,FMTextureBasedSkybox:sa,FMWater:ro,FMBloom:Bo,FMOutline:Oo,FMSweep:Io,FMSAO:Go,FMFlowline:ts,FMFireMarker:os,FMFlow:$s,FMDiffusion:Qa,FMFog:Ha,FMHDR:aa};for(Va in Ga)window.fengmap[Va]=Ga[Va];e.default=fengmap}],i={},t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"Hi",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.Hi)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.Hi?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=0).default;function t(r){var n;return(i[r]||(n=i[r]={i:r,l:!1,exports:{}},e[r].call(n.exports,n,n.exports,t),n.l=!0,n)).exports}var e,i},t.exports=r()},"8qoP":function(t,e,i){var r=i("X3l8").Buffer,n=i("H2Pp");function o(t,e,i){var o=e.length,s=n(e,t._cache);return t._cache=t._cache.slice(o),t._prev=r.concat([t._prev,i?e:s]),s}e.encrypt=function(t,e,i){for(var n,s=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){s=r.concat([s,o(t,e,i)]);break}n=t._cache.length,s=r.concat([s,o(t,e.slice(0,n),i)]),e=e.slice(n)}return s}},9:function(t,e){},"96ER":function(t,e,i){"use strict";var r=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,n=/t|\s/i,o={date:a,time:u,"date-time":function(t,e){if(!t||!e)return;t=t.split(n),e=e.split(n);var i=a(t[0],e[0]);if(void 0===i)return;return i||u(t[1],e[1])}},s={type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};function a(t,e){if(t&&e)return t>e?1:t<e?-1:t===e?0:void 0}function u(t,e){if(t&&e&&(t=t.match(r),e=e.match(r),t&&e))return(t=t[1]+t[2]+t[3]+(t[4]||""))>(e=e[1]+e[2]+e[3]+(e[4]||""))?1:t<e?-1:t===e?0:void 0}t.exports=function(t){var e="format"+t;return function r(n){return r.definition={type:"string",inline:i("JZwM"),statements:!0,errors:"full",dependencies:["format"],metaSchema:{anyOf:[{type:"string"},s]}},n.addKeyword(e,r.definition),n.addKeyword("formatExclusive"+t,{dependencies:["format"+t],metaSchema:{anyOf:[{type:"boolean"},s]}}),function(t){var e=t._formats;for(var i in o){var r=e[i];("object"!=typeof r||r instanceof RegExp||!r.validate)&&(r=e[i]={validate:r}),r.compare||(r.compare=o[i])}}(n),n}}},"9DG0":function(t,e,i){t.exports=n;var r=i("vzCy").EventEmitter;function n(){r.call(this)}i("LC74")(n,r),n.Readable=i("cSWu"),n.Writable=i("87vf"),n.Duplex=i("SDM6"),n.Transform=i("4/4u"),n.PassThrough=i("/MLu"),n.Stream=n,n.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",o),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){i.removeListener("data",n),t.removeListener("drain",o),i.removeListener("end",a),i.removeListener("close",u),i.removeListener("error",h),t.removeListener("error",h),i.removeListener("end",l),i.removeListener("close",l),t.removeListener("close",l)}return i.on("error",h),t.on("error",h),i.on("end",l),i.on("close",l),t.on("close",l),t.emit("pipe",i),t}},"9MlZ":function(t,e,i){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(var r in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},"9P96":function(t,e,i){e.publicEncrypt=i("9hYg"),e.privateDecrypt=i("fxuI"),e.privateEncrypt=function(t,i){return e.publicEncrypt(t,i,!0)},e.publicDecrypt=function(t,i){return e.privateDecrypt(t,i,!0)}},"9RdJ":function(t,e,i){"use strict";t.exports=Function.prototype.apply},"9bI3":function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},"9hYg":function(t,e,i){var r=i("jkjm"),n=i("rOku"),o=i("BVsN"),s=i("Cua8"),a=i("zOO0"),u=i("2Ejg"),h=i("5QAX"),l=i("jSRM"),c=i("X3l8").Buffer;t.exports=function(t,e,i){var f;f=t.padding?t.padding:i?1:4;var A,p=r(t);if(4===f)A=function(t,e){var i=t.modulus.byteLength(),r=e.length,h=o("sha1").update(c.alloc(0)).digest(),l=h.length,f=2*l;if(r>i-f-2)throw new Error("message too long");var A=c.alloc(i-r-f-2),p=i-l-1,d=n(l),m=a(c.concat([h,A,c.alloc(1,1),e],p),s(d,p)),y=a(d,s(m,l));return new u(c.concat([c.alloc(1),y,m],i))}(p,e);else if(1===f)A=function(t,e,i){var r,o=e.length,s=t.modulus.byteLength();if(o>s-11)throw new Error("message too long");r=i?c.alloc(s-o-3,255):function(t){var e,i=c.allocUnsafe(t),r=0,o=n(2*t),s=0;for(;r<t;)s===o.length&&(o=n(2*t),s=0),(e=o[s++])&&(i[r++]=e);return i}(s-o-3);return new u(c.concat([c.from([0,i?1:2]),r,c.alloc(1),e],s))}(p,e,i);else{if(3!==f)throw new Error("unknown padding");if((A=new u(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return i?l(A,p):h(A,p)}},"ARY+":function(t,e,i){"use strict";var r=i("LC74"),n=i("YQyn"),o=i("z+8S"),s=i("X3l8").Buffer,a=i("EXeW"),u=i("LYGd"),h=i("JaR3"),l=s.alloc(128);function c(t,e){o.call(this,"digest"),"string"==typeof e&&(e=s.from(e));var i="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>i)?e=("rmd160"===t?new u:h(t)).update(e).digest():e.length<i&&(e=s.concat([e,l],i));for(var r=this._ipad=s.allocUnsafe(i),n=this._opad=s.allocUnsafe(i),a=0;a<i;a++)r[a]=54^e[a],n[a]=92^e[a];this._hash="rmd160"===t?new u:h(t),this._hash.update(r)}r(c,o),c.prototype._update=function(t){this._hash.update(t)},c.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:h(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new c("rmd160",e):"md5"===t?new n(a,e):new c(t,e)}},AWjC:function(t,e,i){"use strict";var r=i("08Lv");function n(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==t.padding}t.exports=n,n.prototype._init=function(){},n.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},n.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<i;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=i,i},n.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(t){var e=0,i=0,r=(this.bufferOff+t.length)/this.blockSize|0,n=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(n,i)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,n,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return n},n.prototype._updateDecrypt=function(t){for(var e=0,i=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,n=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),i+=this._flushBuffer(n,i);return e+=this._buffer(t,e),n},n.prototype.final=function(t){var e,i;return t&&(e=this.update(t)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(i):i},n.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},n.prototype._unpad=function(t){return t},n.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},Atvd:function(t,e,i){"use strict";var r=i("ow1b"),n=function(){return!!r};n.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=n},B6Bn:function(t,e,i){"use strict";var r=i("YP8Q"),n=i("TkWM"),o=n.getNAF,s=n.getJSF,a=n.assert;function u(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){a(t.precomputed);var i=t._getDoubles(),r=o(e,1,this._bitLength),n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;var s,u,h=[];for(s=0;s<r.length;s+=i.step){u=0;for(var l=s+i.step-1;l>=s;l--)u=(u<<1)+r[l];h.push(u)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),A=n;A>0;A--){for(s=0;s<h.length;s++)(u=h[s])===A?f=f.mixedAdd(i.points[s]):u===-A&&(f=f.mixedAdd(i.points[s].neg()));c=c.add(f)}return c.toP()},u.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var n=r.points,s=o(e,i,this._bitLength),u=this.jpoint(null,null,null),h=s.length-1;h>=0;h--){for(var l=0;h>=0&&0===s[h];h--)l++;if(h>=0&&l++,u=u.dblp(l),h<0)break;var c=s[h];a(0!==c),u="affine"===t.type?c>0?u.mixedAdd(n[c-1>>1]):u.mixedAdd(n[-c-1>>1].neg()):c>0?u.add(n[c-1>>1]):u.add(n[-c-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,i,r,n){var a,u,h,l=this._wnafT1,c=this._wnafT2,f=this._wnafT3,A=0;for(a=0;a<r;a++){var p=(h=e[a])._getNAFPoints(t);l[a]=p.wnd,c[a]=p.points}for(a=r-1;a>=1;a-=2){var d=a-1,m=a;if(1===l[d]&&1===l[m]){var y=[e[d],null,null,e[m]];0===e[d].y.cmp(e[m].y)?(y[1]=e[d].add(e[m]),y[2]=e[d].toJ().mixedAdd(e[m].neg())):0===e[d].y.cmp(e[m].y.redNeg())?(y[1]=e[d].toJ().mixedAdd(e[m]),y[2]=e[d].add(e[m].neg())):(y[1]=e[d].toJ().mixedAdd(e[m]),y[2]=e[d].toJ().mixedAdd(e[m].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=s(i[d],i[m]);for(A=Math.max(v[0].length,A),f[d]=new Array(A),f[m]=new Array(A),u=0;u<A;u++){var b=0|v[0][u],w=0|v[1][u];f[d][u]=g[3*(b+1)+(w+1)],f[m][u]=0,c[d]=y}}else f[d]=o(i[d],l[d],this._bitLength),f[m]=o(i[m],l[m],this._bitLength),A=Math.max(f[d].length,A),A=Math.max(f[m].length,A)}var x=this.jpoint(null,null,null),M=this._wnafT4;for(a=A;a>=0;a--){for(var _=0;a>=0;){var S=!0;for(u=0;u<r;u++)M[u]=0|f[u][a],0!==M[u]&&(S=!1);if(!S)break;_++,a--}if(a>=0&&_++,x=x.dblp(_),a<0)break;for(u=0;u<r;u++){var B=M[u];0!==B&&(B>0?h=c[u][B-1>>1]:B<0&&(h=c[u][-B-1>>1].neg()),x="affine"===h.type?x.mixedAdd(h):x.add(h))}}for(a=0;a<r;a++)c[a]=null;return n?x:x.toP()},u.BasePoint=h,h.prototype.eq=function(){throw new Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=n.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},h.prototype.encodeCompressed=function(t){return this.encode(t,!0)},h.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},h.prototype.encode=function(t,e){return n.encode(this._encode(e),t)},h.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},h.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},h.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,n=0;n<e;n+=t){for(var o=0;o<t;o++)r=r.dbl();i.push(r)}return{step:t,points:i}},h.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),n=1;n<i;n++)e[n]=e[n-1].add(r);return{wnd:t,points:e}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e}},BCiZ:function(t,e,i){var r={ECB:i("U6yG"),CBC:i("lUSU"),CFB:i("8qoP"),CFB8:i("Z7yx"),CFB1:i("k2Sm"),OFB:i("H1q7"),CTR:i("SsjP"),GCM:i("SsjP")},n=i("6ZSt");for(var o in n)n[o].module=r[n[o].mode];t.exports=n},BEbT:function(t,e,i){var r=i("X3l8").Buffer;function n(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,i=new Array(e),n=0;n<e;n++)i[n]=t.readUInt32BE(4*n);return i}function o(t){for(;0<t.length;t++)t[0]=0}function s(t,e,i,r,n){for(var o,s,a,u,h=i[0],l=i[1],c=i[2],f=i[3],A=t[0]^e[0],p=t[1]^e[1],d=t[2]^e[2],m=t[3]^e[3],y=4,g=1;g<n;g++)o=h[A>>>24]^l[p>>>16&255]^c[d>>>8&255]^f[255&m]^e[y++],s=h[p>>>24]^l[d>>>16&255]^c[m>>>8&255]^f[255&A]^e[y++],a=h[d>>>24]^l[m>>>16&255]^c[A>>>8&255]^f[255&p]^e[y++],u=h[m>>>24]^l[A>>>16&255]^c[p>>>8&255]^f[255&d]^e[y++],A=o,p=s,d=a,m=u;return o=(r[A>>>24]<<24|r[p>>>16&255]<<16|r[d>>>8&255]<<8|r[255&m])^e[y++],s=(r[p>>>24]<<24|r[d>>>16&255]<<16|r[m>>>8&255]<<8|r[255&A])^e[y++],a=(r[d>>>24]<<24|r[m>>>16&255]<<16|r[A>>>8&255]<<8|r[255&p])^e[y++],u=(r[m>>>24]<<24|r[A>>>16&255]<<16|r[p>>>8&255]<<8|r[255&d])^e[y++],[o>>>=0,s>>>=0,a>>>=0,u>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var i=[],r=[],n=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,u=0;u<256;++u){var h=a^a<<1^a<<2^a<<3^a<<4;h=h>>>8^255&h^99,i[s]=h,r[h]=s;var l=t[s],c=t[l],f=t[c],A=257*t[h]^16843008*h;n[0][s]=A<<24|A>>>8,n[1][s]=A<<16|A>>>16,n[2][s]=A<<8|A>>>24,n[3][s]=A,A=16843009*f^65537*c^257*l^16843008*s,o[0][h]=A<<24|A>>>8,o[1][h]=A<<16|A>>>16,o[2][h]=A<<8|A>>>24,o[3][h]=A,0===s?s=a=1:(s=l^t[t[t[f^l]]],a^=t[t[a]])}return{SBOX:i,INV_SBOX:r,SUB_MIX:n,INV_SUB_MIX:o}}();function h(t){this._key=n(t),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,r=4*(i+1),n=[],o=0;o<e;o++)n[o]=t[o];for(o=e;o<r;o++){var s=n[o-1];o%e==0?(s=s<<8|s>>>24,s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s],s^=a[o/e|0]<<24):e>6&&o%e==4&&(s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s]),n[o]=n[o-e]^s}for(var h=[],l=0;l<r;l++){var c=r-l,f=n[c-(l%4?0:4)];h[l]=l<4||c<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=i,this._keySchedule=n,this._invKeySchedule=h},h.prototype.encryptBlockRaw=function(t){return s(t=n(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},h.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=r.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},h.prototype.decryptBlock=function(t){var e=(t=n(t))[1];t[1]=t[3],t[3]=e;var i=s(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=r.allocUnsafe(16);return o.writeUInt32BE(i[0],0),o.writeUInt32BE(i[3],4),o.writeUInt32BE(i[2],8),o.writeUInt32BE(i[1],12),o},h.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=h},BO8W:function(t,e,i){"use strict";e.utils=i("iNQt"),e.Cipher=i("AWjC"),e.DES=i("Icsf"),e.CBC=i("nyV4"),e.EDE=i("YePo")},BVsN:function(t,e,i){"use strict";var r=i("LC74"),n=i("eCz2"),o=i("LYGd"),s=i("JaR3"),a=i("z+8S");function u(t){a.call(this,"digest"),this._hash=t}r(u,a),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new n:"rmd160"===t||"ripemd160"===t?new o:new u(s(t))}},ByXT:function(t,e,i){t.exports=i.p+"static/img/user2.b089880.png"},C015:function(t,e,i){"use strict";var r=i("LC74"),n=i("CzQx"),o=i("X3l8").Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,n.call(this,128,112)}function h(t,e,i){return i^t&(e^i)}function l(t,e,i){return t&e|i&(t|e)}function c(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function A(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function d(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function y(t,e){return t>>>0<e>>>0?1:0}r(u,n),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,i=0|this._ah,r=0|this._bh,n=0|this._ch,o=0|this._dh,a=0|this._eh,u=0|this._fh,g=0|this._gh,v=0|this._hh,b=0|this._al,w=0|this._bl,x=0|this._cl,M=0|this._dl,_=0|this._el,S=0|this._fl,B=0|this._gl,E=0|this._hl,C=0;C<32;C+=2)e[C]=t.readInt32BE(4*C),e[C+1]=t.readInt32BE(4*C+4);for(;C<160;C+=2){var T=e[C-30],F=e[C-30+1],P=A(T,F),O=p(F,T),D=d(T=e[C-4],F=e[C-4+1]),R=m(F,T),I=e[C-14],U=e[C-14+1],L=e[C-32],k=e[C-32+1],j=O+U|0,Q=P+I+y(j,O)|0;Q=(Q=Q+D+y(j=j+R|0,R)|0)+L+y(j=j+k|0,k)|0,e[C]=Q,e[C+1]=j}for(var N=0;N<160;N+=2){Q=e[N],j=e[N+1];var z=l(i,r,n),H=l(b,w,x),V=c(i,b),G=c(b,i),K=f(a,_),Y=f(_,a),X=s[N],W=s[N+1],q=h(a,u,g),Z=h(_,S,B),J=E+Y|0,$=v+K+y(J,E)|0;$=($=($=$+q+y(J=J+Z|0,Z)|0)+X+y(J=J+W|0,W)|0)+Q+y(J=J+j|0,j)|0;var tt=G+H|0,et=V+z+y(tt,G)|0;v=g,E=B,g=u,B=S,u=a,S=_,a=o+$+y(_=M+J|0,M)|0,o=n,M=x,n=r,x=w,r=i,w=b,i=$+et+y(b=J+tt|0,J)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+M|0,this._el=this._el+_|0,this._fl=this._fl+S|0,this._gl=this._gl+B|0,this._hl=this._hl+E|0,this._ah=this._ah+i+y(this._al,b)|0,this._bh=this._bh+r+y(this._bl,w)|0,this._ch=this._ch+n+y(this._cl,x)|0,this._dh=this._dh+o+y(this._dl,M)|0,this._eh=this._eh+a+y(this._el,_)|0,this._fh=this._fh+u+y(this._fl,S)|0,this._gh=this._gh+g+y(this._gl,B)|0,this._hh=this._hh+v+y(this._hl,E)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},C1C2:function(t,e,i){var r=i("TnCn");e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r._reverse(e.tag)},C6Sy:function(t,e,i){"use strict";(function(e){var r=i("Pyiu"),n=i("nbHd"),o=i("WER7"),s=i("/Nss"),a=i("kCPa"),u=i("dDmH"),h=s("Object.prototype.toString"),l=i("dE4w")(),c="undefined"==typeof globalThis?e:globalThis,f=n(),A=s("String.prototype.slice"),p=s("Array.prototype.indexOf",!0)||function(t,e){for(var i=0;i<t.length;i+=1)if(t[i]===e)return i;return-1},d={__proto__:null};r(f,l&&a&&u?function(t){var e=new c[t];if(Symbol.toStringTag in e&&u){var i=u(e),r=a(i,Symbol.toStringTag);if(!r&&i){var n=u(i);r=a(n,Symbol.toStringTag)}d["$"+t]=o(r.get)}}:function(t){var e=new c[t],i=e.slice||e.set;i&&(d["$"+t]=o(i))});t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!l){var e=A(h(t),8,-1);return p(f,e)>-1?e:"Object"===e&&function(t){var e=!1;return r(d,function(i,r){if(!e)try{i(t),e=A(r,1)}catch(t){}}),e}(t)}return a?function(t){var e=!1;return r(d,function(i,r){if(!e)try{"$"+i(t)===r&&(e=A(r,1))}catch(t){}}),e}(t):null}}).call(e,i("DuR2"))},CKAI:function(t,e,i){"use strict";var r=i("1lLf"),n=i("YSDb"),o=r.rotl32,s=r.sum32,a=r.sum32_3,u=r.sum32_4,h=n.BlockHash;function l(){if(!(this instanceof l))return new l;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function A(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(l,h),e.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],h=this.h[3],l=this.h[4],g=i,v=r,b=n,w=h,x=l,M=0;M<80;M++){var _=s(o(u(i,c(M,r,n,h),t[p[M]+e],f(M)),m[M]),l);i=l,l=h,h=o(n,10),n=r,r=_,_=s(o(u(g,c(79-M,v,b,w),t[d[M]+e],A(M)),y[M]),x),g=x,x=w,w=o(b,10),b=v,v=_}_=a(this.h[1],n,w),this.h[1]=a(this.h[2],h,x),this.h[2]=a(this.h[3],l,g),this.h[3]=a(this.h[4],i,v),this.h[4]=a(this.h[0],r,b),this.h[0]=_},l.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},CWVY:function(t,e,i){"use strict";t.exports=URIError},Cgw8:function(t,e,i){var r=i("X3l8").Buffer,n=i("eCz2");t.exports=function(t,e,i,o){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&(r.isBuffer(e)||(e=r.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=i/8,a=r.alloc(s),u=r.alloc(o||0),h=r.alloc(0);s>0||o>0;){var l=new n;l.update(h),l.update(t),e&&l.update(e),h=l.digest();var c=0;if(s>0){var f=a.length-s;c=Math.min(s,h.length),h.copy(a,f,0,c),s-=c}if(c<h.length&&o>0){var A=u.length-o,p=Math.min(o,h.length-c);h.copy(u,A,c,c+p),o-=p}}return h.fill(0),{key:a,iv:u}}},Cua8:function(t,e,i){var r=i("BVsN"),n=i("X3l8").Buffer;function o(t){var e=n.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var i,s=n.alloc(0),a=0;s.length<e;)i=o(a++),s=n.concat([s,r("sha1").update(t).update(i).digest()]);return s.slice(0,e)}},CzQx:function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("WTF8");function o(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}o.prototype.update=function(t,e){t=n(t,e||"utf8");for(var i=this._block,r=this._blockSize,o=t.length,s=this._len,a=0;a<o;){for(var u=s%r,h=Math.min(o-a,r-u),l=0;l<h;l++)i[u+l]=t[a+l];a+=h,(s+=h)%r==0&&this._update(i)}return this._len+=o,this},o.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var r=(4294967295&i)>>>0,n=(i-r)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=o},D1Va:function(t,e,i){"use strict";t.exports=o;var r=i("DsFX"),n=Object.create(i("jOgh"));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){a(t,e,i)}):a(this,null,null)}function a(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=i("LC74"),n.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;r.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},DFwl:function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=" ",o=t.level,s=t.dataLevel,a=t.schema[e],u=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(s||""),f=t.opts.$data&&a&&a.$data;if(f?(n+=" var schema"+o+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",r="schema"+o):r=a,!f&&"number"!=typeof a)throw new Error(e+" must be number");var A="maxLength"==e?">":"<";n+="if ( ",f&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),!1===t.opts.unicode?n+=" "+c+".length ":n+=" ucs2length("+c+") ",n+=" "+A+" "+r+") { ";var p=e,d=d||[];d.push(n),n="",!1!==t.createErrors?(n+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { limit: "+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==e?"longer":"shorter",n+=" than ",n+=f?"' + "+r+" + '":""+a,n+=" characters' "),t.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+u:""+a,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var m=n;return n=d.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},DeUQ:function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=" ",o=t.level,s=t.dataLevel,a=t.schema[e],u=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(s||""),f=t.opts.$data&&a&&a.$data;if(f?(n+=" var schema"+o+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",r="schema"+o):r=a,!f&&"number"!=typeof a)throw new Error(e+" must be number");n+="if ( ",f&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" "+c+".length "+("maxItems"==e?">":"<")+" "+r+") { ";var A=e,p=p||[];p.push(n),n="",!1!==t.createErrors?(n+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { limit: "+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==e?"more":"fewer",n+=" than ",n+=f?"' + "+r+" + '":""+a,n+=" items' "),t.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+u:""+a,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var d=n;return n=p.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+d+"]); ":n+=" validate.errors = ["+d+"]; return false; ":n+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},DsFX:function(t,e,i){"use strict";var r=i("ypnx"),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=c;var o=Object.create(i("jOgh"));o.inherits=i("LC74");var s=i("Rt1F"),a=i("7dSG");o.inherits(c,s);for(var u=n(a.prototype),h=0;h<u.length;h++){var l=u[h];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(t){if(!(this instanceof c))return new c(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(A,this)}function A(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),c.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},EApQ:function(t,e,i){var r;r=function(){return e=[function(t,e,i){"use strict";(function(t){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return"symbol"===i(t=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==i(r=r.call(t,e)))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(n.key),n)}}var n=null,o=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var i,o,s;function a(){return s.apply(this,arguments)}return i=e,null,(o=[{key:"global",value:(s=function(){if("undefined"!=typeof self&&null!==self&&0!==Object.keys(self).length)return self;if("undefined"!=typeof window&&null!==window&&0!==Object.keys(window).length)return window;if(null!=t&&0!==Object.keys(t).length)return t;var e;if("undefined"!=typeof my)return n||(e=my.getAppIdSync(),n={location:{host:e.appId+".hybrid.alipay-eco.com"}}),n;throw new Error("unable to locate global object")},a.toString=function(){return s.toString()},a)}])&&r(i,o),Object.defineProperty(i,"prototype",{writable:!1}),e}();e.a=o}).call(this,i(1))},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e);for(var r={},n=(i.r(r),i.d(r,"ShadowMaterial",function(){return pl}),i.d(r,"SpriteMaterial",function(){return dl}),i.d(r,"RawShaderMaterial",function(){return Ml}),i.d(r,"ShaderMaterial",function(){return xl}),i.d(r,"PointsMaterial",function(){return _l}),i.d(r,"MeshPhysicalMaterial",function(){return Bl}),i.d(r,"MeshStandardMaterial",function(){return Sl}),i.d(r,"MeshPhongMaterial",function(){return El}),i.d(r,"MeshToonMaterial",function(){return Cl}),i.d(r,"MeshNormalMaterial",function(){return Tl}),i.d(r,"MeshLambertMaterial",function(){return Fl}),i.d(r,"MeshDepthMaterial",function(){return Pl}),i.d(r,"MeshDistanceMaterial",function(){return Ol}),i.d(r,"MeshBasicMaterial",function(){return $t}),i.d(r,"MeshMatcapMaterial",function(){return Dl}),i.d(r,"LineDashedMaterial",function(){return Il}),i.d(r,"LineBasicMaterial",function(){return Rl}),i.d(r,"Material",function(){return Jt}),[]),o=0;o<256;o++)n[o]=(o<16?"0":"")+o.toString(16);var s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(n[255&t]+n[t>>8&255]+n[t>>16&255]+n[t>>24&255]+"-"+n[255&e]+n[e>>8&255]+"-"+n[e>>16&15|64]+n[e>>24&255]+"-"+n[63&i|128]+n[i>>8&255]+"-"+n[i>>16&255]+n[i>>24&255]+n[255&r]+n[r>>8&255]+n[r>>16&255]+n[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var o=Math.cos,s=Math.sin,a=o(i/2),u=(i=s(i/2),o((e+r)/2)),h=s((e+r)/2),l=o((e-r)/2),c=s((e-r)/2);o=o((r-e)/2),s=s((r-e)/2);"XYX"===n?t.set(a*h,i*l,i*c,a*u):"YZY"===n?t.set(i*c,a*h,i*l,a*u):"ZXZ"===n?t.set(i*l,i*c,a*h,a*u):"XZX"===n?t.set(a*h,i*s,i*o,a*u):"YXY"===n?t.set(i*o,a*h,i*s,a*u):"ZYZ"===n&&t.set(i*s,i*o,a*h,a*u)}};function a(t,e,i,r){this.u=t||0,this.v=e||0,this.j=i||0,this.M=void 0!==r?r:1}Object.assign(a,{slerp:function(t,e,i,r){return i.copy(t).slerp(e,r)},slerpFlat:function(t,e,i,r,n,o,s){var a,u,h,l=i[r+0],c=i[r+1],f=i[r+2],A=(i=i[r+3],r=n[o+0],n[o+1]),p=n[o+2];i===(n=n[o+3])&&l===r&&c===A&&f===p||(o=1-s,a=0<=(u=l*r+c*A+f*p+i*n)?1:-1,(h=1-u*u)>Number.EPSILON&&(h=Math.sqrt(h),u=Math.atan2(h,u*a),o=Math.sin(o*u)/h,s=Math.sin(s*u)/h),l=l*o+r*(u=s*a),c=c*o+A*u,f=f*o+p*u,i=i*o+n*u,o===1-s&&(l*=h=1/Math.sqrt(l*l+c*c+f*f+i*i),c*=h,f*=h,i*=h)),t[e]=l,t[e+1]=c,t[e+2]=f,t[e+3]=i}}),Object.defineProperties(a.prototype,{x:{get:function(){return this.u},set:function(t){this.u=t,this.S()}},y:{get:function(){return this.v},set:function(t){this.v=t,this.S()}},z:{get:function(){return this.j},set:function(t){this.j=t,this.S()}},w:{get:function(){return this.M},set:function(t){this.M=t,this.S()}}}),Object.assign(a.prototype,{isQuaternion:!0,set:function(t,e,i,r){return this.u=t,this.v=e,this.j=i,this.M=r,this.S(),this},clone:function(){return new this.constructor(this.u,this.v,this.j,this.M)},copy:function(t){return this.u=t.x,this.v=t.y,this.j=t.z,this.M=t.w,this.S(),this},setFromEuler:function(t,e){var i,r,n,o,s,a,u;if(t&&t.isEuler)return s=t.u,a=t.v,i=t.j,t=t.order,o=Math.cos,u=Math.sin,r=o(s/2),n=o(a/2),o=o(i/2),s=u(s/2),a=u(a/2),u=u(i/2),"XYZ"===t?(this.u=s*n*o+r*a*u,this.v=r*a*o-s*n*u,this.j=r*n*u+s*a*o,this.M=r*n*o-s*a*u):"YXZ"===t?(this.u=s*n*o+r*a*u,this.v=r*a*o-s*n*u,this.j=r*n*u-s*a*o,this.M=r*n*o+s*a*u):"ZXY"===t?(this.u=s*n*o-r*a*u,this.v=r*a*o+s*n*u,this.j=r*n*u+s*a*o,this.M=r*n*o-s*a*u):"ZYX"===t?(this.u=s*n*o-r*a*u,this.v=r*a*o+s*n*u,this.j=r*n*u-s*a*o,this.M=r*n*o+s*a*u):"YZX"===t?(this.u=s*n*o+r*a*u,this.v=r*a*o+s*n*u,this.j=r*n*u-s*a*o,this.M=r*n*o-s*a*u):"XZY"===t&&(this.u=s*n*o-r*a*u,this.v=r*a*o-s*n*u,this.j=r*n*u+s*a*o,this.M=r*n*o+s*a*u),!1!==e&&this.S(),this;throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this.u=t.x*i,this.v=t.y*i,this.j=t.z*i,this.M=Math.cos(e),this.S(),this},setFromRotationMatrix:function(t){var e,i=(t=t.elements)[0],r=t[4],n=t[8],o=t[1],s=t[5],a=t[9],u=t[2],h=t[6],l=i+s+(t=t[10]);return 0<l?(e=.5/Math.sqrt(l+1),this.M=.25/e,this.u=(h-a)*e,this.v=(n-u)*e,this.j=(o-r)*e):s<i&&t<i?(e=2*Math.sqrt(1+i-s-t),this.M=(h-a)/e,this.u=.25*e,this.v=(r+o)/e,this.j=(n+u)/e):t<s?(e=2*Math.sqrt(1+s-i-t),this.M=(n-u)/e,this.u=(r+o)/e,this.v=.25*e,this.j=(a+h)/e):(e=2*Math.sqrt(1+t-i-s),this.M=(o-r)/e,this.u=(n+u)/e,this.v=(a+h)/e,this.j=.25*e),this.S(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.u=-t.y,this.v=t.x,this.j=0):(this.u=0,this.v=-t.z,this.j=t.y)):(this.u=t.y*e.z-t.z*e.y,this.v=t.z*e.x-t.x*e.z,this.j=t.x*e.y-t.y*e.x),this.M=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(s.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0!==i&&(e=Math.min(1,e/i),this.slerp(t,e)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this.u*=-1,this.v*=-1,this.j*=-1,this.S(),this},dot:function(t){return this.u*t.u+this.v*t.v+this.j*t.j+this.M*t.M},lengthSq:function(){return this.u*this.u+this.v*this.v+this.j*this.j+this.M*this.M},length:function(){return Math.sqrt(this.u*this.u+this.v*this.v+this.j*this.j+this.M*this.M)},normalize:function(){var t=this.length();return 0===t?(this.u=0,this.v=0,this.j=0,this.M=1):(this.u=this.u*(t=1/t),this.v=this.v*t,this.j=this.j*t,this.M=this.M*t),this.S(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t.u,r=t.v,n=t.j,o=(t=t.M,e.u),s=e.v,a=e.j;e=e.M;return this.u=i*e+t*o+r*a-n*s,this.v=r*e+t*s+n*o-i*a,this.j=n*e+t*a+i*s-r*o,this.M=t*e-i*o-r*s-n*a,this.S(),this},slerp:function(t,e){if(0!==e){if(1===e)return this.copy(t);var i,r=this.u,n=this.v,o=this.j,s=this.M,a=s*t.M+r*t.u+n*t.v+o*t.j;a<0?(this.M=-t.M,this.u=-t.u,this.v=-t.v,this.j=-t.j,a=-a):this.copy(t),1<=a?(this.M=s,this.u=r,this.v=n,this.j=o):((t=1-a*a)<=Number.EPSILON?(this.M=(i=1-e)*s+e*this.M,this.u=i*r+e*this.u,this.v=i*n+e*this.v,this.j=i*o+e*this.j,this.normalize()):(i=Math.sqrt(t),t=Math.atan2(i,a),a=Math.sin((1-e)*t)/i,e=Math.sin(e*t)/i,this.M=s*a+this.M*e,this.u=r*a+this.u*e,this.v=n*a+this.v*e,this.j=o*a+this.j*e),this.S())}return this},equals:function(t){return t.u===this.u&&t.v===this.v&&t.j===this.j&&t.M===this.M},fromArray:function(t,e){return this.u=t[e=void 0===e?0:e],this.v=t[e+1],this.j=t[e+2],this.M=t[e+3],this.S(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.u,t[e+1]=this.v,t[e+2]=this.j,t[e+3]=this.M,t},fromBufferAttribute:function(t,e){return this.u=t.getX(e),this.v=t.getY(e),this.j=t.getZ(e),this.M=t.getW(e),this},O:function(t){return this.S=t,this},S:function(){}});var u=new l,h=new a;function l(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}Object.assign(l.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler,this.applyQuaternion(h.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(h.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=1/((t=t.elements)[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,o=t.y,s=t.z,a=(t=t.w)*e+o*r-s*i,u=t*i+s*e-n*r,h=t*r+n*i-o*e;e=-n*e-o*i-s*r;return this.x=a*t+e*-n+u*-s-h*-o,this.y=u*t+e*-o+h*-n-a*-s,this.z=h*t+e*-s+a*-o-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,r=t.y,n=(t=t.z,e.x),o=e.y;e=e.z;return this.x=r*e-t*o,this.y=t*n-i*e,this.z=i*o-r*n,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return u.copy(this).projectOnVector(t),this.sub(u)},reflect:function(t){return this.sub(u.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(s.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var c=new l,f=new g,A=new l(0,0,0),p=new l(1,1,1),d=new l,m=new l,y=new l;function g(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length}function v(){}Object.assign(g.prototype,{isMatrix4:!0,set:function(t,e,i,r,n,o,s,a,u,h,l,c,f,A,p,d){var m=this.elements;return m[0]=t,m[4]=e,m[8]=i,m[12]=r,m[1]=n,m[5]=o,m[9]=s,m[13]=a,m[2]=u,m[6]=h,m[10]=l,m[14]=c,m[3]=f,m[7]=A,m[11]=p,m[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new g).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,i=t.elements,r=1/c.setFromMatrixColumn(t,0).length(),n=1/c.setFromMatrixColumn(t,1).length();t=1/c.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler;var e,i,r,n,o,s,a,u,h,l,c,f,A=this.elements,p=t.x,d=t.y,m=t.z,y=Math.cos(p),g=(p=Math.sin(p),Math.cos(d)),v=(d=Math.sin(d),Math.cos(m));m=Math.sin(m);return"XYZ"===t.order?(o=y*v,s=y*m,a=p*v,u=p*m,A[0]=g*v,A[4]=-g*m,A[8]=d,A[1]=s+a*d,A[5]=o-u*d,A[9]=-p*g,A[2]=u-o*d,A[6]=a+s*d,A[10]=y*g):"YXZ"===t.order?(i=g*m,r=d*v,A[0]=(e=g*v)+(n=d*m)*p,A[4]=r*p-i,A[8]=y*d,A[1]=y*m,A[5]=y*v,A[9]=-p,A[2]=i*p-r,A[6]=n+e*p,A[10]=y*g):"ZXY"===t.order?(i=g*m,r=d*v,A[0]=(e=g*v)-(n=d*m)*p,A[4]=-y*m,A[8]=r+i*p,A[1]=i+r*p,A[5]=y*v,A[9]=n-e*p,A[2]=-y*d,A[6]=p,A[10]=y*g):"ZYX"===t.order?(o=y*v,s=y*m,a=p*v,u=p*m,A[0]=g*v,A[4]=a*d-s,A[8]=o*d+u,A[1]=g*m,A[5]=u*d+o,A[9]=s*d-a,A[2]=-d,A[6]=p*g,A[10]=y*g):"YZX"===t.order?(h=y*g,l=y*d,c=p*g,f=p*d,A[0]=g*v,A[4]=f-h*m,A[8]=c*m+l,A[1]=m,A[5]=y*v,A[9]=-p*v,A[2]=-d*v,A[6]=l*m+c,A[10]=h-f*m):"XZY"===t.order&&(h=y*g,l=y*d,c=p*g,f=p*d,A[0]=g*v,A[4]=-m,A[8]=d*v,A[1]=h*m+f,A[5]=y*v,A[9]=l*m-c,A[2]=c*m-l,A[6]=p*v,A[10]=f*m+h),A[3]=0,A[7]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(A,t,p)},lookAt:function(t,e,i){var r=this.elements;return y.subVectors(t,e),0===y.lengthSq()&&(y.z=1),y.normalize(),d.crossVectors(i,y),0===d.lengthSq()&&(1===Math.abs(i.z)?y.x+=1e-4:y.z+=1e-4,y.normalize(),d.crossVectors(i,y)),d.normalize(),m.crossVectors(y,d),r[0]=d.x,r[4]=m.x,r[8]=y.x,r[1]=d.y,r[5]=m.y,r[9]=y.y,r[2]=d.z,r[6]=m.z,r[10]=y.z,this},multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){t=t.elements,e=e.elements;var i=this.elements,r=t[0],n=t[4],o=t[8],s=t[12],a=t[1],u=t[5],h=t[9],l=t[13],c=t[2],f=t[6],A=t[10],p=t[14],d=t[3],m=t[7],y=t[11],g=(t=t[15],e[0]),v=e[4],b=e[8],w=e[12],x=e[1],M=e[5],_=e[9],S=e[13],B=e[2],E=e[6],C=e[10],T=e[14],F=e[3],P=e[7],O=e[11];e=e[15];return i[0]=r*g+n*x+o*B+s*F,i[4]=r*v+n*M+o*E+s*P,i[8]=r*b+n*_+o*C+s*O,i[12]=r*w+n*S+o*T+s*e,i[1]=a*g+u*x+h*B+l*F,i[5]=a*v+u*M+h*E+l*P,i[9]=a*b+u*_+h*C+l*O,i[13]=a*w+u*S+h*T+l*e,i[2]=c*g+f*x+A*B+p*F,i[6]=c*v+f*M+A*E+p*P,i[10]=c*b+f*_+A*C+p*O,i[14]=c*w+f*S+A*T+p*e,i[3]=d*g+m*x+y*B+t*F,i[7]=d*v+m*M+y*E+t*P,i[11]=d*b+m*_+y*C+t*O,i[15]=d*w+m*S+y*T+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],o=t[1],s=t[5],a=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+n*a*l-r*u*l-n*s*c+i*u*c+r*s*f-i*a*f)+t[7]*(+e*a*f-e*u*c+n*o*c-r*o*f+r*u*h-n*a*h)+t[11]*(+e*u*l-e*s*f-n*o*l+i*o*f+n*s*h-i*u*h)+t[15]*(-r*s*h-e*a*l+e*s*c+r*o*l-i*o*c+i*a*h)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this},getInverse:function(t,e){e=this.elements;var i=(t=t.elements)[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],h=t[7],l=t[8],c=t[9],f=t[10],A=t[11],p=t[12],d=t[13],m=t[14],y=c*m*h-d*f*h+d*u*A-a*m*A-c*u*(t=t[15])+a*f*t,g=p*f*h-l*m*h-p*u*A+s*m*A+l*u*t-s*f*t,v=l*d*h-p*c*h+p*a*A-s*d*A-l*a*t+s*c*t,b=p*c*u-l*d*u-p*a*f+s*d*f+l*a*m-s*c*m,w=i*y+r*g+n*v+o*b;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(e[0]=y*(y=1/w),e[1]=(d*f*o-c*m*o-d*n*A+r*m*A+c*n*t-r*f*t)*y,e[2]=(a*m*o-d*u*o+d*n*h-r*m*h-a*n*t+r*u*t)*y,e[3]=(c*u*o-a*f*o-c*n*h+r*f*h+a*n*A-r*u*A)*y,e[4]=g*y,e[5]=(l*m*o-p*f*o+p*n*A-i*m*A-l*n*t+i*f*t)*y,e[6]=(p*u*o-s*m*o-p*n*h+i*m*h+s*n*t-i*u*t)*y,e[7]=(s*f*o-l*u*o+l*n*h-i*f*h-s*n*A+i*u*A)*y,e[8]=v*y,e[9]=(p*c*o-l*d*o-p*r*A+i*d*A+l*r*t-i*c*t)*y,e[10]=(s*d*o-p*a*o+p*r*h-i*d*h-s*r*t+i*a*t)*y,e[11]=(l*a*o-s*c*o-l*r*h+i*c*h+s*r*A-i*a*A)*y,e[12]=b*y,e[13]=(l*d*n-p*c*n+p*r*f-i*d*f-l*r*m+i*c*m)*y,e[14]=(p*a*n-s*d*n-p*r*u+i*d*u+s*r*m-i*a*m)*y,e[15]=(s*c*n-l*a*n+l*r*u-i*c*u-s*r*f+i*a*f)*y,this)},invert:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8],l=t[9],c=t[10],f=t[11],A=t[12],p=t[13],d=t[14],m=t[15],y=l*d*u-p*c*u+p*a*f-s*d*f-l*a*m+s*c*m,g=A*c*u-h*d*u-A*a*f+o*d*f+h*a*m-o*c*m,v=h*p*u-A*l*u+A*s*f-o*p*f-h*s*m+o*l*m,b=A*l*a-h*p*a-A*s*c+o*p*c+h*s*d-o*l*d,w=e*y+i*g+r*v+n*b;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(t[0]=y*(y=1/w),t[1]=(p*c*n-l*d*n-p*r*f+i*d*f+l*r*m-i*c*m)*y,t[2]=(s*d*n-p*a*n+p*r*u-i*d*u-s*r*m+i*a*m)*y,t[3]=(l*a*n-s*c*n-l*r*u+i*c*u+s*r*f-i*a*f)*y,t[4]=g*y,t[5]=(h*d*n-A*c*n+A*r*f-e*d*f-h*r*m+e*c*m)*y,t[6]=(A*a*n-o*d*n-A*r*u+e*d*u+o*r*m-e*a*m)*y,t[7]=(o*c*n-h*a*n+h*r*u-e*c*u-o*r*f+e*a*f)*y,t[8]=v*y,t[9]=(A*l*n-h*p*n-A*i*f+e*p*f+h*i*m-e*l*m)*y,t[10]=(o*p*n-A*s*n+A*i*u-e*p*u-o*i*m+e*s*m)*y,t[11]=(h*s*n-o*l*n-h*i*u+e*l*u+o*i*f-e*s*f)*y,t[12]=b*y,t[13]=(h*p*r-A*l*r+A*i*c-e*p*c-h*i*d+e*l*d)*y,t[14]=(A*s*r-o*p*r-A*i*a+e*p*a+o*i*d-e*s*d)*y,t[15]=(o*l*r-h*s*r+h*i*a-e*l*a-o*i*c+e*s*c)*y,this)},scale:function(t){var e=this.elements,i=t.x,r=t.y;t=t.z;return e[0]*=i,e[4]*=r,e[8]*=t,e[1]*=i,e[5]*=r,e[9]*=t,e[2]*=i,e[6]*=r,e[10]*=t,e[3]*=i,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=(i=this.elements)[0]*i[0]+i[1]*i[1]+i[2]*i[2],e=i[4]*i[4]+i[5]*i[5]+i[6]*i[6],i=i[8]*i[8]+i[9]*i[9]+i[10]*i[10];return Math.sqrt(Math.max(t,e,i))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=(e=Math.sin(e),1-i),n=t.x,o=t.y,s=(t=t.z,r*n),a=r*o;return this.set(s*n+i,s*o-e*t,s*t+e*o,0,s*o+e*t,a*o+i,a*t-e*n,0,s*t-e*o,a*t+e*n,r*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var r=this.elements,n=e.u,o=e.v,s=e.j,a=(e=e.M,n*(l=n+n)),u=n*(c=o+o),h=(n=n*(f=s+s),o*c),l=(o=o*f,s=s*f,e*l),c=e*c,f=(e=e*f,i.x),A=i.y;i=i.z;return r[0]=(1-(h+s))*f,r[1]=(u+e)*f,r[2]=(n-c)*f,r[3]=0,r[4]=(u-e)*A,r[5]=(1-(a+s))*A,r[6]=(o+l)*A,r[7]=0,r[8]=(n+c)*i,r[9]=(o-l)*i,r[10]=(1-(a+h))*i,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,i){var r=this.elements,n=c.set(r[0],r[1],r[2]).length(),o=c.set(r[4],r[5],r[6]).length(),s=c.set(r[8],r[9],r[10]).length(),a=(t=(this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],f.copy(this),1/n),r=1/o,1/s);return f.elements[0]*=t,f.elements[1]*=t,f.elements[2]*=t,f.elements[4]*=r,f.elements[5]*=r,f.elements[6]*=r,f.elements[8]*=a,f.elements[9]*=a,f.elements[10]*=a,e.setFromRotationMatrix(f),i.x=n,i.y=o,i.z=s,this},makePerspective:function(t,e,i,r,n,o){var s=this.elements,a=2*n/(i-r),u=(e+t)/(e-t);i=(i+r)/(i-r),r=-(o+n)/(o-n),o=-2*o*n/(o-n);return s[0]=2*n/(e-t),s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=a,s[9]=i,s[13]=0,s[2]=0,s[6]=0,s[10]=r,s[14]=o,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,i,r,n,o){var s=this.elements,a=1/(e-t),u=1/(i-r),h=1/(o-n);e=(e+t)*a,t=(i+r)*u,i=(o+n)*h;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-e,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-t,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-i,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.assign(v.prototype,{addEventListener:function(t,e){void 0===this.k&&(this.k={});var i=this.k;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){var i;return void 0!==this.k&&void 0!==(i=this.k)[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){var i;void 0!==this.k&&void 0!==(t=this.k[t])&&-1!==(i=t.indexOf(e))&&t.splice(i,1)},dispatchEvent:function(t){if(void 0!==this.k){var e=this.k[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t)}}}});var b=new g,w=new a;function x(t,e,i,r){this.u=t||0,this.v=e||0,this.j=i||0,this.T=r||x.DefaultOrder}function M(){this.mask=1}function _(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length}x.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],x.DefaultOrder="XYZ",Object.defineProperties(x.prototype,{x:{get:function(){return this.u},set:function(t){this.u=t,this.S()}},y:{get:function(){return this.v},set:function(t){this.v=t,this.S()}},z:{get:function(){return this.j},set:function(t){this.j=t,this.S()}},order:{get:function(){return this.T},set:function(t){this.T=t,this.S()}}}),Object.assign(x.prototype,{isEuler:!0,set:function(t,e,i,r){return this.u=t,this.v=e,this.j=i,this.T=r||this.T,this.S(),this},clone:function(){return new this.constructor(this.u,this.v,this.j,this.T)},copy:function(t){return this.u=t.u,this.v=t.v,this.j=t.j,this.T=t.T,this.S(),this},setFromRotationMatrix:function(t,e,i){var r=s.clamp,n=(t=t.elements)[0],o=t[4],a=t[8],u=t[1],h=t[5],l=t[9],c=t[2],f=t[6];t=t[10];return"XYZ"===(e=e||this.T)?(this.v=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this.u=Math.atan2(-l,t),this.j=Math.atan2(-o,n)):(this.u=Math.atan2(f,h),this.j=0)):"YXZ"===e?(this.u=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this.v=Math.atan2(a,t),this.j=Math.atan2(u,h)):(this.v=Math.atan2(-c,n),this.j=0)):"ZXY"===e?(this.u=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this.v=Math.atan2(-c,t),this.j=Math.atan2(-o,h)):(this.v=0,this.j=Math.atan2(u,n))):"ZYX"===e?(this.v=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this.u=Math.atan2(f,t),this.j=Math.atan2(u,n)):(this.u=0,this.j=Math.atan2(-o,h))):"YZX"===e?(this.j=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this.u=Math.atan2(-l,h),this.v=Math.atan2(-c,n)):(this.u=0,this.v=Math.atan2(a,t))):"XZY"===e&&(this.j=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this.u=Math.atan2(f,h),this.v=Math.atan2(a,n)):(this.u=Math.atan2(-l,t),this.v=0)),this.T=e,!1!==i&&this.S(),this},setFromQuaternion:function(t,e,i){return b.makeRotationFromQuaternion(t),this.setFromRotationMatrix(b,e,i)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this.T)},reorder:function(t){return w.setFromEuler(this),this.setFromQuaternion(w,t)},equals:function(t){return t.u===this.u&&t.v===this.v&&t.j===this.j&&t.T===this.T},fromArray:function(t){return this.u=t[0],this.v=t[1],this.j=t[2],void 0!==t[3]&&(this.T=t[3]),this.S(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.u,t[e+1]=this.v,t[e+2]=this.j,t[e+3]=this.T,t},toVector3:function(t){return t?t.set(this.u,this.v,this.j):new l(this.u,this.v,this.j)},O:function(t){return this.S=t,this},S:function(){}}),Object.assign(M.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}}),Object.assign(_.prototype,{isMatrix3:!0,set:function(t,e,i,r,n,o,s,a,u){var h=this.elements;return h[0]=t,h[1]=r,h[2]=s,h[3]=e,h[4]=n,h[5]=a,h[6]=i,h[7]=o,h[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){t=t.elements,e=e.elements;var i=this.elements,r=t[0],n=t[3],o=t[6],s=t[1],a=t[4],u=t[7],h=t[2],l=t[5],c=(t=t[8],e[0]),f=e[3],A=e[6],p=e[1],d=e[4],m=e[7],y=e[2],g=e[5];e=e[8];return i[0]=r*c+n*p+o*y,i[3]=r*f+n*d+o*g,i[6]=r*A+n*m+o*e,i[1]=s*c+a*p+u*y,i[4]=s*f+a*d+u*g,i[7]=s*A+a*m+u*e,i[2]=h*c+l*p+t*y,i[5]=h*f+l*d+t*g,i[8]=h*A+l*m+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t,e=(t=this.elements)[0],i=t[1],r=t[2],n=t[3],o=t[4],s=t[5],a=t[6],u=t[7];return e*o*(t=t[8])-e*s*u-i*n*t+i*s*a+r*n*u-r*o*a},getInverse:function(t,e){e=t.elements,t=this.elements;var i=e[0],r=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6],h=e[7],l=(e=e[8])*s-a*h,c=a*u-e*o,f=h*o-s*u,A=i*l+r*c+n*f;return 0==A?this.set(0,0,0,0,0,0,0,0,0):(t[0]=l*(l=1/A),t[1]=(n*h-e*r)*l,t[2]=(a*r-n*s)*l,t[3]=c*l,t[4]=(e*i-n*u)*l,t[5]=(n*o-a*i)*l,t[6]=f*l,t[7]=(r*u-h*i)*l,t[8]=(s*i-r*o)*l,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,r,n,o,s){var a=Math.cos(n);n=Math.sin(n);this.set(i*a,i*n,-i*(a*o+n*s)+o+t,-r*n,r*a,-r*(-n*o+a*s)+s+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=(t=Math.sin(t),this.elements),r=i[0],n=i[3],o=i[6],s=i[1],a=i[4],u=i[7];return i[0]=e*r+t*s,i[3]=e*n+t*a,i[6]=e*o+t*u,i[1]=-t*r+e*s,i[4]=-t*n+e*a,i[7]=-t*o+e*u,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var S=0,B=new l,E=new a,C=new g,T=new l,F=new l,P=new l,O=new a,D=new l(1,0,0),R=new l(0,1,0),I=new l(0,0,1),U={type:"added"},L={type:"removed"};function k(){Object.defineProperty(this,"id",{value:S++}),this.uuid=s.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=k.DefaultUp.clone();var t=new l,e=new x,i=new a,r=new l(1,1,1);e.O(function(){i.setFromEuler(e,!1)}),i.O(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new g},normalMatrix:{value:new _}}),this.matrix=new g,this.matrixWorld=new g,this.matrixAutoUpdate=k.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new M,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function j(){k.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}k.DefaultUp=new l(0,1,0),k.DefaultMatrixAutoUpdate=!0,k.prototype=Object.assign(Object.create(v.prototype),{constructor:k,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return E.setFromAxisAngle(t,e),this.quaternion.multiply(E),this},rotateOnWorldAxis:function(t,e){return E.setFromAxisAngle(t,e),this.quaternion.premultiply(E),this},rotateX:function(t){return this.rotateOnAxis(D,t)},rotateY:function(t){return this.rotateOnAxis(R,t)},rotateZ:function(t){return this.rotateOnAxis(I,t)},translateOnAxis:function(t,e){return B.copy(t).applyQuaternion(this.quaternion),this.position.add(B.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(D,t)},translateY:function(t){return this.translateOnAxis(R,t)},translateZ:function(t){return this.translateOnAxis(I,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(C.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?T.copy(t):T.set(t,e,i),t=this.parent,this.updateWorldMatrix(!0,!1),F.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?C.lookAt(F,T,this.up):C.lookAt(T,F,this.up),this.quaternion.setFromRotationMatrix(C),t&&(C.extractRotation(t.matrixWorld),E.setFromRotationMatrix(C),this.quaternion.premultiply(E.inverse()))},add:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.add(arguments[e]);else t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(U));return this},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);else{var i=this.children.indexOf(t);-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(L))}return this},attach:function(t){return this.updateWorldMatrix(!0,!1),C.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),C.multiply(t.parent.matrixWorld)),t.applyMatrix4(C),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(t=new l),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(t=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(F,t,P),t},getWorldScale:function(t){return void 0===t&&(t=new l),this.updateMatrixWorld(!0),this.matrixWorld.decompose(F,O,t),t},getWorldDirection:function(t){void 0===t&&(t=new l),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,n=0,o=r.length;n<o;n++)r[n].updateWorldMatrix(!1,!0)},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}}),j.prototype=Object.assign(Object.create(k.prototype),{constructor:j,isScene:!0,copy:function(t,e){return k.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Q={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},N={h:0,s:0,l:0},z={h:0,s:0,l:0};function H(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function V(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function G(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function K(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Y(t,e,i){this.name="",this.color=new H(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}Object.assign(H.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){return t=s.euclideanModulo(t,1),e=s.clamp(e,0,1),i=s.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(this.r=V(e=2*i-(i=i<=.5?i*(1+e):i+e-i*e),i,t+1/3),this.g=V(e,i,t),this.b=V(e,i,t-1/3)),this},setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}if(u=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r,n,o,s=u[1],a=u[2];switch(s){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return r=parseFloat(i[1])/360,n=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,e(i[5]),this.setHSL(r,n,o)}}else if(u=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=(s=u[1]).length;if(3===u)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var e=Q[t];return void 0!==e&&this.setHex(e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return e=0<(e=void 0===e?2:e)?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=G(t.r),this.g=G(t.g),this.b=G(t.b),this},copyLinearToSRGB:function(t){return this.r=K(t.r),this.g=K(t.g),this.b=K(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,i=this.r,r=this.g,n=this.b,o=Math.max(i,r,n),s=Math.min(i,r,n),a=(s+o)/2;if(s===o)h=e=0;else{var u=o-s,h=a<=.5?u/(o+s):u/(2-o-s);switch(o){case i:e=(r-n)/u+(r<n?6:0);break;case r:e=(n-i)/u+2;break;case n:e=(i-r)/u+4}e/=6}return t.h=e,t.s=h,t.l=a,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(N),N.h+=t,N.s+=e,N.l+=i,this.setHSL(N.h,N.s,N.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(N),t.getHSL(z);t=s.lerp(N.h,z.h,e);var i=s.lerp(N.s,z.s,e);e=s.lerp(N.l,z.l,e);return this.setHSL(t,i,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}}),H.NAMES=Q,Object.assign(Y.prototype,{isFog:!0,clone:function(){return new Y(this.color,this.near,this.far)}});var X=[new l,new l,new l,new l,new l,new l,new l,new l],W=new l,q=new at,Z=new l,J=new l,$=new l,tt=new l,et=new l,it=new l,rt=new l,nt=new l,ot=new l,st=new l;function at(t,e){this.min=void 0!==t?t:new l(1/0,1/0,1/0),this.max=void 0!==e?e:new l(-1/0,-1/0,-1/0)}function ut(t,e,i,r,n){for(var o=0,s=t.length-3;o<=s;o+=3){st.fromArray(t,o);var a=n.x*Math.abs(st.x)+n.y*Math.abs(st.y)+n.z*Math.abs(st.z),u=e.dot(st),h=i.dot(st),l=r.dot(st);if(Math.max(-Math.max(u,h,l),Math.min(u,h,l))>a)return!1}return!0}function ht(t,e,i,r){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==r?r:1}function lt(t,e){this.x=t||0,this.y=e||0}Object.assign(at.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,s=-1/0,a=0,u=t.length;a<u;a+=3){var h=t[a],l=t[a+1],c=t[a+2];h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),o<l&&(o=l),s<c&&(s=c)}return this.min.set(e,i,r),this.max.set(n,o,s),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,s=-1/0,a=0,u=t.count;a<u;a++){var h=t.getX(a),l=t.getY(a),c=t.getZ(a);h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),o<l&&(o=l),s<c&&(s=c)}return this.min.set(e,i,r),this.max.set(n,o,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=W.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(t=new l),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new l),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);for(var e=t.geometry,i=(void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),q.copy(e.boundingBox),q.applyMatrix4(t.matrixWorld),this.union(q)),t.children),r=0,n=i.length;r<n;r++)this.expandByObject(i[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(e=new l),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,W),W.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,i=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x);return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(rt),nt.subVectors(this.max,rt),Z.subVectors(t.a,rt),J.subVectors(t.b,rt),$.subVectors(t.c,rt),tt.subVectors(J,Z),et.subVectors($,J),it.subVectors(Z,$),!!ut([0,-tt.z,tt.y,0,-et.z,et.y,0,-it.z,it.y,tt.z,0,-tt.x,et.z,0,-et.x,it.z,0,-it.x,-tt.y,tt.x,0,-et.y,et.x,0,-it.y,it.x,0],Z,J,$,nt))&&!!ut([1,0,0,0,1,0,0,0,1],Z,J,$,nt)&&(ot.crossVectors(tt,et),ut([ot.x,ot.y,ot.z],Z,J,$,nt))},clampPoint:function(t,e){return void 0===e&&(e=new l),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return W.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(W).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(X[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),X[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),X[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),X[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),X[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),X[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),X[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),X[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(X)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.defineProperties(ht.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(ht.prototype,{isVector4:!0,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r+t[12]*n,this.y=t[1]*e+t[5]*i+t[9]*r+t[13]*n,this.z=t[2]*e+t[6]*i+t[10]*r+t[14]*n,this.w=t[3]*e+t[7]*i+t[11]*r+t[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r,n,o,s,a,u,h,l,c=(t=t.elements)[0],f=t[4],A=t[8],p=t[1],d=t[5],m=t[9],y=t[2],g=t[6];t=t[10];return Math.abs(f-p)<.01&&Math.abs(A-y)<.01&&Math.abs(m-g)<.01?Math.abs(f+p)<.1&&Math.abs(A+y)<.1&&Math.abs(m+g)<.1&&Math.abs(c+d+t-3)<.1?this.set(1,0,0,0):(n=Math.PI,s=(t+1)/2,a=(f+p)/4,u=(A+y)/4,h=(m+g)/4,(o=(d+1)/2)<(l=(c+1)/2)&&s<l?r=l<.01?(e=0,i=.707106781):(i=a/(e=Math.sqrt(l)),u/e):s<o?r=o<.01?(i=0,e=.707106781):(e=a/(i=Math.sqrt(o)),h/i):s<.01?(i=e=.707106781,r=0):(e=u/(r=Math.sqrt(s)),i=h/r),this.set(e,i,r,n)):(l=Math.sqrt((g-m)*(g-m)+(A-y)*(A-y)+(p-f)*(p-f)),Math.abs(l)<.001&&(l=1),this.x=(g-m)/l,this.y=(A-y)/l,this.z=(p-f)/l,this.w=Math.acos((c+d+t-1)/2)),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Object.defineProperties(lt.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(lt.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),r=(e=Math.sin(e),this.x-t.x),n=this.y-t.y;return this.x=r*i-n*e+t.x,this.y=r*e+n*i+t.y,this}});var ct=0,ft=1,At=2,pt=1,dt=100,mt=204,yt=205,gt=3,vt=0,bt=1001,wt=1006,xt=2300,Mt=2301,_t=3200,St=0,Bt=7680,Et=519,Ct=new l;function Tt(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Ft(t,e,i){Tt.call(this,new Int8Array(t),e,i)}function Pt(t,e,i){Tt.call(this,new Uint8Array(t),e,i)}function Ot(t,e,i){Tt.call(this,new Uint8ClampedArray(t),e,i)}function Dt(t,e,i){Tt.call(this,new Int16Array(t),e,i)}function Rt(t,e,i){Tt.call(this,new Uint16Array(t),e,i)}function It(t,e,i){Tt.call(this,new Int32Array(t),e,i)}function Ut(t,e,i){Tt.call(this,new Uint32Array(t),e,i)}function Lt(t,e,i){Tt.call(this,new Float32Array(t),e,i)}function kt(t,e,i){Tt.call(this,new Float64Array(t),e,i)}Object.defineProperty(Tt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Tt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new H),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new lt),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new l),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var o=t[r];void 0===o&&(o=new ht),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},applyMatrix3:function(t){for(var e=0,i=this.count;e<i;e++)Ct.x=this.getX(e),Ct.y=this.getY(e),Ct.z=this.getZ(e),Ct.applyMatrix3(t),this.setXYZ(e,Ct.x,Ct.y,Ct.z);return this},applyMatrix4:function(t){for(var e=0,i=this.count;e<i;e++)Ct.x=this.getX(e),Ct.y=this.getY(e),Ct.z=this.getZ(e),Ct.applyMatrix4(t),this.setXYZ(e,Ct.x,Ct.y,Ct.z);return this},applyNormalMatrix:function(t){for(var e=0,i=this.count;e<i;e++)Ct.x=this.getX(e),Ct.y=this.getY(e),Ct.z=this.getZ(e),Ct.applyNormalMatrix(t),this.setXYZ(e,Ct.x,Ct.y,Ct.z);return this},transformDirection:function(t){for(var e=0,i=this.count;e<i;e++)Ct.x=this.getX(e),Ct.y=this.getY(e),Ct.z=this.getZ(e),Ct.transformDirection(t),this.setXYZ(e,Ct.x,Ct.y,Ct.z);return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(Ft.prototype=Object.create(Tt.prototype)).constructor=Ft,(Pt.prototype=Object.create(Tt.prototype)).constructor=Pt,(Ot.prototype=Object.create(Tt.prototype)).constructor=Ot,(Dt.prototype=Object.create(Tt.prototype)).constructor=Dt,Rt.prototype=Object.create(Tt.prototype),Rt.prototype.constructor=Rt,(It.prototype=Object.create(Tt.prototype)).constructor=It,Ut.prototype=Object.create(Tt.prototype),Ut.prototype.constructor=Ut,(Lt.prototype=Object.create(Tt.prototype)).constructor=Lt,(kt.prototype=Object.create(Tt.prototype)).constructor=kt;var jt=new at;function Qt(t,e){this.center=void 0!==t?t:new l,this.radius=void 0!==e?e:0}function Nt(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(Qt.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){for(var i=this.center,r=(void 0!==e?i.copy(e):jt.setFromPoints(t).getCenter(i),0),n=0,o=t.length;n<o;n++)r=Math.max(r,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(e=new l),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(t=new at),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(Nt.prototype,{computeGroups:function(t){for(var e,i=[],r=void 0,n=t.faces,o=0;o<n.length;o++){var s=n[o];s.materialIndex!==r&&(r=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,i.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e=t.faces,i=t.vertices,r=t.faceVertexUvs,n=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,a=s.length;if(0<a){for(var u=[],h=0;h<a;h++)u[h]={name:s[h].name,data:[]};this.morphTargets.position=u}var l=t.morphNormals,c=l.length;if(0<c){var f=[];for(h=0;h<c;h++)f[h]={name:l[h].name,data:[]};this.morphTargets.normal=f}var A=t.skinIndices,p=t.skinWeights,d=A.length===i.length,m=p.length===i.length;for(0<i.length&&e.length,h=0;h<e.length;h++){var y,g,v=e[h];3===(g=(3===(g=(this.vertices.push(i[v.a],i[v.b],i[v.c]),v.vertexNormals)).length?this.normals.push(g[0],g[1],g[2]):(g=v.normal,this.normals.push(g,g,g)),v.vertexColors)).length?this.colors.push(g[0],g[1],g[2]):(g=v.color,this.colors.push(g,g,g)),!0===n&&(void 0!==(y=r[0][h])?this.uvs.push(y[0],y[1],y[2]):this.uvs.push(new lt,new lt,new lt)),!0===o&&(void 0!==(y=r[1][h])?this.uvs2.push(y[0],y[1],y[2]):this.uvs2.push(new lt,new lt,new lt));for(var b=0;b<a;b++){var w=s[b].vertices;u[b].data.push(w[v.a],w[v.b],w[v.c])}for(b=0;b<c;b++){var x=l[b].vertexNormals[h];f[b].data.push(x.a,x.b,x.c)}d&&this.skinIndices.push(A[v.a],A[v.b],A[v.c]),m&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var zt=1,Ht=new g,Vt=new k,Gt=new l,Kt=new at,Yt=new at,Xt=new l;function Wt(){Object.defineProperty(this,"id",{value:zt+=2}),this.uuid=s.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function qt(t,e,i,r){Wt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};for(var n=(t=t||1)/2,o=(e=e||1)/2,s=Math.floor(i)||1,a=Math.floor(r)||1,u=s+1,h=a+1,l=t/s,c=e/a,f=[],A=[],p=[],d=[],m=0;m<h;m++)for(var y=m*c-o,g=0;g<u;g++)A.push(g*l-n,-y,0),p.push(0,0,1),d.push(g/s),d.push(1-m/a);for(m=0;m<a;m++)for(g=0;g<s;g++){var v=g+u*(m+1),b=g+1+u*(m+1),w=g+1+u*m;f.push(g+u*m,v,w),f.push(v,b,w)}this.setIndex(f),this.setAttribute("position",new Lt(A,3)),this.setAttribute("normal",new Lt(p,3)),this.setAttribute("uv",new Lt(d,2))}Wt.prototype=Object.assign(Object.create(v.prototype),{constructor:Wt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<function(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}(t)?Ut:Rt)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e,i=(void 0!==(e=(void 0!==(e=this.attributes.position)&&(e.applyMatrix4(t),e.needsUpdate=!0),this.attributes.normal))&&(i=(new _).getNormalMatrix(t),e.applyNormalMatrix(i),e.needsUpdate=!0),this.attributes.tangent);return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Ht.makeRotationX(t),this.applyMatrix4(Ht),this},rotateY:function(t){return Ht.makeRotationY(t),this.applyMatrix4(Ht),this},rotateZ:function(t){return Ht.makeRotationZ(t),this.applyMatrix4(Ht),this},translate:function(t,e,i){return Ht.makeTranslation(t,e,i),this.applyMatrix4(Ht),this},scale:function(t,e,i){return Ht.makeScale(t,e,i),this.applyMatrix4(Ht),this},lookAt:function(t){return Vt.lookAt(t),Vt.updateMatrix(),this.applyMatrix4(Vt.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gt).negate(),this.translate(Gt.x,Gt.y,Gt.z),this},setFromObject:function(t){var e,i,r=t.geometry;return t.isPoints||t.isLine?(i=new Lt(3*r.vertices.length,3),e=new Lt(3*r.colors.length,3),this.setAttribute("position",i.copyVector3sArray(r.vertices)),this.setAttribute("color",e.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(i=new Lt(r.lineDistances.length,1),this.setAttribute("lineDistance",i.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Lt(e,3)),this},updateFromObject:function(t){var e,i=t.geometry;if(t.isMesh){var r=i.R;if(!0===i.elementsNeedUpdate&&(r=void 0,i.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(i);r.verticesNeedUpdate=i.verticesNeedUpdate,r.normalsNeedUpdate=i.normalsNeedUpdate,r.colorsNeedUpdate=i.colorsNeedUpdate,r.uvsNeedUpdate=i.uvsNeedUpdate,r.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=r}return!0===i.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(i.vertices),e.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(i.normals),e.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(i.colors),e.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(i.uvs),e.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(i.lineDistances),e.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.R=(new Nt).fromGeometry(t),this.fromDirectGeometry(t.R)},fromDirectGeometry:function(t){var e,i=new Float32Array(3*t.vertices.length);for(e in this.setAttribute("position",new Tt(i,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(i=new Float32Array(3*t.normals.length),this.setAttribute("normal",new Tt(i,3).copyVector3sArray(t.normals))),0<t.colors.length&&(i=new Float32Array(3*t.colors.length),this.setAttribute("color",new Tt(i,3).copyColorsArray(t.colors))),0<t.uvs.length&&(i=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new Tt(i,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(i=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new Tt(i,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){for(var r=[],n=t.morphTargets[e],o=0,s=n.length;o<s;o++){var a=n[o],u=new Lt(3*a.data.length,3);u.name=a.name,r.push(u.copyVector3sArray(a.data))}this.morphAttributes[e]=r}return 0<t.skinIndices.length&&(i=new Lt(4*t.skinIndices.length,4),this.setAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new Lt(4*t.skinWeights.length,4),this.setAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new at);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var n=e[i];Kt.setFromBufferAttribute(n),this.morphTargetsRelative?(Xt.addVectors(this.boundingBox.min,Kt.min),this.boundingBox.expandByPoint(Xt),Xt.addVectors(this.boundingBox.max,Kt.max),this.boundingBox.expandByPoint(Xt)):(this.boundingBox.expandByPoint(Kt.min),this.boundingBox.expandByPoint(Kt.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Qt);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var i=this.boundingSphere.center;if(Kt.setFromBufferAttribute(t),e)for(var r=0,n=e.length;r<n;r++){var o=e[r];Yt.setFromBufferAttribute(o),this.morphTargetsRelative?(Xt.addVectors(Kt.min,Yt.min),Kt.expandByPoint(Xt),Xt.addVectors(Kt.max,Yt.max),Kt.expandByPoint(Xt)):(Kt.expandByPoint(Yt.min),Kt.expandByPoint(Yt.max))}Kt.getCenter(i);var s=0;for(r=0,n=t.count;r<n;r++)Xt.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(Xt));if(e)for(r=0,n=e.length;r<n;r++){o=e[r];for(var a=this.morphTargetsRelative,u=0,h=o.count;u<h;u++)Xt.fromBufferAttribute(o,u),a&&(Gt.fromBufferAttribute(t,u),Xt.add(Gt)),s=Math.max(s,i.distanceToSquared(Xt))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new Tt(new Float32Array(i.length),3));else for(var r=e.normal.array,n=0,o=r.length;n<o;n++)r[n]=0;var s,a,u,h=e.normal.array,c=new l,f=new l,A=new l,p=new l,d=new l;if(t){var m=t.array;for(n=0,o=t.count;n<o;n+=3)s=3*m[n+0],a=3*m[n+1],u=3*m[n+2],c.fromArray(i,s),f.fromArray(i,a),A.fromArray(i,u),p.subVectors(A,f),d.subVectors(c,f),p.cross(d),h[s]+=p.x,h[1+s]+=p.y,h[2+s]+=p.z,h[a]+=p.x,h[1+a]+=p.y,h[2+a]+=p.z,h[u]+=p.x,h[1+u]+=p.y,h[2+u]+=p.z}else for(n=0,o=i.length;n<o;n+=9)c.fromArray(i,n),f.fromArray(i,n+3),A.fromArray(i,n+6),p.subVectors(A,f),d.subVectors(c,f),p.cross(d),h[n]=p.x,h[n+1]=p.y,h[n+2]=p.z,h[n+3]=p.x,h[n+4]=p.y,h[n+5]=p.z,h[n+6]=p.x,h[n+7]=p.y,h[n+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)Xt.x=t.getX(e),Xt.y=t.getY(e),Xt.z=t.getZ(e),Xt.normalize(),t.setXYZ(e,Xt.x,Xt.y,Xt.z)},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(qt.prototype=Object.create(Wt.prototype)).constructor=qt;var Zt=0;function Jt(){Object.defineProperty(this,"id",{value:Zt++}),this.uuid=s.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=pt,this.side=ct,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=mt,this.blendDst=yt,this.blendEquation=dt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=gt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Et,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bt,this.stencilZFail=Bt,this.stencilZPass=Bt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function $t(t){Jt.call(this),this.type="MeshBasicMaterial",this.color=new H(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}Jt.prototype=Object.assign(Object.create(v.prototype),{constructor:Jt,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i,r=t[e];void 0===r||("shading"===e?this.flatShading=1===r:void 0===(i=this[e])||(i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[e]=r))}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,i=null;if(null!==e)for(var r=e.length,n=(i=new Array(r),0);n!==r;++n)i[n]=e[n].clone();return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Jt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),(($t.prototype=Object.create(Jt.prototype)).constructor=$t).prototype.isMeshBasicMaterial=!0,$t.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var te=0;function ee(t,e,i,r,n,o,a,u,h,l){Object.defineProperty(this,"id",{value:te++}),this.uuid=s.generateUUID(),this.name="",this.image=void 0!==t?t:ee.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:ee.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:bt,this.wrapT=void 0!==r?r:bt,this.magFilter=void 0!==n?n:wt,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==a?a:1023,this.internalFormat=null,this.type=void 0!==u?u:1009,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:3e3,this.version=0,this.onUpdate=null}function ie(t,e,i,r,n,o,s,a,u){ee.call(this,t,e,i,r,n,o,s,a,u),this.needsUpdate=!0}ee.DEFAULT_IMAGE=void 0,ee.DEFAULT_MAPPING=300,ee.prototype=Object.assign(Object.create(v.prototype),{constructor:ee,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case bt:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case bt:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}return t}}),Object.defineProperty(ee.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),((ie.prototype=Object.create(ee.prototype)).constructor=ie).prototype.isCanvasTexture=!0;var re=new l,ne=new l,oe=new _;function se(t,e){this.normal=void 0!==t?t:new l(1,0,0),this.constant=void 0!==e?e:0}Object.assign(se.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,i){return i=re.subVectors(i,e).cross(ne.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(e=new l),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(e=new l);var i=t.delta(re),r=this.normal.dot(i);return 0===r?0===this.distanceToPoint(t.start)?e.copy(t.start):void 0:(r=-(t.start.dot(this.normal)+this.constant)/r)<0||1<r?void 0:e.copy(i).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);return e<0&&0<t||t<0&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(t=new l),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){return e=e||oe.getNormalMatrix(t),t=this.coplanarPoint(re).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var ae=new l,ue=new l,he=new l,le=new l,ce=new l,fe=new l,Ae=new l;function pe(t,e){this.origin=void 0!==t?t:new l,this.direction=void 0!==e?e:new l(0,0,-1)}Object.assign(pe.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(e=new l),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,ae)),this},closestPointToPoint:function(t,e){return void 0===e&&(e=new l),e.subVectors(t,this.origin),(t=e.dot(this.direction))<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=ae.subVectors(t,this.origin).dot(this.direction);return(e<0?this.origin:(ae.copy(this.direction).multiplyScalar(e).add(this.origin),ae)).distanceToSquared(t)},distanceSqToSegment:function(t,e,i,r){ue.copy(t).add(e).multiplyScalar(.5),he.copy(e).sub(t).normalize(),le.copy(this.origin).sub(ue);t=.5*t.distanceTo(e),e=-this.direction.dot(he);var n,o,s,a=le.dot(this.direction),u=-le.dot(he),h=le.lengthSq(),l=Math.abs(1-e*e);return l=0<l?(o=e*a-u,s=t*l,0<=(n=e*u-a)?-s<=o?o<=s?(n*=l=1/l)*(n+e*(o*=l)+2*a)+o*(e*n+o+2*u)+h:(o=t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h):(o=-t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h):o<=-s?-(n=Math.max(0,-(-e*t+a)))*n+(o=0<n?-t:Math.min(Math.max(-t,-u),t))*(o+2*u)+h:o<=s?(n=0,(o=Math.min(Math.max(-t,-u),t))*(o+2*u)+h):-(n=Math.max(0,-(e*t+a)))*n+(o=0<n?t:Math.min(Math.max(-t,-u),t))*(o+2*u)+h):(o=0<e?-t:t,-(n=Math.max(0,-(e*o+a)))*n+o*(o+2*u)+h),i&&i.copy(this.direction).multiplyScalar(n).add(this.origin),r&&r.copy(he).multiplyScalar(o).add(ue),l},intersectSphere:function(t,e){ae.subVectors(t.center,this.origin);var i=ae.dot(this.direction),r=ae.dot(ae)-i*i;return(t=t.radius*t.radius)<r||(r=i+(t=Math.sqrt(t-r)),(i-=t)<0&&r<0)?null:i<0?this.at(r,e):this.at(i,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,r,n,o=1/this.direction.x,s=1/this.direction.y,a=1/this.direction.z,u=this.origin;o=0<=o?(i=(t.min.x-u.x)*o,(t.max.x-u.x)*o):(i=(t.max.x-u.x)*o,(t.min.x-u.x)*o);return(s=0<=s?(n=(t.min.y-u.y)*s,(t.max.y-u.y)*s):(n=(t.max.y-u.y)*s,(t.min.y-u.y)*s))<i||o<n||((i<n||i!=i)&&(i=n),(s<o||o!=o)&&(o=s),(n=0<=a?(r=(t.min.z-u.z)*a,(t.max.z-u.z)*a):(r=(t.max.z-u.z)*a,(t.min.z-u.z)*a))<i)||o<r||((i<r||i!=i)&&(i=r),(o=n<o||o!=o?n:o)<0)?null:this.at(0<=i?i:o,e)},intersectsBox:function(t){return null!==this.intersectBox(t,ae)},intersectTriangle:function(t,e,i,r,n){var o;if(ce.subVectors(e,t),fe.subVectors(i,t),Ae.crossVectors(ce,fe),0<(e=this.direction.dot(Ae))){if(r)return null;o=1}else{if(!(e<0))return null;o=-1,e=-e}return le.subVectors(this.origin,t),(i=o*this.direction.dot(fe.crossVectors(le,fe)))<0||(r=o*this.direction.dot(ce.cross(le)))<0||e<i+r||(t=-o*le.dot(Ae))<0?null:this.at(t/e,n)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var de=new l,me=new l,ye=new l,ge=new l,ve=new l,be=new l,we=new l,xe=new l,Me=new l,_e=new l;function Se(t,e,i){this.a=void 0!==t?t:new l,this.b=void 0!==e?e:new l,this.c=void 0!==i?i:new l}function Be(t,e,i,r,n,o){this.a=t,this.b=e,this.c=i,this.normal=r&&r.isVector3?r:new l,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new H,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==o?o:0}Object.assign(Se,{getNormal:function(t,e,i,r){return void 0===r&&(r=new l),r.subVectors(i,e),de.subVectors(t,e),r.cross(de),0<(i=r.lengthSq())?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(t,e,i,r,n){de.subVectors(r,e),me.subVectors(i,e),ye.subVectors(t,e);r=de.dot(de),i=de.dot(me),t=de.dot(ye),e=me.dot(me);var o=me.dot(ye),s=r*e-i*i;return void 0===n&&(n=new l),0==s?n.set(-2,-1,-1):n.set(1-(e=(e*t-i*o)*(n=1/s))-(s=(r*o-i*t)*n),s,e)},containsPoint:function(t,e,i,r){return Se.getBarycoord(t,e,i,r,ge),0<=ge.x&&0<=ge.y&&ge.x+ge.y<=1},getUV:function(t,e,i,r,n,o,s,a){return this.getBarycoord(t,e,i,r,ge),a.set(0,0),a.addScaledVector(n,ge.x),a.addScaledVector(o,ge.y),a.addScaledVector(s,ge.z),a},isFrontFacing:function(t,e,i,r){return de.subVectors(i,e),me.subVectors(t,e),de.cross(me).dot(r)<0}}),Object.assign(Se.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return de.subVectors(this.c,this.b),me.subVectors(this.a,this.b),.5*de.cross(me).length()},getMidpoint:function(t){return void 0===t&&(t=new l),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Se.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(t=new se),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Se.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,i,r,n){return Se.getUV(t,this.a,this.b,this.c,e,i,r,n)},containsPoint:function(t){return Se.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Se.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(e=new l);var i=this.a,r=this.b,n=this.c,o=(ve.subVectors(r,i),be.subVectors(n,i),xe.subVectors(t,i),ve.dot(xe)),s=be.dot(xe);if(o<=0&&s<=0)return e.copy(i);Me.subVectors(t,r);var a=ve.dot(Me),u=be.dot(Me);if(0<=a&&u<=a)return e.copy(r);var h=o*u-a*s;if(h<=0&&0<=o&&a<=0)return c=o/(o-a),e.copy(i).addScaledVector(ve,c);_e.subVectors(t,n);t=ve.dot(_e);var c,f,A=be.dot(_e);return 0<=A&&t<=A?e.copy(n):(o=t*s-o*A)<=0&&0<=s&&A<=0?(f=s/(s-A),e.copy(i).addScaledVector(be,f)):(s=a*A-t*u)<=0&&0<=u-a&&0<=t-A?(we.subVectors(n,r),f=(u-a)/(u-a+(t-A)),e.copy(r).addScaledVector(we,f)):(c=o*(n=1/(s+o+h)),f=h*n,e.copy(i).addScaledVector(ve,c).addScaledVector(be,f))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Object.assign(Be.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Ee=new g,Ce=new pe,Te=new Qt,Fe=new l,Pe=new l,Oe=new l,De=new l,Re=new l,Ie=new l,Ue=new l,Le=new l,ke=new l,je=new lt,Qe=new lt,Ne=new lt,ze=new l,He=new l;function Ve(t,e){k.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Wt,this.material=void 0!==e?e:new $t,this.updateMorphTargets()}function Ge(t,e,i,r,n,o,s,a){return null===(r=e.side===ft?r.intersectTriangle(s,o,n,!0,a):r.intersectTriangle(n,o,s,e.side!==At,a))?null:(He.copy(a),He.applyMatrix4(t.matrixWorld),(n=i.ray.origin.distanceTo(He))<i.near||n>i.far?null:{distance:n,point:He.clone(),object:t})}function Ke(t,e,i,r,n,o,s,a,u,h,l,c){Fe.fromBufferAttribute(n,h),Pe.fromBufferAttribute(n,l),Oe.fromBufferAttribute(n,c);var f=t.morphTargetInfluences;if(e.morphTargets&&o&&f){Ue.set(0,0,0),Le.set(0,0,0),ke.set(0,0,0);for(var A=0,p=o.length;A<p;A++){var d=f[A],m=o[A];0!==d&&(De.fromBufferAttribute(m,h),Re.fromBufferAttribute(m,l),Ie.fromBufferAttribute(m,c),s?(Ue.addScaledVector(De,d),Le.addScaledVector(Re,d),ke.addScaledVector(Ie,d)):(Ue.addScaledVector(De.sub(Fe),d),Le.addScaledVector(Re.sub(Pe),d),ke.addScaledVector(Ie.sub(Oe),d)))}Fe.add(Ue),Pe.add(Le),Oe.add(ke)}return(n=Ge(t,e,i,r,Fe,Pe,Oe,ze))&&(a&&(je.fromBufferAttribute(a,h),Qe.fromBufferAttribute(a,l),Ne.fromBufferAttribute(a,c),n.uv=Se.getUV(ze,Fe,Pe,Oe,je,Qe,Ne,new lt)),u&&(je.fromBufferAttribute(u,h),Qe.fromBufferAttribute(u,l),Ne.fromBufferAttribute(u,c),n.uv2=Se.getUV(ze,Fe,Pe,Oe,je,Qe,Ne,new lt)),t=new Be(h,l,c),Se.getNormal(Fe,Pe,Oe,t.normal),n.face=t),n}function Ye(t,e,i,r){this.ray=new pe(t,e),this.near=i||0,this.far=r||1/0,this.camera=null,this.layers=new M,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Xe(t,e){return t.distance-e.distance}function We(t,e,i,r){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===r)for(var n=t.children,o=0,s=n.length;o<s;o++)We(n[o],e,i,!0)}Ve.prototype=Object.assign(Object.create(k.prototype),{constructor:Ve,isMesh:!0,copy:function(t){return k.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,i,r=this.geometry;if(r.isBufferGeometry){var n=r.morphAttributes,o=Object.keys(n);if(0<o.length){var s=n[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)i=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}else void 0!==(n=r.morphTargets)&&n.length},raycast:function(t,e){var i=this.geometry,r=this.material,n=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),Te.copy(i.boundingSphere),Te.applyMatrix4(n),!1!==t.ray.intersectsSphere(Te)&&(Ee.getInverse(n),Ce.copy(t.ray).applyMatrix4(Ee),null===i.boundingBox||!1!==Ce.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,s,a,u,h,l,c,f,A,p=i.index,d=i.attributes.position,m=i.morphAttributes.position,y=i.morphTargetsRelative,g=i.attributes.uv,v=i.attributes.uv2,b=i.groups,w=i.drawRange;if(null!==p)if(Array.isArray(r))for(u=0,l=b.length;u<l;u++)for(A=r[(f=b[u]).materialIndex],h=Math.max(f.start,w.start),c=Math.min(f.start+f.count,w.start+w.count);h<c;h+=3)o=p.getX(h),s=p.getX(h+1),a=p.getX(h+2),(P=Ke(this,A,t,Ce,d,m,y,g,v,o,s,a))&&(P.faceIndex=Math.floor(h/3),P.face.materialIndex=f.materialIndex,e.push(P));else for(u=Math.max(0,w.start),l=Math.min(p.count,w.start+w.count);u<l;u+=3)o=p.getX(u),s=p.getX(u+1),a=p.getX(u+2),(P=Ke(this,r,t,Ce,d,m,y,g,v,o,s,a))&&(P.faceIndex=Math.floor(u/3),e.push(P));else if(void 0!==d)if(Array.isArray(r))for(u=0,l=b.length;u<l;u++)for(A=r[(f=b[u]).materialIndex],h=Math.max(f.start,w.start),c=Math.min(f.start+f.count,w.start+w.count);h<c;h+=3)(P=Ke(this,A,t,Ce,d,m,y,g,v,o=h,s=h+1,a=h+2))&&(P.faceIndex=Math.floor(h/3),P.face.materialIndex=f.materialIndex,e.push(P));else for(u=Math.max(0,w.start),l=Math.min(d.count,w.start+w.count);u<l;u+=3)(P=Ke(this,r,t,Ce,d,m,y,g,v,o=u,s=u+1,a=u+2))&&(P.faceIndex=Math.floor(u/3),e.push(P))}else if(i.isGeometry){var x,M=Array.isArray(r),_=i.vertices,S=i.faces;0<(n=i.faceVertexUvs[0]).length&&(x=n);for(var B=0,E=S.length;B<E;B++){var C,T,F,P,O=S[B],D=M?r[O.materialIndex]:r;void 0!==D&&(C=_[O.a],T=_[O.b],F=_[O.c],P=Ge(this,D,t,Ce,C,T,F,ze))&&(x&&x[B]&&(D=x[B],je.copy(D[0]),Qe.copy(D[1]),Ne.copy(D[2]),P.uv=Se.getUV(ze,C,T,F,je,Qe,Ne,new lt)),P.face=O,P.faceIndex=B,e.push(P))}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Ye.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)},intersectObject:function(t,e,i){return We(t,this,i=i||[],e),i.sort(Xe),i},intersectObjects:function(t,e,i){var r=i||[];if(!1===Array.isArray(t));else{for(var n=0,o=t.length;n<o;n++)We(t[n],this,r,e);r.sort(Xe)}return r}});var qe={AMAP_SATELLITE:1,AMAP_VECTOR:2,BAIDU_VECTOR:4,BAIDU_SATELLITE:8,TD_VECTOR:16,TD_SATELLITE:32,OSM:64},Ze={FOV:35,CAMERA_NEAR:1,CAMERA_FAR:1e5,ZOOM_UPPER_BOUND:30,TILT_UPPER_BOUND:90,THOUSAND:1e3,DEG2RAD:.0174532,RAD2DEG:57.2957795,DRAW_TIME:500,EPS:.001},Je=(Object.freeze(Ze),Ze),$e={YELLOW:"YELLOW",CELESTE:"CELESTE",GRAY:"GRAY",PEACH:"PEACH",PINK:"PINK",SAPPHIRE:"SAPPHIRE",NONE:"NONE",CUSTOM:"CUSTOM"};function ti(){k.call(this),this.type="Group"}function ei(t){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ei(t=function(t,e){if("object"!==ei(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ei(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}ti.prototype=Object.assign(Object.create(k.prototype),{constructor:ti,isGroup:!0});var ri=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.disposed=!1}var e,i;return e=t,(i=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}])&&ii(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ni(t,e){return e<t?1:t<e?-1:0}function oi(t,e,i){var r,n=t.length;if(t[0]<=e)return 0;if(!(e<=t[n-1]))if(0<i){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return"function"==typeof i?0<i(e,t[r-1],t[r])?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return n-1}function si(t,e){var i=t.length;if(i===e.length){for(var r=0;r<i;r++)if(t[r]!==e[r])return;return 1}}function ai(){return!0}function ui(){}function hi(){throw new Error("Unimplemented abstract method.")}var li=0;function ci(t){return t.ol_uid||(t.ol_uid=String(++li))}var fi=((Ze="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"").indexOf("firefox"),-1!==Ze.indexOf("safari")&&Ze.indexOf("chrom"),-1!==Ze.indexOf("webkit")&&Ze.indexOf("edge"),Ze.indexOf("macintosh"),"undefined"!=typeof devicePixelRatio?devicePixelRatio:1),Ai="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,pi="undefined"!=typeof Image&&Image.prototype.decode;function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function yi(t,e){return(yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(){try{var t=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(t){}}();var vi=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yi(e,t);var i=function(t){var e=mi();return function(){var i,r=gi(t);if(i=e?(i=gi(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===di(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e,n;if(this instanceof r)return(n=i.call(this,e="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+t+" for details.")).code=t,n.name="AssertionError",n.message=e,n;throw new TypeError("Cannot call a class as a function")}return e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}(function(t){var e="function"==typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return function(t,e,i){return(mi()?Reflect.construct.bind():function(t,e,i){var r=[null];return r.push.apply(r,e),e=new(Function.bind.apply(t,r)),i&&yi(e,i.prototype),e}).apply(null,arguments)}(t,arguments,gi(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),yi(i,t)}(t)}(Error));function bi(t,e){if(!t)throw new vi(e)}function wi(t,e){var i=e[0],r=e[1];return e[0]=t[0]*i+t[2]*r+t[4],e[1]=t[1]*i+t[3]*r+t[5],e}function xi(t,e,i,r,n,o,s,a){var u=Math.sin(o);o=Math.cos(o);return t[0]=r*o,t[1]=n*u,t[2]=-r*u,t[3]=n*o,t[4]=s*r*o-a*r*u+e,t[5]=s*n*u+a*n*o+i,t}function Mi(t,e){var i=e[0]*e[3]-e[1]*e[2],r=(bi(0!=i,32),e[0]),n=e[1],o=e[2],s=e[3],a=e[4];e=e[5];return t[0]=s/i,t[1]=-n/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*e-s*a)/i,t[5]=-(r*e-n*a)/i,t}new Array(6);var _i={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Si={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Bi(t,e,i){return(e=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*e+(i=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*i}function Ei(t,e){return Ci(t,e[0],e[1])}function Ci(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function Ti(t,e){var i=t[0],r=t[1],n=t[2],o=(t=t[3],e[0]),s=(e=e[1],Si.UNKNOWN);return o<i?s|=Si.LEFT:n<o&&(s|=Si.RIGHT),e<r?s|=Si.BELOW:t<e&&(s|=Si.ABOVE),s===Si.UNKNOWN?Si.INTERSECTING:s}function Fi(t,e,i,r,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=r,n):[t,e,i,r]}function Pi(t){return Fi(1/0,1/0,-1/0,-1/0,t)}function Oi(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Di(t,e,i,r,n){for(;i<r;i+=n)o=t,s=e[i],a=e[i+1],o[0]=Math.min(o[0],s),o[1]=Math.min(o[1],a),o[2]=Math.max(o[2],s),o[3]=Math.max(o[3],a);var o,s,a;return t}function Ri(t){return[t[0],t[1]]}function Ii(t){return[t[2],t[1]]}function Ui(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Li(t,e,i,r,n){var o=e*r[0]/2,s=(e=e*r[1]/2,o*(r=Math.cos(i))),a=(o=o*(i=Math.sin(i)),r=e*r,e=e*i,(i=t[0])-s+e),u=i-s-e,h=i+s-e,l=(i=i+s+e,s=(t=t[1])-o-r,e=t-o+r,t+o+r);t=t+o-r;return Fi(Math.min(a,u,h,i),Math.min(s,e,l,t),Math.max(a,u,h,i),Math.max(s,e,l,t),n)}function ki(t){return t[3]-t[1]}function ji(t,e,i){return i=i||[1/0,1/0,-1/0,-1/0],Hi(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):Pi(i),i}function Qi(t){return[t[0],t[3]]}function Ni(t){return[t[2],t[3]]}function zi(t){return t[2]-t[0]}function Hi(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Vi(t,e,i){return Math.min(Math.max(t,e),i)}var Gi="cosh"in Math?Math.cosh:function(t){return((t=Math.exp(t))+1/t)/2};function Ki(t,e,i,r){return(i-=t)*i+(t=r-e)*t}function Yi(t,e){return(t%=e)*e<0?t+e:t}function Xi(t,e){return e=Math.pow(10,e),Math.round(t*e)/e}function Wi(t,e){return Math.floor(Xi(t,e))}function qi(t,e){return Math.ceil(Xi(t,e))}"log2"in Math&&Math.log2;var Zi=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Ji=/^([a-z]*)$|^hsla?\(.*\)$/i;$i={},tr=0;var $i,tr,er=function(t){var e;if($i.hasOwnProperty(t))e=$i[t];else{if(1024<=tr){var i,r=0;for(i in $i)0==(3&r++)&&(delete $i[i],--tr)}e=function(t){var e,i,r,n,o,s;return Ji.exec(t)&&(t=function(t){var e=document.createElement("div");return e.style.color=t,""!==e.style.color?(document.body.appendChild(e),t=getComputedStyle(e).color,document.body.removeChild(e),t):""}(t)),Zi.exec(t)?(o=(s=t.length-1)<=4?1:2,s=4==s||8==s,e=parseInt(t.substr(1+0*o,o),16),i=parseInt(t.substr(+o+1,o),16),r=parseInt(t.substr(1+2*o,o),16),n=s?parseInt(t.substr(1+3*o,o),16):255,1==o&&(e=(e<<4)+e,i=(i<<4)+i,r=(r<<4)+r,s)&&(n=(n<<4)+n),o=[e,i,r,n/255]):0==t.indexOf("rgba(")?rr(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),rr(o)):bi(!1,14),o}(t),$i[t]=e,++tr}return e};function ir(t){return Array.isArray(t)?t:er(t)}function rr(t){t[0]=Vi(t[0]+.5|0,0,255),t[1]=Vi(t[1]+.5|0,0,255),t[2]=Vi(t[2]+.5|0,0,255),t[3]=Vi(t[3],0,1)}function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===nr(t=function(t,e){if("object"!==nr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==nr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function sr(t,e,i){return e+":"+t+":"+(i?function(t){var e,i,r;return"string"==typeof t?t:((e=(t=t)[0])!=(0|e)&&(e=e+.5|0),(i=t[1])!=(0|i)&&(i=i+.5|0),(r=t[2])!=(0|r)&&(r=r+.5|0),"rgba("+e+","+i+","+r+","+(t=void 0===t[3]?1:Math.round(100*t[3])/100)+")")}(i):"null")}var ar=new(Ze=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}var e,i;return e=t,(i=[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var t,e=0;for(t in this.cache_){var i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}},{key:"get",value:function(t,e,i){return(t=sr(t,e,i))in this.cache_?this.cache_[t]:null}},{key:"set",value:function(t,e,i,r){t=sr(t,e,i),this.cache_[t]=r,++this.cacheSize_}},{key:"setSize",value:function(t){this.maxCacheSize_=t,this.expire()}}])&&or(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}());function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ur(t=function(t,e){if("object"!==ur(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ur(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var lr=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}var e,i;return e=t,(i=[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&hr(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cr="propertychange",fr="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,n=arguments.length;r<n;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i};function Ar(t){for(var e in t)delete t[e]}function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===pr(t=function(t,e){if("object"!==pr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==pr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function mr(t,e){return(mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yr(t){return(yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}"function"==typeof Object.values&&Object.values;var gr=function(){var t=r,e=ri;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=yr(t);if(i=e?(i=yr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===pr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this)).eventTarget_=t,e.pendingRemovals_=null,e.dispatching_=null,e.listeners_=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"addEventListener",value:function(t,e){var i;t&&e&&-1===(i=(i=this.listeners_||(this.listeners_={}))[t]||(i[t]=[])).indexOf(e)&&i.push(e)}},{key:"dispatchEvent",value:function(t){var e=(o="string"==typeof t)?t:t.type,i=this.listeners_&&this.listeners_[e];if(i){var r,n=o?new lr(t):t,o=(n.target||(n.target=this.eventTarget_||this),this.dispatching_||(this.dispatching_={}));t=this.pendingRemovals_||(this.pendingRemovals_={});e in o||(o[e]=0,t[e]=0),++o[e];for(var s=0,a=i.length;s<a;++s)if(!1===(r="handleEvent"in i[s]?i[s].handleEvent(n):i[s].call(this,n))||n.propagationStopped){r=!1;break}if(0==--o[e]){var u=t[e];for(delete t[e];u--;)this.removeEventListener(e,ui);delete o[e]}return r}}},{key:"disposeInternal",value:function(){this.listeners_&&Ar(this.listeners_)}},{key:"getListeners",value:function(t){return this.listeners_&&this.listeners_[t]||void 0}},{key:"hasListener",value:function(t){return!!this.listeners_&&(t?t in this.listeners_:0<Object.keys(this.listeners_).length)}},{key:"removeEventListener",value:function(t,e){var i=this.listeners_&&this.listeners_[t];i&&-1!==(e=i.indexOf(e))&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[e]=ui,++this.pendingRemovals_[t]):(i.splice(e,1),0===i.length&&delete this.listeners_[t]))}}])&&dr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),vr="change",br="error",wr="load";function xr(t,e,i,r,n){r&&r!==t&&(i=i.bind(r)),n&&(o=i,i=function(){t.removeEventListener(e,i),o.apply(this,arguments)});var o;r={target:t,type:e,listener:i};return t.addEventListener(e,i),r}function Mr(t,e,i,r){return xr(t,e,i,r,!0)}function _r(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ar(t))}function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Sr(t=function(t,e){if("object"!==Sr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Sr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Er(t,e){return(Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(Ze=function(){var t=r,e=gr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Er(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Cr(t);if(i=e?(i=Cr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Sr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t;if(this instanceof r)return(t=i.call(this)).on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(vr)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(t,e){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=xr(this,t[n],e);return r}return xr(this,t,e)}},{key:"onceInternal",value:function(t,e){if(Array.isArray(t))for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=Mr(this,t[n],e);else r=Mr(this,t,e);return e.ol_key=r}},{key:"unInternal",value:function(t,e){var i=e.ol_key;if(i){var r=i;if(Array.isArray(r))for(var n=0,o=r.length;n<o;++n)_r(r[n]);else _r(r)}else if(Array.isArray(t))for(var s=0,a=t.length;s<a;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}])&&Br(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}()).prototype.on,Ze.prototype.once,Ze.prototype.un;var Tr=Ze;function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Fr(t=function(t,e){if("object"!==Fr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Fr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Or(t,e,i){return e&&Pr(t.prototype,e),i&&Pr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Ir(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Lr(t);i=e?(i=Lr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this;if(i&&("object"===Fr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return Ur(r)}}function Ur(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lr(t){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kr=function(){Rr(e,lr);var t=Ir(e);function e(i,r,n){return Dr(this,e),(i=t.call(this,i)).key=r,i.oldValue=n,i}return Or(e)}(),jr=function(){Rr(e,Tr);var t=Ir(e);function e(i){var r;return Dr(this,e),(r=t.call(this)).on,r.once,r.un,ci(Ur(r)),r.values_=null,void 0!==i&&r.setProperties(i),r}return Or(e,[{key:"get",value:function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)?this.values_[t]:e}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&fr({},this.values_)||{}}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(t,e){var i="change:".concat(t);this.hasListener(i)&&this.dispatchEvent(new kr(i,t,e)),i=cr,this.hasListener(i)&&this.dispatchEvent(new kr(i,t,e))}},{key:"addChangeListener",value:function(t,e){this.addEventListener("change:".concat(t),e)}},{key:"removeChangeListener",value:function(t,e){this.removeEventListener("change:".concat(t),e)}},{key:"set",value:function(t,e,i){var r=this.values_||(this.values_={});i?r[t]=e:(i=r[t])!==(r[t]=e)&&this.notify(t,i)}},{key:"setProperties",value:function(t,e){for(var i in t)this.set(i,t[i],e)}},{key:"applyProperties",value:function(t){t.values_&&fr(this.values_||(this.values_={}),t.values_)}},{key:"unset",value:function(t,e){var i;this.values_&&t in this.values_&&(i=this.values_[t],delete this.values_[t],function(t){for(var e in t)return;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,i))}}]),e}(),Qr="opacity",Nr="visible",zr="zIndex",Hr="maxResolution",Vr="minResolution",Gr="maxZoom",Kr="minZoom",Yr="source";function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Xr(t=function(t,e){if("object"!==Xr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Xr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function qr(){return(qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jr(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function Zr(t,e){return(Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jr(t){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $r=function(){var t=r,e=jr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Jr(t);if(i=e?(i=Jr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Xr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(e=i.call(this)).on,e.once,e.un,e.background_=t.background;var n=fr({},t);return"object"===Xr(t.properties)&&(delete n.properties,fr(n,t.properties)),n[Qr]=void 0!==t.opacity?t.opacity:1,bi("number"==typeof n[Qr],64),n[Nr]=void 0===t.visible||t.visible,n[zr]=t.zIndex,n[Hr]=void 0!==t.maxResolution?t.maxResolution:1/0,n[Vr]=void 0!==t.minResolution?t.minResolution:0,n[Kr]=void 0!==t.minZoom?t.minZoom:-1/0,n[Gr]=void 0!==t.maxZoom?t.maxZoom:1/0,e.className_=void 0!==n.className?n.className:"ol-layer",delete n.className,e.setProperties(n),e.state_=null,e}return t=r,(e=[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){t=this.state_||{layer:this,managed:void 0===t||t};var e=this.getZIndex();return t.opacity=Vi(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==e||t.managed?e:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t}},{key:"getLayersArray",value:hi},{key:"getLayerStatesArray",value:function(t){return hi()}},{key:"getExtent",value:function(){return this.get("extent")}},{key:"getMaxResolution",value:function(){return this.get(Hr)}},{key:"getMinResolution",value:function(){return this.get(Vr)}},{key:"getMinZoom",value:function(){return this.get(Kr)}},{key:"getMaxZoom",value:function(){return this.get(Gr)}},{key:"getOpacity",value:function(){return this.get(Qr)}},{key:"getSourceState",value:function(){return hi()}},{key:"getVisible",value:function(){return this.get(Nr)}},{key:"getZIndex",value:function(){return this.get(zr)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set("extent",t)}},{key:"setMaxResolution",value:function(t){this.set(Hr,t)}},{key:"setMinResolution",value:function(t){this.set(Vr,t)}},{key:"setMaxZoom",value:function(t){this.set(Gr,t)}},{key:"setMinZoom",value:function(t){this.set(Kr,t)}},{key:"setOpacity",value:function(t){bi("number"==typeof t,64),this.set(Qr,t)}},{key:"setVisible",value:function(t){this.set(Nr,t)}},{key:"setZIndex",value:function(t){this.set(zr,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),qr(Jr(r.prototype),"disposeInternal",this).call(this)}}])&&Wr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),tn="rendercomplete",en="undefined",rn="ready";function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function on(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===nn(t=function(t,e){if("object"!==nn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==nn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function sn(){return(sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=un(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function an(t,e){return(an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function un(t){return(un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t,e){if(t.visible){var i=e.resolution;if(!(i<t.minResolution||i>=t.maxResolution))return(i=e.zoom)>t.minZoom&&i<=t.maxZoom}}var ln=function(){var t=r,e=$r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&an(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=un(t);if(i=e?(i=un(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===nn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return delete(e=fr({},t)).source,(e=i.call(this,e)).on,e.once,e.un,e.mapPrecomposeKey_=null,e.mapRenderKey_=null,e.sourceChangeKey_=null,e.renderer_=null,e.rendered=!1,t.render&&(e.render=t.render),t.map&&e.setMap(t.map),e.addChangeListener(Yr,e.handleSourcePropertyChange_),t=t.source||null,e.setSource(t),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getLayersArray",value:function(t){return(t=t||[]).push(this),t}},{key:"getLayerStatesArray",value:function(t){return(t=t||[]).push(this.getLayerState()),t}},{key:"getSource",value:function(){return this.get(Yr)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var t=this.getSource();return t?t.getState():en}},{key:"handleSourceChange_",value:function(){this.changed()}},{key:"handleSourcePropertyChange_",value:function(){this.sourceChangeKey_&&(_r(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=xr(t,vr,this.handleSourceChange_,this)),this.changed()}},{key:"getFeatures",value:function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(t){return t([])})}},{key:"getData",value:function(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}},{key:"render",value:function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(t){t||this.unrender(),this.set("map",t)}},{key:"getMapInternal",value:function(){return this.get("map")}},{key:"setMap",value:function(t){this.mapPrecomposeKey_&&(_r(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(_r(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=xr(t,"precompose",function(t){t=t.frameState.layerStatesArray;var e=this.getLayerState(!1);bi(!t.some(function(t){return t.layer===e.layer}),67),t.push(e)},this),this.mapRenderKey_=xr(this,vr,t.render,t),this.changed())}},{key:"setSource",value:function(t){this.set(Yr,t)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),sn(un(r.prototype),"disposeInternal",this).call(this)}}])&&on(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function cn(t,e){for(var i=!0,r=t.length-1;0<=r;--r)if(t[r]!=e[r]){i=!1;break}return i}function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===fn(t=function(t,e){if("object"!==fn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==fn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function pn(t,e){return(pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mn(t,e){ar.expire()}var yn=function(){var t=r,e=ri;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pn(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=dn(t);if(i=e?(i=dn(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===fn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this)).map_=t,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"dispatchRenderEvent",value:function(t,e){hi()}},{key:"calculateMatrices2D",value:function(t){var e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;xi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Mi(r,i)}},{key:"forEachFeatureAtCoordinate",value:function(t,e,i,r,n,o,s,a){var u,h=e.viewState;function l(t,e,i,r){return n.call(o,e,t?i:null,r)}for(var c,f,A,p,d=h.projection,m=(c=t.slice(),(A=d).canWrapX()&&(A=function(t,e,i){var r=e.getExtent(),n=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(e=i||zi(r),n=Math.floor((t[0]-r[0])/e)),n}(c,A,f=zi(A.getExtent())))&&(c[0]-=A*f),c),y=[[0,0]],g=(d.canWrapX()&&r&&(A=zi(d.getExtent()),y.push([-A,0],[A,0])),e.layerStatesArray),v=g.length,b=[],w=[],x=0;x<y.length;x++)for(var M=v-1;0<=M;--M){var _=g[M];if((B=_.layer).hasRenderer()&&hn(_,h)&&s.call(a,B)){var S=B.getRenderer(),B=B.getSource();if(S&&B&&(B=B.getWrapX()?m:t,_=l.bind(null,_.managed),w[0]=B[0]+y[x][0],w[1]=B[1]+y[x][1],u=S.forEachFeatureAtCoordinate(w,e,i,_,b)),u)return u}}if(0!==b.length)return p=1/b.length,b.forEach(function(t,e){return t.distanceSq+=e*p}),b.sort(function(t,e){return t.distanceSq-e.distanceSq}),b.some(function(t){return u=t.callback(t.feature,t.layer,t.geometry)}),u}},{key:"forEachLayerAtPixel",value:function(t,e,i,r,n){return hi()}},{key:"hasFeatureAtCoordinate",value:function(t,e,i,r,n,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,r,ai,this,n,o)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(t){hi()}},{key:"scheduleExpireIconCache",value:function(t){ar.canExpireCache()&&t.postRenderFunctions.push(mn)}}])&&An(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===gn(t=function(t,e){if("object"!==gn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==gn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function bn(){return(bn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xn(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function wn(t,e){return(wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mn=function(){var t=r,e=yn;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=xn(t);if(i=e?(i=xn(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===gn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){if(this instanceof r)return(t=i.call(this,t)).children_=[],t.renderedVisible_=!0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"disposeInternal",value:function(){bn(xn(r.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(t){this.calculateMatrices2D(t);for(var e=t.layerStatesArray.sort(function(t,e){return t.zIndex-e.zIndex}),i=t.viewState,r=[],n=null,o=this.children_.length=0,s=e.length;o<s;++o){var a=e[o],u=(t.layerIndex=o,a.layer),h=u.getSourceState();!hn(a,i)||h!=rn&&h!=en?u.unrender():(a=u.render(t,n))&&(a!==n&&(this.children_.push(a),n=a),"getDeclutter"in u)&&r.push(u)}for(var l=r.length-1;0<=l;--l)r[l].renderDeclutter(t);this.scheduleExpireIconCache(t)}}])&&vn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),_n="remove";function Sn(t){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Sn(t=function(t,e){if("object"!==Sn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Sn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function En(t,e,i){return e&&Bn(t.prototype,e),i&&Bn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Fn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Pn(t);i=e?(i=Pn(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this;if(i&&("object"===Sn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var On=function(){Tn(e,lr);var t=Fn(e);function e(i,r,n){return Cn(this,e),(i=t.call(this,i)).element=r,i.index=n,i}return En(e)}(),Dn=function(){Tn(e,jr);var t=Fn(e);function e(i,r){Cn(this,e),(n=t.call(this)).on,n.once,n.un;var n;r=r||{};if(n.unique_=!!r.unique,n.array_=i||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return En(e,[{key:"clear",value:function(){for(;0<this.getLength();)this.pop()}},{key:"extend",value:function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)t(e[i],i,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get("length")}},{key:"insertAt",value:function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new On("add",e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)}},{key:"removeAt",value:function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new On(_n,e,t)),e}},{key:"setAt",value:function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new On(_n,r,t)),this.dispatchEvent(new On("add",e,t))}else{for(var n=i;n<t;++n)this.insertAt(n,void 0);this.insertAt(t,e)}}},{key:"updateLength_",value:function(){this.set("length",this.array_.length)}},{key:"assertUnique_",value:function(t,e){for(var i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new vi(58)}}]),e}();function Rn(t){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Rn(t=function(t,e){if("object"!==Rn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Rn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Un(t,e,i){return e&&In(t.prototype,e),i&&In(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Qn(t);i=e?(i=Qn(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this;if(i&&("object"===Rn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Nn=function(){kn(e,lr);var t=jn(e);function e(i,r){return Ln(this,e),(i=t.call(this,i)).layer=r,i}return Un(e)}(),zn="layers",Hn=function(){kn(e,$r);var t=jn(e);function e(i){Ln(this,e);var r;delete(r=fr({},i=i||{})).layers,i=i.layers;return(r=t.call(this,r)).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(zn,r.handleLayersChanged_),i?Array.isArray(i)?i=new Dn(i.slice(),{unique:!0}):bi("function"==typeof i.getArray,43):i=new Dn(void 0,{unique:!0}),r.setLayers(i),r}return Un(e,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(_r),this.layersListenerKeys_.length=0;var t,e=this.getLayers();for(t in this.layersListenerKeys_.push(xr(e,"add",this.handleLayersAdd_,this),xr(e,_n,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(_r);Ar(this.listenerKeys_);for(var i=e.getArray(),r=0,n=i.length;r<n;r++){var o=i[r];this.registerLayerListeners_(o),this.dispatchEvent(new Nn("addlayer",o))}this.changed()}},{key:"registerLayerListeners_",value:function(t){var i=[xr(t,cr,this.handleLayerChange_,this),xr(t,vr,this.handleLayerChange_,this)];t instanceof e&&i.push(xr(t,"addlayer",this.handleLayerGroupAdd_,this),xr(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ci(t)]=i}},{key:"handleLayerGroupAdd_",value:function(t){this.dispatchEvent(new Nn("addlayer",t.layer))}},{key:"handleLayerGroupRemove_",value:function(t){this.dispatchEvent(new Nn("removelayer",t.layer))}},{key:"handleLayersAdd_",value:function(t){t=t.element,this.registerLayerListeners_(t),this.dispatchEvent(new Nn("addlayer",t)),this.changed()}},{key:"handleLayersRemove_",value:function(t){var e=ci(t=t.element);this.listenerKeys_[e].forEach(_r),delete this.listenerKeys_[e],this.dispatchEvent(new Nn("removelayer",t)),this.changed()}},{key:"getLayers",value:function(){return this.get(zn)}},{key:"setLayers",value:function(t){var e=this.getLayers();if(e)for(var i=e.getArray(),r=0,n=i.length;r<n;++r)this.dispatchEvent(new Nn("removelayer",i[r]));this.set(zn,t)}},{key:"getLayersArray",value:function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}},{key:"getLayerStatesArray",value:function(t){var e=void 0!==t?t:[],i=e.length,r=(this.getLayers().forEach(function(t){t.getLayerStatesArray(e)}),this.getLayerState()),n=r.zIndex;t||void 0!==r.zIndex||(n=0);for(var o=i,s=e.length;o<s;o++){var a=e[o];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),a.minZoom=Math.max(a.minZoom,r.minZoom),a.maxZoom=Math.min(a.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==a.extent?a.extent=ji(a.extent,r.extent):a.extent=r.extent),void 0===a.zIndex&&(a.zIndex=n)}return e}},{key:"getSourceState",value:function(){return rn}}]),e}();function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(t,e){return(Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yn=function(){var t=r,e=lr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gn(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Kn(t);if(i=e?(i=Kn(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Vn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){if(this instanceof r)return(t=i.call(this,t)).map=e,t.frameState=void 0!==n?n:null,t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(),Xn={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Wn(t=function(t,e){if("object"!==Wn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Wn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Zn=function(){function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.priorityFunction_=e,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}var e,i;return e=t,(i=[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,Ar(this.queuedElements_)}},{key:"dequeue",value:function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0)),t=this.keyFunction_(i);return delete this.queuedElements_[t],i}},{key:"enqueue",value:function(t){bi(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(t){return 2*t+1}},{key:"getRightChildIndex_",value:function(t){return 2*t+2}},{key:"getParentIndex_",value:function(t){return t-1>>1}},{key:"heapify_",value:function(){for(var t=(this.elements_.length>>1)-1;0<=t;t--)this.siftUp_(t)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(t){return t in this.queuedElements_}},{key:"isQueued",value:function(t){return this.isKeyQueued(this.keyFunction_(t))}},{key:"siftUp_",value:function(t){for(var e=this.elements_,i=this.priorities_,r=e.length,n=e[t],o=i[t],s=t;t<r>>1;){var a=this.getLeftChildIndex_(t),u=(u=this.getRightChildIndex_(t))<r&&i[u]<i[a]?u:a;e[t]=e[u],i[t]=i[u],t=u}e[t]=n,i[t]=o,this.siftDown_(s,t)}},{key:"siftDown_",value:function(t,e){for(var i=this.elements_,r=this.priorities_,n=i[e],o=r[e];t<e;){var s=this.getParentIndex_(e);if(!(r[s]>o))break;i[e]=i[s],r[e]=r[s],e=s}i[e]=n,r[e]=o}},{key:"reprioritize",value:function(){for(var t,e,i=this.priorityFunction_,r=this.elements_,n=this.priorities_,o=0,s=r.length,a=0;a<s;++a)(e=i(t=r[a]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(n[o]=e,r[o++]=t);r.length=o,n.length=o,this.heapify_()}}])&&qn(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Jn(t=function(t,e){if("object"!==Jn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Jn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function to(){return(to="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ro(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function eo(t,e){return(eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function io(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var no=function(){var t=r,e=Zn;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eo(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ro(t);if(i=e?(i=ro(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Jn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return io(r)}}(r);function r(t,e){var n;if(this instanceof r)return(n=i.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()})).boundHandleTileChange_=n.handleTileChange.bind(io(n)),n.tileChangeCallback_=e,n.tilesLoading_=0,n.tilesLoadingKeys_={},n;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"enqueue",value:function(t){var e=to(ro(r.prototype),"enqueue",this).call(this,t);return e&&t[0].addEventListener(vr,this.boundHandleTileChange_),e}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(t){var e=(t=t.target).getState();2!==e&&3!==e&&4!==e||(t.removeEventListener(vr,this.boundHandleTileChange_),(e=t.getKey())in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_())}},{key:"loadMoreTiles",value:function(t,e){for(var i,r,n=0;this.tilesLoading_<t&&n<e&&0<this.getCount();)r=(i=this.dequeue()[0]).getKey(),0!==i.getState()||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,i.load())}}])&&$n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),oo={},so=(oo[(Ze={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"}).RADIANS]=6370997/(2*Math.PI),oo[Ze.DEGREES]=2*Math.PI*6370997/360,oo[Ze.FEET]=.3048,oo[Ze.METERS]=1,oo[Ze.USFEET]=1200/3937,Ze),ao={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},uo=42,ho=256;function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===lo(t=function(t,e){if("object"!==lo(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==lo(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var fo=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}var e,i;return e=t,(i=[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||oo[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}])&&co(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){return(po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mo(t){return(mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yo=6378137,go=Math.PI*yo,vo=[-go,-go,go,go],bo=[-180,-85,180,85],wo=yo*Math.log(Math.tan(Math.PI/2));Ze=[new(Ze=function(){var t=r,e=fo;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&po(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=mo(t);if(i=e?(i=mo(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Ao(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){if(this instanceof r)return i.call(this,{code:t,units:so.METERS,extent:vo,global:!0,worldExtent:bo,getPointResolution:function(t,e){return t/Gi(e[1]/yo)}});throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}())("EPSG:3857"),new Ze("EPSG:102100"),new Ze("EPSG:102113"),new Ze("EPSG:900913"),new Ze("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ze("http://www.opengis.net/gml/srs/epsg.xml#3857")];function xo(t){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mo(t,e){return(Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _o(t){return(_o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var So=[-180,-90,180,90],Bo=6378137*Math.PI/180,Eo=[new(Eo=function(){var t=r,e=fo;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mo(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=_o(t);if(i=e?(i=_o(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===xo(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return i.call(this,{code:t,units:so.DEGREES,extent:So,axisOrientation:e,global:!0,metersPerUnit:Bo,worldExtent:So});throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}())("CRS:84"),new Eo("EPSG:4326","neu"),new Eo("urn:ogc:def:crs:OGC:1.3:CRS84"),new Eo("urn:ogc:def:crs:OGC:2:84"),new Eo("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Eo("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Eo("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Co={},To={};function Fo(t,e,i){t=t.getCode(),e=e.getCode(),t in To||(To[t]={}),To[t][e]=i}var Po=!0;function Oo(t,e,i){var r;if(void 0!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];r=e}else r=t.slice();return r}function Do(t,e,i){if(void 0!==e&&t!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function Ro(t){var e;e=t.getCode(),Fo(Co[e]=t,t,Oo)}function Io(t){return"string"==typeof t?Co[e=t]||Co[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Uo(t){t.forEach(Ro),t.forEach(function(e){t.forEach(function(t){e!==t&&Fo(e,t,Oo)})})}function Lo(t,e){return t?"string"==typeof t?Io(t):t:Io(e)}function ko(t,e){var i;return t===e||(i=t.getUnits()===e.getUnits(),(t.getCode()===e.getCode()||jo(t,e)===Oo)&&i)}function jo(t,e){var i;t=t.getCode();return e=e=e.getCode(),(i=(t=t)in To&&e in To[t]?To[t][e]:i)||Do}function Qo(t,e){return jo(Io(t),Io(e))}function No(t,e,i){return Qo(e,i)(t,void 0,t.length)}function zo(t,e,i,r){return function(t,e,i,r){var n=[];if(1<r)for(var o=t[2]-t[0],s=t[3]-t[1],a=0;a<r;++a)n.push(t[0]+o*a/r,t[1],t[2],t[1]+s*a/r,t[2]-o*a/r,t[3],t[0],t[3]-s*a/r);else n=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(n,n,2);for(var u,h=[],l=[],c=0,f=n.length;c<f;c+=2)h.push(n[c]),l.push(n[c+1]);return e=h,u=l,i=i,Fi(Math.min.apply(null,e),Math.min.apply(null,u),Math.max.apply(null,e),Math.max.apply(null,u),i)}(t,Qo(e,i),void 0,r)}var Ho,Vo,Go,Ko=null;function Yo(t,e){return Ko?No(t,e,Ko):t}function Xo(t,e){return Ko?No(t,Ko,e):(Po&&!cn(t,[0,0])&&-180<=t[0]&&t[0]<=180&&-90<=t[1]&&t[1]<=90&&(Po=!1),t)}function Wo(t,e){return Ko?zo(t,Ko,e):t}function qo(t,e,i){return function(r,n,o,s,a){var u,h,l,c;if(r)return n||e?(h=e?0:o[0]*n,o=e?0:o[1]*n,l=a?a[0]:0,a=a?a[1]:0,u=t[0]+h/2+l,h=t[2]-h/2+l,l=t[1]+o/2+a,h<u&&(h=u=(h+u)/2),(o=t[3]-o/2+a)<l&&(o=l=(o+l)/2),a=Vi(r[0],u,h),c=Vi(r[1],l,o),s&&i&&n&&(a+=-(s=30*n)*Math.log(1+Math.max(0,u-r[0])/s)+s*Math.log(1+Math.max(0,r[0]-h)/s),c+=-s*Math.log(1+Math.max(0,l-r[1])/s)+s*Math.log(1+Math.max(0,r[1]-o)/s)),[a,c]):r}}function Zo(t){return t}function Jo(t){if(void 0!==t)return 0}function $o(t){if(void 0!==t)return t}function ts(t){return Math.pow(t,3)}function es(t){return 1-ts(1-t)}function is(t){return 3*t*t-2*t*t*t}function rs(t){return(rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ns(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===rs(t=function(t,e){if("object"!==rs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==rs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function os(t,e){return(os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ss(t){return(ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function as(t,e){setTimeout(function(){t(e)},0)}function us(t,e,i,r,n){var o=Math.cos(-n),s=(n=Math.sin(-n),t[0]*o-t[1]*n);t=t[1]*o+t[0]*n;return[(s+=(e[0]/2-i[0])*r)*o-(t+=(i[1]-e[1]/2)*r)*(n=-n),t*o+s*n]}Uo(Ze),Uo(Eo),Ho=Ze,Vo=function(t,e,i){var r=t.length,n=1<i?i:2,o=e;void 0===o&&(o=2<n?t.slice():new Array(r));for(var s=0;s<r;s+=n){o[s]=go*t[s]/180;var a=yo*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));wo<a?a=wo:a<-wo&&(a=-wo),o[s+1]=a}return o},Go=function(t,e,i){var r=t.length,n=1<i?i:2,o=e;void 0===o&&(o=2<n?t.slice():new Array(r));for(var s=0;s<r;s+=n)o[s]=180*t[s]/go,o[s+1]=360*Math.atan(Math.exp(t[s+1]/yo))/Math.PI-90;return o},Eo.forEach(function(t){Ho.forEach(function(e){Fo(t,e,Vo),Fo(e,t,Go)})});var hs=function(){var t=r,e=jr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&os(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ss(t);if(i=e?(i=ss(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===rs(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");return(e=i.call(this)).on,e.once,e.un,t=fr({},t),e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=Lo(t.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.nextCenter_=null,e.nextResolution_,e.nextRotation_,e.cancelAnchor_=void 0,t.center&&(t.center=Xo(t.center,e.projection_)),t.extent&&(t.extent=Wo(t.extent,e.projection_)),t.projection&&function(t){Po=!(void 0===t||t)}(),e.applyOptions_(t),e}return t=r,(e=[{key:"applyOptions_",value:function(t){var e,i=fr({},t);for(e in ao)delete i[e];this.setProperties(i,!0);var r=function(t){var e,i=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28,n=void 0!==t.zoomFactor?t.zoomFactor:2,o=void 0!==t.multiWorld&&t.multiWorld,s=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,a=void 0!==t.showFullExtent&&t.showFullExtent,u=Lo(t.projection,"EPSG:3857"),h=u.getExtent(),l=t.constrainOnlyCenter,c=t.extent;return o||c||!u.isGlobal()||(l=!1,c=h),h=(o=(h?Math.max(zi(h),ki(h)):360*oo[so.DEGREES]/u.getMetersPerUnit())/ho/Math.pow(2,0))/Math.pow(2,28),void 0!==(u=t.maxResolution)?i=0:u=o/Math.pow(n,i),void 0===(e=t.minResolution)&&(e=void 0!==t.maxZoom?void 0!==t.maxResolution?u/Math.pow(n,r):o/Math.pow(n,r):h),r=i+Math.floor(Math.log(u/e)/Math.log(n)),{constraint:function(t,e,i,r,n){return function(o,s,a,u){var h,l,c;if(void 0!==o)return a=r?(h=t,c=zi(l=r)/a[0],l=ki(l)/a[1],n?Math.min(h,Math.max(c,l)):Math.min(h,Math.min(c,l))):t,(void 0===i||i)&&u?(h=o,c=a,l=e,u=Math.min(h,c),u*=Math.log(1+50*Math.max(0,h/c-1))/50+1,l&&(u=Math.max(u,l),u/=Math.log(1+50*Math.max(0,l/h-1))/50+1),Vi(u,l/2,2*c)):Vi(o,e,a)}}(u,e=u/Math.pow(n,r-i),s,!l&&c,a),maxResolution:u,minResolution:e,minZoom:i,zoomFactor:n}}(t),n=(this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom,function(t){if(void 0!==t.extent)return e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint,qo(t.extent,t.constrainOnlyCenter,e);var e=Lo(t.projection,"EPSG:3857");return!0!==t.multiWorld&&e.isGlobal()?((t=e.getExtent().slice())[0]=-1/0,t[2]=1/0,qo(t,!1,!1)):Zo}(t)),o=(r=r.constraint,void 0===(o=t).enableRotation||o.enableRotation?void 0===(o=o.constrainRotation)||!0===o?function(t){var e=function(t){return t*Math.PI/180}(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}():!1!==o&&"number"==typeof o?function(t){var e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?Math.floor(t/e+.5)*e:void 0}}(o):$o:Jo);this.constraints_={center:n,resolution:r,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e,i,r=this.padding_,n=(this.padding_=t,this.getCenter());n&&(t=t||[0,0,0,0],r=r||[0,0,0,0],e=(i=this.getResolution())/2*(t[3]-r[3]+r[1]-t[1]),i=i/2*(t[0]-r[0]+r[2]-t[2]),this.setCenterInternal([n[0]+e,n[1]-i]))}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),fr({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),i=0;i<e.length;++i){var r=arguments[i];r.center&&((r=fr({},r)).center=Xo(r.center,this.getProjection())),r.anchor&&((r=fr({},r)).anchor=Xo(r.anchor,this.getProjection())),e[i]=r}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){for(var e,i=arguments.length,r=(1<i&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),0);r<i&&!this.isDef();++r){var n=arguments[r];n.center&&this.setCenterInternal(n.center),void 0!==n.zoom?this.setZoom(n.zoom):n.resolution&&this.setResolution(n.resolution),void 0!==n.rotation&&this.setRotation(n.rotation)}if(r===i)e&&as(e,!0);else{for(var o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,u=this.targetRotation_,h=[];r<i;++r){var l=arguments[r],c={start:o,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1e3,easing:l.easing||is,callback:e};l.center&&(c.sourceCenter=s,c.targetCenter=l.center.slice(),s=c.targetCenter),void 0!==l.zoom?(c.sourceResolution=a,c.targetResolution=this.getResolutionForZoom(l.zoom),a=c.targetResolution):l.resolution&&(c.sourceResolution=a,c.targetResolution=l.resolution,a=c.targetResolution),void 0!==l.rotation&&(c.sourceRotation=u,l=Yi(l.rotation-u+Math.PI,2*Math.PI)-Math.PI,c.targetRotation=u+l,u=c.targetRotation),function(t){if(!t.sourceCenter||!t.targetCenter||cn(t.sourceCenter,t.targetCenter))return t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}(c)?c.complete=!0:o+=c.duration,h.push(c)}this.animations_.push(h),this.setHint(0,1),this.updateAnimations_()}}},{key:"getAnimating",value:function(){return 0<this.hints_[0]}},{key:"getInteracting",value:function(){return 0<this.hints_[1]}},{key:"cancelAnimations",value:function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,i=this.animations_.length;e<i;++e){var r=this.animations_[e];if(r[0].callback&&as(r[0].callback,!1),!t)for(var n=0,o=r.length;n<o;++n){var s=r[n];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;0<=i;--i){for(var r,n=this.animations_[i],o=!0,s=0,a=n.length;s<a;++s){var u=n[s];if(!u.complete){var h,l,c,f,A=t-u.start;A=(1<=(A=0<u.duration?A/u.duration:1)?(u.complete=!0,A=1):o=!1,u.easing(A));if(u.sourceCenter&&(l=u.sourceCenter[0],f=u.sourceCenter[1],h=u.targetCenter[0],c=u.targetCenter[1],this.nextCenter_=u.targetCenter,this.targetCenter_=[l+A*(h-l),f+A*(c-f)]),u.sourceResolution&&u.targetResolution&&(h=1===A?u.targetResolution:u.sourceResolution+A*(u.targetResolution-u.sourceResolution),u.anchor&&(l=this.getViewportSize_(this.getRotation()),c=this.constraints_.resolution(h,0,l,!0),this.targetCenter_=this.calculateCenterZoom(c,u.anchor)),this.nextResolution_=u.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)),void 0!==u.sourceRotation&&void 0!==u.targetRotation&&(f=1===A?Yi(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+A*(u.targetRotation-u.sourceRotation),u.anchor&&(A=this.constraints_.rotation(f,!0),this.targetCenter_=this.calculateCenterRotate(A,u.anchor)),this.nextRotation_=u.targetRotation,this.targetRotation_=f),this.applyTargetState_(!0),e=!0,!u.complete)break}}o&&(this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN,r=n[0].callback)&&as(r,!0)}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var i,r,n,o=this.getCenterInternal();return void 0!==o&&(o=i=[o[0]-e[0],o[1]-e[1]],t-=this.getRotation(),r=Math.cos(t),t=Math.sin(t),n=o[0]*r-o[1]*t,r=o[1]*r+o[0]*t,o[0]=n,o[1]=r,t=e,(n=i)[0]+=+t[0],n[1]+=+t[1]),i}},{key:"calculateCenterZoom",value:function(t,e){var i,r=this.getCenterInternal(),n=this.getResolution();return void 0!==r&&void 0!==n?[e[0]-t*(e[0]-r[0])/n,e[1]-t*(e[1]-r[1])/n]:i}},{key:"getViewportSize_",value:function(t){var e,i,r=this.viewportSize_;return t?(e=r[0],i=r[1],[Math.abs(e*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(e*Math.sin(t))+Math.abs(i*Math.cos(t))]):r}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t&&Yo(t,this.getProjection())}},{key:"getCenterInternal",value:function(){return this.get(ao.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){var e;return t=t=this.calculateExtentInternal(t),e=this.getProjection(),Ko?zo(t,e,Ko):t}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal(),i=(bi(e,1),this.getResolution()),r=(bi(void 0!==i,2),this.getRotation());return bi(void 0!==r,3),Li(e,i,r,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(ao.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal(Wo(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var i=zi(t)/e[0];t=ki(t)/e[1];return Math.max(i,t)}},{key:"getResolutionForValueFunction",value:function(t){var e=t||2,i=this.getConstrainedResolution(this.maxResolution_),r=(t=this.minResolution_,Math.log(i/t)/Math.log(e));return function(t){return i/Math.pow(e,t*r)}}},{key:"getRotation",value:function(){return this.get(ao.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=(t=this.minResolution_,Math.log(i/t)/e);return function(t){return Math.log(i/t)/e/r}}},{key:"getViewportSizeMinusPadding_",value:function(t){t=this.getViewportSize_(t);var e=this.padding_;return e?[t[0]-e[1]-e[3],t[1]-e[0]-e[2]]:t}},{key:"getState",value:function(){var t,e=this.getProjection(),i=this.getResolution(),r=this.getRotation(),n=this.getCenterInternal(),o=this.padding_;return o&&(t=this.getViewportSizeMinusPadding_(),n=us(n,this.getViewportSize_(),[t[0]/2+o[3],t[1]/2+o[0]],i,r)),{center:n.slice(0),projection:void 0!==e?e:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e?this.getZoomForResolution(e):t}},{key:"getZoomForResolution",value:function(t){var e,i,r=this.minZoom_||0;return i=this.resolutions_?(i=oi(this.resolutions_,t,1),e=this.resolutions_[r=i],i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]):(e=this.maxResolution_,this.zoomFactor_),r+Math.log(e/t)/Math.log(i)}},{key:"getResolutionForZoom",value:function(t){var e,i;return this.resolutions_?this.resolutions_.length<=1?0:(e=Vi(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1],this.resolutions_[e]/Math.pow(i,Vi(t-e,0,1))):this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){this.fitInternal(t,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),i=Math.cos(e),r=Math.sin(-e),n=t.getFlatCoordinates(),o=t.getStride(),s=1/0,a=1/0,u=-1/0,h=-1/0,l=0,c=n.length;l<c;l+=o){var f=n[l]*i-n[l+1]*r,A=n[l]*r+n[l+1]*i;s=Math.min(s,f),a=Math.min(a,A),u=Math.max(u,f),h=Math.max(h,A)}return[s,a,u,h]}},{key:"fitInternal",value:function(t,e){var i=(i=(e=e||{}).size)||this.getViewportSizeMinusPadding_(),r=void 0!==e.padding?e.padding:[0,0,0,0],n=void 0!==e.nearest&&e.nearest,o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;t=this.rotatedExtentForGeometry(t),i=this.getResolutionForExtentInternal(t,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]),i=isNaN(i)?o:Math.max(i,o),i=this.getConstrainedResolution(i,n?0:1),o=this.getRotation(),n=Math.sin(o),o=Math.cos(o),(t=Ui(t))[0]+=(r[1]-r[3])/2*i,t[1]+=(r[0]-r[2])/2*i,r=t[0]*o-t[1]*n,o=t[1]*o+t[0]*n,t=this.getConstrainedCenter([r,o],i),n=e.callback||ui;void 0!==e.duration?this.animateInternal({resolution:i,center:t,duration:e.duration,easing:e.easing},n):(this.targetResolution_=i,this.targetCenter_=t,this.applyTargetState_(!1,!0),as(n,!0))}},{key:"centerOn",value:function(t,e,i){this.centerOnInternal(Xo(t,this.getProjection()),e,i)}},{key:"centerOnInternal",value:function(t,e,i){this.setCenterInternal(us(t,e,i,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,i,r){var n,o=this.padding_;return o&&t&&(r=us(t,r,[(r=this.getViewportSizeMinusPadding_(-i))[0]/2+o[3],r[1]/2+o[0]],e,i),n=[t[0]-r[0],t[1]-r[1]]),n}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=Yo(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&Xo(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation());r=this.constraints_.resolution(this.targetResolution_*t,0,r,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e=e&&Xo(e,this.getProjection()),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var i=this.getAnimating()||this.getInteracting();i=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t&&Xo(t,this.getProjection()))}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){e=this.getAnimating()||this.getInteracting()||e;var i=this.constraints_.rotation(this.targetRotation_,e),r=this.getViewportSize_(i),n=this.constraints_.resolution(this.targetResolution_,0,r,e);e=this.constraints_.center(this.targetCenter_,n,r,e,this.calculateCenterShift(this.targetCenter_,n,i,r));this.get(ao.ROTATION)!==i&&this.set(ao.ROTATION,i),this.get(ao.RESOLUTION)!==n&&(this.set(ao.RESOLUTION,n),this.set("zoom",this.getZoom(),!0)),e&&this.get(ao.CENTER)&&cn(this.get(ao.CENTER),e)||this.set(ao.CENTER,e),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,i){t=void 0!==t?t:200,e=e||0;var r=this.constraints_.rotation(this.targetRotation_),n=this.getViewportSize_(r);e=this.constraints_.resolution(this.targetResolution_,e,n),n=this.constraints_.center(this.targetCenter_,e,n,!1,this.calculateCenterShift(this.targetCenter_,e,r,n));0!==t||this.cancelAnchor_?(i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===e&&this.getRotation()===r&&this.getCenterInternal()&&cn(this.getCenterInternal(),n)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:n,resolution:e,duration:t,easing:es,anchor:i}))):(this.targetResolution_=e,this.targetRotation_=r,this.targetCenter_=n,this.applyTargetState_())}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(1,1)}},{key:"endInteraction",value:function(t,e,i){i=i&&Xo(i,this.getProjection()),this.endInteractionInternal(t,e,i)}},{key:"endInteractionInternal",value:function(t,e,i){this.setHint(1,-1),this.resolveConstraints(t,e,i)}},{key:"getConstrainedCenter",value:function(t,e){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}},{key:"getConstrainedZoom",value:function(t,e){return t=this.getResolutionForZoom(t),this.getZoomForResolution(this.getConstrainedResolution(t,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}])&&ns(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function ls(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function cs(t){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===cs(t=function(t,e){if("object"!==cs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==cs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function As(){return(As="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ms(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function ps(t,e){return(ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ds(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ms(t){return(ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ys(t){t instanceof ln?t.setMapInternal(null):t instanceof Hn&&t.getLayers().forEach(ys)}var gs=function(){var t=r,e=jr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ps(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ms(t);if(i=e?(i=ms(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===cs(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return ds(r)}}(r);function r(t){var e;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(e=i.call(this)).on,e.once,e.size_=t.size,void 0===e.size_&&(e.size_=[2e3,2e3]),e.un,o={},s=(n=t).layers&&"function"==typeof n.layers.getLayers?n.layers:new Hn({layers:n.layers}),o[Xn.LAYERGROUP]=s,o[Xn.TARGET]=n.target,o[Xn.VIEW]=n.view instanceof hs?n.view:new hs;var n,o,s={values:o},a=(e.renderComplete_,e.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,e.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:fi,e.postRenderTimeoutHandle_,e.animationDelayKey_,e.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(ds(e)),e.coordinateToPixelTransform_=[1,0,0,1,0,0],e.pixelToCoordinateTransform_=[1,0,0,1,0,0],e.frameIndex_=0,e.frameState_=null,e.previousExtent_=null,e.viewPropertyListenerKey_=null,e.viewChangeListenerKey_=null,e.layerGroupPropertyListenerKeys_=null,e.moveTolerance_=t.moveTolerance,e.targetChangeHandlerKeys_=null,e.overlayIdIndex_={},e.renderer_=null,e.postRenderFunctions_=[],e.tileQueue_=new no(e.getTilePriority.bind(ds(e)),e.handleTileChange_.bind(ds(e))),e.addChangeListener(Xn.VIEW,e.handleViewChanged_),e.addChangeListener(Xn.TARGET,e.handleTargetChanged_),e.setProperties(s.values),ds(e));return!t.view||t.view instanceof hs||t.view.then(function(t){a.setView(new hs(t))}),e}return t=r,(e=[{key:"createRenderer",value:function(){throw new Error("Use a map type that has a createRenderer method")}},{key:"addLayer",value:function(t){this.getLayerGroup().getLayers().push(t)}},{key:"handleLayerAdd_",value:function(t){!function t(e,i){if(e instanceof ln)e.setMapInternal(i);else if(e instanceof Hn)for(var r=e.getLayers().getArray(),n=0,o=r.length;n<o;++n)t(r[n],i)}(t.layer,this)}},{key:"addOverlay",value:function(t){this.getOverlays().push(t)}},{key:"addOverlayInternal_",value:function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}},{key:"disposeInternal",value:function(){this.setTarget(null),As(ms(r.prototype),"disposeInternal",this).call(this)}},{key:"getAllLayers",value:function(){var t=[];return function e(i){i.forEach(function(i){i instanceof Hn?e(i.getLayers()):t.push(i)})}(this.getLayers()),t}},{key:"getTarget",value:function(){return this.get(Xn.TARGET)}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(t){return void 0!==(t=this.overlayIdIndex_[t.toString()])?t:null}},{key:"getLayerGroup",value:function(){return this.get(Xn.LAYERGROUP)}},{key:"setLayers",value:function(t){var e=this.getLayerGroup();t instanceof Dn?e.setLayers(t):((e=e.getLayers()).clear(),e.extend(t))}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,i=t.length;e<i;++e){var r=t[e].layer;if(!r.getRenderer().ready)return!0;if((r=r.getSource())&&r.loading)return!0}return!1}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.size_}},{key:"getView",value:function(){return this.get(Xn.VIEW)}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getTilePriority",value:function(t,e,i,r){return t=t,e=e,i=i,r=r,(n=this.frameState_)&&e in n.wantedTiles&&n.wantedTiles[e][t.getKey()]?(e=n.viewState.center,t=i[0]-e[0],n=i[1]-e[1],65536*Math.log(r)+Math.sqrt(t*t+n*n)/r):1/0;var n}},{key:"handlePostRender",value:function(){for(var t,e,i,r=this.frameState_,n=this.tileQueue_,o=(n.isEmpty()||(i=e=this.maxTilesLoading_,r&&((t=r.viewHints)[0]||t[1])&&(e=(t=8<Date.now()-r.time)?0:8,i=t?0:2),n.getTilesLoading()<e&&(n.reprioritize(),n.loadMoreTiles(e,i))),r&&this.hasListener(tn)&&!r.animate&&this.renderComplete_&&this.renderer_.dispatchRenderEvent(tn,r),this.postRenderFunctions_),s=0,a=o.length;s<a;++s)o[s](this,r);o.length=0}},{key:"handleTargetChanged_",value:function(){this.renderer_||(this.renderer_=this.createRenderer()),this.targetChangeHandlerKeys_=[xr(document,"resize",this.updateSize,this)],this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&(_r(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(_r(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=xr(t,cr,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=xr(t,vr,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"removeLayer",value:function(t){return this.getLayerGroup().getLayers().remove(t)}},{key:"handleLayerRemove_",value:function(t){ys(t.layer)}},{key:"removeOverlay",value:function(t){return this.getOverlays().remove(t)}},{key:"renderFrame_",value:function(t){var e,i=this,r=this.getSize(),n=this.getView(),o=this.frameState_,s=null;void 0!==r&&0<(e=r)[0]&&0<e[1]&&n&&n.isDef()&&(e=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),n=n.getState(),s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Li(n.center,n.resolution,n.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:n,viewHints:e,wantedTiles:{},mapId:ci(this),renderTargets:{}},n.nextCenter)&&n.nextResolution&&(t=isNaN(n.nextRotation)?n.rotation:n.nextRotation,s.nextExtent=Li(n.nextCenter,n.nextResolution,t,r)),this.frameState_=s,this.renderer_.renderFrame(s),!s||(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),!o||this.previousExtent_&&(function(t){return t[2]<t[0]||t[3]<t[1]}(this.previousExtent_)||Oi(s.extent,this.previousExtent_))||(this.dispatchEvent(new Yn("movestart",this,o)),this.previousExtent_=Pi(this.previousExtent_)),!this.previousExtent_)||s.viewHints[0]||s.viewHints[1]||Oi(s.extent,this.previousExtent_)||(this.dispatchEvent(new Yn("moveend",this,s)),e=s.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice()),this.dispatchEvent(new Yn("postrender",this,s)),this.renderComplete_=!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){i.postRenderTimeoutHandle_=void 0,i.handlePostRender()},0))}},{key:"setSize",value:function(t){this.set(Xn.SIZE,t)}},{key:"setTarget",value:function(t){this.set(Xn.TARGET,t)}},{key:"setView",value:function(t){var e;!t||t instanceof hs?this.set(Xn.VIEW,t):(this.set(Xn.VIEW,new hs),e=this,t.then(function(t){e.setView(new hs(t))}))}},{key:"updateSize",value:function(){var t=this.size_;this.setSize(t),this.updateViewportSize_()}},{key:"updateViewportSize_",value:function(){var t,e=this.getView();e&&(t=this.size_,e.setViewportSize(t))}}])&&fs(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function vs(t){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===vs(t=function(t,e){if("object"!==vs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==vs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function ws(t,e){return(ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ms=function(){var t=r,e=gs;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ws(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=xs(t);if(i=e?(i=xs(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===vs(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){if(this instanceof r)return t=fr({},t),i.call(this,t);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"createRenderer",value:function(){return new Mn(this)}}])&&bs(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function _s(t){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ss(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===_s(t=function(t,e){if("object"!==_s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==_s(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Bs(t,e){return(Bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Es(t){return(Es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cs=function(){var t=r,e=gr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bs(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Es(t);if(i=e?(i=Es(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===_s(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){var o;if(this instanceof r)return n=n||{},(o=i.call(this)).tileCoord=t,o.state=e,o.interimTile=null,o.key="",o.transition_=void 0===n.transition?250:n.transition,o.transitionStarts_={},o.interpolate=!!n.interpolate,o;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"changed",value:function(){this.dispatchEvent(vr)}},{key:"release",value:function(){}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){if(this.interimTile){var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t}while(t=t.interimTile)}return this}},{key:"refreshInterimChain",value:function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}}while(1!=t.getState()&&0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}},{key:"load",value:function(){hi()}},{key:"getAlpha",value:function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else this.transitionStarts_[t]=i=e;return(t=e-i+1e3/60)>=this.transition_?1:ts(t/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}])&&Ss(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Ts(t,e,i,r){return i=i&&i.length?i.shift():Ai?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}function Fs(t){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Fs(t=function(t,e){if("object"!==Fs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Fs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Os(t,e){return(Os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ds(t){return(Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rs=function(){var t=r,e=Cs;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Os(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Ds(t);if(i=e?(i=Ds(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Fs(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n,o,s,a){if(this instanceof r)return(t=i.call(this,t,e,a)).crossOrigin_=o,t.src_=n,t.key=n,t.image_=new Image,null!==o&&(t.image_.crossOrigin=o),t.unlisten_=null,t.tileLoadFunction_=s,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=Ts(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){var t,e,i,r,n,o,s;3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_)&&(this.image_.crossOrigin=this.crossOrigin_),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(t=this.image_,e=this.handleImageLoad_.bind(this),i=this.handleImageError_.bind(this),r=!0,n=!1,o=!1,s=[Mr(t,wr,function(){o=!0,n||e()})],t.src&&pi?(n=!0,t.decode().then(function(){r&&e()}).catch(function(t){r&&(o?e:i)()})):s.push(Mr(t,br,i)),function(){r=!1,s.forEach(_r)}))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}])&&Ps(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Is(t){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Us(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Is(t=function(t,e){if("object"!==Is(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Is(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Ls=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}var e,i;return e=t,(i=[{key:"canExpireCache",value:function(){return 0<this.highWaterMark&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(t){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(t){return this.entries_.hasOwnProperty(t)}},{key:"forEach",value:function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer}},{key:"get",value:function(t,e){return bi(void 0!==(t=this.entries_[t]),15),t!==this.newest_&&(t===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(t.newer.older=t.older,t.older.newer=t.newer),t.newer=null,t.older=this.newest_,this.newest_.newer=t,this.newest_=t),t.value_}},{key:"remove",value:function(t){var e=this.entries_[t];return bi(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){for(var t=new Array(this.count_),e=0,i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}},{key:"getValues",value:function(){for(var t=new Array(this.count_),e=0,i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"pop",value:function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}},{key:"replace",value:function(t,e){this.get(t),this.entries_[t].value_=e}},{key:"set",value:function(t,e){bi(!(t in this.entries_),16),e={key_:t,newer:null,older:this.newest_,value_:e},this.newest_?this.newest_.newer=e:this.oldest_=e,this.newest_=e,this.entries_[t]=e,++this.count_}},{key:"setSize",value:function(t){this.highWaterMark=t}}])&&Us(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ks(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function js(t,e,i){return t+"/"+e+"/"+i}function Qs(t){return(Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ns(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Qs(t=function(t,e){if("object"!==Qs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Qs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function zs(t,e){return(zs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hs(t){return(Hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vs=function(){var t=r,e=Ls;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zs(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Hs(t);if(i=e?(i=Hs(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Qs(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"expireCache",value:function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}},{key:"pruneExceptNewestZ",value:function(){var t;0!==this.getCount()&&(t=this.peekFirstKey().split("/").map(Number)[0],this.forEach(function(e){var i;e.tileCoord[0]!==t&&(this.remove(js((i=e.tileCoord)[0],i[1],i[2])),e.release())}.bind(this)))}}])&&Ns(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Gs(t){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ks(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Gs(t=function(t,e){if("object"!==Gs(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Gs(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Ys(t,e){return(Ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ws(t){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qs(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Zs=function(){var t=r,e=jr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ys(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Ws(t);if(i=e?(i=Ws(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Gs(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return Xs(r)}}(r);function r(t){var e;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(e=i.call(this)).projection=Io(t.projection),e.attributions_=qs(t.attributions),e.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,e.loading=!1,e.state_=void 0!==t.state?t.state:rn,e.wrapX_=void 0!==t.wrapX&&t.wrapX,e.interpolate_=!!t.interpolate,e.viewResolver=null,e.viewRejector=null;var n=Xs(e);return e.viewPromise_=new Promise(function(t,e){n.viewResolver=t,n.viewRejector=e}),e}return t=r,(e=[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(){return hi()}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=qs(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}])&&Ks(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Js(t){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Js(t=function(t,e){if("object"!==Js(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Js(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var ta=function(){function t(e,i,r,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.minX=e,this.maxX=i,this.minY=r,this.maxY=n}var e,i;return e=t,(i=[{key:"contains",value:function(t){return this.containsXY(t[1],t[2])}},{key:"containsTileRange",value:function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}},{key:"containsXY",value:function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}},{key:"equals",value:function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}},{key:"extend",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}])&&$s(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ea(t,e,i,r,n){return void 0!==n?(n.minX=t,n.maxX=e,n.minY=i,n.maxY=r,n):new ta(t,e,i,r)}var ia=ta;function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ra(t=function(t,e){if("object"!==ra(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ra(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var oa=[0,0,0],sa=function(){function t(e){var i,r,n;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,bi((i=this.resolutions_,!0,r=function(t,e){return e-t}||ni,i.every(function(t,e){return 0===e||!(0<(e=r(i[e-1],t))||0===e)})),17),!e.origins)for(var o=0,s=this.resolutions_.length-1;o<s;++o)if(n){if(this.resolutions_[o]/this.resolutions_[o+1]!==n){n=void 0;break}}else n=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,bi(this.origins_.length==this.resolutions_.length,20));var a=e.extent;void 0===a||this.origin_||this.origins_||(this.origin_=Qi(a)),bi(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,bi(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:ho,bi(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(t,e){return t=new ia(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1)),a&&(e=this.getTileRangeForExtentAndZ(a,e),t.minX=Math.max(e.minX,t.minX),t.maxX=Math.min(e.maxX,t.maxX),t.minY=Math.max(e.minY,t.minY),t.maxY=Math.min(e.maxY,t.maxY)),t},this):a&&this.calculateTileRanges_(a)}var e,i;return e=t,(i=[{key:"forEachTileCoord",value:function(t,e,i){for(var r=this.getTileRangeForExtentAndZ(t,e),n=r.minX,o=r.maxX;n<=o;++n)for(var s=r.minY,a=r.maxY;s<=a;++s)i([e,n,s])}},{key:"forEachTileCoordParentTileRange",value:function(t,e,i,r){var n,o,s=null,a=t[0]-1;for(2===this.zoomFactor_?(n=t[1],o=t[2]):s=this.getTileCoordExtent(t,r);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?ea(n=Math.floor(n/2),n,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(s,a,i)))return!0;--a}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(t){return this.origin_||this.origins_[t]}},{key:"getResolution",value:function(t){return this.resolutions_[t]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(t,e,i){var r;return t[0]<this.maxZoom?2===this.zoomFactor_?ea(r=2*t[1],1+r,r=2*t[2],1+r,e):(r=this.getTileCoordExtent(t,i||this.tmpExtent_),this.getTileRangeForExtentAndZ(r,t[0]+1,e)):null}},{key:"getTileRangeForTileCoordAndZ",value:function(t,e,i){var r,n,o,s,a,u;return e>this.maxZoom||e<this.minZoom?null:(u=t[0],r=t[1],n=t[2],e===u?ea(r,n,r,n,i):this.zoomFactor_?(o=Math.pow(this.zoomFactor_,e-u),s=Math.floor(r*o),a=Math.floor(n*o),e<u?ea(s,s,a,a,i):ea(s,Math.floor(o*(r+1))-1,a,Math.floor(o*(n+1))-1,i)):(u=this.getTileCoordExtent(t,this.tmpExtent_),this.getTileRangeForExtentAndZ(u,e,i)))}},{key:"getTileRangeExtent",value:function(t,e,i){var r=this.getOrigin(t),n=this.getResolution(t),o=(t=ls(this.getTileSize(t),this.tmpSize_),r[0]+e.minX*t[0]*n),s=r[0]+(e.maxX+1)*t[0]*n;return Fi(o,r[1]+e.minY*t[1]*n,s,r[1]+(e.maxY+1)*t[1]*n,i)}},{key:"getTileRangeForExtentAndZ",value:function(t,e,i){var r=oa,n=(this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r),r[1]),o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),ea(n,r[1],o,r[2],i)}},{key:"getTileCoordCenter",value:function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=ls(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}},{key:"getTileCoordExtent",value:function(t,e){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=ls(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*n[0]*r;return Fi(o,i=i[1]-(t[2]+1)*n[1]*r,o+n[0]*r,i+n[1]*r,e)}},{key:"getTileCoordForCoordAndResolution",value:function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}},{key:"getTileCoordForXYAndResolution_",value:function(t,e,i,r,n){var o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),u=ls(this.getTileSize(o),this.tmpSize_);t=s*(t-a[0])/i/u[0],s=s*(a[1]-e)/i/u[1],s=r?(t=qi(t,5)-1,qi(s,5)-1):(t=Wi(t,5),Wi(s,5));return ks(o,t,s,n)}},{key:"getTileCoordForXYAndZ_",value:function(t,e,i,r,n){var o=this.getOrigin(i),s=this.getResolution(i),a=ls(this.getTileSize(i),this.tmpSize_);t=(t-o[0])/s/a[0],o=(o[1]-e)/s/a[1],o=r?(t=qi(t,5)-1,qi(o,5)-1):(t=Wi(t,5),Wi(o,5));return ks(i,t,o,n)}},{key:"getTileCoordForCoordAndZ",value:function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}},{key:"getTileCoordResolution",value:function(t){return this.resolutions_[t[0]]}},{key:"getTileSize",value:function(t){return this.tileSize_||this.tileSizes_[t]}},{key:"getFullTileRange",value:function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}},{key:"getZForResolution",value:function(t,e){return Vi(oi(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}},{key:"calculateTileRanges_",value:function(t){for(var e=this.resolutions_.length,i=new Array(e),r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}])&&na(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function aa(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,i,r){return r=void 0!==r?r:_i.TOP_LEFT,e=ua(t,e,i),new sa({extent:t,origin:function(t,e){var i;return e===_i.BOTTOM_LEFT?i=Ri(t):e===_i.BOTTOM_RIGHT?i=Ii(t):e===_i.TOP_LEFT?i=Qi(t):e===_i.TOP_RIGHT?i=Ni(t):bi(!1,13),i}(t,r),resolutions:e,tileSize:i})}(ha(t),void 0,void 0,void 0),t.setDefaultTileGrid(e)),e}function ua(t,e,i,r){e=void 0!==e?e:uo;for(var n=ki(t),o=(t=zi(t),i=ls(void 0!==i?i:ho),0<r?r:Math.max(t/i[0],n/i[1])),s=e+1,a=new Array(s),u=0;u<s;++u)a[u]=o/Math.pow(2,u);return a}function ha(t){var e=(t=Io(t)).getExtent();return e||Fi(-(t=180*oo[so.DEGREES]/t.getMetersPerUnit()),-t,t,t)}function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===la(t=function(t,e){if("object"!==la(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==la(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Aa(t,e,i){return e&&fa(t.prototype,e),i&&fa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function pa(){return(pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ya(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function da(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function ma(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ya(t);i=e?(i=ya(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this;if(i&&("object"===la(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function ya(t){return(ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ze=function(){da(e,Zs);var t=ma(e);function e(i){var r;return ca(this,e),(r=t.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,projection:i.projection,state:i.state,wrapX:i.wrapX,interpolate:i.interpolate})).on,r.once,r.un,r.opaque_=void 0!==i.opaque&&i.opaque,r.tilePixelRatio_=void 0!==i.tilePixelRatio?i.tilePixelRatio:1,r.tileGrid=void 0!==i.tileGrid?i.tileGrid:null,r.tileGrid&&ls(r.tileGrid.getTileSize(r.tileGrid.getMinZoom()),[256,256]),r.tileCache=new Vs(i.cacheSize||0),r.tmpSize=[0,0],r.key_=i.key||"",r.tileOptions={transition:i.transition,interpolate:i.interpolate},r.zDirection=i.zDirection||0,r}return Aa(e,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(t,e){(t=this.getTileCacheForProjection(t))&&t.expireCache(e)}},{key:"forEachLoadedTile",value:function(t,e,i,r){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var o,s,a=!0,u=i.minX;u<=i.maxX;++u)for(var h=i.minY;h<=i.maxY;++h)o=js(e,u,h),s=!1,(s=n.containsKey(o)?(s=2===(o=n.get(o)).getState())&&!1!==r(o):s)||(a=!1);return a}},{key:"getGutterForProjection",value:function(t){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(t){this.key_!==t&&(this.key_=t,this.changed())}},{key:"getOpaque",value:function(t){return this.opaque_}},{key:"getResolutions",value:function(){return this.tileGrid?this.tileGrid.getResolutions():null}},{key:"getTile",value:function(t,e,i,r,n){return hi()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(t){return this.tileGrid||aa(t)}},{key:"getTileCacheForProjection",value:function(t){return bi(ko(this.getProjection(),t),68),this.tileCache}},{key:"getTilePixelRatio",value:function(t){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(t,e,i){i=this.getTileGridForProjection(i),e=this.getTilePixelRatio(e),i=ls(i.getTileSize(t),this.tmpSize);return 1==e?i:(t=i,i=e,(e=void 0===(e=this.tmpSize)?[0,0]:e)[0]=t[0]*i+.5|0,e[1]=t[1]*i+.5|0,e)}},{key:"getTileCoordForTileUrlFunction",value:function(t,e){e=void 0!==e?e:this.getProjection();var i,r,n,o,s=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(i=s,e=e,n=(r=t)[0],o=i.getTileCoordCenter(r),t=Ei(e=ha(e),o)?r:(r=zi(e),e=Math.ceil((e[0]-o[0])/r),o[0]+=r*e,i.getTileCoordForCoordAndZ(o,n))),function(t,e){var i=t[0],r=t[1];t=t[2];if(!(e.getMinZoom()>i||i>e.getMaxZoom()))return!(e=e.getFullTileRange(i))||e.containsXY(r,t)}(t,s)?t:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),pa(ya(e.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(t,e){t>(e=this.getTileCacheForProjection(e)).highWaterMark&&(e.highWaterMark=t)}},{key:"useTile",value:function(t,e,i,r){}}]),e}();var ga=function(){da(e,lr);var t=ma(e);function e(i,r){return ca(this,e),(i=t.call(this,i)).tile=r,i}return Aa(e)}(),va=Ze;function ba(t){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ba(t=function(t,e){if("object"!==ba(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ba(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function xa(t,e){return(xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ma(t){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _a=function(){var t=r,e=va;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xa(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Ma(t);if(i=e?(i=Ma(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===ba(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).generateTileUrlFunction_=e.tileUrlFunction===r.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(t){var e,i=ci(t=t.target),r=t.getState();1==r?(this.tileLoadingKeys_[i]=!0,e="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=e&&this.dispatchEvent(new ga(e,t))}},{key:"setTileLoadFunction",value:function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}},{key:"setTileUrlFunction",value:function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}},{key:"setUrl",value:function(t){t=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i)for(var r=i[1].charCodeAt(0),n=i[2].charCodeAt(0),o=r;o<=n;++o)e.push(t.replace(i[0],String.fromCharCode(o)));else if(i=/\{(\d+)-(\d+)\}/.exec(t))for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));else e.push(t);return e}(t),this.urls=t,this.setUrls(t)}},{key:"setUrls",value:function(t){var e=(this.urls=t).join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var i,r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=function(t,e){var i=/\{z\}/g,r=/\{x\}/g,n=/\{y\}/g,o=/\{-y\}/g;return function(s,a,u){if(s)return t.replace(i,s[0].toString()).replace(r,s[1].toString()).replace(n,s[2].toString()).replace(o,function(){var t=s[0];return bi(t=e.getFullTileRange(t),55),(t.getHeight()-s[2]-1).toString()})}}(t[o],e);return 1!==(i=n).length?function(t,e,r){var n;if(t)return n=Yi((t[1]<<t[0])+t[2],i.length),i[n](t,e,r)}:i[0]}(t,this.tileGrid),e):this.setKey(e)}},{key:"tileUrlFunction",value:function(t,e,i){}},{key:"useTile",value:function(t,e,i){t=js(t,e,i),this.tileCache.containsKey(t)&&this.tileCache.get(t)}}])&&wa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ba(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Sa(t=function(t,e){if("object"!==Sa(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Sa(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Ea(){return(Ea="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ta(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function Ca(t,e){return(Ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fa(t,e){t.getImage().src=e}var Pa=function(){var t=r,e=_a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ca(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Ta(t);if(i=e?(i=Ta(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Sa(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return e=void 0===t.imageSmoothing||t.imageSmoothing,void 0!==t.interpolate&&(e=t.interpolate),(e=i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction||Fa,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:e,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,e.tileClass=void 0!==t.tileClass?t.tileClass:Rs,e.tileCacheForProjection={},e.tileGridForProjection={},e.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,e.renderReprojectionEdges_=!1,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(t,e){var i,r=this.getTileCacheForProjection(t);for(i in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[i];n.expireCache(n==r?e:{})}}},{key:"getGutterForProjection",value:function(t){return this.getProjection()&&t&&!ko(this.getProjection(),t)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var t=Ea(Ta(r.prototype),"getKey",this).call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t}},{key:"getOpaque",value:function(t){return!(this.getProjection()&&t&&!ko(this.getProjection(),t))&&Ea(Ta(r.prototype),"getOpaque",this).call(this,t)}},{key:"getTileGridForProjection",value:function(t){var e=this.getProjection();return!this.tileGrid||e&&!ko(e,t)?((e=ci(t))in this.tileGridForProjection||(this.tileGridForProjection[e]=aa(t)),this.tileGridForProjection[e]):this.tileGrid}},{key:"getTileCacheForProjection",value:function(t){var e=this.getProjection();return!e||ko(e,t)?this.tileCache:((e=ci(t))in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Vs(this.tileCache.highWaterMark)),this.tileCacheForProjection[e])}},{key:"createTile_",value:function(t,e,i,r,n,o){return t=[t,e,i],i=(e=this.getTileCoordForTileUrlFunction(t,n))?this.tileUrlFunction(e,r,n):void 0,(e=new this.tileClass(t,void 0!==i?0:4,void 0!==i?i:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions)).key=o,e.addEventListener(vr,this.handleTileChange.bind(this)),e}},{key:"getTile",value:function(t,e,i,r,n){var o=this.getProjection();return this.getTileInternal(t,e,i,r,o||n)}},{key:"getTileInternal",value:function(t,e,i,r,n){var o,s=null,a=js(t,e,i),u=this.getKey();return this.tileCache.containsKey(a)?(s=this.tileCache.get(a)).key!=u&&(o=s,s=this.createTile_(t,e,i,r,n,u),0==o.getState()?s.interimTile=o.interimTile:s.interimTile=o,s.refreshInterimChain(),this.tileCache.replace(a,s)):(s=this.createTile_(t,e,i,r,n,u),this.tileCache.set(a,s)),s}},{key:"setRenderReprojectionEdges",value:function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}}])&&Ba(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Da(t,e){return(Da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ra(t){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ia=function(){var t=r,e=Pa;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Da(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Ra(t);if(i=e?(i=Ra(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Oa(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e,n,o,s;if(this instanceof r)return e=void 0===(t=t||{}).imageSmoothing||t.imageSmoothing,void 0!==t.interpolate&&(e=t.interpolate),n=void 0!==t.projection?t.projection:"EPSG:3857",o=void 0!==t.tileGrid?t.tileGrid:(s={extent:s=(o=(o={extent:ha(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})||{}).extent||Io("EPSG:3857").getExtent(),minZoom:o.minZoom,tileSize:o.tileSize,resolutions:ua(s,o.maxZoom,o.tileSize,o.maxResolution)},new sa(s)),i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:e,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection});throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function Ua(t){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function La(t,e){return(La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ja=function(){var t=r,e=Ia;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&La(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ka(t);if(i=e?(i=ka(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Ua(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e,n,o,s;if(this instanceof r)return e=void 0===(t=t||{}).imageSmoothing||t.imageSmoothing,void 0!==t.interpolate&&(e=t.interpolate),n=void 0!==t.attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],o=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",s=void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",i.call(this,{attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:o,interpolate:e,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection});throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(),Qa="preload",Na="useInterimTilesOnError";function za(t){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ha(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===za(t=function(t,e){if("object"!==za(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==za(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Va(){return(Va="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ka(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function Ga(t,e){return(Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ka(t){return(Ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ya=function(){var t=r,e=ln;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ga(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Ka(t);if(i=e?(i=Ka(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===za(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return delete(e=fr({},t=t||{})).preload,delete e.useInterimTilesOnError,(e=i.call(this,e)).on,e.once,e.un,e.setPreload(void 0!==t.preload?t.preload:0),e.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getPreload",value:function(){return this.get(Qa)}},{key:"setPreload",value:function(t){this.set(Qa,t)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(Na)}},{key:"setUseInterimTilesOnError",value:function(t){this.set(Na,t)}},{key:"getData",value:function(t){return Va(Ka(r.prototype),"getData",this).call(this,t)}}])&&Ha(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Xa(t){return(Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Xa(t=function(t,e){if("object"!==Xa(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Xa(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function qa(){return(qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$a(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function Za(t,e){return(Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ja(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $a(t){return($a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tu=function(){var t=r,e=Tr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Za(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=$a(t);if(i=e?(i=$a(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Xa(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return Ja(r)}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this)).ready=!0,e.boundHandleImageChange_=e.handleImageChange_.bind(Ja(e)),e.layer_=t,e.declutterExecutorGroup=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getFeatures",value:function(t){return hi()}},{key:"getData",value:function(t){return null}},{key:"prepareFrame",value:function(t){return hi()}},{key:"renderFrame",value:function(t,e){return hi()}},{key:"loadedTileCallback",value:function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}},{key:"createLoadedTileFinder",value:function(t,e,i){return function(r,n){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(e,r,n,o)}.bind(this)}},{key:"forEachFeatureAtCoordinate",value:function(t,e,i,r,n){}},{key:"getDataAtPixel",value:function(t,e,i){return null}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(vr,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e}},{key:"renderIfReadyAndVisible",value:function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==rn&&t.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,qa($a(r.prototype),"disposeInternal",this).call(this)}}])&&Wa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function eu(t){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iu(t,e){return(iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ru(t){return(ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nu=function(){var t=r,e=lr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iu(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ru(t);if(i=e?(i=ru(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===eu(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n,o){if(this instanceof r)return(t=i.call(this,t)).inversePixelTransform=e,t.frameState=n,t.context=o,t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function ou(t){return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function su(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ou(t=function(t,e){if("object"!==ou(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ou(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function au(){return(au="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hu(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function uu(t,e){return(uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hu(t){return(hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lu=null,cu=function(){var t=r,e=tu;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uu(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=hu(t);if(i=e?(i=hu(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===ou(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){if(this instanceof r)return(t=i.call(this,t)).container=null,t.renderedResolution,t.tempTransform=[1,0,0,1,0,0],t.pixelTransform=[1,0,0,1,0,0],t.inversePixelTransform=[1,0,0,1,0,0],t.context=null,t.containerReused=!1,t.pixelContext_=null,t.frameState=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getImageData",value:function(t,e,i){var r,n;lu||((r=document.createElement("canvas")).width=1,r.height=1,lu=r.getContext("2d")),lu.clearRect(0,0,1,1);try{lu.drawImage(t,e,i,1,1,0,0,1,1),n=lu.getImageData(0,0,1,1).data}catch(t){return null}return n}},{key:"getBackground",value:function(t){var e=this.getLayer().getBackground();return(e="function"==typeof e?e(t.viewState.resolution):e)||void 0}},{key:"useContainer",value:function(t,e,i,r){var n,o=this.getLayer().getClassName();(n=t&&t.className===o&&""===t.style.opacity&&1===i&&(!r||t.style.backgroundColor&&si(ir(t.style.backgroundColor),ir(r)))&&(i=t.firstElementChild)instanceof HTMLCanvasElement?i.getContext("2d"):n)&&n.canvas.style.transform===e?(this.container=t,this.context=n,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),this.container||((i=document.createElement("div")).className=o,(e=i.style).position="absolute",e.width="100%",e.height="100%",r&&(e.backgroundColor=r),t=(n=Ts()).canvas,i.appendChild(t),(e=t.style).position="absolute",e.left="0",e.transformOrigin="top left",this.container=i,this.context=n)}},{key:"clipUnrotated",value:function(t,e,i){var r=Qi(i),n=Ni(i),o=Ii(i);i=Ri(i);wi(e=(wi(e.coordinateToPixelTransform,r),wi(e.coordinateToPixelTransform,n),wi(e.coordinateToPixelTransform,o),wi(e.coordinateToPixelTransform,i),this.inversePixelTransform),r),wi(e,n),wi(e,o),wi(e,i),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.clip()}},{key:"dispatchRenderEvent_",value:function(t,e,i){var r=this.getLayer();r.hasListener(t)&&(t=new nu(t,this.inversePixelTransform,i,e),r.dispatchEvent(t))}},{key:"preRender",value:function(t,e){this.frameState=e,this.dispatchRenderEvent_("prerender",t,e)}},{key:"postRender",value:function(t,e){this.dispatchRenderEvent_("postrender",t,e)}},{key:"getRenderTransform",value:function(t,e,i,r,n,o,s){return r/=e,e=-t[0]+s,s=-t[1],xi(this.tempTransform,n/2,o/2,r,-r,-i,e,s)}},{key:"getDataAtPixel",value:function(t,e,i){var r=wi(this.inversePixelTransform,t.slice()),n=this.context;if((s=this.getLayer().getExtent())&&!Ei(s,wi(e.pixelToCoordinateTransform,t.slice())))return null;var o,s=Math.round(r[0]);e=Math.round(r[1]);(t=this.pixelContext_)||((r=document.createElement("canvas")).width=1,r.height=1,t=r.getContext("2d"),this.pixelContext_=t),t.clearRect(0,0,1,1);try{t.drawImage(n.canvas,s,e,1,1,0,0,1,1),o=t.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.pixelContext_=null,new Uint8Array):o}return 0===o[3]?null:o}},{key:"disposeInternal",value:function(){delete this.frameState,au(hu(r.prototype),"disposeInternal",this).call(this)}}])&&su(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function fu(t){return(fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Au(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===fu(t=function(t,e){if("object"!==fu(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==fu(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function pu(){return(pu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mu(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function du(t,e){return(du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mu(t){return(mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yu=function(){var t=r,e=cu;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&du(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=mu(t);if(i=e?(i=mu(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===fu(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this,t)).extentChanged=!0,e.renderedExtent_=null,e.renderedPixelRatio,e.renderedProjection=null,e.renderedRevision,e.renderedTiles=[],e.newTiles_=!1,e.tmpExtent=[1/0,1/0,-1/0,-1/0],e.tmpTileRange_=new ia(0,0,0,0),e.thirdMap_=t.thirdMap_,e.layercount_=t.layercount_,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"isDrawableTile",value:function(t){var e=this.getLayer();t=t.getState(),e=e.getUseInterimTilesOnError();return 2==t||4==t||3==t&&!e}},{key:"getTile",value:function(t,e,i,r){var n=r.pixelRatio,o=(r=r.viewState.projection,this.getLayer());return 3==(t=o.getSource().getTile(t,e,i,n,r)).getState()&&(o.getUseInterimTilesOnError()?0<o.getPreload()&&(this.newTiles_=!0):t.setState(2)),this.isDrawableTile(t)?t:t.getInterimTile()}},{key:"getData",value:function(t){var e=this.frameState;if(e){var i=this.getLayer(),r=wi(e.pixelToCoordinateTransform,t.slice());if(!(t=i.getExtent())||Ei(t,r))for(var n=e.pixelRatio,o=e.viewState.projection,s=(t=e.viewState,i.getRenderSource()),a=s.getTileGridForProjection(t.projection),u=s.getTilePixelRatio(e.pixelRatio),h=a.getZForResolution(t.resolution);h>=a.getMinZoom();--h){var l,c,f,A,p=a.getTileCoordForCoordAndZ(r,h),d=s.getTile(h,p[1],p[2],n,o);if(!(d instanceof Rs))return null;if(2===d.getState())return A=a.getOrigin(h),l=ls(a.getTileSize(h)),c=a.getResolution(h),f=Math.floor(u*((r[0]-A[0])/c-p[1]*l[0])),A=Math.floor(u*((A[1]-r[1])/c-p[2]*l[1])),this.getImageData(d.getImage(),f,A)}}return null}},{key:"loadedTileCallback",value:function(t,e,i){return!!this.isDrawableTile(i)&&pu(mu(r.prototype),"loadedTileCallback",this).call(this,t,e,i)}},{key:"prepareFrame",value:function(t){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(t,e){var i=t.layerStatesArray[t.layerIndex],r=(s=t.viewState).projection,n=s.resolution,o=s.center,s=s.rotation,a=t.pixelRatio,u=this.getLayer(),h=u.getSource(),l=h.getRevision(),c=h.getTileGridForProjection(r),f=c.getZForResolution(n,h.zDirection),A=c.getResolution(f),p=t.extent,d=(i.extent&&Wo(i.extent,r)&&(p=ji(p,Wo(i.extent,r))),h.getTilePixelRatio(a)),m=Math.round(t.size[0]*d),y=Math.round(t.size[1]*d),g=(s&&(y=m=Math.round(Math.sqrt(m*m+y*y))),A*m/2/d),v=A*y/2/d,b=[o[0]-g,o[1]-v,o[0]+g,o[1]+v],w=c.getTileRangeForExtentAndZ(p,f),x={},M=(x[f]={},this.createLoadedTileFinder(h,r,x)),_=this.tmpExtent,S=this.tmpTileRange_;this.newTiles_=!1;for(var B=w.minX;B<=w.maxX;++B)for(var E=w.minY;E<=w.maxY;++E){var C=this.getTile(f,B,E,t);if(this.isDrawableTile(C)){var T=ci(this);if(2==C.getState()&&(F=(x[f][C.tileCoord.toString()]=C).inTransition(T),this.newTiles_||!F&&-1!==this.renderedTiles.indexOf(C)||(this.newTiles_=!0)),1===C.getAlpha(T,t.time))continue}var F=c.getTileCoordChildTileRange(C.tileCoord,S,_);T=!1;(T=F?M(f+1,F):T)||c.forEachTileCoordParentTileRange(C.tileCoord,M,S,_)}for(var P,O=A/n,D=(xi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/d,1/d,s,-m/2,-y/2),Mi(this.inversePixelTransform,this.pixelTransform),xi(this.tempTransform,m/2,y/2,O,O,0,-m/2,-y/2),this.renderedTiles.length=0,Object.keys(x).map(Number)),R=(D.sort(ni),1!==i.opacity||this.containerReused&&!h.getOpaque(t.viewState.projection)?P=[]:D=D.reverse(),[]),I=null,U=D.length-1;0<=U;--U){var L,k=D[U],j=((null===I||k<I)&&(I=k),h.getTilePixelSize(k,a,r)),Q=c.getResolution(k)/A,N=j[0]*Q*O,z=j[1]*Q*O,H=c.getTileCoordForCoordAndZ(Qi(b),k),V=(j=c.getTileCoordExtent(H),wi(this.tempTransform,[d*(j[0]-b[0])/A,d*(b[3]-j[3])/A])),G=d*h.getGutterForProjection(r),K=x[k];for(L in K){var Y=K[L],X=Y.tileCoord,W=H[1]-X[1],q=Math.round(V[0]-(W-1)*N),Z=(X=H[2]-X[2],Math.round(V[1]-(X-1)*z)),J=(q=q-(W=Math.round(V[0]-W*N)),Z=Z-(X=Math.round(V[1]-X*z)),f===k),$=J&&1!==Y.getAlpha(ci(this),t.time);this.drawTileImage(Y,t,W,X,q,Z,G,J,R),P&&!$?this.renderedTiles.unshift(Y):this.renderedTiles.push(Y),this.updateUsedTiles(t.usedTiles,h,Y)}}return this.renderedRevision=l,this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!Oi(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=a,this.renderedProjection=r,this.manageTilePyramid(t,h,c,a,r,p,f,u.getPreload()),this.scheduleExpireCache(t,h),this.thirdMap_&&(1===this.layercount_?this.thirdMap_.A&&this.thirdMap_.A(R,I):this.thirdMap_.P&&this.thirdMap_.P(R,I)),this.container}},{key:"drawTileImage",value:function(t,e,i,r,n,o,s,a,u){var h,l,c=this.getTileImage(t);c&&(h=ci(this),l=a?t.getAlpha(h,e.time):1,u.push({image:c,x:i,y:r,w:n,h:o,frameState:e}),1!==l?e.animate=!0:a&&t.endTransition(h))}},{key:"getTileImage",value:function(t){return t.getImage()}},{key:"scheduleExpireCache",value:function(t,e){e.canExpireCache()&&(e=function(t,e,i){var r=ci(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,e),t.postRenderFunctions.push(e))}},{key:"updateUsedTiles",value:function(t,e,i){(e=ci(e))in t||(t[e]={}),t[e][i.getKey()]=!0}},{key:"manageTilePyramid",value:function(t,e,i,r,n,o,s,a,u){for(var h,l,c,f,A,p=ci(e),d=(p in t.wantedTiles||(t.wantedTiles[p]={}),t.wantedTiles[p]),m=t.tileQueue,y=0,g=i.getMinZoom();g<=s;++g)for(l=i.getTileRangeForExtentAndZ(o,g,l),c=i.getResolution(g),f=l.minX;f<=l.maxX;++f)for(A=l.minY;A<=l.maxY;++A)s-g<=a?(++y,0==(h=e.getTile(g,f,A,r,n)).getState()&&(d[h.getKey()]=!0,m.isKeyQueued(h.getKey())||m.enqueue([h,p,i.getTileCoordCenter(h.tileCoord),c])),void 0!==u&&u(h)):e.useTile(g,f,A,n);e.updateCacheSize(y,n)}}])&&Au(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function gu(t){return(gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vu(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===gu(t=function(t,e){if("object"!==gu(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==gu(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function bu(t,e){return(bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wu(t){return(wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xu=function(){var t=r,e=Ya;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bu(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=wu(t);if(i=e?(i=wu(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===gu(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this,t)).layercount_=t.layercount,e.thirdMap_=t.thirdMap,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"createRenderer",value:function(){return new yu(this)}}])&&vu(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),Mu="XY",_u="XYZ",Su="XYM",Bu="XYZM";function Eu(t){return(Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cu(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Eu(t=function(t,e){if("object"!==Eu(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Eu(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Tu(t,e){return(Tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Fu(t){return(Fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pu=[1,0,0,1,0,0],Ou=function(){var t=r,e=jr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tu(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Fu(t);if(i=e?(i=Fu(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Eu(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t,e,n,o,s,a;if(this instanceof r)return(t=i.call(this)).extent_=[1/0,1/0,-1/0,-1/0],t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=(a=!(e=function(t,e,i){var r;return(i?((r=this.clone()).applyTransform(i),r):this).getSimplifiedGeometry(e)}),function(){var t=Array.prototype.slice.call(arguments);return a&&this===s&&si(t,o)||(a=!0,s=this,o=t,n=e.apply(this,arguments)),n}),t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return hi()}},{key:"closestPointXY",value:function(t,e,i,r){return hi()}},{key:"containsXY",value:function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return hi()}},{key:"getExtent",value:function(t){var e;return this.extentRevision_!=this.getRevision()&&(e=this.computeExtent(this.extent_),(isNaN(e[0])||isNaN(e[1]))&&Pi(e),this.extentRevision_=this.getRevision()),e=this.extent_,(t=t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}},{key:"rotate",value:function(t,e){hi()}},{key:"scale",value:function(t,e,i){hi()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return hi()}},{key:"getType",value:function(){return hi()}},{key:"applyTransform",value:function(t){hi()}},{key:"intersectsExtent",value:function(t){return hi()}},{key:"translate",value:function(t,e){hi()}},{key:"transform",value:function(t,e){var i=Io(t);t=i.getUnits()==so.TILE_PIXELS?function(t,r,n){var o=i.getExtent(),s=i.getWorldExtent();o=ki(s)/ki(o);return xi(Pu,s[0],s[3],o,-o,0,0,0),function(t,e,i,r,n,o){for(var s=o||[],a=0,u=e;u<i;u+=r){var h=t[u],l=t[u+1];s[a++]=n[0]*h+n[2]*l+n[4],s[a++]=n[1]*h+n[3]*l+n[5]}o&&s.length!=a&&(s.length=a)}(t,0,t.length,n,Pu,r),Qo(i,e)(t,r,n)}:Qo(i,e);return this.applyTransform(t),this}}])&&Cu(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Du(t){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ru(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Du(t=function(t,e){if("object"!==Du(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Du(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Iu(t,e){return(Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Uu(t){return(Uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lu(t){var e;return t==Mu?e=2:t==_u||t==Su?e=3:t==Bu&&(e=4),e}var ku=function(){var t=r,e=Ou;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iu(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Uu(t);if(i=e?(i=Uu(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Du(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t;if(this instanceof r)return(t=i.call(this)).layout=Mu,t.stride=2,t.flatCoordinates=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"computeExtent",value:function(t){return e=this.flatCoordinates,0,i=this.flatCoordinates.length,r=this.stride,Di(Pi(t),e,0,i,r);var e,i,r}},{key:"getCoordinates",value:function(){return hi()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){var e;return this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance?this:(e=this.getSimplifiedGeometryInternal(t)).getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=Lu(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,e){hi()}},{key:"setLayout",value:function(t,e,i){var r;if(t)r=Lu(t);else{for(var n=0;n<i;++n){if(0===e.length)return this.layout=Mu,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=Mu:3==t?e=_u:4==t&&(e=Bu),e}(r=e.length)}this.layout=t,this.stride=r}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var i=this.getFlatCoordinates();if(i){for(var r=this.getStride(),n=i,o=i.length,s=r,a=(r=t,t=e,(e=i)||[]),u=Math.cos(r),h=Math.sin(r),l=t[0],c=t[1],f=0,A=0;A<o;A+=s){var p=n[A]-l,d=n[A+1]-c;a[f++]=l+p*u-d*h,a[f++]=c+p*h+d*u;for(var m=A+2;m<A+s;++m)a[f++]=n[m]}e&&a.length!=f&&(a.length=f),this.changed()}}},{key:"scale",value:function(t,e,i){var r=e;if(void 0===e&&(r=t),e=(e=i)||Ui(this.getExtent()),i=this.getFlatCoordinates()){for(var n=this.getStride(),o=i,s=i.length,a=n,u=t,h=r,l=(n=e,(t=i)||[]),c=n[0],f=n[1],A=0,p=0;p<s;p+=a){var d=o[p]-c,m=o[p+1]-f;l[A++]=c+u*d,l[A++]=f+h*m;for(var y=p+2;y<p+a;++y)l[A++]=o[y]}t&&l.length!=A&&(l.length=A),this.changed()}}},{key:"translate",value:function(t,e){var i=this.getFlatCoordinates();if(i){for(var r=this.getStride(),n=i,o=i.length,s=r,a=t,u=e,h=(r=i)||[],l=0,c=0;c<o;c+=s){h[l++]=n[c]+a,h[l++]=n[c+1]+u;for(var f=c+2;f<c+s;++f)h[l++]=n[f]}r&&h.length!=l&&(h.length=l),this.changed()}}}])&&Ru(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function ju(t,e,i,r,n,o,s){var a,u,h=t[e],l=t[e+1],c=t[i]-h,f=t[i+1]-l;if(0==c&&0==f)a=e;else{var A=((n-h)*c+(o-l)*f)/(c*c+f*f);if(1<A)a=i;else{if(0<A){for(var p=0;p<r;++p)s[p]=(u=t[e+p])+A*(t[i+p]-u);return void(s.length=r)}a=e}}for(var d=0;d<r;++d)s[d]=t[a+d];s.length=r}function Qu(t,e,i,r,n){var o=t[e],s=t[e+1];for(e+=r;e<i;e+=r){var a=t[e],u=t[e+1],h=Ki(o,s,a,u);n<h&&(n=h),o=a,s=u}return n}function Nu(t,e,i,r,n,o,s,a,u,h,l){var c,f;if(e!=i)if(0===n){if((f=Ki(s,a,t[e],t[e+1]))<h){for(c=0;c<r;++c)u[c]=t[e+c];return u.length=r,f}}else{for(var A=l||[NaN,NaN],p=e+r;p<i;)if(ju(t,p-r,p,r,s,a,A),(f=Ki(s,a,A[0],A[1]))<h){for(h=f,c=0;c<r;++c)u[c]=A[c];p+=u.length=r}else p+=r*Math.max((Math.sqrt(f)-Math.sqrt(h))/n|0,1);if(o&&(ju(t,i-r,e,r,s,a,A),(f=Ki(s,a,A[0],A[1]))<h)){for(h=f,c=0;c<r;++c)u[c]=A[c];u.length=r}}return h}function zu(t,e,i,r){for(var n=0,o=i.length;n<o;++n)for(var s=i[n],a=0;a<r;++a)t[e++]=s[a];return e}function Hu(t,e){return e*Math.round(t/e)}function Vu(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=e;a<i;a+=r)o[s++]=t.slice(a,a+r);return o.length=s,o}function Gu(t,e,i,r){for(var n=0,o=t[i-r],s=t[i-r+1];e<i;e+=r){var a=t[e],u=t[e+1];n+=s*a-o*u,o=a,s=u}return n/2}function Ku(t){return(Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yu(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ku(t=function(t,e){if("object"!==Ku(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ku(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Xu(t,e){return(Xu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wu(t){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qu=function(){var t=r,e=ku;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xu(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Wu(t);if(i=e?(i=Wu(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Ku(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){var n;if(this instanceof r)return(n=i.call(this)).maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?n.setCoordinates(t,e):n.setFlatCoordinates(e,t),n;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"clone",value:function(){return new r(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,e,i,r){return r<Bi(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Nu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))}},{key:"getArea",value:function(){return Gu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return Vu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=function(t,e,i,r,n,o,s){var a=(i-e)/r;if(a<3)for(;e<i;e+=r)o[s++]=t[e],o[s++]=t[e+1];else{for(var u,h,l,c,f,A,p=new Array(a),d=(p[0]=1,p[a-1]=1,[e,i-r]),m=0;0<d.length;){for(var y=d.pop(),g=d.pop(),v=0,b=t[g],w=t[g+1],x=t[y],M=t[y+1],_=g+r;_<y;_+=r){var S=t[_],B=t[_+1],E=(S=S,B=B,A=f=c=void 0,A=(l=M)-(h=w),0==(f=(E=x)-(u=b))&&0==A||(1<(c=((S-u)*f+(B-h)*A)/(f*f+A*A))?(u=E,h=l):0<c&&(u+=f*c,h+=A*c)),Ki(S,B,u,h));v<E&&(m=_,v=E)}n<v&&(p[(m-e)/r]=1,g+r<m&&d.push(g,m),m+r<y)&&d.push(m,y)}for(var C=0;C<a;++C)p[C]&&(o[s++]=t[e+C*r],o[s++]=t[e+C*r+1])}return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new r(e,Mu)}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=zu(this.flatCoordinates,0,t,this.stride),this.changed()}}])&&Yu(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Zu(t){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ju(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Zu(t=function(t,e){if("object"!==Zu(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Zu(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function $u(t,e){return($u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function th(t){return(th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eh=function(){var t=r,e=ku;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$u(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=th(t);if(i=e?(i=th(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Zu(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){var n;if(this instanceof r)return(n=i.call(this)).setCoordinates(t,e),n;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"clone",value:function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,i,r){var n=this.flatCoordinates;if((t=Ki(t,e,n[0],n[1]))<r){for(var o=this.stride,s=0;s<o;++s)i[s]=n[s];return i.length=o,t}return r}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(t){return Fi(i=(e=this.flatCoordinates)[0],e=e[1],i,e,t);var e,i}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return Ci(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i){for(var r=0,n=i.length;r<n;++r)t[e++]=i[r];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}])&&Ju(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function ih(t,e,i,r,n){var o;return!((o=function(n){return!rh(t,e,i,r,n[0],n[1])})(Ri(n=n))||o(Ii(n))||o(Ni(n))||o(Qi(n)))}function rh(t,e,i,r,n,o){for(var s=0,a=t[i-r],u=t[i-r+1];e<i;e+=r){var h=t[e],l=t[e+1];u<=o?o<l&&0<(h-a)*(o-u)-(n-a)*(l-u)&&s++:l<=o&&(h-a)*(o-u)-(n-a)*(l-u)<0&&s--,a=h,u=l}return 0!==s}function nh(t,e,i,r,n,o){if(0===i.length)return!1;if(!rh(t,e,i[0],r,n,o))return!1;for(var s=1,a=i.length;s<a;++s)if(rh(t,i[s-1],i[s],r,n,o))return!1;return!0}function oh(t,e,i,r,n){var o,s,a=Di([1/0,1/0,-1/0,-1/0],t,e,i,r);if(Hi(n,a)){if(s=a,(o=n)[0]<=s[0]&&s[2]<=o[2]&&o[1]<=s[1]&&s[3]<=o[3])return 1;if(a[0]>=n[0]&&a[2]<=n[2])return 1;if(a[1]>=n[1]&&a[3]<=n[3])return 1;var u,h=t,l=e,c=i,f=r,A=function(t,e){return e=e,c=!1,f=Ti(i=n,t=t),A=Ti(i,e),f===Si.INTERSECTING||A===Si.INTERSECTING?c=!0:(r=i[0],o=i[1],s=i[2],i=i[3],a=t[0],t=t[1],u=e[0],t=((e=e[1])-t)/(u-a),(c=(c=(c=A&Si.ABOVE&&!(f&Si.ABOVE)?r<=(h=u-(e-i)/t)&&h<=s:c)||!(A&Si.RIGHT)||f&Si.RIGHT?c:o<=(l=e-(u-s)*t)&&l<=i)||!(A&Si.BELOW)||f&Si.BELOW?c:r<=(h=u-(e-o)/t)&&h<=s)||!(A&Si.LEFT)||f&Si.LEFT||(c=o<=(l=e-(u-r)*t)&&l<=i)),c;var i,r,o,s,a,u,h,l,c,f,A};for(l+=f;l<c;l+=f)if(u=A(h.slice(l-f,l),h.slice(l,l+f)))return u}}function sh(t,e,i,r){for(var n=0,o=t[i-r],s=t[i-r+1];e<i;e+=r){var a=t[e],u=t[e+1];n+=(a-o)*(u+s),o=a,s=u}return 0===n?void 0:0<n}function ah(t,e,i,r,n){for(var o=void 0!==n&&n,s=0,a=i.length;s<a;++s){var u=i[s],h=sh(t,e,u,r);if(0===s?o&&h||!o&&!h:o&&!h||!o&&h){d=p=f=c=l=void 0;for(var l=t,c=e,f=u,A=r;c<f-A;){for(var p=0;p<A;++p){var d=l[c+p];l[c+p]=l[f-A+p],l[f-A+p]=d}c+=A,f-=A}}e=u}return e}function uh(t){return(uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===uh(t=function(t,e){if("object"!==uh(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==uh(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function lh(t,e){return(lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ch(t){return(ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fh=function(){var t=r,e=ku;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lh(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ch(t);if(i=e?(i=ch(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===uh(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){var o;if(this instanceof r)return(o=i.call(this)).ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==e&&n?(o.setFlatCoordinates(e,t),o.ends_=n):o.setCoordinates(t,e),o;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"appendLinearRing",value:function(t){this.flatCoordinates?function(t,e){for(var i=Array.isArray(e)?e:[e],r=i.length,n=0;n<r;n++)t[t.length]=i[n]}(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,i,r){return r<Bi(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o];n=Qu(t,e,a,r,n),e=a}return n}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,r,n,o,s,a,u,h,l){for(var c=l||[NaN,NaN],f=0,A=i.length;f<A;++f){var p=i[f];h=Nu(t,e,p,r,n,o,s,a,u,h,c),e=p}return h}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))}},{key:"containsXY",value:function(t,e){return nh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return function(t,e,i,r){for(var n=0,o=0,s=i.length;o<s;++o){var a=i[o];n+=Gu(t,e,a,r),e=a}return n}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?ah(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=0,u=i.length;a<u;++a){var h=i[a];o[s++]=Vu(t,e,h,r,o[s]),e=h}return o.length=s,o}(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){var t;return this.flatInteriorPointRevision_!=this.getRevision()&&(t=Ui(this.getExtent()),this.flatInteriorPoint_=function(t,e,i,r,n,o,s){for(var a,u,h,l=n[o+1],c=[],f=0,A=i.length;f<A;++f)for(var p=i[f],d=t[p-r],m=t[p-r+1],y=e;y<p;y+=r)b=t[y],h=t[y+1],(l<=m&&h<=l||m<=l&&l<=h)&&c.push(u=(l-m)/(h-m)*(b-d)+d),d=b,m=h;var g=NaN,v=-1/0;for(c.sort(ni),d=c[0],y=1,a=c.length;y<a;++y){var b=c[y],w=Math.abs(b-d);v<w&&nh(t,e,i,r,u=(d+b)/2,l)&&(g=u,v=w),d=b}return isNaN(g)&&(g=n[o]),s?(s.push(g,l,v),s):[g,l,v]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()),this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new eh(this.getFlatInteriorPoint(),Su)}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(t){return t<0||this.ends_.length<=t?null:new qu(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLinearRings",value:function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],n=0,o=0,s=i.length;o<s;++o){var a=i[o],u=new qu(e.slice(n,a),t);r.push(u),n=a}return r}},{key:"getOrientedFlatCoordinates",value:function(){var t;return this.orientedRevision_!=this.getRevision()&&(function(t,e,i,r,n){for(var o=void 0!==n&&n,s=0,a=i.length;s<a;++s){var u=i[s],h=sh(t,e,u,r);if(0===s){if(o&&h||!o&&!h)return}else if(o&&!h||!o&&h)return;e=u}return 1}(t=this.flatCoordinates,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ah(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()),this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],i=[];return e.length=function(t,e,i,r,n,o,s,a){for(var u=0,h=i.length;u<h;++u){var l=i[u];s=function(t,e,i,r,n,o,s){if(e!=i){var a,u=Hu(t[e],n),h=Hu(t[e+1],n);e+=r,o[s++]=u,o[s++]=h;do{if(a=Hu(t[e],n),p=Hu(t[e+1],n),(e+=r)==i)return o[s++]=a,o[s++]=p,s}while(a==u&&p==h);for(;e<i;){var l,c,f,A,p,d=Hu(t[e],n),m=Hu(t[e+1],n);e+=r,d==a&&m==p||((l=a-u)*(A=m-h)==(c=p-h)*(f=d-u)&&(l<0&&f<l||l==f||0<l&&l<f)&&(c<0&&A<c||c==A||0<c&&c<A)||(u=o[s++]=a,h=o[s++]=p),a=d,p=m)}o[s++]=a,o[s++]=p}return s}(t,e,l,r,n,o,s),a.push(s),e=l}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new r(e,Mu,i)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return function(t,e,i,r,n){if(!(oh(o=t,e=e,s=i[0],a=r,u=n)||rh(o,e,s,a,u[0],u[1])||rh(o,e,s,a,u[0],u[3])||rh(o,e,s,a,u[2],u[1])||rh(o,e,s,a,u[2],u[3])))return!1;var o,s,a,u;if(1!==i.length)for(var h=1,l=i.length;h<l;++h)if(ih(t,i[h-1],i[h],r,n)&&!oh(t,i[h-1],i[h],r,n))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]),e=function(t,e,i,r,n){for(var o=n||[],s=0,a=0,u=i.length;a<u;++a){var h=zu(t,e,i[a],r);e=o[s++]=h}return o.length=s,o}(this.flatCoordinates,0,t,this.stride,this.ends_),this.flatCoordinates.length=0===e.length?0:e[e.length-1],this.changed()}}])&&hh(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Ah(t){return(Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ph(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ah(t=function(t,e){if("object"!==Ah(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ah(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function dh(t){try{e=new URL(t,"http://fakehost.com/")}catch(t){return null}var e=(t=e.pathname.split("/").pop()).lastIndexOf(".");return-1===e||e===t.length-1?null:t.substring(e+1)}function mh(t){return(mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===mh(t=function(t,e){if("object"!==mh(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==mh(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Eo=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");e=e||{},this.C=4e3,this.L=void 0!==e.offset?e.offset:1,this.I=void 0===e.visible||e.visible,this.N=void 0!==e.mode?e.mode:qe.AMAP_VECTOR,this.N!==qe.TD_VECTOR&&this.N!==qe.TD_SATELLITE||(this.C=5e3),this.B=e.replaceColor,this._=e.replaceOpacity,void 0===this._&&(this._=1),this.F={YELLOW:"sepia(60%) hue-rotate(3deg) grayscale(5%) saturate(2)",CELESTE:"grayscale(100%) sepia(50%) hue-rotate(170deg) saturate(2)",GRAY:"grayscale(220%) sepia(2%) hue-rotate(-20deg) saturate(2.5) invert(10%) contrast(1.5)",PEACH:"grayscale(90%) sepia(30%) hue-rotate(-44deg) saturate(4) contrast(1.2)",PINK:"grayscale(10%) sepia(10%) hue-rotate(-80deg)",SAPPHIRE:"grayscale(60%) hue-rotate(20deg) sepia(70%) invert(95%) brightness(3)",NONE:"none",CUSTOM:"custom"},this.D=e.filter,void 0===this.D&&(this.D=$e.NONE),this.H=this.F[this.D],this.U=e.filterCustomization,"custom"===this.H&&(this.H=this.U,void 0===this.H)&&(this.H="none"),this.G=new Map,this.G.set(""+qe.AMAP_SATELLITE,20),this.G.set(""+qe.AMAP_VECTOR,20),this.G.set(""+qe.BAIDU_VECTOR,20),this.G.set(""+qe.BAIDU_SATELLITE,20),this.G.set(""+qe.TD_VECTOR,20),this.G.set(""+qe.TD_SATELLITE,20),this.V=!1,this.q=null,this.X=e.offlineUrl,void 0!==this.X&&(this.V=!0),this.Z=e.imageType,void 0===this.Z&&(this.Z="png"),this.Y=.5*this.C,this.W=.9*this.C,this.K=null,this.$=new j,this.$.background=new H(13426943),this.$.fog=new Y(13426943,this.Y,this.W),this.J=new ti,this.$.add(this.J),this.tt=new Ye,this.it=null,this.nt=this.L,this.et=null,this.rt=new se(new l(0,1,0),0),this.ot=!1,this.st=this.st.bind(this),this.ut=this.ut.bind(this),this.ht=[],this.ct=!1,this.ft=null,this.lt=1.2}var e,i;return e=t,(i=[{key:"visible",get:function(){return this.I},set:function(t){this.I=t,this.$.visible=this.I,this.it.enableUpdateRender()}},{key:"addTo",value:function(t){this.it=t,this.it.getRenderManager().setTileLayScene(this.$),this.nt=this.it.getFloor(this.it.getVisibleLevels()[0]).height-this.L,this.vt(),t.enableUpdateRender()}},{key:"remove",value:function(){this.dispose(),this.it.off("resize",this.st),this.it.off("viewChanged",this.st),this.it.off("viewModeChanged",this.ut),this.it.off("visibleLevelsLoaded",this.st),this.it.off("zoom",this.st),this.it=null,this.ot=!1}},{key:"dispose",value:function(){this.et&&this.et.dispose(),this.et=null,this.yt(),this.J.parent&&this.J.parent.remove(this.J),this.it.getRenderManager().setTileLayScene(void 0),this.it.enableUpdateRender()}},{key:"setFilter",value:function(t,e){this.D=t,void 0===this.D&&(this.D=$e.NONE),this.H=this.F[this.D],this.U=e,"custom"===this.H&&(this.H=this.U,void 0===this.H)&&(this.H="none"),this.dt(),this.it.enableUpdateRender()}},{key:"getFilter",value:function(){return{filter:this.D,value:this.H}}}])&&ph(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign(Eo.prototype,{vt:function(){this.ot||(this.K=this.it.getContainer(),this.et=this.bt(),this.wt(),this.it.on("resize",this.st),this.it.on("viewChanged",this.st),this.it.on("viewModeChanged",this.ut),this.it.on("visibleLevelsLoaded",this.st),this.it.on("zoom",this.st),this.ot=!0)},gt:function(){if(0!==this.ht.length)if(this.jt())for(var t=this.Mt(),e=0;e<this.ht.length;e++){var i,r=this.ht[e];r.oldTexture||(r.oldTexture=r.material.map.clone(),r.material.map.dispose(),(i=new ie(t)).minFilter=wt,r.material.map=i)}else for(var n=0;n<this.ht.length;n++){var o=this.ht[n];o.oldTexture&&(o.material.map.dispose(),o.material.map=o.oldTexture.clone(),o.oldTexture=null)}},dt:function(){for(var t=0;t<this.ht.length;t++){var e=this.ht[t].imageinfo.image,i=this.ht[t].imageinfo.coverimage,r=document.createElement("canvas"),n=(r.width=e.width,r.height=e.height,r.getContext("2d"));n.filter=this.H,n.drawImage(e,0,0,r.width,r.height),i&&n.drawImage(i,0,0,r.width,r.height),this.ht[t].material.map=new ie(r)}},st:function(t){var e;"viewChanged"===t.type?(e=this.it.getCenter(),this.q.x===e.x&&this.q.y===e.y||this.wt(t)):"visibleLevelsLoaded"===t.type?this.St():"zoom"===t.type&&(this.wt(),this.gt())},Ot:function(t){var e=4;this.N===qe.AMAP_SATELLITE||this.N===qe.AMAP_VECTOR||this.N===qe.BAIDU_VECTOR||this.N===qe.BAIDU_SATELLITE?e=5:this.N!==qe.TD_VECTOR&&this.N!==qe.TD_SATELLITE||(e=4),t!==e||this.ct||(t=this.it.getZoomRange(),this.ct=!0,t[0]=this.it.getZoom(),this.it.setZoomRange(t))},Mt:function(){var t;return null===this.ft&&(this.ft=document.createElement("canvas"),this.ft.width=256,this.ft.height=256,(t=this.ft.getContext("2d")).fillStyle=this.B,t.globalAlpha=this._,t.fillRect(0,0,256,256)),this.ft},jt:function(){var t=this.G.get(""+this.N),e=this.it.getZoom();return!!(t&&this.B&&t<=e)},P:function(t,e){if(0!==this.ht.length&&!this.jt()){var i=this;this.Ot(e);for(var r,n,o,s=0;s<t.length;s++){var a,u=function(t){for(var e=null,r=0;r<i.ht.length;r++){var n=i.ht[r].imageinfo;if(t.x===n.x&&t.y===n.y&&t.w===n.w&&t.h===n.h&&!i.ht[r].isCovered){e=i.ht[r];break}}return e}(t[s]);null!==u&&(a=u.imageinfo.image,r=t[s].image,o=n=void 0,(n=document.createElement("canvas")).width=a.width,n.height=a.height,(o=n.getContext("2d")).filter=i.H,o.drawImage(a,0,0,n.width,n.height),o.drawImage(r,0,0,n.width,n.height),(a=new ie(n)).minFilter=wt,u.material.map.dispose(),u.material.map=a,u.imageinfo.coverimage=t[s].image,u.isCovered=!0)}}},A:function(t,e){this.it&&(this.Ot(e),this.Et(t),e=this.kt(),"OrthographicCamera"===this.it.camera.type?(this.$.fog.near=1e4*this.Y,this.$.fog.far=1e4*this.W):(t=this.lt*this.kt(!0),this.$.fog.near=this.Y*t,this.$.fog.far=this.W*t),this.J.scale.set(e,e,e),this.it.getRenderManager().render())},Et:function(t){for(var e=this,i=0;i<this.ht.length;i++)this.ht[i].visible=!1;var r=this.jt();if(0===this.ht.length)for(var n=0;n<t.length;n++){var o=M(t[n]);this.J.add(o),this.ht.push(o)}else{for(var s=[],a=[],u=0;u<t.length;u++){var h,l=t[u].image.width,c=t[u].image.height,f=function(t,e){for(var i=null,r=0;r<t.length;r++)if(t[r].src===e){i=r;break}return i}(this.ht,t[u].image.src);null!==f&&((h=this.ht[f]).scale.set(t[u].w/l,t[u].h/c,1),h.imageinfo=t[u],h.position.x=t[u].x+t[u].w/2-this.C/2,h.position.z=t[u].y+t[u].h/2-this.C/2,h.visible=!0,s.push(h),this.ht.splice(f,1),a.push(u))}t=w(a,t);for(var A=a.length=0;A<t.length&&0!==this.ht.length;A++){var p,d=t[A].image.width,m=t[A].image.height,y=this.ht.splice(0,1)[0],g=new ie(x(t[A].image));g.minFilter=wt,y.material.map.dispose(),r?((p=new ie(this.Mt())).minFilter=wt,y.material.map=p):y.material.map=g,y.scale.set(t[A].w/d,t[A].h/m,1),y.position.x=t[A].x+t[A].w/2-this.C/2,y.position.z=t[A].y+t[A].h/2-this.C/2,y.src=t[A].image.src,y.imageinfo=t[A],y.visible=!0,y.oldTexture=r?g:null,s.push(y),a.push(A)}t=w(a,t);for(var v=0;v<t.length;v++){var b=M(t[v]);this.J.add(b),s.push(b)}this.yt(),this.ht=s}function w(t,e){for(var i=[],r=0;r<e.length;r++)!function(t,e){for(var i=!0,r=0;r<t.length;r++)if(t[r]===e){i=!1;break}return i}(t,r)||i.push(e[r]);return i}function x(t){var i=document.createElement("canvas"),r=(i.width=t.width,i.height=t.height,i.getContext("2d"));return r.filter=e.H,r.drawImage(t,0,0,i.width,i.height),i}function M(t){var i=t.image.width,n=t.image.height,o=new qt(i,n),s=new ie(x(t.image)),a=null;return(o=((a=new $t(r?{map:new ie(e.Mt()),depthWrite:!1,transparent:!0}:{map:s,depthWrite:!1,transparent:!0})).polygonOffset=!0,a.polygonOffsetFactor=1,a.polygonOffsetUnits=4,new Ve(o,a))).material.map.minFilter=wt,o.material.needsUpdate=!0,o.src=t.image.src,o.imageinfo=t,o.scale.set(t.w/i,t.h/n,1),o.position.x=t.x+t.w/2-e.C/2,o.position.z=t.y+t.h/2-e.C/2,o.rotation.x=-Math.PI/2,o.renderOrder=-10,o.oldTexture=r?s:null,o}this.J.position.y=this.nt},yt:function(){for(var t=0;t<this.ht.length;t++)this.ht[t].parent&&(this.ht[t].parent.remove(this.ht[t]),this.ht[t].geometry.dispose(),this.ht[t].material.map.dispose(),this.ht[t].material.dispose());this.ht.length=0},bt:function(){var t,e=this,i=Io("EPSG:3857");if(this.N===qe.AMAP_SATELLITE||this.N===qe.AMAP_VECTOR){var r={url:this.Tt(),crossOrigin:"anonymous",maxZoom:18,thirdMap:this};this.N===qe.AMAP_SATELLITE&&(r.maxZoom=18),r=new Ia(r)}else if(this.N===qe.BAIDU_VECTOR||this.N===qe.BAIDU_SATELLITE){for(var n=[],o=0;o<19;o++)n[o]=Math.pow(2,18-o);var s=new sa({origin:[0,0],resolutions:n});r=new Pa({projection:i,crossOrigin:"anonymous",tileGrid:s,tileUrlFunction:function(t){var i,r;return t?(i=t[0],r=t[1],t=-t[2]-1,e.Rt(r=r<0?"M"+-r:r,t=t<0?"M"+-t:t,i)):""}})}else this.N===qe.OSM?r=new ja:(r=new Ia({url:this.At()[0],crossOrigin:"anonymous",tileSize:[512,512],maxZoom:18}),t=new Ia({url:this.At()[1],crossOrigin:"anonymous",tileSize:[512,512],maxZoom:18}));return(s=new Ms({size:[this.C,this.C],view:new hs({projection:i}),layers:[new xu({layercount:1,source:r,thirdMap:this}),new xu({layercount:2,source:t,thirdMap:this})]})).setTarget(this.K),s},Tt:function(){return this.V?this.X+"/{z}/{x}/{y}."+this.Z:this.N===qe.AMAP_SATELLITE?"http://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=6&x={x}&y={y}&z={z}":"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=2&style=7&x={x}&y={y}&z={z}"},Rt:function(t,e,i){return t=this.N===qe.BAIDU_SATELLITE?"https://gss0.bdstatic.com/5bwHcj7lABFY8t_jkk_Z1zRvfdw6buu/it/u=x="+t+";y="+e+";z="+i+";v=009;type=sate&fm=46&udt=20210415&scaler=2":"https://maponline"+parseInt(4*Math.random())+".bdimg.com/tile/?qt=vtile&x="+t+"&y="+e+"&z="+i+"&styles=pl&scaler=2&udt=20210415&from=jsapi2_0&scaler=2"},At:function(){var t;return this.V?this.N===qe.TD_SATELLITE?((t=[]).push(this.X+"?type=img_w&number={0-7}&x={x}&y={y}&z={z}"),t.push(this.X+"?type=cia_w&number={0-7}&x={x}&y={y}&z={z}")):((t=[]).push(this.X+"?type=vec_w&number={0-7}&x={x}&y={y}&z={z}"),t.push(this.X+"?type=cva_w&number={0-7}&x={x}&y={y}&z={z}")):this.N===qe.TD_SATELLITE?((t=[]).push("http://t{0-7}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&Layer=img&STYLE=default&TILEMATRIXSET=w&FORMAT=png&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=9a8b557e9db74e442bd9544001392255"),t.push("https://t{0-7}.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=png&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=9a8b557e9db74e442bd9544001392255")):((t=[]).push("http://t{0-7}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&Layer=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=png&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=9a8b557e9db74e442bd9544001392255"),t.push("https://t{0-7}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=png&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=9a8b557e9db74e442bd9544001392255")),t},xt:function(){this.Pt.setSize(this.it.getContainer().clientWidth,this.it.getContainer().clientHeight)},ut:function(){var t;"OrthographicCamera"===this.it.camera.type?(this.$.fog.near=1e4*this.Y,this.$.fog.far=1e4*this.W):(t=this.kt(!0)*this.lt,this.$.fog.near=this.Y*t,this.$.fog.far=this.W*t)},wt:function(t){var e,i,r;this.Ct&&t&&t.target&&t.target.target&&t.target.target.x===this.Ct.x&&t.target.target.z===this.Ct.z||(t&&t.target&&t.target.target&&(this.Ct={x:t.target.target.x,y:t.target.target.y,z:t.target.target.z}),t=new l(0,0,.5),i=this.it.camera,this.tt.setFromCamera(t,i),t=new l,this.tt.ray.intersectPlane(this.rt,t),i=this.kt(),r=t.x+this.it.x,e=-t.z+this.it.y,i=this.C/2*i,this.J.position.x=t.x,this.J.position.z=t.z,r=(t=[r-i,e-i,r+i,e+i])[0],e=t[1],i=t[2],t=t[3],i=new fh(t=[r,e,r,t,i,t,i,e,r,e],Mu,[t.length]),this.et.getView().fit(i),r=this.it.getCenter(),this.q={x:r.x,y:r.y})},kt:function(t){var e=this.it.camera,i=3;return this.N!==qe.BAIDU_VECTOR&&this.N!==qe.BAIDU_SATELLITE||(i=6),t&&(i=2.8),this.tt.setFromCamera(new l(0,0,.5),e),this.tt.ray.distanceToPlane(this.rt)*Math.tan(Je.FOV*Je.DEG2RAD/2)*2*i/this.C},St:function(){this.nt=this.it.getFloor(this.it.getVisibleLevels()[0]).height-this.L,this.J.position.y=this.nt}}),Ze=Eo;var gh=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.maxSize=800,this.minSize=600,this.unloadPercent=.05,this.itemSet=new Map,this.itemList=[],this.usedSet=new Set,this.callbacks=new Map,this.unloadPriorityCallback=null;var e=this.itemSet;this.defaultPriorityCallback=function(t){return e.get(t)}}var e,i;return e=t,(i=[{key:"isFull",value:function(){return this.itemSet.size>=this.maxSize}},{key:"add",value:function(t,e){var i,r,n,o=this.itemSet;return!o.has(t)&&!this.isFull()&&(i=this.usedSet,r=this.itemList,n=this.callbacks,r.push(t),i.add(t),o.set(t,Date.now()),n.set(t,e),!0)}},{key:"remove",value:function(t){var e,i=this.usedSet,r=this.itemSet,n=this.itemList,o=this.callbacks;return!!r.has(t)&&(o.get(t)(t),e=n.indexOf(t),n.splice(e,1),i.delete(t),r.delete(t),o.delete(t),!0)}},{key:"markUsed",value:function(t){var e=this.itemSet,i=this.usedSet;e.has(t)&&!i.has(t)&&(e.set(t,Date.now()),i.add(t))}},{key:"markAllUnused",value:function(){this.usedSet.clear()}},{key:"unloadUnusedContent",value:function(){var t=this.unloadPercent,e=this.minSize,i=this.itemList,r=this.itemSet,n=this.usedSet,o=this.callbacks,s=i.length-n.size,a=i.length-e,u=this.unloadPriorityCallback||this.defaultPriorityCallback;if(0<a&&0<s){i.sort(function(t,e){var i=n.has(t),r=n.has(e);return i&&r?0:i||r?i?1:-1:u(e)-u(t)});a=Math.min(a,s),e=Math.max(e*t,a*t),a=Math.min(e,s),a=Math.ceil(a);for(var h=i.splice(0,a),l=0,c=h.length;l<c;l++){var f=h[l];o.get(f)(f),r.delete(f),o.delete(f)}}}},{key:"scheduleUnload",value:function(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.scheduled||(this.scheduled=!0,Promise.resolve().then(function(){t.scheduled=!1,t.unloadUnusedContent(),e&&t.markAllUnused()}))}}])&&yh(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vh(t){return(vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===vh(t=function(t,e){if("object"!==vh(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==vh(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var wh=function(){function t(){var e=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.maxJobs=6,this.items=[],this.callbacks=new Map,this.currJobs=0,this.scheduled=!1,this.autoUpdate=!0,this.priorityCallback=function(){throw new Error("PriorityQueue: PriorityCallback function not defined.")},this.schedulingCallback=function(t){requestAnimationFrame(t)},this.Lt=function(){e.tryRunJobs(),e.scheduled=!1}}var e,i;return e=t,(i=[{key:"sort",value:function(){var t=this.priorityCallback;this.items.sort(t)}},{key:"add",value:function(t,e){var i=this;return new Promise(function(r,n){var o=i.items,s=i.callbacks;o.push(t),s.set(t,function(){return e.apply(void 0,arguments).then(r).catch(n)}),i.autoUpdate&&i.scheduleJobRun()})}},{key:"remove",value:function(t){var e=this.items,i=this.callbacks,r=e.indexOf(t);-1!==r&&(e.splice(r,1),i.delete(t))}},{key:"tryRunJobs",value:function(){for(var t=this,e=(this.sort(),this.items),i=this.callbacks,r=this.maxJobs,n=this.currJobs;n<r&&0<e.length;){n++;var o=e.pop(),s=i.get(o);i.delete(o),s(o).then(function(){t.currJobs--,t.autoUpdate&&t.scheduleJobRun()}).catch(function(){t.currJobs--,t.autoUpdate&&t.scheduleJobRun()})}this.currJobs=n}},{key:"scheduleJobRun",value:function(){this.scheduled||(this.schedulingCallback(this.Lt),this.scheduled=!0)}}])&&bh(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),xh=3,Mh=4;function _h(t){return t===xh||t===Mh}function Sh(t,e){return t.It===e&&t.Nt}function Bh(t,e){t.It!==e&&(t.It=e,t.Nt=!1,t.Bt=!1,t._t=!1,t.Ft=!1,t.Dt=!1,t.Ht=1/0,t.Ut=1/0,t.Gt=!1,t.Vt=!1)}function Eh(t,e,i,r,n){var o=1<arguments.length&&void 0!==e?e:null,s=2<arguments.length&&void 0!==i?i:null,a=(e=3<arguments.length&&void 0!==r?r:null,4<arguments.length&&void 0!==n?n:0);if(!o||!o(t,e,a))for(var u=t.children,h=0,l=u.length;h<l;h++)Eh(u[h],o,s,t,a+1);s&&s(t,e,a)}function Ch(t){return(Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Th(t,e,i){return(e=function(t){return"symbol"===Ch(t=function(t,e){if("object"!==Ch(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ch(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Fh(t,e){var i=1<arguments.length&&void 0!==e?e:{};return new Promise(function(e,r){var n=i.method||"GET",o=i.responseType||"json",s=i.xhr||new XMLHttpRequest,a=(s.addEventListener("timeout",function(){r({errorType:"timeout_error",xhr:s})}),s.addEventListener("abort",function(){r({errorType:"abort",xhr:s})}),s.addEventListener("error",function(t){r({errorType:"onerror",xhr:s,error:t})}),{arraybuffer:"arrayBuffer",json:"json"});s.addEventListener("load",function(){var t;200===s.status||0===s.status||201===s.status?(t=Th(Th({},a[o],function(){return s.response}),"ok",!0),e(t)):r({errorType:"loadError",xhr:s})}),"POST"===n?(s.open("POST",t,!0),s.responseType=o,s.setRequestHeader("Accept","application/json"),s.send(JSON.parse(i.data))):(s.open("GET",t,!0),s.responseType=o,s.send())})}function Ph(t){return(Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ph(t=function(t,e){if("object"!==Ph(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ph(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Dh(t,e){return t.Xt!==e.Xt?t.Xt>e.Xt?-1:1:t.Bt!==e.Bt?t.Bt?1:-1:t.Nt!==e.Nt?t.Nt?1:-1:t.Ht!==e.Ht?t.Ht>e.Ht?1:-1:t.Ut!==e.Ut?t.Ut>e.Ut?-1:1:0}function Rh(t){return 1/(t.Zt+1)}var Ih=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.tileSets={},this.rootURL=e,this.fetchOptions={},this.preprocessURL=null;var i=((e=new gh).unloadPriorityCallback=Rh,new wh),r=(i.maxJobs=4,i.priorityCallback=Dh,new wh);r.maxJobs=1,r.priorityCallback=Dh,this.lruCache=e,this.downloadQueue=i,this.parseQueue=r,this.stats={parsing:0,downloading:0,failed:0,inFrustum:0,used:0,active:0,visible:0},this.frameCount=0,this.errorTarget=6,this.errorThreshold=1/0,this.loadSiblings=!0,this.displayActiveTiles=!1,this.maxDepth=1/0,this.stopAtEmptyTiles=!0}var e,i;return e=t,(i=[{key:"rootTileSet",get:function(){var t=this.tileSets[this.rootURL];return!t||t instanceof Promise?null:t}},{key:"root",get:function(){var t=this.rootTileSet;return t?t.root:null}},{key:"traverse",value:function(t,e){var i=this.tileSets[this.rootURL];i&&i.root&&Eh(i.root,t,e)}},{key:"update",value:function(){var t=this.stats,e=this.lruCache,i=this.tileSets,r=i[this.rootURL];this.rootURL in i?r&&r.root&&(i=r.root,t.inFrustum=0,t.used=0,t.active=0,t.visible=0,this.frameCount++,function t(e,i){var r=i.stats,n=i.frameCount,o=i.errorTarget,s=i.maxDepth,a=i.loadSiblings,u=i.lruCache,h=i.stopAtEmptyTiles;if(Bh(e,n),!1===i.tileInView(e))return!1;if(e.Nt=!0,u.markUsed(e),e.Bt=!0,r.inFrustum++,(h||!e.qt)&&!e.zt){if(i.calculateError(e),e.Ht<=o)return!0;if(0<i.maxDepth&&e.Xt+1>=s)return!0}for(var l=!1,c=e.children,f=0,A=c.length;f<A;f++){var p=t(c[f],i);l=l||p}if(l&&a)for(var d=0,m=c.length;d<m;d++)!function t(e,i,r){if(Bh(e,i),e.Nt=!0,r.markUsed(e),e.qt)for(var n=e.children,o=0,s=n.length;o<s;o++)t(n[o],i,r)}(c[d],n,u);return!0}(i,this),function t(e,i){var r=i.stats,n=i.frameCount;if(Sh(e,n)){r.used++;for(var o=e.children,s=!1,a=0,u=o.length;a<u;a++){var h=o[a];s=s||Sh(h,n)}if(s){for(var l=!1,c=!0,f=0,A=o.length;f<A;f++){var p=o[f];t(p,i),l=l||p.Wt||p.Gt,Sh(p,n)&&(p=p.Vt||!p.qt&&_h(p.Yt)||p.zt&&p.Yt===Mh,c=c&&p)}e.Gt=l,e.Vt=c}else e._t=!0}}(i,this),function t(e,i){var r=i.stats,n=i.frameCount;if(Sh(e,n)){var o=(o=e.parent)?o.Zt:-1,s=(e.Zt=o,i.lruCache);if(e._t)e.Zt++,e.Yt===xh?(e.Bt&&(e.Ft=!0,r.visible++),e.Dt=!0,r.active++):s.isFull()||e.qt&&!e.zt||i.requestTileContents(e);else{o=(i.errorTarget+1)*i.errorThreshold;var a=(o=e.Ht<=o)||"ADD"===e.refine,u=!e.qt,h=u||e.zt,l=_h(e.Yt)&&h,c=e.Gt,f=e.children,A=e.Vt;if(a&&u&&e.Zt++,a&&!l&&!s.isFull()&&h&&i.requestTileContents(e),(o&&!A&&!c&&l||"ADD"===e.refine&&l)&&(e.Bt&&(e.Ft=!0,r.visible++),e.Dt=!0,r.active++),"ADD"!==e.refine&&o&&!A&&l)for(var p=0,d=f.length;p<d;p++){var m=f[p];Sh(m,n)&&!s.isFull()&&(m.Zt=e.Zt+1,function t(e,i,r){if(!e.qt||e.zt&&!_h(e.Yt))r.requestTileContents(e);else for(var n=e.children,o=0,s=n.length;o<s;o++){var a=n[o];a.Zt=i,t(a,i,r)}}(m,m.Zt,i))}else for(var y=0,g=f.length;y<g;y++){var v=f[y];Sh(v,n)&&t(v,i)}}}}(i,this),function t(e,i){var r=Sh(e,i.frameCount);if(r||e.Kt)for(var n=!1,o=!1,s=(r&&(n=e.Dt,o=i.displayActiveTiles&&e.Dt||e.Ft),e.qt||e.Yt!==xh||(e.Qt!==n&&i.setTileActive(e,n),e.Wt!==o&&i.setTileVisible(e,o)),e.Qt=n,e.Wt=o,e.Kt=r,e.children),a=0,u=s.length;a<u;a++)t(s[a],i)}(i,this),e.scheduleUnload()):this.loadRootTileSet(this.rootURL)}},{key:"parseTile",value:function(t,e,i){return null}},{key:"disposeTile",value:function(t){}},{key:"preprocessNode",value:function(t,e,i){t.content&&(!("uri"in t.content)&&"url"in t.content&&(t.content.uri=t.content.url,delete t.content.url),t.content.uri&&(t.content.uri=new URL(t.content.uri,i+"/").toString()),t.content.boundingVolume)&&!("box"in t.content.boundingVolume||"sphere"in t.content.boundingVolume||"region"in t.content.boundingVolume)&&delete t.content.boundingVolume,t.parent=e,t.children=t.children||[],t.content&&t.content.uri?(i=dh(t.content.uri),i=Boolean(i&&"json"===i.toLowerCase()),t.zt=i,t.qt=i):(t.zt=!1,t.qt=!0),t.Ut=1/0,t.Ht=1/0,t.Bt=!1,t._t=!1,t.Kt=!1,t.Nt=!1,t.Wt=!1,t.Ft=!1,t.Gt=!1,t.Vt=!1,t.Qt=!1,t.Dt=!1,t.Yt=0,t.$t=0,t.Jt=null,t.Zt=-1,null===e?(t.Xt=0,t.refine=t.refine||"REPLACE"):(t.Xt=e.Xt+1,t.refine=t.refine||e.refine)}},{key:"setTileActive",value:function(t,e){}},{key:"setTileVisible",value:function(t,e){}},{key:"calculateError",value:function(t){return 0}},{key:"tileInView",value:function(t){return!0}},{key:"resetFailedTiles",value:function(){var t=this.stats;0!==t.failed&&(this.traverse(function(t){t.Yt===Mh&&(t.Yt=0)}),t.failed=0)}},{key:"fetchTileSet",value:function(t,e){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Fh(t,e).then(function(e){if(e.ok)return e.json();throw new Error('TilesRenderer: Failed to load tileset "'.concat(t,'" with status ').concat(e.status," : ").concat(e.statusText))}).then(function(e){e.asset.version;var n=t.replace(/\/[^\/]*\/?$/,"");n=new URL(n,window.location.href).toString();return Eh(e.root,function(t,e){return i.preprocessNode(t,e,n)},null,r,r?r.Xt:0),e})}},{key:"loadRootTileSet",value:function(t){var e,i=this.tileSets;return t in i?i[t]instanceof Error?Promise.reject(i[t]):Promise.resolve(i[t]):((e=this.fetchTileSet(this.preprocessURL?this.preprocessURL(t):t,this.fetchOptions).then(function(e){i[t]=e})).catch(function(e){i[t]=e}),i[t]=e)}},{key:"requestTileContents",value:function(t){var e,i,r,n,o,s,a,u,h=this;0===t.Yt&&(e=this.stats,i=this.lruCache,r=this.downloadQueue,n=this.parseQueue,o=t.zt,i.add(t,function(t){1===t.Yt?(t.Jt.abort(),t.Jt=null):o?t.children.length=0:h.disposeTile(t),1===t.Yt?e.downloading--:2===t.Yt&&e.parsing--,t.Yt=0,t.$t++,n.remove(t),r.remove(t)}),t.$t++,s=t.$t,a=new XMLHttpRequest,e.downloading++,t.Jt={abort:a.abort.bind(a)},t.Yt=1,u=function(o){t.$t===s&&("AbortError"!==o.name?(n.remove(t),r.remove(t),2===t.Yt?e.parsing--:1===t.Yt&&e.downloading--,e.failed++,t.Yt=Mh):i.remove(t))},(o?r.add(t,function(t){var e;return t.$t!==s?Promise.resolve():(e=h.preprocessURL?h.preprocessURL(t.content.uri):t.content.uri,h.fetchTileSet(e,Object.assign({xhr:a,responseType:"json"},h.fetchOptions),t))}).then(function(i){t.$t===s&&(e.downloading--,t.Jt=null,t.Yt=xh,t.children.push(i.root))}):r.add(t,function(t){return t.$t!==s?Promise.resolve():Fh(h.preprocessURL?h.preprocessURL(t.content.uri):t.content.uri,Object.assign({xhr:a,responseType:"arraybuffer"},h.fetchOptions))}).then(function(e){if(t.$t===s){if(e.ok)return e.arrayBuffer();throw new Error("Failed to load model with error code ".concat(e.status))}}).then(function(i){if(t.$t===s)return e.downloading--,e.parsing++,t.Jt=null,t.Yt=2,n.add(t,function(t){var e;return t.$t!==s?Promise.resolve():(e=dh(t.content.uri),h.parseTile(i,t,e))})}).then(function(){t.$t===s&&(e.parsing--,t.Yt=xh,t.Wt&&h.setTileVisible(t,!0),t.Qt)&&h.setTileActive(t,!0)})).catch(u))}},{key:"dispose",value:function(){var t=this.lruCache;this.traverse(function(e){t.remove(e)}),this.stats={parsing:0,downloading:0,failed:0,inFrustum:0,used:0,active:0,visible:0},this.frameCount=0}}])&&Oh(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Uh(t){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lh(){return(Lh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jh(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function kh(t,e){return(kh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jh(t){return(jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Uh(t=function(t,e){if("object"!==Uh(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Uh(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function zh(t,e,i){e&&Nh(t.prototype,e),i&&Nh(t,i),Object.defineProperty(t,"prototype",{writable:!1})}var Hh=function(){function t(e,i,r,n){Qh(this,t),this.buffer=e,this.binOffset=i+r,this.binLength=n,n=null,n=0!==r?(e=new Uint8Array(e,i,r),JSON.parse((i=e,(new TextDecoder).decode(i)))):{},this.header=n}return zh(t,[{key:"getKeys",value:function(){return Object.keys(this.header)}},{key:"getData",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,n=this.header;if(!(t in n))return null;if((n=n[t])instanceof Object){if(Array.isArray(n))return n;var o,s,a=this.buffer,u=this.binOffset,h=this.binLength,l=n.byteOffset||0,c=n.type||r;i=n.componentType||i;if("type"in n&&r&&n.type!==r)throw new Error("FeatureTable: Specified type does not match expected type.");switch(c){case"SCALAR":o=1;break;case"VEC2":o=2;break;case"VEC3":o=3;break;case"VEC4":o=4;break;default:throw new Error('FeatureTable : Feature type not provided for "'.concat(t,'".'))}var f=u+l,A=e*o;switch(i){case"BYTE":s=new Int8Array(a,f,A);break;case"UNSIGNED_BYTE":s=new Uint8Array(a,f,A);break;case"SHORT":s=new Int16Array(a,f,A);break;case"UNSIGNED_SHORT":s=new Uint16Array(a,f,A);break;case"INT":s=new Int32Array(a,f,A);break;case"UNSIGNED_INT":s=new Uint32Array(a,f,A);break;case"FLOAT":s=new Float32Array(a,f,A);break;case"DOUBLE":s=new Float64Array(a,f,A);break;default:throw new Error('FeatureTable : Feature component type not provided for "'.concat(t,'".'))}if(u+h<f+A*s.BYTES_PER_ELEMENT)throw new Error("FeatureTable: Feature data read outside binary body length.");return s}return n}}]),t}(),Vh=function(){var t=o,e=Hh;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kh(t,e);var i,r,n=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=jh(i);if(t=r?(t=jh(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,t&&("object"===Uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")});function o(t,e,i,r,s){return Qh(this,o),(t=n.call(this,t,i,r,s)).batchSize=e,t}return zh(o,[{key:"getData",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Lh(jh(o.prototype),"getData",this).call(this,t,this.batchSize,e,i)}}]),o}();function Gh(t){return(Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Gh(t=function(t,e){if("object"!==Gh(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Gh(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Yh=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.fetchOptions={},this.workingPath=""}var e,i;return e=t,(i=[{key:"load",value:function(t){var e=this;return fetch(t,this.fetchOptions).then(function(e){if(e.ok)return e.arrayBuffer();throw new Error('Failed to load file "'.concat(t,'" with status ').concat(e.status," : ").concat(e.statusText))}).then(function(i){return""===e.workingPath&&(e.workingPath=e.workingPathForURL(t)),e.parse(i)})}},{key:"resolveExternalURL",value:function(t){return/^[^\\/]/.test(t)?this.workingPath+"/"+t:t}},{key:"workingPathForURL",value:function(t){return(t=t.split(/[\\/]/g)).pop(),t.join("/")+"/"}},{key:"parse",value:function(t){throw new Error("LoaderBase: Parse not implemented.")}}])&&Kh(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xh(t){var e=t instanceof DataView?t:new DataView(t);if("{"===String.fromCharCode(e.getUint8(0)))return null;for(var i="",r=0;r<4;r++)i+=String.fromCharCode(e.getUint8(r));return i}function Wh(t){return(Wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Wh(t=function(t,e){if("object"!==Wh(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Wh(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Zh(t,e){return(Zh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jh(t){return(Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $h=function(){var t=r,e=Yh;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zh(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Jh(t);if(i=e?(i=Jh(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Wh(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"parse",value:function(t){var e=Xh(s=new DataView(t)),i=(e=s.getUint32(4,!0),s.getUint32(8,!0)),r=s.getUint32(12,!0),n=s.getUint32(16,!0),o=s.getUint32(20,!0),s=s.getUint32(24,!0),a=t.slice(28,28+r+n);a=new Hh(a,0,r,n),r=28+r+n,n=t.slice(r,r+o+s),r=r+o+s;return{version:e,featureTable:a,batchTable:n=new Vh(n,a.getData("BATCH_LENGTH"),0,o,s),glbBytes:new Uint8Array(t,r,i-r)}}}])&&qh(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function tl(t,e,i){var r=this,n=!1,o=0,s=0,a=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,!1===n&&void 0!==r.onStart&&r.onStart(t,o,s),n=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,s),o===s&&(n=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){return-1!==(t=u.indexOf(t))&&u.splice(t,2),this},this.getHandler=function(t){for(var e=0,i=u.length;e<i;e+=2){var r=u[e],n=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return n}return null},this.isLoaded=function(){return o===s}}var el=new tl;function il(t,e){k.call(this),this.type="Light",this.color=new H(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}il.prototype=Object.assign(Object.create(k.prototype),{constructor:il,isLight:!0,copy:function(t){return k.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this}});var rl=new Qt,nl=new l;function ol(t,e,i,r,n,o){this.planes=[void 0!==t?t:new se,void 0!==e?e:new se,void 0!==i?i:new se,void 0!==r?r:new se,void 0!==n?n:new se,void 0!==o?o:new se]}function sl(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new lt(512,512),this.map=null,this.mapPass=null,this.matrix=new g,this.ti=new ol,this.ii=new lt(1,1),this.ni=1,this.ei=[new ht(0,0,1,1)]}function al(){k.call(this),this.type="Camera",this.matrixWorldInverse=new g,this.projectionMatrix=new g,this.projectionMatrixInverse=new g}function ul(t,e,i,r,n,o){al.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function hl(){sl.call(this,new ul(-5,5,5,-5,.5,500))}function ll(t,e){il.call(this,t,e),this.type="DirectionalLight",this.position.copy(k.DefaultUp),this.updateMatrix(),this.target=new k,this.shadow=new hl}Object.assign(ol.prototype,{set:function(t,e,i,r,n,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(i),s[3].copy(r),s[4].copy(n),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromProjectionMatrix:function(t){var e=this.planes,i=(t=t.elements)[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=t[6],h=t[7],l=t[8],c=t[9],f=t[10],A=t[11],p=t[12],d=t[13],m=t[14];t=t[15];return e[0].setComponents(o-i,h-s,A-l,t-p).normalize(),e[1].setComponents(o+i,h+s,A+l,t+p).normalize(),e[2].setComponents(o+r,h+a,A+c,t+d).normalize(),e[3].setComponents(o-r,h-a,A-c,t-d).normalize(),e[4].setComponents(o-n,h-u,A-f,t-m).normalize(),e[5].setComponents(o+n,h+u,A+f,t+m).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),rl.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(rl)},intersectsSprite:function(t){return rl.center.set(0,0,0),rl.radius=.7071067811865476,rl.applyMatrix4(t.matrixWorld),this.intersectsSphere(rl)},intersectsSphere:function(t){for(var e=this.planes,i=t.center,r=-t.radius,n=0;n<6;n++)if(e[n].distanceToPoint(i)<r)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,i=0;i<6;i++){var r=e[i];if(nl.x=(0<r.normal.x?t.max:t.min).x,nl.y=(0<r.normal.y?t.max:t.min).y,nl.z=(0<r.normal.z?t.max:t.min).z,r.distanceToPoint(nl)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}),Object.assign(sl.prototype,{ri:new g,oi:new l,si:new l,getViewportCount:function(){return this.ni},getFrustum:function(){return this.ti},updateMatrices:function(t){var e=this.camera,i=this.matrix,r=this.ri,n=this.si,o=this.oi;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),n.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(n),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this.ti.setFromProjectionMatrix(r),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)},getViewport:function(t){return this.ei[t]},getFrameExtents:function(){return this.ii},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)}}),al.prototype=Object.assign(Object.create(k.prototype),{constructor:al,isCamera:!0,copy:function(t,e){return k.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(t=new l),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){k.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){k.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ul.prototype=Object.assign(Object.create(al.prototype),{constructor:ul,isOrthographicCamera:!0,copy:function(t,e){return al.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,r,n,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),r=(n=(this.right+this.left)/2)-e,n=n+e,o=(e=(o=(this.top+this.bottom)/2)+i,o-i);null!==this.view&&this.view.enabled&&(i=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom,n=(r+=i*this.view.offsetX)+i*this.view.width,o=(e-=t*this.view.offsetY)-t*this.view.height),this.projectionMatrix.makeOrthographic(r,n,e,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}),hl.prototype=Object.assign(Object.create(sl.prototype),{constructor:hl,isDirectionalLightShadow:!0,updateMatrices:function(t){sl.prototype.updateMatrices.call(this,t)}}),ll.prototype=Object.assign(Object.create(il.prototype),{constructor:ll,isDirectionalLight:!0,copy:function(t){return il.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});var cl={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function fl(t){Ll.call(this,t)}function Al(t){Ll.call(this,t)}function pl(t){Jt.call(this),this.type="ShadowMaterial",this.color=new H(0),this.transparent=!0,this.setValues(t)}function dl(t){Jt.call(this),this.type="SpriteMaterial",this.color=new H(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}fl.prototype=Object.assign(Object.create(Ll.prototype),{constructor:fl,load:function(t,e,i,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n,o=this,s=cl.get(t);return void 0!==s?(o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s):((n=document.createElementNS("http://www.w3.org/1999/xhtml","img")).addEventListener("load",a,!1),n.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),o.manager.itemStart(t),n.src=t,n);function a(){n.removeEventListener("load",a,!1),n.removeEventListener("error",u,!1),cl.add(t,this),e&&e(this),o.manager.itemEnd(t)}function u(e){n.removeEventListener("load",a,!1),n.removeEventListener("error",u,!1),r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}}}),Al.prototype=Object.assign(Object.create(Ll.prototype),{constructor:Al,load:function(t,e,i,r){var n=new ee,o=new fl(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){n.image=i,i=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data\:image\/jpeg/),n.format=i?1022:1023,n.needsUpdate=!0,void 0!==e&&e(n)},i,r),n}}),((pl.prototype=Object.create(Jt.prototype)).constructor=pl).prototype.isShadowMaterial=!0,pl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this},((dl.prototype=Object.create(Jt.prototype)).constructor=dl).prototype.isSpriteMaterial=!0,dl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var ml,yl,gl,vl,bl="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",wl="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n";function xl(t){Jt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=bl,this.fragmentShader=wl,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(t.attributes,this.setValues(t))}function Ml(t){xl.call(this,t),this.type="RawShaderMaterial"}function _l(t){Jt.call(this),this.type="PointsMaterial",this.color=new H(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function Sl(t){Jt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new H(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=St,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Bl(t){Sl.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}function El(t){Jt.call(this),this.type="MeshPhongMaterial",this.color=new H(16777215),this.specular=new H(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=St,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Cl(t){Jt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new H(16777215),this.specular=new H(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=St,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Tl(t){Jt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=St,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Fl(t){Jt.call(this),this.type="MeshLambertMaterial",this.color=new H(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Pl(t){Jt.call(this),this.type="MeshDepthMaterial",this.depthPacking=_t,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Ol(t){Jt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new l,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Dl(t){Jt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new H(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=St,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Rl(t){Jt.call(this),this.type="LineBasicMaterial",this.color=new H(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}function Il(t){Rl.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Ul(t){Ll.call(this,t),this.textures={}}function Ll(t){this.manager=void 0!==t?t:el,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}((xl.prototype=Object.create(Jt.prototype)).constructor=xl).prototype.isShaderMaterial=!0,xl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=function(t){var e,i={};for(e in t)for(var r in i[e]={},t[e]){var n=t[e][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?i[e][r]=n.clone():Array.isArray(n)?i[e][r]=n.slice():i[e][r]=n}return i}(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},((Ml.prototype=Object.create(xl.prototype)).constructor=Ml).prototype.isRawShaderMaterial=!0,((_l.prototype=Object.create(Jt.prototype)).constructor=_l).prototype.isPointsMaterial=!0,_l.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},((Sl.prototype=Object.create(Jt.prototype)).constructor=Sl).prototype.isMeshStandardMaterial=!0,Sl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},((Bl.prototype=Object.create(Sl.prototype)).constructor=Bl).prototype.isMeshPhysicalMaterial=!0,Bl.prototype.copy=function(t){return Sl.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new H).copy(t.sheen):this.sheen=null,this.transparency=t.transparency,this},((El.prototype=Object.create(Jt.prototype)).constructor=El).prototype.isMeshPhongMaterial=!0,El.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Cl.prototype=Object.create(Jt.prototype)).constructor=Cl).prototype.isMeshToonMaterial=!0,Cl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Tl.prototype=Object.create(Jt.prototype)).constructor=Tl).prototype.isMeshNormalMaterial=!0,Tl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Fl.prototype=Object.create(Jt.prototype)).constructor=Fl).prototype.isMeshLambertMaterial=!0,Fl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Pl.prototype=Object.create(Jt.prototype)).constructor=Pl).prototype.isMeshDepthMaterial=!0,Pl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},((Ol.prototype=Object.create(Jt.prototype)).constructor=Ol).prototype.isMeshDistanceMaterial=!0,Ol.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},((Dl.prototype=Object.create(Jt.prototype)).constructor=Dl).prototype.isMeshMatcapMaterial=!0,Dl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Rl.prototype=Object.create(Jt.prototype)).constructor=Rl).prototype.isLineBasicMaterial=!0,Rl.prototype.copy=function(t){return Jt.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},((Il.prototype=Object.create(Rl.prototype)).constructor=Il).prototype.isLineDashedMaterial=!0,Il.prototype.copy=function(t){return Rl.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this},Ul.prototype=Object.assign(Object.create(Ll.prototype),{constructor:Ul,load:function(t,e,i,r){var n=this,o=new jl(n.manager);o.setPath(n.path),o.load(t,function(t){e(n.parse(JSON.parse(t)))},i,r)},parse:function(t){var e=this.textures;function i(t){return e[t],e[t]}var n,o=new r[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.sheen&&(o.sheen=(new H).setHex(t.sheen)),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(o.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(o.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(o.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(o.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(o.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(o.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(o.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(o.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.vertexTangents&&(o.vertexTangents=t.vertexTangents),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?o.vertexColors=0<t.vertexColors:o.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var s in t.uniforms){var a=t.uniforms[s];switch(o.uniforms[s]={},a.type){case"t":o.uniforms[s].value=i(a.value);break;case"c":o.uniforms[s].value=(new H).setHex(a.value);break;case"v2":o.uniforms[s].value=(new lt).fromArray(a.value);break;case"v3":o.uniforms[s].value=(new l).fromArray(a.value);break;case"v4":o.uniforms[s].value=(new ht).fromArray(a.value);break;case"m3":o.uniforms[s].value=(new _).fromArray(a.value);case"m4":o.uniforms[s].value=(new g).fromArray(a.value);break;default:o.uniforms[s].value=a.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var u in t.extensions)o.extensions[u]=t.extensions[u];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=i(t.map)),void 0!==t.matcap&&(o.matcap=i(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(o.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(n=t.normalScale,!1===Array.isArray(n)&&(n=[n,n]),o.normalScale=(new lt).fromArray(n)),void 0!==t.displacementMap&&(o.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=i(t.specularMap)),void 0!==t.envMap&&(o.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(o.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(o.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new lt).fromArray(t.clearcoatNormalScale)),o},setTextures:function(t){return this.textures=t,this}}),Object.assign(Ll.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),Object.assign(Ll.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var r=[],n=0;n<t.length;++n)r[n]=this.createMaterial(t[n],e,i);return r},createMaterial:(ml={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},yl=new H,gl=new Al,vl=new Ul,function(t,e,i){var r={};function n(t,n,o,a,u){t=e+t;var h=(null!==(h=(new tl).getHandler(t))?h:(gl.setCrossOrigin(i),gl)).load(t);void 0!==n&&(h.repeat.fromArray(n),1!==n[0]&&(h.wrapS=1e3),1!==n[1])&&(h.wrapT=1e3),void 0!==o&&h.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(h.wrapS=1e3),"mirror"===a[0]&&(h.wrapS=1002),"repeat"===a[1]&&(h.wrapT=1e3),"mirror"===a[1])&&(h.wrapT=1002),void 0!==u&&(h.anisotropy=u),t=s.generateUUID();return r[t]=h,t}var o,a={uuid:s.generateUUID(),type:"MeshLambertMaterial"};for(o in t){var u=t[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=u;break;case"blending":a.blending=ml[u];break;case"colorAmbient":case"mapAmbient":break;case"colorDiffuse":a.color=yl.fromArray(u).getHex();break;case"colorSpecular":a.specular=yl.fromArray(u).getHex();break;case"colorEmissive":a.emissive=yl.fromArray(u).getHex();break;case"specularCoef":a.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=n(u,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=n(u,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=n(u,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=n(u,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=n(u,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=n(u,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=u;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=n(u,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=n(u,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=n(u,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=n(u,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=1;break;case"doubleSided":a.side=2;break;case"transparency":a.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=u;break;case"vertexColors":!0===u&&(a.vertexColors=2),"face"===u&&(a.vertexColors=1)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),vl.setTextures(r),vl.parse(a)})});var kl={};function jl(t){Ll.call(this,t)}jl.prototype=Object.assign(Object.create(Ll.prototype),{constructor:jl,load:function(t,e,i,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,o=cl.get(t);if(void 0!==o)return n.manager.itemStart(t),setTimeout(function(){e&&e(o),n.manager.itemEnd(t)},0),o;if(void 0===kl[t]){var s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var a=s[1],u=!!s[2],h=s[3];h=decodeURIComponent(h);u&&(h=atob(h));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":for(var c=new Uint8Array(h.length),f=0;f<h.length;f++)c[f]=h.charCodeAt(f);A="blob"===l?new Blob([c.buffer],{type:a}):c.buffer;break;case"document":var A=(new DOMParser).parseFromString(h,a);break;case"json":A=JSON.parse(h);break;default:A=h}setTimeout(function(){e&&e(A),n.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){r&&r(e),n.manager.itemError(t),n.manager.itemEnd(t)},0)}}else{kl[t]=[],kl[t].push({onLoad:e,onProgress:i,onError:r});var p,d=new XMLHttpRequest;for(p in d.open("GET",t,!0),d.addEventListener("load",function(e){var i=this.response,r=kl[t];if(delete kl[t],200===this.status||0===this.status){this.status,cl.add(t,i);for(var o=0,s=r.length;o<s;o++)(a=r[o]).onLoad&&a.onLoad(i)}else{var a;for(o=0,s=r.length;o<s;o++)(a=r[o]).onError&&a.onError(e);n.manager.itemError(t)}n.manager.itemEnd(t)},!1),d.addEventListener("progress",function(e){for(var i=kl[t],r=0,n=i.length;r<n;r++){var o=i[r];o.onProgress&&o.onProgress(e)}},!1),d.addEventListener("error",function(e){var i=kl[t];delete kl[t];for(var r=0,o=i.length;r<o;r++){var s=i[r];s.onError&&s.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)},!1),d.addEventListener("abort",function(e){var i=kl[t];delete kl[t];for(var r=0,o=i.length;r<o;r++){var s=i[r];s.onError&&s.onError(e)}n.manager.itemError(t),n.manager.itemEnd(t)},!1),void 0!==this.responseType&&(d.responseType=this.responseType),void 0!==this.withCredentials&&(d.withCredentials=this.withCredentials),d.overrideMimeType&&d.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)d.setRequestHeader(p,this.requestHeader[p]);d.send(null)}return n.manager.itemStart(t),d}kl[t].push({onLoad:e,onProgress:i,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var Ql=function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}};function Nl(t,e,i,r){al.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function zl(){sl.call(this,new Nl(90,1,.5,500)),this.ii=new lt(4,2),this.ni=6,this.ei=[new ht(2,1,1,1),new ht(0,1,1,1),new ht(3,1,1,1),new ht(1,1,1,1),new ht(3,0,1,1),new ht(1,0,1,1)],this.ui=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],this.hi=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)]}function Hl(t,e,i,r){il.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==r?r:1,this.shadow=new zl}function Vl(){sl.call(this,new Nl(50,1,.5,500))}function Gl(t,e,i,r,n,o){il.call(this,t,e),this.type="SpotLight",this.position.copy(k.DefaultUp),this.updateMatrix(),this.target=new k,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==o?o:1,this.shadow=new Vl}function Kl(t,e,i,r){this.parameterPositions=t,this.ai=0,this.resultBuffer=void 0!==r?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Yl(t){Ll.call(this,t)}function Xl(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}Nl.prototype=Object.assign(Object.create(al.prototype),{constructor:Nl,isPerspectiveCamera:!0,copy:function(t,e){return al.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*s.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*s.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*s.RAD2DEG*Math.atan(Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,r,n,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e=this.near,i=e*Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom,r=2*i,n=this.aspect*r,o=-.5*n,a=this.view,u=(null!==this.view&&this.view.enabled&&(u=a.fullWidth,t=a.fullHeight,o+=a.offsetX*n/u,i-=a.offsetY*r/t,n*=a.width/u,r*=a.height/t),this.filmOffset);0!==u&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,i,i-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}),zl.prototype=Object.assign(Object.create(sl.prototype),{constructor:zl,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var i=this.camera,r=this.matrix,n=this.oi,o=this.si,s=this.ri;n.setFromMatrixPosition(t.matrixWorld),i.position.copy(n),o.copy(i.position),o.add(this.ui[e]),i.up.copy(this.hi[e]),i.lookAt(o),i.updateMatrixWorld(),r.makeTranslation(-n.x,-n.y,-n.z),s.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this.ti.setFromProjectionMatrix(s)}}),Hl.prototype=Object.assign(Object.create(il.prototype),{constructor:Hl,isPointLight:!0,copy:function(t){return il.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Vl.prototype=Object.assign(Object.create(sl.prototype),{constructor:Vl,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,i=2*s.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,n=t.distance||e.far;i===e.fov&&r===e.aspect&&n===e.far||(e.fov=i,e.aspect=r,e.far=n,e.updateProjectionMatrix()),sl.prototype.updateMatrices.call(this,t)}}),Gl.prototype=Object.assign(Object.create(il.prototype),{constructor:Gl,isSpotLight:!0,copy:function(t){return il.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Object.assign(Kl.prototype,{evaluate:function(t){var e,i=this.parameterPositions,r=this.ai,n=i[r],o=i[r-1];t:{e:{i:{r:if(!(t<n)){for(var s=r+2;;){if(void 0===n){if(t<o)break r;return r=i.length,this.ai=r,this.afterEnd_(r-1,t,o)}if(r===s)break;if(o=n,t<(n=i[++r]))break e}e=i.length;break i}if(o<=t)break t;var a=i[1];for(t<a&&(r=2,o=a),s=r-2;;){if(void 0===o)return this.ai=0,this.beforeStart_(0,t,n);if(r===s)break;if(n=o,(o=i[--r-1])<=t)break e}e=r,r=0}for(;r<e;){var u=r+e>>>1;t<i[u]?e=u:r=1+u}if(n=i[r],void 0===(o=i[r-1]))return this.ai=0,this.beforeStart_(0,t,n);if(void 0===n)return r=i.length,this.ai=r,this.afterEnd_(r-1,o,t)}this.ai=r,this.intervalChanged_(r,o,n)}return this.interpolate_(r,o,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=t*r,o=0;o!==r;++o)e[o]=i[n+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Kl.prototype,{beforeStart_:Kl.prototype.copySampleValue_,afterEnd_:Kl.prototype.copySampleValue_}),Yl.prototype=Object.assign(Object.create(Ll.prototype),{constructor:Yl,load:function(t,e,i,r){var n=null,o=new fl(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(t){var i=t.width,r=t.height,o=(512<(i=s.isPowerOfTwo(i)?i:Math.pow(2,Math.floor(Math.log(i)/Math.LN2)))&&(i=512),512<(r=s.isPowerOfTwo(r)?r:Math.pow(2,Math.floor(Math.log(r)/Math.LN2)))&&(r=512),document.createElement("canvas"));o.width=i,o.height=r,o.getContext("2d").drawImage(t,0,0,o.width,o.height),n=new ie(o),void 0!==e&&e(n)},i,r),n}}),Object.defineProperty(Xl.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Xl.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var r=0,n=this.stride;r<n;r++)this.array[t+r]=e.array[i+r];return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var Wl=new l;function ql(t,e,i,r){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===r}function Zl(t,e){t&&t.isGeometry,Ve.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new g,this.bindMatrixInverse=new g}Object.defineProperties(ql.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ql.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,i=this.data.count;e<i;e++)Wl.x=this.getX(e),Wl.y=this.getY(e),Wl.z=this.getZ(e),Wl.applyMatrix4(t),this.setXYZ(e,Wl.x,Wl.y,Wl.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=n,this}}),Zl.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Zl,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new ht,e=this.geometry.attributes.skinWeight,i=0,r=e.count;i<r;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);var n=1/t.manhattanLength();n!=1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Ve.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Jl=new l,$l=new l,tc=new g,ec=new pe,ic=new Qt;function rc(t,e,i){k.call(this),this.type="Line",this.geometry=void 0!==t?t:new Wt,this.material=void 0!==e?e:new Rl}rc.prototype=Object.assign(Object.create(k.prototype),{constructor:rc,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,i=[0],r=1,n=e.count;r<n;r++)Jl.fromBufferAttribute(e,r-1),$l.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Jl.distanceTo($l);t.setAttribute("lineDistance",new Lt(i,1))}}else if(t.isGeometry){var o=t.vertices;for((i=t.lineDistances)[0]=0,r=1,n=o.length;r<n;r++)i[r]=i[r-1],i[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(t,e){var i=this.geometry,r=this.matrixWorld,n=t.params.Line.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),ic.copy(i.boundingSphere),ic.applyMatrix4(r),ic.radius+=n,!1!==t.ray.intersectsSphere(ic)){tc.getInverse(r),ec.copy(t.ray).applyMatrix4(tc);var o=(r=n/((this.scale.x+this.scale.y+this.scale.z)/3))*r,s=new l,a=new l,u=new l,h=new l,c=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){n=i.index;var f=i.attributes.position.array;if(null!==n)for(var A=n.array,p=0,d=A.length-1;p<d;p+=c){var m=A[p],y=A[p+1];s.fromArray(f,3*m),a.fromArray(f,3*y),o<ec.distanceSqToSegment(s,a,h,u)||(h.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(h))<t.near)||g>t.far||e.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}else for(p=0,d=f.length/3-1;p<d;p+=c)s.fromArray(f,3*p),a.fromArray(f,3*p+3),o<ec.distanceSqToSegment(s,a,h,u)||(h.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(h))<t.near)||g>t.far||e.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}else if(i.isGeometry){var g,v=i.vertices,b=v.length;for(p=0;p<b-1;p+=c)o<ec.distanceSqToSegment(v[p],v[p+1],h,u)||(h.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(h))<t.near)||g>t.far||e.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var nc=new l,oc=new l;function sc(t,e){rc.call(this,t,e),this.type="LineSegments"}function ac(t,e){rc.call(this,t,e),this.type="LineLoop"}sc.prototype=Object.assign(Object.create(rc.prototype),{constructor:sc,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,i=[],r=0,n=e.count;r<n;r+=2)nc.fromBufferAttribute(e,r),oc.fromBufferAttribute(e,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+nc.distanceTo(oc);t.setAttribute("lineDistance",new Lt(i,1))}}else if(t.isGeometry){var o=t.vertices;for(i=t.lineDistances,r=0,n=o.length;r<n;r+=2)nc.copy(o[r]),oc.copy(o[r+1]),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+nc.distanceTo(oc)}return this}}),ac.prototype=Object.assign(Object.create(rc.prototype),{constructor:ac,isLineLoop:!0});var uc=new g,hc=new pe,lc=new Qt,cc=new l;function fc(t,e){k.call(this),this.type="Points",this.geometry=void 0!==t?t:new Wt,this.material=void 0!==e?e:new _l,this.updateMorphTargets()}function Ac(t,e,i,r,n,o,s){var a=hc.distanceSqToPoint(t);a<i&&(i=new l,hc.closestPointToPoint(t,i),i.applyMatrix4(r),(t=n.ray.origin.distanceTo(i))<n.near||t>n.far||o.push({distance:t,distanceToRay:Math.sqrt(a),point:i,index:e,face:null,object:s}))}function pc(t,e,i,r){Kl.call(this,t,e,i,r),this.ci=-0,this.fi=-0,this.li=-0,this.vi=-0}function dc(t,e,i,r){Kl.call(this,t,e,i,r)}function mc(t,e,i,r){Kl.call(this,t,e,i,r)}fc.prototype=Object.assign(Object.create(k.prototype),{constructor:fc,isPoints:!0,raycast:function(t,e){var i=this.geometry,r=this.matrixWorld,n=t.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),lc.copy(i.boundingSphere),lc.applyMatrix4(r),lc.radius+=n,!1!==t.ray.intersectsSphere(lc)){uc.getInverse(r),hc.copy(t.ray).applyMatrix4(uc);var o=(n=n/((this.scale.x+this.scale.y+this.scale.z)/3))*n;if(i.isBufferGeometry){n=i.index;var s=i.attributes.position.array;if(null!==n)for(var a=n.array,u=0,h=a.length;u<h;u++){var l=a[u];cc.fromArray(s,3*l),Ac(cc,l,o,r,t,e,this)}else{u=0;for(var c=s.length/3;u<c;u++)cc.fromArray(s,3*u),Ac(cc,u,o,r,t,e,this)}}else{var f=i.vertices;for(u=0,c=f.length;u<c;u++)Ac(f[u],u,o,r,t,e,this)}}},updateMorphTargets:function(){var t,e,i,r=this.geometry;if(r.isBufferGeometry){var n=r.morphAttributes,o=Object.keys(n);if(0<o.length){var s=n[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)i=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}else void 0!==(n=r.morphTargets)&&n.length},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),pc.prototype=Object.assign(Object.create(Kl.prototype),{constructor:pc,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var r=this.parameterPositions,n=t-2,o=t+1,s=r[n],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:n=t,s=2*e-i;break;case 2402:s=e+r[n=r.length-2]-r[n+1];break;default:n=t,s=i}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:o=t,a=2*i-e;break;case 2402:a=i+r[o=1]-r[0];break;default:o=t-1,a=e}var u=.5*(i-e),h=this.valueSize;this.ci=u/(e-s),this.li=u/(a-i),this.fi=n*h,this.vi=o*h},interpolate_:function(t,e,i,r){for(var n=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,u=a-s,h=this.fi,l=this.vi,c=(t=this.ci,this.li),f=-t*(e=(r=(i=(i-e)/(r-e))*i)*i)+2*t*r-t*i,A=(1+t)*e+(-1.5-2*t)*r+(-.5+t)*i+1,p=(-1-c)*e+(1.5+c)*r+.5*i,d=c*e-c*r,m=0;m!==s;++m)n[m]=f*o[h+m]+A*o[u+m]+p*o[a+m]+d*o[l+m];return n}}),dc.prototype=Object.assign(Object.create(Kl.prototype),{constructor:dc,interpolate_:function(t,e,i,r){for(var n=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,u=a-s,h=(i-e)/(r-e),l=1-h,c=0;c!==s;++c)n[c]=o[u+c]*l+o[a+c]*h;return n}}),mc.prototype=Object.assign(Object.create(Kl.prototype),{constructor:mc,interpolate_:function(t){return this.copySampleValue_(t-1)}});var yc={arraySlice:function(t,e,i){return yc.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,i=new Array(e),r=0;r!==e;++r)i[r]=r;return i.sort(function(e,i){return t[e]-t[i]}),i},sortedArray:function(t,e,i){for(var r=t.length,n=new t.constructor(r),o=0,s=0;s!==r;++o)for(var a=i[o]*e,u=0;u!==e;++u)n[s++]=t[a+u];return n},flattenJSON:function(t,e,i,r){for(var n=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[n++];if(void 0!==o){var s=o[r];if(void 0!==s)if(Array.isArray(s))for(;void 0!==(s=o[r])&&(e.push(o.time),i.push.apply(i,s)),void 0!==(o=t[n++]););else if(void 0!==s.toArray)for(;void 0!==(s=o[r])&&(e.push(o.time),s.toArray(i,i.length)),void 0!==(o=t[n++]););else for(;void 0!==(s=o[r])&&(e.push(o.time),i.push(s)),void 0!==(o=t[n++]););}},subclip:function(t,e,i,r,n){n=n||30;for(var o=t.clone(),s=(o.name=e,[]),a=0;a<o.tracks.length;++a){for(var u=o.tracks[a],h=u.getValueSize(),l=[],c=[],f=0;f<u.times.length;++f){var A=u.times[f]*n;if(!(A<i||r<=A)){l.push(u.times[f]);for(var p=0;p<h;++p)c.push(u.values[f*h+p])}}0!==l.length&&(u.times=yc.convertArray(l,u.times.constructor),u.values=yc.convertArray(c,u.values.constructor),s.push(u))}o.tracks=s;var d=1/0;for(a=0;a<o.tracks.length;++a)d>o.tracks[a].times[0]&&(d=o.tracks[a].times[0]);for(a=0;a<o.tracks.length;++a)o.tracks[a].shift(-1*d);return o.resetDuration(),o}};function gc(t,e,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=yc.convertArray(e,this.TimeBufferType),this.values=yc.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function vc(t,e,i,r){gc.call(this,t,e,i,r)}function bc(t,e,i,r){Kl.call(this,t,e,i,r)}function wc(t,e,i,r){gc.call(this,t,e,i,r)}function xc(t,e,i,r){gc.call(this,t,e,i,r)}function Mc(t,e,i){gc.call(this,t,e,i)}function _c(t,e,i,r){gc.call(this,t,e,i,r)}function Sc(t,e,i,r){gc.call(this,t,e,i,r)}function Bc(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=s.generateUUID(),this.duration<0&&this.resetDuration()}function Ec(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e,i,r=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vc;case"vector":case"vector2":case"vector3":case"vector4":return xc;case"color":return _c;case"quaternion":return wc;case"bool":case"boolean":return Mc;case"string":return Sc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);return void 0===t.times&&(yc.flattenJSON(t.keys,e=[],i=[],"value"),t.times=e,t.values=i),void 0!==r.parse?r.parse(t):new r(t.name,t.times,t.values,t.interpolation)}function Cc(){k.call(this),this.type="Bone"}Object.assign(gc.prototype,{constructor:gc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Mt,InterpolantFactoryMethodDiscrete:function(t){return new mc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new dc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new pc(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case xt:e=this.InterpolantFactoryMethodDiscrete;break;case Mt:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}}else this.createInterpolant=e;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xt;case this.InterpolantFactoryMethodLinear:return Mt;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,r=e.length;i!==r;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,r=e.length;i!==r;++i)e[i]*=t;return this},trim:function(t,e){for(var i,r=this.times,n=r.length,o=0,s=n-1;o!==n&&r[o]<t;)++o;for(;-1!==s&&r[s]>e;)--s;return++s,0===o&&s===n||(s<=o&&(o=(s=Math.max(s,1))-1),i=this.getValueSize(),this.times=yc.arraySlice(r,o,s),this.values=yc.arraySlice(this.values,o*i,s*i)),this},validate:function(){for(var t=!0,e=this.getValueSize(),i=(e-Math.floor(e)!=0&&(t=!1),this.times),r=this.values,n=i.length,o=(0===n&&(t=!1),null),s=0;s!==n;s++){var a=i[s];if("number"==typeof a&&isNaN(a)){t=!1;break}if(null!==o&&a<o){t=!1;break}o=a}if(void 0!==r&&yc.isTypedArray(r)){s=0;for(var u=r.length;s!==u;++s){var h=r[s];if(isNaN(h)){t=!1;break}}}return t},optimize:function(){for(var t=yc.arraySlice(this.times),e=yc.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),n=1,o=t.length-1,s=1;s<o;++s){var a=!1,u=t[s];if(u!==t[s+1]&&(1!==s||u!==u[0]))if(r)a=!0;else for(var h=s*i,l=h-i,c=h+i,f=0;f!==i;++f){var A=e[h+f];if(A!==e[l+f]||A!==e[c+f]){a=!0;break}}if(a){if(s!==n){t[n]=t[s];var p=s*i,d=n*i;for(f=0;f!==i;++f)e[d+f]=e[p+f]}++n}}if(0<o){for(t[n]=t[o],p=o*i,d=n*i,f=0;f!==i;++f)e[d+f]=e[p+f];++n}return n!==t.length?(this.times=yc.arraySlice(t,0,n),this.values=yc.arraySlice(e,0,n*i)):(this.times=t,this.values=e),this},clone:function(){var t=yc.arraySlice(this.times,0),e=yc.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),vc.prototype=Object.assign(Object.create(gc.prototype),{constructor:vc,ValueTypeName:"number"}),bc.prototype=Object.assign(Object.create(Kl.prototype),{constructor:bc,interpolate_:function(t,e,i,r){for(var n=this.resultBuffer,o=this.sampleValues,s=this.valueSize,u=t*s,h=(i-e)/(r-e),l=u+s;u!==l;u+=4)a.slerpFlat(n,0,o,u-s,o,u,h);return n}}),wc.prototype=Object.assign(Object.create(gc.prototype),{constructor:wc,ValueTypeName:"quaternion",DefaultInterpolation:Mt,InterpolantFactoryMethodLinear:function(t){return new bc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),xc.prototype=Object.assign(Object.create(gc.prototype),{constructor:xc,ValueTypeName:"vector"}),Mc.prototype=Object.assign(Object.create(gc.prototype),{constructor:Mc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:xt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),_c.prototype=Object.assign(Object.create(gc.prototype),{constructor:_c,ValueTypeName:"color"}),Sc.prototype=Object.assign(Object.create(gc.prototype),{constructor:Sc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:xt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Bc,{parse:function(t){for(var e=[],i=t.tracks,r=1/(t.fps||1),n=0,o=i.length;n!==o;++n)e.push(Ec(i[n]).scale(r));return new Bc(t.name,t.duration,e)},CreateFromMorphTargetSequence:function(t,e,i,r){for(var n=e.length,o=[],s=0;s<n;s++){var a=[],u=((h=[]).push((s+n-1)%n,s,(s+1)%n),a.push(0,1,0),yc.getKeyframeOrder(h)),h=yc.sortedArray(h,1,u);a=yc.sortedArray(a,1,u);r||0!==h[0]||(h.push(n),a.push(a[0])),o.push(new vc(".morphTargetInfluences["+e[s].name+"]",h,a).scale(1/i))}return new Bc(t,-1,o)},findByName:function(t,e){var i=t;Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations);for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var r={},n=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],u=a.name.match(n);u&&1<u.length&&((u=r[h=u[1]])||(r[h]=u=[]),u.push(a))}var h,l=[];for(h in r)l.push(Bc.CreateFromMorphTargetSequence(h,r[h],e,i));return l},parseAnimation:function(t,e){if(!t)return null;for(var i=function(t,e,i,r,n){var o;0!==i.length&&(yc.flattenJSON(i,i=[],o=[],r),0!==i.length)&&n.push(new t(e,i,o))},r=[],n=t.name||"default",o=t.length||-1,s=t.fps||30,a=t.hierarchy||[],u=0;u<a.length;u++){var h=a[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var l,c={},f=0;f<h.length;f++)if(h[f].morphTargets)for(var A=0;A<h[f].morphTargets.length;A++)c[h[f].morphTargets[A]]=-1;for(l in c){var p=[],d=[];for(A=0;A!==h[f].morphTargets.length;++A){var m=h[f];p.push(m.time),d.push(m.morphTarget===l?1:0)}r.push(new vc(".morphTargetInfluence["+l+"]",p,d))}o=c.length*(s||1)}else{var y=".bones["+e[u].name+"]";i(xc,y+".position",h,"pos",r),i(wc,y+".quaternion",h,"rot",r),i(xc,y+".scale",h,"scl",r)}}return 0===r.length?null:new Bc(n,o,r)}}),Object.assign(Bc.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Bc(this.name,this.duration,t)}}),Cc.prototype=Object.assign(Object.create(k.prototype),{constructor:Cc,isBone:!0});Eo="\\[\\]\\.:\\/";var Tc=new RegExp("["+Eo+"]","g"),Fc="[^"+Eo+"]",Pc=(Eo="[^"+Eo.replace("\\.","")+"]",/((?:WC+[\/:])*)/.source.replace("WC",Fc)),Oc=(Eo=/(WCOD+)?/.source.replace("WCOD",Eo),/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fc)),Dc=(Fc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fc),new RegExp("^"+Pc+Eo+Oc+Fc+"$")),Rc=["material","materials","bones"];function Ic(t,e,i){i=i||Uc.parseTrackName(e),this.yi=t,this.di=t.subscribe_(e,i)}function Uc(t,e,i){this.path=e,this.parsedPath=i||Uc.parseTrackName(e),this.node=Uc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(Ic.prototype,{getValue:function(t,e){this.bind();var i=this.yi.nCachedObjects_;void 0!==(i=this.di[i])&&i.getValue(t,e)},setValue:function(t,e){for(var i=this.di,r=this.yi.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(t,e)},bind:function(){for(var t=this.di,e=this.yi.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this.di,e=this.yi.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(Uc,{Composite:Ic,create:function(t,e,i){return new(t&&t.isAnimationObjectGroup?Uc.Composite:Uc)(t,e,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Tc,"")},parseTrackName:function(t){if(!(i=Dc.exec(t)))throw new Error("PropertyBinding: Cannot parse trackName: "+t);var e,i,r=(i={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]}).nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r&&(e=i.nodeName.substring(r+1),-1!==Rc.indexOf(e))&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=e),null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}return t.children&&(i=function t(i){for(var r=0;r<i.length;r++){var n=i[r];if(n.name===e||n.uuid===e)return n;if(n=t(n.children))return n}return null}(t.children))?i:null}}),Object.assign(Uc.prototype,{bi:function(){},pi:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)t[e++]=i[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=t[e++]},function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=(a=this.parsedPath).objectName,i=a.propertyName,r=a.propertyIndex;if(t||(t=Uc.findNode(this.rootNode,a.nodeName)||this.rootNode,this.node=t),this.getValue=this.bi,this.setValue=this.pi,t){if(e){var n=a.objectIndex;switch(e){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===n){n=o;break}break;default:if(void 0===t[e])return;t=t[e]}if(void 0!==n){if(void 0===t[n])return;t=t[n]}}var s=t[i];if(void 0===s)a=a.nodeName;else{var a=this.Versioning.None,u=(void 0!==(this.targetObject=t).needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate),this.BindingType.Direct);if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return;if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return;for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!t.geometry.morphTargets)return;for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][a]}}},unbind:function(){this.node=null,this.getValue=this.mi,this.setValue=this.wi}}),Object.assign(Uc.prototype,{mi:Uc.prototype.getValue,wi:Uc.prototype.setValue});var Lc,kc,jc,Qc,Nc,zc,Hc,Vc,Gc,Kc,Yc,Xc,Wc=new g,qc=new g;function Zc(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{this.boneInverses=[];for(var i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new g)}}function Jc(t){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $c(t){Ll.call(this,t),this.dracoLoader=null,this.ddsLoader=null}function tf(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=Lc.MSFT_TEXTURE_DDS,this.ddsLoader=t}function ef(t){this.name=Lc.KHR_LIGHTS_PUNCTUAL,t=t.extensions&&t.extensions[Lc.KHR_LIGHTS_PUNCTUAL]||{},this.lightDefs=t.lights||[]}function rf(){this.name=Lc.KHR_MATERIALS_UNLIT}function nf(){this.name=Lc.KHR_MATERIALS_CLEARCOAT}function of(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Lc.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}function sf(){this.name=Lc.KHR_TEXTURE_TRANSFORM}function af(t){Sl.call(this),this.isGLTFSpecularGlossinessMaterial=!0,["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n");var e=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),n=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),o={specular:{value:(new H).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this.gi=o,this.onBeforeCompile=function(t){for(var s in o)t.uniforms[s]=o[s];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),t.fragmentShader=t.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),t.fragmentShader=t.fragmentShader.replace("#include <metalnessmap_pars_fragment>",e),t.fragmentShader=t.fragmentShader.replace("#include <roughnessmap_fragment>",i),t.fragmentShader=t.fragmentShader.replace("#include <metalnessmap_fragment>",r),t.fragmentShader=t.fragmentShader.replace("#include <lights_physical_fragment>",n)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(t){o.specular.value=t}},specularMap:{get:function(){return o.specularMap.value},set:function(t){o.specularMap.value=t}},glossiness:{get:function(){return o.glossiness.value},set:function(t){o.glossiness.value=t}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(t){(o.glossinessMap.value=t)?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}function uf(){return{name:Lc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return af},extendParams:function(t,e,i){e=e.extensions[this.name];var r,n=(t.color=new H(1,1,1),t.opacity=1,[]);return Array.isArray(e.diffuseFactor)&&(r=e.diffuseFactor,t.color.fromArray(r),t.opacity=r[3]),void 0!==e.diffuseTexture&&n.push(i.assignTexture(t,"map",e.diffuseTexture)),t.emissive=new H(0,0,0),t.glossiness=void 0!==e.glossinessFactor?e.glossinessFactor:1,t.specular=new H(1,1,1),Array.isArray(e.specularFactor)&&t.specular.fromArray(e.specularFactor),void 0!==e.specularGlossinessTexture&&(r=e.specularGlossinessTexture,n.push(i.assignTexture(t,"glossinessMap",r)),n.push(i.assignTexture(t,"specularMap",r))),Promise.all(n)},createMaterial:function(t){var e=new af(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=St,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}}function hf(){this.name=Lc.KHR_MESH_QUANTIZATION}function lf(t,e,i,r){Kl.call(this,t,e,i,r)}function cf(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}function ff(t,e,i){for(var r in i.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=i.extensions[r])}function Af(t,e){void 0!==e.extras&&"object"===Jc(e.extras)&&Object.assign(t.userData,e.extras)}function pf(t){for(var e="",i=Object.keys(t).sort(),r=0,n=i.length;r<n;r++)e+=i[r]+":"+t[i[r]]+";";return e}function df(t,e,i){this.json=t||{},this.extensions=e||{},this.options=i||{},this.cache=new function(){var t={};return{get:function(e){return t[e]},add:function(e,i){t[e]=i},remove:function(e){delete t[e]},removeAll:function(){t={}}}},this.primitiveCache={},this.textureLoader=new Yl(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new jl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function mf(t,e,i){var r,n=e.attributes,o=[];for(r in n){var s=Gc[r]||r.toLowerCase();s in t.attributes||o.push(function(e,r){return i.getDependency("accessor",e).then(function(e){t.setAttribute(r,e)})}(n[r],s))}void 0===e.indices||t.index||(a=i.getDependency("accessor",e.indices).then(function(e){t.setIndex(e)}),o.push(a)),Af(t,e);var a=t,u=e,h=i,c=u.attributes,f=new at;if(void 0!==c.POSITION){var A=(b=h.json.accessors[c.POSITION]).min,p=b.max;if(void 0===A||void 0===p);else{f.set(new l(A[0],A[1],A[2]),new l(p[0],p[1],p[2]));var d=u.targets;if(void 0!==d){for(var m=new l,y=new l,g=0,v=d.length;g<v;g++){var b,w=d[g];void 0!==w.POSITION&&(A=(b=h.json.accessors[w.POSITION]).min,p=b.max,void 0!==A&&void 0!==p&&(y.setX(Math.max(Math.abs(A[0]),Math.abs(p[0]))),y.setY(Math.max(Math.abs(A[1]),Math.abs(p[1]))),y.setZ(Math.max(Math.abs(A[2]),Math.abs(p[2]))),m.max(y)))}f.expandByVector(m)}a.boundingBox=f,c=new Qt,f.getCenter(c.center),c.radius=f.min.distanceTo(f.max)/2,a.boundingSphere=c}}return Promise.all(o).then(function(){if(void 0===e.targets)return t;for(var r=t,n=e.targets,o=i,s=!1,a=!1,u=0,h=n.length;u<h&&(void 0!==(A=n[u]).POSITION&&(s=!0),void 0!==A.NORMAL&&(a=!0),!s||!a);u++);if(!s&&!a)return Promise.resolve(r);var l=[],c=[];for(u=0,h=n.length;u<h;u++){var f,A=n[u];s&&(f=void 0!==A.POSITION?o.getDependency("accessor",A.POSITION):r.attributes.position,l.push(f)),a&&(f=void 0!==A.NORMAL?o.getDependency("accessor",A.NORMAL):r.attributes.normal,c.push(f))}return Promise.all([Promise.all(l),Promise.all(c)]).then(function(t){var e=t[0];t=t[1];return s&&(r.morphAttributes.position=e),a&&(r.morphAttributes.normal=t),r.morphTargetsRelative=!0,r})})}function yf(t,e){var i=t.getIndex();if(null===i){var r=[],n=t.getAttribute("position");if(void 0===n)return t;for(var o=0;o<n.count;o++)r.push(o);t.setIndex(r),i=t.getIndex()}var s=i.count-2,a=[];if(2===e)for(o=1;o<=s;o++)a.push(i.getX(0)),a.push(i.getX(o)),a.push(i.getX(o+1));else for(o=0;o<s;o++)o%2==0?(a.push(i.getX(o)),a.push(i.getX(o+1)),a.push(i.getX(o+2))):(a.push(i.getX(o+2)),a.push(i.getX(o+1)),a.push(i.getX(o)));return a.length,(e=t.clone()).setIndex(a),e}Object.assign(Zc.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new g;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){for(var t,e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,i=this.bones.length;e<i;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture,n=0,o=t.length;n<o;n++){var s=t[n]?t[n].matrixWorld:qc;Wc.multiplyMatrices(s,e[n]),Wc.toArray(i,16*n)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new Zc(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var r=this.bones[e];if(r.name===t)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),$c.prototype=Object.assign(Object.create(Ll.prototype),{constructor:$c,load:function(t,e,i,r){function n(e){r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}var o=this,s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}(t),a=(o.manager.itemStart(t),new jl(o.manager));a.setPath(this.path),a.setResponseType("arraybuffer"),"use-credentials"===o.crossOrigin&&a.setWithCredentials(!0),a.load(t,function(i){try{o.parse(i,s,function(r){e(r,i),o.manager.itemEnd(t)},n)}catch(t){n(t)}},i,n)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},parse:function(t,e,i,r){var n,o={};if("string"==typeof t)n=t;else if(Ql(new Uint8Array(t,0,4))===kc){try{o[Lc.KHR_BINARY_GLTF]=new function(t){this.name=Lc.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,jc);if(this.header={magic:Ql(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==kc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=new DataView(t,jc),r=0;r<i.byteLength;){var n,o=i.getUint32(r,!0),s=(r+=4,i.getUint32(r,!0));r+=4,s===Qc.JSON?(n=new Uint8Array(t,jc+r,o),this.content=Ql(n)):s===Qc.BIN&&(this.body=t.slice(n=jc+r,n+o)),r+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}(t)}catch(t){return void(r&&r(t))}n=o[Lc.KHR_BINARY_GLTF].content}else n=Ql(new Uint8Array(t));var s=JSON.parse(n);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(s.extensionsUsed)for(var a=0;a<s.extensionsUsed.length;++a){var u=s.extensionsUsed[a],h=s.extensionsRequired||[];switch(u){case Lc.KHR_LIGHTS_PUNCTUAL:o[u]=new ef(s);break;case Lc.KHR_MATERIALS_CLEARCOAT:o[u]=new nf;break;case Lc.KHR_MATERIALS_UNLIT:o[u]=new rf;break;case Lc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new uf;break;case Lc.KHR_DRACO_MESH_COMPRESSION:o[u]=new of(s,this.dracoLoader);break;case Lc.MSFT_TEXTURE_DDS:o[u]=new tf(this.ddsLoader);break;case Lc.KHR_TEXTURE_TRANSFORM:o[u]=new sf;break;case Lc.KHR_MESH_QUANTIZATION:o[u]=new hf;break;default:h.indexOf(u)}}new df(s,o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(i,r)}}}),Lc={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"},ef.prototype.loadLight=function(t){var e,i=this.lightDefs[t],r=new H(16777215),n=(void 0!==i.color&&r.fromArray(i.color),void 0!==i.range?i.range:0);switch(i.type){case"directional":(e=new ll(r)).target.position.set(0,0,-1),e.add(e.target);break;case"point":(e=new Hl(r)).distance=n;break;case"spot":(e=new Gl(r)).distance=n,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,e.angle=i.spot.outerConeAngle,e.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,e.target.position.set(0,0,-1),e.add(e.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return e.position.set(0,0,0),e.decay=2,void 0!==i.intensity&&(e.intensity=i.intensity),e.name=i.name||"light_"+t,Promise.resolve(e)},rf.prototype.getMaterialType=function(){return $t},rf.prototype.extendParams=function(t,e,i){var r,n=[];return(e=(t.color=new H(1,1,1),t.opacity=1,e.pbrMetallicRoughness))&&(Array.isArray(e.baseColorFactor)&&(r=e.baseColorFactor,t.color.fromArray(r),t.opacity=r[3]),void 0!==e.baseColorTexture)&&n.push(i.assignTexture(t,"map",e.baseColorTexture)),Promise.all(n)},nf.prototype.getMaterialType=function(){return Bl},nf.prototype.extendParams=function(t,e,i){var r=[];return void 0!==(e=e.extensions[this.name]).clearcoatFactor&&(t.clearcoat=e.clearcoatFactor),void 0!==e.clearcoatTexture&&r.push(i.assignTexture(t,"clearcoatMap",e.clearcoatTexture)),void 0!==e.clearcoatRoughnessFactor&&(t.clearcoatRoughness=e.clearcoatRoughnessFactor),void 0!==e.clearcoatRoughnessTexture&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",e.clearcoatRoughnessTexture)),void 0!==e.clearcoatNormalTexture&&(r.push(i.assignTexture(t,"clearcoatNormalMap",e.clearcoatNormalTexture)),void 0!==e.clearcoatNormalTexture.scale)&&(i=e.clearcoatNormalTexture.scale,t.clearcoatNormalScale=new lt(i,i)),Promise.all(r)},kc="glTF",jc=12,Qc={JSON:1313821514,BIN:5130562},of.prototype.decodePrimitive=function(t,e){var i,r=this.json,n=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},u={},h={};for(i in s){var l=Gc[i]||i.toLowerCase();a[l]=s[i]}for(i in t.attributes){var c,f;l=Gc[i]||i.toLowerCase();void 0!==s[i]&&(c=r.accessors[t.attributes[i]],f=Nc[c.componentType],h[l]=f,u[l]=!0===c.normalized)}return e.getDependency("bufferView",o).then(function(t){return new Promise(function(e){n.decodeDracoFile(t,function(t){for(var i in t.attributes){var r=t.attributes[i];void 0!==(i=u[i])&&(r.normalized=i)}e(t)},a,h)})})},sf.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),e.texCoord,t.needsUpdate=!0,t},((af.prototype=Object.create(Sl.prototype)).constructor=af).prototype.copy=function(t){return Sl.prototype.copy.call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},((lf.prototype=Object.create(Kl.prototype)).constructor=lf).prototype.beforeStart_=lf.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=t*r*3+r,o=0;o!==r;o++)e[o]=i[n+o];return e},lf.prototype.afterEnd_=lf.prototype.copySampleValue_,lf.prototype.interpolate_=function(t,e,i,r){for(var n=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,u=3*s,h=r-e,l=t*u,c=l-u,f=-2*(e=(i=(r=(i-e)/h)*r)*r)+3*i,A=e-i,p=1-f,d=A-i+r,m=0;m!==s;m++){var y=o[c+m+s],g=o[c+m+a]*h,v=o[l+m+s],b=o[l+m]*h;n[m]=p*y+d*g+f*v+A*b}return n},Nc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zc={9728:1003,9729:wt,9984:1004,9985:1007,9986:1005,9987:1008},Hc={33071:bt,33648:1002,10497:1e3},Vc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Gc={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Kc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Yc={CUBICSPLINE:void 0,LINEAR:Mt,STEP:xt},Xc={"image/png":1023,"image/jpeg":1022},df.prototype.parse=function(t,e){var i=this,r=this.json,n=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(e){e={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:i,userData:{}},ff(n,e,r),Af(e,r),t(e)}).catch(e)},df.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[],r={},n={},o=0,s=e.length;o<s;o++)for(var a=e[o].joints,u=0,h=a.length;u<h;u++)t[a[u]].isBone=!0;for(var l=0,c=t.length;l<c;l++){var f=t[l];void 0!==f.mesh&&(void 0===r[f.mesh]&&(r[f.mesh]=n[f.mesh]=0),r[f.mesh]++,void 0!==f.skin)&&(i[f.mesh].isSkinnedMesh=!0)}this.json.meshReferences=r,this.json.meshUses=n},df.prototype.getDependency=function(t,e){var i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this.loadNode(e);break;case"mesh":r=this.loadMesh(e);break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this.loadBufferView(e);break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this.loadMaterial(e);break;case"texture":r=this.loadTexture(e);break;case"skin":r=this.loadSkin(e);break;case"animation":r=this.loadAnimation(e);break;case"camera":r=this.loadCamera(e);break;case"light":r=this.extensions[Lc.KHR_LIGHTS_PUNCTUAL].loadLight(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(i,r)}return r},df.prototype.getDependencies=function(t){var e,i,r=this.cache.get(t);return r||(i=(e=this).json[t+("mesh"===t?"es":"s")]||[],r=Promise.all(i.map(function(i,r){return e.getDependency(t,r)})),this.cache.add(t,r)),r},df.prototype.loadBuffer=function(t){var e,i=this.json.buffers[t],r=this.fileLoader;if(i.type&&"arraybuffer"!==i.type)throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");return void 0===i.uri&&0===t?Promise.resolve(this.extensions[Lc.KHR_BINARY_GLTF].body):(e=this.options,new Promise(function(t,n){r.load(cf(i.uri,e.path),t,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})}))},df.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(t){var i=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+i)})},df.prototype.loadAccessor=function(t){var e=this,i=this.json,r=this.json.accessors[t];return void 0===r.bufferView&&void 0===r.sparse?Promise.resolve(null):(t=[],void 0!==r.bufferView?t.push(this.getDependency("bufferView",r.bufferView)):t.push(null),void 0!==r.sparse&&(t.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),t.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(t).then(function(t){var n=t[0],o=Vc[r.type],s=Nc[r.componentType],a=s.BYTES_PER_ELEMENT,u=r.byteOffset||0,h=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,l=!0===r.normalized,c=h&&h!==a*o?(f=Math.floor(u/h),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+f+":"+r.count,(p=e.cache.get(A))||(p=new Xl(new s(n,f*h,r.count*h/a),h/a),e.cache.add(A,p)),new ql(p,o,u%h/a,l)):new Tt(null===n?new s(r.count*o):new s(n,u,r.count*o),o,l);if(void 0!==r.sparse){var f=Nc[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,p=r.sparse.values.byteOffset||0,d=new f(t[1],A,r.sparse.count*Vc.SCALAR),m=new s(t[2],p,r.sparse.count*o);null!==n&&(c=new Tt(c.array.slice(),c.itemSize,c.normalized));for(var y=0,g=d.length;y<g;y++){var v=d[y];if(c.setX(v,m[y*o]),2<=o&&c.setY(v,m[y*o+1]),3<=o&&c.setZ(v,m[y*o+2]),4<=o&&c.setW(v,m[y*o+3]),5<=o)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return c}))},df.prototype.loadTexture=function(t){var e=this,i=this.json,r=this.options,n=this.textureLoader,o=self.URL||self.webkitURL,s=i.textures[t],a=s.extensions||{},u=a[Lc.MSFT_TEXTURE_DDS]?i.images[a[Lc.MSFT_TEXTURE_DDS].source]:i.images[s.source],h=u.uri,l=!1;return void 0!==u.bufferView&&(h=e.getDependency("bufferView",u.bufferView).then(function(t){return l=!0,t=new Blob([t],{type:u.mimeType}),h=o.createObjectURL(t)})),Promise.resolve(h).then(function(t){var i=(i=r.manager.getHandler(t))||(a[Lc.MSFT_TEXTURE_DDS]?e.extensions[Lc.MSFT_TEXTURE_DDS].ddsLoader:n);return new Promise(function(e,n){i.load(cf(t,r.path),e,void 0,n)})}).then(function(t){!0===l&&o.revokeObjectURL(h),t.flipY=!1,s.name&&(t.name=s.name),u.mimeType in Xc&&(t.format=Xc[u.mimeType]);var e=(i.samplers||{})[s.sampler]||{};return t.magFilter=zc[e.magFilter]||wt,t.minFilter=zc[e.minFilter]||1008,t.wrapS=Hc[e.wrapS]||1e3,t.wrapT=Hc[e.wrapT]||1e3,t})},df.prototype.assignTexture=function(t,e,i){var r=this;return this.getDependency("texture",i.index).then(function(n){if(!n.isCompressedTexture)switch(e){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":n.format=1022}var o;void 0===i.texCoord||0==i.texCoord||"aoMap"===e&&i.texCoord,r.extensions[Lc.KHR_TEXTURE_TRANSFORM]&&(o=void 0!==i.extensions?i.extensions[Lc.KHR_TEXTURE_TRANSFORM]:void 0)&&(n=r.extensions[Lc.KHR_TEXTURE_TRANSFORM].extendTexture(n,o)),t[e]=n})},df.prototype.assignFinalMaterial=function(t){var e,i,r=t.geometry,n=t.material,o=void 0!==r.attributes.tangent,s=void 0!==r.attributes.color,a=void 0===r.attributes.normal,u=!0===t.isSkinnedMesh,h=0<Object.keys(r.morphAttributes).length,l=h&&void 0!==r.morphAttributes.normal;t.isPoints?(e="PointsMaterial:"+n.uuid,(i=this.cache.get(e))||(i=new _l,Jt.prototype.copy.call(i,n),i.color.copy(n.color),i.map=n.map,i.sizeAttenuation=!1,this.cache.add(e,i)),n=i):t.isLine&&(e="LineBasicMaterial:"+n.uuid,(i=this.cache.get(e))||(i=new Rl,Jt.prototype.copy.call(i,n),i.color.copy(n.color),this.cache.add(e,i)),n=i),(o||s||a||u||h)&&(e="ClonedMaterial:"+n.uuid+":",n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),u&&(e+="skinning:"),o&&(e+="vertex-tangents:"),s&&(e+="vertex-colors:"),a&&(e+="flat-shading:"),h&&(e+="morph-targets:"),l&&(e+="morph-normals:"),(i=this.cache.get(e))||(i=n.clone(),u&&(i.skinning=!0),o&&(i.vertexTangents=!0),s&&(i.vertexColors=!0),a&&(i.flatShading=!0),h&&(i.morphTargets=!0),l&&(i.morphNormals=!0),this.cache.add(e,i)),n=i),n.aoMap&&void 0===r.attributes.uv2&&void 0!==r.attributes.uv&&r.setAttribute("uv2",new Tt(r.attributes.uv.array,2)),n.normalScale&&!o&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!o&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),t.material=n},df.prototype.loadMaterial=function(t){var e,i,r=this.json,n=this.extensions,o=r.materials[t],s={},a=(t=[],(r=o.extensions||{})[Lc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]?(i=n[Lc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS],e=i.getMaterialType(),t.push(i.extendParams(s,o,this))):r[Lc.KHR_MATERIALS_UNLIT]?(i=n[Lc.KHR_MATERIALS_UNLIT],e=i.getMaterialType(),t.push(i.extendParams(s,o,this))):(e=Sl,i=o.pbrMetallicRoughness||{},s.color=new H(1,1,1),s.opacity=1,Array.isArray(i.baseColorFactor)&&(a=i.baseColorFactor,s.color.fromArray(a),s.opacity=a[3]),void 0!==i.baseColorTexture&&t.push(this.assignTexture(s,"map",i.baseColorTexture)),s.metalness=void 0!==i.metallicFactor?i.metallicFactor:1,s.roughness=void 0!==i.roughnessFactor?i.roughnessFactor:1,void 0!==i.metallicRoughnessTexture&&(t.push(this.assignTexture(s,"metalnessMap",i.metallicRoughnessTexture)),t.push(this.assignTexture(s,"roughnessMap",i.metallicRoughnessTexture)))),!0===o.doubleSided&&(s.side=At),o.alphaMode||"OPAQUE");return"BLEND"===a?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,"MASK"===a&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&e!==$t&&(t.push(this.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new lt(1,1),void 0!==o.normalTexture.scale)&&s.normalScale.set(o.normalTexture.scale,o.normalTexture.scale),void 0!==o.occlusionTexture&&e!==$t&&(t.push(this.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength)&&(s.aoMapIntensity=o.occlusionTexture.strength),void 0!==o.emissiveFactor&&e!==$t&&(s.emissive=(new H).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&e!==$t&&t.push(this.assignTexture(s,"emissiveMap",o.emissiveTexture)),r[Lc.KHR_MATERIALS_CLEARCOAT]&&(i=n[Lc.KHR_MATERIALS_CLEARCOAT],e=i.getMaterialType(),t.push(i.extendParams(s,{extensions:r},this))),Promise.all(t).then(function(){var t=e===af?n[Lc.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new e(s);return o.name&&(t.name=o.name),t.map&&(t.map.encoding=3001),t.emissiveMap&&(t.emissiveMap.encoding=3001),Af(t,o),o.extensions&&ff(n,t,o),t})},df.prototype.loadGeometries=function(t){for(var e=this,i=this.extensions,r=this.primitiveCache,n=[],o=0,s=t.length;o<s;o++){var a=t[o],u=(h=void 0,h=(h=(u=a).extensions&&u.extensions[Lc.KHR_DRACO_MESH_COMPRESSION])?"draco:"+h.bufferView+":"+h.indices+":"+pf(h.attributes):u.indices+":"+pf(u.attributes)+":"+u.mode),h=r[u];h?n.push(h.promise):(h=a.extensions&&a.extensions[Lc.KHR_DRACO_MESH_COMPRESSION]?function(t){return i[Lc.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then(function(i){return mf(i,t,e)})}(a):mf(new Wt,a,e),r[u]={primitive:a,promise:h},n.push(h))}return Promise.all(n)},df.prototype.loadMesh=function(t){for(var e=this,i=this.json.meshes[t],r=i.primitives,n=[],o=0,s=r.length;o<s;o++){var a=void 0===r[o].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new Sl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ct})),a.DefaultMaterial):this.getDependency("material",r[o].material);n.push(a)}return n.push(e.loadGeometries(r)),Promise.all(n).then(function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],a=[],u=0,h=s.length;u<h;u++){var l,c=s[u],f=r[u],A=o[u];if(4===f.mode||5===f.mode||6===f.mode||void 0===f.mode)!0!==(l=new(!0===i.isSkinnedMesh?Zl:Ve)(c,A)).isSkinnedMesh||l.geometry.attributes.skinWeight.normalized||l.normalizeSkinWeights(),5===f.mode?l.geometry=yf(l.geometry,1):6===f.mode&&(l.geometry=yf(l.geometry,2));else if(1===f.mode)l=new sc(c,A);else if(3===f.mode)l=new rc(c,A);else if(2===f.mode)l=new ac(c,A);else{if(0!==f.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);l=new fc(c,A)}if(0<Object.keys(l.geometry.morphAttributes).length){g=y=m=p=void 0;var p=l,d=i;if(p.updateMorphTargets(),void 0!==d.weights)for(var m=0,y=d.weights.length;m<y;m++)p.morphTargetInfluences[m]=d.weights[m];if(d.extras&&Array.isArray(d.extras.targetNames)){var g=d.extras.targetNames;if(p.morphTargetInfluences.length===g.length)for(p.morphTargetDictionary={},m=0,y=g.length;m<y;m++)p.morphTargetDictionary[g[m]]=m}}l.name=i.name||"mesh_"+t,1<s.length&&(l.name+="_"+u),Af(l,i),e.assignFinalMaterial(l),a.push(l)}if(1===a.length)return a[0];var v=new ti;for(u=0,h=a.length;u<h;u++)v.add(a[u]);return v})},df.prototype.loadCamera=function(t){var e,i=(t=this.json.cameras[t])[t.type];if(i)return"perspective"===t.type?e=new Nl(s.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===t.type&&(e=new ul(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),t.name&&(e.name=t.name),Af(e,t),Promise.resolve(e)},df.prototype.loadSkin=function(t){var e={joints:(t=this.json.skins[t]).joints};return void 0===t.inverseBindMatrices?Promise.resolve(e):this.getDependency("accessor",t.inverseBindMatrices).then(function(t){return e.inverseBindMatrices=t,e})},df.prototype.loadAnimation=function(t){for(var e=this.json.animations[t],i=[],r=[],n=[],o=[],s=[],a=0,u=e.channels.length;a<u;a++){var h=e.channels[a],l=e.samplers[h.sampler],c=void 0!==(h=h.target).node?h.node:h.id,f=void 0!==e.parameters?e.parameters[l.input]:l.input,A=void 0!==e.parameters?e.parameters[l.output]:l.output;i.push(this.getDependency("node",c)),r.push(this.getDependency("accessor",f)),n.push(this.getDependency("accessor",A)),o.push(l),s.push(h)}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(n),Promise.all(o),Promise.all(s)]).then(function(i){for(var r=i[0],n=i[1],o=i[2],s=i[3],a=i[4],u=[],h=0,l=r.length;h<l;h++){var c,f=r[h],A=n[h],p=o[h],d=s[h],m=a[h];if(void 0!==f){switch(f.updateMatrix(),f.matrixAutoUpdate=!0,Kc[m.path]){case Kc.weights:c=vc;break;case Kc.rotation:c=wc;break;default:c=xc}var y,g=f.name||f.uuid,v=void 0!==d.interpolation?Yc[d.interpolation]:Mt,b=[],w=(Kc[m.path]===Kc.weights?f.traverse(function(t){!0===t.isMesh&&t.morphTargetInfluences&&b.push(t.name||t.uuid)}):b.push(g),p.array);if(p.normalized){if(w.constructor===Int8Array)y=1/127;else if(w.constructor===Uint8Array)y=1/255;else if(w.constructor==Int16Array)y=1/32767;else{if(w.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");y=1/65535}for(var x=new Float32Array(w.length),M=0,_=w.length;M<_;M++)x[M]=w[M]*y;w=x}for(M=0,_=b.length;M<_;M++){var S=new c(b[M]+"."+Kc[m.path],A.array,w,v);"CUBICSPLINE"===d.interpolation&&(S.createInterpolant=function(t){return new lf(this.times,this.values,this.getValueSize()/3,t)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(S)}}}return new Bc(e.name||"animation_"+t,void 0,u)})},df.prototype.loadNode=function(t){var e=this.json,i=this.extensions,r=this,n=e.meshReferences,o=e.meshUses,s=e.nodes[t];return e=[],void 0!==s.mesh&&e.push(r.getDependency("mesh",s.mesh).then(function(t){var e,i;return 1<n[s.mesh]?(e=o[s.mesh]++,(i=t.clone()).name+="_instance_"+e):i=t,void 0!==s.weights&&i.traverse(function(t){if(t.isMesh)for(var e=0,i=s.weights.length;e<i;e++)t.morphTargetInfluences[e]=s.weights[e]}),i})),void 0!==s.camera&&e.push(r.getDependency("camera",s.camera)),s.extensions&&s.extensions[Lc.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[Lc.KHR_LIGHTS_PUNCTUAL].light&&e.push(r.getDependency("light",s.extensions[Lc.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(e).then(function(t){var e,r=!0===s.isBone?new Cc:1<t.length?new ti:1===t.length?t[0]:new k;if(r!==t[0])for(var n=0,o=t.length;n<o;n++)r.add(t[n]);return s.name&&(r.userData.name=s.name,r.name=Uc.sanitizeNodeName(s.name)),Af(r,s),s.extensions&&ff(i,r,s),void 0!==s.matrix?((e=new g).fromArray(s.matrix),r.applyMatrix4(e)):(void 0!==s.translation&&r.position.fromArray(s.translation),void 0!==s.rotation&&r.quaternion.fromArray(s.rotation),void 0!==s.scale&&r.scale.fromArray(s.scale)),r})},df.prototype.loadScene=function(t){for(var e=this.json,i=this.extensions,r=(t=this.json.scenes[t],new j),n=(t.name&&(r.name=t.name),Af(r,t),t.extensions&&ff(i,r,t),t.nodes||[]),o=[],s=0,a=n.length;s<a;s++)o.push(function t(e,i,r,n){var o=r.nodes[e];return n.getDependency("node",e).then(function(t){var e;return void 0===o.skin?t:n.getDependency("skin",o.skin).then(function(t){for(var i=[],r=0,o=(e=t).joints.length;r<o;r++)i.push(n.getDependency("node",e.joints[r]));return Promise.all(i)}).then(function(i){return t.traverse(function(t){if(t.isMesh){for(var r=[],n=[],o=0,s=i.length;o<s;o++){var a=i[o];a&&(r.push(a),a=new g,void 0!==e.inverseBindMatrices&&a.fromArray(e.inverseBindMatrices.array,16*o),n.push(a))}t.bind(new Zc(r,n),t.matrixWorld)}}),t})}).then(function(e){i.add(e);var s=[];if(o.children)for(var a=o.children,u=0,h=a.length;u<h;u++){var l=a[u];s.push(t(l,e,r,n))}return Promise.all(s)})}(n[s],r,e,this));return Promise.all(o).then(function(){return r})};var gf=$c;function vf(t){return(vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bf(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===vf(t=function(t,e){if("object"!==vf(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==vf(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function wf(){return(wf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mf(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function xf(t,e){return(xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mf(t){return(Mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _f=function(){var t=r,e=$h;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xf(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Mf(t);if(i=e?(i=Mf(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===vf(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:el,e=this;if(e instanceof r)return(e=i.call(this)).manager=t,e.adjustmentTransform=new g,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"parse",value:function(t){var e=this,i=wf(Mf(r.prototype),"parse",this).call(this,t),n=i.glbBytes.slice().buffer;return new Promise(function(t,r){var o=e.manager,s=e.fetchOptions,a=(o=o.getHandler("path.gltf")||new gf(o),s=("include"===s.credentials&&"cors"===s.mode&&o.setCrossOrigin("use-credentials"),"credentials"in s&&o.setWithCredentials("include"===s.credentials),s.headers&&o.setRequestHeader(s.headers),e.workingPath),!/[\\/]$/.test(s)&&s.length&&(s+="/"),e.adjustmentTransform);o.parse(n,s,function(e){var r=i.batchTable,n=i.featureTable,o=e.scene,s=n.getData("RTC_CENTER");s&&(o.position.x+=s[0],o.position.y+=s[1],o.position.z+=s[2]),e.scene.updateMatrix(),e.scene.matrix.multiply(a),e.scene.matrix.decompose(e.scene.position,e.scene.quaternion,e.scene.scale),e.batchTable=r,e.featureTable=n,o.batchTable=r,o.featureTable=n,t(e)},r)})}}])&&bf(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Sf(t){return(Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bf(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Sf(t=function(t,e){if("object"!==Sf(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Sf(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Ef(t,e){return(Ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cf(t){return(Cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tf=new g,Ff=function(){var t=r,e=ti;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ef(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Cf(t);if(i=e?(i=Cf(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Sf(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this)).name="TilesRenderer.TilesGroup",e.tilesRenderer=t,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"raycast",value:function(t,e){this.tilesRenderer.optimizeRaycast&&this.tilesRenderer.raycast(t,e)}},{key:"updateMatrixWorld",value:function(t){if(this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldNeedsUpdate||t){null===this.parent?Tf.copy(this.matrix):Tf.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1;for(var e=Tf.elements,i=this.matrixWorld.elements,r=!1,n=0;n<16;n++){var o=e[n],s=i[n];if(Math.abs(o-s)>Number.EPSILON){r=!0;break}}if(r){this.matrixWorld.copy(Tf);for(var a=this.children,u=0,h=a.length;u<h;u++)a[u].updateMatrixWorld()}}}}])&&Bf(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Pf(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Of(t){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Df(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Of(t=function(t,e){if("object"!==Of(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Of(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Rf(t){var e=t.x,i=t.y,r=t.z;t.x=r,t.y=e,t.z=i}Object.assign(Pf.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(s.clamp(e/this.radius,-1,1))),this}});var If=new Pf,Uf=new l,Lf=new l,kf=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.radius=new l(e,i,r)}var e,i;return e=t,(i=[{key:"getCartographicToPosition",value:function(t,e,i,r){var n=this.radius;If.set(1,-t+Math.PI/2,e),Uf.setFromSpherical(If).normalize(),Rf(Uf),Lf.copy(Uf),Lf.x*=Math.pow(n.x,2),Lf.y*=Math.pow(n.y,2),Lf.z*=Math.pow(n.z,2),t=Math.sqrt(Uf.dot(Lf));return Lf.divideScalar(t),r.copy(Lf).addScaledVector(Uf,i)}},{key:"getCartographicToNormal",value:function(t,e,i){return If.set(1,-t+Math.PI/2,e),i.setFromSpherical(If).normalize(),Rf(i),i}},{key:"getPositionToNormal",value:function(t,e){var i=this.radius;return e.copy(t),e.x/=Math.pow(i.x,2),e.y/=Math.pow(i.y,2),e.z/=Math.pow(i.z,2),e.normalize(),e}}])&&Df(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jf(t){return(jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,s,a=[],u=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;u=!1}else for(;!(u=(r=o.call(i)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,n=t}finally{try{if(!u&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(h)throw n}}return a}}(t,e)||function(t,e){var i;if(t)return"string"==typeof t?Nf(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Nf(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nf(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function zf(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===jf(t=function(t,e){if("object"!==jf(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==jf(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Hf(t,e){return(Hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vf(t){return(Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gf=Math.PI,Kf=Gf/2,Yf=new l,Xf=new l,Wf=new l,qf=new g,Zf=0,Jf=[];function $f(){Zf=0}var tA=function(){var t=r,e=kf;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hf(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Vf(t);if(i=e?(i=Vf(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===jf(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:-Kf,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Kf,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,u=6<arguments.length&&void 0!==arguments[6]?arguments[6]:2*Gf,h=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,l=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,c=this;if(c instanceof r)return(c=i.call(this,t,e,n)).latStart=o,c.latEnd=s,c.lonStart=a,c.lonEnd=u,c.heightStart=h,c.heightEnd=l,c;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"_getPoints",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.latStart,i=this.latEnd,r=this.lonStart,n=this.lonEnd,o=this.heightStart,a=this.heightEnd,u=s.mapLinear(.5,0,1,e,i),h=s.mapLinear(.5,0,1,r,n),c=Math.floor(r/Kf)*Kf,f=[[-Gf/2,0],[Gf/2,0],[0,c],[0,c+Gf/2],[0,c+Gf],[0,c+3*Gf/2],[e,n],[i,n],[e,r],[i,r],[0,r],[0,n],[u,h],[e,h],[i,h],[u,r],[u,n]],A=[],p=f.length,d=0;d<=1;d++)for(var m=s.mapLinear(d,0,1,o,a),y=0,g=p;y<g;y++){var v,b=(w=Qf(f[y],2))[0],w=w[1];e<=b&&b<=i&&r<=w&&w<=n&&(v=function(t){return 0<arguments.length&&void 0!==t&&t?(Jf[Zf]||(Jf[Zf]=new l),Jf[++Zf-1]):new l}(t),A.push(v),this.getCartographicToPosition(b,w,m,v))}return A}},{key:"getBoundingBox",value:function(t,e){$f();for(var i=this.latStart,r=this.latEnd,n=this.lonStart,o=this.lonEnd,a=(r-i<Gf/2?(i=s.mapLinear(.5,0,1,i,r),r=s.mapLinear(.5,0,1,n,o),this.getCartographicToNormal(i,r,Wf),Xf.set(0,0,1),Yf.crossVectors(Xf,Wf),Xf.crossVectors(Yf,Wf)):(Yf.set(1,0,0),Xf.set(0,1,0),Wf.set(0,0,1)),e.makeBasis(Yf,Xf,Wf),qf.copy(e).invert(),this._getPoints(!0)),u=0,h=a.length;u<h;u++)a[u].applyMatrix4(qf);t.makeEmpty(),t.setFromPoints(a)}},{key:"getBoundingSphere",value:function(t,e){$f();var i=this._getPoints(!0);t.makeEmpty(),t.setFromPoints(i,e)}}])&&zf(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),eA=new Qt,iA=new g,rA=new l,nA=new l,oA=new pe,sA=[];function aA(t,e){return t.distance-e.distance}function uA(t,e,i){t.traverse(function(t){Object.getPrototypeOf(t).raycast.call(t,e,i)})}function hA(t){return(hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lA(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function cA(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mA(r.key),r)}}function fA(){return(fA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=yA(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function AA(t,e){return(AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dA(t,e,i,r){return(dA="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,i,r){var n;if(t=yA(t,e)){if((n=Object.getOwnPropertyDescriptor(t,e)).set)return n.set.call(r,i),!0;if(!n.writable)return!1}if(n=Object.getOwnPropertyDescriptor(r,e)){if(!n.writable)return!1;n.value=i,Object.defineProperty(r,e,n)}else t=r,n=i,(r=mA(r=e))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n;return!0})(t,e,i,r)}function mA(t){return"symbol"===hA(t=function(t,e){if("object"!==hA(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==hA(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}function yA(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gA(t)););return t}function gA(t){return(gA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vA=Symbol("INITIAL_FRUSTUM_CULLED"),bA=new g,wA=new g,xA=new l,MA=new l,_A=new l,SA=new l,BA=new l(1,0,0),EA=new l(0,1,0);function CA(t,e){t.traverse(function(t){t.frustumCulled=t[vA]&&e})}var TA=function(){var t=r,e=Ih;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=gA(t);if(i=e?(i=gA(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===hA(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return pA(r)}}(r);function r(){var t;if(!((s=this)instanceof r))throw new TypeError("Cannot call a class as a function");for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=i.call.apply(i,[this].concat(n))).group=new Ff(pA(t)),t.cameras=[],t.cameraMap=new Map,t.cameraInfo=[],t.activeTiles=new Set,t.visibleTiles=new Set,t.ji=!0,t.optimizeRaycast=!0,t.onLoadTileSet=null,t.onLoadModel=null,t.onDisposeModel=null,t.onTileVisibilityChange=null;var s,a=((s=new tl).setURLModifier(function(e){return t.preprocessURL?t.preprocessURL(e):e}),t.manager=s,pA(t));return t.Mi=function(t,e){a.optimizeRaycast||Object.getPrototypeOf(this).raycast.call(this,t,e)},t}return t=r,(e=[{key:"autoDisableRendererCulling",get:function(){return this.ji},set:function(t){if(this.ji!==t){var e=gA(r.prototype);if(!dA(e,"_autoDisableRendererCulling",t,this||e))throw new TypeError("failed to set property");this.forEachLoadedModel(function(e){CA(e,!t)})}}},{key:"getBounds",value:function(t){var e,i;return!!this.root&&(e=(i=this.root.cached).box,i=i.boxTransform,!!e)&&(t.copy(e),t.applyMatrix4(i),!0)}},{key:"getOrientedBounds",value:function(t,e){var i,r;return!!this.root&&(i=(r=this.root.cached).box,r=r.boxTransform,!!i)&&(t.copy(i),e.copy(r),!0)}},{key:"getBoundingSphere",value:function(t){var e;return!!this.root&&!!(e=this.root.cached.sphere)&&(t.copy(e),!0)}},{key:"forEachLoadedModel",value:function(t){this.traverse(function(e){var i=e.cached.scene;i&&t(i,e)})}},{key:"raycast",value:function(t,e){var i;this.root&&(t.firstHitOnly?(i=function t(e,i,r,n){var o;if(r.has(e))return uA(e.cached.scene,n,sA),0<sA.length?(1<sA.length&&sA.sort(aA),o=sA[0],sA.length=0,o):null;for(var s=[],a=e.children,u=0,h=a.length;u<h;u++){var l=a[u],c=l.cached,f=i.matrixWorld;iA.copy(f),(f=c.sphere)&&(eA.copy(f),eA.applyMatrix4(iA),!n.ray.intersectsSphere(eA))||(f=c.box,c=c.boxTransform,f&&(iA.multiply(c).invert(),oA.copy(n.ray),oA.applyMatrix4(iA),oA.intersectBox(f,rA))&&(nA.setFromMatrixScale(iA),c=nA.x,Math.abs(Math.max(nA.x-nA.y,nA.x-nA.z)),s.push(f={distance:1/0,tile:null}),f.distance=rA.distanceToSquared(oA.origin)*c*c,f.tile=l))}s.sort(aA);for(var A=1/0,p=null,d=0,m=s.length;d<m;d++){var y=s[d];if(A<y.distance)break;var g=(y=y.tile).cached.scene,v=null;r.has(y)?(uA(g,n,sA),0<sA.length&&(1<sA.length&&sA.sort(aA),v=sA[0])):v=t(y,i,r,n),v&&((g=v.distance*v.distance)<A&&(A=g,p=v),sA.length=0)}return p}(this.root,this.group,this.activeTiles,t))&&e.push(i):function t(e,i,r,n,o){var s=e.cached,a=i.matrixWorld;if(!(a=(iA.copy(a),s.sphere))||(eA.copy(a),eA.applyMatrix4(iA),n.ray.intersectsSphere(eA))){a=s.box;var u=s.boxTransform;if(!a||(iA.multiply(u).invert(),oA.copy(n.ray).applyMatrix4(iA),oA.intersectsBox(a)))if(u=s.scene,r.has(e))uA(u,n,o);else for(var h=e.children,l=0,c=h.length;l<c;l++)t(h[l],i,r,n,o)}}(this.root,this.group,this.activeTiles,t,e))}},{key:"hasCamera",value:function(t){return this.cameraMap.has(t)}},{key:"setCamera",value:function(t){var e=this.cameras,i=this.cameraMap;return!i.has(t)&&(i.set(t,new lt),e.push(t),!0)}},{key:"setResolution",value:function(t,e,i){var r=this.cameraMap;return!!r.has(t)&&(e instanceof lt?r.get(t).copy(e):r.get(t).set(e,i),!0)}},{key:"setResolutionFromRenderer",value:function(t,e){var i=this.cameraMap;return!!i.has(t)&&(i=i.get(t),e.getSize(i),i.multiplyScalar(e.getPixelRatio()),!0)}},{key:"deleteCamera",value:function(t){var e,i=this.cameras,r=this.cameraMap;return!!r.has(t)&&(e=i.indexOf(t),i.splice(e,1),r.delete(t),!0)}},{key:"fetchTileSet",value:function(t){for(var e=this,i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var s=(s=fA(gA(r.prototype),"fetchTileSet",this)).call.apply(s,[this,t].concat(n));return s.then(function(i){e.onLoadTileSet&&Promise.resolve().then(function(){e.onLoadTileSet(i,t)}).catch(function(t){})}).catch(function(t){}),s}},{key:"update",value:function(){var t=this.group,e=this.cameras,i=this.cameraMap,n=this.cameraInfo;if(0===e.length);else{for(;n.length>e.length;)n.pop();for(;n.length<e.length;)n.push({frustum:new ol,isOrthographic:!1,sseDenominator:-1,position:new l,invScale:-1,pixelSize:0});wA.copy(t.matrixWorld).invert(),xA.setFromMatrixScale(wA);var o=xA.x;Math.abs(Math.max(xA.x-xA.y,xA.x-xA.z));for(var s=0,a=n.length;s<a;s++){var u,h,c=e[s],f=n[s],A=f.frustum,p=f.position,d=i.get(c),m=(0!==d.width&&d.height,c.projectionMatrix.elements);f.isOrthographic=1===m[15],f.isOrthographic?(u=2/m[0],h=2/m[5],f.pixelSize=Math.max(h/d.height,u/d.width)):f.sseDenominator=2/m[5]/d.height,f.invScale=o,bA.copy(t.matrixWorld),bA.premultiply(c.matrixWorldInverse),bA.premultiply(c.projectionMatrix),A.setFromProjectionMatrix(bA),p.set(0,0,0),p.applyMatrix4(c.matrixWorld),p.applyMatrix4(wA)}fA(gA(r.prototype),"update",this).call(this)}}},{key:"preprocessNode",value:function(t,e,i){fA(gA(r.prototype),"preprocessNode",this).call(this,t,e,i);var n=new g;if(t.transform)for(var o=t.transform,s=0;s<16;s++)n.elements[s]=o[s];else n.identity();e&&n.premultiply(e.cached.transform);i=(new g).copy(n).invert(),e=null;var a,u,h,l,c,f,A=null,p=null,d=("box"in t.boundingVolume&&(d=t.boundingVolume.box,e=new at,A=new g,p=new g,MA.set(d[3],d[4],d[5]),_A.set(d[6],d[7],d[8]),SA.set(d[9],d[10],d[11]),f=MA.length(),a=_A.length(),m=SA.length(),MA.normalize(),_A.normalize(),SA.normalize(),0===f&&MA.crossVectors(_A,SA),0===a&&_A.crossVectors(MA,SA),0===m&&SA.crossVectors(MA,_A),A.set(MA.x,_A.x,SA.x,d[0],MA.y,_A.y,SA.y,d[1],MA.z,_A.z,SA.z,d[2],0,0,0,1),A.premultiply(n),p.copy(A).invert(),e.min.set(-f,-a,-m),e.max.set(f,a,m)),null),m=("sphere"in t.boundingVolume?(f=t.boundingVolume.sphere,(d=new Qt).center.set(f[0],f[1],f[2]),d.radius=f[3],d.applyMatrix4(n)):"box"in t.boundingVolume&&(a=t.boundingVolume.box,d=new Qt,e.getBoundingSphere(d),d.center.set(a[0],a[1],a[2]),d.applyMatrix4(n)),null);"region"in t.boundingVolume&&(a=(f=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,s,a=[],u=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;u=!1}else for(;!(u=(r=o.call(i)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){h=!0,n=t}finally{try{if(!u&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(h)throw n}}return a}}(t,e)||function(t,e){var i;if(t)return"string"==typeof t?lA(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?lA(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.boundingVolume.region,6))[0],u=f[1],h=f[2],l=f[3],c=f[4],f=f[5],m=new tA(6378137,6378137,6356752.314245179,u,l,a,h,c,f),null===d&&(d=new Qt,m.getBoundingSphere(d)),null===e)&&(e=new at,A=new g,p=new g,m.getBoundingBox(e,A),p.copy(A).invert()),t.cached={loadIndex:0,transform:n,transformInverse:i,active:!1,inFrustum:[],box:e,boxTransform:A,boxTransformInverse:p,sphere:d,region:m,scene:null,geometry:null,material:null}}},{key:"parseTile",value:function(t,e,i){var r=this;e.Si=e.Si||0,e.Si++;var n=((n=e.content.uri.split(/[\\\/]/g)).pop(),n.join("/")),o=this.fetchOptions,s=this.manager,a=e.Si,u=this.rootTileSet.asset&&this.rootTileSet.asset.gltfUpAxis||"y",h=e.cached,l=h.transform;switch(u.toLowerCase()){case"x":bA.makeRotationAxis(EA,-Math.PI/2);break;case"y":bA.makeRotationAxis(BA,Math.PI/2);break;case"z":bA.identity()}var c=Xh(t)||i;return("b3dm"===c?((u=new _f(s)).workingPath=n,u.fetchOptions=o,u.adjustmentTransform.copy(bA),u.parse(t).then(function(t){return t.scene})):Promise.resolve(null)).then(function(t){var i,n,o;e.Si===a&&(t.updateMatrix(),"glb"!==c&&"gltf"!==c||t.matrix.multiply(bA),t.matrix.premultiply(l),t.matrix.decompose(t.position,t.quaternion,t.scale),t.traverse(function(t){t[vA]=t.frustumCulled}),CA(t,!r.autoDisableRendererCulling),(h.scene=t).traverse(function(t){t.raycast=r.Mi}),i=[],n=[],o=[],t.traverse(function(t){if(t.geometry&&n.push(t.geometry),t.material){var e,r=t.material;for(e in i.push(t.material),r){var s=r[e];s&&s.isTexture&&o.push(s)}}}),h.materials=i,h.geometry=n,h.textures=o,r.onLoadModel)&&r.onLoadModel(t,e)})}},{key:"disposeTile",value:function(t){var e=t.cached;if(e.scene){for(var i=e.materials,r=e.geometry,n=e.textures,o=e.scene.parent,s=0,a=r.length;s<a;s++)r[s].dispose();for(var u=0,h=i.length;u<h;u++)i[u].dispose();for(var l=0,c=n.length;l<c;l++)n[l].dispose();o&&o.remove(e.scene),this.onDisposeModel&&this.onDisposeModel(e.scene,t),e.scene=null,e.materials=null,e.textures=null,e.geometry=null}this.activeTiles.delete(t),this.visibleTiles.delete(t),t.Si++}},{key:"setTileVisible",value:function(t,e){var i=t.cached.scene,r=this.visibleTiles,n=this.group;e?(n.add(i),r.add(t),i.updateMatrixWorld(!0)):(n.remove(i),r.delete(t)),this.onTileVisibilityChange&&this.onTileVisibilityChange(i,t,e)}},{key:"setTileActive",value:function(t,e){var i=this.activeTiles;e?i.add(t):i.delete(t)}},{key:"calculateError",value:function(t){for(var e,i,r,n,o=t.cached,s=o.inFrustum,a=this.cameras,u=this.cameraInfo,h=o.sphere,l=o.box,c=o.boxTransformInverse,f=o.transformInverse,A=l&&c,p=-1/0,d=1/0,m=0,y=a.length;m<y;m++)s[m]&&(n=(e=u[m]).invScale,i=void 0,e.isOrthographic?(r=e.pixelSize,i=t.geometricError/(r*n)):(xA.copy(e.position),r=(A?(xA.applyMatrix4(c),l.distanceToPoint(xA)):(xA.applyMatrix4(f),Math.max(h.distanceToPoint(xA),0)))*n,n=e.sseDenominator,i=t.geometricError/(r*n),d=Math.min(d,r)),p=Math.max(p,i));t.Ut=d,t.Ht=p}},{key:"tileInView",value:function(t){var e=(t=t.cached).sphere,i=t.inFrustum;if(e){for(var r=this.cameraInfo,n=!1,o=0,s=r.length;o<s;o++)r[o].frustum.intersectsSphere(e)?i[o]=n=!0:i[o]=!1;return n}return!0}}])&&cA(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function FA(t){return(FA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PA(t){Ll.call(this,t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}function OA(t,e){il.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function DA(t){return(DA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RA(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===DA(t=function(t,e){if("object"!==DA(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==DA(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}PA.prototype=Object.assign(Object.create(Ll.prototype),{constructor:PA,setDecoderPath:function(t){return this.decoderPath=t,this},setDecoderConfig:function(t){return this.decoderConfig=t,this},setWorkerLimit:function(t){return this.workerLimit=t,this},setVerbosity:function(){},setDrawMode:function(){},setSkipDequantization:function(){},load:function(t,e,i,r){var n=this,o=new jl(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&o.setWithCredentials(!0),o.load(t,function(t){var i={attributeIDs:n.defaultAttributeIDs,attributeTypes:n.defaultAttributeTypes,useUniqueIDs:!1};n.decodeGeometry(t,i).then(e).catch(r)},i,r)},decodeDracoFile:function(t,e,i,r){r={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i},this.decodeGeometry(t,r).then(e)},decodeGeometry:function(t,e){var i,r=this;for(i in e.attributeTypes){var n=e.attributeTypes[i];void 0!==n.BYTES_PER_ELEMENT&&(e.attributeTypes[i]=n.name)}var o,s=JSON.stringify(e);if(PA.taskCache.has(t)){if((u=PA.taskCache.get(t)).key===s)return u.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var a=this.workerNextTaskID++,u=t.byteLength;return(u=this.Oi(a,u).then(function(i){return o=i,new Promise(function(i,r){o.Ei[a]={resolve:i,reject:r},o.postMessage({type:"decode",id:a,taskConfig:e,buffer:t},[t])})}).then(function(t){return r.ki(t.geometry)})).finally(function(){o&&a&&r.Ti(o,a)}),PA.taskCache.set(t,{key:s,promise:u}),u},ki:function(t){var e=new Wt;t.index&&e.setIndex(new Tt(t.index.array,1));for(var i=0;i<t.attributes.length;i++){var r=(o=t.attributes[i]).name,n=o.array,o=o.itemSize;e.setAttribute(r,new Tt(n,o))}return e},Ri:function(t,e){var i=new jl(this.manager);return i.setPath(this.decoderPath),i.setResponseType(e),new Promise(function(e,r){i.load(t,e,void 0,r)})},preload:function(){return this.Ai(),this},Ai:function(){var t,e,i=this;return this.decoderPending||(e=[],(t="object"!==("undefined"==typeof WebAssembly?"undefined":FA(WebAssembly))||"js"===this.decoderConfig.type)?e.push(this.Ri("draco_decoder.js","text")):(e.push(this.Ri("draco_wasm_wrapper.js","text")),e.push(this.Ri("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(function(e){var r=["/* draco decoder */",r=e[0],"","/* worker */",(e=(t||(i.decoderConfig.wasmBinary=e[1]),PA.DRACOWorker.toString())).substring(e.indexOf("{")+1,e.lastIndexOf("}"))].join("\n");i.workerSourceURL=URL.createObjectURL(new Blob([r]))})),this.decoderPending},Oi:function(t,e){var i=this;return this.Ai().then(function(){i.workerPool.length<i.workerLimit?((r=new Worker(i.workerSourceURL)).Ei={},r.xi={},r.Pi=0,r.postMessage({type:"init",decoderConfig:i.decoderConfig}),r.onmessage=function(t){var e=t.data;switch(e.type){case"decode":r.Ei[e.id].resolve(e);break;case"error":r.Ei[e.id].reject(e)}},i.workerPool.push(r)):i.workerPool.sort(function(t,e){return t.Pi>e.Pi?-1:1});var r=i.workerPool[i.workerPool.length-1];return r.xi[t]=e,r.Pi+=e,r})},Ti:function(t,e){t.Pi-=t.xi[e],delete t.Ei[e],delete t.xi[e]},debug:function(){this.workerPool.map(function(t){return t.Pi})},dispose:function(){for(var t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}),PA.DRACOWorker=function(){var t,e;onmessage=function(i){var r=i.data;switch(r.type){case"init":t=r.decoderConfig,e=new Promise(function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)});break;case"decode":var n=r.buffer,o=r.taskConfig;e.then(function(t){var e=new(t=t.draco).Decoder,i=new t.DecoderBuffer;i.Init(new Int8Array(n),n.byteLength);try{var s=function(t,e,i,r){var n,o,s=r.attributeIDs,a=r.attributeTypes,u=e.GetEncodedGeometryType(i);if(u===t.TRIANGULAR_MESH)n=new t.Mesh,o=e.DecodeBufferToMesh(i,n);else{if(u!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");n=new t.PointCloud,o=e.DecodeBufferToPointCloud(i,n)}if(!o.ok()||0===n.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var h,l,c,f={index:null,attributes:[]};for(h in s){var A=self[a[h]];if(r.useUniqueIDs)c=s[h],l=e.GetAttributeByUniqueId(n,c);else{if(-1===(c=e.GetAttributeId(n,t[s[h]])))continue;l=e.GetAttribute(n,c)}f.attributes.push(function(t,e,i,r,n,o){var s,a,u=o.num_components(),h=i.num_points()*u;switch(n){case Float32Array:s=new t.DracoFloat32Array,e.GetAttributeFloatForAllPoints(i,o,s),a=new Float32Array(h);break;case Int8Array:s=new t.DracoInt8Array,e.GetAttributeInt8ForAllPoints(i,o,s),a=new Int8Array(h);break;case Int16Array:s=new t.DracoInt16Array,e.GetAttributeInt16ForAllPoints(i,o,s),a=new Int16Array(h);break;case Int32Array:s=new t.DracoInt32Array,e.GetAttributeInt32ForAllPoints(i,o,s),a=new Int32Array(h);break;case Uint8Array:s=new t.DracoUInt8Array,e.GetAttributeUInt8ForAllPoints(i,o,s),a=new Uint8Array(h);break;case Uint16Array:s=new t.DracoUInt16Array,e.GetAttributeUInt16ForAllPoints(i,o,s),a=new Uint16Array(h);break;case Uint32Array:s=new t.DracoUInt32Array,e.GetAttributeUInt32ForAllPoints(i,o,s),a=new Uint32Array(h);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var l=0;l<h;l++)a[l]=s.GetValue(l);return t.destroy(s),{name:r,array:a,itemSize:u}}(t,e,n,h,A,l))}if(u===t.TRIANGULAR_MESH){for(var p=n.num_faces(),d=new Uint32Array(3*p),m=new t.DracoInt32Array,y=0;y<p;++y){e.GetFaceFromMesh(n,y,m);for(var g=0;g<3;++g)d[3*y+g]=m.GetValue(g)}f.index={array:d,itemSize:1},t.destroy(m)}return t.destroy(n),f}(t,e,i,o),a=s.attributes.map(function(t){return t.array.buffer});s.index&&a.push(s.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:s},a)}catch(t){self.postMessage({type:"error",id:r.id,error:t.message})}finally{t.destroy(i),t.destroy(e)}})}}},PA.taskCache=new WeakMap,PA.setDecoderPath=function(){},PA.setDecoderConfig=function(){},PA.releaseDecoderModule=function(){},PA.getDecoderModule=function(){},OA.prototype=Object.assign(Object.create(il.prototype),{constructor:OA,isAmbientLight:!0});var IA=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ci=e,this.Li=null,this.Ii=null,this.Ni=null,this.Bi=null,this.createLight=this.createLight.bind(this)}var e,i;return e=t,(i=[{key:"createLight",value:function(t,e){var i=(r=this.Ci.getMapOptions()).lockedLight,r=r.lightConfig[e];return t._i=new OA(r[1].color,r[1].intensity),t.Fi=new k,t.Di=new ll(r[0].color,r[0].intensity),t.Di.position.set(r[0].position.x,r[0].position.y,r[0].position.z),t.Di.target=t.Fi,t.Hi=new ll(r[2].color,r[2].intensity),t.Hi.position.set(r[2].position.x,r[2].position.y,r[2].position.z),t.Hi.target=t.Fi,this.Li=t,this.Ii=e,i&&(this.Ui=this.Ui.bind(this),this.Ci.on("viewChanged",this.Ui)),this}},{key:"createLightByTheme",value:function(t,e,i){return t._i=new OA(new H("rgb("+i[1].color+")"),i[1].intensity),t.Di=new ll(new H("rgb("+i[0].color+")"),i[0].intensity),t.Di.position.set(i[0].position.x,i[0].position.y,i[0].position.z),t.Fi=new k,t.Fi.position.set(i[0].target.x,i[0].target.y,i[0].target.z),t.Di.target=t.Fi,t.Hi=new ll(new H("rgb("+i[2].color+")"),i[2].intensity),t.Hi.position.set(i[2].position.x,i[2].position.y,i[2].position.z),t.Gi=new k,t.Gi.position.set(i[2].target.x,i[2].target.y,i[2].target.z),t.Hi.target=t.Gi,this.Li=t,this.Ii=e,this}}])&&RA(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),UA=(Object.assign(IA.prototype,{Vi:function(t){var e=new Pf;return e.setFromVector3(t),e.theta},qi:function(t,e){var i=new Pf;(e=(i.setFromVector3(t),i.theta=e,new l)).setFromSpherical(i),t.copy(e)},Ui:function(){var t,e,i;this.Li&&(t=this.Vi(this.Ci.camera.position),null===this.Ni&&(e=this.Vi(this.Li.Di.position),i=this.Vi(this.Li.Hi.position),this.Ni=e-t,this.Bi=i-t),e=t+this.Ni,this.qi(this.Li.Di.position,e),i=t+this.Bi,this.qi(this.Li.Hi.position,i))},zi:function(){this.Ci.getMapOptions().lockedLight&&this.Ci.off("viewChanged",this.Ui)}}),i(0)),LA=0,kA=2,jA=4,QA=404;function NA(t){return(NA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zA(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function HA(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VA(r.key),r)}}function VA(t){return"symbol"===NA(t=function(t,e){if("object"!==NA(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==NA(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}Pc=function(t,e,i){return e&&HA(t.prototype,e),i&&HA(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Xi=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zA(Object(i),!0).forEach(function(e){var r,n;r=t,n=i[e=e],(e=VA(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zA(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({data:null,method:"GET",responseType:"json"},e),this.Zi=null});var GA=(Object.assign(Pc.prototype,{Yi:function(t,e,i){var r=this.Xi,n=r.data,o=r.method,s=r.url,a=r.responseType,u=r.header,h=null;if((h=new("undefined"!=typeof XMLHttpRequest?XMLHttpRequest:UA.a.global().fengmap.XMLHttpRequest)).responseType=a,h.open(o,s),"object"==NA(u))for(var l in u)h.setRequestHeader(l,u[l]);h.addEventListener("load",function(){200===h.status||0===h.status||201===h.status?t&&t(h.response):e&&(404===h.status?e(QA):2069===h.response.error_code?e(LA):2063===h.response.error_code?e(kA):400===h.response.error_code?e(jA):e(h.response))}),h.addEventListener("timeout",function(t){i&&i(t)}),h.addEventListener("error",function(t){e&&e(t)}),h.send(JSON.stringify(n)),this.Zi=h},zi:function(){this.Zi&&this.Zi.abort&&(this.Zi.abort(),this.Zi=null)}}),Pc),KA=function(t){return null!=t};function YA(t){var e;this.name="DeveloperError",this.message=t;try{throw new Error}catch(t){e=t.stack}this.stack=e}KA(Object.create)&&((YA.prototype=Object.create(Error.prototype)).constructor=YA),YA.prototype.toString=function(){var t="".concat(this.name,": ").concat(this.message);return KA(this.stack)&&(t+="\n".concat(this.stack.toString())),t},YA.throwInstantiationError=function(){throw new YA("This function defines an interface and should not be called directly.")};var XA=YA;function WA(t){return(WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var qA={};function ZA(t,e,i){return"Expected ".concat(i," to be typeof ").concat(e,", actual typeof was ").concat(t)}qA.typeOf={},qA.defined=function(t,e){if(!KA(e))throw new XA("".concat(t," is required, actual value was undefined"))},qA.typeOf.func=function(t,e){if("function"!=typeof e)throw new XA(ZA(WA(e),"function",t))},qA.typeOf.string=function(t,e){if("string"!=typeof e)throw new XA(ZA(WA(e),"string",t))},qA.typeOf.number=function(t,e){if("number"!=typeof e)throw new XA(ZA(WA(e),"number",t))},qA.typeOf.number.lessThan=function(t,e,i){if(qA.typeOf.number(t,e),i<=e)throw new XA("Expected ".concat(t," to be less than ").concat(i,", actual value was ").concat(e))},qA.typeOf.number.lessThanOrEquals=function(t,e,i){if(qA.typeOf.number(t,e),i<e)throw new XA("Expected ".concat(t," to be less than or equal to ").concat(i,", actual value was ").concat(e))},qA.typeOf.number.greaterThan=function(t,e,i){if(qA.typeOf.number(t,e),e<=i)throw new XA("Expected ".concat(t," to be greater than ").concat(i,", actual value was ").concat(e))},qA.typeOf.number.greaterThanOrEquals=function(t,e,i){if(qA.typeOf.number(t,e),e<i)throw new XA("Expected ".concat(t," to be greater than or equal to ").concat(i,", actual value was ").concat(e))},qA.typeOf.object=function(t,e){if("object"!==WA(e))throw new XA(ZA(WA(e),"object",t))},qA.typeOf.bool=function(t,e){if("boolean"!=typeof e)throw new XA(ZA(WA(e),"boolean",t))},qA.typeOf.bigint=function(t,e){if("bigint"!=typeof e)throw new XA(ZA(WA(e),"bigint",t))},qA.typeOf.number.equals=function(t,e,i,r){if(qA.typeOf.number(t,i),qA.typeOf.number(e,r),i!==r)throw new XA("".concat(t," must be equal to ").concat(e,", the actual values are ").concat(i," and ").concat(r))};var JA=qA;function $A(t,e){return null!=t?t:e}$A.EMPTY_OBJECT=Object.freeze({});var tp=$A,ep={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296},ip=(ep.sign=tp(Math.sign,function(t){return 0==(t=+t)||t!=t?t:0<t?1:-1}),ep.signNotZero=function(t){return t<0?-1:1},ep.toSNorm=function(t,e){return e=tp(e,255),Math.round((.5*ep.clamp(t,-1,1)+.5)*e)},ep.fromSNorm=function(t,e){return e=tp(e,255),ep.clamp(t,0,e)/e*2-1},ep.normalize=function(t,e,i){return 0===(i=Math.max(i-e,0))?0:ep.clamp((t-e)/i,0,1)},ep.sinh=tp(Math.sinh,function(t){return(Math.exp(t)-Math.exp(-t))/2}),ep.cosh=tp(Math.cosh,function(t){return(Math.exp(t)+Math.exp(-t))/2}),ep.lerp=function(t,e,i){return(1-i)*t+i*e},ep.PI=Math.PI,ep.ONE_OVER_PI=1/Math.PI,ep.PI_OVER_TWO=Math.PI/2,ep.PI_OVER_THREE=Math.PI/3,ep.PI_OVER_FOUR=Math.PI/4,ep.PI_OVER_SIX=Math.PI/6,ep.THREE_PI_OVER_TWO=3*Math.PI/2,ep.TWO_PI=2*Math.PI,ep.ONE_OVER_TWO_PI=1/(2*Math.PI),ep.RADIANS_PER_DEGREE=Math.PI/180,ep.DEGREES_PER_RADIAN=180/Math.PI,ep.RADIANS_PER_ARCSECOND=ep.RADIANS_PER_DEGREE/3600,ep.toRadians=function(t){if(KA(t))return t*ep.RADIANS_PER_DEGREE;throw new XA("degrees is required.")},ep.toDegrees=function(t){if(KA(t))return t*ep.DEGREES_PER_RADIAN;throw new XA("radians is required.")},ep.convertLongitudeRange=function(t){var e;if(KA(t))return e=ep.TWO_PI,(t-=Math.floor(t/e)*e)<-Math.PI?t+e:t>=Math.PI?t-e:t;throw new XA("angle is required.")},ep.clampToLatitudeRange=function(t){if(KA(t))return ep.clamp(t,-1*ep.PI_OVER_TWO,ep.PI_OVER_TWO);throw new XA("angle is required.")},ep.negativePiToPi=function(t){if(KA(t))return-ep.PI<=t&&t<=ep.PI?t:ep.zeroToTwoPi(t+ep.PI)-ep.PI;throw new XA("angle is required.")},ep.zeroToTwoPi=function(t){var e;if(KA(t))return 0<=t&&t<=ep.TWO_PI?t:(e=ep.mod(t,ep.TWO_PI),Math.abs(e)<ep.EPSILON14&&Math.abs(t)>ep.EPSILON14?ep.TWO_PI:e);throw new XA("angle is required.")},ep.mod=function(t,e){if(!KA(t))throw new XA("m is required.");if(!KA(e))throw new XA("n is required.");if(0===e)throw new XA("divisor cannot be 0.");return ep.sign(t)===ep.sign(e)&&Math.abs(t)<Math.abs(e)?t:(t%e+e)%e},ep.equalsEpsilon=function(t,e,i,r){if(!KA(t))throw new XA("left is required.");if(!KA(e))throw new XA("right is required.");i=tp(i,0),r=tp(r,i);var n=Math.abs(t-e);return n<=r||n<=i*Math.max(Math.abs(t),Math.abs(e))},ep.lessThan=function(t,e,i){if(!KA(t))throw new XA("first is required.");if(!KA(e))throw new XA("second is required.");if(KA(i))return t-e<-i;throw new XA("absoluteEpsilon is required.")},ep.lessThanOrEquals=function(t,e,i){if(!KA(t))throw new XA("first is required.");if(!KA(e))throw new XA("second is required.");if(KA(i))return t-e<i;throw new XA("absoluteEpsilon is required.")},ep.greaterThan=function(t,e,i){if(!KA(t))throw new XA("first is required.");if(!KA(e))throw new XA("second is required.");if(KA(i))return i<t-e;throw new XA("absoluteEpsilon is required.")},ep.greaterThanOrEquals=function(t,e,i){if(!KA(t))throw new XA("first is required.");if(!KA(e))throw new XA("second is required.");if(KA(i))return-i<t-e;throw new XA("absoluteEpsilon is required.")},[1]),rp=(ep.factorial=function(t){if("number"!=typeof t||t<0)throw new XA("A number greater than or equal to 0 is required.");var e=ip.length;if(e<=t)for(var i=ip[e-1],r=e;r<=t;r++){var n=i*r;ip.push(n),i=n}return ip[t]},ep.incrementWrap=function(t,e,i){if(i=tp(i,0),!KA(t))throw new XA("n is required.");if(e<=i)throw new XA("maximumValue must be greater than minimumValue.");return e<++t?i:t},ep.isPowerOfTwo=function(t){if("number"!=typeof t||t<0||4294967295<t)throw new XA("A number between 0 and (2^32)-1 is required.");return 0!==t&&0==(t&t-1)},ep.nextPowerOfTwo=function(t){if("number"!=typeof t||t<0||2147483648<t)throw new XA("A number between 0 and 2^31 is required.");return--t,t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16,++t},ep.previousPowerOfTwo=function(t){if("number"!=typeof t||t<0||4294967295<t)throw new XA("A number between 0 and (2^32)-1 is required.");return((t=(t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)|t>>32)>>>0)-(t>>>1)},ep.clamp=function(t,e,i){return JA.typeOf.number("value",t),JA.typeOf.number("min",e),JA.typeOf.number("max",i),t<e?e:i<t?i:t},ep.nextRandomNumber=function(){return randomNumberGenerator.random()},ep.randomBetween=function(t,e){return ep.nextRandomNumber()*(e-t)+t},ep.acosClamped=function(t){if(KA(t))return Math.acos(ep.clamp(t,-1,1));throw new XA("value is required.")},ep.asinClamped=function(t){if(KA(t))return Math.asin(ep.clamp(t,-1,1));throw new XA("value is required.")},ep.chordLength=function(t,e){if(!KA(t))throw new XA("angle is required.");if(KA(e))return 2*e*Math.sin(.5*t);throw new XA("radius is required.")},ep.logBase=function(t,e){if(!KA(t))throw new XA("number is required.");if(KA(e))return Math.log(t)/Math.log(e);throw new XA("base is required.")},ep.cbrt=tp(Math.cbrt,function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}),ep.log2=tp(Math.log2,function(t){return Math.log(t)*Math.LOG2E}),ep.fog=function(t,e){return t*=e,1-Math.exp(-t*t)},ep.fastApproximateAtan=function(t){return JA.typeOf.number("x",t),t*(-.1784*Math.abs(t)-.0663*t*t+1.0301)},ep.fastApproximateAtan2=function(t,e){JA.typeOf.number("x",t),JA.typeOf.number("y",e);var i=Math.abs(t),r=Math.abs(e),n=Math.max(i,r);r=Math.min(i,r)/n;if(isNaN(r))throw new XA("either x or y must be nonzero");return i=ep.fastApproximateAtan(r),i=Math.abs(e)>Math.abs(t)?ep.PI_OVER_TWO-i:i,i=t<0?ep.PI-i:i,e<0?-i:i},ep);function np(t,e,i){this.x=tp(t,0),this.y=tp(e,0),this.z=tp(i,0)}np.fromSpherical=function(t,e){JA.typeOf.object("spherical",t),KA(e)||(e=new np);var i=t.clock,r=t.cone,n=(t=tp(t.magnitude,1))*Math.sin(r);return e.x=n*Math.cos(i),e.y=n*Math.sin(i),e.z=t*Math.cos(r),e},np.fromElements=function(t,e,i,r){return KA(r)?(r.x=t,r.y=e,r.z=i,r):new np(t,e,i)},np.fromCartesian4=np.clone=function(t,e){if(KA(t))return KA(e)?(e.x=t.x,e.y=t.y,e.z=t.z,e):new np(t.x,t.y,t.z)},np.packedLength=3,np.pack=function(t,e,i){return JA.typeOf.object("value",t),JA.defined("array",e),i=tp(i,0),e[i++]=t.x,e[i++]=t.y,e[i]=t.z,e},np.unpack=function(t,e,i){return JA.defined("array",t),e=tp(e,0),(i=KA(i)?i:new np).x=t[e++],i.y=t[e++],i.z=t[e],i},np.packArray=function(t,e){JA.defined("array",t);var i=t.length,r=3*i;if(KA(e)){if(!Array.isArray(e)&&e.length!==r)throw new XA("If result is a typed array, it must have exactly array.length * 3 elements");e.length!==r&&(e.length=r)}else e=new Array(r);for(var n=0;n<i;++n)np.pack(t[n],e,3*n);return e},np.unpackArray=function(t,e){if(JA.defined("array",t),JA.typeOf.number.greaterThanOrEquals("array.length",t.length,3),t.length%3!=0)throw new XA("array length must be a multiple of 3.");var i=t.length;KA(e)?e.length=i/3:e=new Array(i/3);for(var r=0;r<i;r+=3){var n=r/3;e[n]=np.unpack(t,r,e[n])}return e},np.fromArray=np.unpack,np.maximumComponent=function(t){return JA.typeOf.object("cartesian",t),Math.max(t.x,t.y,t.z)},np.minimumComponent=function(t){return JA.typeOf.object("cartesian",t),Math.min(t.x,t.y,t.z)},np.minimumByComponent=function(t,e,i){return JA.typeOf.object("first",t),JA.typeOf.object("second",e),JA.typeOf.object("result",i),i.x=Math.min(t.x,e.x),i.y=Math.min(t.y,e.y),i.z=Math.min(t.z,e.z),i},np.maximumByComponent=function(t,e,i){return JA.typeOf.object("first",t),JA.typeOf.object("second",e),JA.typeOf.object("result",i),i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.z=Math.max(t.z,e.z),i},np.clamp=function(t,e,i,r){JA.typeOf.object("value",t),JA.typeOf.object("min",e),JA.typeOf.object("max",i),JA.typeOf.object("result",r);var n=rp.clamp(t.x,e.x,i.x),o=rp.clamp(t.y,e.y,i.y);t=rp.clamp(t.z,e.z,i.z);return r.x=n,r.y=o,r.z=t,r},np.magnitudeSquared=function(t){return JA.typeOf.object("cartesian",t),t.x*t.x+t.y*t.y+t.z*t.z},np.magnitude=function(t){return Math.sqrt(np.magnitudeSquared(t))};var op=new np,sp=(np.distance=function(t,e){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),np.subtract(t,e,op),np.magnitude(op)},np.distanceSquared=function(t,e){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),np.subtract(t,e,op),np.magnitudeSquared(op)},np.normalize=function(t,e){JA.typeOf.object("cartesian",t),JA.typeOf.object("result",e);var i=np.magnitude(t);if(e.x=t.x/i,e.y=t.y/i,e.z=t.z/i,isNaN(e.x)||isNaN(e.y)||isNaN(e.z))throw new XA("normalized result is not a number");return e},np.dot=function(t,e){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),t.x*e.x+t.y*e.y+t.z*e.z},np.multiplyComponents=function(t,e,i){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),JA.typeOf.object("result",i),i.x=t.x*e.x,i.y=t.y*e.y,i.z=t.z*e.z,i},np.divideComponents=function(t,e,i){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),JA.typeOf.object("result",i),i.x=t.x/e.x,i.y=t.y/e.y,i.z=t.z/e.z,i},np.add=function(t,e,i){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),JA.typeOf.object("result",i),i.x=t.x+e.x,i.y=t.y+e.y,i.z=t.z+e.z,i},np.subtract=function(t,e,i){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),JA.typeOf.object("result",i),i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i},np.multiplyByScalar=function(t,e,i){return JA.typeOf.object("cartesian",t),JA.typeOf.number("scalar",e),JA.typeOf.object("result",i),i.x=t.x*e,i.y=t.y*e,i.z=t.z*e,i},np.divideByScalar=function(t,e,i){return JA.typeOf.object("cartesian",t),JA.typeOf.number("scalar",e),JA.typeOf.object("result",i),i.x=t.x/e,i.y=t.y/e,i.z=t.z/e,i},np.negate=function(t,e){return JA.typeOf.object("cartesian",t),JA.typeOf.object("result",e),e.x=-t.x,e.y=-t.y,e.z=-t.z,e},np.abs=function(t,e){return JA.typeOf.object("cartesian",t),JA.typeOf.object("result",e),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e.z=Math.abs(t.z),e},new np),ap=(np.lerp=function(t,e,i,r){return JA.typeOf.object("start",t),JA.typeOf.object("end",e),JA.typeOf.number("t",i),JA.typeOf.object("result",r),np.multiplyByScalar(e,i,sp),r=np.multiplyByScalar(t,1-i,r),np.add(sp,r,r)},new np),up=new np,hp=(np.angleBetween=function(t,e){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),np.normalize(t,ap),np.normalize(e,up),t=np.dot(ap,up),e=np.magnitude(np.cross(ap,up,ap)),Math.atan2(e,t)},new np),lp=(np.mostOrthogonalAxis=function(t,e){return JA.typeOf.object("cartesian",t),JA.typeOf.object("result",e),t=np.normalize(t,hp),np.abs(t,t),t.x<=t.y?t.x<=t.z?np.clone(np.UNIT_X,e):np.clone(np.UNIT_Z,e):t.y<=t.z?np.clone(np.UNIT_Y,e):np.clone(np.UNIT_Z,e)},np.projectVector=function(t,e,i){return JA.defined("a",t),JA.defined("b",e),JA.defined("result",i),t=np.dot(t,e)/np.dot(e,e),np.multiplyByScalar(e,t,i)},np.equals=function(t,e){return t===e||KA(t)&&KA(e)&&t.x===e.x&&t.y===e.y&&t.z===e.z},np.equalsArray=function(t,e,i){return t.x===e[i]&&t.y===e[i+1]&&t.z===e[i+2]},np.equalsEpsilon=function(t,e,i,r){return t===e||KA(t)&&KA(e)&&rp.equalsEpsilon(t.x,e.x,i,r)&&rp.equalsEpsilon(t.y,e.y,i,r)&&rp.equalsEpsilon(t.z,e.z,i,r)},np.cross=function(t,e,i){JA.typeOf.object("left",t),JA.typeOf.object("right",e),JA.typeOf.object("result",i);var r=t.x,n=t.y,o=(t=t.z,e.x),s=e.y,a=t*o-r*(e=e.z);r=r*s-n*o;return i.x=n*e-t*s,i.y=a,i.z=r,i},np.midpoint=function(t,e,i){return JA.typeOf.object("left",t),JA.typeOf.object("right",e),JA.typeOf.object("result",i),i.x=.5*(t.x+e.x),i.y=.5*(t.y+e.y),i.z=.5*(t.z+e.z),i},np.fromDegrees=function(t,e,i,r,n){return JA.typeOf.number("longitude",t),JA.typeOf.number("latitude",e),t=rp.toRadians(t),e=rp.toRadians(e),np.fromRadians(t,e,i,r,n)},new np),cp=new np,fp=new np(40680631590769,40680631590769,40408299984661.445),Ap=(np.fromRadians=function(t,e,i,r,n){JA.typeOf.number("longitude",t),JA.typeOf.number("latitude",e),i=tp(i,0);r=KA(r)?r.radiiSquared:fp;var o=Math.cos(e);lp.x=o*Math.cos(t),lp.y=o*Math.sin(t),lp.z=Math.sin(e),lp=np.normalize(lp,lp),np.multiplyComponents(r,lp,cp),o=Math.sqrt(np.dot(lp,cp));return cp=np.divideByScalar(cp,o,cp),lp=np.multiplyByScalar(lp,i,lp),KA(n)||(n=new np),np.add(cp,lp,n)},np.fromDegreesArray=function(t,e,i){if(JA.defined("coordinates",t),t.length<2||t.length%2!=0)throw new XA("the number of coordinates must be a multiple of 2 and at least 2");var r=t.length;KA(i)?i.length=r/2:i=new Array(r/2);for(var n=0;n<r;n+=2){var o=t[n],s=t[n+1],a=n/2;i[a]=np.fromDegrees(o,s,0,e,i[a])}return i},np.fromRadiansArray=function(t,e,i){if(JA.defined("coordinates",t),t.length<2||t.length%2!=0)throw new XA("the number of coordinates must be a multiple of 2 and at least 2");var r=t.length;KA(i)?i.length=r/2:i=new Array(r/2);for(var n=0;n<r;n+=2){var o=t[n],s=t[n+1],a=n/2;i[a]=np.fromRadians(o,s,0,e,i[a])}return i},np.fromDegreesArrayHeights=function(t,e,i){if(JA.defined("coordinates",t),t.length<3||t.length%3!=0)throw new XA("the number of coordinates must be a multiple of 3 and at least 3");var r=t.length;KA(i)?i.length=r/3:i=new Array(r/3);for(var n=0;n<r;n+=3){var o=t[n],s=t[n+1],a=t[n+2],u=n/3;i[u]=np.fromDegrees(o,s,a,e,i[u])}return i},np.fromRadiansArrayHeights=function(t,e,i){if(JA.defined("coordinates",t),t.length<3||t.length%3!=0)throw new XA("the number of coordinates must be a multiple of 3 and at least 3");var r=t.length;KA(i)?i.length=r/3:i=new Array(r/3);for(var n=0;n<r;n+=3){var o=t[n],s=t[n+1],a=t[n+2],u=n/3;i[u]=np.fromRadians(o,s,a,e,i[u])}return i},np.ZERO=Object.freeze(new np(0,0,0)),np.ONE=Object.freeze(new np(1,1,1)),np.UNIT_X=Object.freeze(new np(1,0,0)),np.UNIT_Y=Object.freeze(new np(0,1,0)),np.UNIT_Z=Object.freeze(new np(0,0,1)),np.prototype.clone=function(t){return np.clone(this,t)},np.prototype.equals=function(t){return np.equals(this,t)},np.prototype.equalsEpsilon=function(t,e,i){return np.equalsEpsilon(this,t,e,i)},np.prototype.toString=function(){return"(".concat(this.x,", ").concat(this.y,", ").concat(this.z,")")},np),pp=new Ap,dp=new Ap;function mp(t,e,i){this.longitude=tp(t,0),this.latitude=tp(e,0),this.height=tp(i,0)}mp.fromRadians=function(t,e,i,r){return JA.typeOf.number("longitude",t),JA.typeOf.number("latitude",e),i=tp(i,0),KA(r)?(r.longitude=t,r.latitude=e,r.height=i,r):new mp(t,e,i)},mp.fromDegrees=function(t,e,i,r){return JA.typeOf.number("longitude",t),JA.typeOf.number("latitude",e),t=rp.toRadians(t),e=rp.toRadians(e),mp.fromRadians(t,e,i,r)};var yp=new Ap,gp=new Ap,vp=new Ap,bp=new Ap(1/6378137,1/6378137,1/6356752.314245179),wp=new Ap(1/40680631590769,1/40680631590769,1/40408299984661.445),xp=rp.EPSILON1,Mp=(mp.fromCartesian=function(t,e,i){var r=KA(e)?e.oneOverRadii:bp,n=KA(e)?e.oneOverRadiiSquared:wp;r=function(t,e,i,r,n){if(!KA(t))throw new XA("cartesian is required.");if(!KA(e))throw new XA("oneOverRadii is required.");if(!KA(i))throw new XA("oneOverRadiiSquared is required.");if(!KA(r))throw new XA("centerToleranceSquared is required.");var o=t.x,s=t.y,a=t.z,u=o*o*(c=e.x)*c,h=s*s*(f=e.y)*f,l=a*a*(e=e.z)*e,c=u+h+l,f=Math.sqrt(1/c);e=Ap.multiplyByScalar(t,f,pp);if(c<r)return isFinite(f)?Ap.clone(e,n):void 0;var A=i.x,p=i.y,d=i.z,m=((c=dp).x=e.x*A*2,c.y=e.y*p*2,c.z=e.z*d*2,(1-f)*Ap.magnitude(t)/(.5*Ap.magnitude(c))),y=0;do{var g,v,b,w,x,M,_;y=(_=u*(w=(g=1/(1+(m-=y)*A))*g)+h*(x=(v=1/(1+m*p))*v)+l*(M=(b=1/(1+m*d))*b)-1)/(-2*(u*(w*g)*A+h*(x*v)*p+l*(M*b)*d))}while(Math.abs(_)>rp.EPSILON12);return KA(n)?(n.x=o*g,n.y=s*v,n.z=a*b,n):new Ap(o*g,s*v,a*b)}(t,r,n,e=KA(e)?e._centerToleranceSquared:xp,gp);if(KA(r))return e=Ap.multiplyComponents(r,n,yp),e=Ap.normalize(e,e),n=Ap.subtract(t,r,vp),r=Math.atan2(e.y,e.x),e=Math.asin(e.z),t=rp.sign(Ap.dot(n,t))*Ap.magnitude(n),KA(i)?(i.longitude=r,i.latitude=e,i.height=t,i):new mp(r,e,t)},mp.toCartesian=function(t,e,i){return JA.defined("cartographic",t),Ap.fromRadians(t.longitude,t.latitude,t.height,e,i)},mp.clone=function(t,e){if(KA(t))return KA(e)?(e.longitude=t.longitude,e.latitude=t.latitude,e.height=t.height,e):new mp(t.longitude,t.latitude,t.height)},mp.equals=function(t,e){return t===e||KA(t)&&KA(e)&&t.longitude===e.longitude&&t.latitude===e.latitude&&t.height===e.height},mp.equalsEpsilon=function(t,e,i){return i=tp(i,0),t===e||KA(t)&&KA(e)&&Math.abs(t.longitude-e.longitude)<=i&&Math.abs(t.latitude-e.latitude)<=i&&Math.abs(t.height-e.height)<=i},mp.ZERO=Object.freeze(new mp(0,0,0)),mp.prototype.clone=function(t){return mp.clone(this,t)},mp.prototype.equals=function(t){return mp.equals(this,t)},mp.prototype.equalsEpsilon=function(t,e){return mp.equalsEpsilon(this,t,e)},mp.prototype.toString=function(){return"(".concat(this.longitude,", ").concat(this.latitude,", ").concat(this.height,")")},mp);function _p(t){this.Wi=6378137,this.Ki=1/this.Wi}Object.defineProperties(_p.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),_p.mercatorAngleToGeodeticLatitude=function(t){return rp.PI_OVER_TWO-2*Math.atan(Math.exp(-t))},_p.geodeticLatitudeToMercatorAngle=function(t){return _p.MaximumLatitude<t?t=_p.MaximumLatitude:t<-_p.MaximumLatitude&&(t=-_p.MaximumLatitude),t=Math.sin(t),.5*Math.log((1+t)/(1-t))},_p.MaximumLatitude=_p.mercatorAngleToGeodeticLatitude(Math.PI),_p.prototype.project=function(t,e){var i=this.Wi,r=t.longitude*i;i=_p.geodeticLatitudeToMercatorAngle(t.latitude)*i,t=t.height;return KA(e)?(e.x=r,e.y=i,e.z=t,e):new Ap(r,i,t)},_p.prototype.unproject=function(t,e){var i,r;if(KA(t))return r=this.Ki,i=t.x*r,r=_p.mercatorAngleToGeodeticLatitude(t.y*r),t=t.z,KA(e)?(e.longitude=i,e.latitude=r,e.height=t,e):new Mp(i,r,t);throw new XA("cartesian is required")};var Sp=_p;function Bp(t){return(Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ep(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Bp(t=function(t,e){if("object"!==Bp(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Bp(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function Cp(t,e,i,r){t=t||10,e=e||10,i=new H(void 0!==i?i:4473924),r=new H(void 0!==r?r:8947848);for(var n=e/2,o=t/e,s=t/2,a=[],u=[],h=0,l=0,c=-s;h<=e;h++,c+=o){a.push(-s,0,c,s,0,c),a.push(c,0,-s,c,0,s);var f=h===n?i:r;f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3}var A=((t=new Wt).setAttribute("position",new Lt(a,3)),t.setAttribute("color",new Lt(u,3)),new Rl({vertexColors:!0,toneMapped:!1}));sc.call(this,t,A)}function Tp(t){return(Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fp(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Tp(t=function(t,e){if("object"!==Tp(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Tp(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Eo=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Qi=void 0!==(e=e||{}).url?e.url:"",this.L=null!=e.offset?parseFloat(e.offset):1,this.nt=this.L,this.$i=null==e.isClamp||e.isClamp,this.Ji=e.decoderURL,this.K=null,this.Ci=null,this.tn=null,this.Pt=null,this.$=new j,this.nn=null,this.en=this.en.bind(this),this.st=this.st.bind(this),this.ot=!1,this.rn=null,this.sn=null,this.hn=null,this.an=null,this.cn=null,this.fn=null,this.ln=null,this.vn=null,this.yn=!0,this.dn=null}var e,i;return e=t,(i=[{key:"visible",get:function(){return this.I},set:function(t){this.I=t,this.$.visible=this.I,this.Ci.enableUpdateRender()}},{key:"addTo",value:function(t){this.Ci=t,this.nt=this.Ci.getFloor(this.Ci.getVisibleLevels()[0]).height-this.L,this.Ci.getRenderManager().set3DTilesLayerSceneArr(this.$),this.vt(),this.bn(),this.yn=!0}},{key:"remove",value:function(){for(var t=this.Ci.getRenderManager().get3DTilesLayerSceneArr(),e=t.length-1;0<=e;e--)t[e]===this.$&&t.splice(e,1);0==t.length&&(this.Ci.off("update",this.en),this.Ci.off("viewModeChanged",this.st),this.Ci.off("visibleLevelsLoaded",this.st),this.ot=!1),this.Ci.enableUpdateRender(),0==t.length&&(this.Ci=null),this.sn&&(this.sn.dispose(),this.sn=null),this.dn&&(this.$.remove(this.dn),this.dn.geometry.dispose(),this.dn.material.dispose(),this.dn=void 0)}}])&&Ep(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign(Eo.prototype,{vt:function(){this.ot||(this.nn=new IA(this.Ci).createLight(this,"FMExternalModelLayer"),this.K=this.Ci.getContainer(),this.Ci.on("update",this.en),this.Ci.on("viewModeChanged",this.st),this.Ci.on("visibleLevelsLoaded",this.st),this.pn(this.Qi),this.ot=!0)},bn:function(){this.$.add(this.Di),this.$.add(this._i),this.$.add(this.Hi)},pn:function(t){var e=this;new GA({method:"GET",responseType:"json",url:t}).Yi(function(t){t&&(e.hn=t.root.transform,e.ln=new g,e.an=e.mn(),e.cn=new g,e.cn.makeTranslation(e.an.offsetX,e.an.offsetY,e.nt),e.tn=e.Ci.camera,e.Pt=e.Ci.getRenderManager().renderer,e.wn(),e.gn())},function(t){})},wn:function(){this.rn=new ti,this.rn.rotation.set(0,0,0),this.$.add(this.rn)},gn:function(){var t=this,e=this,i=(this.sn=new TA(this.Qi),new gf(this.sn.manager)),r=(this.Ji&&((r=new PA).setDecoderPath(this.Ji),i.setDRACOLoader(r)),this.sn.fetchOptions.mode="cors",this.sn.manager.addHandler(/\.gltf$/,i),this.sn.manager.addHandler(/\.glb$/,i),this.sn.onLoadModel=function(t){t.traverse(function(t){t.isMesh&&(t.renderOrder=-8,t.material.map.encoding=3e3,t.material.map.wrapS=bt,t.material.map.wrapT=bt,t.material.map.minFilter=wt)}),e.yn=!0},this.sn.onDisposeModel=function(t){t.traverse(function(t){t.isMesh&&t.material.dispose()}),e.yn=!0},this.sn.onLoadTileSet=function(){var i,r,n=new at,o=new g,s=(n=((s=new g).fromArray(e.hn),t.sn.getOrientedBounds(n,o)&&(r=(i=(new l).setFromMatrixPosition(s)).length()),i.normalize()),o=new l(0,1,0),t.rotationBetweenDirections(n,o));t.sn.group.quaternion.x=s.x,t.sn.group.quaternion.y=s.y,t.sn.group.quaternion.z=s.z,t.sn.group.quaternion.w=s.w,t.sn.group.position.y=-r,e.yn=!0},this.rn.add(this.sn.group),this.rn.position.x=e.an.offsetX,this.rn.position.z=e.an.offsetY,this.rn.position.y=e.nt,this.rn.rotation.y=rp.PI-rp.PI/20,this.sn.lruCache.maxSize);this.dn=new Ve(new qt(r,r),new $t({visible:!1})),this.dn.position.x=e.an.offsetX,this.dn.position.z=e.an.offsetY,this.dn.position.y=e.nt,this.dn.rotation.x=-rp.PI/2,this.$.add(this.dn)},rotationBetweenDirections:function(t,e){var i=new a,r=(new l).crossVectors(t,e);return i.x=r.x,i.y=r.y,i.z=r.z,i.w=1+t.clone().dot(e),i.normalize(),i},mn:function(){var t=this.Ci.getCenter(),e=this.hn[12],i=this.hn[13],r=this.hn[14];e=new Ap(e,i,r),i=Mp.fromCartesian(e);return{offsetX:(r=(new Sp).project(i)).x-t.x,offsetY:t.y-r.y}},en:function(){this.sn&&(this.sn.setCamera(this.tn),this.sn.setResolutionFromRenderer(this.tn,this.Pt),this.sn.update(),this.yn)&&(null!=this.Ci&&this.Ci.enableUpdateRender(),this.yn=!1)},st:function(t){"viewModeChanged"==t.type&&(this.sn.deleteCamera(this.tn),this.tn=this.Ci.camera,this.sn.setCamera(this.tn),this.sn.setResolutionFromRenderer(this.tn,this.Pt),this.sn.update()),this.nt=this.Ci.getFloor(this.Ci.getVisibleLevels()[0]).height-this.L,this.$i&&(this.rn.position.y=this.nt)}}),Oc=Eo,Cp.prototype=Object.assign(Object.create(sc.prototype),{constructor:Cp,copy:function(t){return sc.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),Fc=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.L=e.offset,void 0===this.L&&(this.L=1),this.jn=e.color,void 0===this.jn&&(this.jn="#6E6A62"),this.Mn=e.opacity,void 0===this.Mn&&(this.Mn=1),this.Sn=e.gridColor,void 0===this.Sn&&(this.Sn="#000000"),this.On=e.gridOpacity,void 0===this.On&&(this.On=.1),this.C=1e3,this.$=new j,this.rt=new se(new l(0,1,0),0),this.tt=new Ye,this.En=null,this.kn=null,this.Tn=null,this.Ci=null,this.I=!0,this.St=this.St.bind(this)}var e,i;return e=t,(i=[{key:"color",get:function(){return this.jn},set:function(t){this.jn=t,this.kn.material.color=new H(t),this.Rn()}},{key:"opacity",get:function(){return this.Mn},set:function(t){this.Mn=t,this.kn.material.opacity=t,this.Rn()}},{key:"gridColor",get:function(){return this.Sn},set:function(t){this.Sn=t,this.Tn.material.color=new H(t),this.Rn()}},{key:"gridOpacity",get:function(){return this.On},set:function(t){this.On=t,this.Tn.material.opacity=t,this.Rn()}},{key:"visible",get:function(){return this.I},set:function(t){this.I=t,this.kn.visible=t,this.Tn.visible=t,this.Rn()}},{key:"addTo",value:function(t){this.Ci=t,this.En=this.Ci.getBuilding(this.Ci.getMapOptions().mapID).bound,this.C=20*Math.ceil(Math.max(this.En.size.x,this.En.size.y)),this.Ci.getRenderManager().setGroundLayerScene(this.$),this.An(),this.Rn()}},{key:"remove",value:function(){this.$.remove(this.kn),this.$.remove(this.Tn),this.kn.geometry.dispose(),this.kn=void 0,this.Tn.material.dispose(),this.Tn=void 0,this.Ci.off("levelChanged",this.St),this.Ci.getRenderManager().setGroundLayerScene(void 0),this.Ci.enableUpdateRender()}}])&&Fp(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign(Fc.prototype,{An:function(){this.kn=new Ve(new qt(this.C,this.C),new $t({color:new H(this.jn),opacity:this.Mn,transparent:!0,depthWrite:!1})),this.kn.renderOrder=-9,this.kn.material.polygonOffset=!0,this.kn.material.polygonOffsetFactor=1,this.kn.material.polygonOffsetUnits=4;var t=this.Ci.getFloor(this.Ci.getVisibleLevels()[0]).height-this.L;this.kn.position.x=this.En.center.x-this.Ci.x,this.kn.position.y=t,this.kn.position.z=this.Ci.y-this.En.center.y,this.kn.rotation.x=-Math.PI/2,this.$.add(this.kn),this.Tn=new Cp(this.C,40,this.Sn,this.Sn),this.Tn.material.opacity=this.On,this.Tn.material.depthWrite=!1,this.Tn.material.transparent=!0,this.Tn.material.polygonOffset=!0,this.Tn.material.polygonOffsetFactor=1,this.Tn.material.polygonOffsetUnits=4,this.Tn.position.x=this.En.center.x-this.Ci.x,this.Tn.position.y=t,this.Tn.position.z=this.Ci.y-this.En.center.y,this.Tn.renderOrder=-9,this.$.add(this.Tn),this.Ci.on("levelChanged",this.St)},St:function(){var t=this.Ci.getFloor(this.Ci.getVisibleLevels()[0]).height-this.L;this.kn.position.y=t,this.Tn.position.y=t},Rn:function(){this.Ci.enableUpdateRender()}}),i=Fc,(Pc=window.fengmap||{}).FMTileLayer=Ze,Pc.FM3DTilesLayer=Oc,Pc.FMTileProvider=qe,Pc.FMGroundLayer=i,Pc.FMTileFilter=$e,e.default=Pc}],i={},t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"xn",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.xn)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.xn?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=2).default;function t(r){var n;return(i[r]||(n=i[r]={i:r,l:!1,exports:{}},e[r].call(n.exports,n,n.exports,t),n.l=!0,n)).exports}var e,i},t.exports=r()},EH7o:function(t,e,i){"use strict";var r=i("1lLf"),n=i("8/0b");function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,n),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},EHWV:function(t,e,i){"use strict";t.exports=function t(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var r,n,o;if(Array.isArray(e)){if((r=e.length)!=i.length)return!1;for(n=r;0!=n--;)if(!t(e[n],i[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(i,o[n]))return!1;for(n=r;0!=n--;){var s=o[n];if(!t(e[s],i[s]))return!1}return!0}return e!=e&&i!=i}},EPz7:function(t,e,i){"use strict";var r=i("msF0");t.exports=r.default,t.exports.raw=r.raw},EXeW:function(t,e,i){var r=i("eCz2");t.exports=function(t){return(new r).update(t).digest()}},F11g:function(t,e,i){"use strict";var r=i("YP8Q"),n=i("HzeT"),o=i("TkWM"),s=i("hQ80"),a=i("txgm"),u=o.assert,h=i("yMmo"),l=i("NMED");function c(t){if(!(this instanceof c))return new c(t);"string"==typeof t&&(u(Object.prototype.hasOwnProperty.call(s,t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=c,c.prototype.keyPair=function(t){return new h(this,t)},c.prototype.keyFromPrivate=function(t,e){return h.fromPrivate(this,t,e)},c.prototype.keyFromPublic=function(t,e){return h.fromPublic(this,t,e)},c.prototype.genKeyPair=function(t){t||(t={});for(var e=new n({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new r(2));;){var s=new r(e.generate(i));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},c.prototype._truncateToN=function(t,e,i){var n;if(r.isBN(t)||"number"==typeof t)n=(t=new r(t,16)).byteLength();else if("object"==typeof t)n=t.length,t=new r(t,16);else{var o=t.toString();n=o.length+1>>>1,t=new r(o,16)}"number"!=typeof i&&(i=8*n);var s=i-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},c.prototype.sign=function(t,e,i,o){if("object"==typeof i&&(o=i,i=null),o||(o={}),"string"!=typeof t&&"number"!=typeof t&&!r.isBN(t)){u("object"==typeof t&&t&&"number"==typeof t.length,"Expected message to be an array-like, a hex string, or a BN instance"),u(t.length>>>0===t.length);for(var s=0;s<t.length;s++)u((255&t[s])===t[s])}e=this.keyFromPrivate(e,i),t=this._truncateToN(t,!1,o.msgBitLength),u(!t.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),h=e.getPrivate().toArray("be",a),c=t.toArray("be",a);u(new r(c).eq(t),"Can not sign message");for(var f=new n({hash:this.hash,entropy:h,nonce:c,pers:o.pers,persEnc:o.persEnc||"utf8"}),A=this.n.sub(new r(1)),p=0;;p++){var d=o.k?o.k(p):new r(f.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(A)>=0)){var m=this.g.mul(d);if(!m.isInfinity()){var y=m.getX(),g=y.umod(this.n);if(0!==g.cmpn(0)){var v=d.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var b=(m.getY().isOdd()?1:0)|(0!==y.cmp(g)?2:0);return o.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),b^=1),new l({r:g,s:v,recoveryParam:b})}}}}}},c.prototype.verify=function(t,e,i,r,n){n||(n={}),t=this._truncateToN(t,!1,n.msgBitLength),i=this.keyFromPublic(i,r);var o=(e=new l(e,"hex")).r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),h=u.mul(t).umod(this.n),c=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(h,i.getPublic(),c)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(h,i.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},c.prototype.recoverPubKey=function(t,e,i,n){u((3&i)===i,"The recovery param is more than two bits"),e=new l(e,n);var o=this.n,s=new r(t),a=e.r,h=e.s,c=1&i,f=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var A=e.r.invm(o),p=o.sub(s).mul(A).umod(o),d=h.mul(A).umod(o);return this.g.mulAdd(p,a,d)},c.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new l(e,r)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(t,e,n)}catch(t){continue}if(o.eq(i))return n}throw new Error("Unable to find valid recovery factor")}},FHrJ:function(t,e,i){"use strict";var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(t,e){for(var i=0;i<e.length;i++){t=JSON.parse(JSON.stringify(t));var n,o=e[i].split("/"),s=t;for(n=1;n<o.length;n++)s=s[o[n]];for(n=0;n<r.length;n++){var a=r[n],u=s[a];u&&(s[a]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}},FNEQ:function(t,e,i){"use strict";const r=/^[A-Z]:[/\\]|^\\\\/i;t.exports=function(t,e){if(""===t)return"";const i=/^[^?]*~/;let n;if(r.test(t))n=t;else if(void 0!==e&&!1!==e&&/^\//.test(t))switch(typeof e){case"string":n=i.test(e)?e.replace(/([^~/])$/,"$1/")+t.slice(1):e+t;break;case"boolean":n=t;break;default:throw new Error("Unexpected parameters to loader-utils 'urlToRequest': url = "+t+", root = "+e+".")}else n=/^\.\.?\//.test(t)?t:"./"+t;return i.test(n)&&(n=n.replace(i,"")),n}},"Fv+a":function(t,e,i){"use strict";t.exports=i("96ER")("Maximum")},GJov:function(t,e,i){"use strict";t.exports=Math.floor},GUE9:function(t,e,i){"use strict";(function(e){var r,n,o=i("X3l8").Buffer,s=i("2JY6"),a=i("35aj"),u=i("Zq1s"),h=i("Ml+W"),l=e.crypto&&e.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function A(){return n||(n=e.process&&e.process.nextTick?e.process.nextTick:e.queueMicrotask?e.queueMicrotask:e.setImmediate?e.setImmediate:e.setTimeout)}function p(t,e,i,r,n){return l.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return l.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:n}},t,r<<3)}).then(function(t){return o.from(t)})}t.exports=function(t,i,n,d,m,y){"function"==typeof m&&(y=m,m=void 0);var g=c[(m=m||"sha1").toLowerCase()];if(g&&"function"==typeof e.Promise){if(s(n,d),t=h(t,a,"Password"),i=h(i,a,"Salt"),"function"!=typeof y)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then(function(t){A()(function(){e(null,t)})},function(t){A()(function(){e(t)})})}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var i=p(r=r||o.alloc(8),r,10,128,t).then(function(){return!0},function(){return!1});return f[t]=i,i}(g).then(function(e){return e?p(t,i,n,d,g):u(t,i,n,d,m)}),y)}else A()(function(){var e;try{e=u(t,i,n,d,m)}catch(t){return void y(t)}y(null,e)})}}).call(e,i("DuR2"))},GfdO:function(t,e){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},H0ar:function(t,e,i){"use strict";t.exports=class extends Error{constructor(t,e){super(),this.name="ValidationError",this.message=`${e||""} Invalid Options\n\n`,t.forEach(t=>{this.message+=`options${t.dataPath} ${t.message}\n`}),this.errors=t,Error.captureStackTrace(this,this.constructor)}}},H1q7:function(t,e,i){(function(t){var r=i("H2Pp");function n(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,i){for(;e._cache.length<i.length;)e._cache=t.concat([e._cache,n(e)]);var o=e._cache.slice(0,i.length);return e._cache=e._cache.slice(i.length),r(i,o)}}).call(e,i("EuP9").Buffer)},H2Pp:function(t,e,i){(function(e){t.exports=function(t,i){for(var r=Math.min(t.length,i.length),n=new e(r),o=0;o<r;++o)n[o]=t[o]^i[o];return n}}).call(e,i("EuP9").Buffer)},HBxp:function(t,e,i){"use strict";var r,n=i("oKL6"),o=i("kCPa");try{r=[].__proto__===Array.prototype}catch(t){if(!(t&&"object"==typeof t&&"code"in t&&"ERR_PROTO_ACCESS"===t.code))throw t}var s=!!r&&o&&o(Object.prototype,"__proto__"),a=Object,u=a.getPrototypeOf;t.exports=s&&"function"==typeof s.get?n([s.get]):"function"==typeof u&&function(t){return u(null==t?t:a(t))}},HVlG:function(t,e,i){"use strict";var r=i("7ar3"),n=i("pmdr"),o=i("Atvd")(),s=i("kCPa"),a=i("xTtY"),u=r("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||u(e)!==e)throw new a("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,h=!0;if("length"in t&&s){var l=s(t,"length");l&&!l.configurable&&(r=!1),l&&!l.writable&&(h=!1)}return(r||h||!i)&&(o?n(t,"length",e,!0,!0):n(t,"length",e)),t}},Hi1a:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="errs__"+n,f=t.util.copy(t),A="";f.level++;var p="valid"+f.level,d={},m={},y=t.opts.ownProperties;for(w in s)if("__proto__"!=w){var g=s[w],v=Array.isArray(g)?m:d;v[w]=g}r+="var "+c+" = errors;";var b=t.errorPath;for(var w in r+="var missing"+n+";",m)if((v=m[w]).length){if(r+=" if ( "+l+t.util.getProperty(w)+" !== undefined ",y&&(r+=" && Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(w)+"') "),h){r+=" && ( ";var x=v;if(x)for(var M=-1,_=x.length-1;M<_;){F=x[M+=1],M&&(r+=" || "),r+=" ( ( "+(R=l+(D=t.util.getProperty(F)))+" === undefined ",y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(F)+"') "),r+=") && (missing"+n+" = "+t.util.toQuotedString(t.opts.jsonPointers?F:D)+") ) "}r+=")) {  ";var S="missing"+n,B="' + "+S+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,S,!0):b+" + "+S);var E=E||[];E.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(w)+"', missingProperty: '"+B+"', depsCount: "+v.length+", deps: '"+t.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",!1!==t.opts.messages&&(r+=" , message: 'should have ",1==v.length?r+="property "+t.util.escapeQuotes(v[0]):r+="properties "+t.util.escapeQuotes(v.join(", ")),r+=" when property "+t.util.escapeQuotes(w)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var C=r;r=E.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+C+"]); ":r+=" validate.errors = ["+C+"]; return false; ":r+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var T=v;if(T)for(var F,P=-1,O=T.length-1;P<O;){F=T[P+=1];var D=t.util.getProperty(F),R=(B=t.util.escapeQuotes(F),l+D);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,F,t.opts.jsonPointers)),r+=" if ( "+R+" === undefined ",y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(F)+"') "),r+=") {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(w)+"', missingProperty: '"+B+"', depsCount: "+v.length+", deps: '"+t.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",!1!==t.opts.messages&&(r+=" , message: 'should have ",1==v.length?r+="property "+t.util.escapeQuotes(v[0]):r+="properties "+t.util.escapeQuotes(v.join(", ")),r+=" when property "+t.util.escapeQuotes(w)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",h&&(A+="}",r+=" else { ")}t.errorPath=b;var I=f.baseId;for(var w in d){g=d[w];(t.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:t.util.schemaHasRules(g,t.RULES.all))&&(r+=" "+p+" = true; if ( "+l+t.util.getProperty(w)+" !== undefined ",y&&(r+=" && Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(w)+"') "),r+=") { ",f.schema=g,f.schemaPath=a+t.util.getProperty(w),f.errSchemaPath=u+"/"+t.util.escapeFragment(w),r+="  "+t.validate(f)+" ",f.baseId=I,r+=" }  ",h&&(r+=" if ("+p+") { ",A+="}"))}return h&&(r+="   "+A+" if ("+c+" == errors) {"),r}},HzeT:function(t,e,i){"use strict";var r=i("3PYz"),n=i("tpuU"),o=i("08Lv");function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=n.toArray(t.entropy,t.entropyEnc||"hex"),i=n.toArray(t.nonce,t.nonceEnc||"hex"),r=n.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,r)}t.exports=s,s.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=n.toArray(t,e),i=n.toArray(i,r),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},s.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=n.toArray(i,r||"hex"),this._update(i));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(i),this._reseed++,n.encode(s,e)}},"I+zu":function(t,e,i){"use strict";var r=i("4aPv"),n=i("oyTM"),o=i("J1ES"),s=i("hBsI"),a=i("NpaQ"),u=n.ucs2length,h=i("EHWV"),l=o.Validation;function c(t,e,i){for(var r=0;r<this._compilations.length;r++){var n=this._compilations[r];if(n.schema==t&&n.root==e&&n.baseId==i)return r}return-1}function f(t,e){return"var pattern"+t+" = new RegExp("+n.toQuotedString(e[t])+");"}function A(t){return"var default"+t+" = defaults["+t+"];"}function p(t,e){return void 0===e[t]?"":"var refVal"+t+" = refVal["+t+"];"}function d(t){return"var customRule"+t+" = customRules["+t+"];"}function m(t,e){if(!t.length)return"";for(var i="",r=0;r<t.length;r++)i+=e(r,t);return i}t.exports=function t(e,i,y,g){var v=this,b=this._opts,w=[void 0],x={},M=[],_={},S=[],B={},E=[];i=i||{schema:e,refVal:w,refs:x};var C=function(t,e,i){var r=c.call(this,t,e,i);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:t,root:e,baseId:i},{index:r,compiling:!1})}.call(this,e,i,g);var T=this._compilations[C.index];if(C.compiling)return T.callValidate=function t(){var e=T.validate;var i=e.apply(this,arguments);t.errors=e.errors;return i};var F=this._formats;var P=this.RULES;try{var O=R(e,i,y,g);T.validate=O;var D=T.callValidate;return D&&(D.schema=O.schema,D.errors=null,D.refs=O.refs,D.refVal=O.refVal,D.root=O.root,D.$async=O.$async,b.sourceCode&&(D.source=O.source)),O}finally{(function(t,e,i){var r=c.call(this,t,e,i);r>=0&&this._compilations.splice(r,1)}).call(this,e,i,g)}function R(e,s,c,y){var g=!s||s&&s.schema==e;if(s.schema!=i.schema)return t.call(v,e,s,c,y);var _,B=!0===e.$async,C=a({isTop:!0,schema:e,isRoot:g,baseId:y,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:P,validate:a,util:n,resolve:r,resolveRef:I,usePattern:k,useDefault:j,useCustomRule:Q,opts:b,formats:F,logger:v.logger,self:v});C=m(w,p)+m(M,f)+m(S,A)+m(E,d)+C,b.processCode&&(C=b.processCode(C,e));try{var T=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C);_=T(v,P,F,i,w,S,E,h,u,l),w[0]=_}catch(t){throw v.logger.error("Error compiling schema, function code:",C),t}return _.schema=e,_.errors=null,_.refs=x,_.refVal=w,_.root=g?_:s,B&&(_.$async=!0),!0===b.sourceCode&&(_.source={code:C,patterns:M,defaults:S}),_}function I(e,n,o){n=r.url(e,n);var s,a,u=x[n];if(void 0!==u)return L(s=w[u],a="refVal["+u+"]");if(!o&&i.refs){var h=i.refs[n];if(void 0!==h)return s=i.refVal[h],a=U(n,s),L(s,a)}a=U(n);var l=r.call(v,R,i,n);if(void 0===l){var c=y&&y[n];c&&(l=r.inlineRef(c,b.inlineRefs)?c:t.call(v,c,i,y,e))}if(void 0!==l)return function(t,e){var i=x[t];w[i]=e}(n,l),L(l,a);!function(t){delete x[t]}(n)}function U(t,e){var i=w.length;return w[i]=e,x[t]=i,"refVal"+i}function L(t,e){return"object"==typeof t||"boolean"==typeof t?{code:e,schema:t,inline:!0}:{code:e,$async:t&&!!t.$async}}function k(t){var e=_[t];return void 0===e&&(e=_[t]=M.length,M[e]=t),"pattern"+e}function j(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return n.toQuotedString(t);case"object":if(null===t)return"null";var e=s(t),i=B[e];return void 0===i&&(i=B[e]=S.length,S[i]=t),"default"+i}}function Q(t,e,i,r){if(!1!==v._opts.validateSchema){var n=t.definition.dependencies;if(n&&!n.every(function(t){return Object.prototype.hasOwnProperty.call(i,t)}))throw new Error("parent schema must have all required keywords: "+n.join(","));var o=t.definition.validateSchema;if(o){var s=o(e);if(!s){var a="keyword schema is invalid: "+v.errorsText(o.errors);if("log"!=v._opts.validateSchema)throw new Error(a);v.logger.error(a)}}}var u,h=t.definition.compile,l=t.definition.inline,c=t.definition.macro;if(h)u=h.call(v,e,i,r);else if(c)u=c.call(v,e,i,r),!1!==b.validateSchema&&v.validateSchema(u,!0);else if(l)u=l.call(v,r,t.keyword,e,i);else if(!(u=t.definition.validate))return;if(void 0===u)throw new Error('custom keyword "'+t.keyword+'"failed to compile');var f=E.length;return E[f]=u,{code:"customRule"+f,validate:u}}}},I8ie:function(t,e,i){"use strict";t.exports=function t(e){var i={trimLeft:function(t){return t.replace(/^[\s]+/,"")},trimRight:function(t){return t.replace(/[\s]+$/,"")},trim:function(t){return t.trim()},toLowerCase:function(t){return t.toLowerCase()},toUpperCase:function(t){return t.toUpperCase()},toEnumCase:function(t,e){return e.hash[r(t)]||t}};return t.definition={type:"string",errors:!1,modifying:!0,valid:!0,compile:function(t,e){var n;if(-1!==t.indexOf("toEnumCase")){if(n={hash:{}},!e.enum)throw new Error('Missing enum. To use `transform:["toEnumCase"]`, `enum:[...]` is required.');for(var o=e.enum.length;o--;o){var s=e.enum[o];if("string"==typeof s){var a=r(s);if(n.hash[a])throw new Error('Invalid enum uniqueness. To use `transform:["toEnumCase"]`, all values must be unique when case insensitive.');n.hash[a]=s}}}return function(e,r,o,s){if(o){for(var a=0,u=t.length;a<u;a++)e=i[t[a]](e,n);o[s]=e}}},metaSchema:{type:"array",items:{type:"string",enum:["trimLeft","trimRight","trim","toLowerCase","toUpperCase","toEnumCase"]}}},e.addKeyword("transform",t.definition),e;function r(t){return t.toLowerCase()}}},IRek:function(t,e,i){var r=i("z+8S"),n=i("BO8W"),o=i("LC74"),s=i("X3l8").Buffer,a={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};function u(t){r.call(this);var e,i=t.mode.toLowerCase(),n=a[i];e=t.decrypt?"decrypt":"encrypt";var o=t.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==i&&"des-ede-cbc"!==i||(o=s.concat([o,o.slice(0,8)]));var u=t.iv;s.isBuffer(u)||(u=s.from(u)),this._des=n.create({key:o,iv:u,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=u,o(u,r),u.prototype._update=function(t){return s.from(this._des.update(t))},u.prototype._final=function(){return s.from(this._des.final())}},Icsf:function(t,e,i){"use strict";var r=i("08Lv"),n=i("LC74"),o=i("iNQt"),s=i("AWjC");function a(t){s.call(this,t);var e=new function(){this.tmp=new Array(2),this.keys=null};this._desState=e,this.deriveKeys(e,t.key)}n(a,s),t.exports=a,a.create=function(t){return new a(t)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];a.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var i=o.readUInt32BE(e,0),n=o.readUInt32BE(e,4);o.pc1(i,n,t.tmp,0),i=t.tmp[0],n=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var a=u[s>>>1];i=o.r28shl(i,a),n=o.r28shl(n,a),o.pc2(i,n,t.keys,s)}},a.prototype._update=function(t,e,i,r){var n=this._desState,s=o.readUInt32BE(t,e),a=o.readUInt32BE(t,e+4);o.ip(s,a,n.tmp,0),s=n.tmp[0],a=n.tmp[1],"encrypt"===this.type?this._encrypt(n,s,a,n.tmp,0):this._decrypt(n,s,a,n.tmp,0),s=n.tmp[0],a=n.tmp[1],o.writeUInt32BE(i,s,r),o.writeUInt32BE(i,a,r+4)},a.prototype._pad=function(t,e){if(!1===this.padding)return!1;for(var i=t.length-e,r=e;r<t.length;r++)t[r]=i;return!0},a.prototype._unpad=function(t){if(!1===this.padding)return t;for(var e=t[t.length-1],i=t.length-e;i<t.length;i++)r.equal(t[i],e);return t.slice(0,t.length-e)},a.prototype._encrypt=function(t,e,i,r,n){for(var s=e,a=i,u=0;u<t.keys.length;u+=2){var h=t.keys[u],l=t.keys[u+1];o.expand(a,t.tmp,0),h^=t.tmp[0],l^=t.tmp[1];var c=o.substitute(h,l),f=a;a=(s^o.permute(c))>>>0,s=f}o.rip(a,s,r,n)},a.prototype._decrypt=function(t,e,i,r,n){for(var s=i,a=e,u=t.keys.length-2;u>=0;u-=2){var h=t.keys[u],l=t.keys[u+1];o.expand(s,t.tmp,0),h^=t.tmp[0],l^=t.tmp[1];var c=o.substitute(h,l),f=s;s=(a^o.permute(c))>>>0,a=f}o.rip(s,a,r,n)}},Ih7h:function(t,e,i){"use strict";t.exports=Math.min},Ik9x:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f="errs__"+n,A=t.util.copy(t);A.level++;var p="valid"+A.level,d=t.schema.then,m=t.schema.else,y=void 0!==d&&(t.opts.strictKeywords?"object"==typeof d&&Object.keys(d).length>0||!1===d:t.util.schemaHasRules(d,t.RULES.all)),g=void 0!==m&&(t.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:t.util.schemaHasRules(m,t.RULES.all)),v=A.baseId;if(y||g){var b;A.createErrors=!1,A.schema=s,A.schemaPath=a,A.errSchemaPath=u,r+=" var "+f+" = errors; var "+c+" = true;  ";var w=t.compositeRule;t.compositeRule=A.compositeRule=!0,r+="  "+t.validate(A)+" ",A.baseId=v,A.createErrors=!0,r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",t.compositeRule=A.compositeRule=w,y?(r+=" if ("+p+") {  ",A.schema=t.schema.then,A.schemaPath=t.schemaPath+".then",A.errSchemaPath=t.errSchemaPath+"/then",r+="  "+t.validate(A)+" ",A.baseId=v,r+=" "+c+" = "+p+"; ",y&&g?r+=" var "+(b="ifClause"+n)+" = 'then'; ":b="'then'",r+=" } ",g&&(r+=" else { ")):r+=" if (!"+p+") { ",g&&(A.schema=t.schema.else,A.schemaPath=t.schemaPath+".else",A.errSchemaPath=t.errSchemaPath+"/else",r+="  "+t.validate(A)+" ",A.baseId=v,r+=" "+c+" = "+p+"; ",y&&g?r+=" var "+(b="ifClause"+n)+" = 'else'; ":b="'else'",r+=" } "),r+=" if (!"+c+") {   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { failingKeyword: "+b+" } ",!1!==t.opts.messages&&(r+=" , message: 'should match \"' + "+b+" + '\" schema' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&h&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r}},J1ES:function(t,e,i){"use strict";var r=i("4aPv");function n(t,e,i){this.message=i||n.message(t,e),this.missingRef=r.url(t,e),this.missingSchema=r.normalizeId(r.fullPath(this.missingRef))}function o(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}t.exports={Validation:o(function(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}),MissingRef:o(n)},n.message=function(t,e){return"can't resolve reference "+e+" from id "+t}},J6PW:function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},JBxl:function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=" ",o=t.level,s=t.dataLevel,a=t.schema[e],u=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(s||""),f="valid"+o,A=t.opts.$data&&a&&a.$data;if(A?(n+=" var schema"+o+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",r="schema"+o):r=a,(a||A)&&!1!==t.opts.uniqueItems){A&&(n+=" var "+f+"; if ("+r+" === false || "+r+" === undefined) "+f+" = true; else if (typeof "+r+" != 'boolean') "+f+" = false; else { "),n+=" var i = "+c+".length , "+f+" = true , j; if (i > 1) { ";var p=t.schema.items&&t.schema.items.type,d=Array.isArray(p);if(!p||"object"==p||"array"==p||d&&(p.indexOf("object")>=0||p.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+c+"[i], "+c+"[j])) { "+f+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+c+"[i]; ";var m="checkDataType"+(d?"s":"");n+=" if ("+t.util[m](p,"item",t.opts.strictNumbers,!0)+") continue; ",d&&(n+=" if (typeof item == 'string') item = '\"' + item; "),n+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",A&&(n+="  }  "),n+=" if (!"+f+") {   ";var y=y||[];y.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { i: i, j: j } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(n+=" , schema:  ",n+=A?"validate.schema"+u:""+a,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var g=n;n=y.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n}},JKES:function(t,e,i){"use strict";var r=i("PO8r"),n=i("CTnB"),o=i("c2Ch"),s=i("WiOa"),a=(i("ktr9"),i("nq2H")),u=i("trid"),h=i("Lfyu"),l=i("lVyT"),c=i("ItK/"),f=i("WMwB"),A=i("0Fy/"),p=i("beD/"),d=i("Bupa"),m={components:{Menu:r.a,Project:n.a},name:"LocationHistorical",data:function(){return{openlayersSource:"",contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,intoProjectType:this.$store.state.intoProjectType,userList:[],TrackData:[],searchList:{projectid:this.$store.state.projectid,username:"",devtype:"",postype:2,begintime:"",endtime:""},value1:!0,pickerOptions:{shortcuts:[{text:this.$t("terminal.pickeroptions4"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions5"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-1728e5),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions6"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-5184e5),t.$emit("pick",[i,e])}}]},tasktime:[(new Date).getTime()-(36e5-1),new Date],begingTime:"",endTime:"",locationHisList:"",mapName:"map",arrs:[],map:null,time:"",startTime:"",username:"",progress:0,animating:!1,speed:1,now:null,textContent:"",routeCoords:[],routeCoords1:[],routeLength:null,route:null,routeFeature:null,geoMarker:null,startMarker:null,endMarker:null,styles:{route:new p.e({stroke:new p.d({width:6,color:[65,105,225,.8]})}),icon:new p.e({image:new p.a({radius:7,fill:new p.b({color:"red"}),stroke:new p.d({color:"white",width:2})})}),geoMarker:new p.e({image:new p.c({anchor:[.5,.5],scale:.5,src:i("ByXT"),rotateWithView:!0})}),start:new p.e({image:new p.c({anchor:[.5,1],src:i("iKYN")})}),end:new p.e({image:new p.c({anchor:[.5,1],src:i("lTml")})})},vectorLayer:null,center:[],userLoading:!1,userOptions:[],vectorLayers:[],timeShow:!0}},props:{},methods:{openTime:function(t){var e=this;t?this.vectorLayers.forEach(function(t){t.setVisible(!0),e.timeShow=!0}):this.vectorLayers.forEach(function(t){t.setVisible(!1),e.timeShow=!1})},searchInfo:function(t,e,i){var r=this;this.username=t;var n=this;this.tasktime=[1e3*e,1e3*i];var s={projectid:this.$store.state.projectid,username:t,devtype:1,postype:2,begintime:e,endtime:i};Object(o._43)(s,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){if(1001==t.code)if(n.routeCoords=[],t.data.list.length>0){n.$message({message:n.$t("beacon.searchsuccess"),type:"success"});var e=t.data.list.reverse();r.TrackData=e,r.center=[e[0].x,e[0].y],r.map.getView().setCenter(r.center),e.forEach(function(t){n.routeCoords.push([parseFloat(t.x),parseFloat(t.y)]),n.routeCoords1.push({rotate:!0,position:[parseFloat(t.x),parseFloat(t.y)]})}),n.addLayers(),r.value1=!0,r.stop(!1)}else n.$message({message:n.$t("beacon.nodata"),type:"warning"});else n.$message({message:"zh"==n.$store.state.i18n?t.msg:t.enMsg,type:"error"})})},clearBtn:function(){this.searchList={projectid:this.$store.state.projectid,username:"",devtype:"",postype:2,begintime:"",endtime:""},this.tasktime=[(new Date).getTime()-(36e5-1),new Date],this.begingTime="",this.endTime="",this.routeCoords=[],this.addLayers()},initMaps:function(){var t=this,e=this;setTimeout(function(){t.map=new u.a({target:"map",layers:[new c.a({source:e.openlayersSource})],view:new h.a({projection:"EPSG:4326",center:t.center,zoom:15})}),t.map.addControl(new A.a),t.addLayers(),t.addLine(t.map)},0)},removeVectorLayer:function(t){t&&this.map.removeLayer(t)},getDistance:function(t,e,i,r){var n=t*Math.PI/180,o=i*Math.PI/180,s=n-o,a=e*Math.PI/180-r*Math.PI/180,u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(a/2),2)));return u*=6378.137,u=Math.round(1e4*u)/1e4},datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var i=new Date(t);return(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+e(i.getMinutes())+":"+e(i.getSeconds())},formatDatetime:function(t){if(null==t||0==t)return"";var e=new Date(1e3*parseInt(t)).toUTCString();return this.datetimecut(e)},addLayers:function(){var t=this;this.removeVectorLayer(this.vectorLayer);var e=this;if(e.routeCoords.length>0){e.routeLength=e.routeCoords.length;var r=0;this.routeCoords.forEach(function(t,i){if(0===i)return!0;var n=e.routeCoords[i-1],o=e.routeCoords[i],s=1e3*e.getDistance(n[0],n[1],o[0],o[1]),a=[];s>=20&&(a=e.evenPostion(n[0],n[1],o[0],o[1],Math.round(s/20)),0===r?r=i-1+a.length+1:r+=a.length+2)}),e.route=new l.a(e.routeCoords);var n=[],o=0;this.TrackData.forEach(function(i,r){if(r>0){var s=t.TrackData[r],a=t.TrackData[r-1];1e3*e.getDistance(s.x,s.y,a.x,a.y)>=500&&0===o?n.push(s):(o+=1e3*e.getDistance(s.x,s.y,a.x,a.y))>500&&(n.push(s),o=0)}}),n.forEach(function(i){var r=new p.e({text:new p.f({textAlign:"center",textBaseline:"middle",font:"bold 13px ",text:e.formatDatetime(i.gpstime),fill:new p.b({color:"#587de5"}),stroke:new p.d({color:"#ffcc33",width:3})})}),n=new a.a({geometry:new l.b([i.x,i.y])});n.setStyle(r);var o=new c.b({source:new f.a({features:[n]}),zIndex:9999});t.vectorLayers.push(o),t.map.addLayer(o)}),e.routeFeature=new a.a({type:"route",geometry:e.route}),e.geoMarker=new a.a({type:"geoMarker",geometry:new l.b(e.routeCoords[0])}),e.startMarker=new a.a({type:"start",geometry:new l.b(e.routeCoords[0])}),e.endMarker=new a.a({type:"end",geometry:new l.b(e.routeCoords[e.routeLength-1])}),e.vectorLayer=new c.b({source:new f.a({features:[e.routeFeature]}),style:function(t){return e.styles[t.get("type")]}}),e.vectorLayer1=new c.b({source:new f.a({features:[e.startMarker,e.endMarker]}),style:function(t){return e.animating&&"geoMarker"===t.get("type")?null:e.styles[t.get("type")]},zIndex:1e4}),e.vectorLayer2&&this.map.removeLayer(e.vectorLayer2),e.vectorLayer2=new c.b({source:new f.a({features:[e.geoMarker]}),style:new p.e({image:new p.c({anchor:[.5,.5],scale:.5,src:i("ByXT"),rotateWithView:!0})}),zIndex:1e4}),this.map.addLayer(e.vectorLayer),this.map.addLayer(e.vectorLayer1),this.map.addLayer(e.vectorLayer2)}},mapClick:function(){var t=this;this.map.on("click",function(e){var i=t.map.getFeaturesAtPixel(e.pixel);t.map.getEventPixel(e.originalEvent),e.coordinate;i.length})},handlerPlay:function(){""===this.textContent?this.stop(!1):this.start()},moveFeature:function(t){Object(d.a)(t);var e=t.frameState;if(this.animating){var i=e.time-this.now,r=Math.round(this.speed*i/1e3);if(this.progress=Math.floor(100/this.routeLength*(this.speed*i)/1e3),r>=this.routeLength)return this.progress="100",void this.stop(!0);var n=new l.b(this.routeCoords[r]),o=void 0;r>0&&(o=new l.b(this.routeCoords[r-1]));new a.a(n);this.geoMarker.setGeometry(new l.b(n.flatCoordinates)),o&&this.routeCoords1[r].rotate&&this.vectorLayer2.getStyle().getImage().setRotation(this._map_p_rotation(n.flatCoordinates,o.flatCoordinates))}this.map.render()},start:function(){this.animating?this.stop(!1):(this.animating=!0,this.textContent="",this.now=(new Date).getTime(),this.geoMarker.setStyle(null),this.map.getView().setCenter(this.center),this.vectorLayer.on("postrender",this.moveFeature),this.map.render())},stop:function(t){this.progress=0,this.animating=!1,this.textContent="";var e=t?this.routeCoords[this.routeLength-1]:this.routeCoords[0];this.geoMarker.getGeometry().setCoordinates(e);this.vectorLayer.un("postrender",this.moveFeature)},addLine:function(t){var e=new p.e({stroke:new p.d({color:"#AA8DC6",width:10})}),i=new l.a([[122.9272781486751,23.848426854398152],[122.40150850225844,22.133416341086654],[121.78811058143899,21.35728019637634],[120.18576499235964,19.5296047588327],[119.25521102926318,17.337282710181967],[119.05017371536066,14.734886033725882],[118.98708531108292,12.810689703255191],[118.07230344905598,10.88649337278446],[116.57395384745995,8.96229704231377],[111.37587218970845,3.8613280294327694],[110.27425959721639,2.809788736599442],[107.95320447327722,5.7617448175673145],[107.26213818712276,7.806878264206475],[108.44658415967254,8.693401446500248],[110.07396639858125,11.021809880631187],[110.90017584295029,13.225035065615302],[109.69841665114078,15.428260250599415],[107.99592446274401,17.531338836266087]]),r=new f.a({wrapX:!1}),n=new p.e({stroke:new p.d({color:[170,141,198,1],lineDash:[2,7]})});var o=new a.a({geometry:i,finished:!1,dashOffset:-8});function s(){return[n,new p.e({stroke:new p.d({color:[170,141,198,1],widht:5,lineDash:[2,7],lineDashOffset:o.get("dashOffset")})})]}o.setStyle(s()),r.addFeature(o);var u=new c.b({source:r,style:e});t.addLayer(u),setInterval(function(){var t=o.get("dashOffset");t=0==t?-8:t+1,o.set("dashOffset",t),o.setStyle(s())},100)},delFeature:function(t){for(var e=this.map.getLayers().getArray(),i=1;i<e.length;i++);},getAllFeatures:function(){var t=this.map.getLayers().getArray();this.arrs=[];for(var e=1;e<t.length;e++);},evenPostion:function(t,e,i,r,n){for(var o=[],s=1;s<n;s++){var a=void 0,u=void 0;a=((n-s)*t+s*i)/n,u=((n-s)*e+s*r)/n,o[s-1]=[parseFloat(a.toFixed(4)),parseFloat(u.toFixed(4))]}return o},_map_p_rotation:function(t,e){return Math.atan2(1,0)-Math.atan2(t[1]-e[1],t[0]-e[0])}},beforeMount:function(){this.$store.state.longis&&this.$store.state.latis?this.center=[this.$store.state.longis,this.$store.state.latis]:"zh"==this.$store.state.i18n?this.center=[118,32]:this.center=[.1,51.3],"zh"==this.$store.state.i18n?this.openlayersSource=new s.b({url:"https://www.edwei.cn:8443/osm/{z}/{x}/{y}.png",crossOrigin:""}):this.openlayersSource=new s.b,this.initMaps()}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("div",{staticClass:"inputContent"},[i("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap","margin-left":"1%"},attrs:{model:t.searchList}},[i("el-form-item",{staticStyle:{display:"flex","margin-left":"1%","margin-right":"2%"},attrs:{label:t.$t("locationoutdoor.name")}},[i("el-input",{attrs:{disabled:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),i("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("locationoutdoor.time")}},[i("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":t.$t("terminal.to"),"start-placeholder":t.$t("terminal.starttime"),"end-placeholder":t.$t("terminal.endtime"),disabled:""},model:{value:t.tasktime,callback:function(e){t.tasktime=e},expression:"tasktime"}})],1),t._v(" "),i("el-form-item",[i("el-switch",{attrs:{"active-text":t.$t("tet.Timedisplay")},on:{change:t.openTime},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"mapConent"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:4}},[i("label",{attrs:{for:"speed"}},[t._v("\n          "+t._s(t.$t("tet.Movementspeed"))+":\n\n          "),i("Slider",{attrs:{"show-input":"","input-size":"small",max:10,min:1,step:1},model:{value:t.speed,callback:function(e){t.speed=e},expression:"speed"}})],1)]),t._v(" "),i("el-col",{attrs:{span:1}},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.handlerPlay}},[t._v(t._s(t.textContent))])],1)],1),t._v(" "),i("div",{attrs:{id:"map"}})],1)])},staticRenderFns:[]};var g=i("VU/8")(m,y,!1,function(t){i("oE5w")},"data-v-3e988728",null);e.a=g.exports},JZwM:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n;if(r+="var "+c+" = undefined;",!1===t.opts.format)return r+=" "+c+" = true; ";var f=t.schema.format,A=t.opts.$data&&f.$data,p="";if(A){var d=t.util.getData(f.$data,o,t.dataPathArr);r+=" var "+(m="format"+n)+" = formats["+d+"] , "+(y="compare"+n)+" = "+m+" && "+m+".compare;"}else{var m;if(!(m=t.formats[f])||!m.compare)return r+="  "+c+" = true; ";var y="formats"+t.util.getProperty(f)+".compare"}var g,v="formatMaximum"==e,b="formatExclusive"+(v?"Maximum":"Minimum"),w=t.schema[b],x=t.opts.$data&&w&&w.$data,M=v?"<":">",_="result"+n,S=t.opts.$data&&s&&s.$data;if(S?(r+=" var schema"+n+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",g="schema"+n):g=s,x){var B=t.util.getData(w.$data,o,t.dataPathArr),E="exclusive"+n,C="' + "+(P="op"+n)+" + '";r+=" var schemaExcl"+n+" = "+B+"; ",r+=" if (typeof "+(B="schemaExcl"+n)+" != 'boolean' && "+B+" !== undefined) { "+c+" = false; ";var T=b;(O=O||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(T||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: '"+b+" should be boolean' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var F=r;r=O.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+F+"]); ":r+=" validate.errors = ["+F+"]; return false; ":r+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }  ",h&&(p+="}",r+=" else { "),S&&(r+=" if ("+g+" === undefined) "+c+" = true; else if (typeof "+g+" != 'string') "+c+" = false; else { ",p+="}"),A&&(r+=" if (!"+y+") "+c+" = true; else { ",p+="}"),r+=" var "+_+" = "+y+"("+l+",  ",r+=S?""+g:""+t.util.toQuotedString(s),r+=" ); if ("+_+" === undefined) "+c+" = false; var "+E+" = "+B+" === true; if ("+c+" === undefined) { "+c+" = "+E+" ? "+_+" "+M+" 0 : "+_+" "+M+"= 0; } if (!"+c+") var op"+n+" = "+E+" ? '"+M+"' : '"+M+"=';"}else{C=M;(E=!0===w)||(C+="=");var P="'"+C+"'";S&&(r+=" if ("+g+" === undefined) "+c+" = true; else if (typeof "+g+" != 'string') "+c+" = false; else { ",p+="}"),A&&(r+=" if (!"+y+") "+c+" = true; else { ",p+="}"),r+=" var "+_+" = "+y+"("+l+",  ",r+=S?""+g:""+t.util.toQuotedString(s),r+=" ); if ("+_+" === undefined) "+c+" = false; if ("+c+" === undefined) "+c+" = "+_+" "+M,E||(r+="="),r+=" 0;"}r+=p+"if (!"+c+") { ";var O;T=e;(O=O||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(T||"_formatLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { comparison: "+P+", limit:  ",r+=S?""+g:""+t.util.toQuotedString(s),r+=" , exclusive: "+E+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be "+C+' "',r+=S?"' + "+g+" + '":""+t.util.escapeQuotes(s),r+="\"' "),t.opts.verbose&&(r+=" , schema:  ",r+=S?"validate.schema"+a:""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";F=r;return r=O.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+F+"]); ":r+=" validate.errors = ["+F+"]; return false; ":r+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="}"}},JaR3:function(t,e,i){"use strict";t.exports=function(e){var i=e.toLowerCase(),r=t.exports[i];if(!r)throw new Error(i+" is not supported (we accept pull requests)");return new r},t.exports.sha=i("N1es"),t.exports.sha1=i("KQ4j"),t.exports.sha224=i("lXn8"),t.exports.sha256=i("zvjZ"),t.exports.sha384=i("aY2F"),t.exports.sha512=i("C015")},Jo86:function(t,e,i){"use strict";t.exports=ReferenceError},KCUl:function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("geuY"),o=i("lZ6o").ec,s=i("jkjm"),a=i("QDfD");function u(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=0)throw new Error("invalid sig")}t.exports=function(t,e,i,h,l){var c=s(i);if("ec"===c.type){if("ecdsa"!==h&&"ecdsa/rsa"!==h)throw new Error("wrong public key type");return function(t,e,i){var r=a[i.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var n=new o(r),s=i.data.subjectPrivateKey.data;return n.verify(e,t,s)}(t,e,c)}if("dsa"===c.type){if("dsa"!==h)throw new Error("wrong public key type");return function(t,e,i){var r=i.data.p,o=i.data.q,a=i.data.g,h=i.data.pub_key,l=s.signature.decode(t,"der"),c=l.s,f=l.r;u(c,o),u(f,o);var A=n.mont(r),p=c.invm(o);return 0===a.toRed(A).redPow(new n(e).mul(p).mod(o)).fromRed().mul(h.toRed(A).redPow(f.mul(p).mod(o)).fromRed()).mod(r).mod(o).cmp(f)}(t,e,c)}if("rsa"!==h&&"ecdsa/rsa"!==h)throw new Error("wrong public key type");e=r.concat([l,e]);for(var f=c.modulus.byteLength(),A=[1],p=0;e.length+A.length+2<f;)A.push(255),p+=1;A.push(0);for(var d=-1;++d<e.length;)A.push(e[d]);A=r.from(A);var m=n.mont(c.modulus);t=(t=new n(t).toRed(m)).redPow(new n(c.publicExponent)),t=r.from(t.fromRed().toArray());var y=p<8?1:0;for(f=Math.min(t.length,A.length),t.length!==A.length&&(y=1),d=-1;++d<f;)y|=t[d]^A[d];return 0===y}},KDHK:function(t,e,i){var r=e;r.bignum=i("hgsc"),r.define=i("kJAH").define,r.base=i("3UtB"),r.constants=i("TnCn"),r.decoders=i("iLJX"),r.encoders=i("SAez")},KQ4j:function(t,e,i){"use strict";var r=i("LC74"),n=i("CzQx"),o=i("X3l8").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,n.call(this,64,56)}function h(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function c(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}r(u,n),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,f=0;f<16;++f)i[f]=t.readInt32BE(4*f);for(;f<80;++f)i[f]=(e=i[f-3]^i[f-8]^i[f-14]^i[f-16])<<1|e>>>31;for(var A=0;A<80;++A){var p=~~(A/20),d=h(r)+c(p,n,o,a)+u+i[A]+s[p]|0;u=a,a=o,o=l(n),n=r,r=d}this._a=r+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},KWtJ:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="errs__"+n,f=t.util.copy(t);f.level++;var A="valid"+f.level;if(t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all)){f.schema=s,f.schemaPath=a,f.errSchemaPath=u,r+=" var "+c+" = errors;  ";var p,d=t.compositeRule;t.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),r+=" "+t.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),t.compositeRule=f.compositeRule=d,r+=" if ("+A+") {   ";var m=m||[];m.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var y=r;r=m.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ");return r}},KYqO:function(t,e){t.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},"KeN/":function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("BVsN"),o=i("cSWu"),s=i("LC74"),a=i("pn+s"),u=i("KCUl"),h=i("ejIc");function l(t){o.Writable.call(this);var e=h[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function c(t){o.Writable.call(this);var e=h[t];if(!e)throw new Error("Unknown message digest");this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new l(t)}function A(t){return new c(t)}Object.keys(h).forEach(function(t){h[t].id=r.from(h[t].id,"hex"),h[t.toLowerCase()]=h[t]}),s(l,o.Writable),l.prototype._write=function(t,e,i){this._hash.update(t),i()},l.prototype.update=function(t,e){return this._hash.update("string"==typeof t?r.from(t,e):t),this},l.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=a(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},s(c,o.Writable),c.prototype._write=function(t,e,i){this._hash.update(t),i()},c.prototype.update=function(t,e){return this._hash.update("string"==typeof t?r.from(t,e):t),this},c.prototype.verify=function(t,e,i){var n="string"==typeof e?r.from(e,i):e;this.end();var o=this._hash.digest();return u(n,o,t,this._signType,this._tag)},t.exports={Sign:f,Verify:A,createSign:f,createVerify:A}},LBph:function(t,e,i){"use strict";var r=i("oyTM");t.exports=function(t){r.copy(t,this)}},LC74:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},LYGd:function(t,e,i){"use strict";var r=i("EuP9").Buffer,n=i("LC74"),o=i("yDvu"),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function A(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function d(t,e,i,r,n,o,s,a){return p(t+(e^i^r)+o+s|0,a)+n|0}function m(t,e,i,r,n,o,s,a){return p(t+(e&i|~e&r)+o+s|0,a)+n|0}function y(t,e,i,r,n,o,s,a){return p(t+((e|~i)^r)+o+s|0,a)+n|0}function g(t,e,i,r,n,o,s,a){return p(t+(e&r|i&~r)+o+s|0,a)+n|0}function v(t,e,i,r,n,o,s,a){return p(t+(e^(i|~r))+o+s|0,a)+n|0}n(A,o),A.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var i=0|this._a,r=0|this._b,n=0|this._c,o=0|this._d,A=0|this._e,b=0|this._a,w=0|this._b,x=0|this._c,M=0|this._d,_=0|this._e,S=0;S<80;S+=1){var B,E;S<16?(B=d(i,r,n,o,A,t[a[S]],c[0],h[S]),E=v(b,w,x,M,_,t[u[S]],f[0],l[S])):S<32?(B=m(i,r,n,o,A,t[a[S]],c[1],h[S]),E=g(b,w,x,M,_,t[u[S]],f[1],l[S])):S<48?(B=y(i,r,n,o,A,t[a[S]],c[2],h[S]),E=y(b,w,x,M,_,t[u[S]],f[2],l[S])):S<64?(B=g(i,r,n,o,A,t[a[S]],c[3],h[S]),E=m(b,w,x,M,_,t[u[S]],f[3],l[S])):(B=v(i,r,n,o,A,t[a[S]],c[4],h[S]),E=d(b,w,x,M,_,t[u[S]],f[4],l[S])),i=A,A=o,o=p(n,10),n=r,r=B,b=_,_=M,M=p(x,10),x=w,w=E}var C=this._b+n+M|0;this._b=this._c+o+_|0,this._c=this._d+A+b|0,this._d=this._e+i+w|0,this._e=this._a+r+x|0,this._a=C},A.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=A},LbEw:function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(6).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function h(t,e,i,r){for(var n=0,o=Math.min(t.length,i),s=e;s<o;s++){var a=t.charCodeAt(s)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o=0,s=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,s=o%r,a=Math.min(o,o-s)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var c=1;for(u=h(t,l,t.length,e),l=0;l<s;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function A(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=67108863&s,u=s/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),A=Math.max(0,h-t.length+1);A<=f;A++){var p=h-A|0;l+=(s=(n=0|t.words[p])*(o=0|e.words[A])+c)/67108864|0,c=67108863&s}i.words[h]=0|c,u=0|l}return 0!==u?i.words[h]=0|u:i.length--,i.strip()}o.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],A=f[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var d=p.modn(A).toString(t);i=(p=p.idivn(A)).isZero()?d+i:l[h-d.length]+d+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,h=new t(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[a]=s;for(;a<o;a++)h[a]=0}else{for(a=0;a<o-n;a++)h[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[o-a-1]=s}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|i.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<i.length;s++)o=(e=(0|i.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,s=t.words,a=e.words,u=i.words,h=0,l=0|s[0],c=8191&l,f=l>>>13,A=0|s[1],p=8191&A,d=A>>>13,m=0|s[2],y=8191&m,g=m>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],M=8191&x,_=x>>>13,S=0|s[5],B=8191&S,E=S>>>13,C=0|s[6],T=8191&C,F=C>>>13,P=0|s[7],O=8191&P,D=P>>>13,R=0|s[8],I=8191&R,U=R>>>13,L=0|s[9],k=8191&L,j=L>>>13,Q=0|a[0],N=8191&Q,z=Q>>>13,H=0|a[1],V=8191&H,G=H>>>13,K=0|a[2],Y=8191&K,X=K>>>13,W=0|a[3],q=8191&W,Z=W>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,At=0|a[9],pt=8191&At,dt=At>>>13;i.negative=t.negative^e.negative,i.length=19;var mt=(h+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,z))+Math.imul(f,N)|0))<<13)|0;h=((o=Math.imul(f,z))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,z))+Math.imul(d,N)|0,o=Math.imul(d,z);var yt=(h+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,V)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,z))+Math.imul(g,N)|0,o=Math.imul(g,z),r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(d,V)|0,o=o+Math.imul(d,G)|0;var gt=(h+(r=r+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(b,N),n=(n=Math.imul(b,z))+Math.imul(w,N)|0,o=Math.imul(w,z),r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0,r=r+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(d,Y)|0,o=o+Math.imul(d,X)|0;var vt=(h+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,q)|0))<<13)|0;h=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(M,N),n=(n=Math.imul(M,z))+Math.imul(_,N)|0,o=Math.imul(_,z),r=r+Math.imul(b,V)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(y,Y)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(d,q)|0,o=o+Math.imul(d,Z)|0;var bt=(h+(r=r+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(B,N),n=(n=Math.imul(B,z))+Math.imul(E,N)|0,o=Math.imul(E,z),r=r+Math.imul(M,V)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(b,Y)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,Z)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(d,$)|0,o=o+Math.imul(d,tt)|0;var wt=(h+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;h=((o=o+Math.imul(f,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,N),n=(n=Math.imul(T,z))+Math.imul(F,N)|0,o=Math.imul(F,z),r=r+Math.imul(B,V)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,r=r+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(d,it)|0,o=o+Math.imul(d,rt)|0;var xt=(h+(r=r+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,st)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,z))+Math.imul(D,N)|0,o=Math.imul(D,z),r=r+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,G)|0,r=r+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(d,ot)|0,o=o+Math.imul(d,st)|0;var Mt=(h+(r=r+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,N),n=(n=Math.imul(I,z))+Math.imul(U,N)|0,o=Math.imul(U,z),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,G)|0,r=r+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,r=r+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(d,ut)|0,o=o+Math.imul(d,ht)|0;var _t=(h+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,z))+Math.imul(j,N)|0,o=Math.imul(j,z),r=r+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,G)|0,r=r+Math.imul(O,Y)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,r=r+Math.imul(T,q)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(F,q)|0,o=o+Math.imul(F,Z)|0,r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(_,it)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(d,ct)|0,o=o+Math.imul(d,ft)|0;var St=(h+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(f,pt)|0))<<13)|0;h=((o=o+Math.imul(f,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(k,V),n=(n=Math.imul(k,G))+Math.imul(j,V)|0,o=Math.imul(j,G),r=r+Math.imul(I,Y)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(U,Y)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,r=r+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var Bt=(h+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,dt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((o=o+Math.imul(d,dt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(k,Y),n=(n=Math.imul(k,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(I,q)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,Z)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(T,it)|0,n=(n=n+Math.imul(T,rt)|0)+Math.imul(F,it)|0,o=o+Math.imul(F,rt)|0,r=r+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,dt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((o=o+Math.imul(g,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(k,q),n=(n=Math.imul(k,Z))+Math.imul(j,q)|0,o=Math.imul(j,Z),r=r+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(D,it)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ft)|0;var Ct=(h+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((o=o+Math.imul(w,dt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(k,$),n=(n=Math.imul(k,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(I,it)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(U,it)|0,o=o+Math.imul(U,rt)|0,r=r+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var Tt=(h+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,dt)|0)+Math.imul(_,pt)|0))<<13)|0;h=((o=o+Math.imul(_,dt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(k,it),n=(n=Math.imul(k,rt))+Math.imul(j,it)|0,o=Math.imul(j,rt),r=r+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(U,ot)|0,o=o+Math.imul(U,st)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(T,ct)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(F,ct)|0,o=o+Math.imul(F,ft)|0;var Ft=(h+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,dt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((o=o+Math.imul(E,dt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(k,ot),n=(n=Math.imul(k,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(U,ut)|0,o=o+Math.imul(U,ht)|0,r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Pt=(h+(r=r+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,dt)|0)+Math.imul(F,pt)|0))<<13)|0;h=((o=o+Math.imul(F,dt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(k,ut),n=(n=Math.imul(k,ht))+Math.imul(j,ut)|0,o=Math.imul(j,ht),r=r+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(U,ct)|0,o=o+Math.imul(U,ft)|0;var Ot=(h+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,dt)|0)+Math.imul(D,pt)|0))<<13)|0;h=((o=o+Math.imul(D,dt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,ct),n=(n=Math.imul(k,ft))+Math.imul(j,ct)|0,o=Math.imul(j,ft);var Dt=(h+(r=r+Math.imul(I,pt)|0)|0)+((8191&(n=(n=n+Math.imul(I,dt)|0)+Math.imul(U,pt)|0))<<13)|0;h=((o=o+Math.imul(U,dt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Rt=(h+(r=Math.imul(k,pt))|0)+((8191&(n=(n=Math.imul(k,dt))+Math.imul(j,pt)|0))<<13)|0;return h=((o=Math.imul(j,dt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=mt,u[1]=yt,u[2]=gt,u[3]=vt,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=_t,u[9]=St,u[10]=Bt,u[11]=Et,u[12]=Ct,u[13]=Tt,u[14]=Ft,u[15]=Pt,u[16]=Ot,u[17]=Dt,u[18]=Rt,0!==h&&(u[19]=h,i.length++),i};function d(t,e,i){return(new m).mulp(t,e,i)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=A),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?A(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var s=n;n=0;for(var a=67108863&r,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;a=67108863&(f=f+a|0),n+=(s=(s=s+(c/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}i.words[o]=a,r=s,s=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},m.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},m.prototype.permute=function(t,e,i,r,n,o){for(var s=0;s<o;s++)r[s]=e[t[s]],n[s]=i[t[s]]},m.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var c=u,f=h,A=0;A<s;A++){var p=i[l+A],d=r[l+A],m=i[l+A+s],y=r[l+A+s],g=c*m-f*y;y=c*y+f*m,m=g,i[l+A]=p+m,r[l+A]=d+y,i[l+A+s]=p-m,r[l+A+s]=d-y,A!==a&&(g=u*c-h*f,f=u*f+h*c,c=g)}},m.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},m.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},m.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,n),this.transform(h,o,l,c,r,n);for(var A=0;A<r;A++){var p=a[A]*l[A]-u[A]*c[A];u[A]=a[A]*c[A]+u[A]*l[A],a[A]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this.length=0===t?1:this.length,this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i)&&!!(this.words[i]&n)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,s=0|n.words[n.length-1];0!==(i=26-this._countBits(s))&&(n=n.ushln(i),r.iushln(i),s=0|n.words[n.length-1]);var a,u=r.length-n.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=r.clone()._ishlnsubmul(n,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var l=i.clone(),c=e.clone();!e.isZero();){for(var f=0,A=1;0==(e.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(l),s.isub(c)),n.iushrn(1),s.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(c)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),s.isub(u)):(i.isub(e),a.isub(n),u.isub(s))}return{a:a,b:u,gcd:i.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new o(1),a=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(a)):(i.isub(e),a.isub(s))}return(n=0===e.cmpn(1)?s:a).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},n(v,g),v.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,g),n(w,g),n(x,g),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),A=this.pow(t,n),p=s;0!==A.cmp(a);){for(var d=A,m=0;0!==d.cmp(a);m++)d=d.redSqr();r(m<p);var y=this.pow(c,new o(1).iushln(p-m-1));f=f.redMul(y),c=y.redSqr(),A=A.redMul(c),p=m}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var h=e.words[r],l=u-1;l>=0;l--){var c=h>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++a||0===r&&0===l)&&(n=this.mul(n,i[s]),a=0,s=0)):a=0}u=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new _(t)},n(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(e,i("3IRH")(t))},"Ml+W":function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("WTF8"),o="undefined"!=typeof Uint8Array,s=o&&"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView;t.exports=function(t,e,i){if("string"==typeof t||r.isBuffer(t)||o&&t instanceof Uint8Array||s&&s(t))return n(t,e);throw new TypeError(i+" must be a string, a Buffer, a Uint8Array, or a DataView")}},MnmI:function(t,e,i){"use strict";t.exports=i("96ER")("Minimum")},N1es:function(t,e,i){"use strict";var r=i("LC74"),n=i("CzQx"),o=i("X3l8").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,n.call(this,64,56)}function h(t){return t<<30|t>>>2}function l(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}r(u,n),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<80;++c)i[c]=i[c-3]^i[c-8]^i[c-14]^i[c-16];for(var f=0;f<80;++f){var A=~~(f/20),p=0|((e=r)<<5|e>>>27)+l(A,n,o,a)+u+i[f]+s[A];u=a,a=o,o=h(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},NCTB:function(t,e,i){"use strict";e.sha1=i("bMQ9"),e.sha224=i("fWB8"),e.sha256=i("Q48P"),e.sha384=i("EH7o"),e.sha512=i("8/0b")},NMED:function(t,e,i){"use strict";var r=i("YP8Q"),n=i("TkWM"),o=n.assert;function s(t,e){if(t instanceof s)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4)return!1;if(0===t[e.place])return!1;for(var n=0,o=0,s=e.place;o<r;o++,s++)n<<=8,n|=t[s],n>>>=0;return!(n<=127)&&(e.place=s,n)}function u(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function h(t,e){if(e<128)t.push(e);else{var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}}t.exports=s,s.prototype._importDER=function(t,e){t=n.toArray(t,e);var i=new function(){this.place=0};if(48!==t[i.place++])return!1;var o=a(t,i);if(!1===o)return!1;if(o+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var s=a(t,i);if(!1===s)return!1;if(0!=(128&t[i.place]))return!1;var u=t.slice(i.place,s+i.place);if(i.place+=s,2!==t[i.place++])return!1;var h=a(t,i);if(!1===h)return!1;if(t.length!==h+i.place)return!1;if(0!=(128&t[i.place]))return!1;var l=t.slice(i.place,h+i.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new r(u),this.s=new r(l),this.recoveryParam=null,!0},s.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=u(e),i=u(i);!(i[0]||128&i[1]);)i=i.slice(1);var r=[2];h(r,e.length),(r=r.concat(e)).push(2),h(r,i.length);var o=r.concat(i),s=[48];return h(s,o.length),s=s.concat(o),n.encode(s,t)}},Ne07:function(t,e,i){"use strict";t.exports=Math.round},NpaQ:function(t,e,i){"use strict";t.exports=function(t,e,i){var r="",n=!0===t.schema.$async,o=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),s=t.self._getId(t.schema);if(t.opts.strictKeywords){var a=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(a){var u="unknown keyword: "+a;if("log"!==t.opts.strictKeywords)throw new Error(u);t.logger.warn(u)}}if(t.isTop&&(r+=" var validate = ",n&&(t.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(t.opts.sourceCode||t.opts.processCode)&&(r+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof t.schema||!o&&!t.schema.$ref){var h=t.level,l=t.dataLevel,c=t.schema["false schema"],f=t.schemaPath+t.util.getProperty("false schema"),A=t.errSchemaPath+"/false schema",p=!t.opts.allErrors,d="data"+(l||""),m="valid"+h;if(!1===t.schema){t.isTop?p=!0:r+=" var "+m+" = false; ",(J=J||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(b||"false schema")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(A)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'boolean schema is false' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var y=r;r=J.pop(),!t.compositeRule&&p?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?r+=n?" return data; ":" validate.errors = null; return true; ":r+=" var "+m+" = true; ";return t.isTop&&(r+=" }; return validate; "),r}if(t.isTop){var g=t.isTop;h=t.level=0,l=t.dataLevel=0,d="data";if(t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[""],void 0!==t.schema.default&&t.opts.useDefaults&&t.opts.strictDefaults){var v="default is ignored in the schema root";if("log"!==t.opts.strictDefaults)throw new Error(v);t.logger.warn(v)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{h=t.level,d="data"+((l=t.dataLevel)||"");if(s&&(t.baseId=t.resolve.url(t.baseId,s)),n&&!t.async)throw new Error("async schema in sync schema");r+=" var errs_"+h+" = errors;"}m="valid"+h,p=!t.opts.allErrors;var b,w="",x="",M=t.schema.type,_=Array.isArray(M);if(M&&t.opts.nullable&&!0===t.schema.nullable&&(_?-1==M.indexOf("null")&&(M=M.concat("null")):"null"!=M&&(M=[M,"null"],_=!0)),_&&1==M.length&&(M=M[0],_=!1),t.schema.$ref&&o){if("fail"==t.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');!0!==t.opts.extendRefs&&(o=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(r+=" "+t.RULES.all.$comment.code(t,"$comment")),M){if(t.opts.coerceTypes)var S=t.util.coerceToTypes(t.opts.coerceTypes,M);var B=t.RULES.types[M];if(S||_||!0===B||B&&!$(B)){f=t.schemaPath+".type",A=t.errSchemaPath+"/type",f=t.schemaPath+".type",A=t.errSchemaPath+"/type";var E=_?"checkDataTypes":"checkDataType";if(r+=" if ("+t.util[E](M,d,t.opts.strictNumbers,!0)+") { ",S){var C="dataType"+h,T="coerced"+h;r+=" var "+C+" = typeof "+d+"; var "+T+" = undefined; ","array"==t.opts.coerceTypes&&(r+=" if ("+C+" == 'object' && Array.isArray("+d+") && "+d+".length == 1) { "+d+" = "+d+"[0]; "+C+" = typeof "+d+"; if ("+t.util.checkDataType(t.schema.type,d,t.opts.strictNumbers)+") "+T+" = "+d+"; } "),r+=" if ("+T+" !== undefined) ; ";var F=S;if(F)for(var P,O=-1,D=F.length-1;O<D;)"string"==(P=F[O+=1])?r+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+T+" = '' + "+d+"; else if ("+d+" === null) "+T+" = ''; ":"number"==P||"integer"==P?(r+=" else if ("+C+" == 'boolean' || "+d+" === null || ("+C+" == 'string' && "+d+" && "+d+" == +"+d+" ","integer"==P&&(r+=" && !("+d+" % 1)"),r+=")) "+T+" = +"+d+"; "):"boolean"==P?r+=" else if ("+d+" === 'false' || "+d+" === 0 || "+d+" === null) "+T+" = false; else if ("+d+" === 'true' || "+d+" === 1) "+T+" = true; ":"null"==P?r+=" else if ("+d+" === '' || "+d+" === 0 || "+d+" === false) "+T+" = null; ":"array"==t.opts.coerceTypes&&"array"==P&&(r+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+d+" == null) "+T+" = ["+d+"]; ");r+=" else {   ",(J=J||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(b||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(A)+" , params: { type: '",r+=_?""+M.join(","):""+M,r+="' } ",!1!==t.opts.messages&&(r+=" , message: 'should be ",r+=_?""+M.join(","):""+M,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";y=r;r=J.pop(),!t.compositeRule&&p?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+T+" !== undefined) {  ";var R=l?"data"+(l-1||""):"parentData",I=l?t.dataPathArr[l]:"parentDataProperty";r+=" "+d+" = "+T+"; ",l||(r+="if ("+R+" !== undefined)"),r+=" "+R+"["+I+"] = "+T+"; } "}else{(J=J||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(b||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(A)+" , params: { type: '",r+=_?""+M.join(","):""+M,r+="' } ",!1!==t.opts.messages&&(r+=" , message: 'should be ",r+=_?""+M.join(","):""+M,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";y=r;r=J.pop(),!t.compositeRule&&p?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(t.schema.$ref&&!o)r+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",p&&(r+=" } if (errors === ",r+=g?"0":"errs_"+h,r+=") { ",x+="}");else{var U=t.RULES;if(U)for(var L=-1,k=U.length-1;L<k;)if($(B=U[L+=1])){if(B.type&&(r+=" if ("+t.util.checkDataType(B.type,d,t.opts.strictNumbers)+") { "),t.opts.useDefaults)if("object"==B.type&&t.schema.properties){c=t.schema.properties;var j=Object.keys(c);if(j)for(var Q,N=-1,z=j.length-1;N<z;){if(void 0!==(G=c[Q=j[N+=1]]).default){var H=d+t.util.getProperty(Q);if(t.compositeRule){if(t.opts.strictDefaults){v="default is ignored for: "+H;if("log"!==t.opts.strictDefaults)throw new Error(v);t.logger.warn(v)}}else r+=" if ("+H+" === undefined ","empty"==t.opts.useDefaults&&(r+=" || "+H+" === null || "+H+" === '' "),r+=" ) "+H+" = ","shared"==t.opts.useDefaults?r+=" "+t.useDefault(G.default)+" ":r+=" "+JSON.stringify(G.default)+" ",r+="; "}}}else if("array"==B.type&&Array.isArray(t.schema.items)){var V=t.schema.items;if(V){O=-1;for(var G,K=V.length-1;O<K;)if(void 0!==(G=V[O+=1]).default){H=d+"["+O+"]";if(t.compositeRule){if(t.opts.strictDefaults){v="default is ignored for: "+H;if("log"!==t.opts.strictDefaults)throw new Error(v);t.logger.warn(v)}}else r+=" if ("+H+" === undefined ","empty"==t.opts.useDefaults&&(r+=" || "+H+" === null || "+H+" === '' "),r+=" ) "+H+" = ","shared"==t.opts.useDefaults?r+=" "+t.useDefault(G.default)+" ":r+=" "+JSON.stringify(G.default)+" ",r+="; "}}}var Y=B.rules;if(Y)for(var X,W=-1,q=Y.length-1;W<q;)if(tt(X=Y[W+=1])){var Z=X.code(t,X.keyword,B.type);Z&&(r+=" "+Z+" ",p&&(w+="}"))}if(p&&(r+=" "+w+" ",w=""),B.type&&(r+=" } ",M&&M===B.type&&!S)){r+=" else { ";var J;f=t.schemaPath+".type",A=t.errSchemaPath+"/type";(J=J||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: '"+(b||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(A)+" , params: { type: '",r+=_?""+M.join(","):""+M,r+="' } ",!1!==t.opts.messages&&(r+=" , message: 'should be ",r+=_?""+M.join(","):""+M,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";y=r;r=J.pop(),!t.compositeRule&&p?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}p&&(r+=" if (errors === ",r+=g?"0":"errs_"+h,r+=") { ",x+="}")}}function $(t){for(var e=t.rules,i=0;i<e.length;i++)if(tt(e[i]))return!0}function tt(e){return void 0!==t.schema[e.keyword]||e.implements&&function(e){for(var i=e.implements,r=0;r<i.length;r++)if(void 0!==t.schema[i[r]])return!0}(e)}return p&&(r+=" "+x+" "),g?(n?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+m+" = errors === errs_"+h+";",r}},"O+gO":function(t,e,i){"use strict";t.exports=i("ejIc")},OXfi:function(t,e,i){"use strict";const r=i("5JwX");t.exports=r},Ogt7:function(t,e){t.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","#","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","*","","","","","","","","0","","","1","2","","","3","4","5","6","7","8","9","","",""]},P3PB:function(t,e,i){"use strict";t.exports=function t(e){return t.definition={type:"object",macro:function(t,e){if(!t)return!0;var i=Object.keys(e.properties);return 0==i.length||{required:i}},metaSchema:{type:"boolean"},dependencies:["properties"]},e.addKeyword("allRequired",t.definition),e}},P7se:function(t,e,i){"use strict";function r(t,e){var i="data"+(e||"");if(!t)return i;for(var r,a=i,u=t.split("/"),h=1;h<u.length;h++){var l=u[h];a+=" && "+(i+=(r=l.replace(/~1/g,"/").replace(/~0/g,"~"),o.test(r)?"["+r+"]":n.test(r)?"."+r:"['"+r.replace(s,"\\$&")+"']"))}return a}t.exports=function t(e){return t.definition={type:"object",inline:function(t,e,i){for(var n="",o=0;o<i.length;o++)o&&(n+=" && "),n+="("+r(i[o],t.dataLevel)+" !== undefined)";return n},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}},e.addKeyword("deepRequired",t.definition),e};var n=/^[a-z$_][a-z$_0-9]*$/i,o=/^[0-9]+$/,s=/'|\\/g},P8fb:function(t,e,i){"use strict";var r=Function.prototype.call,n=Object.prototype.hasOwnProperty,o=i("PiFy");t.exports=o.call(r,n)},PBsE:function(t,e,i){(function(t){var r=i("3fzc"),n=i("4Vh3"),o=i("Ztz7");var s={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var i=new t(n[e].prime,"hex"),r=new t(n[e].gen,"hex");return new o(i,r)},e.createDiffieHellman=e.DiffieHellman=function e(i,n,a,u){return t.isBuffer(n)||void 0===s[n]?e(i,"binary",n,a):(n=n||"binary",u=u||"binary",a=a||new t([2]),t.isBuffer(a)||(a=new t(a,u)),"number"==typeof i?new o(r(i,a),a,!0):(t.isBuffer(i)||(i=new t(i,n)),new o(i,a,!0)))}}).call(e,i("EuP9").Buffer)},PC2b:function(t,e,i){"use strict";var r={},n={timestamp:function(){return Date.now()},datetime:function(){return(new Date).toISOString()},date:function(){return(new Date).toISOString().slice(0,10)},time:function(){return(new Date).toISOString().slice(11)},random:function(){return Math.random()},randomint:function(t){var e=t&&t.max||2;return function(){return Math.floor(Math.random()*e)}},seq:function(t){var e=t&&t.name||"";return r[e]=r[e]||0,function(){return r[e]++}}};t.exports=function t(e){return t.definition={compile:function(t,e,r){var n={};for(var o in t){var s=t[o],a=i("string"==typeof s?s:s.func);n[o]=a.length?a(s.args):a}return r.opts.useDefaults&&!r.compositeRule?function(e){for(var i in t)void 0!==e[i]&&("empty"!=r.opts.useDefaults||null!==e[i]&&""!==e[i])||(e[i]=n[i]());return!0}:function(){return!0}},DEFAULTS:n,metaSchema:{type:"object",additionalProperties:{type:["string","object"],additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}}},e.addKeyword("dynamicDefaults",t.definition),e;function i(t){var e=n[t];if(e)return e;throw new Error('invalid "dynamicDefaults" keyword property value: '+t)}}},PiFy:function(t,e,i){"use strict";var r=i("fRHV");t.exports=Function.prototype.bind||r},Pyiu:function(t,e,i){"use strict";var r=i("vRXZ"),n=Object.prototype.toString,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){if(!r(e))throw new TypeError("iterator must be a function");var s,a;arguments.length>=3&&(s=i),a=t,"[object Array]"===n.call(a)?function(t,e,i){for(var r=0,n=t.length;r<n;r++)o.call(t,r)&&(null==i?e(t[r],r,t):e.call(i,t[r],r,t))}(t,e,s):"string"==typeof t?function(t,e,i){for(var r=0,n=t.length;r<n;r++)null==i?e(t.charAt(r),r,t):e.call(i,t.charAt(r),r,t)}(t,e,s):function(t,e,i){for(var r in t)o.call(t,r)&&(null==i?e(t[r],r,t):e.call(i,t[r],r,t))}(t,e,s)}},PznY:function(t,e,i){"use strict";t.exports=function t(e){try{return'"'===e[0]?JSON.parse(e):"'"===e[0]&&"'"===e.substr(e.length-1)?t(e.replace(/\\.|"/g,t=>'"'===t?'\\"':t).replace(/^'|'$/g,'"')):JSON.parse('"'+e+'"')}catch(t){return e}}},"Q+f8":function(t,e,i){"use strict";var r=i("xTtY"),n=i("/Nss")("TypedArray.prototype.buffer",!0),o=i("Vclt");t.exports=n||function(t){if(!o(t))throw new r("Not a Typed Array");return t.buffer}},Q48P:function(t,e,i){"use strict";var r=i("1lLf"),n=i("YSDb"),o=i("3nYK"),s=i("08Lv"),a=r.sum32,u=r.sum32_4,h=r.sum32_5,l=o.ch32,c=o.maj32,f=o.s0_256,A=o.s1_256,p=o.g0_256,d=o.g1_256,m=n.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function g(){if(!(this instanceof g))return new g;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}r.inherits(g,m),t.exports=g,g.blockSize=512,g.outSize=256,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=u(d(i[r-2]),i[r-7],p(i[r-15]),i[r-16]);var n=this.h[0],o=this.h[1],m=this.h[2],y=this.h[3],g=this.h[4],v=this.h[5],b=this.h[6],w=this.h[7];for(s(this.k.length===i.length),r=0;r<i.length;r++){var x=h(w,A(g),l(g,v,b),this.k[r],i[r]),M=a(f(n),c(n,o,m));w=b,b=v,v=g,g=a(y,x),y=m,m=o,o=n,n=a(x,M)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],g),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],w)},g.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},QDfD:function(t,e){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},"R5/c":function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n,o=" ",s=t.level,a=t.dataLevel,u=t.schema[e],h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),f="valid"+s;if("#"==u||"#/"==u)t.isRoot?(r=t.async,n="validate"):(r=!0===t.root.schema.$async,n="root.refVal[0]");else{var A=t.resolveRef(t.baseId,u,t.isRoot);if(void 0===A){var p=t.MissingRefError.message(t.baseId,u);if("fail"==t.opts.missingRefs){t.logger.error(p),(g=g||[]).push(o),o="",!1!==t.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { ref: '"+t.util.escapeQuotes(u)+"' } ",!1!==t.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(u)+"' "),t.opts.verbose&&(o+=" , schema: "+t.util.toQuotedString(u)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),o+=" } "):o+=" {} ";var d=o;o=g.pop(),!t.compositeRule&&l?t.async?o+=" throw new ValidationError(["+d+"]); ":o+=" validate.errors = ["+d+"]; return false; ":o+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs)throw new t.MissingRefError(t.baseId,u,p);t.logger.warn(p),l&&(o+=" if (true) { ")}}else if(A.inline){var m=t.util.copy(t);m.level++;var y="valid"+m.level;m.schema=A.schema,m.schemaPath="",m.errSchemaPath=u,o+=" "+t.validate(m).replace(/validate\.schema/g,A.code)+" ",l&&(o+=" if ("+y+") { ")}else r=!0===A.$async||t.async&&!1!==A.$async,n=A.code}if(n){var g;(g=g||[]).push(o),o="",t.opts.passContext?o+=" "+n+".call(this, ":o+=" "+n+"( ",o+=" "+c+", (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath);var v=o+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?t.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),r){if(!t.async)throw new Error("async schema referenced by sync schema");l&&(o+=" var "+f+"; "),o+=" try { await "+v+"; ",l&&(o+=" "+f+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(o+=" "+f+" = false; "),o+=" } ",l&&(o+=" if ("+f+") { ")}else o+=" if (!"+v+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",l&&(o+=" else { ")}return o}},R6Ji:function(t,e,i){"use strict";var r=i("J1ES").MissingRef;t.exports=function t(e,i,n){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof i&&(n=i,i=void 0);var s=a(e).then(function(){var t=o._addSchema(e,void 0,i);return t.validate||function t(e){try{return o._compile(e)}catch(t){if(t instanceof r)return function n(t){var n=t.missingSchema;if(h(n))throw new Error("Schema "+n+" is loaded but "+t.missingRef+" cannot be resolved");var s=o._loadingSchemas[n];s||(s=o._loadingSchemas[n]=o._opts.loadSchema(n)).then(u,u);return s.then(function(t){if(!h(n))return a(t).then(function(){h(n)||o.addSchema(t,n,void 0,i)})}).then(function(){return function t(e){try{return o._compile(e)}catch(t){if(t instanceof r)return n(t);throw t}function n(r){var n=r.missingSchema;if(h(n))throw new Error("Schema "+n+" is loaded but "+r.missingRef+" cannot be resolved");var s=o._loadingSchemas[n];return s||(s=o._loadingSchemas[n]=o._opts.loadSchema(n)).then(u,u),s.then(function(t){if(!h(n))return a(t).then(function(){h(n)||o.addSchema(t,n,void 0,i)})}).then(function(){return t(e)});function u(){delete o._loadingSchemas[n]}function h(t){return o._refs[t]||o._schemas[t]}}}(e)});function u(){delete o._loadingSchemas[n]}function h(t){return o._refs[t]||o._schemas[t]}}(t);throw t}function n(r){var n=r.missingSchema;if(h(n))throw new Error("Schema "+n+" is loaded but "+r.missingRef+" cannot be resolved");var s=o._loadingSchemas[n];return s||(s=o._loadingSchemas[n]=o._opts.loadSchema(n)).then(u,u),s.then(function(t){if(!h(n))return a(t).then(function(){h(n)||o.addSchema(t,n,void 0,i)})}).then(function(){return t(e)});function u(){delete o._loadingSchemas[n]}function h(t){return o._refs[t]||o._schemas[t]}}}(t)});n&&s.then(function(t){n(null,t)},n);return s;function a(e){var i=e.$schema;return i&&!o.getSchema(i)?t.call(o,{$ref:i},!0):Promise.resolve()}}},Rt1F:function(t,e,i){"use strict";(function(e,r){var n=i("ypnx");t.exports=v;var o,s=i("sOR5");v.ReadableState=g;i("vzCy").EventEmitter;var a=function(t,e){return t.listeners(e).length},u=i("UcPO"),h=i("kkc6").Buffer,l=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c=Object.create(i("jOgh"));c.inherits=i("LC74");var f=i(3),A=void 0;A=f&&f.debuglog?f.debuglog("stream"):function(){};var p,d=i("+HRN"),m=i("x0Ha");c.inherits(v,u);var y=["error","close","destroy","pause","resume"];function g(t,e){o=o||i("DsFX"),t=t||{};var r=e instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i("X4X3").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function v(t){if(o=o||i("DsFX"),!(this instanceof v))return new v(t);this._readableState=new g(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,i,r,n){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,_(t)}(t,s)):(n||(o=function(t,e){var i;r=e,h.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var r;return i}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!i?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):B(t,s)):w(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&_(t)),B(t,e)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=h.from(t,e),e=""),i=!0),b(this,t,e,!1,i)},v.prototype.unshift=function(t){return b(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return p||(p=i("X4X3").StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var x=8388608;function M(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=x?t=x:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function _(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(A("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(S,t):S(t))}function S(t){A("emit readable"),t.emit("readable"),F(t)}function B(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(E,t,e))}function E(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(A("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function C(t){A("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(A("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),F(t),e.flowing&&!e.reading&&t.read(0)}function F(t){var e=t._readableState;for(A("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,r=1,n=i.data;t-=n.length;for(;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(s===o.length?n+=o:n+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(s));break}++r}return e.length-=r,n}(t,e):function(t,e){var i=h.allocUnsafe(t),r=e.head,n=1;r.data.copy(i),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,s),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}(t,e);return r}(t,e.buffer,e.decoder),i);var i}function O(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n.nextTick(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function R(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}v.prototype.read=function(t){A("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return A("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?O(this):_(this),null;if(0===(t=M(t,e))&&e.ended)return 0===e.length&&O(this),null;var r,n=e.needReadable;return A("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&A("length less than watermark",n=!0),e.ended||e.reading?A("reading or ended",n=!1):n&&(A("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=M(i,e))),null===(r=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&O(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,A("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:v;function h(e,r){A("onunpipe"),e===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,A("cleanup"),t.removeListener("close",y),t.removeListener("finish",g),t.removeListener("drain",c),t.removeListener("error",m),t.removeListener("unpipe",h),i.removeListener("end",l),i.removeListener("end",v),i.removeListener("data",d),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function l(){A("onend"),t.end()}o.endEmitted?n.nextTick(u):i.once("end",u),t.on("unpipe",h);var c=function(t){return function(){var e=t._readableState;A("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,F(t))}}(i);t.on("drain",c);var f=!1;var p=!1;function d(e){A("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==R(o.pipes,t))&&!f&&(A("false write response, pause",o.awaitDrain),o.awaitDrain++,p=!0),i.pause())}function m(e){A("onerror",e),v(),t.removeListener("error",m),0===a(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",g),v()}function g(){A("onfinish"),t.removeListener("close",y),v()}function v(){A("unpipe"),i.unpipe(t)}return i.on("data",d),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",m),t.once("close",y),t.once("finish",g),t.emit("pipe",i),o.flowing||(A("pipe resume"),i.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=R(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},v.prototype.on=function(t,e){var i=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):n.nextTick(C,this))}return i},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(A("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(T,t,e))}(this,t)),this},v.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",function(){if(A("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(n){(A("wrapped data"),i.decoder&&(n=i.decoder.write(n)),!i.objectMode||null!==n&&void 0!==n)&&((i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause())))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){A("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=P}).call(e,i("DuR2"),i("W2nU"))},RzOE:function(t,e,i){"use strict";var r=i("TkWM"),n=r.assert,o=r.parseBytes,s=r.cachedProperty;function a(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),s(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),s(a,"privBytes",function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r}),s(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),s(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),s(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(t){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},a.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=a},SAez:function(t,e,i){var r=e;r.der=i("ps4E"),r.pem=i("VqvS")},SDM6:function(t,e,i){t.exports=i("DsFX")},Sk8p:function(t,e,i){"use strict";var r=/^[a-z_$][a-z0-9_$-]*$/i,n=i("6Gb6"),o=i("wAvw");t.exports={add:function(t,e){var i=this.RULES;if(i.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!r.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var o=e.type;if(Array.isArray(o))for(var s=0;s<o.length;s++)u(t,o[s],e);else u(t,o,e);var a=e.metaSchema;a&&(e.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(a,!0))}function u(t,e,r){for(var o,s=0;s<i.length;s++){var a=i[s];if(a.type==e){o=a;break}}o||(o={type:e,rules:[]},i.push(o));var u={keyword:t,definition:r,custom:!0,code:n,implements:r.implements};o.rules.push(u),i.custom[t]=u}return i.keywords[t]=i.all[t]=!0,this},get:function(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1},remove:function(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var i=0;i<e.length;i++)for(var r=e[i].rules,n=0;n<r.length;n++)if(r[n].keyword==t){r.splice(n,1);break}return this},validate:function t(e,i){t.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(r(e))return!0;t.errors=r.errors;if(i)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}}},SsjP:function(t,e,i){var r=i("H2Pp"),n=i("X3l8").Buffer,o=i("4sPJ");function s(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var i=Math.ceil(e.length/16),o=t._cache.length;t._cache=n.concat([t._cache,n.allocUnsafe(16*i)]);for(var a=0;a<i;a++){var u=s(t),h=o+16*a;t._cache.writeUInt32BE(u[0],h+0),t._cache.writeUInt32BE(u[1],h+4),t._cache.writeUInt32BE(u[2],h+8),t._cache.writeUInt32BE(u[3],h+12)}var l=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,l)}},"Sx/w":function(t,e){},T70N:function(t,e,i){"use strict";var r=i("I+zu"),n=i("4aPv"),o=i("yasN"),s=i("LBph"),a=i("hBsI"),u=i("7oWD"),h=i("6drS"),l=i("FHrJ"),c=i("oyTM");t.exports=y,y.prototype.validate=function(t,e){var i;if("string"==typeof t){if(!(i=this.getSchema(t)))throw new Error('no schema with key or ref "'+t+'"')}else{var r=this._addSchema(t);i=r.validate||this._compile(r)}var n=i(e);!0!==i.$async&&(this.errors=i.errors);return n},y.prototype.compile=function(t,e){var i=this._addSchema(t,void 0,e);return i.validate||this._compile(i)},y.prototype.addSchema=function(t,e,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)this.addSchema(t[o],void 0,i,r);return this}var s=this._getId(t);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return M(this,e=n.normalizeId(e||s)),this._schemas[e]=this._addSchema(t,i,r,!0),this},y.prototype.addMetaSchema=function(t,e,i){return this.addSchema(t,e,i,!0),this},y.prototype.validateSchema=function(t,e){var i=t.$schema;if(void 0!==i&&"string"!=typeof i)throw new Error("$schema must be a string");if(!(i=i||this._opts.defaultMeta||(r=this,n=r._opts.meta,r._opts.defaultMeta="object"==typeof n?r._getId(n)||n:r.getSchema(p)?p:void 0,r._opts.defaultMeta)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r,n;var o=this.validate(i,t);if(!o&&e){var s="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(s);this.logger.error(s)}return o},y.prototype.getSchema=function(t){var e=g(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return function(t,e){var i=n.schema.call(t,{schema:{}},e);if(i){var o=i.schema,a=i.root,u=i.baseId,h=r.call(t,o,a,void 0,u);return t._fragments[e]=new s({ref:e,fragment:!0,schema:o,root:a,baseId:u,validate:h}),h}}(this,t)}},y.prototype.removeSchema=function(t){if(t instanceof RegExp)return v(this,this._schemas,t),v(this,this._refs,t),this;switch(typeof t){case"undefined":return v(this,this._schemas),v(this,this._refs),this._cache.clear(),this;case"string":var e=g(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var i=this._opts.serialize,r=i?i(t):t;this._cache.del(r);var o=this._getId(t);o&&(o=n.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},y.prototype.addFormat=function(t,e){"string"==typeof e&&(e=new RegExp(e));return this._formats[t]=e,this},y.prototype.errorsText=function(t,e){if(!(t=t||this.errors))return"No errors";for(var i=void 0===(e=e||{}).separator?", ":e.separator,r=void 0===e.dataVar?"data":e.dataVar,n="",o=0;o<t.length;o++){var s=t[o];s&&(n+=r+s.dataPath+" "+s.message+i)}return n.slice(0,-i.length)},y.prototype._addSchema=function(t,e,i,r){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema should be object or boolean");var o=this._opts.serialize,a=o?o(t):t,u=this._cache.get(a);if(u)return u;r=r||!1!==this._opts.addUsedSchema;var h=n.normalizeId(this._getId(t));h&&r&&M(this,h);var l,c=!1!==this._opts.validateSchema&&!e;c&&!(l=h&&h==n.normalizeId(t.$schema))&&this.validateSchema(t,!0);var f=n.ids.call(this,t),A=new s({id:h,schema:t,localRefs:f,cacheKey:a,meta:i});"#"!=h[0]&&r&&(this._refs[h]=A);this._cache.put(a,A),c&&l&&this.validateSchema(t,!0);return A},y.prototype._compile=function(t,e){if(t.compiling)return t.validate=o,o.schema=t.schema,o.errors=null,o.root=e||o,!0===t.schema.$async&&(o.$async=!0),o;var i,n;t.compiling=!0,t.meta&&(i=this._opts,this._opts=this._metaOpts);try{n=r.call(this,t.schema,e,t.localRefs)}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=i)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function o(){var e=t.validate,i=e.apply(this,arguments);return o.errors=e.errors,i}},y.prototype.compileAsync=i("R6Ji");var f=i("Sk8p");y.prototype.addKeyword=f.add,y.prototype.getKeyword=f.get,y.prototype.removeKeyword=f.remove,y.prototype.validateKeyword=f.validate;var A=i("J1ES");y.ValidationError=A.Validation,y.MissingRefError=A.MissingRef,y.$dataMetaSchema=l;var p="http://json-schema.org/draft-07/schema",d=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],m=["/properties"];function y(t){if(!(this instanceof y))return new y(t);t=this._opts=c.copy(t)||{},function(t){var e=t._opts.logger;if(!1===e)t.logger={log:_,warn:_,error:_};else{if(void 0===e&&(e=console),!("object"==typeof e&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=u(t.format),this._cache=t.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=h(),this._getId=function(t){switch(t.schemaId){case"auto":return x;case"id":return b;default:return w}}(t),t.loopRequired=t.loopRequired||1/0,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),void 0===t.serialize&&(t.serialize=a),this._metaOpts=function(t){for(var e=c.copy(t._opts),i=0;i<d.length;i++)delete e[d[i]];return e}(this),t.formats&&function(t){for(var e in t._opts.formats){var i=t._opts.formats[e];t.addFormat(e,i)}}(this),t.keywords&&function(t){for(var e in t._opts.keywords){var i=t._opts.keywords[e];t.addKeyword(e,i)}}(this),function(t){var e;t._opts.$data&&(e=i("xiFT"),t.addMetaSchema(e,e.$id,!0));if(!1===t._opts.meta)return;var r=i("GfdO");t._opts.$data&&(r=l(r,m));t.addMetaSchema(r,p,!0),t._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(t){var e=t._opts.schemas;if(!e)return;if(Array.isArray(e))t.addSchema(e);else for(var i in e)t.addSchema(e[i],i)}(this)}function g(t,e){return e=n.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}function v(t,e,i){for(var r in e){var n=e[r];n.meta||i&&!i.test(r)||(t._cache.del(n.cacheKey),delete e[r])}}function b(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function w(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function x(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function M(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function _(){}},"TWA+":function(t,e,i){(function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length>1){e[0]=e[0].slice(0,-1);for(var r=e.length-1,n=1;n<r;++n)e[n]=e[n].slice(1,-1);return e[r]=e[r].slice(1),e.join("")}return e[0]}function i(t){return"(?:"+t+")"}function r(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function n(t){return t.toUpperCase()}function o(t){var r=e("[0-9]","[A-Fa-f]"),n=i(i("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+i("%[89A-Fa-f]"+r+"%"+r+r)+"|"+i("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=e("[\\:\\/\\?\\#\\[\\]\\@]",o),a=t?"[\\uE000-\\uF8FF]":"[]",u=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=i("[A-Za-z]"+e("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),l=i(i(n+"|"+e(u,o,"[\\:]"))+"*"),c=(i(i("25[0-5]")+"|"+i("2[0-4][0-9]")+"|"+i("1[0-9][0-9]")+"|"+i("[1-9][0-9]")+"|[0-9]"),i(i("25[0-5]")+"|"+i("2[0-4][0-9]")+"|"+i("1[0-9][0-9]")+"|"+i("0?[1-9][0-9]")+"|0?0?[0-9]")),f=i(c+"\\."+c+"\\."+c+"\\."+c),A=i(r+"{1,4}"),p=i(i(A+"\\:"+A)+"|"+f),d=i([i(i(A+"\\:")+"{6}"+p),i("\\:\\:"+i(A+"\\:")+"{5}"+p),i(i(A)+"?\\:\\:"+i(A+"\\:")+"{4}"+p),i(i(i(A+"\\:")+"{0,1}"+A)+"?\\:\\:"+i(A+"\\:")+"{3}"+p),i(i(i(A+"\\:")+"{0,2}"+A)+"?\\:\\:"+i(A+"\\:")+"{2}"+p),i(i(i(A+"\\:")+"{0,3}"+A)+"?\\:\\:"+A+"\\:"+p),i(i(i(A+"\\:")+"{0,4}"+A)+"?\\:\\:"+p),i(i(i(A+"\\:")+"{0,5}"+A)+"?\\:\\:"+A),i(i(i(A+"\\:")+"{0,6}"+A)+"?\\:\\:")].join("|")),m=i(i(u+"|"+n)+"+"),y=(i(d+"\\%25"+m),i("\\["+i(i(d+i("\\%25|\\%(?!"+r+"{2})")+m)+"|"+d+"|"+i("[vV]"+r+"+\\."+e(u,o,"[\\:]")+"+"))+"\\]")),g=i(i(n+"|"+e(u,o))+"*"),v=i(y+"|"+f+"(?!"+g+")|"+g),b=i("[0-9]*"),w=i(i(l+"@")+"?"+v+i("\\:"+b)+"?"),x=i(n+"|"+e(u,o,"[\\:\\@]")),M=i(x+"*"),_=i(x+"+"),S=i(i(n+"|"+e(u,o,"[\\@]"))+"+"),B=i(i("\\/"+M)+"*"),E=i("\\/"+i(_+B)+"?"),C=i(S+B),T=i(_+B),F="(?!"+x+")",P=(i(B+"|"+E+"|"+C+"|"+T+"|"+F),i(i(x+"|"+e("[\\/\\?]",a))+"*")),O=i(i(x+"|[\\/\\?]")+"*"),D=i(i("\\/\\/"+w+B)+"|"+E+"|"+T+"|"+F);i(i(h+"\\:"+D+i("\\?"+P)+"?"+i("\\#"+O)+"?")+"|"+i(i(i("\\/\\/"+w+B)+"|"+E+"|"+C+"|"+F)+i("\\?"+P)+"?"+i("\\#"+O)+"?")),i(h+"\\:"+D+i("\\?"+P)+"?"),i(i("\\/\\/("+i("("+l+")@")+"?("+v+")"+i("\\:("+b+")")+"?)")+"?("+B+"|"+E+"|"+T+"|"+F+")"),i("\\?("+P+")"),i("\\#("+O+")"),i(i("\\/\\/("+i("("+l+")@")+"?("+v+")"+i("\\:("+b+")")+"?)")+"?("+B+"|"+E+"|"+C+"|"+F+")"),i("\\?("+P+")"),i("\\#("+O+")"),i(i("\\/\\/("+i("("+l+")@")+"?("+v+")"+i("\\:("+b+")")+"?)")+"?("+B+"|"+E+"|"+T+"|"+F+")"),i("\\?("+P+")"),i("\\#("+O+")"),i("("+l+")@"),i("\\:("+b+")");return{NOT_SCHEME:new RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(e("[^\\%]",u,o,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",u,s),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+d+")"+i(i("\\%25|\\%(?!"+r+"{2})")+"("+m+")")+"?\\]?$")}}var s=o(!1),a=o(!0),u=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=2147483647,l=/^xn--/,c=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function m(t){throw new RangeError(A[t])}function y(t,e){var i=t.split("@"),r="";i.length>1&&(r=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],r=t.length;r--;)i[r]=e(t[r]);return i}((t=t.replace(f,".")).split("."),e).join(".");return r+n}function g(t){for(var e=[],i=0,r=t.length;i<r;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&n)<<10)+(1023&o)+65536):(e.push(n),i--)}else e.push(n)}return e}var v=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},b=function(t,e,i){var r=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))},w=function(t){var e,i=[],r=t.length,n=0,o=128,s=72,a=t.lastIndexOf("-");a<0&&(a=0);for(var u=0;u<a;++u)t.charCodeAt(u)>=128&&m("not-basic"),i.push(t.charCodeAt(u));for(var l=a>0?a+1:0;l<r;){for(var c=n,f=1,A=36;;A+=36){l>=r&&m("invalid-input");var d=(e=t.charCodeAt(l++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(d>=36||d>p((h-n)/f))&&m("overflow"),n+=d*f;var y=A<=s?1:A>=s+26?26:A-s;if(d<y)break;var g=36-y;f>p(h/g)&&m("overflow"),f*=g}var v=i.length+1;s=b(n-c,v,0==c),p(n/v)>h-o&&m("overflow"),o+=p(n/v),n%=v,i.splice(n++,0,o)}return String.fromCodePoint.apply(String,i)},x=function(t){var e=[],i=(t=g(t)).length,r=128,n=0,o=72,s=!0,a=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var f=l.value;f<128&&e.push(d(f))}}catch(t){a=!0,u=t}finally{try{!s&&c.return&&c.return()}finally{if(a)throw u}}var A=e.length,y=A;for(A&&e.push("-");y<i;){var w=h,x=!0,M=!1,_=void 0;try{for(var S,B=t[Symbol.iterator]();!(x=(S=B.next()).done);x=!0){var E=S.value;E>=r&&E<w&&(w=E)}}catch(t){M=!0,_=t}finally{try{!x&&B.return&&B.return()}finally{if(M)throw _}}var C=y+1;w-r>p((h-n)/C)&&m("overflow"),n+=(w-r)*C,r=w;var T=!0,F=!1,P=void 0;try{for(var O,D=t[Symbol.iterator]();!(T=(O=D.next()).done);T=!0){var R=O.value;if(R<r&&++n>h&&m("overflow"),R==r){for(var I=n,U=36;;U+=36){var L=U<=o?1:U>=o+26?26:U-o;if(I<L)break;var k=I-L,j=36-L;e.push(d(v(L+k%j,0))),I=p(k/j)}e.push(d(v(I,0))),o=b(n,C,y==A),n=0,++y}}}catch(t){F=!0,P=t}finally{try{!T&&D.return&&D.return()}finally{if(F)throw P}}++n,++r}return e.join("")},M={version:"2.1.0",ucs2:{decode:g,encode:function(t){return String.fromCodePoint.apply(String,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(t))}},decode:w,encode:x,toASCII:function(t){return y(t,function(t){return c.test(t)?"xn--"+x(t):t})},toUnicode:function(t){return y(t,function(t){return l.test(t)?w(t.slice(4).toLowerCase()):t})}},_={};function S(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function B(t){for(var e="",i=0,r=t.length;i<r;){var n=parseInt(t.substr(i+1,2),16);if(n<128)e+=String.fromCharCode(n),i+=3;else if(n>=194&&n<224){if(r-i>=6){var o=parseInt(t.substr(i+4,2),16);e+=String.fromCharCode((31&n)<<6|63&o)}else e+=t.substr(i,6);i+=6}else if(n>=224){if(r-i>=9){var s=parseInt(t.substr(i+4,2),16),a=parseInt(t.substr(i+7,2),16);e+=String.fromCharCode((15&n)<<12|(63&s)<<6|63&a)}else e+=t.substr(i,9);i+=9}else e+=t.substr(i,3),i+=3}return e}function E(t,e){function i(t){var i=B(t);return i.match(e.UNRESERVED)?i:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,i).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,i).replace(e.NOT_USERINFO,S).replace(e.PCT_ENCODED,n)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,i).toLowerCase().replace(e.NOT_HOST,S).replace(e.PCT_ENCODED,n)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,i).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,S).replace(e.PCT_ENCODED,n)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,i).replace(e.NOT_QUERY,S).replace(e.PCT_ENCODED,n)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,i).replace(e.NOT_FRAGMENT,S).replace(e.PCT_ENCODED,n)),t}function C(t){return t.replace(/^0*(.*)/,"$1")||"0"}function T(t,e){var i=t.match(e.IPV4ADDRESS)||[],r=u(i,2)[1];return r?r.split(".").map(C).join("."):t}function F(t,e){var i=t.match(e.IPV6ADDRESS)||[],r=u(i,3),n=r[1],o=r[2];if(n){for(var s=n.toLowerCase().split("::").reverse(),a=u(s,2),h=a[0],l=a[1],c=l?l.split(":").map(C):[],f=h.split(":").map(C),A=e.IPV4ADDRESS.test(f[f.length-1]),p=A?7:8,d=f.length-p,m=Array(p),y=0;y<p;++y)m[y]=c[y]||f[d+y]||"";A&&(m[p-1]=T(m[p-1],e));var g=m.reduce(function(t,e,i){if(!e||"0"===e){var r=t[t.length-1];r&&r.index+r.length===i?r.length++:t.push({index:i,length:1})}return t},[]).sort(function(t,e){return e.length-t.length})[0],v=void 0;if(g&&g.length>1){var b=m.slice(0,g.index),w=m.slice(g.index+g.length);v=b.join(":")+"::"+w.join(":")}else v=m.join(":");return o&&(v+="%"+o),v}return t}var P=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,O=void 0==="".match(/(){0}/)[1];function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},r=!1!==e.iri?a:s;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var n=t.match(P);if(n){O?(i.scheme=n[1],i.userinfo=n[3],i.host=n[4],i.port=parseInt(n[5],10),i.path=n[6]||"",i.query=n[7],i.fragment=n[8],isNaN(i.port)&&(i.port=n[5])):(i.scheme=n[1]||void 0,i.userinfo=-1!==t.indexOf("@")?n[3]:void 0,i.host=-1!==t.indexOf("//")?n[4]:void 0,i.port=parseInt(n[5],10),i.path=n[6]||"",i.query=-1!==t.indexOf("?")?n[7]:void 0,i.fragment=-1!==t.indexOf("#")?n[8]:void 0,isNaN(i.port)&&(i.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),i.host&&(i.host=F(T(i.host,r),r)),void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||i.path||void 0!==i.query?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==i.reference&&(i.error=i.error||"URI is not a "+e.reference+" reference.");var o=_[(e.scheme||i.scheme||"").toLowerCase()];if(e.unicodeSupport||o&&o.unicodeSupport)E(i,r);else{if(i.host&&(e.domainHost||o&&o.domainHost))try{i.host=M.toASCII(i.host.replace(r.PCT_ENCODED,B).toLowerCase())}catch(t){i.error=i.error||"Host's domain name can not be converted to ASCII via punycode: "+t}E(i,s)}o&&o.parse&&o.parse(i,e)}else i.error=i.error||"URI can not be parsed.";return i}var R=/^\.\.?\//,I=/^\/\.(\/|$)/,U=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function k(t){for(var e=[];t.length;)if(t.match(R))t=t.replace(R,"");else if(t.match(I))t=t.replace(I,"/");else if(t.match(U))t=t.replace(U,"/"),e.pop();else if("."===t||".."===t)t="";else{var i=t.match(L);if(!i)throw new Error("Unexpected dot segment condition");var r=i[0];t=t.slice(r.length),e.push(r)}return e.join("")}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.iri?a:s,r=[],n=_[(e.scheme||t.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(t,e),t.host)if(i.IPV6ADDRESS.test(t.host));else if(e.domainHost||n&&n.domainHost)try{t.host=e.iri?M.toUnicode(t.host):M.toASCII(t.host.replace(i.PCT_ENCODED,B).toLowerCase())}catch(i){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+i}E(t,i),"suffix"!==e.reference&&t.scheme&&(r.push(t.scheme),r.push(":"));var o=function(t,e){var i=!1!==e.iri?a:s,r=[];return void 0!==t.userinfo&&(r.push(t.userinfo),r.push("@")),void 0!==t.host&&r.push(F(T(String(t.host),i),i).replace(i.IPV6ADDRESS,function(t,e,i){return"["+e+(i?"%25"+i:"")+"]"})),"number"!=typeof t.port&&"string"!=typeof t.port||(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}(t,e);if(void 0!==o&&("suffix"!==e.reference&&r.push("//"),r.push(o),t.path&&"/"!==t.path.charAt(0)&&r.push("/")),void 0!==t.path){var u=t.path;e.absolutePath||n&&n.absolutePath||(u=k(u)),void 0===o&&(u=u.replace(/^\/\//,"/%2F")),r.push(u)}return void 0!==t.query&&(r.push("?"),r.push(t.query)),void 0!==t.fragment&&(r.push("#"),r.push(t.fragment)),r.join("")}function Q(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(t=D(j(t,i),i),e=D(j(e,i),i)),!(i=i||{}).tolerant&&e.scheme?(r.scheme=e.scheme,r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=k(e.path||""),r.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=k(e.path||""),r.query=e.query):(e.path?("/"===e.path.charAt(0)?r.path=k(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?r.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:r.path=e.path:r.path="/"+e.path,r.path=k(r.path)),r.query=e.query):(r.path=t.path,void 0!==e.query?r.query=e.query:r.query=t.query),r.userinfo=t.userinfo,r.host=t.host,r.port=t.port),r.scheme=t.scheme),r.fragment=e.fragment,r}function N(t,e){return t&&t.toString().replace(e&&e.iri?a.PCT_ENCODED:s.PCT_ENCODED,B)}var z={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){var i="https"===String(t.scheme).toLowerCase();return t.port!==(i?443:80)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},H={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize};function V(t){return"boolean"==typeof t.secure?t.secure:"wss"===String(t.scheme).toLowerCase()}var G={scheme:"ws",domainHost:!0,parse:function(t,e){var i=t;return i.secure=V(i),i.resourceName=(i.path||"/")+(i.query?"?"+i.query:""),i.path=void 0,i.query=void 0,i},serialize:function(t,e){if(t.port!==(V(t)?443:80)&&""!==t.port||(t.port=void 0),"boolean"==typeof t.secure&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){var i=t.resourceName.split("?"),r=u(i,2),n=r[0],o=r[1];t.path=n&&"/"!==n?n:void 0,t.query=o,t.resourceName=void 0}return t.fragment=void 0,t}},K={scheme:"wss",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},Y={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",W="[0-9A-Fa-f]",q=i(i("%[EFef][0-9A-Fa-f]%"+W+W+"%"+W+W)+"|"+i("%[89A-Fa-f][0-9A-Fa-f]%"+W+W)+"|"+i("%"+W+W)),Z=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(X,"g"),$=new RegExp(q,"g"),tt=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Z),"g"),et=new RegExp(e("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),it=et;function rt(t){var e=B(t);return e.match(J)?e:t}var nt={scheme:"mailto",parse:function(t,e){var i=t,r=i.to=i.path?i.path.split(","):[];if(i.path=void 0,i.query){for(var n=!1,o={},s=i.query.split("&"),a=0,u=s.length;a<u;++a){var h=s[a].split("=");switch(h[0]){case"to":for(var l=h[1].split(","),c=0,f=l.length;c<f;++c)r.push(l[c]);break;case"subject":i.subject=N(h[1],e);break;case"body":i.body=N(h[1],e);break;default:n=!0,o[N(h[0],e)]=N(h[1],e)}}n&&(i.headers=o)}i.query=void 0;for(var A=0,p=r.length;A<p;++A){var d=r[A].split("@");if(d[0]=N(d[0]),e.unicodeSupport)d[1]=N(d[1],e).toLowerCase();else try{d[1]=M.toASCII(N(d[1],e).toLowerCase())}catch(t){i.error=i.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}r[A]=d.join("@")}return i},serialize:function(t,e){var i,r=t,o=void 0!==(i=t.to)&&null!==i?i instanceof Array?i:"number"!=typeof i.length||i.split||i.setInterval||i.call?[i]:Array.prototype.slice.call(i):[];if(o){for(var s=0,a=o.length;s<a;++s){var u=String(o[s]),h=u.lastIndexOf("@"),l=u.slice(0,h).replace($,rt).replace($,n).replace(tt,S),c=u.slice(h+1);try{c=e.iri?M.toUnicode(c):M.toASCII(N(c,e).toLowerCase())}catch(t){r.error=r.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}o[s]=l+"@"+c}r.path=o.join(",")}var f=t.headers=t.headers||{};t.subject&&(f.subject=t.subject),t.body&&(f.body=t.body);var A=[];for(var p in f)f[p]!==Y[p]&&A.push(p.replace($,rt).replace($,n).replace(et,S)+"="+f[p].replace($,rt).replace($,n).replace(it,S));return A.length&&(r.query=A.join("&")),r}},ot=/^([^\:]+)\:(.*)/,st={scheme:"urn",parse:function(t,e){var i=t.path&&t.path.match(ot),r=t;if(i){var n=e.scheme||r.scheme||"urn",o=i[1].toLowerCase(),s=i[2],a=n+":"+(e.nid||o),u=_[a];r.nid=o,r.nss=s,r.path=void 0,u&&(r=u.parse(r,e))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(t,e){var i=e.scheme||t.scheme||"urn",r=t.nid,n=i+":"+(e.nid||r),o=_[n];o&&(t=o.serialize(t,e));var s=t,a=t.nss;return s.path=(r||e.nid)+":"+a,s}},at=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ut={scheme:"urn:uuid",parse:function(t,e){var i=t;return i.uuid=i.nss,i.nss=void 0,e.tolerant||i.uuid&&i.uuid.match(at)||(i.error=i.error||"UUID is not valid."),i},serialize:function(t,e){var i=t;return i.nss=(t.uuid||"").toLowerCase(),i}};_[z.scheme]=z,_[H.scheme]=H,_[G.scheme]=G,_[K.scheme]=K,_[nt.scheme]=nt,_[st.scheme]=st,_[ut.scheme]=ut,t.SCHEMES=_,t.pctEncChar=S,t.pctDecChars=B,t.parse=D,t.removeDotSegments=k,t.serialize=j,t.resolveComponents=Q,t.resolve=function(t,e,i){var r=function(t,e){var i=t;if(e)for(var r in e)i[r]=e[r];return i}({scheme:"null"},i);return j(Q(D(t,r),D(e,r),r,!0),r)},t.normalize=function(t,e){return"string"==typeof t?t=j(D(t,e),e):"object"===r(t)&&(t=D(j(t,e),e)),t},t.equal=function(t,e,i){return"string"==typeof t?t=j(D(t,i),i):"object"===r(t)&&(t=j(t,i)),"string"==typeof e?e=j(D(e,i),i):"object"===r(e)&&(e=j(e,i)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?a.ESCAPE:s.ESCAPE,S)},t.unescapeComponent=N,Object.defineProperty(t,"__esModule",{value:!0})})(e)},TkWM:function(t,e,i){"use strict";var r=e,n=i("YP8Q"),o=i("08Lv"),s=i("tpuU");r.assert=o,r.toArray=s.toArray,r.zero2=s.zero2,r.toHex=s.toHex,r.encode=s.encode,r.getNAF=function(t,e,i){var r,n=new Array(Math.max(t.bitLength(),i)+1);for(r=0;r<n.length;r+=1)n[r]=0;var o=1<<e+1,s=t.clone();for(r=0;r<n.length;r++){var a,u=s.andln(o-1);s.isOdd()?(a=u>(o>>1)-1?(o>>1)-u:u,s.isubn(a)):a=0,n[r]=a,s.iushrn(1)}return n},r.getJSF=function(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var r,n=0,o=0;t.cmpn(-n)>0||e.cmpn(-o)>0;){var s,a,u=t.andln(3)+n&3,h=e.andln(3)+o&3;3===u&&(u=-1),3===h&&(h=-1),s=0==(1&u)?0:3!=(r=t.andln(7)+n&7)&&5!==r||2!==h?u:-u,i[0].push(s),a=0==(1&h)?0:3!=(r=e.andln(7)+o&7)&&5!==r||2!==u?h:-h,i[1].push(a),2*n===s+1&&(n=1-n),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return i},r.cachedProperty=function(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new n(t,"hex","le")}},TnCn:function(t,e,i){var r=e;r._reverse=function(t){var e={};return Object.keys(t).forEach(function(i){(0|i)==i&&(i|=0);var r=t[i];e[r]=i}),e},r.der=i("C1C2")},Tvr9:function(t,e,i){var r;r=function(){return e=[function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return"symbol"===r(t=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==r(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(n.key),n)}}i.r(e);for(var o=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=i}var e,i;return e=t,(i=[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,i=this.y;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var i=Math.cos(e),r=(e=Math.sin(e),this.x-t.x),n=this.y-t.y;return this.x=r*i-n*e+t.x,this.y=r*e+n*i+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}])&&n(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),s=[],a=0;a<256;a++)s[a]=(a<16?"0":"")+a.toString(16);var u=1234567,h={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(s[255&t]+s[t>>8&255]+s[t>>16&255]+s[t>>24&255]+"-"+s[255&e]+s[e>>8&255]+"-"+s[e>>16&15|64]+s[e>>24&255]+"-"+s[63&i|128]+s[i>>8&255]+"-"+s[i>>16&255]+s[i>>24&255]+s[255&r]+s[r>>8&255]+s[r>>16&255]+s[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((u=16807*(u=void 0!==t?t%2147483647:u)%2147483647)-1)/2147483646},degToRad:function(t){return t*h.DEG2RAD},radToDeg:function(t){return t*h.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var o=Math.cos,s=Math.sin,a=o(i/2),u=s(i/2),h=o((e+r)/2),l=s((e+r)/2),c=o((e-r)/2),f=s((e-r)/2),A=o((r-e)/2),p=s((r-e)/2);switch(n){case"XYX":t.set(a*l,u*c,u*f,a*h);break;case"YZY":t.set(u*f,a*l,u*c,a*h);break;case"ZXZ":t.set(u*c,u*f,a*l,a*h);break;case"XZX":t.set(a*l,u*p,u*A,a*h);break;case"YXY":t.set(u*A,a*l,u*p,a*h);break;case"ZYZ":t.set(u*p,u*A,a*l,a*h)}}};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===l(t=function(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==l(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===f(t=function(t,e){if("object"!==f(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==f(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}i=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isQuaternion",{value:!0}),this.h=e,this.u=i,this.v=r,this.M=n}var e,i,r;return e=t,r=[{key:"slerp",value:function(t,e,i,r){return i.copy(t).slerp(e,r)}},{key:"slerpFlat",value:function(t,e,i,r,n,o,s){var a,u,h,l=i[r+0],c=i[r+1],f=i[r+2],A=(i=i[r+3],r=n[o+0],n[o+1]),p=n[o+2];i===(n=n[o+3])&&l===r&&c===A&&f===p||(o=1-s,a=0<=(u=l*r+c*A+f*p+i*n)?1:-1,(h=1-u*u)>Number.EPSILON&&(h=Math.sqrt(h),u=Math.atan2(h,u*a),o=Math.sin(o*u)/h,s=Math.sin(s*u)/h),l=l*o+r*(u=s*a),c=c*o+A*u,f=f*o+p*u,i=i*o+n*u,o===1-s&&(l*=h=1/Math.sqrt(l*l+c*c+f*f+i*i),c*=h,f*=h,i*=h)),t[e]=l,t[e+1]=c,t[e+2]=f,t[e+3]=i}},{key:"multiplyQuaternionsFlat",value:function(t,e,i,r,n,o){var s=i[r],a=i[r+1],u=i[r+2],h=(i=i[r+3],r=n[o],n[o+1]),l=n[o+2];n=n[o+3];return t[e]=s*n+i*r+a*l-u*h,t[e+1]=a*n+i*h+u*r-s*l,t[e+2]=u*n+i*l+s*h-a*r,t[e+3]=i*n-s*r-a*h-u*l,t}}],(i=[{key:"x",get:function(){return this.h},set:function(t){this.h=t,this.k()}},{key:"y",get:function(){return this.u},set:function(t){this.u=t,this.k()}},{key:"z",get:function(){return this.v},set:function(t){this.v=t,this.k()}},{key:"w",get:function(){return this.M},set:function(t){this.M=t,this.k()}},{key:"set",value:function(t,e,i,r){return this.h=t,this.u=e,this.v=i,this.M=r,this.k(),this}},{key:"clone",value:function(){return new this.constructor(this.h,this.u,this.v,this.M)}},{key:"copy",value:function(t){return this.h=t.x,this.u=t.y,this.v=t.z,this.M=t.w,this.k(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t.h,r=t.u,n=t.v,o=t._order,s=(t=Math.cos,Math.sin),a=t(i/2),u=t(r/2),h=t(n/2),l=s(i/2),c=s(r/2),f=s(n/2);switch(o){case"XYZ":this.h=l*u*h+a*c*f,this.u=a*c*h-l*u*f,this.v=a*u*f+l*c*h,this.M=a*u*h-l*c*f;break;case"YXZ":this.h=l*u*h+a*c*f,this.u=a*c*h-l*u*f,this.v=a*u*f-l*c*h,this.M=a*u*h+l*c*f;break;case"ZXY":this.h=l*u*h-a*c*f,this.u=a*c*h+l*u*f,this.v=a*u*f+l*c*h,this.M=a*u*h-l*c*f;break;case"ZYX":this.h=l*u*h-a*c*f,this.u=a*c*h+l*u*f,this.v=a*u*f-l*c*h,this.M=a*u*h+l*c*f;break;case"YZX":this.h=l*u*h+a*c*f,this.u=a*c*h+l*u*f,this.v=a*u*f-l*c*h,this.M=a*u*h-l*c*f;break;case"XZY":this.h=l*u*h-a*c*f,this.u=a*c*h-l*u*f,this.v=a*u*f+l*c*h,this.M=a*u*h+l*c*f}return!1!==e&&this.k(),this}},{key:"setFromAxisAngle",value:function(t,e){e/=2;var i=Math.sin(e);return this.h=t.x*i,this.u=t.y*i,this.v=t.z*i,this.M=Math.cos(e),this.k(),this}},{key:"setFromRotationMatrix",value:function(t){var e=(t=t.elements)[0],i=t[4],r=t[8],n=t[1],o=t[5],s=t[9],a=t[2],u=t[6],h=e+o+(t=t[10]);return 0<h?(h=.5/Math.sqrt(h+1),this.M=.25/h,this.h=(u-s)*h,this.u=(r-a)*h,this.v=(n-i)*h):o<e&&t<e?(h=2*Math.sqrt(1+e-o-t),this.M=(u-s)/h,this.h=.25*h,this.u=(i+n)/h,this.v=(r+a)/h):t<o?(h=2*Math.sqrt(1+o-e-t),this.M=(r-a)/h,this.h=(i+n)/h,this.u=.25*h,this.v=(s+u)/h):(h=2*Math.sqrt(1+t-e-o),this.M=(n-i)/h,this.h=(r+a)/h,this.u=(s+u)/h,this.v=.25*h),this.k(),this}},{key:"setFromUnitVectors",value:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.h=-t.y,this.u=t.x,this.v=0):(this.h=0,this.u=-t.z,this.v=t.y)):(this.h=t.y*e.z-t.z*e.y,this.u=t.z*e.x-t.x*e.z,this.v=t.x*e.y-t.y*e.x),this.M=i,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(h.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var i=this.angleTo(t);return 0!==i&&(e=Math.min(1,e/i),this.slerp(t,e)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.h*=-1,this.u*=-1,this.v*=-1,this.k(),this}},{key:"dot",value:function(t){return this.h*t.h+this.u*t.u+this.v*t.v+this.M*t.M}},{key:"lengthSq",value:function(){return this.h*this.h+this.u*this.u+this.v*this.v+this.M*this.M}},{key:"length",value:function(){return Math.sqrt(this.h*this.h+this.u*this.u+this.v*this.v+this.M*this.M)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.h=0,this.u=0,this.v=0,this.M=1):(this.h=this.h*(t=1/t),this.u=this.u*t,this.v=this.v*t,this.M=this.M*t),this.k(),this}},{key:"multiply",value:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var i=t.h,r=t.u,n=t.v,o=(t=t.M,e.h),s=e.u,a=e.v;e=e.M;return this.h=i*e+t*o+r*a-n*s,this.u=r*e+t*s+n*o-i*a,this.v=n*e+t*a+i*s-r*o,this.M=t*e-i*o-r*s-n*a,this.k(),this}},{key:"slerp",value:function(t,e){if(0!==e){if(1===e)return this.copy(t);var i,r=this.h,n=this.u,o=this.v,s=this.M,a=s*t.M+r*t.h+n*t.u+o*t.v;a<0?(this.M=-t.M,this.h=-t.h,this.u=-t.u,this.v=-t.v,a=-a):this.copy(t),1<=a?(this.M=s,this.h=r,this.u=n,this.v=o):((t=1-a*a)<=Number.EPSILON?(this.M=(i=1-e)*s+e*this.M,this.h=i*r+e*this.h,this.u=i*n+e*this.u,this.v=i*o+e*this.v,this.normalize()):(i=Math.sqrt(t),t=Math.atan2(i,a),a=Math.sin((1-e)*t)/i,e=Math.sin(e*t)/i,this.M=s*a+this.M*e,this.h=r*a+this.h*e,this.u=n*a+this.u*e,this.v=o*a+this.v*e),this.k())}return this}},{key:"equals",value:function(t){return t.h===this.h&&t.u===this.u&&t.v===this.v&&t.M===this.M}},{key:"fromArray",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.h=t[e],this.u=t[e+1],this.v=t[e+2],this.M=t[e+3],this.k(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.h,t[e+1]=this.u,t[e+2]=this.v,t[e+3]=this.M,t}},{key:"fromBufferAttribute",value:function(t,e){return this.h=t.getX(e),this.u=t.getY(e),this.v=t.getZ(e),this.M=t.getW(e),this}},{key:"_onChange",value:function(t){return this.k=t,this}},{key:"_onChangeCallback",value:function(){}}])&&c(e.prototype,i),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var p=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=i,this.z=r}var e,i;return e=t,(i=[{key:"set",value:function(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler,this.applyQuaternion(m.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(m.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,i=this.y,r=this.z,n=1/((t=t.elements)[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this}},{key:"applyQuaternion",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,o=t.y,s=t.z,a=(t=t.w)*e+o*r-s*i,u=t*i+s*e-n*r,h=t*r+n*i-o*e;e=-n*e-o*i-s*r;return this.x=a*t+e*-n+u*-s-h*-o,this.y=u*t+e*-o+h*-n-a*-s,this.z=h*t+e*-s+a*-o-u*-n,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}},{key:"cross",value:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var i=t.x,r=t.y,n=(t=t.z,e.x),o=e.y;e=e.z;return this.x=r*e-t*o,this.y=t*n-i*e,this.z=i*o-r*n,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))}},{key:"projectOnPlane",value:function(t){return d.copy(this).projectOnVector(t),this.sub(d)}},{key:"reflect",value:function(t){return this.sub(d.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(h.clamp(t,-1,1)))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}])&&A(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),d=new p,m=new i,y=function(t,e,i){i=i||2;var r,n,o,s,a,u=e&&e.length,h=u?e[0]*i:t.length,l=g(t,0,h,i,!0),c=[];if(l&&l.next!==l.prev){if(u&&(l=function(t,e,i,r){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=g(t,s=e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(function(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}(s));for(a.sort(b),n=0;n<a.length;n++)!function(t,e){(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&s<a){if((s=a)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!i)return null;if(n!==s){var u,h=i,l=i.x,c=i.y,f=1/0;for(r=i;n>=r.x&&r.x>=l&&n!==r.x&&x(o<c?n:s,o,l,c,o<c?s:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),C(r,t))&&(u<f||u===f&&(r.x>i.x||r.x===i.x&&function(t,e){return M(t.prev,t,e.prev)<0&&M(e.next,t,t.next)<0}(i,r)))&&(i=r,f=u),(r=r.next)!==h;);}return i}(t,e))&&(t=T(e,t),v(e,e.next),v(t,t.next))}(a[n],i),i=v(i,i.next);return i}(t,e,l,i)),t.length>80*i){for(var f=r=t[0],A=n=t[1],p=i;p<h;p+=i)(o=t[p])<f&&(f=o),(s=t[p+1])<A&&(A=s),r<o&&(r=o),n<s&&(n=s);a=0!==(a=Math.max(r-f,n-A))?1/a:0}!function t(e,i,r,n,o,s,a){if(e){if(!a&&s){for(var u=e,h=n,l=o,c=s,f=u;null===f.z&&(f.z=w(f.x,f.y,h,l,c)),f.prevZ=f.prev,f.nextZ=f.next,(f=f.next)!==u;);f.prevZ.nextZ=null,f.prevZ=null;var A,p,d,m,y,g,b,B,E=f,F=1;do{for(p=E,y=E=null,g=0;p;){for(g++,d=p,A=b=0;A<F&&(b++,d=d.nextZ);A++);for(B=F;0<b||0<B&&d;)0!==b&&(0===B||!d||p.z<=d.z)?(p=(m=p).nextZ,b--):(d=(m=d).nextZ,B--),y?y.nextZ=m:E=m,m.prevZ=y,y=m;p=d}}while(y.nextZ=null,F*=2,1<g)}for(var O,D,R=e;e.prev!==e.next;)if(O=e.prev,D=e.next,s?function(t,e,i,r){var n=t.prev,o=t,s=t.next;if(!(0<=M(n,o,s))){for(var a=(n.x<o.x?n.x<s.x?n:s:o.x<s.x?o:s).x,u=(n.y<o.y?n.y<s.y?n:s:o.y<s.y?o:s).y,h=(n.x>o.x?n.x>s.x?n:s:o.x>s.x?o:s).x,l=(n.y>o.y?n.y>s.y?n:s:o.y>s.y?o:s).y,c=w(a,u,e,i,r),f=w(h,l,e,i,r),A=t.prevZ,p=t.nextZ;A&&A.z>=c&&p&&p.z<=f;){if(A!==t.prev&&A!==t.next&&x(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=M(A.prev,A,A.next))return;if(A=A.prevZ,p!==t.prev&&p!==t.next&&x(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=M(p.prev,p,p.next))return;p=p.nextZ}for(;A&&A.z>=c;){if(A!==t.prev&&A!==t.next&&x(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=M(A.prev,A,A.next))return;A=A.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&x(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=M(p.prev,p,p.next))return;p=p.nextZ}return 1}}(e,n,o,s):function(t){var e=t.prev,i=t,r=t.next;if(!(0<=M(e,i,r))){for(var n=t.next.next;n!==t.prev;){if(x(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=M(n.prev,n,n.next))return;n=n.next}return 1}}(e))i.push(O.i/r),i.push(e.i/r),i.push(D.i/r),P(e),e=D.next,R=D.next;else if((e=D)===R){a?1===a?t(e=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next}while(!_(n,o)&&S(n,r,r.next,o)&&C(n,o)&&C(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),P(r),P(r.next),r=t=o),(r=r.next)!==t);return v(r)}(v(e),i,r),i,r,n,o,s,2):2===a&&function(e,i,r,n,o,s){var a=e;do{for(var u,h=a.next.next;h!==a.prev;){if(a.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&S(i,i.next,t,e))return 1}while((i=i.next)!==t)}(t,e)&&(C(t,e)&&C(e,t)&&function(t,e){for(var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),(i=i.next)!==t;);return r}(t,e)&&(M(t.prev,t,e.prev)||M(t,e.prev,e))||_(t,e)&&0<M(t.prev,t,t.next)&&0<M(e.prev,e,e.next))}(a,h))return u=T(a,h),a=v(a,a.next),u=v(u,u.next),t(a,i,r,n,o,s),t(u,i,r,n,o,s);h=h.next}}while((a=a.next)!==e)}(e,i,r,n,o,s):t(v(e),i,r,n,o,s,1);break}}}(l,c,i,f,A,a)}return c};function g(t,e,i,r,n){var o,s;if(n===0<function(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}(t,e,i,r))for(o=e;o<i;o+=r)s=F(o,t[o],t[o+1],s);else for(o=i-r;e<=o;o-=r)s=F(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(P(s),s=s.next),s}function v(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!_(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{if(P(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function b(t,e){return t.x-e.x}function w(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function x(t,e,i,r,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(i-s)*(e-a)&&0<=(i-s)*(o-a)-(n-s)*(r-a)}function M(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,i,r){var n=E(M(t,e,i)),o=E(M(t,e,r)),s=E(M(i,r,t)),a=E(M(i,r,e));return n!==o&&s!==a||0===n&&B(t,i,e)||0===o&&B(t,r,e)||0===s&&B(i,t,r)||!(0!==a||!B(i,e,r))}function B(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function E(t){return 0<t?1:t<0?-1:0}function C(t,e){return M(t.prev,t,t.next)<0?0<=M(t,e,t.next)&&0<=M(t,t.prev,e):M(t,e,t.prev)<0||M(t,t.next,e)<0}function T(t,e){var i=new O(t.i,t.x,t.y),r=new O(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function F(t,e,i,r){return t=new O(t,e,i),r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(t){return function(t){if(Array.isArray(t))return R(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?R(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?R(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var I={area:function(t){for(var e=t.length,i=0,r=e-1,n=0;n<e;r=n++)i+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*i},isClockWise:function(t){return I.area(t)<0},triangulateShape:function(t,e){var i=[],r=[],n=[],o=(U(t),L(i,t),t.length);e.forEach(U);for(var s=0;s<e.length;s++)r.push(o),o+=e[s].length,L(i,e[s]);for(var a=y(i,r),u=0;u<a.length;u+=3)n.push(a.slice(u,u+3));return n},triangulate:function(t){(n=[]).push.apply(n,D(t[0]));for(var e=[],i=1;i<t.length;i++){var r=[];r.push.apply(r,D(t[i])),e.push(r)}if(!I.isClockWise(n))for(var n=n.reverse(),o=0,s=e.length;o<s;o++){var a=e[o];I.isClockWise(a)&&(e[o]=a.reverse())}return I.triangulateShape(n,e)}};function U(t){var e,i=t.length;2<i&&(i=t[i-1],e=t[0],i.x===e.x)&&i.y===e.y&&t.pop()}function L(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===k(t=function(t,e){if("object"!==k(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==k(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Q=1e-5,N=.001,z=Math.PI/180,H=180/Math.PI;i=function(t,e,i){return e&&j(t.prototype,e),i&&j(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(i.prototype,{g:function(){return Q},_:function(){return z},S:function(){return H},j:function(t){return t<Q&&-Q<t},T:function(t){return Q<t},O:function(t){return t<-Q},P:function(t,e,i){return e=(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y),Math.abs(e)<Q?0:e},distanceOfTwoPoints:function(t,e){return t&&e?Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)):Number.NaN},distance:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},isPolygonContainPoint:function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].x,o=t[r].y,s=0,a=(r<t.length-1?(s=t[r+1].x,t[r+1]):(s=t[0].x,t[0])).y;if(n===e.x&&o===e.y||s===e.x&&a===e.y)return!0;if(a!==o){var u=n+(e.y-o)*(s-n)/(a-o);if(u===e.x)return!0;n!==s?u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&u!==n&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++):u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++)}}return 0<i%2},C:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y))},D:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y)||0===this.P(i,e,t)&&0===this.P(e,r,t)||this.P(i,e,t)*this.P(e,r,t)<0||this.P(t,r,i)*this.P(r,e,i)<0)},A:function(t,e,i){return!(t.x<e.x||t.y<e.y||t.x>i.x||t.y>i.y)},I:function(t,e,i){var r=Math.min(e.x,i.x),n=Math.max(e.x,i.x),o=Math.min(e.y,i.y);e=Math.max(e.y,i.y);return!(t.x<r||t.x>n||t.y<o||t.y>e)},V:function(t,e,i){var r=Math.min(i.x,e.x),n=Math.max(i.x,e.x),o=Math.min(i.y,e.y);i=Math.max(i.y,e.y);return!(t.x<r||t.x>n||t.y<o||t.y>i)},L:function(t,e,i){for(var r,n,o=!1,s=0;s<i;s++)r=e[s],n=e[(s+1)%i],(r.y<t.y&&n.y>=t.y||n.y<t.y&&r.y>=t.y)&&(r.x<=t.x||n.x<=t.x)&&r.x+(t.y-r.y)/(n.y-r.y)*(n.x-r.x)<t.x&&(o=!o);return o},R:function(t,e,i){return(t.x-e.x)*(i.y-e.y)==(i.x-e.x)*(t.y-e.y)&&Math.min(e.x,i.x)<=t.x&&t.x<=Math.max(e.x,i.x)&&Math.min(e.y,i.y)<=t.y&&t.y<=Math.max(e.y,i.y)},F:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},Z:function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},N:function(t,e,i){var r=e.x,n=(e=e.y,i.x),o=(i=i.y,t.x),s=n-r,a=i-e,u=s*s+a*a,h=o-r,l=(t=t.y)-e,c=h*h+l*l;return this.j(u)?this.j(c)?0:c:(u=Math.sqrt(u),l=this.T(a=(s/=u)*h+(h=a/u)*l)?this.O(a-u)?(l=o-(r+a*s))*l+(u=t-(e+a*h))*u:(r=o-n)*r+(s=t-i)*s:c,this.j(l)?0:l)},Y:function(t,e,i,r){var n,o=e.x,s=e.y,a=i.x,u=i.y,h=t.x,l=(t=t.y,a-o),c=u-s,f=Math.sqrt(l*l+c*c),A=h-o,p=t-s,d=Math.sqrt(A*A+p*p);return this.j(f)?(r.x=e.x,r.y=e.y,this.j(n=d)?0:n):(n=this.T(c=(l/=f)*A+(A=c/f)*p)?this.O(c-f)?(f=h-(p=o+c*l),l=t-(o=s+c*A),s=Math.sqrt(f*f+l*l),r.x=p,r.y=o,s):(c=h-a,A=t-u,f=Math.sqrt(c*c+A*A),r.x=i.x,r.y=i.y,f):(r.x=e.x,r.y=e.y,d),this.j(n)?0:n)},X:function(t,e){for(var i=0,r=0,n=0,o=0;o<e;o++){var s=t[o],a=t[(o+1)%e],u=(s.x*a.y-s.y*a.x)/2;i+=u,r+=u*(s.x+a.x)/3,n+=u*(s.y+a.y)/3}return{x:r/=i,y:n/=i}},H:function(t){for(var e=I.triangulate([t]),i=0,r=0,n=0,o=0;o<e.length;o++){var s=t[e[o][0]],a=t[e[o][1]],u=t[e[o][2]],h=a.x-s.x,l=a.y-s.y,c=u.x-s.x;i+=h=(h*(u.y-s.y)-c*l)/2,r+=(s.x+a.x+u.x)/3*h,n+=(s.y+a.y+u.y)/3*h}return{x:r/i,y:n/i}},U:function(t,e){if(e<3)return 0;for(var i=0,r=0;r<e;++r){var n=t[r],o=t[(r+1)%e];i+=n.x*o.y-n.y*o.x}return Math.abs(i/2)},q:function(t,e,i,r,n){var o,s;return this.D(t,e,i,r)?(o=(r.x-i.x)*(t.y-e.y)-(e.x-t.x)*(i.y-r.y),s=(t.y-i.y)*(e.x-t.x)*(r.x-i.x)+i.x*(r.y-i.y)*(e.x-t.x)-t.x*(e.y-t.y)*(r.x-i.x),n.x=s/o,o=(t.x-e.x)*(r.y-i.y)-(e.y-t.y)*(i.x-r.x),s=e.y*(t.x-e.x)*(r.y-i.y)+(r.x-e.x)*(r.y-i.y)*(t.y-e.y)-r.y*(i.x-r.x)*(e.y-t.y),n.y=s/o,1):0},B:function(t,e,i,r,n){var o=Math.min(i.x,r.x),s=Math.max(i.x,r.x),a=Math.min(i.y,r.y),u=Math.max(i.y,r.y),h=t.x,l=t.y,c=i.x,f=i.y,A=r.x,p=r.y;if(90==e)return!(t.x<o||t.x>s||(Math.abs(s-o<N)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.x<f?(n.x=c,n.y=f,0):!(p<f&&t.x<p)||(n.x=A,n.y=p,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,d<l||!this.V(n,i,r))));if(270==e)return!(t.x<o||t.x>s||(Math.abs(s-o<N)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.y>p?(n.x=A,n.y=p,0):!(p<f&&t.y>f)||(n.x=c,n.y=f,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,l<d||!this.V(n,i,r))));if(270!=e&&90!=e&&Math.abs(s-o<N)){t=o;var d=Math.tan(e/180*Math.PI)*(t-h)+l;if(n.y=d,n.x=t,this.V(n,i,r))return s=d-l,0<(o=t-h)/Math.sqrt(o*o+s*s)*Math.cos(e/180*Math.PI)}return Math.abs(u-a<=N)?(d=a,t=1/Math.tan(e/180*Math.PI)*(d-l)+h,n.x=t,n.y=d,!!this.V(n,i,r)&&(o=d-l,0<(s=t-h)/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI))):(t=l+(u=Math.tan(e/180*Math.PI))*((d=(f-l-((a=(p-f)/(A-c))*c-u*h))/(u-a))-h),n.x=d,n.y=t,!!this.V(n,i,r)&&(s=d-h,o=t-l,Math.abs(s)<=N&&Math.abs(o)<=N||0<s/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI)))},G:function(t,e){return Math.abs(t.x-e.x)<Q&&Math.abs(t.y-e.y)<Q},W:function(t,e,i,r){var n,o,s,a,u=t.x,h=t.y,l=e.x,c=e.y,f=i.x,A=i.y;return this.G(t,e)||this.G(t,i)?(r.x=u,r.y=h,!0):(s=Math.min(e.x,i.x),a=Math.max(e.x,i.x),n=Math.min(e.y,i.y),o=Math.max(e.y,i.y),Math.abs(l-f)<1e-5?(r.x=l,n<=(r.y=h)&&h<=o):Math.abs(c-A)<1e-5?(r.x=u,r.y=c,s<=u&&u<=a):(a=h+(n=-1/((A-c)/(f-l)))*((s=(c-h-((o=(A-c)/(f-l))*l-n*u))/(n-o))-u),r.x=s,r.y=a,!!this.V(r,e,i)||!(!this.G(t,e)&&!this.G(t,i))))},K:function(t,e){return{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}},$:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},J:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},tt:function(t,e){return t.x*e.x+t.y*e.y},it:function(t,e){return t.x*e.y-t.y*e.x},nt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},et:function(t,e){var i,r;return 0==t.x&&0==t.y||0==e.x&&0==e.y?0:(i={x:t.x,y:t.y,z:0},r={x:e.x,y:e.y,z:0},i=this.K(i,r),r=this.tt(t,e),r=Math.acos(r/(this.nt(t)*this.nt(e))),0<i.z?r/Math.PI*180:360-r/Math.PI*180)},rt:function(t,e,i,r){for(var n=0;n<i.length;n++){var o=i[n],s=i[(n+1)%i.length];if(1==this.q(t,e,o,s,r))return!0}return!1},st:function(t,e,i,r,n){var o=Math.min(t.x,i.x,r.x),s=Math.max(t.x,i.x,r.x),a=Math.min(t.y,i.y,r.y),u=Math.max(t.y,i.y,r.y);s=Math.sqrt((s-o)*(s-o)+(u-a)*(u-a)),o=e/180*Math.PI,u=s*Math.cos(o)+t.x,a=s*Math.sin(o)+t.y;return 1==this.q(t,{x:u,y:a},i,r,n)},ht:function(t){for(var e={x:null,y:null},i=0,r=0,n=0;n<t.length;n++)i+=t[n].x,r+=t[n].y;return e.x=i/t.length,e.y=r/t.length,e},ut:function(t,e,i,r){var n=[],o=t.x-e,s=t.x+e,a=t.y-e,u=t.y+e,h=Math.min(i.x,r.x),l=Math.max(i.x,r.x),c=Math.min(i.y,r.y),f=Math.max(i.y,r.y);return l<o||s<h||f<a||u<c||(o=r.x-i.x,s=r.y-i.y,(a=(t=(o*(a=t.x-i.x)+s*(u=t.y-i.y))/(r=o*o+s*s))*t-(a*a+u*u-e*e)/r)<0)||(u=Math.sqrt(a),r={x:i.x-o*(e=-t+u),y:i.y-s*e},o={x:i.x-o*(a=-t-u),y:i.y-s*a},e!==a&&(h<=r.x&&r.x<=l&&c<=r.y&&r.y<=f&&n.push(r),h<=o.x)&&o.x<=l&&c<=o.y&&o.y<=f&&n.push(o)),n},ot:function(t,e,i){var r,n={};if(t.x!=e.x)return r=e=(e.y-t.y)/(e.x-t.x),e=t.y-e*t.x,n.x=(+i.x- -1*r*i.y-r*e)/(r*r+1),n.y=(r*r*i.y- -1*r*i.x- -1*e)/(r*r+1),n;n.x=t.x,n.y=i.y},ct:function(t,e,i,r){var n,o,s,a,u={point:null,isintersect:!1};return t==i||t==r?(u.isintersect=!0,u.point=t):e==i||e==r?(u.isintersect=!0,u.point=e):(n={x:e.x-t.x,y:e.y-t.y},o={x:r.x-i.x,y:r.y-i.y},s={x:i.x-t.x,y:i.y-t.y},r={x:r.x-t.x,y:r.y-t.y},e={x:e.x-i.x,y:e.y-i.y},i={x:-s.x,y:-s.y},a=this.it(o,n),Math.abs(a)<=1e-5||this.it(s,n)*this.it(r,n)<=5e-4&&this.it(i,o)*this.it(e,o)<5e-4&&(r=this.it(o,s)/a,u.point={x:t.x+n.x*r,y:t.y+n.y*r},u.isintersect=!0)),u},lt:function(t,e,i){t.x===e.x&&(e.x=e.x+1),t.y===e.y&&(e.y=e.y+1),e.x===i.x&&(i.x=i.x+1),e.y===i.y&&(i.y=i.y+1);var r=e.x-t.x,n=(t=e.y-t.y,i.x-e.x);return!(0<r*(i.y-e.y)-t*n)},getAngle:function(t){var e=t.p1,i=(t=t.p2).x-e.x;t=t.y-e.y,e=Math.sqrt(i*i+t*t),e=Math.asin(Math.abs(t)/e);return 0<i&&0<t?e:i<0&&0<t?Math.PI-e:i<0&&t<0?Math.PI+e:0<i&&t<0?2*Math.PI-e:0==i&&0<t?e:0==i&&t<0?3*Math.PI/2:0<i&&0==t?e:i<0&&0==t?Math.PI:null},ft:function(t){var e=this.distanceOfTwoPoints(t[0],t[1]),i=this.distanceOfTwoPoints(t[1],t[2]),r=(e+i+(t=this.distanceOfTwoPoints(t[0],t[2])))/2;return Math.sqrt(r*(r-e)*(r-i)*(r-t))},vt:function(t,e){var i,r,n,o,s;return this.Y(t,e[0],e[1],{})<1e-4||this.Y(t,e[0],e[2],{})<1e-4||this.Y(t,e[1],e[2],{})<1e-4||(o={x:e[1].x-e[0].x,y:e[1].y-e[0].y},i={x:e[0].x-e[2].x,y:e[0].y-e[2].y},r={x:e[2].x-e[1].x,y:e[2].y-e[1].y},s={x:t.x-e[0].x,y:t.y-e[0].y},n={x:t.x-e[1].x,y:t.y-e[1].y},t={x:t.x-e[2].x,y:t.y-e[2].y},e=this.it(o,s),o=this.it(r,n),s=this.it(i,t),Q<e*o&&Q<o*s)},yt:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null,type:0,outer:null},o=[];if(this.vt(t,i)&&(n.start=t),this.vt(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0,n.type=1;else{for(var s=(i[1].x+i[2].x)/2,a=(i[1].y+i[2].y)/2,u=1;u<r;u++){var h,l=this.ct(t,e,i[u-1],i[u]);if(l.isintersect){if(null!=n.start)return n.end=l.point,n.isintersect=!0,n.outer="end",h=this.et({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;if(null!=n.end)return n.start=l.point,n.isintersect=!0,n.outer="start",h=this.et({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;o.push(l)}}var c,f=this.ct(t,e,i[0],i[r-1]);if(f.isintersect){if(null!=n.start)return n.end=f.point,n.isintersect=!0,n.outer="end",c=this.et({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;if(null!=n.end)return n.start=f.point,n.isintersect=!0,n.outer="start",c=this.et({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;o.push(f)}2!=o.length||this.distanceOfTwoPoints(o[0].point,o[1].point)<.01||(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?(n.start=o[0].point,n.end=o[1].point):(n.start=o[1].point,n.end=o[0].point),n.isintersect=!0,n.type=4)}return n},Mt:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null},o=[];if(this.vt(t,i)&&(n.start=t),this.vt(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0;else{for(var s=1;s<r;s++){var a=this.ct(t,e,i[s-1],i[s]);if(a.isintersect){if(null!=n.start)return n.end=a.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(a)}}var u=this.ct(t,e,i[0],i[r-1]);if(u.isintersect){if(null!=n.start)return n.end=u.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(u)}2==o.length&&(n.start=(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.end=(this.distanceOfTwoPoints(o[0].point,t)>this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.isintersect=!0)}return n},dt:function(t,e){if(0==e.length)return[t];var i,r,n=this.kt(e),o=[],s=(n.sort(function(e,i){var r=(e.bt.x-t.bt.x)*(e.bt.x-t.bt.x)+(e.bt.y-t.bt.y)*(e.bt.y-t.bt.y),n=(i.bt.x-t.bt.x)*(i.bt.x-t.bt.x)+(i.bt.y-t.bt.y)*(i.bt.y-t.bt.y);e=(e.gt.x-t.bt.x)*(e.gt.x-t.bt.x)+(e.gt.y-t.bt.y)*(e.gt.y-t.bt.y),i=(i.gt.x-t.bt.x)*(i.gt.x-t.bt.x)+(i.gt.y-t.bt.y)*(i.gt.y-t.bt.y);return(r<e?r:e)<(n<i?n:i)}),0);for(s=0;s<n.length;s++)this.distanceOfTwoPoints(n[s].bt,n[s].gt)<.01||(i=this.distanceOfTwoPoints(n[s].bt,t.bt),r=this.distanceOfTwoPoints(n[s].gt,t.bt),i<.01?t.bt=n[s].gt:r<.01?t.bt=n[s].bt:i<r?.1<this.distanceOfTwoPoints(t.bt,n[s].bt)&&(o.push({wt:t.wt,bt:t.bt,gt:n[s].bt,F:t.F,_t:t._t}),t.bt=n[s].gt):.1<this.distanceOfTwoPoints(t.bt,n[s].gt)&&(o.push({wt:t.wt,bt:t.bt,gt:n[s].gt,F:t.F,_t:t._t}),t.bt=n[s].bt),n.splice(s,1));return.1<this.distanceOfTwoPoints(t.bt,t.gt)&&o.push(t),o},kt:function(t){var e=[];if(1==t.length)return t;for(var i=t[0],r=1;0<t.length;){if(r>=t.length){if(e.push(i),t.splice(0,1),t.length<1)break;i=t[0],r=1}if(1===t.length){e.push(i);break}this.St(i.bt,i.gt,t[r].bt)?(this.St(i.bt,i.gt,t[r].gt)||(i.gt=t[r].gt),t.splice(r,1)):this.St(i.bt,i.gt,t[r].gt)?(i.bt=t[r].bt,t.splice(r,1)):this.St(t[r].bt,t[r].gt,i.bt)?(this.St(t[r].bt,t[r].gt,i.gt)||(t[r].gt=i.gt),i=t[r],t.splice(r,1)):this.St(t[r].bt,t[r].gt,i.gt)?(t[r].bt=i.bt,i=t[r],t.splice(r,1)):r++}return e},St:function(t,e,i){var r=t.x-i.x,n=t.y-i.y,o=e.x-i.x,s=e.y-i.y,a=this.distanceOfTwoPoints(t,i);i=this.distanceOfTwoPoints(e,i),t=this.distanceOfTwoPoints(t,e);return r*s-n*o<1e-5&&a+i-t<.001}});var V=new i;function G(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function K(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?G(Object(i),!0).forEach(function(e){Y(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Y(t,e,i){return(e=q(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){return"symbol"===X(t=function(t,e){if("object"!==X(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==X(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}var Z=window.fengmap,J=(i=function(){function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.xt=void 0===i.autoConnectBuilding||i.autoConnectBuilding,this.Et=e,this.jt=!1,this.Tt=null,this.Ot=0,this.Pt=0,this.Ct=0,this.Dt=[],this.At=[],this.It=0,this.Vt=0,this.Lt=1,this.Rt=null,this.Ft=null,this.Zt=0,this.Nt=0,this.Yt=null,this.Xt=null,this.zt=!1,this.Ht=null,this.Ut=null,this.qt=-1,this.Qt=new Map,this.Bt={playing:"playing",complete:"complete"},this.Gt=!0,this.Wt=-1,this.Kt=0,this.$t=0,this.Jt(),this.ti=new Map,this.ii=this.ii.bind(this),this.ni=this.ni.bind(this),this.Et.on("levelChanged",this.ii),this.Et.on("visibleLevelsLoaded",this.ii),this.xt&&this.Et.on("buildingLoaded",this.ni)}var e,i;return e=t,(i=[{key:"setSpeed",value:function(t){this.Lt=t}},{key:"setTracks",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.ei(t),this.Ut=t,this.ri(e)}},{key:"getMarker",value:function(t){return t===Z.FMType.LINE_MARKER?this.Ft:this.Rt}},{key:"getTrackInfo",value:function(){return{totalLength:+this.Zt.toFixed(3),totalTimes:+this.Nt.toFixed(3)}}},{key:"setProgress",value:function(t){for(var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=new Date(t).getTime(),r=-1,n=0;n<this.Ut.length;n++){if(this.Ut[n].timestamp==i){r=n;break}if(this.Ut[n].timestamp>i){r=n-1;break}}-1!==r&&(this.Yt=null,this.Xt=null,this.It=r,this.Pt=this.At[r],this.Ct=this.si[r],this.Ot=i-this.Ut[0].timestamp,this.Yt=new p(this.Ut[r].x,this.Ut[r].y,this.Ut[r].absoluteZ),this.Vt=i,this.ri(e))}},{key:"play",value:function(){this.jt=!0,this.Tt=null,this.It}},{key:"pause",value:function(){this.jt=!1}},{key:"stop",value:function(){this.jt=!1,this.setProgress(this.Ut[this.Ut.length-1].time)}},{key:"start",value:function(){this.setProgress(this.Ut[0].time)}},{key:"render",value:function(){!0!==this.zt&&(this.zt=!0,this.hi(),this.ui())}},{key:"clear",value:function(){0!=this.zt&&(this.Ft&&this.Ft.remove(this.Et),this.zt=!1,this.Rt)&&this.Rt.parent&&this.Rt.remove()}},{key:"on",value:function(t,e){this.Qt.set(t,e)}},{key:"setMarkerStyle",value:function(t,e){this.Ht&&this.Rt&&this.Rt.parent&&this.Rt.remove(),this.Ht=Object.assign({},e,{type:t}),this.Rt=this.ai(this.Ht),this.ui()}},{key:"setTrackStyle",value:function(t){this.oi=t,this.$t=t.height||0;var e=this.ci(this.Ut,this.$t);e=this.li(e);this.Ft=new Z.FMLineMarker({color:t.color,width:t.width,animate:t.animate,smooth:!1,segments:e,url:t.url,type:t.type,borderColor:t.borderColor,depth:t.depth,zFighting:void 0===t.zFighting||t.zFighting}),this.hi(),this.Ft.getLineNodes||1!=this.Gt||(this.Gt=!1)}},{key:"dispose",value:function(){this.Et.off("levelChanged",this.ii),this.Et.off("visibleLevelsLoaded",this.ii),this.xt&&this.Et.off("buildingLoaded",this.ni),window.cancelAnimationFrame(this.qt),this.clear(),this.Ft&&this.Ft.dispose(),this.Rt&&this.Rt.parent&&this.Rt.dispose(),this.Ft=null,this.Rt=null,this.Yt=null,this.Ut=null,this.Et=null,this.Dt=null,this.At=null,this.Ht=null}}])&&W(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Object.assign(i.prototype,{ni:function(t){var e=this.ti.get(t.buildingID);e&&!e.hasProcess&&(this.ti.set(t.buildingID,{hasProcess:!0}),this.ii(),e=this.ci(this.Ut,this.$t),t=this.li(e),this.Ft)&&(this.Ft.segments=t)},ii:function(){this.Ut&&(this.setTracks(this.Ut,!1),this.setProgress(this.Vt,!1))},fi:function(){return this.Gt},hi:function(){0!=this.zt&&null!==this.Ft&&(this.Ft&&this.Ft.addTo(this.Et),this.vi())},yi:function(){var t=this.Ut[this.It].level,e=this.Mi(this.Ut[this.It].buildingID);return{floor:this.Et.getBuilding(e).getFloor(t),buildingID:e,level:t}},ui:function(){var t;0!=this.zt&&(t=this.yi().floor,this.Ht.type===Z.FMType.LOCATION_MARKER?this.Rt.addTo(this.Et):this.Rt.addTo(t),this.Ht.type!=Z.FMType.DYNAMIC_MODEL_MARKER)&&this.di()},ai:function(t){var e=this,i=t.type,r=t.size,n=t.scale,o=t.url,s=t.height,a=(s=(this.Kt=s||0,Y(Y(Y(Y({},Z.FMType.LOCATION_MARKER,Z.FMLocationMarker),Z.FMType.DYNAMIC_MODEL_MARKER,Z.FMDynamicModel),Z.FMType.IMAGE_MARKER,Z.FMImageMarker),Z.FMType.DOM_MARKER,Z.FMDomMarker)),null),u=null;if(s=(null!=this.Ut&&(a=this.Ut[0].level,u=this.Ut[0].buildingID),s[i]))return n=Y(Y(Y(Y({},Z.FMType.IMAGE_MARKER,{url:o,size:r,x:0,y:0}),Z.FMType.DYNAMIC_MODEL_MARKER,{url:o,scale:n,x:0,y:0,callback:function(){e.di()}}),Z.FMType.LOCATION_MARKER,{url:o,size:r,x:0,y:0,level:a,buildingID:u}),Z.FMType.DOM_MARKER,{x:0,y:0}),new s(Object.assign(n[i],t))},vi:function(){var t,e;this.Ft&&(t=(e=this.ki()).p,e=e.pNoGap,this.fi()?this.mi(t):this.Ft.moveProportion(e))},pi:function(){var t,e=this.yi().floor;if(e)return(t={x:this.Yt.x,y:this.Yt.y,z:this.Yt.z}).z-=e.height,t},di:function(){var t,e,i,r;this.Rt&&this.zt&&(t=(r=this.yi()).buildingID,e=r.level,r=r.floor)&&(i=this.pi(),r=this.Ht.type==Z.FMType.LOCATION_MARKER?this.Et:r,this.Rt.level!=e&&(this.Rt.parent&&this.Rt.remove(),this.Rt.addTo(r)),this.Rt.moveTo({x:i.x,y:i.y,animate:!1,level:e,buildingID:t}),this.Rt.height=i.z+this.Kt)},bi:function(t,e){var i=this.Qt.get(t);this.Bt.playing===t&&!0===this.jt?i&&i(e):this.Bt.playing!==t&&i&&i(e)},gi:function(){this.di()},ki:function(){return{p:this.Pt/this.Zt,pNoGap:this.Ct/this.wi}},_i:function(){var t=this.Ot/this.Nt;return Math.min(+t.toFixed(t,3),1)},Si:function(t,e,i){t=new p(t.x,t.y,t.absoluteZ),e=new p(e.x,e.y,e.absoluteZ),t=t.lerp(e,i),null==this.Yt&&(this.Yt=t.clone()),this.Pt+=t.distanceTo(this.Yt),this.Yt.set(t.x,t.y,t.z)},xi:function(t,e,i){var r=new p(t.x,t.y,t.relativeZ),n=new p(e.x,e.y,e.relativeZ);r=r.lerp(n,i);null==this.Xt&&(this.Xt=r.clone()),t.level===e.level&&(this.Ct+=this.Xt.distanceTo(r)),this.Xt.set(r.x,r.y,r.z)},ri:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this.Ut[this.It],i=this.Ot-this.Dt[this.It],r=(e=e.nextPointTimeGap,-1);if(0==i&&null!=e)r=0;else{if(null==e)return 0==this.jt?(n=this.Ut[this.It],t&&this.bi(this.Bt.playing,{progress:this.Ut[this.It].timestamp,level:this.Ut[this.It].level,buildingID:this.Ut[this.It].buildingID,index:this.It,position:{x:n.x,y:n.y,z:n.z}}),t&&this.bi(this.Bt.complete),null==this.Yt&&(this.Yt=new p(0,0,0)),this.Yt.set(n.x,n.y,n.absoluteZ),this.gi(),this.vi()):t&&this.bi(this.Bt.complete),void(this.jt=!1);r=i/e}r=Math.min(r,1);var n=this.Ut[this.It];t=this.Ut[this.It+1],this.Si(n,t,r),this.xi(n,t,r),this.gi(),this.vi(),1<=r&&(this.It+=1),i=n.timestamp,e=t.timestamp;this.Vt=Number.parseInt(h.lerp(i,e,r)),this.bi(this.Bt.playing,{progress:this.Vt,level:this.Ut[this.It].level,buildingID:this.Ut[this.It].buildingID,index:this.It,position:{x:this.Yt.x,y:this.Yt.y,z:this.Yt.z}})},Jt:function(){var t,e;this.qt=window.requestAnimationFrame(this.Jt.bind(this)),this.jt&&(null==this.Tt&&(this.Tt=(new Date).getTime()),e=(t=(new Date).getTime())-this.Tt,e*=this.Lt,this.Tt=t,this.Ot+=e,this.ri())},ci:function(t,e){for(var i=[],r=-1,n=-1,o={groupId:-1,points:[]},s=0;s<t.length;s++){var a=(c=t[s]).x,u=c.y,h=c.z,l=c.level,c=c.buildingID;r===l&&n===c||(0<o.points.length&&i.push(o),o={groupId:l,buildingID:c,points:[]},r=l,n=c),o.points.push({x:a,y:u,z:h+e}),s===t.length-1&&i.push(o)}return i},Ei:function(t,e,i,r,n){return(n-t)/(e-t)*(r-i)+i},li:function(t){for(var e=[],i=0;i<t.length;i++){var r=(o=t[i]).groupId,n=o.points,o=o.buildingID,s=new Z.FMSegment;s.level=r,s.points=n,s.buildingID=o,e.push(s)}return e},ji:function(t){for(var e=this.Ut,i=-1,r=1;r<=e.length-1;r++)t>=this.Dt[r-1]&&t<this.Dt[r]&&(i=r-1);return i},Ti:function(t,e){var i=-1,r=-1,n=-1,s=e[t-1];s&&s.timestamp&&(i=t-1);for(var a,u,h,l=t+1;l<e.length;l++){var c=e[l];if(c&&c.time){r=l;break}}return-1!==r&&-1!==i&&(s=e[i].timestamp,a=new Date(e[r].time).getTime()-s,h=new o(e[i].x,e[i].y),t=new o(e[t].x,e[t].y),u=new o(e[r].x,e[r].y),n=(h=t.distanceTo(h))/(h+t.distanceTo(u))*a+s),-1===(n=-1===n&&-1!==r?new Date(e[r].time).getTime():n)&&-1!==i?e[i].timestamp:n},Oi:function(t,e,i){var r=new Date(t.time).getTime(),n=new Date(i.time).getTime()-r;t=new o(t.x,t.y),e=new o(e.x,e.y),i=new o(i.x,i.y);return(t=e.distanceTo(t))/(t+e.distanceTo(i))*n+r},ei:function(t){this.Dt=[],this.Nt=0,this.At=[],this.si=[],this.Zt=0;for(var e=t[this.wi=0].buildingID,i=t.length,r=0;r<i;r++){void 0===t[r].z&&(t[r].z=0);var n,o,s=(o=t[r]).time,a=o.level;if(!(s=((o=o.buildingID)&&this.ti.set(o,{}),t[r].timestamp=new Date(s).getTime(),!isNaN(t[r].timestamp)&&0!==t[r].timestamp||(t[r].timestamp=this.Ti(r,t)),this.Et.getBuilding(this.Mi(o)).getFloor(a))))return;t[r].absoluteZ=t[r].z+s.height,t[r].relativeZ=t[r].z,e!==o&&this.xt&&(a=K({},t[r-1]),s=K({},t[r]),n=t[r-1].buildingID?r-1:r,n=null==(n=this.Et.getBuilding(this.Mi(t[n].buildingID)).getFloor(t[n].level).getLayers(Z.FMType.EXTENT_LAYER)[0])||null==(n=n.getFeatures()[0])?void 0:n.coordinates[0])&&V.rt(a,s,n,n={})&&(t.splice(r,0,K(K({},a),{},{x:n.x,y:n.y,timestamp:this.Oi(a,n,s)})),t.splice(r+1,0,K(K({},s),{},{x:n.x,y:n.y,timestamp:this.Oi(a,n,s)})),i+=2,r+=2),e=o}for(var u=new p(t[0].x,t[0].y,t[0].absoluteZ),h=new p(t[0].x,t[0].y,t[0].relativeZ),l=-1,c=0;c<t.length-1;c++){var f=t[c].level,A=new p(t[c].x,t[c].y,t[c].absoluteZ),d=new p(t[c].x,t[c].y,t[c].relativeZ);this.Zt+=A.clone().distanceTo(u),(l=-1==l?f:l)==f&&(this.wi+=d.clone().distanceTo(h)),l=f,t[c].nextPointTimeGap=t[c+1].timestamp-t[c].timestamp,t[c].nextPointTimeGap<0&&(t[c].nextPointTimeGap=0),this.Dt[c]=this.Nt,this.Nt+=t[c].nextPointTimeGap,this.At[c]=this.Zt,this.si[c]=this.wi,u.copy(A),h.copy(d)}var m=(t[y=t.length-1].nextPointTimeGap=void 0,this.Dt[y]=this.Nt,new p(t[y].x,t[y].y,t[y].absoluteZ)),y=new p(t[y].x,t[y].y,t[y].relativeZ);this.Zt+=m.distanceTo(u),this.wi+=y.distanceTo(h),this.At[t.length-1]=this.Zt,this.si[t.length-1]=this.wi},mi:function(t){for(var e=this.Ft.getLineNodes(),i=0,r=e.length-1;-1<r;r--)i+=e[r].seg.length;for(var n=0,o=e.length-1;-1<o;o--){var s=n/i,a=(n+=e[o].seg.length)/i;a<t?e[o].line.material.uniforms.miny.value=1:t<=a&&(e[o].line.material.uniforms.miny.value=(t-s)/(a-s))}},Mi:function(t){return null==t||""===t?this.Et.getMapOptions().buildingID:t}}),"v3.1.4"),$=window.fengmap||{};$.VERSION=J,$.BUILD=70,$.FMTracksPlayer=i,e.default=$}],i={},t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"Pi",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.Pi)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.Pi?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=0).default;function t(r){var n;return(i[r]||(n=i[r]={i:r,l:!1,exports:{}},e[r].call(n.exports,n,n.exports,t),n.l=!0,n)).exports}var e,i},t.exports=r()},U6yG:function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},UBa7:function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},UPHp:function(t,e,i){var r=i("X3l8").Buffer,n=r.alloc(16,0);function o(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function s(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}s.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},s.prototype._multiply=function(){for(var t,e,i,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],n=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),i=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,i&&(r[0]=r[0]^225<<24)}this.state=o(n)},s.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},s.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,n],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=s},UcPO:function(t,e,i){t.exports=i("vzCy").EventEmitter},"VI/i":function(t,e,i){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=i("rOku"),e.createHash=e.Hash=i("BVsN"),e.createHmac=e.Hmac=i("ARY+");var r=i("O+gO"),n=Object.keys(r),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);e.getHashes=function(){return o};var s=i("/vd3");e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync;var a=i("VKDQ");e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var u=i("PBsE");e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var h=i("KeN/");e.createSign=h.createSign,e.Sign=h.Sign,e.createVerify=h.createVerify,e.Verify=h.Verify,e.createECDH=i("gw8B");var l=i("9P96");e.publicEncrypt=l.publicEncrypt,e.privateEncrypt=l.privateEncrypt,e.publicDecrypt=l.publicDecrypt,e.privateDecrypt=l.privateDecrypt;var c=i("4R/o");e.randomFill=c.randomFill,e.randomFillSync=c.randomFillSync,e.createCredentials=function(){throw new Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/browserify/crypto-browserify")},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},VKDQ:function(t,e,i){var r=i("IRek"),n=i("tXf9"),o=i("BCiZ"),s=i("UBa7"),a=i("Cgw8");function u(t,e,i){if(t=t.toLowerCase(),o[t])return n.createCipheriv(t,e,i);if(s[t])return new r({key:e,iv:i,mode:t});throw new TypeError("invalid suite type")}function h(t,e,i){if(t=t.toLowerCase(),o[t])return n.createDecipheriv(t,e,i);if(s[t])return new r({key:e,iv:i,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var i,r;if(t=t.toLowerCase(),o[t])i=o[t].key,r=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");i=8*s[t].key,r=s[t].iv}var n=a(e,!1,i,r);return u(t,n.key,n.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var i,r;if(t=t.toLowerCase(),o[t])i=o[t].key,r=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");i=8*s[t].key,r=s[t].iv}var n=a(e,!1,i,r);return h(t,n.key,n.iv)},e.createDecipheriv=e.Decipheriv=h,e.listCiphers=e.getCiphers=function(){return Object.keys(s).concat(n.getCiphers())}},VWGE:function(t,e,i){"use strict";var r=i("sakm");function n(t,e){for(var i=t.split("/"),r={},n=r,o=1;o<i.length;o++){var s=i[o],a=o==i.length-1;s=s.replace(/~1/g,"/").replace(/~0/g,"~");var u=n.properties={},h=void 0;if(/[0-9]+/.test(s)){var l=+s;for(h=n.items=[];l--;)h.push({})}n=a?e:{},u[s]=n,h&&h.push(n)}return r}t.exports=function t(e){return t.definition={type:"object",macro:function(t){var e=[];for(var i in t)e.push(n(i,t[i]));return{allOf:e}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:r.metaSchemaRef(e)}},e.addKeyword("deepProperties",t.definition),e}},Vclt:function(t,e,i){"use strict";var r=i("C6Sy");t.exports=function(t){return!!r(t)}},VqvS:function(t,e,i){var r=i("LC74"),n=i("ps4E");function o(t){n.call(this,t),this.enc="pem"}r(o,n),t.exports=o,o.prototype.encode=function(t,e){for(var i=n.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"],o=0;o<i.length;o+=64)r.push(i.slice(o,o+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},WER7:function(t,e,i){"use strict";var r=i("HVlG"),n=i("ow1b"),o=i("oKL6"),s=i("jVn3");t.exports=function(t){var e=o(arguments),i=t.length-(arguments.length-1);return r(e,1+(i>0?i:0),!0)},n?n(t.exports,"apply",{value:s}):t.exports.apply=s},WTF8:function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("J6PW"),o=i("Q+f8"),s=ArrayBuffer.isView||function(t){try{return o(t),!0}catch(t){return!1}},a="undefined"!=typeof Uint8Array,u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,h=u&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);t.exports=function(t,e){if(t instanceof r)return t;if("string"==typeof t)return r.from(t,e);if(u&&s(t)){if(0===t.byteLength)return r.alloc(0);if(h){var i=r.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}var o=t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),l=r.from(o);if(l.length===t.byteLength)return l}if(a&&t instanceof Uint8Array)return r.from(t);var c=n(t);if(c)for(var f=0;f<t.length;f+=1){var A=t[f];if("number"!=typeof A||A<0||A>255||~~A!==A)throw new RangeError("Array items must be numbers in the range 0-255.")}if(c||r.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return r.from(t);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}},WwT5:function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=" ",o=t.level,s=t.dataLevel,a=t.schema[e],u=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(s||""),f=t.opts.$data&&a&&a.$data;if(f?(n+=" var schema"+o+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",r="schema"+o):r=a,!f&&"number"!=typeof a)throw new Error(e+" must be number");n+="if ( ",f&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" Object.keys("+c+").length "+("maxProperties"==e?">":"<")+" "+r+") { ";var A=e,p=p||[];p.push(n),n="",!1!==t.createErrors?(n+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { limit: "+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==e?"more":"fewer",n+=" than ",n+=f?"' + "+r+" + '":""+a,n+=" properties' "),t.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+u:""+a,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var d=n;return n=p.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+d+"]); ":n+=" validate.errors = ["+d+"]; return false; ":n+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},X3l8:function(t,e,i){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=i("EuP9"),n=r.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function s(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),s.prototype=Object.create(n.prototype),o(n,s),s.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},X4X3:function(t,e,i){"use strict";var r=i("oYso").Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=c,e=3;break;default:return this.write=f,void(this.end=A)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function l(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function A(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=s(e[r]);if(n>=0)return n>0&&(t.lastNeed=n-1),n;if(--r<i||-2===n)return 0;if((n=s(e[r]))>=0)return n>0&&(t.lastNeed=n-2),n;if(--r<i||-2===n)return 0;if((n=s(e[r]))>=0)return n>0&&(2===n?n=0:t.lastNeed=n-3),n;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},XHij:function(t,e,i){"use strict";t.exports=SyntaxError},XfLb:function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=" ",o=t.level,s=t.dataLevel,a=t.schema[e],u=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(s||""),f=t.opts.$data&&a&&a.$data;f?(n+=" var schema"+o+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",r="schema"+o):r=a;var A="maximum"==e,p=A?"exclusiveMaximum":"exclusiveMinimum",d=t.schema[p],m=t.opts.$data&&d&&d.$data,y=A?"<":">",g=A?">":"<",v=void 0;if(!f&&"number"!=typeof a&&void 0!==a)throw new Error(e+" must be number");if(!m&&void 0!==d&&"number"!=typeof d&&"boolean"!=typeof d)throw new Error(p+" must be number or boolean");if(m){var b=t.util.getData(d.$data,s,t.dataPathArr),w="exclusive"+o,x="exclType"+o,M="exclIsNumber"+o,_="' + "+(E="op"+o)+" + '";n+=" var schemaExcl"+o+" = "+b+"; ",n+=" var "+w+"; var "+x+" = typeof "+(b="schemaExcl"+o)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var S;v=p;(S=S||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: '"+(v||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: {} ",!1!==t.opts.messages&&(n+=" , message: '"+p+" should be boolean' "),t.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var B=n;n=S.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+B+"]); ":n+=" validate.errors = ["+B+"]; return false; ":n+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",f&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" "+x+" == 'number' ? ( ("+w+" = "+r+" === undefined || "+b+" "+y+"= "+r+") ? "+c+" "+g+"= "+b+" : "+c+" "+g+" "+r+" ) : ( ("+w+" = "+b+" === true) ? "+c+" "+g+"= "+r+" : "+c+" "+g+" "+r+" ) || "+c+" !== "+c+") { var op"+o+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===a&&(v=p,h=t.errSchemaPath+"/"+p,r=b,f=m)}else{_=y;if((M="number"==typeof d)&&f){var E="'"+_+"'";n+=" if ( ",f&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" ( "+r+" === undefined || "+d+" "+y+"= "+r+" ? "+c+" "+g+"= "+d+" : "+c+" "+g+" "+r+" ) || "+c+" !== "+c+") { "}else{M&&void 0===a?(w=!0,v=p,h=t.errSchemaPath+"/"+p,r=d,g+="="):(M&&(r=Math[A?"min":"max"](d,a)),d===(!M||r)?(w=!0,v=p,h=t.errSchemaPath+"/"+p,g+="="):(w=!1,_+="="));E="'"+_+"'";n+=" if ( ",f&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" "+c+" "+g+" "+r+" || "+c+" !== "+c+") { "}}v=v||e,(S=S||[]).push(n),n="",!1!==t.createErrors?(n+=" { keyword: '"+(v||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { comparison: "+E+", limit: "+r+", exclusive: "+w+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be "+_+" ",n+=f?"' + "+r:r+"'"),t.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+u:""+a,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";B=n;return n=S.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+B+"]); ":n+=" validate.errors = ["+B+"]; return false; ":n+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},YP8Q:function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(9).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function h(t,e,i,r){for(var n=0,o=Math.min(t.length,i),s=e;s<o;s++){var a=t.charCodeAt(s)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o=0,s=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,s=o%r,a=Math.min(o,o-s)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var c=1;for(u=h(t,l,t.length,e),l=0;l<s;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function A(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=67108863&s,u=s/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),A=Math.max(0,h-t.length+1);A<=f;A++){var p=h-A|0;l+=(s=(n=0|t.words[p])*(o=0|e.words[A])+c)/67108864|0,c=67108863&s}i.words[h]=0|c,u=0|l}return 0!==u?i.words[h]=0|u:i.length--,i.strip()}o.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],A=f[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var d=p.modn(A).toString(t);i=(p=p.idivn(A)).isZero()?d+i:l[h-d.length]+d+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,h=new t(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[a]=s;for(;a<o;a++)h[a]=0}else{for(a=0;a<o-n;a++)h[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[o-a-1]=s}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|i.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<i.length;s++)o=(e=(0|i.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,s=t.words,a=e.words,u=i.words,h=0,l=0|s[0],c=8191&l,f=l>>>13,A=0|s[1],p=8191&A,d=A>>>13,m=0|s[2],y=8191&m,g=m>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],M=8191&x,_=x>>>13,S=0|s[5],B=8191&S,E=S>>>13,C=0|s[6],T=8191&C,F=C>>>13,P=0|s[7],O=8191&P,D=P>>>13,R=0|s[8],I=8191&R,U=R>>>13,L=0|s[9],k=8191&L,j=L>>>13,Q=0|a[0],N=8191&Q,z=Q>>>13,H=0|a[1],V=8191&H,G=H>>>13,K=0|a[2],Y=8191&K,X=K>>>13,W=0|a[3],q=8191&W,Z=W>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,At=0|a[9],pt=8191&At,dt=At>>>13;i.negative=t.negative^e.negative,i.length=19;var mt=(h+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,z))+Math.imul(f,N)|0))<<13)|0;h=((o=Math.imul(f,z))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,z))+Math.imul(d,N)|0,o=Math.imul(d,z);var yt=(h+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,V)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,z))+Math.imul(g,N)|0,o=Math.imul(g,z),r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(d,V)|0,o=o+Math.imul(d,G)|0;var gt=(h+(r=r+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(b,N),n=(n=Math.imul(b,z))+Math.imul(w,N)|0,o=Math.imul(w,z),r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0,r=r+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(d,Y)|0,o=o+Math.imul(d,X)|0;var vt=(h+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,q)|0))<<13)|0;h=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(M,N),n=(n=Math.imul(M,z))+Math.imul(_,N)|0,o=Math.imul(_,z),r=r+Math.imul(b,V)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(y,Y)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(d,q)|0,o=o+Math.imul(d,Z)|0;var bt=(h+(r=r+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(B,N),n=(n=Math.imul(B,z))+Math.imul(E,N)|0,o=Math.imul(E,z),r=r+Math.imul(M,V)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(b,Y)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,Z)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(d,$)|0,o=o+Math.imul(d,tt)|0;var wt=(h+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;h=((o=o+Math.imul(f,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,N),n=(n=Math.imul(T,z))+Math.imul(F,N)|0,o=Math.imul(F,z),r=r+Math.imul(B,V)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,r=r+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(d,it)|0,o=o+Math.imul(d,rt)|0;var xt=(h+(r=r+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,st)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,z))+Math.imul(D,N)|0,o=Math.imul(D,z),r=r+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,G)|0,r=r+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(d,ot)|0,o=o+Math.imul(d,st)|0;var Mt=(h+(r=r+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,N),n=(n=Math.imul(I,z))+Math.imul(U,N)|0,o=Math.imul(U,z),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,G)|0,r=r+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,r=r+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(d,ut)|0,o=o+Math.imul(d,ht)|0;var _t=(h+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,z))+Math.imul(j,N)|0,o=Math.imul(j,z),r=r+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,G)|0,r=r+Math.imul(O,Y)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,r=r+Math.imul(T,q)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(F,q)|0,o=o+Math.imul(F,Z)|0,r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(_,it)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(d,ct)|0,o=o+Math.imul(d,ft)|0;var St=(h+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(f,pt)|0))<<13)|0;h=((o=o+Math.imul(f,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(k,V),n=(n=Math.imul(k,G))+Math.imul(j,V)|0,o=Math.imul(j,G),r=r+Math.imul(I,Y)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(U,Y)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,r=r+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var Bt=(h+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,dt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((o=o+Math.imul(d,dt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(k,Y),n=(n=Math.imul(k,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(I,q)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,Z)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(T,it)|0,n=(n=n+Math.imul(T,rt)|0)+Math.imul(F,it)|0,o=o+Math.imul(F,rt)|0,r=r+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,dt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((o=o+Math.imul(g,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(k,q),n=(n=Math.imul(k,Z))+Math.imul(j,q)|0,o=Math.imul(j,Z),r=r+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(D,it)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ft)|0;var Ct=(h+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((o=o+Math.imul(w,dt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(k,$),n=(n=Math.imul(k,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(I,it)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(U,it)|0,o=o+Math.imul(U,rt)|0,r=r+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var Tt=(h+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,dt)|0)+Math.imul(_,pt)|0))<<13)|0;h=((o=o+Math.imul(_,dt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(k,it),n=(n=Math.imul(k,rt))+Math.imul(j,it)|0,o=Math.imul(j,rt),r=r+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(U,ot)|0,o=o+Math.imul(U,st)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(T,ct)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(F,ct)|0,o=o+Math.imul(F,ft)|0;var Ft=(h+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,dt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((o=o+Math.imul(E,dt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(k,ot),n=(n=Math.imul(k,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(U,ut)|0,o=o+Math.imul(U,ht)|0,r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Pt=(h+(r=r+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,dt)|0)+Math.imul(F,pt)|0))<<13)|0;h=((o=o+Math.imul(F,dt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(k,ut),n=(n=Math.imul(k,ht))+Math.imul(j,ut)|0,o=Math.imul(j,ht),r=r+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(U,ct)|0,o=o+Math.imul(U,ft)|0;var Ot=(h+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,dt)|0)+Math.imul(D,pt)|0))<<13)|0;h=((o=o+Math.imul(D,dt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,ct),n=(n=Math.imul(k,ft))+Math.imul(j,ct)|0,o=Math.imul(j,ft);var Dt=(h+(r=r+Math.imul(I,pt)|0)|0)+((8191&(n=(n=n+Math.imul(I,dt)|0)+Math.imul(U,pt)|0))<<13)|0;h=((o=o+Math.imul(U,dt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Rt=(h+(r=Math.imul(k,pt))|0)+((8191&(n=(n=Math.imul(k,dt))+Math.imul(j,pt)|0))<<13)|0;return h=((o=Math.imul(j,dt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=mt,u[1]=yt,u[2]=gt,u[3]=vt,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=_t,u[9]=St,u[10]=Bt,u[11]=Et,u[12]=Ct,u[13]=Tt,u[14]=Ft,u[15]=Pt,u[16]=Ot,u[17]=Dt,u[18]=Rt,0!==h&&(u[19]=h,i.length++),i};function d(t,e,i){return(new m).mulp(t,e,i)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=A),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?A(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var s=n;n=0;for(var a=67108863&r,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;a=67108863&(f=f+a|0),n+=(s=(s=s+(c/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}i.words[o]=a,r=s,s=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},m.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},m.prototype.permute=function(t,e,i,r,n,o){for(var s=0;s<o;s++)r[s]=e[t[s]],n[s]=i[t[s]]},m.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var c=u,f=h,A=0;A<s;A++){var p=i[l+A],d=r[l+A],m=i[l+A+s],y=r[l+A+s],g=c*m-f*y;y=c*y+f*m,m=g,i[l+A]=p+m,r[l+A]=d+y,i[l+A+s]=p-m,r[l+A+s]=d-y,A!==a&&(g=u*c-h*f,f=u*f+h*c,c=g)}},m.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},m.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},m.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,n),this.transform(h,o,l,c,r,n);for(var A=0;A<r;A++){var p=a[A]*l[A]-u[A]*c[A];u[A]=a[A]*c[A]+u[A]*l[A],a[A]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this.length=0===t?1:this.length,this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i)&&!!(this.words[i]&n)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,s=0|n.words[n.length-1];0!==(i=26-this._countBits(s))&&(n=n.ushln(i),r.iushln(i),s=0|n.words[n.length-1]);var a,u=r.length-n.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=r.clone()._ishlnsubmul(n,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var l=i.clone(),c=e.clone();!e.isZero();){for(var f=0,A=1;0==(e.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(l),s.isub(c)),n.iushrn(1),s.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(c)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),s.isub(u)):(i.isub(e),a.isub(n),u.isub(s))}return{a:a,b:u,gcd:i.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new o(1),a=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(a)):(i.isub(e),a.isub(s))}return(n=0===e.cmpn(1)?s:a).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},n(v,g),v.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,g),n(w,g),n(x,g),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),A=this.pow(t,n),p=s;0!==A.cmp(a);){for(var d=A,m=0;0!==d.cmp(a);m++)d=d.redSqr();r(m<p);var y=this.pow(c,new o(1).iushln(p-m-1));f=f.redMul(y),c=y.redSqr(),A=A.redMul(c),p=m}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var h=e.words[r],l=u-1;l>=0;l--){var c=h>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++a||0===r&&0===l)&&(n=this.mul(n,i[s]),a=0,s=0)):a=0}u=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new _(t)},n(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(e,i("3IRH")(t))},YQyn:function(t,e,i){"use strict";var r=i("LC74"),n=i("X3l8").Buffer,o=i("z+8S"),s=n.alloc(128),a=64;function u(t,e){o.call(this,"digest"),"string"==typeof e&&(e=n.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=n.concat([e,s],a));for(var i=this._ipad=n.allocUnsafe(a),r=this._opad=n.allocUnsafe(a),u=0;u<a;u++)i[u]=54^e[u],r[u]=92^e[u];this._hash=[i]}r(u,o),u.prototype._update=function(t){this._hash.push(t)},u.prototype._final=function(){var t=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,t]))},t.exports=u},YSDb:function(t,e,i){"use strict";var r=i("1lLf"),n=i("08Lv");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,o=8;o<this.padLength;o++)r[n++]=0;return r}},Ya8g:function(t,e){},YePo:function(t,e,i){"use strict";var r=i("08Lv"),n=i("LC74"),o=i("AWjC"),s=i("Icsf");function a(t){o.call(this,t);var e=new function(t,e){r.equal(e.length,24,"Invalid key length");var i=e.slice(0,8),n=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:n}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:n}),s.create({type:"decrypt",key:i})]}(this.type,this.options.key);this._edeState=e}n(a,o),t.exports=a,a.create=function(t){return new a(t)},a.prototype._update=function(t,e,i,r){var n=this._edeState;n.ciphers[0]._update(t,e,i,r),n.ciphers[1]._update(i,r,i,r),n.ciphers[2]._update(i,r,i,r)},a.prototype._pad=s.prototype._pad,a.prototype._unpad=s.prototype._unpad},YgMt:function(t,e,i){"use strict";t.exports=function t(e){return t.definition={type:"object",inline:i("8d0M"),statements:!0,errors:"full",metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}},e.addKeyword("patternRequired",t.definition),e}},YhKI:function(t,e,i){"use strict";(function(e){var r=i("LC74"),n=i("0pvR");function o(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function s(t,e){return t<<e|t>>>32-e}function a(t,e,i,r,n,o,a,u){return s(t+(e^i^r)+o+a|0,u)+n|0}function u(t,e,i,r,n,o,a,u){return s(t+(e&i|~e&r)+o+a|0,u)+n|0}function h(t,e,i,r,n,o,a,u){return s(t+((e|~i)^r)+o+a|0,u)+n|0}function l(t,e,i,r,n,o,a,u){return s(t+(e&r|i&~r)+o+a|0,u)+n|0}function c(t,e,i,r,n,o,a,u){return s(t+(e^(i|~r))+o+a|0,u)+n|0}r(o,n),o.prototype._update=function(){for(var t=new Array(16),e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,n=this._c,o=this._d,f=this._e;f=a(f,i=a(i,r,n,o,f,t[0],0,11),r,n=s(n,10),o,t[1],0,14),r=a(r=s(r,10),n=a(n,o=a(o,f,i,r,n,t[2],0,15),f,i=s(i,10),r,t[3],0,12),o,f=s(f,10),i,t[4],0,5),o=a(o=s(o,10),f=a(f,i=a(i,r,n,o,f,t[5],0,8),r,n=s(n,10),o,t[6],0,7),i,r=s(r,10),n,t[7],0,9),i=a(i=s(i,10),r=a(r,n=a(n,o,f,i,r,t[8],0,11),o,f=s(f,10),i,t[9],0,13),n,o=s(o,10),f,t[10],0,14),n=a(n=s(n,10),o=a(o,f=a(f,i,r,n,o,t[11],0,15),i,r=s(r,10),n,t[12],0,6),f,i=s(i,10),r,t[13],0,7),f=u(f=s(f,10),i=a(i,r=a(r,n,o,f,i,t[14],0,9),n,o=s(o,10),f,t[15],0,8),r,n=s(n,10),o,t[7],1518500249,7),r=u(r=s(r,10),n=u(n,o=u(o,f,i,r,n,t[4],1518500249,6),f,i=s(i,10),r,t[13],1518500249,8),o,f=s(f,10),i,t[1],1518500249,13),o=u(o=s(o,10),f=u(f,i=u(i,r,n,o,f,t[10],1518500249,11),r,n=s(n,10),o,t[6],1518500249,9),i,r=s(r,10),n,t[15],1518500249,7),i=u(i=s(i,10),r=u(r,n=u(n,o,f,i,r,t[3],1518500249,15),o,f=s(f,10),i,t[12],1518500249,7),n,o=s(o,10),f,t[0],1518500249,12),n=u(n=s(n,10),o=u(o,f=u(f,i,r,n,o,t[9],1518500249,15),i,r=s(r,10),n,t[5],1518500249,9),f,i=s(i,10),r,t[2],1518500249,11),f=u(f=s(f,10),i=u(i,r=u(r,n,o,f,i,t[14],1518500249,7),n,o=s(o,10),f,t[11],1518500249,13),r,n=s(n,10),o,t[8],1518500249,12),r=h(r=s(r,10),n=h(n,o=h(o,f,i,r,n,t[3],1859775393,11),f,i=s(i,10),r,t[10],1859775393,13),o,f=s(f,10),i,t[14],1859775393,6),o=h(o=s(o,10),f=h(f,i=h(i,r,n,o,f,t[4],1859775393,7),r,n=s(n,10),o,t[9],1859775393,14),i,r=s(r,10),n,t[15],1859775393,9),i=h(i=s(i,10),r=h(r,n=h(n,o,f,i,r,t[8],1859775393,13),o,f=s(f,10),i,t[1],1859775393,15),n,o=s(o,10),f,t[2],1859775393,14),n=h(n=s(n,10),o=h(o,f=h(f,i,r,n,o,t[7],1859775393,8),i,r=s(r,10),n,t[0],1859775393,13),f,i=s(i,10),r,t[6],1859775393,6),f=h(f=s(f,10),i=h(i,r=h(r,n,o,f,i,t[13],1859775393,5),n,o=s(o,10),f,t[11],1859775393,12),r,n=s(n,10),o,t[5],1859775393,7),r=l(r=s(r,10),n=l(n,o=h(o,f,i,r,n,t[12],1859775393,5),f,i=s(i,10),r,t[1],2400959708,11),o,f=s(f,10),i,t[9],2400959708,12),o=l(o=s(o,10),f=l(f,i=l(i,r,n,o,f,t[11],2400959708,14),r,n=s(n,10),o,t[10],2400959708,15),i,r=s(r,10),n,t[0],2400959708,14),i=l(i=s(i,10),r=l(r,n=l(n,o,f,i,r,t[8],2400959708,15),o,f=s(f,10),i,t[12],2400959708,9),n,o=s(o,10),f,t[4],2400959708,8),n=l(n=s(n,10),o=l(o,f=l(f,i,r,n,o,t[13],2400959708,9),i,r=s(r,10),n,t[3],2400959708,14),f,i=s(i,10),r,t[7],2400959708,5),f=l(f=s(f,10),i=l(i,r=l(r,n,o,f,i,t[15],2400959708,6),n,o=s(o,10),f,t[14],2400959708,8),r,n=s(n,10),o,t[5],2400959708,6),r=c(r=s(r,10),n=l(n,o=l(o,f,i,r,n,t[6],2400959708,5),f,i=s(i,10),r,t[2],2400959708,12),o,f=s(f,10),i,t[4],2840853838,9),o=c(o=s(o,10),f=c(f,i=c(i,r,n,o,f,t[0],2840853838,15),r,n=s(n,10),o,t[5],2840853838,5),i,r=s(r,10),n,t[9],2840853838,11),i=c(i=s(i,10),r=c(r,n=c(n,o,f,i,r,t[7],2840853838,6),o,f=s(f,10),i,t[12],2840853838,8),n,o=s(o,10),f,t[2],2840853838,13),n=c(n=s(n,10),o=c(o,f=c(f,i,r,n,o,t[10],2840853838,12),i,r=s(r,10),n,t[14],2840853838,5),f,i=s(i,10),r,t[1],2840853838,12),f=c(f=s(f,10),i=c(i,r=c(r,n,o,f,i,t[3],2840853838,13),n,o=s(o,10),f,t[8],2840853838,14),r,n=s(n,10),o,t[11],2840853838,11),r=c(r=s(r,10),n=c(n,o=c(o,f,i,r,n,t[6],2840853838,8),f,i=s(i,10),r,t[15],2840853838,5),o,f=s(f,10),i,t[13],2840853838,6),o=s(o,10);var A=this._a,p=this._b,d=this._c,m=this._d,y=this._e;y=c(y,A=c(A,p,d,m,y,t[5],1352829926,8),p,d=s(d,10),m,t[14],1352829926,9),p=c(p=s(p,10),d=c(d,m=c(m,y,A,p,d,t[7],1352829926,9),y,A=s(A,10),p,t[0],1352829926,11),m,y=s(y,10),A,t[9],1352829926,13),m=c(m=s(m,10),y=c(y,A=c(A,p,d,m,y,t[2],1352829926,15),p,d=s(d,10),m,t[11],1352829926,15),A,p=s(p,10),d,t[4],1352829926,5),A=c(A=s(A,10),p=c(p,d=c(d,m,y,A,p,t[13],1352829926,7),m,y=s(y,10),A,t[6],1352829926,7),d,m=s(m,10),y,t[15],1352829926,8),d=c(d=s(d,10),m=c(m,y=c(y,A,p,d,m,t[8],1352829926,11),A,p=s(p,10),d,t[1],1352829926,14),y,A=s(A,10),p,t[10],1352829926,14),y=l(y=s(y,10),A=c(A,p=c(p,d,m,y,A,t[3],1352829926,12),d,m=s(m,10),y,t[12],1352829926,6),p,d=s(d,10),m,t[6],1548603684,9),p=l(p=s(p,10),d=l(d,m=l(m,y,A,p,d,t[11],1548603684,13),y,A=s(A,10),p,t[3],1548603684,15),m,y=s(y,10),A,t[7],1548603684,7),m=l(m=s(m,10),y=l(y,A=l(A,p,d,m,y,t[0],1548603684,12),p,d=s(d,10),m,t[13],1548603684,8),A,p=s(p,10),d,t[5],1548603684,9),A=l(A=s(A,10),p=l(p,d=l(d,m,y,A,p,t[10],1548603684,11),m,y=s(y,10),A,t[14],1548603684,7),d,m=s(m,10),y,t[15],1548603684,7),d=l(d=s(d,10),m=l(m,y=l(y,A,p,d,m,t[8],1548603684,12),A,p=s(p,10),d,t[12],1548603684,7),y,A=s(A,10),p,t[4],1548603684,6),y=l(y=s(y,10),A=l(A,p=l(p,d,m,y,A,t[9],1548603684,15),d,m=s(m,10),y,t[1],1548603684,13),p,d=s(d,10),m,t[2],1548603684,11),p=h(p=s(p,10),d=h(d,m=h(m,y,A,p,d,t[15],1836072691,9),y,A=s(A,10),p,t[5],1836072691,7),m,y=s(y,10),A,t[1],1836072691,15),m=h(m=s(m,10),y=h(y,A=h(A,p,d,m,y,t[3],1836072691,11),p,d=s(d,10),m,t[7],1836072691,8),A,p=s(p,10),d,t[14],1836072691,6),A=h(A=s(A,10),p=h(p,d=h(d,m,y,A,p,t[6],1836072691,6),m,y=s(y,10),A,t[9],1836072691,14),d,m=s(m,10),y,t[11],1836072691,12),d=h(d=s(d,10),m=h(m,y=h(y,A,p,d,m,t[8],1836072691,13),A,p=s(p,10),d,t[12],1836072691,5),y,A=s(A,10),p,t[2],1836072691,14),y=h(y=s(y,10),A=h(A,p=h(p,d,m,y,A,t[10],1836072691,13),d,m=s(m,10),y,t[0],1836072691,13),p,d=s(d,10),m,t[4],1836072691,7),p=u(p=s(p,10),d=u(d,m=h(m,y,A,p,d,t[13],1836072691,5),y,A=s(A,10),p,t[8],2053994217,15),m,y=s(y,10),A,t[6],2053994217,5),m=u(m=s(m,10),y=u(y,A=u(A,p,d,m,y,t[4],2053994217,8),p,d=s(d,10),m,t[1],2053994217,11),A,p=s(p,10),d,t[3],2053994217,14),A=u(A=s(A,10),p=u(p,d=u(d,m,y,A,p,t[11],2053994217,14),m,y=s(y,10),A,t[15],2053994217,6),d,m=s(m,10),y,t[0],2053994217,14),d=u(d=s(d,10),m=u(m,y=u(y,A,p,d,m,t[5],2053994217,6),A,p=s(p,10),d,t[12],2053994217,9),y,A=s(A,10),p,t[2],2053994217,12),y=u(y=s(y,10),A=u(A,p=u(p,d,m,y,A,t[13],2053994217,9),d,m=s(m,10),y,t[9],2053994217,12),p,d=s(d,10),m,t[7],2053994217,5),p=a(p=s(p,10),d=u(d,m=u(m,y,A,p,d,t[10],2053994217,15),y,A=s(A,10),p,t[14],2053994217,8),m,y=s(y,10),A,t[12],0,8),m=a(m=s(m,10),y=a(y,A=a(A,p,d,m,y,t[15],0,5),p,d=s(d,10),m,t[10],0,12),A,p=s(p,10),d,t[4],0,9),A=a(A=s(A,10),p=a(p,d=a(d,m,y,A,p,t[1],0,12),m,y=s(y,10),A,t[5],0,5),d,m=s(m,10),y,t[8],0,14),d=a(d=s(d,10),m=a(m,y=a(y,A,p,d,m,t[7],0,6),A,p=s(p,10),d,t[6],0,8),y,A=s(A,10),p,t[2],0,13),y=a(y=s(y,10),A=a(A,p=a(p,d,m,y,A,t[13],0,6),d,m=s(m,10),y,t[14],0,5),p,d=s(d,10),m,t[0],0,15),p=a(p=s(p,10),d=a(d,m=a(m,y,A,p,d,t[3],0,13),y,A=s(A,10),p,t[9],0,11),m,y=s(y,10),A,t[11],0,11),m=s(m,10);var g=this._b+n+m|0;this._b=this._c+o+y|0,this._c=this._d+f+A|0,this._d=this._e+i+p|0,this._e=this._a+r+d|0,this._a=g},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new e(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=o}).call(e,i("EuP9").Buffer)},Z7yx:function(t,e,i){var r=i("X3l8").Buffer;function n(t,e,i){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([i?e:n])]),n}e.encrypt=function(t,e,i){for(var o=e.length,s=r.allocUnsafe(o),a=-1;++a<o;)s[a]=n(t,e[a],i);return s}},ZHok:function(t,e,i){"use strict";t.exports=function t(e){return t.definition={type:"object",macro:function(t){return 0==t.length||(1==t.length?{required:t}:{oneOf:t.map(function(t){return{required:[t]}})})},metaSchema:{type:"array",items:{type:"string"}}},e.addKeyword("oneRequired",t.definition),e}},Zd9X:function(t,e,i){"use strict";const r=i("5U1j");t.exports=function(t){const e=t.query;return"string"==typeof e&&""!==e?r(t.query):e&&"object"==typeof e?e:null}},ZdvT:function(t,e,i){"use strict";t.exports=Object.getOwnPropertyDescriptor},ZmO1:function(t,e,i){var r;r=function(){"use strict";var t,e,i=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,e.ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,e.ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/}(t={exports:{}},t.exports),t.exports);(e=i)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default;var r=i.Space_Separator,n=i.ID_Start,o=i.ID_Continue;function s(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"$"===t||"_"===t||n.test(t)}function a(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"$"===t||"_"===t||""===t||""===t||o.test(t)}function u(t){return/[0-9]/.test(t)}function h(t){return/[0-9A-Fa-f]/.test(t)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=void 0,f=void 0,A=void 0,p=void 0,d=void 0,m=void 0,y=void 0,g=void 0,v=void 0,b=void 0,w=void 0,x=void 0,M=void 0,_=void 0;function S(){for(b="default",w="",x=!1,M=1;;){_=B();var t=C[b]();if(t)return t}}function B(){if(c[p])return String.fromCodePoint(c.codePointAt(p))}function E(){var t=B();return"\n"===t?(d++,m=0):t?m+=t.length:m++,t&&(p+=t.length),t}var C={default:function(){switch(_){case"\t":case"\v":case"\f":case" ":case"":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void E();case"/":return E(),void(b="comment");case void 0:return E(),T("eof")}if(t=_,!r.test(t))return C[f]();var t;E()},comment:function(){switch(_){case"*":return E(),void(b="multiLineComment");case"/":return E(),void(b="singleLineComment")}throw I(E())},multiLineComment:function(){switch(_){case"*":return E(),void(b="multiLineCommentAsterisk");case void 0:throw I(E())}E()},multiLineCommentAsterisk:function(){switch(_){case"*":return void E();case"/":return E(),void(b="default");case void 0:throw I(E())}E(),b="multiLineComment"},singleLineComment:function(){switch(_){case"\n":case"\r":case"\u2028":case"\u2029":return E(),void(b="default");case void 0:return E(),T("eof")}E()},value:function(){switch(_){case"{":case"[":return T("punctuator",E());case"n":return E(),F("ull"),T("null",null);case"t":return E(),F("rue"),T("boolean",!0);case"f":return E(),F("alse"),T("boolean",!1);case"-":case"+":return"-"===E()&&(M=-1),void(b="sign");case".":return w=E(),void(b="decimalPointLeading");case"0":return w=E(),void(b="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return w=E(),void(b="decimalInteger");case"I":return E(),F("nfinity"),T("numeric",1/0);case"N":return E(),F("aN"),T("numeric",NaN);case'"':case"'":return x='"'===E(),w="",void(b="string")}throw I(E())},identifierNameStartEscape:function(){if("u"!==_)throw I(E());E();var t=P();switch(t){case"$":case"_":break;default:if(!s(t))throw L()}w+=t,b="identifierName"},identifierName:function(){switch(_){case"$":case"_":case"":case"":return void(w+=E());case"\\":return E(),void(b="identifierNameEscape")}if(!a(_))return T("identifier",w);w+=E()},identifierNameEscape:function(){if("u"!==_)throw I(E());E();var t=P();switch(t){case"$":case"_":case"":case"":break;default:if(!a(t))throw L()}w+=t,b="identifierName"},sign:function(){switch(_){case".":return w=E(),void(b="decimalPointLeading");case"0":return w=E(),void(b="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return w=E(),void(b="decimalInteger");case"I":return E(),F("nfinity"),T("numeric",M*(1/0));case"N":return E(),F("aN"),T("numeric",NaN)}throw I(E())},zero:function(){switch(_){case".":return w+=E(),void(b="decimalPoint");case"e":case"E":return w+=E(),void(b="decimalExponent");case"x":case"X":return w+=E(),void(b="hexadecimal")}return T("numeric",0*M)},decimalInteger:function(){switch(_){case".":return w+=E(),void(b="decimalPoint");case"e":case"E":return w+=E(),void(b="decimalExponent")}if(!u(_))return T("numeric",M*Number(w));w+=E()},decimalPointLeading:function(){if(u(_))return w+=E(),void(b="decimalFraction");throw I(E())},decimalPoint:function(){switch(_){case"e":case"E":return w+=E(),void(b="decimalExponent")}return u(_)?(w+=E(),void(b="decimalFraction")):T("numeric",M*Number(w))},decimalFraction:function(){switch(_){case"e":case"E":return w+=E(),void(b="decimalExponent")}if(!u(_))return T("numeric",M*Number(w));w+=E()},decimalExponent:function(){switch(_){case"+":case"-":return w+=E(),void(b="decimalExponentSign")}if(u(_))return w+=E(),void(b="decimalExponentInteger");throw I(E())},decimalExponentSign:function(){if(u(_))return w+=E(),void(b="decimalExponentInteger");throw I(E())},decimalExponentInteger:function(){if(!u(_))return T("numeric",M*Number(w));w+=E()},hexadecimal:function(){if(h(_))return w+=E(),void(b="hexadecimalInteger");throw I(E())},hexadecimalInteger:function(){if(!h(_))return T("numeric",M*Number(w));w+=E()},string:function(){switch(_){case"\\":return E(),void(w+=function(){switch(B()){case"b":return E(),"\b";case"f":return E(),"\f";case"n":return E(),"\n";case"r":return E(),"\r";case"t":return E(),"\t";case"v":return E(),"\v";case"0":if(E(),u(B()))throw I(E());return"\0";case"x":return E(),function(){var t="",e=B();if(!h(e))throw I(E());if(t+=E(),!h(e=B()))throw I(E());return t+=E(),String.fromCodePoint(parseInt(t,16))}();case"u":return E(),P();case"\n":case"\u2028":case"\u2029":return E(),"";case"\r":return E(),"\n"===B()&&E(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw I(E())}return E()}());case'"':return x?(E(),T("string",w)):void(w+=E());case"'":return x?void(w+=E()):(E(),T("string",w));case"\n":case"\r":throw I(E());case"\u2028":case"\u2029":break;case void 0:throw I(E())}w+=E()},start:function(){switch(_){case"{":case"[":return T("punctuator",E())}b="value"},beforePropertyName:function(){switch(_){case"$":case"_":return w=E(),void(b="identifierName");case"\\":return E(),void(b="identifierNameStartEscape");case"}":return T("punctuator",E());case'"':case"'":return x='"'===E(),void(b="string")}if(s(_))return w+=E(),void(b="identifierName");throw I(E())},afterPropertyName:function(){if(":"===_)return T("punctuator",E());throw I(E())},beforePropertyValue:function(){b="value"},afterPropertyValue:function(){switch(_){case",":case"}":return T("punctuator",E())}throw I(E())},beforeArrayValue:function(){if("]"===_)return T("punctuator",E());b="value"},afterArrayValue:function(){switch(_){case",":case"]":return T("punctuator",E())}throw I(E())},end:function(){throw I(E())}};function T(t,e){return{type:t,value:e,line:d,column:m}}function F(t){var e=!0,i=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;if(B()!==s)throw I(E());E()}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}function P(){for(var t="",e=4;e-- >0;){if(!h(B()))throw I(E());t+=E()}return String.fromCodePoint(parseInt(t,16))}var O={start:function(){if("eof"===y.type)throw U();D()},beforePropertyName:function(){switch(y.type){case"identifier":case"string":return g=y.value,void(f="afterPropertyName");case"punctuator":return void R();case"eof":throw U()}},afterPropertyName:function(){if("eof"===y.type)throw U();f="beforePropertyValue"},beforePropertyValue:function(){if("eof"===y.type)throw U();D()},beforeArrayValue:function(){if("eof"===y.type)throw U();"punctuator"!==y.type||"]"!==y.value?D():R()},afterPropertyValue:function(){if("eof"===y.type)throw U();switch(y.value){case",":return void(f="beforePropertyName");case"}":R()}},afterArrayValue:function(){if("eof"===y.type)throw U();switch(y.value){case",":return void(f="beforeArrayValue");case"]":R()}},end:function(){}};function D(){var t=void 0;switch(y.type){case"punctuator":switch(y.value){case"{":t={};break;case"[":t=[]}break;case"null":case"boolean":case"numeric":case"string":t=y.value}if(void 0===v)v=t;else{var e=A[A.length-1];Array.isArray(e)?e.push(t):Object.defineProperty(e,g,{value:t,writable:!0,enumerable:!0,configurable:!0})}if(null!==t&&"object"===(void 0===t?"undefined":l(t)))A.push(t),f=Array.isArray(t)?"beforeArrayValue":"beforePropertyName";else{var i=A[A.length-1];f=null==i?"end":Array.isArray(i)?"afterArrayValue":"afterPropertyValue"}}function R(){A.pop();var t=A[A.length-1];f=null==t?"end":Array.isArray(t)?"afterArrayValue":"afterPropertyValue"}function I(t){return k(void 0===t?"JSON5: invalid end of input at "+d+":"+m:"JSON5: invalid character '"+function(t){var e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){var i=t.charCodeAt(0).toString(16);return"\\x"+("00"+i).substring(i.length)}return t}(t)+"' at "+d+":"+m)}function U(){return k("JSON5: invalid end of input at "+d+":"+m)}function L(){return k("JSON5: invalid identifier character at "+d+":"+(m-=5))}function k(t){var e=new SyntaxError(t);return e.lineNumber=d,e.columnNumber=m,e}return{parse:function(t,e){c=String(t),f="start",A=[],p=0,d=1,m=0,y=void 0,g=void 0,v=void 0;do{y=S(),O[f]()}while("eof"!==y.type);return"function"==typeof e?function t(e,i,r){var n=e[i];if(null!=n&&"object"===(void 0===n?"undefined":l(n)))if(Array.isArray(n))for(var o=0;o<n.length;o++){var s=String(o),a=t(n,s,r);void 0===a?delete n[s]:Object.defineProperty(n,s,{value:a,writable:!0,enumerable:!0,configurable:!0})}else for(var u in n){var h=t(n,u,r);void 0===h?delete n[u]:Object.defineProperty(n,u,{value:h,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,i,n)}({"":v},"",e):v},stringify:function(t,e,i){var r=[],n="",o=void 0,u=void 0,h="",c=void 0;if(null==e||"object"!==(void 0===e?"undefined":l(e))||Array.isArray(e)||(i=e.space,c=e.quote,e=e.replacer),"function"==typeof e)u=e;else if(Array.isArray(e)){o=[];var f=!0,A=!1,p=void 0;try{for(var d,m=e[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var y=d.value,g=void 0;"string"==typeof y?g=y:("number"==typeof y||y instanceof String||y instanceof Number)&&(g=String(y)),void 0!==g&&o.indexOf(g)<0&&o.push(g)}}catch(t){A=!0,p=t}finally{try{!f&&m.return&&m.return()}finally{if(A)throw p}}}return i instanceof Number?i=Number(i):i instanceof String&&(i=String(i)),"number"==typeof i?i>0&&(i=Math.min(10,Math.floor(i)),h="          ".substr(0,i)):"string"==typeof i&&(h=i.substr(0,10)),function t(e,i){var s=i[e];switch(null!=s&&("function"==typeof s.toJSON5?s=s.toJSON5(e):"function"==typeof s.toJSON&&(s=s.toJSON(e))),u&&(s=u.call(i,e,s)),s instanceof Number?s=Number(s):s instanceof String?s=String(s):s instanceof Boolean&&(s=s.valueOf()),s){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof s?v(s):"number"==typeof s?String(s):"object"===(void 0===s?"undefined":l(s))?Array.isArray(s)?function(e){if(r.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");r.push(e);var i=n;n+=h;for(var o=[],s=0;s<e.length;s++){var a=t(String(s),e);o.push(void 0!==a?a:"null")}var u=void 0;if(0===o.length)u="[]";else if(""===h){var l=o.join(",");u="["+l+"]"}else{var c=",\n"+n,f=o.join(c);u="[\n"+n+f+",\n"+i+"]"}return r.pop(),n=i,u}(s):function(e){if(r.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");r.push(e);var i=n;n+=h;var s=o||Object.keys(e),a=[],u=!0,l=!1,c=void 0;try{for(var f,A=s[Symbol.iterator]();!(u=(f=A.next()).done);u=!0){var p=f.value,d=t(p,e);if(void 0!==d){var m=b(p)+":";""!==h&&(m+=" "),m+=d,a.push(m)}}}catch(e){l=!0,c=e}finally{try{!u&&A.return&&A.return()}finally{if(l)throw c}}var y=void 0;if(0===a.length)y="{}";else{var g=void 0;if(""===h)g=a.join(","),y="{"+g+"}";else{var v=",\n"+n;g=a.join(v),y="{\n"+n+g+",\n"+i+"}"}}return r.pop(),n=i,y}(s):void 0}("",{"":t});function v(t){var e={"'":.1,'"':.2},i={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},r="",n=!0,o=!1,s=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var h=a.value;switch(h){case"'":case'"':e[h]++,r+=h;continue}if(i[h])r+=i[h];else if(h<" "){var l=h.charCodeAt(0).toString(16);r+="\\x"+("00"+l).substring(l.length)}else r+=h}}catch(t){o=!0,s=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw s}}var f=c||Object.keys(e).reduce(function(t,i){return e[t]<e[i]?t:i});return f+(r=r.replace(new RegExp(f,"g"),i[f]))+f}function b(t){if(0===t.length)return v(t);var e=String.fromCodePoint(t.codePointAt(0));if(!s(e))return v(t);for(var i=e.length;i<t.length;i++)if(!a(String.fromCodePoint(t.codePointAt(i))))return v(t);return t}}}},t.exports=r()},Zq1s:function(t,e,i){"use strict";var r=i("/Ose"),n=i("YhKI"),o=i("JaR3"),s=i("X3l8").Buffer,a=i("2JY6"),u=i("35aj"),h=i("Ml+W"),l=s.alloc(128),c={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},f={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function A(t){return(new n).update(t).digest()}function p(t,e,i){var n=function(t){return"rmd160"===t||"ripemd160"===t?A:"md5"===t?r:function(e){return o(t).update(e).digest()}}(t),a="sha512"===t||"sha384"===t?128:64;e.length>a?e=n(e):e.length<a&&(e=s.concat([e,l],a));for(var u=s.allocUnsafe(a+c[t]),h=s.allocUnsafe(a+c[t]),f=0;f<a;f++)u[f]=54^e[f],h[f]=92^e[f];var p=s.allocUnsafe(a+i+4);u.copy(p,0,0,a),this.ipad1=p,this.ipad2=u,this.opad=h,this.alg=t,this.blocksize=a,this.hash=n,this.size=c[t]}p.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,i,r,n){a(i,r),t=h(t,u,"Password"),e=h(e,u,"Salt");var o=(n||"sha1").toLowerCase(),l=f[o]||o,A=c[l];if("number"!=typeof A||!A)throw new TypeError("Digest algorithm not supported: "+n);var d=new p(l,t,e.length),m=s.allocUnsafe(r),y=s.allocUnsafe(e.length+4);e.copy(y,0,0,e.length);for(var g=0,v=A,b=Math.ceil(r/v),w=1;w<=b;w++){y.writeUInt32BE(w,e.length);for(var x=d.run(y,d.ipad1),M=x,_=1;_<i;_++){M=d.run(M,d.ipad2);for(var S=0;S<v;S++)x[S]^=M[S]}x.copy(m,g),g+=v}return m}},Ztz7:function(t,e,i){(function(e){var r=i("s83z"),n=new(i("aK3A")),o=new r(24),s=new r(11),a=new r(10),u=new r(3),h=new r(7),l=i("3fzc"),c=i("rOku");function f(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this._pub=new r(t),this}function A(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this._priv=new r(t),this}t.exports=d;var p={};function d(t,e,i){this.setGenerator(e),this.__prime=new r(t),this._prime=r.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=f,this.setPrivateKey=A):this._primeCode=8}function m(t,i){var r=new e(t.toArray());return i?r.toString(i):r}Object.defineProperty(d.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var i=e.toString("hex"),r=[i,t.toString(16)].join("_");if(r in p)return p[r];var c,f=0;if(t.isEven()||!l.simpleSieve||!l.fermatTest(t)||!n.test(t))return f+=1,f+="02"===i||"05"===i?8:4,p[r]=f,f;switch(n.test(t.shrn(1))||(f+=2),i){case"02":t.mod(o).cmp(s)&&(f+=8);break;case"05":(c=t.mod(a)).cmp(u)&&c.cmp(h)&&(f+=8);break;default:f+=4}return p[r]=f,f}(this.__prime,this.__gen)),this._primeCode}}),d.prototype.generateKeys=function(){return this._priv||(this._priv=new r(c(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},d.prototype.computeSecret=function(t){var i=(t=(t=new r(t)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new e(i.toArray()),o=this.getPrime();if(n.length<o.length){var s=new e(o.length-n.length);s.fill(0),n=e.concat([s,n])}return n},d.prototype.getPublicKey=function(t){return m(this._pub,t)},d.prototype.getPrivateKey=function(t){return m(this._priv,t)},d.prototype.getPrime=function(t){return m(this.__prime,t)},d.prototype.getGenerator=function(t){return m(this._gen,t)},d.prototype.setGenerator=function(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this.__gen=t,this._gen=new r(t),this}}).call(e,i("EuP9").Buffer)},aK3A:function(t,e,i){var r=i("LbEw"),n=i("txgm");function o(t){this.rand=t||new n.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var n=new r(this.rand.generate(i))}while(n.cmp(t)>=0);return n},o.prototype._randrange=function(t,e){var i=e.sub(t);return t.add(this._randbelow(i))},o.prototype.test=function(t,e,i){var n=t.bitLength(),o=r.mont(t),s=new r(1).toRed(o);e||(e=Math.max(1,n/48|0));for(var a=t.subn(1),u=0;!a.testn(u);u++);for(var h=t.shrn(u),l=a.toRed(o);e>0;e--){var c=this._randrange(new r(2),a);i&&i(c);var f=c.toRed(o).redPow(h);if(0!==f.cmp(s)&&0!==f.cmp(l)){for(var A=1;A<u;A++){if(0===(f=f.redSqr()).cmp(s))return!1;if(0===f.cmp(l))break}if(A===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var i=t.bitLength(),n=r.mont(t),o=new r(1).toRed(n);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),a=0;!s.testn(a);a++);for(var u=t.shrn(a),h=s.toRed(n);e>0;e--){var l=this._randrange(new r(2),s),c=t.gcd(l);if(0!==c.cmpn(1))return c;var f=l.toRed(n).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(h)){for(var A=1;A<a;A++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(h))break}if(A===a)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},aNYs:function(t,e,i){"use strict";t.exports=function t(e){return t.definition={type:"number",macro:function(t,e){var i=t[0],r=t[1],n=e.exclusiveRange;return function(t,e,i){if(void 0!==i&&"boolean"!=typeof i)throw new Error("Invalid schema for exclusiveRange keyword, should be boolean");if(t>e||i&&t==e)throw new Error("There are no numbers in range")}(i,r,n),!0===n?{exclusiveMinimum:i,exclusiveMaximum:r}:{minimum:i,maximum:r}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}},e.addKeyword("range",t.definition),e.addKeyword("exclusiveRange"),e}},aRdZ:function(t,e,i){"use strict";var r=i("2tI2");t.exports=r.getPrototypeOf||null},aY2F:function(t,e,i){"use strict";var r=i("LC74"),n=i("C015"),o=i("CzQx"),s=i("X3l8").Buffer,a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}r(u,n),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=s.allocUnsafe(48);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},b5i5:function(t,e,i){"use strict";(function(t){var r=i("woOf"),n=i.n(r),o=i("+6Bu"),s=i.n(o),a=i("mvHQ"),u=i.n(a),h=i("PO8r"),l=i("Rj4H"),c=i("3zDK"),f=i("s0MJ"),A=i("2uFj"),p=i("c2Ch"),d=i("JKES"),m=i("LjvF"),y=i("yqEb"),g=i("EPz7");i.n(g);e.a={components:{Menu:h.a,Asset:l.a,Location:d.a,Trajectory:m.a,Trajectorys:y.a},name:"StaffManagement",data:function(){return{i8n:this.$store.state.i18n,assetBase:A.b,pickerOptions:{shortcuts:[{text:this.$t("staffmanagement.Lasthour1"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-36e5),t.$emit("pick",[i,e])}},{text:this.$t("staffmanagement.Lasthour3"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-108e5),t.$emit("pick",[i,e])}},{text:this.$t("staffmanagement.Lasthour6"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-216e5),t.$emit("pick",[i,e])}}]},contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,superid:this.$store.state.userInfo.superid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,projectid:this.$store.state.intoProjectid,intoProjectid:this.$store.state.intoProjectid,projectTable:[],labelPosition:"right",loading:!1,show:!1,searchList:{username:"",sex:"",cardno:"",tenantid:this.$store.state.userInfo.tenantid,projectid:this.$store.state.projectid,depart:"",maplabel:"",page:1,count:20,ontime:"",offtime:""},currentProjectid:{projectid:""},searchSelectPerson:[],searchSelectProject:[],tableData:[],pageCount:20,currentPage1:1,total:0,add:!1,addData:{username:"",birthday:"",sex:"",cardno:"",tenantid:this.$store.state.userInfo.tenantid,projectid:"",depart:"",maplabel:"",tel:"",memo:"",worktype:""},haveImage:!1,delImage:!1,ImagePath:c.a.host+"user/addMemberMapFile",ImagePathEdit:c.a.host+"user/updateMemberMapFile",fileListAdd:[],fileListEdit:[],dialogImageUrl:"",dialogVisible:!1,userIdForPic:{},userIdForPicEdit:{},myHeader:{tenantkey:this.$store.state.userInfo.tenantkey,ts:(new Date).getTime(),tenantid:this.$store.state.userInfo.tenantid,userName:this.$store.state.userInfo.username},myHeaderEdit:{tenantkey:this.$store.state.userInfo.tenantkey,ts:(new Date).getTime(),tenantid:this.$store.state.userInfo.tenantid,userName:this.$store.state.userInfo.username},ProjectTye:"",departList:[],worktypeList:[],maplabelList:[],sexType:[{index:1,value:this.$t("staffmanagement.man")},{index:2,value:this.$t("staffmanagement.woman")},{index:3,value:this.$t("staffmanagement.unknown")}],trajectory:!1,trajectory3d:!1,edit:!1,actions:!1,actionData:{projectid:"",maplabel:"",username:""},actionTableData:[],actionTableDataArr:[],actionTime:"",editData:{tenantid:this.$store.state.userInfo.tenantid,username:"",birthday:"",sex:"",cardno:"",projectid:"",depart:"",maplabel:"",tel:"",memo:"",id:"",worktype:"",filename:""},editRules:{tel:[{pattern:/^1[3|4|5|7|8][0-9]\d{8}$/,message:this.$t("companymanagement.clienttelrule3"),trigger:"blur"}],username:[{required:!0,message:this.$t("checkwork.title1"),trigger:"blur"}],age:[{pattern:/^(?:0|[1-9][0-9]?|100)$/,message:this.$t("staffmanagement.enternamerule"),trigger:"blur"}]},deleTpl:!1,deleStaff:"",deleId:"",delFileName:"",multipleSelection:[],removeStaff:!1,removeDatas:[],removeStaffDatas:{ids:"",usernamelist:"",projectid:"",maplabellist:""},addWorktype:!1,addDepartktype:!1,outdoor:!1,indoor:!1,isSearchAction:!1,showIcon:!1,item_info:"",item_info_id:"",item_info_name:"",item_info_projectid:"",radio:"",IconSrc1:"../../../static/1.png",IconSrc2:"../../../static/2.png",IconSrc3:"../../../static/3.png",IconSrc4:"../../../static/4.png",IconSrc5:"../../../static/5.png",IconSrc6:"../../../static/6.png",IconSrc7:"../../../static/7.png",IconSrc8:"../../../static/8.png",IconSrc9:"../../../static/9.png",IconSrc10:"../../../static/10.png",headlistdata:""}},methods:{importExcel:function(){document.getElementById("articleImageFile").click()},importExcels:function(e){var r,n=this,o=event.currentTarget.files[0],s=new FileReader;FileReader.prototype.readAsBinaryString=function(e){var o,s,a="",h=new FileReader;h.onload=function(e){for(var l=new Uint8Array(h.result),c=l.byteLength,f=0;f<c;f++)a+=String.fromCharCode(l[f]);var A=i("uXZL");o=A.read(a,{type:"binary"}),s=A.utils.sheet_to_json(o.Sheets[o.SheetNames[0]]),r=n.dateTransition(s);var d={msg:u()(r),tenantid:n.tenantid_A,projectid:n.$store.state.projectid};Object(p._114)(d,n.tenantkey_A,n.tenantid_A,n.userName).then(function(e){1001==e.code?(n.$message({message:n.$t("terminal.tet2"),type:"warning"}),t("#articleImageFile").val(""),n.getMemberLists()):(n.$message({message:"zh"==n.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t("#articleImageFile").val(""))})},h.readAsArrayBuffer(e)},s.readAsBinaryString(o)},importExcelWorktype:function(){document.getElementById("articleWorktypeFile").click()},importExcelWorktypes:function(){var e,r=this,n=event.currentTarget.files[0],o=new FileReader;FileReader.prototype.readAsBinaryString=function(n){var o,s,a="",h=new FileReader;h.onload=function(n){for(var l=new Uint8Array(h.result),c=l.byteLength,f=0;f<c;f++)a+=String.fromCharCode(l[f]);var A=i("uXZL");o=A.read(a,{type:"binary"}),s=A.utils.sheet_to_json(o.Sheets[o.SheetNames[0]]),e=r.dateTransitionWork(s);var d={msg:u()(e),tenantid:r.tenantid_A,projectid:r.$store.state.projectid};Object(p._109)(d,r.tenantkey_A,r.tenantid_A,r.userName).then(function(e){1001==e.code?(r.$message({message:r.$t("terminal.tet2"),type:"warning"}),t("#articleWorktypeFile").val("")):(r.$message({message:"zh"==r.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t("#articleWorktypeFile").val(""))})},h.readAsArrayBuffer(n)},o.readAsBinaryString(n)},dateTransition:function(t){for(var e=[],i={},r=0;r<t.length;r++){for(var n in i={},t[r])switch(n){case this.$t("staff.employeename"):i.username=t[r][n];break;case this.$t("staff.birthday"):i.birthday=t[r][n];break;case this.$t("staff.gender1"):i.sex=t[r][n];break;case this.$t("staff.telephone"):i.tel=t[r][n];break;case this.$t("staff.Department1"):i.depart=t[r][n];break;case this.$t("staff.Typeofwork"):i.worktype=t[r][n];break;case this.$t("staff.Workcardnumber"):i.maplabel=t[r][n];break;case this.$t("staff.Jobnumber1"):i.cardno=t[r][n];break;case this.$t("staff.Remark"):i.memo=t[r][n]}e.push(i)}return e},dateTransitionWork:function(t){for(var e=[],i={},r=0;r<t.length;r++){for(var n in i={},t[r])switch(n){case this.$t("staff.Tradesettings"):i.name=t[r][n];break;case this.$t("staff.icon"):i.colour=t[r][n];break;case"type":i.type=t[r][n]}e.push(i)}return e},exportExcel:function(){0!=this.multipleSelection.length?(this.headlistdata=[{msg:this.$t("staff.employeename"),value:"username"},{msg:this.$t("staff.birthday"),value:"birthday"},{msg:this.$t("staff.gender1"),value:"sex"},{msg:this.$t("staff.telephone"),value:"tel"},{msg:this.$t("staff.Department1"),value:"depart"},{msg:this.$t("staff.Typeofwork"),value:"worktype"},{msg:this.$t("staff.Workcardnumber"),value:"maplabel"},{msg:this.$t("staff.Jobnumber1"),value:"cardno"},{msg:this.$t("staff.Remark"),value:"memo"},{msg:this.$t("otherDev.beacon"),value:"flag"}],1==this.$store.state.intoProjectType?this.multipleSelection.forEach(function(t){t.flag=!0}):this.multipleSelection.forEach(function(t){t.flag=!1}),this.export2Excel(this.multipleSelection)):this.$message({message:this.$t("staff.selectStaff"),type:"warning"})},export2Excel:function(t){for(var e=this,r=this,n=[],o=["username","birthday","sex","tel","depart","worktype","maplabel","cardno","flag","memo"],s=0;s<o.length;s++){n.push(o[s]);for(var a=0;a<r.headlistdata.length;a++)o[s]==r.headlistdata[a].value&&(o[s]=r.headlistdata[a].msg)}i.e(55).then(function(){var s=i("zWO4").export_json_to_excel,a=n,u=t;s(o,e.formatJson(a,u),r.$t("list.Employeemanagement"))}.bind(null,i)).catch(i.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})},exportExcelAll:function(){var t=this;this.headlistdata=[{msg:t.$t("staff.employeename"),value:"username"},{msg:t.$t("staff.birthday"),value:"birthday"},{msg:t.$t("staff.gender1"),value:"sex"},{msg:t.$t("staff.telephone"),value:"tel"},{msg:t.$t("staff.Department1"),value:"depart"},{msg:t.$t("staff.Typeofwork"),value:"worktype"},{msg:t.$t("staff.Workcardnumber"),value:"maplabel"},{msg:t.$t("staff.Jobnumber1"),value:"cardno"},{msg:t.$t("staff.Remark"),value:"memo"},{msg:t.$t("otherDev.beacon"),value:"flag"}];var e={username:"",sex:"",cardno:"",tenantid:t.$store.state.userInfo.tenantid,projectid:this.$store.state.projectid,depart:"",maplabel:"",page:"",count:"",ontime:"",offtime:""};Object(p._66)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(1==t.$store.state.intoProjectType?e.data.list.forEach(function(t){t.flag=!0}):e.data.list.forEach(function(t){t.flag=!1}),t.export2Excel(e.data.list)):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},exportExcelWorkType:function(){var t=this;this.headlistdata=[{msg:t.$t("staff.Tradesettings"),value:"name"},{msg:t.$t("staff.icon"),value:"colour"},{msg:"type",value:"type"}];var e={tenantid:t.$store.state.userInfo.tenantid,projectid:this.$store.state.projectid};Object(p._69)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001===e.code?t.exportWorkTypeExcel(e.data):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},exportWorkTypeExcel:function(t){for(var e=this,r=this,n=[],o=["name","colour","type"],s=0;s<o.length;s++){n.push(o[s]);for(var a=0;a<r.headlistdata.length;a++)o[s]==r.headlistdata[a].value&&(o[s]=r.headlistdata[a].msg)}i.e(55).then(function(){var s=i("zWO4").export_json_to_excel,a=n,u=t;s(o,e.formatJson(a,u),r.$t("staff.Tradesettings"))}.bind(null,i)).catch(i.oe)},ages:function(t){if(""==t||null==t)return 0;var e=t.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==e)return 0;var i=new Date(e[1],e[3]-1,e[4]);return i.getFullYear()==e[1]&&i.getMonth()+1==e[3]&&i.getDate()==e[4]?(new Date).getFullYear()-e[1]:0},showTrajectory:function(){this.isSearchAction=!0,this.actionTableData=[],this.searchActions()},showTrajectorys:function(){var t=this;t.actionTableDataArr=[];var e=[],i=JSON.parse(u()(t.actionTableData)),r=i[0];if(i.forEach(function(n,o){n.groundid===r.groundid?e.push(n):(t.actionTableDataArr.push(e),r=n,(e=[]).push(n)),o==i.length-1&&t.actionTableDataArr.push(e)}),t.actionTableDataArr.length>0){var n=void 0,o=void 0;if(null==t.actionTime||0==t.actionTime.length)n=(Date.parse(new Date)-36e5)/1e3,o=Date.parse(new Date)/1e3;else{var s=t.actionTime[0],a=t.actionTime[1];s=s&&""!=s?f.a.formatDate.format(new Date(s),"yyyy-MM-dd hh:mm:ss"):"",a=a&&""!=a?f.a.formatDate.format(new Date(a),"yyyy-MM-dd hh:mm:ss"):"",s.length>0&&a.length>0&&(s=Date.parse(new Date(s))/1e3,a=Date.parse(new Date(a))/1e3),n=s,o=a}if(this.isSearchAction=!1,t.actionTableDataArr[0][0].groundid){var h={groundid:t.actionTableDataArr[0][0].groundid};Object(p._23)(h,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(2==e.data.list[0].maptype?(t.trajectory3d=!0,t.$nextTick(function(){t.$refs.trajectorys.search(t.actionTableDataArr,n,o,2)})):(t.trajectory=!0,t.$nextTick(function(){t.$refs.trajectory.search(t.actionTableDataArr,n,o,1)})))})}else t.trajectory=!0,t.$nextTick(function(){t.$refs.trajectory.search(t.actionTableDataArr,n,o,1)})}},closePopup:function(t){this.trajectory=!1},closePopup3d:function(t){this.trajectory3d=!1},projectList:function(){var t=this;return this.projectTable.filter(function(e){return e.projectid!==t.$store.state.projectid})},datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var i=new Date(t);return i.getFullYear()+"-"+e(i.getMonth()+1)+"-"+e(i.getDate())+" "+(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+e(i.getMinutes())+":"+e(i.getSeconds())},formatDatetime:function(t){if(null==t||0==t)return"";var e=new Date(1e3*parseInt(t)).toUTCString();return this.datetimecut(e)},formatSeconds:function(t){var e=parseInt(t),i=Math.floor(e/3600)<10?"0"+Math.floor(e/3600):Math.floor(e/3600),r=Math.floor(e/60%60)<10?"0"+Math.floor(e/60%60):Math.floor(e/60%60),n=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60),o="";return"00"!==i&&(o+=i+"h"),"00"!==r&&(o+=" "+r+"min"),o+=" "+n+"s"},goSetWorktype:function(){this.getProjectLists();var t=this;this.currentProjectid.projectid="";var e={tenantid:this.tenantid_A,projectid:this.$store.state.projectid};Object(p._69)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.worktypeList=e.data,t.addWorktype=!0):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},deleWorktypeRow:function(t,e,i,r,n){if(i&&e){var o=this,s={tenantid:r,projectid:n,name:i};Object(p.S)(u()(s),this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?o.worktypeList.splice(t,1):o.$message({message:"zh"==o.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else this.worktypeList.splice(t,1)},changeIcon:function(t){this.showIcon=!0,this.radio=t.colour,this.item_info=t,this.item_info_id=t.id,this.item_info_name=t.name,this.item_info_projectid=t.projectid},chooseIcon:function(){if(void 0==this.item_info_id)return this.item_info.colour=this.radio,void(this.showIcon=!1);var t=this,e={name:this.item_info_name,colour:this.radio,projectid:this.item_info_projectid};Object(p._175)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.item_info.colour=t.radio,t.showIcon=!1):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},addWorktypeRowTrue:function(){var e=this,i=!1,r=!1,n={};if(t.each(this.worktypeList,function(t,e){void 0===e.id&&(e.id=""),e.name||(i=!0),n[e.name]&&(r=!0),n[e.name]=!0}),i)return e.$message({message:this.$t("staffmanagement.cannotempty"),type:"error"}),void this.worktypeList.splice(-1,1);if(r)return e.$message({message:this.$t("staffmanagement.alreadyexists"),type:"error"}),void this.worktypeList.splice(-1,1);var o={branchs:this.worktypeList.filter(function(t){return!t.id}).map(function(t){t.id;return s()(t,["id"])}),tenantid:this.tenantid_A,projectid:this.$store.state.projectid};if(0==o.branchs.length)return e.addWorktype=!1,void(i=!1);o.branchs=u()(o.branchs),Object(p.p)(o,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.addWorktype=!1,e.getWorktyper(),i=!1):(e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"}),i=!1)})},addWorktypeRow:function(){this.worktypeList.push({colour:1})},importWorktype:function(t){if(t){var e=this,i={tenantid:this.tenantid_A,projectid:this.currentProjectid.projectid};Object(p._69)(i,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){if(1001==t.code){if(t.data.length>0){var i=t.data;e.worktypeList.forEach(function(t){i.forEach(function(e,r){e.name==t.name&&i.splice(r,1)})}),i.forEach(function(t){e.worktypeList.push({tenantid:t.tenantid,projectid:t.projectid,name:t.name,colour:t.colour,id:""})})}}else e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}},goSetDepart:function(){this.getProjectLists();var t=this;this.currentProjectid.projectid="";var e={tenantid:this.tenantid_A,projectid:this.$store.state.projectid};Object(p._34)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.departList=e.data,t.addDepartktype=!0):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},importDepart:function(t){if(t){var e=this,i={tenantid:this.tenantid_A,projectid:this.currentProjectid.projectid};Object(p._34)(i,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){if(1001==t.code){if(t.data.length>0){var i=t.data;e.departList.forEach(function(t){i.forEach(function(e,r){e.name==t.name&&i.splice(r,1)})}),i.forEach(function(t){e.departList.push({name:t.name,tenantid:t.tenantid,projectid:t.projectid,id:""})})}}else e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}},addDepartRow:function(){this.departList.push({})},deleDepartRow:function(t,e,i,r,n){if(i&&e){var o=this,s={tenantid:r,projectid:n,name:i};Object(p.H)(u()(s),this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?o.departList.splice(t,1):o.$message({message:"zh"==o.$store.state.i18n?e.msg:e.enMsg,type:"error"})})}else this.departList.splice(t,1)},addDepartRowTrue:function(){var e=this,i=!1,r=!1,n={};if(t.each(this.departList,function(t,e){void 0===e.id&&(e.id=""),e.name||(i=!0),n[e.name]&&(r=!0),n[e.name]=!0}),i)return e.$message({message:this.$t("staffmanagement.Departmentempty"),type:"error"}),void this.departList.splice(-1,1);if(r)return e.$message({message:this.$t("staffmanagement.Departmentexists"),type:"error"}),void this.departList.splice(-1,1);var o={branchs:this.departList.filter(function(t){return!t.id}).map(function(t){t.id;return s()(t,["id"])}),tenantid:this.tenantid_A,projectid:this.$store.state.projectid};if(0==o.branchs.length)return e.addDepartktype=!1,void(i=!1);o.branchs=u()(o.branchs),Object(p.g)(o,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code?(e.$message({message:e.$t("staffmanagement.Setsuccessfully"),type:"success"}),e.addDepartktype=!1,i=!1,e.getDepart()):(e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"}),i=!1)})},changeItem:function(){this.show=!this.show},myHeaderd:function(){(new Date).getTime();this.myHeader.tenantkey=this.tenantkey_A,this.myHeader.ts=this.time_A,this.myHeader.tenantid=this.tenantid_A,this.myHeader.userName=this.userName},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handlePictureCardPreviewEdit:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},picSuccess:function(t,e,i){this.$refs.upload.clearFiles(),1001==t.code?(this.add=!1,this.getMemberLists(),this.getMemberListss(),this.$message({message:this.$t("staffmanagement.addsuccess"),type:"success"}),this.loading=!1,this.$refs.addData.resetFields()):(this.$message({message:t.msg,type:"warning"}),this.loading=!1)},picSuccessEdit:function(t,e,i){this.$refs.upload.clearFiles(),1001==t.code?(this.edit=!1,this.getMemberLists(),this.$message({message:this.$t("staffmanagement.editsuccess"),type:"success"}),this.loading=!1):(this.$message({message:res.msg,type:"warning"}),this.loading=!1)},picError:function(t){this.loading=!1,this.$refs.upload.clearFiles()},picErrorEdit:function(t){this.loading=!1,this.$refs.upload.clearFiles()},handleExceed:function(t,e){this.$message.warning(this.$t("tet.tet10"))},handleExceedEdit:function(t,e){this.$message.warning(this.$t("tet.tet11"))},beforeAvatarUpload:function(t){var e=t.name.lastIndexOf("."),i=t.name.substr(e+1);if("jpg"!=i&&"jpeg"!=i&&"png"!=i)return this.$message.error(this.$t("tet.tet12")),this.loading=!1,!1;var r=t.size/1024/1024<2;return r||(this.$message.error(this.$t("tet.tet13")),this.loading=!1),r},beforeAvatarUploadEdit:function(t){var e=t.name.lastIndexOf("."),i=t.name.substr(e+1);if("jpg"!=i&&"jpeg"!=i&&"png"!=i)return this.$message.error(this.$t("tet.tet12")),this.loading=!1,!1;var r=t.size/1024/1024<2;return r||(this.$message.error(this.$t("tet.tet13")),this.loading=!1),r},handleChange:function(t){t&&(this.haveImage=!0,this.delImage=!1)},handleRemove:function(t){t&&(this.haveImage=!1,this.delImage=!0)},handleCurrentChange:function(t){if(this.searchList.page=t,this.searchList.count=this.pageCount,this.$route.query.euis){var e=this,i={projectid:this.projectid,euis:this.$store.state.staffEuis,page:this.searchList.page,count:this.searchList.count,flag:this.$route.query.flag};Object(p._63)(i,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code&&(e.tableData=t.data.list,e.total=t.data.size)})}else this.getMemberLists()},handleSizeChange:function(t){if(this.pageCount=t,this.searchList.count=t,this.searchList.page=1,this.currentPage1=1,this.$route.query.euis){var e=this,i={projectid:this.projectid,euis:this.$store.state.staffEuis,page:this.searchList.page,count:this.searchList.count,flag:this.$route.query.flag};Object(p._63)(i,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code&&(e.tableData=t.data.list,e.total=t.data.size)})}else this.getMemberLists()},handleSelectionChange:function(t){this.multipleSelection=t},clearBtn:function(){this.searchList={username:"",sex:"",cardno:"",tenantid:this.$store.state.userInfo.tenantid,projectid:this.$store.state.projectid,depart:"",maplabel:"",page:1,count:this.pageCount,ontime:"",offtime:""},this.$route.query.euis="",this.$store.commit("changeStaffEuis",""),this.currentPage1=1,this.getMemberLists()},getMemberLists:function(){var t=this;Object(p._66)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size,t.searchList.ontime="",t.searchList.offtime="")})},getMemberListss:function(){var t=this,e={projectid:this.$store.state.projectid};Object(p._67)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){var i=e.data,r={};t.searchSelectPerson=i.reduce(function(t,e){return!r[e.username]&&(r[e.username]=t.push(e)),t},[])}})},addStaff:function(){this.fileListAdd=[],this.haveImage=!1;5==this.contrForPrionum?(this.addData={username:"",birthday:"",sex:"",cardno:"",tenantid:this.tenantid_A,projectid:this.$store.state.projectid,depart:"",maplabel:"",tel:"",memo:"",worktype:""},this.projectChanged(this.$store.state.projectid)):this.addData={username:"",birthday:"",sex:"",cardno:"",tenantid:this.tenantid_A,projectid:"",depart:"",maplabel:"",tel:"",memo:""},this.getWorktyper(),this.getDepart(),this.add=!0},addCancel:function(t){this.add=!1,this.loading=!1,this.$refs[t].resetFields()},addTrue:function(t){var e=this;this.addData.tenantid=this.tenantid_A,this.$refs[t].validate(function(i){i&&(e.loading=!0,e.addData.type=e.ProjectTye,e.haveImage?(e.userIdForPic.username=e.addData.username,e.userIdForPic.birthday=e.addData.birthday,e.userIdForPic.sex=e.addData.sex,e.userIdForPic.cardno=e.addData.cardno,e.userIdForPic.tenantid=e.addData.tenantid,e.userIdForPic.projectid=e.addData.projectid,e.userIdForPic.depart=e.addData.depart,e.userIdForPic.maplabel=null==e.addData.maplabel?"":e.addData.maplabel,e.userIdForPic.memo=e.addData.memo,e.userIdForPic.type=e.addData.type,e.userIdForPic.worktype=e.addData.worktype,e.userIdForPic.tel=e.addData.tel,e.$refs.upload.submit()):Object(p.o)(e.addData,e.tenantkey_A,e.tenantid_A,e.userName).then(function(i){1001==i.code?(e.add=!1,e.getMemberLists(),e.getMemberListss(),e.$message({message:e.$t("staffmanagement.addsuccess"),type:"success"}),e.loading=!1,e.$refs[t].resetFields()):(e.$message({message:"zh"==e.$store.state.i18n?i.msg:i.enMsg,type:"error"}),e.loading=!1)}))})},staffEdit:function(t){this.haveImage=!1,this.delImage=!1,this.tableData[t].filename?this.fileListEdit=[{url:c.a.host+"profile/"+this.tableData[t].filename}]:this.fileListEdit=[],this.editData.username=this.tableData[t].username,this.editData.birthday=null==this.tableData[t].birthday?"":this.tableData[t].birthday,this.editData.sex=this.tableData[t].sex,this.editData.cardno=this.tableData[t].cardno,this.editData.tenantid=this.tableData[t].tenantid,this.editData.depart=this.tableData[t].depart,this.editData.projectid=this.tableData[t].projectid,this.editData.type=this.tableData[t].type,this.editData.maplabel=this.tableData[t].maplabel,this.editData.memo=this.tableData[t].memo,this.editData.tel=this.tableData[t].tel,this.editData.id=this.tableData[t].id,this.editData.worktype=null==this.tableData[t].worktype?"":this.tableData[t].worktype,this.editData.filename=this.tableData[t].filename,this.projectChanged(this.editData.projectid),this.getWorktyper(),this.getDepart(),this.edit=!0},editCancel:function(t){this.edit=!1,this.loading=!1,this.$refs[t].resetFields()},editTrue:function(t){var e=this;this.$refs[t].validate(function(i){if(!i)return!1;e.loading=!0,e.editData.type=e.ProjectTye,e.haveImage?(e.userIdForPicEdit.id=e.editData.id,e.userIdForPicEdit.username=e.editData.username,e.userIdForPicEdit.birthday=e.editData.birthday,e.userIdForPicEdit.sex=e.editData.sex,e.userIdForPicEdit.cardno=e.editData.cardno,e.userIdForPicEdit.depart=e.editData.depart,e.userIdForPicEdit.maplabel=null==e.editData.maplabel?"":e.editData.maplabel,e.userIdForPicEdit.tel=e.editData.tel,e.userIdForPicEdit.memo=e.editData.memo,e.userIdForPicEdit.worktype=e.editData.worktype,e.userIdForPicEdit.type=e.editData.type,e.$refs.upload.submit()):(e.delImage&&(e.editData.filename=""),Object(p._173)(e.editData,e.tenantkey_A,e.tenantid_A,e.userName).then(function(i){1001==i.code?(e.edit=!1,e.getMemberLists(),e.$message({message:e.$t("staffmanagement.editsuccess"),type:"success"}),e.loading=!1,e.$refs[t].resetFields()):(e.$message({message:"zh"==e.$store.state.i18n?i.msg:i.enMsg,type:"error"}),e.loading=!1)}))})},staffAction:function(t){this.actionData.projectid=this.tableData[t].projectid,this.actionData.maplabel=this.tableData[t].maplabel,this.actionData.username=this.tableData[t].username,""!=this.tableData[t].maplabel&&null!=this.tableData[t].maplabel?this.actions=!0:this.$message({message:this.$t("staffmanagement.Pleasecard"),type:"warning"})},searchAction:function(){var t=this,e={projectid:this.actionData.projectid,deveui:this.actionData.maplabel,username:this.actionData.username,begintime:"",endtime:"",devtype:1==this.$store.state.intoProjectType?1:2,timezone:this.$store.state.intoProjectTimezone};if(this.actionTime){if(this.actionTime[1].getTime()-this.actionTime[0].getTime()>864e5)return void t.$message({message:this.$t("staffmanagement.Thehours"),type:"warning"});var i=t.actionTime[0],r=t.actionTime[1];i=i&&""!=i?f.a.formatDate.format(new Date(i),"yyyy-MM-dd hh:mm:ss"):"",r=r&&""!=r?f.a.formatDate.format(new Date(r),"yyyy-MM-dd hh:mm:ss"):"",i.length>0&&r.length>0&&(i=Date.parse(new Date(i))/1e3,r=Date.parse(new Date(r))/1e3),e.begintime=i,e.endtime=r}else{new Date;e.begintime=(Date.parse(new Date)-36e5)/1e3,e.endtime=Date.parse(new Date)/1e3}""!=this.actionData.maplabel&&null!=this.actionData.maplabel&&""!=this.actionData.username&&null!=this.actionData.username||this.$message({message:this.$t("staffmanagement.cardtime"),type:"warning"});var n=this.$loading({lock:!0,text:this.$t("tet.Loading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".action")});Object(p._41)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){if(0==e.data.tranchelist.length)return t.$message({message:t.$t("staffmanagement.Nodata"),type:"warning"}),t.actionTableData=[],void n.close();t.actionTableData=e.data.tranchelist.reverse();for(var i=0;i<t.actionTableData.length;i++)t.actionTableData[i].gpstime=t.formatDatetime(t.actionTableData[i].gpstime)}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"});n.close()})},searchActions:function(){var t=this,e={projectid:this.actionData.projectid,deveui:this.actionData.maplabel,username:this.actionData.username,begintime:"",endtime:"",devtype:1==this.$store.state.intoProjectType?1:2,timezone:this.$store.state.intoProjectTimezone,postype:1};if(this.actionTime){if(this.actionTime[1].getTime()-this.actionTime[0].getTime()>864e5)return void t.$message({message:this.$t("staffmanagement.Thehours"),type:"warning"});var i=t.actionTime[0],r=t.actionTime[1];i=i&&""!=i?f.a.formatDate.format(new Date(i),"yyyy-MM-dd hh:mm:ss"):"",r=r&&""!=r?f.a.formatDate.format(new Date(r),"yyyy-MM-dd hh:mm:ss"):"",i.length>0&&r.length>0&&(i=Date.parse(new Date(i))/1e3,r=Date.parse(new Date(r))/1e3),e.begintime=i,e.endtime=r}else e.begintime=(Date.parse(new Date)-36e5)/1e3,e.endtime=Date.parse(new Date)/1e3;if(""!=this.actionData.maplabel&&null!=this.actionData.maplabel&&""!=this.actionData.username&&null!=this.actionData.username){var n=this.$loading({lock:!0,text:this.$t("tet.Loading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".action")});Object(p._41)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){if(1001==e.code){if(0==e.data.tranchelist.length)return t.$message({message:t.$t("staffmanagement.Nodata"),type:"warning"}),t.actionTableData=[],void n.close();t.actionTableData=e.data.tranchelist.reverse();for(var i=0;i<t.actionTableData.length;i++)t.actionTableData[i].gpstime=t.formatDatetime(t.actionTableData[i].gpstime);t.showTrajectorys()}else t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"});n.close()})}else this.$message({message:this.$t("staffmanagement.cardtime"),type:"warning"})},closeAction:function(){this.actionTableData=[]},closetrajectoryAction:function(){var t=this;this.$nextTick(function(){t.$refs.trajectory.stop(!0),t.$refs.trajectory.closeTime(),t.$refs.trajectory.removeVectorLayer()})},closetrajectoryAction3d:function(){var t=this;this.$nextTick(function(){t.$refs.trajectorys.mapOut()})},staffDele:function(t){5==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio||4==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio?this.$message({message:this.$t("staffmanagement.permissiondelete"),type:"warning"}):(this.deleStaff=this.tableData[t].username,this.deleId=this.tableData[t].id,this.delFileName=this.tableData[t].filename,this.deleTpl=!0)},deleTrue:function(){var t=this,e={filename:this.delFileName,username:this.deleStaff,id:this.deleId};this.loading=!0,Object(p.R)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.deleTpl=!1,t.getMemberLists(),t.getMemberListss(),t.$message({message:t.$t("staffmanagement.delsuccess"),type:"success"}),t.loading=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t.loading=!1)})},searchStaff:function(){var t=this;this.searchList.page=1,this.currentPage1=1;var e=this;Object(p._66)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(i){1001==i.code&&(e.tableData=i.data.list,e.total=i.data.size,e.$message({message:e.$t("staffmanagement.searchsuccess"),type:"success"})),t.searchList.count=10})},getProjectLists:function(){var t=this,e=this,i={tenantid:this.$store.state.userInfo.tenantid};Object(p._81)(i,this.$store.state.userInfo.tenantkey,this.$store.state.userInfo.tenantid,this.userName).then(function(i){if(1001==i.code){var r=i.data.list;t.projectTable=i.data.list;var n={};e.searchSelectProject=r.reduce(function(t,e){return!n[e.projectid]&&(n[e.projectid]=t.push(e)),t},[])}})},projectChanged:function(t){for(var e=this,i=0;i<this.searchSelectProject.length;i++)t==this.searchSelectProject[i].projectid&&(e.ProjectTye=this.searchSelectProject[i].type);if(1==e.ProjectTye){e.maplabelList=[];var r={projectid:t,devtype:1,workstate:1,inallot:1,inuse:2};Object(p._40)(r,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){if(1001==t.code){e.maplabelList=t.data;for(var i=0;i<e.maplabelList.length;i++)e.maplabelList[i]={deveui:e.maplabelList[i]}}})}else if(2==e.ProjectTye){e.maplabelList=[];var n={projectid:t,inallot:1,inuse:2,workstate:1,type:4};Object(p._22)(n,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){if(1001==t.code){e.maplabelList=t.data;for(var i=0;i<e.maplabelList.length;i++)e.maplabelList[i]={deveui:e.maplabelList[i].beaconid,major:e.maplabelList[i].major,minor:e.maplabelList[i].minor}}})}},removeStaffs:function(t){if(this.removeStaffDatas={ids:"",usernamelist:"",projectid:this.projectid,maplabellist:""},0!=this.multipleSelection.length){for(var e=0;e<this.multipleSelection.length;e++){if(""==this.multipleSelection[e].maplabel)return void this.$message({message:this.$t("staffmanagement.staffrule1"),type:"warning"});this.removeStaffDatas.ids+=this.multipleSelection[e].id+",",this.removeStaffDatas.usernamelist+=this.multipleSelection[e].username+",",this.removeStaffDatas.maplabellist+=this.multipleSelection[e].maplabel+","}this.removeStaffDatas.ids=this.removeStaffDatas.ids.slice(0,this.removeStaffDatas.ids.length-1),this.removeStaffDatas.usernamelist=this.removeStaffDatas.usernamelist.slice(0,this.removeStaffDatas.usernamelist.length-1),this.removeStaffDatas.maplabellist=this.removeStaffDatas.maplabellist.slice(0,this.removeStaffDatas.maplabellist.length-1),this.removeDatas=this.multipleSelection,this.removeStaff=!0}else this.$message({message:this.$t("staffmanagement.staffrule"),type:"warning"})},removeTrue:function(){var t=this;this.loading=!0,Object(p._174)(this.removeStaffDatas,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.removeStaff=!1,t.getMemberLists(),t.$message({message:t.$t("staffmanagement.staffrule2"),type:"success"}),t.loading=!1):(t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}),t.loading=!1)})},getDepart:function(){var t=this,e={tenantid:this.tenantid_A,projectid:this.$store.state.projectid};Object(p._34)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.departList=e.data)})},getWorktyper:function(){var t=this,e={tenantid:this.tenantid_A,projectid:this.$store.state.projectid};Object(p._69)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.worktypeList=e.data)})},goLocation:function(t){var e=this;if(""!=this.tableData[t].maplabel&&null!=this.tableData[t].maplabel){var i={deveui:this.tableData[t].maplabel,projectid:this.tableData[t].projectid,devtype:1};Object(p._44)(i,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){if(1001==t.code){if(""==t.data.x&&""==t.data.y)return void e.$message({message:e.$t("LocationIndoor.tet3"),type:"warning"});1==t.data.postype?e.$router.push({path:"/location/indoor/locationindoor",query:{deveui:t.data.deveui}}):2==t.data.postype&&e.$router.push({path:"/location/outdoor/locationoutdoor",query:{deveui:t.data.deveui}})}else e.$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}else this.$message({message:this.$t("staffmanagement.Pleasecard"),type:"warning"})}},beforeMount:function(){if(1==this.$route.query.pertype?this.searchList.ontime=this.$route.query.timeStamp:2==this.$route.query.pertype&&(this.searchList.offtime=this.$route.query.timeStamp),this.$route.query.euis){var t=this,e={projectid:this.projectid,euis:this.$store.state.staffEuis,page:1,count:20,flag:this.$route.query.flag};Object(p._63)(e,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size)})}else this.$route.query.username?(this.searchList.page=1,this.currentPage1=1,this.searchList={username:this.$route.query.username,sex:"",cardno:"",tenantid:this.$store.state.userInfo.tenantid,projectid:this.$store.state.projectid,depart:"",maplabel:"",page:1,count:20,ontime:"",offtime:""},this.searchStaff()):this.getMemberLists();this.getProjectLists(),this.getMemberListss(),this.getDepart()},watch:{"$i18n.locale":function(){this.i8n=this.$store.state.i18n,n()(this.$data.sexType,this.$options.data.call(this).sexType),n()(this.$data.editRules,this.$options.data.call(this).editRules)}}}}).call(e,i("7t+N"))},bMQ9:function(t,e,i){"use strict";var r=i("1lLf"),n=i("YSDb"),o=i("3nYK"),s=r.rotl32,a=r.sum32,u=r.sum32_5,h=o.ft_1,l=n.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(f,l),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=s(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],o=this.h[1],l=this.h[2],f=this.h[3],A=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20),d=u(s(n,5),h(p,o,l,f),A,i[r],c[p]);A=f,f=l,l=s(o,30),o=n,n=d}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],l),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],A)},f.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},bSQl:function(t,e,i){var r=i("BCiZ"),n=i("/y0r"),o=i("X3l8").Buffer,s=i("6hW9"),a=i("z+8S"),u=i("BEbT"),h=i("Cgw8");function l(t,e,i){a.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(i),this._mode=t,this._autopadding=!0}i("LC74")(l,a),l.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get();)i=this._mode.encrypt(this,e),r.push(i);return o.concat(r)};var c=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function A(t,e,i){var a=r[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof i&&(i=o.from(i)),"GCM"!==a.mode&&i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===a.type?new s(a.module,e,i):"auth"===a.type?new n(a.module,e,i):new l(a.module,e,i)}l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(c))throw this._cipher.scrub(),new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return o.concat([this.cache,e])},e.createCipheriv=A,e.createCipher=function(t,e){var i=r[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=h(e,!1,i.key,i.iv);return A(t,n.key,n.iv)}},bYmx:function(module,exports,__webpack_require__){var r;r=function(__WEBPACK_EXTERNAL_MODULE__47__){return function(t){var e={};function i(r){var n;return(e[r]||(n=e[r]={i:r,l:!1,exports:{}},t[r].call(n.exports,n,n.exports,i),n.l=!0,n)).exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.u)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.u?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=50)}([function(t,e,i){"use strict";var r,n,o=t.exports=i(2),s=i(16),a=(o.codegen=i(40),o.fetch=i(41),o.path=i(42),o.fs=o.inquire("fs"),o.toArray=function(t){if(t){for(var e=Object.keys(t),i=new Array(e.length),r=0;r<e.length;)i[r]=t[e[r++]];return i}return[]},o.toObject=function(t){for(var e={},i=0;i<t.length;){var r=t[i++],n=t[i++];void 0!==n&&(e[r]=n)}return e},/\\/g),u=/"/g,h=(o.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},o.safeProp=function(t){return!/^[$\w_]+$/.test(t)||o.isReserved(t)?'["'+t.replace(a,"\\\\").replace(u,'\\"')+'"]':"."+t},o.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},/_([a-z])/g),l=(o.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(h,function(t,e){return e.toUpperCase()})},o.compareFieldsById=function(t,e){return t.id-e.id},o.decorateType=function(t,e){return t.$type?(e&&t.$type.name!==e&&(o.decorateRoot.remove(t.$type),t.$type.name=e,o.decorateRoot.add(t.$type)),t.$type):(e=new(r=r||i(18))(e||t.name),o.decorateRoot.add(e),e.ctor=t,Object.defineProperty(t,"$type",{value:e,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:e,enumerable:!1}),e)},0);o.decorateEnum=function(t){var e;return t.$type||(e=new(n=n||i(3))("Enum"+l++,t),o.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e)},o.setProperty=function(t,e,i){if("object"!=typeof t)throw TypeError("dst must be an object");if(e)return function t(e,i,r){var n=i.shift();return"__proto__"!==n&&"prototype"!==n&&(0<i.length?e[n]=t(e[n]||{},i,r):((i=e[n])&&(r=[].concat(i).concat(r)),e[n]=r)),e}(t,e=e.split("."),i);throw TypeError("path must be specified")},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(i(26)))}})},function(t,e,i){"use strict";(function(t){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return"symbol"===i(t=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return String(t);if("object"!==i(r=r.call(t,e)))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(n.key),n)}}var n=null,o=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var i,o,s;function a(){return s.apply(this,arguments)}return i=e,null,(o=[{key:"global",value:(s=function(){if("undefined"!=typeof self&&null!==self&&0!==Object.keys(self).length)return self;if("undefined"!=typeof window&&null!==window&&0!==Object.keys(window).length)return window;if(null!=t&&0!==Object.keys(t).length)return t;var e;if("undefined"!=typeof my)return n||(e=my.getAppIdSync(),n={location:{host:e.appId+".hybrid.alipay-eco.com"}}),n;throw new Error("unable to locate global object")},a.toString=function(){return s.toString()},a)}])&&r(i,o),Object.defineProperty(i,"prototype",{writable:!1}),e}();e.a=o}).call(this,i(9))},function(t,e,i){"use strict";(function(t){var r=e;function n(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;++n)void 0!==t[r[n]]&&i||(t[r[n]]=e[r[n]]);return t}function o(t){function e(t,i){if(!(this instanceof e))return new e(t,i);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&n(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=i(13),r.base64=i(31),r.EventEmitter=i(32),r.float=i(33),r.inquire=i(14),r.utf8=i(34),r.pool=i(35),r.LongBits=i(36),r.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),r.global=r.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var i=t[e];return!(null==i||!t.hasOwnProperty(e))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r.v=null,r._=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._(t):new r.Array(t):r.Buffer?r.v(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){return t=r.LongBits.fromHash(t),r.Long?r.Long.fromBits(t.lo,t.hi,e):t.toNumber(Boolean(e))},r.merge=n,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(t){for(var e={},i=0;i<t.length;++i)e[t[i]]=1;return function(){for(var t=Object.keys(this),i=t.length-1;-1<i;--i)if(1===e[t[i]]&&void 0!==this[t[i]]&&null!==this[t[i]])return t[i]}},r.oneOfSetter=function(t){return function(e){for(var i=0;i<t.length;++i)t[i]!==e&&delete this[t[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r.j=function(){var t=r.Buffer;t?(r.v=t.from!==Uint8Array.from&&t.from||function(e,i){return new t(e,i)},r._=t.allocUnsafe||function(e){return new t(e)}):r.v=r._=null}}).call(this,i(9))},function(t,e,i){"use strict";t.exports=s;var r=i(4),n=(((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum",i(6)),o=i(0);function s(t,e,i,n,o){if(r.call(this,t,i),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=o||{},this.reserved=void 0,e)for(var s=Object.keys(e),a=0;a<s.length;++a)"number"==typeof e[s[a]]&&(this.valuesById[this.values[s[a]]=e[s[a]]]=s[a])}s.fromJSON=function(t,e){return(t=new s(t,e.values,e.options,e.comment,e.comments)).reserved=e.reserved,t},s.prototype.toJSON=function(t){return t=!!t&&Boolean(t.keepComments),o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(t,e,i){if(!o.isString(t))throw TypeError("name must be a string");if(!o.isInteger(e))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=i||null,this},s.prototype.remove=function(t){if(!o.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this},s.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},s.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},function(t,e,i){"use strict";(t.exports=o).className="ReflectionObject";var r,n=i(0);function o(t,e){if(!n.isString(t))throw TypeError("name must be a string");if(e&&!n.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1,(t=t.root)instanceof r&&t.S(this)},o.prototype.onRemove=function(t){(t=t.root)instanceof r&&t.O(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(t){if(this.options)return this.options[t]},o.prototype.setOption=function(t,e,i){return i&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this},o.prototype.setParsedOption=function(t,e,i){this.parsedOptions||(this.parsedOptions=[]);var r,o,s=this.parsedOptions;return i?(r=s.find(function(e){return Object.prototype.hasOwnProperty.call(e,t)}))?(o=r[t],n.setProperty(o,i,e)):((r={})[t]=n.setProperty({},i,e),s.push(r)):((o={})[t]=e,s.push(o)),this},o.prototype.setOptions=function(t,e){if(t)for(var i=Object.keys(t),r=0;r<i.length;++r)this.setOption(i[r],t[i[r]],e);return this},o.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},o.j=function(t){r=t}},function(t,e,i){"use strict";t.exports=h;var r,n=i(4),o=(((h.prototype=Object.create(n.prototype)).constructor=h).className="Field",i(3)),s=i(7),a=i(0),u=/^required|optional|repeated$/;function h(t,e,i,r,o,h,l){if(a.isObject(r)?(l=o,h=r,r=o=void 0):a.isObject(o)&&(l=h,h=o,o=void 0),n.call(this,t,h),!a.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!a.isString(i))throw TypeError("type must be a string");if(void 0!==r&&!u.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");this.rule=(r="proto3_optional"===r?"optional":r)&&"optional"!==r?r:void 0,this.type=i,this.id=e,this.extend=o||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.T=null,this.comment=l}h.fromJSON=function(t,e){return new h(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)},Object.defineProperty(h.prototype,"packed",{get:function(){return null===this.T&&(this.T=!1!==this.getOption("packed")),this.T}}),h.prototype.setOption=function(t,e,i){return"packed"===t&&(this.T=null),n.prototype.setOption.call(this,t,e,i)},h.prototype.toJSON=function(t){return t=!!t&&Boolean(t.keepComments),a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},h.prototype.resolve=function(){var t;return this.resolved?this:(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o)&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t),this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this))},h.d=function(t,e,i,r){return"function"==typeof e?e=a.decorateType(e).name:e&&"object"==typeof e&&(e=a.decorateEnum(e).name),function(n,o){a.decorateType(n.constructor).add(new h(o,t,e,i,{default:r}))}},h.j=function(t){r=t}},function(t,e,i){"use strict";t.exports=c;var r,n,o,s=i(4),a=(((c.prototype=Object.create(s.prototype)).constructor=c).className="Namespace",i(5)),u=i(8),h=i(0);function l(t,e){if(t&&t.length){for(var i={},r=0;r<t.length;++r)i[t[r].name]=t[r].toJSON(e);return i}}function c(t,e){s.call(this,t,e),this.nested=void 0,this.R=null}function f(t){return t.R=null,t}c.fromJSON=function(t,e){return new c(t,e.options).addJSON(e.nested)},c.arrayToJSON=l,c.isReservedId=function(t,e){if(t)for(var i=0;i<t.length;++i)if("string"!=typeof t[i]&&t[i][0]<=e&&t[i][1]>e)return!0;return!1},c.isReservedName=function(t,e){if(t)for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1},Object.defineProperty(c.prototype,"nestedArray",{get:function(){return this.R||(this.R=h.toArray(this.nested))}}),c.prototype.toJSON=function(t){return h.toObject(["options",this.options,"nested",l(this.nestedArray,t)])},c.prototype.addJSON=function(t){if(t)for(var e,i=Object.keys(t),s=0;s<i.length;++s)e=t[i[s]],this.add((void 0!==e.fields?r:void 0!==e.values?o:void 0!==e.methods?n:void 0!==e.id?a:c).fromJSON(i[s],e));return this},c.prototype.get=function(t){return this.nested&&this.nested[t]||null},c.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},c.prototype.add=function(t){if(!(t instanceof a&&void 0!==t.extend||t instanceof r||t instanceof o||t instanceof n||t instanceof c||t instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof c&&t instanceof c)||e instanceof r||e instanceof n)throw Error("duplicate name '"+t.name+"' in "+this);for(var i=e.nestedArray,s=0;s<i.length;++s)t.add(i[s]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return(this.nested[t.name]=t).onAdd(this),f(this)},c.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),f(this)},c.prototype.define=function(t,e){if(h.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var i=this;0<t.length;){var r=t.shift();if(i.nested&&i.nested[r]){if(!((i=i.nested[r])instanceof c))throw Error("path conflicts with non-namespace objects")}else i.add(i=new c(r))}return e&&i.addJSON(e),i},c.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof c?t[e++].resolveAll():t[e++].resolve();return this.resolve()},c.prototype.lookup=function(t,e,i){if("boolean"==typeof e?(i=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),h.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var r=this.get(t[0]);if(r){if(1===t.length){if(!e||-1<e.indexOf(r.constructor))return r}else if(r instanceof c&&(r=r.lookup(t.slice(1),e,!0)))return r}else for(var n=0;n<this.nestedArray.length;++n)if(this.R[n]instanceof c&&(r=this.R[n].lookup(t,e,!0)))return r;return null===this.parent||i?null:this.parent.lookup(t,e)},c.prototype.lookupType=function(t){var e=this.lookup(t,[r]);if(e)return e;throw Error("no such type: "+t)},c.prototype.lookupEnum=function(t){var e=this.lookup(t,[o]);if(e)return e;throw Error("no such Enum '"+t+"' in "+this)},c.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[r,o]);if(e)return e;throw Error("no such Type or Enum '"+t+"' in "+this)},c.prototype.lookupService=function(t){var e=this.lookup(t,[n]);if(e)return e;throw Error("no such Service '"+t+"' in "+this)},c.j=function(t,e,i){r=t,n=e,o=i}},function(t,e,i){"use strict";i=i(0);var r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function n(t,e){var i=0,n={};for(e|=0;i<t.length;)n[r[i+e]]=t[i++];return n}e.basic=n([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),e.defaults=n([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),e.long=n([0,0,0,1,1],7),e.mapKey=n([0,0,0,5,5,0,0,0,1,1,0,2],2),e.packed=n([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(t,e,i){"use strict";t.exports=s;var r=i(4),n=(((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf",i(5)),o=i(0);function s(t,e,i,n){if(Array.isArray(e)||(i=e,e=void 0),r.call(this,t,i),void 0!==e&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}function a(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}s.fromJSON=function(t,e){return new s(t,e.oneof,e.options,e.comment)},s.prototype.toJSON=function(t){return t=!!t&&Boolean(t.keepComments),o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(t){if(t instanceof n)return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),a(t.partOf=this),this;throw TypeError("field must be a Field")},s.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),-1<(e=this.oneof.indexOf(t.name))&&this.oneof.splice(e,1),t.partOf=null,this},s.prototype.onAdd=function(t){r.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var i=t.get(this.oneof[e]);i&&!i.partOf&&(i.partOf=this).fieldsArray.push(i)}a(this)},s.prototype.onRemove=function(t){for(var e,i=0;i<this.fieldsArray.length;++i)(e=this.fieldsArray[i]).parent&&e.parent.remove(e);r.prototype.onRemove.call(this,t)},s.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,i){o.decorateType(e.constructor).add(new s(i,t)),Object.defineProperty(e,i,{get:o.oneOfGetter(t),set:o.oneOfSetter(t)})}}},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";t.exports=l;var r,n=i(2),o=n.LongBits,s=n.base64,a=n.utf8;function u(t,e,i){this.fn=t,this.len=e,this.next=void 0,this.val=i}function h(){}function l(){this.len=0,this.head=new u(h,0,0),this.tail=this.head,this.states=null}function c(){return n.Buffer?function(){return(l.create=function(){return new r})()}:function(){return new l}}function f(t,e,i){e[i]=255&t}function A(t,e){this.len=t,this.next=void 0,this.val=e}function p(t,e,i){for(;t.hi;)e[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)e[i++]=127&t.lo|128,t.lo=t.lo>>>7;e[i++]=t.lo}function d(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}l.create=c(),l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype.M=function(t,e,i){return this.tail=this.tail.next=new u(t,e,i),this.len+=e,this},(A.prototype=Object.create(u.prototype)).fn=function(t,e,i){for(;127<t;)e[i++]=127&t|128,t>>>=7;e[i]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new A((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.M(p,10,o.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.int64=l.prototype.uint64=function(t){return t=o.from(t),this.M(p,t.length(),t)},l.prototype.sint64=function(t){return t=o.from(t).zzEncode(),this.M(p,t.length(),t)},l.prototype.bool=function(t){return this.M(f,1,t?1:0)},l.prototype.sfixed32=l.prototype.fixed32=function(t){return this.M(d,4,t>>>0)},l.prototype.sfixed64=l.prototype.fixed64=function(t){return t=o.from(t),this.M(d,4,t.lo).M(d,4,t.hi)},l.prototype.float=function(t){return this.M(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.M(n.float.writeDoubleLE,8,t)};var m=n.Array.prototype.set?function(t,e,i){e.set(t,i)}:function(t,e,i){for(var r=0;r<t.length;++r)e[i+r]=t[r]};l.prototype.bytes=function(t){var e,i=t.length>>>0;return i?(n.isString(t)&&(e=l.alloc(i=s.length(t)),s.decode(t,e,0),t=e),this.uint32(i).M(m,i,t)):this.M(f,1,0)},l.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e).M(a.write,e,t):this.M(f,1,0)},l.prototype.fork=function(){return this.states=new function(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}(this),this.head=this.tail=new u(h,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(h,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,e=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=e,this.len+=i),this},l.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,e,i),i+=t.len,t=t.next;return e},l.j=function(t){r=t,l.create=c(),r.j()}},function(t,e,i){"use strict";t.exports=u;var r,n=i(2),o=n.LongBits,s=n.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}function h(){return n.Buffer?function(t){return(u.create=function(t){return n.Buffer.isBuffer(t)?new r(t):c(t)})(t)}:c}var l,c="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")};function f(){var t=new o(0,0),e=0;if(!(4<this.len-this.pos)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,4<this.len-this.pos){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function A(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(A(this.buf,this.pos+=4),A(this.buf,this.pos+=4))}u.create=h(),u.prototype.N=n.Array.prototype.subarray||n.Array.prototype.slice,u.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return l;throw this.pos=this.len,a(this,10)}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return A(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|A(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,i=this.pos+t;if(i>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,i):e===i?new this.buf.constructor(0):this.N.call(this.buf,e,i)},u.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u.j=function(t){r=t,u.create=h(),r.j();var e=n.Long?"toLong":"toNumber";n.merge(u.prototype,{int64:function(){return f.call(this)[e](!1)},uint64:function(){return f.call(this)[e](!0)},sint64:function(){return f.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},function(t,e,i){"use strict";t.exports=n;var r=i(2);function n(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)this[e[i]]=t[e[i]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,e){return this.$type.encode(t,e)},n.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,e){return this.$type.toObject(t,e)},n.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(t,e,i){"use strict";t.exports=function(t,e){for(var i=new Array(arguments.length-1),r=0,n=2,o=!0;n<arguments.length;)i[r++]=arguments[n++];return new Promise(function(n,s){i[r]=function(t){if(o)if(o=!1,t)s(t);else{for(var e=new Array(arguments.length-1),i=0;i<e.length;)e[i++]=arguments[i];n.apply(null,e)}};try{t.apply(e||null,i)}catch(t){o&&(o=!1,s(t))}})}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},function(t,e,i){"use strict";e.Service=i(39)},function(t,e,i){"use strict";t.exports={}},function(t,e,i){"use strict";t.exports=function(t){for(var e,i=o.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),a=t.fieldsArray.slice().sort(o.compareFieldsById),u=0;u<a.length;++u){var h=a[u].resolve(),l=t.k.indexOf(h),c=h.resolvedType instanceof r?"int32":h.type,f=n.basic[c];e="m"+o.safeProp(h.name),h.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",e,h.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(h.id<<3|2)>>>0,8|n.mapKey[h.keyType],h.keyType),void 0===f?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,e):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|f,c,e),i("}")("}")):h.repeated?(i("if(%s!=null&&%s.length){",e,e),h.packed&&void 0!==n.packed[c]?i("w.uint32(%i).fork()",(h.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",c,e)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",e),void 0===f?s(i,h,l,e+"[i]"):i("w.uint32(%i).%s(%s[i])",(h.id<<3|f)>>>0,c,e)),i("}")):(h.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",e,h.name),void 0===f?s(i,h,l,e):i("w.uint32(%i).%s(%s)",(h.id<<3|f)>>>0,c,e))}return i("return w")};var r=i(3),n=i(7),o=i(0);function s(t,e,i,r){e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,r,(e.id<<3|2)>>>0)}},function(t,e,i){"use strict";t.exports=g;var r=i(6),n=(((g.prototype=Object.create(r.prototype)).constructor=g).className="Type",i(3)),o=i(8),s=i(5),a=i(19),u=i(20),h=i(12),l=i(11),c=i(10),f=i(0),A=i(17),p=i(22),d=i(23),m=i(24),y=i(25);function g(t,e){r.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.A=null,this.k=null,this.I=null,this.P=null}function v(t){return t.A=t.k=t.I=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(!this.A){this.A={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var i=this.fields[t[e]],r=i.id;if(this.A[r])throw Error("duplicate id "+r+" in "+this);this.A[r]=i}}return this.A}},fieldsArray:{get:function(){return this.k||(this.k=f.toArray(this.fields))}},oneofsArray:{get:function(){return this.I||(this.I=f.toArray(this.oneofs))}},ctor:{get:function(){return this.P||(this.ctor=g.generateConstructor(this)())},set:function(t){for(var e=t.prototype,i=(e instanceof h||((t.prototype=new h).constructor=t,f.merge(t.prototype,e)),t.$type=t.prototype.$type=this,f.merge(t,h,!0),this.P=t,0);i<this.fieldsArray.length;++i)this.k[i].resolve();var r={};for(i=0;i<this.oneofsArray.length;++i)r[this.I[i].resolve().name]={get:f.oneOfGetter(this.I[i].oneof),set:f.oneOfSetter(this.I[i].oneof)};i&&Object.defineProperties(t.prototype,r)}}}),g.generateConstructor=function(t){for(var e,i=f.codegen(["p"],t.name),r=0;r<t.fieldsArray.length;++r)(e=t.k[r]).map?i("this%s={}",f.safeProp(e.name)):e.repeated&&i("this%s=[]",f.safeProp(e.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},g.fromJSON=function(t,e){for(var i=new g(t,e.options),h=(i.extensions=e.extensions,i.reserved=e.reserved,Object.keys(e.fields)),l=0;l<h.length;++l)i.add((void 0!==e.fields[h[l]].keyType?a:s).fromJSON(h[l],e.fields[h[l]]));if(e.oneofs)for(h=Object.keys(e.oneofs),l=0;l<h.length;++l)i.add(o.fromJSON(h[l],e.oneofs[h[l]]));if(e.nested)for(h=Object.keys(e.nested),l=0;l<h.length;++l){var c=e.nested[h[l]];i.add((void 0!==c.id?s:void 0!==c.fields?g:void 0!==c.values?n:void 0!==c.methods?u:r).fromJSON(h[l],c))}return e.extensions&&e.extensions.length&&(i.extensions=e.extensions),e.reserved&&e.reserved.length&&(i.reserved=e.reserved),e.group&&(i.group=!0),e.comment&&(i.comment=e.comment),i},g.prototype.toJSON=function(t){var e=r.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return f.toObject(["options",e&&e.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,t),"fields",r.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",i?this.comment:void 0])},g.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var i=this.oneofsArray;for(e=0;e<i.length;)i[e++].resolve();return r.prototype.resolveAll.call(this)},g.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},g.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof s&&void 0===t.extend){if((this.A||this.fieldsById)[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),(this.fields[t.name]=t).message=this,t.onAdd(this),v(this)}return t instanceof o?(this.oneofs||(this.oneofs={}),(this.oneofs[t.name]=t).onAdd(this),v(this)):r.prototype.add.call(this,t)},g.prototype.remove=function(t){if(t instanceof s&&void 0===t.extend){if(this.fields&&this.fields[t.name]===t)return delete this.fields[t.name],t.parent=null,t.onRemove(this),v(this);throw Error(t+" is not a member of "+this)}if(t instanceof o){if(this.oneofs&&this.oneofs[t.name]===t)return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),v(this);throw Error(t+" is not a member of "+this)}return r.prototype.remove.call(this,t)},g.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},g.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)},g.prototype.create=function(t){return new this.ctor(t)},g.prototype.setup=function(){for(var t=this.fullName,e=[],i=0;i<this.fieldsArray.length;++i)e.push(this.k[i].resolve().resolvedType);var r;return this.encode=A(this)({Writer:c,types:e,util:f}),this.decode=p(this)({Reader:l,types:e,util:f}),this.verify=d(this)({types:e,util:f}),this.fromObject=m.fromObject(this)({types:e,util:f}),this.toObject=m.toObject(this)({types:e,util:f}),(t=y[t])&&((r=Object.create(this)).fromObject=this.fromObject,this.fromObject=t.fromObject.bind(r),r.toObject=this.toObject,this.toObject=t.toObject.bind(r)),this},g.prototype.encode=function(t,e){return this.setup().encode(t,e)},g.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},g.prototype.decode=function(t,e){return this.setup().decode(t,e)},g.prototype.decodeDelimited=function(t){return t instanceof l||(t=l.create(t)),this.decode(t,t.uint32())},g.prototype.verify=function(t){return this.setup().verify(t)},g.prototype.fromObject=function(t){return this.setup().fromObject(t)},g.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},g.d=function(t){return function(e){f.decorateType(e,t)}}},function(t,e,i){"use strict";t.exports=s;var r=i(5),n=(((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField",i(7)),o=i(0);function s(t,e,i,n,s,a){if(r.call(this,t,e,n,void 0,void 0,s,a),!o.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(t,e){return new s(t,e.id,e.keyType,e.type,e.options,e.comment)},s.prototype.toJSON=function(t){return t=!!t&&Boolean(t.keepComments),o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(t,e,i){return"function"==typeof i?i=o.decorateType(i).name:i&&"object"==typeof i&&(i=o.decorateEnum(i).name),function(r,n){o.decorateType(r.constructor).add(new s(n,t,e,i))}}},function(t,e,i){"use strict";t.exports=a;var r=i(6),n=(((a.prototype=Object.create(r.prototype)).constructor=a).className="Service",i(21)),o=i(0),s=i(15);function a(t,e){r.call(this,t,e),this.methods={},this.D=null}function u(t){return t.D=null,t}a.fromJSON=function(t,e){var i=new a(t,e.options);if(e.methods)for(var r=Object.keys(e.methods),o=0;o<r.length;++o)i.add(n.fromJSON(r[o],e.methods[r[o]]));return e.nested&&i.addJSON(e.nested),i.comment=e.comment,i},a.prototype.toJSON=function(t){var e=r.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return o.toObject(["options",e&&e.options||void 0,"methods",r.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this.D||(this.D=o.toArray(this.methods))}}),a.prototype.get=function(t){return this.methods[t]||r.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?u((this.methods[t.name]=t).parent=this):r.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,u(this)}return r.prototype.remove.call(this,t)},a.prototype.create=function(t,e,i){for(var r,n=new s.Service(t,e,i),a=0;a<this.methodsArray.length;++a){var u=o.lcFirst((r=this.D[a]).resolve().name).replace(/[^$\w_]/g,"");n[u]=o.codegen(["r","c"],o.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return n}},function(t,e,i){"use strict";t.exports=o;var r=i(4),n=(((o.prototype=Object.create(r.prototype)).constructor=o).className="Method",i(0));function o(t,e,i,o,s,a,u,h,l){if(n.isObject(s)?(u=s,s=a=void 0):n.isObject(a)&&(u=a,a=void 0),void 0!==e&&!n.isString(e))throw TypeError("type must be a string");if(!n.isString(i))throw TypeError("requestType must be a string");if(!n.isString(o))throw TypeError("responseType must be a string");r.call(this,t,u),this.type=e||"rpc",this.requestType=i,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=h,this.parsedOptions=l}o.fromJSON=function(t,e){return new o(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)},o.prototype.toJSON=function(t){return t=!!t&&Boolean(t.keepComments),n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},function(t,e,i){"use strict";t.exports=function(t){var e=o.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var i=0;i<t.fieldsArray.length;++i){var s=t.k[i].resolve(),a=s.resolvedType instanceof r?"int32":s.type,u="m"+o.safeProp(s.name);e("case %i:",s.id),s.map?(e("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[s.keyType]?e("k=%j",n.defaults[s.keyType]):e("k=null"),void 0!==n.defaults[a]?e("value=%j",n.defaults[a]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",s.keyType)("case 2:"),void 0===n.basic[a]?e("value=types[%i].decode(r,r.uint32())",i):e("value=r.%s()",a),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[s.keyType]?e('%s[typeof k==="object"?util.longToHash(k):k]=value',u):e("%s[k]=value",u)):s.repeated?(e("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==n.packed[a]&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,a)("}else"),void 0===n.basic[a]?e(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,i):e("%s.push(r.%s())",u,a)):void 0===n.basic[a]?e(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,i):e("%s=r.%s()",u,a),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<t.k.length;++i){var h=t.k[i];h.required&&e("if(!m.hasOwnProperty(%j))",h.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+h.name+"'")}return e("return m")};var r=i(3),n=i(7),o=i(0)},function(t,e,i){"use strict";t.exports=function(t){var e=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i={};t.oneofsArray.length&&e("var p={}");for(var r=0;r<t.fieldsArray.length;++r){var a,u=t.k[r].resolve(),h="m"+n.safeProp(u.name);u.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",h,u.name),u.map?(e("if(!util.isObject(%s))",h)("return%j",o(u,"object"))("var k=Object.keys(%s)",h)("for(var i=0;i<k.length;++i){"),function(t,e,i){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",i)("return%j",o(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",i)("return%j",o(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",i)("return%j",o(e,"boolean key"))}}(e,u,"k[i]"),s(e,u,r,h+"[k[i]]")("}")):u.repeated?(e("if(!Array.isArray(%s))",h)("return%j",o(u,"array"))("for(var i=0;i<%s.length;++i){",h),s(e,u,r,h+"[i]")("}")):(u.partOf&&(a=n.safeProp(u.partOf.name),1===i[u.partOf.name]&&e("if(p%s===1)",a)("return%j",u.partOf.name+": multiple values"),i[u.partOf.name]=1,e("p%s=1",a)),s(e,u,r,h)),u.optional&&e("}")}return e("return null")};var r=i(3),n=i(0);function o(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function s(t,e,i,n){if(e.resolvedType)if(e.resolvedType instanceof r){t("switch(%s){",n)("default:")("return%j",o(e,"enum value"));for(var s=Object.keys(e.resolvedType.values),a=0;a<s.length;++a)t("case %i:",e.resolvedType.values[s[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",i,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",o(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",o(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",o(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",o(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",o(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",o(e,"buffer"))}return t}},function(t,e,i){"use strict";var r=i(3),n=i(0);function o(t,e,i,n){if(e.resolvedType)if(e.resolvedType instanceof r){t("switch(d%s){",n);for(var o=e.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)e.repeated&&o[s[a]]===e.typeDefault&&t("default:"),t("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",n,o[s[a]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,i,n);else{var u=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n)}}return t}function s(t,e,i,n){if(e.resolvedType)e.resolvedType instanceof r?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,i,n,n):t("d%s=types[%i].toObject(m%s,o)",n,i,n);else{var o=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n)}}return t}e.fromObject=function(t){var e=t.fieldsArray,i=n.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return i("return new this.ctor");i("var m=new this.ctor");for(var s=0;s<e.length;++s){var a=e[s].resolve(),u=n.safeProp(a.name);a.map?(i("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),o(i,a,s,u+"[ks[i]]")("}")("}")):a.repeated?(i("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),o(i,a,s,u+"[i]")("}")("}")):(a.resolvedType instanceof r||i("if(d%s!=null){",u),o(i,a,s,u),a.resolvedType instanceof r||i("}"))}return i("return m")},e.toObject=function(t){var e=t.fieldsArray.slice().sort(n.compareFieldsById);if(!e.length)return n.codegen()("return {}");for(var i=n.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),o=[],a=[],u=[],h=0;h<e.length;++h)e[h].partOf||(e[h].resolve().repeated?o:e[h].map?a:u).push(e[h]);if(o.length){for(i("if(o.arrays||o.defaults){"),h=0;h<o.length;++h)i("d%s=[]",n.safeProp(o[h].name));i("}")}if(a.length){for(i("if(o.objects||o.defaults){"),h=0;h<a.length;++h)i("d%s={}",n.safeProp(a[h].name));i("}")}if(u.length){for(i("if(o.defaults){"),h=0;h<u.length;++h){var l,c=u[h],f=n.safeProp(c.name);c.resolvedType instanceof r?i("d%s=o.enums===String?%j:%j",f,c.resolvedType.valuesById[c.typeDefault],c.typeDefault):c.long?i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,c.typeDefault.toString(),c.typeDefault.toNumber()):c.bytes?(l="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]",i("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",f,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")):i("d%s=%j",f,c.typeDefault)}i("}")}var A=!1;for(h=0;h<e.length;++h){c=e[h];var p=t.k.indexOf(c);f=n.safeProp(c.name);c.map?(A||(A=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),s(i,c,p,f+"[ks2[j]]")("}")):c.repeated?(i("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),s(i,c,p,f+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",f,c.name),s(i,c,p,f),c.partOf&&i("if(o.oneofs)")("d%s=%j",n.safeProp(c.partOf.name),c.name)),i("}")}return i("return d")}},function(t,e,i){"use strict";var r=i(12);e[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e,i=t["@type"].substring(t["@type"].lastIndexOf("/")+1);if(i=this.lookup(i))return-1===(e="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"]).indexOf("/")&&(e="/"+e),this.create({type_url:e,value:i.encode(i.fromObject(t)).finish()})}return this.fromObject(t)},toObject:function(t,e){var i,n,o="",s="";return!((t=e&&e.json&&t.type_url&&t.value&&(s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),o=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1),i=this.lookup(s))?i.decode(t.value):t)instanceof this.ctor)&&t instanceof r?(i=t.$type.toObject(t,e),n="."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName,i["@type"]=s=(o=""===o?"type.googleapis.com/":o)+n,i):this.toObject(t,e)}}},function(t,e,i){"use strict";t.exports=c;var r,n,o,s=i(6),a=(((c.prototype=Object.create(s.prototype)).constructor=c).className="Root",i(5)),u=i(3),h=i(8),l=i(0);function c(t){s.call(this,"",t),this.deferred=[],this.files=[]}function f(){}c.fromJSON=function(t,e){return e=e||new c,t.options&&e.setOptions(t.options),e.addJSON(t.nested)},c.prototype.resolvePath=l.path.resolve,c.prototype.fetch=l.fetch,c.prototype.load=function t(e,i,r){"function"==typeof i&&(r=i,i=void 0);var s=this;if(!r)return l.asPromise(t,s,e,i);var a=r===f;function u(t,e){if(r){var i=r;if(r=null,a)throw t;i(t,e)}}function h(t){var e=t.lastIndexOf("google/protobuf/");return-1<e&&(t=t.substring(e))in o?t:null}function c(t,e){try{if(l.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),l.isString(e)){n.filename=t;var r,o=n(e,s,i),c=0;if(o.imports)for(;c<o.imports.length;++c)(r=h(o.imports[c])||s.resolvePath(t,o.imports[c]))&&A(r);if(o.weakImports)for(c=0;c<o.weakImports.length;++c)(r=h(o.weakImports[c])||s.resolvePath(t,o.weakImports[c]))&&A(r,!0)}else s.setOptions(e.options).addJSON(e.nested)}catch(t){u(t)}a||p||u(null,s)}function A(t,e){if(!(-1<s.files.indexOf(t)))if(s.files.push(t),t in o)a?c(t,o[t]):(++p,setTimeout(function(){--p,c(t,o[t])}));else if(a){var i;try{i=l.fs.readFileSync(t).toString("utf8")}catch(i){return void(e||u(i))}c(t,i)}else++p,s.fetch(t,function(i,n){--p,r&&(i?e?p||u(null,s):u(i):c(t,n))})}var p=0;l.isString(e)&&(e=[e]);for(var d,m=0;m<e.length;++m)(d=s.resolvePath("",e[m]))&&A(d);if(a)return s;p||u(null,s)},c.prototype.loadSync=function(t,e){if(l.isNode)return this.load(t,e,f);throw Error("not supported")},c.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return s.prototype.resolveAll.call(this)};var A=/^[A-Z]/;function p(t,e){var i,r=e.parent.lookup(e.extend);if(r)return((i=new a(e.fullName,e.id,e.type,e.rule,void 0,e.options)).declaringField=e).extensionField=i,r.add(i),1}c.prototype.S=function(t){if(t instanceof a)void 0===t.extend||t.extensionField||p(0,t)||this.deferred.push(t);else if(t instanceof u)A.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof h)){if(t instanceof r)for(var e=0;e<this.deferred.length;)p(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var i=0;i<t.nestedArray.length;++i)this.S(t.R[i]);A.test(t.name)&&(t.parent[t.name]=t)}},c.prototype.O=function(t){var e;if(t instanceof a)void 0!==t.extend&&(t.extensionField?(t.extensionField.parent.remove(t.extensionField),t.extensionField=null):-1<(e=this.deferred.indexOf(t))&&this.deferred.splice(e,1));else if(t instanceof u)A.test(t.name)&&delete t.parent[t.name];else if(t instanceof s){for(var i=0;i<t.nestedArray.length;++i)this.O(t.R[i]);A.test(t.name)&&delete t.parent[t.name]}},c.j=function(t,e,i){r=t,n=e,o=i}},function(t,e,i){"use strict";t.exports=i(29)},function(t,e,i){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return"symbol"===r(t=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==r(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(n.key),n)}}var o=i(47),s=(i(48),function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.L=null,this.F=400,this.C=null,this.B=null,this.U=new Map}var i,r;return i=e,(r=[{key:"url",get:function(){return this.L}},{key:"status",get:function(){return this.F}},{key:"responseType",get:function(){return this.C},set:function(t){this.C=t}},{key:"response",get:function(){return this.B}},{key:"open",value:function(t,e){"GET"==t&&(this.L=e)}},{key:"addEventListener",value:function(t,e){var i=this.U.get(t);i||this.U.set(t,i=[]),i.push(e)}},{key:"send",value:function(){var e=this,i=this.L,r=o.createReadStream(i),n=[],s=0;this.B=null,r.on("readable",function(){var i=r.read();null!=i&&(n.push(i),s+=i.length,e.B?e.B=t.concat([e.B,new t(i)],s):e.B=new t(i))}),r.on("end",function(){e.F=200,e.G("load")}),r.on("error",function(t){e.F=400,e.G("error",t)})}}])&&n(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),e}());Object.assign(s.prototype,{G:function(t,e){if(0!=this.U.size){var i=this.U.get(t);if(i)for(var r=0;r<i.length;r++)i[r]&&i[r](e)}}}),e.a=s}).call(this,i(43).Buffer)},function(t,e,i){"use strict";var r=t.exports=i(30);r.build="light",r.load=function(t,e,i){return(e="function"==typeof e?(i=e,new r.Root):e||new r.Root).load(t,i)},r.loadSync=function(t,e){return(e=e||new r.Root).loadSync(t)},r.encoder=i(17),r.decoder=i(22),r.verifier=i(23),r.converter=i(24),r.ReflectionObject=i(4),r.Namespace=i(6),r.Root=i(26),r.Enum=i(3),r.Type=i(18),r.Field=i(5),r.OneOf=i(8),r.MapField=i(19),r.Service=i(20),r.Method=i(21),r.Message=i(12),r.wrappers=i(25),r.types=i(7),r.util=i(0),r.ReflectionObject.j(r.Root),r.Namespace.j(r.Type,r.Service,r.Enum),r.Root.j(r.Type),r.Field.j(r.Type)},function(t,e,i){"use strict";var r=e;function n(){r.util.j(),r.Writer.j(r.BufferWriter),r.Reader.j(r.BufferReader)}r.build="minimal",r.Writer=i(10),r.BufferWriter=i(37),r.Reader=i(11),r.BufferReader=i(38),r.util=i(2),r.rpc=i(15),r.roots=i(16),r.configure=n,n()},function(t,e,i){"use strict";e.length=function(t){var e=t.length;if(!e)return 0;for(var i=0;1<--e%4&&"="===t.charAt(e);)++i;return Math.ceil(3*t.length)/4-i};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(t,e,i){for(var n,o=null,s=[],a=0,u=0;e<i;){var h=t[e++];switch(u){case 0:s[a++]=r[h>>2],n=(3&h)<<4,u=1;break;case 1:s[a++]=r[n|h>>4],n=(15&h)<<2,u=2;break;case 2:s[a++]=r[n|h>>6],s[a++]=r[63&h],u=0}8191<a&&((o=o||[]).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=r[n],s[a++]=61,1===u)&&(s[a++]=61),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";e.decode=function(t,e,i){for(var r,o=i,a=0,u=0;u<t.length;){var h=t.charCodeAt(u++);if(61===h&&1<a)break;if(void 0===(h=n[h]))throw Error(s);switch(a){case 0:r=h,a=1;break;case 1:e[i++]=r<<2|(48&h)>>4,r=h,a=2;break;case 2:e[i++]=(15&r)<<4|(60&h)>>2,r=h,a=3;break;case 3:e[i++]=(3&r)<<6|h,a=0}}if(1===a)throw Error(s);return i-o},e.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,e,i){"use strict";function r(){this.U={}}(t.exports=r).prototype.on=function(t,e,i){return(this.U[t]||(this.U[t]=[])).push({fn:e,ctx:i||this}),this},r.prototype.off=function(t,e){if(void 0===t)this.U={};else if(void 0===e)this.U[t]=[];else for(var i=this.U[t],r=0;r<i.length;)i[r].fn===e?i.splice(r,1):++r;return this},r.prototype.emit=function(t){var e=this.U[t];if(e){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,i)}return this}},function(t,e,i){"use strict";function r(t){function e(t,e,i,r){var n=e<0?1:0;0===(e=n?-e:e)?t(0<1/e?0:2147483648,i,r):isNaN(e)?t(2143289344,i,r):t(3.4028234663852886e38<e?(n<<31|2139095040)>>>0:e<1.1754943508222875e-38?(n<<31|Math.round(e/1.401298464324817e-45))>>>0:(n<<31|(t=Math.floor(Math.log(e)/Math.LN2))+127<<23|8388607&Math.round(e*Math.pow(2,-t)*8388608))>>>0,i,r)}function i(t,e,i){return e=2*((t=t(e,i))>>31)+1,i=t>>>23&255,t&=8388607,255==i?t?NaN:1/0*e:0==i?1.401298464324817e-45*e*t:e*Math.pow(2,i-150)*(8388608+t)}function r(t,e,i){c[0]=t,e[i]=f[0],e[i+1]=f[1],e[i+2]=f[2],e[i+3]=f[3]}function u(t,e,i){c[0]=t,e[i]=f[3],e[i+1]=f[2],e[i+2]=f[1],e[i+3]=f[0]}function h(t,e){return f[0]=t[e],f[1]=t[e+1],f[2]=t[e+2],f[3]=t[e+3],c[0]}function l(t,e){return f[3]=t[e],f[2]=t[e+1],f[1]=t[e+2],f[0]=t[e+3],c[0]}var c,f,A,p,d;function m(t,e,i,r,n,o){var s,a,u=r<0?1:0;0===(r=u?-r:r)?(t(0,n,o+e),t(0<1/r?0:2147483648,n,o+i)):isNaN(r)?(t(0,n,o+e),t(2146959360,n,o+i)):1.7976931348623157e308<r?(t(0,n,o+e),t((u<<31|2146435072)>>>0,n,o+i)):r<2.2250738585072014e-308?(t((s=r/5e-324)>>>0,n,o+e),t((u<<31|s/4294967296)>>>0,n,o+i)):(1024===(a=Math.floor(Math.log(r)/Math.LN2))&&(a=1023),t(4503599627370496*(s=r*Math.pow(2,-a))>>>0,n,o+e),t((u<<31|a+1023<<20|1048576*s&1048575)>>>0,n,o+i))}function y(t,e,i,r,n){return e=t(r,n+e),r=2*((t=t(r,n+i))>>31)+1,i=4294967296*(1048575&t)+e,2047==(n=t>>>20&2047)?i?NaN:1/0*r:0==n?5e-324*r*i:r*Math.pow(2,n-1075)*(i+4503599627370496)}function g(t,e,i){A[0]=t,e[i]=p[0],e[i+1]=p[1],e[i+2]=p[2],e[i+3]=p[3],e[i+4]=p[4],e[i+5]=p[5],e[i+6]=p[6],e[i+7]=p[7]}function v(t,e,i){A[0]=t,e[i]=p[7],e[i+1]=p[6],e[i+2]=p[5],e[i+3]=p[4],e[i+4]=p[3],e[i+5]=p[2],e[i+6]=p[1],e[i+7]=p[0]}function b(t,e){return p[0]=t[e],p[1]=t[e+1],p[2]=t[e+2],p[3]=t[e+3],p[4]=t[e+4],p[5]=t[e+5],p[6]=t[e+6],p[7]=t[e+7],A[0]}function w(t,e){return p[7]=t[e],p[6]=t[e+1],p[5]=t[e+2],p[4]=t[e+3],p[3]=t[e+4],p[2]=t[e+5],p[1]=t[e+6],p[0]=t[e+7],A[0]}return"undefined"!=typeof Float32Array?(c=new Float32Array([-0]),d=128===(f=new Uint8Array(c.buffer))[3],t.writeFloatLE=d?r:u,t.writeFloatBE=d?u:r,t.readFloatLE=d?h:l,t.readFloatBE=d?l:h):(t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,o),t.readFloatLE=i.bind(null,s),t.readFloatBE=i.bind(null,a)),"undefined"!=typeof Float64Array?(A=new Float64Array([-0]),d=128===(p=new Uint8Array(A.buffer))[7],t.writeDoubleLE=d?g:v,t.writeDoubleBE=d?v:g,t.readDoubleLE=d?b:w,t.readDoubleBE=d?w:b):(t.writeDoubleLE=m.bind(null,n,0,4),t.writeDoubleBE=m.bind(null,o,4,0),t.readDoubleLE=y.bind(null,s,0,4),t.readDoubleBE=y.bind(null,a,4,0)),t}function n(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}function o(t,e,i){e[i]=t>>>24,e[i+1]=t>>>16&255,e[i+2]=t>>>8&255,e[i+3]=255&t}function s(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=r(r)},function(t,e,i){"use strict";e.length=function(t){for(var e,i=0,r=0;r<t.length;++r)(e=t.charCodeAt(r))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(r+1))?(++r,i+=4):i+=3;return i},e.read=function(t,e,i){if(i-e<1)return"";for(var r,n=null,o=[],s=0;e<i;)(r=t[e++])<128?o[s++]=r:191<r&&r<224?o[s++]=(31&r)<<6|63&t[e++]:239<r&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],8191<s&&((n=n||[]).push(String.fromCharCode.apply(String,o)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,o.slice(0,s))),n.join("")):String.fromCharCode.apply(String,o.slice(0,s))},e.write=function(t,e,i){for(var r,n,o=i,s=0;s<t.length;++s)(r=t.charCodeAt(s))<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(n=t.charCodeAt(s+1)))?(++s,e[i++]=(r=65536+((1023&r)<<10)+(1023&n))>>18|240,e[i++]=r>>12&63|128):e[i++]=r>>12|224,e[i++]=r>>6&63|128),e[i++]=63&r|128);return i-o}},function(t,e,i){"use strict";t.exports=function(t,e,i){var r=i||8192,n=r>>>1,o=null,s=r;return function(i){return i<1||n<i?t(i):(r<s+i&&(o=t(r),s=0),i=e.call(o,s,s+=i),7&s&&(s=1+(7|s)),i)}}},function(t,e,i){"use strict";t.exports=n;var r=i(2);function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=n.zero=new n(0,0),s=(o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1},n.zeroHash="\0\0\0\0\0\0\0\0",n.fromNumber=function(t){var e,i;return 0===t?o:(i=(t=(e=t<0)?-t:t)>>>0,t=(t-i)/4294967296>>>0,e&&(t=~t>>>0,i=~i>>>0,4294967295<++i)&&(i=0,4294967295<++t)&&(t=0),new n(i,t))},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(r.isString(t)){if(!r.Long)return n.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):o},n.prototype.toNumber=function(t){var e;return!t&&this.hi>>>31?(t=1+~this.lo>>>0,e=~this.hi>>>0,-(t+4294967296*(e=t?e:e+1>>>0))):this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}},String.prototype.charCodeAt);n.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?o:new n((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:i<128?9:10}},function(t,e,i){"use strict";t.exports=o;var r=i(10),n=((o.prototype=Object.create(r.prototype)).constructor=o,i(2));function o(){r.call(this)}function s(t,e,i){t.length<40?n.utf8.write(t,e,i):e.utf8Write?e.utf8Write(t,i):e.write(t,i)}o.j=function(){o.alloc=n._,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,e,i){e.set(t,i)}:function(t,e,i){if(t.copy)t.copy(e,i,0,t.length);else for(var r=0;r<t.length;)e[i++]=t[r++]}},o.prototype.bytes=function(t){var e=(t=n.isString(t)?n.v(t,"base64"):t).length>>>0;return this.uint32(e),e&&this.M(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=n.Buffer.byteLength(t);return this.uint32(e),e&&this.M(s,e,t),this},o.j()},function(t,e,i){"use strict";t.exports=o;var r=i(11),n=((o.prototype=Object.create(r.prototype)).constructor=o,i(2));function o(t){r.call(this,t)}o.j=function(){n.Buffer&&(o.prototype.N=n.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o.j()},function(t,e,i){"use strict";t.exports=n;var r=i(2);function n(t,e,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(i)}((n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n).prototype.rpcCall=function t(e,i,n,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(t,a,e,i,n,o);if(a.rpcImpl)try{return a.rpcImpl(e,i[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,i){if(t)return a.emit("error",t,e),s(t);if(null!==i){if(!(i instanceof n))try{i=n[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",i,e),s(null,i)}a.end(!0)})}catch(t){a.emit("error",t,e),setTimeout(function(){s(t)},0)}else setTimeout(function(){s(Error("already ended"))},0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,e,i){"use strict";(t.exports=function(t,e){"string"==typeof t&&(e=t,t=void 0);var i=[];function r(t){if("string"!=typeof t){var e="return "+n();if(t){for(var o=Object.keys(t),s=new Array(o.length+1),a=new Array(o.length),u=0;u<o.length;)s[u]=o[u],a[u]=t[o[u++]];return s[u]=e,Function.apply(null,s).apply(null,a)}return Function(e)()}for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l]=arguments[++l];if(l=0,t=t.replace(/%([%dfijs])/g,function(t,e){var i=h[l++];switch(e){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"}),l!==h.length)throw Error("parameter count mismatch");return i.push(t),r}function n(r){return"function "+(r||e||"")+"("+(t&&t.join(",")||"")+"){\n  "+i.join("\n  ")+"\n}"}return r.toString=n,r}).verbose=!1},function(t,e,i){"use strict";t.exports=o;var r=i(13),n=i(14)("fs");function o(t,e,i){return e="function"==typeof e?(i=e,{}):e||{},i?!e.xhr&&n&&n.readFile?n.readFile(t,function(r,n){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(t,e,i):r?i(r):i(null,e.binary?n:n.toString("utf8"))}):o.xhr(t,e,i):r(o,this,t,e)}o.xhr=function(t,e,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return i(Error("status "+r.status));if(e.binary){if(!(t=r.response))for(var t=[],n=0;n<r.responseText.length;++n)t.push(255&r.responseText.charCodeAt(n));return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return i(null,r.responseText)}},e.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",t),r.send()}},function(t,e,i){"use strict";var r=e.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=e.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=r(t);t="";i&&(t=e.shift()+"/");for(var n=0;n<e.length;)".."===e[n]?0<n&&".."!==e[n-1]?e.splice(--n,2):i?e.splice(n,1):++n:"."===e[n]?e.splice(n,1):++n;return t+e.join("/")};e.resolve=function(t,e,i){return i||(e=n(e)),!r(e)&&(t=(t=i?t:n(t)).replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+e):e}},function(t,e,i){"use strict";(function(t){var r=i(44),n=i(45),o=i(46);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(t=null===t?new u(e):t).length=e,t}function u(t,e,i){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,i);if("number"!=typeof t)return h(this,t,e,i);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}function h(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var n=t,s=e,h=i;if(s.byteLength,h<0||s.byteLength<h)throw new RangeError("'offset' is out of bounds");if(s.byteLength<h+(r||0))throw new RangeError("'length' is out of bounds");return s=void 0===h&&void 0===r?new Uint8Array(s):void 0===r?new Uint8Array(s,h):new Uint8Array(s,h,r),u.TYPED_ARRAY_SUPPORT?(n=s).__proto__=u.prototype:n=f(n,s),n}if("string"!=typeof e){if(h=t,r=e,u.isBuffer(r))return 0!==(h=a(h,s=0|A(r.length))).length&&r.copy(h,0,0,s),h;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||function(t){return t!=t}(r.length)?a(h,0):f(h,r);if("Buffer"===r.type&&o(r.data))return f(h,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(n=t,r=e,t=i,u.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return(r=(n=a(n,e=0|p(r,t))).write(r,t))!==e?n.slice(0,r):n;throw new TypeError('"encoding" must be a valid string encoding')}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(l(e),t=a(t,e<0?0:0|A(e)),!u.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function f(t,e){var i=e.length<0?0:0|A(e.length);t=a(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function A(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var i=(t="string"!=typeof t?""+t:t).length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return P(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function d(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function m(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,(i=(i=isNaN(i)?n?0:t.length-1:i)<0?t.length+i:i)>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,i,r,n);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,i):y(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,r,n){var o=1,s=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n)for(var h=-1,l=i;l<s;l++)if(u(t,l)===u(e,-1===h?0:l-h)){if(l-(h=-1===h?l:h)+1===a)return h*o}else-1!==h&&(l-=l-h),h=-1;else for(l=i=s<i+a?s-a:i;0<=l;l--){for(var c=!0,f=0;f<a;f++)if(u(t,l+f)!==u(e,f)){c=!1;break}if(c)return l}return-1}function g(t,e,i,r){return O(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function v(t,e,i,r){return O(function(t,e){for(var i,r,n=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(i=t.charCodeAt(o))>>8,n.push(i%256),n.push(r);return n}(e,t.length-i),t,i,r)}function b(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var o,s,a,u,h=t[n],l=null,c=239<h?4:223<h?3:191<h?2:1;if(n+c<=i)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[n+1]))&&127<(u=(31&h)<<6|63&o)&&(l=u);break;case 3:o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&h)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,c=1):65535<l&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),n+=c}var f=r,A=f.length;if(A<=w)return String.fromCharCode.apply(String,f);for(var p="",d=0;d<A;)p+=String.fromCharCode.apply(String,f.slice(d,d+=w));return p}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u.W=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,i){return h(null,t,e,i)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}),u.alloc=function(t,e,i){return r=null,e=e,i=i,l(t=t),t<=0||void 0===e?a(r,t):"string"==typeof i?a(r,t).fill(e,i):a(r,t).fill(e);var r},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t.Z)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;for(var i=u.allocUnsafe(e),r=0,n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},u.byteLength=p,u.prototype.Z=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?b(this,0,t):function(t,e,i){var n,o=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var s=e,a=i,u=this.length;(!a||a<0||u<a)&&(a=u);for(var h="",l=s=!s||s<0?0:s;l<a;++l)h+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(this[l]);return h;case"utf8":case"utf-8":return b(this,e,i);case"ascii":u=e;var c=i,f="";c=Math.min(this.length,c);for(var A=u;A<c;++A)f+=String.fromCharCode(127&this[A]);return f;case"latin1":case"binary":s=e;var p=i,d="";p=Math.min(this.length,p);for(var m=s;m<p;++m)d+=String.fromCharCode(this[m]);return d;case"base64":return y=this,n=i,0===(g=e)&&n===y.length?r.fromByteArray(y):r.fromByteArray(y.slice(g,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var y=e,g=i,v=this.slice(y,g),w="",x=0;x<v.length;x+=2)w+=String.fromCharCode(v[x]+256*v[x+1]);return w;default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(u.isBuffer(t))return this===t||0===u.compare(this,t);throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i)&&(t+=" ... "),"<Buffer "+t+">"},u.prototype.compare=function(t,e,i,r,n){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),(e=void 0===e?0:e)<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(n<=r&&i<=e)return 0;if(n<=r)return-1;if(i<=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(r>>>=0),s=(i>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(r,n),l=t.slice(e,i),c=0;c<a;++c)if(h[c]!==l[c]){o=h[c],s=l[c];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return m(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return m(this,t,e,i,!1)},u.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||n<i)&&(i=n),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(var o,s,a,u=!1;;)switch(r=r||"utf8"){case"hex":var h=t,l=e,c=i,f=(l=Number(l)||0,this.length-l);if((!c||f<(c=Number(c)))&&(c=f),(f=h.length)%2!=0)throw new TypeError("Invalid hex string");f/2<c&&(c=f/2);for(var A=0;A<c;++A){var p=parseInt(h.substr(2*A,2),16);if(isNaN(p))return A;this[l+A]=p}return A;case"utf8":case"utf-8":return f=e,a=i,O(F(t,(s=this).length-f),s,f,a);case"ascii":return g(this,t,e,i);case"latin1":case"binary":return g(this,t,e,i);case"base64":return s=this,a=e,o=i,O(P(t),s,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,i);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function x(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,i,r,n,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<e||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function _(t,e,i,r){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-i,2);n<o;++n)t[i+n]=(e&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function S(t,e,i,r){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-i,4);n<o;++n)t[i+n]=e>>>8*(r?n:3-n)&255}function B(t,e,i,r){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function E(t,e,i,r,o){return o||B(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function C(t,e,i,r,o){return o||B(t,0,i,8),n.write(t,e,i,r,52,8),i+8}u.prototype.slice=function(t,e){var i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else for(var r=e-t,n=new u(r,void 0),o=0;o<r;++o)n[o]=this[o+t];return n},u.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||x(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r},u.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||x(t,e,this.length);for(var r=this[t+--e],n=1;0<e&&(n*=256);)r+=this[t+--e]*n;return r},u.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||x(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return(n*=128)<=r&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||x(t,e,this.length);for(var r=e,n=1,o=this[t+--r];0<r&&(n*=256);)o+=this[t+--r]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){return e||x(t,2,this.length),32768&(e=this[t]|this[t+1]<<8)?4294901760|e:e},u.prototype.readInt16BE=function(t,e){return e||x(t,2,this.length),32768&(e=this[t+1]|this[t]<<8)?4294901760|e:e},u.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),n.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),n.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),n.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),n.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,i,r){t=+t,e|=0,i|=0,r||M(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},u.prototype.writeUIntBE=function(t,e,i,r){t=+t,e|=0,i|=0,r||M(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[e+n]=255&t;0<=--n&&(o*=256);)this[e+n]=t/o&255;return e+i},u.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):S(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):S(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,i,r){t=+t,e|=0,r||M(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var n=0,o=1,s=0;for(this[e]=255&t;++n<i&&(o*=256);)t<0&&0===s&&0!==this[e+n-1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+i},u.prototype.writeIntBE=function(t,e,i,r){t=+t,e|=0,r||M(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var n=i-1,o=1,s=0;for(this[e+n]=255&t;0<=--n&&(o*=256);)t<0&&0===s&&0!==this[e+n+1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):S(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):S(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,i){return E(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return E(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return C(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return C(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,r){if(i=i||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<i?i:r)===i)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var n,o=(r=t.length-e<r-i?t.length-e+i:r)-i;if(this===t&&i<e&&e<r)for(n=o-1;0<=n;--n)t[n+e]=this[n+i];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},u.prototype.fill=function(t,e,i,r){if("string"==typeof t){var n;if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length&&(n=t.charCodeAt(0))<256&&(t=n),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(!(i<=e))if(e>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(t=t||0))for(a=e;a<i;++a)this[a]=t;else for(var o=u.isBuffer(t)?t:F(new u(t,r).toString()),s=o.length,a=0;a<i-e;++a)this[a+e]=o[a%s];return this};var T=/[^+\/0-9A-Za-z-_]/g;function F(t,e){e=e||1/0;for(var i,r=t.length,n=null,o=[],s=0;s<r;++s){if(55295<(i=t.charCodeAt(s))&&i<57344){if(!n){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(e-=3)&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(e-=3)&&o.push(239,191,189);if(n=null,i<128){if(--e<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function P(t){return r.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function O(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}}).call(this,i(9))},function(t,e,i){"use strict";e.byteLength=function(t){return 3*((t=h(t))[0]+(t=t[1]))/4-t},e.toByteArray=function(t){var e,i,r=(s=h(t))[0],s=s[1],a=new o(3*(r+s)/4-s),u=0,l=0<s?r-4:r;for(i=0;i<l;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,a[u++]=255&e),1===s&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},e.fromByteArray=function(t){for(var e,i=t.length,n=i%3,o=[],s=0,a=i-n;s<a;s+=16383)o.push(function(t,e,i){for(var n,o=[],s=e;s<i;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(function(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}(n));return o.join("")}(t,s,a<s+16383?a:s+16383));return 1==n?(e=t[i-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2==n&&(e=(t[i-2]<<8)+t[i-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return e=(t=-1===(t=t.indexOf("="))?e:t)===e?0:4-t%4,[t,e]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,r,n){var o,s,a=8*n-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=i?n-1:0,f=i?-1:1;n=t[e+c];for(c+=f,o=n&(1<<-l)-1,n>>=-l,l+=a;0<l;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=h}return(n?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,i,r,n,o){var s,a,u=8*o-n-1,h=(1<<u)-1,l=h>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,A=r?1:-1;o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(e+=1<=s+l?c/r:c*Math.pow(2,1-l))*r&&(s++,r/=2),h<=s+l?(a=0,s=h):1<=s+l?(a=(e*r-1)*Math.pow(2,n),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,n),s=0));8<=n;t[i+f]=255&a,f+=A,a/=256,n-=8);for(s=s<<n|a,u+=n;0<u;t[i+f]=255&s,f+=A,s/=256,u-=8);t[i+f-A]|=128*o}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__47__},function(t,e,i){(function(t){function i(t,e){for(var i=0,r=t.length-1;0<=r;r--){var n=t[r];"."===n?t.splice(r,1):".."===n?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}e.resolve=function(){for(var e="",n=!1,o=arguments.length-1;-1<=o&&!n;o--){var s=0<=o?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,n="/"===s.charAt(0))}return(n?"/":"")+(e=i(r(e.split("/"),function(t){return!!t}),!n).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===n(t,-1);return(t=(t=i(r(t.split("/"),function(t){return!!t}),!o).join("/"))||o?t:".")&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;0<=i&&""===t[i];i--);return i<e?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var n=r(t.split("/")),o=r(i.split("/")),s=Math.min(n.length,o.length),a=s,u=0;u<s;u++)if(n[u]!==o[u]){a=u;break}var h=[];for(u=a;u<n.length;u++)h.push("..");return(h=h.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=47===t.charCodeAt(0),i=-1,r=!0,n=t.length-1;1<=n;--n)if(47===t.charCodeAt(n)){if(!r){i=n;break}}else r=!1;return-1===i?e?"/":".":e&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){return t=function(t){"string"!=typeof t&&(t+="");for(var e=0,i=-1,r=!0,n=t.length-1;0<=n;--n)if(47===t.charCodeAt(n)){if(!r){e=n+1;break}}else-1===i&&(r=!1,i=n+1);return-1===i?"":t.slice(e,i)}(t),e&&t.substr(-1*e.length)===e?t.substr(0,t.length-e.length):t},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,i=0,r=-1,n=!0,o=0,s=t.length-1;0<=s;--s){var a=t.charCodeAt(s);if(47===a){if(n)continue;i=s+1;break}-1===r&&(n=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1)}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===i+1?"":t.slice(e,r)};var n="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(49))},function(t,e){var i,r;t=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:n}catch(t){i=n}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===n||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var a,u=[],h=!1,l=-1;function c(){h&&a&&(h=!1,a.length?u=a.concat(u):l=-1,u.length)&&f()}function f(){if(!h){for(var t=s(c),e=(h=!0,u.length);e;){for(a=u,u=[];++l<e;)a&&a[l].run();l=-1,e=u.length}a=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return(r=clearTimeout)(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function A(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new A(t,e)),1!==u.length||h||s(f)},A.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,i){"use strict";i.r(e);var r="v3.1.4",n=((A={NONE:0,EXTRUDE_MARKER:2,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30}).LAYER_NODE_TYPE=new Map,A.LAYER_NODE_TYPE.set(A.EXTENT_LAYER,A.EXTENT),A.LAYER_NODE_TYPE.set(A.EXTERNAL_MODEL_LAYER,A.EXTERNAL_MODEL),A.LAYER_NODE_TYPE.set(A.MODEL_LAYER,A.MODEL),A.LAYER_NODE_TYPE.set(A.FACILITY_LAYER,A.FACILITY),A.LAYER_NODE_TYPE.set(A.LABEL_LAYER,A.LABEL),A.LAYER_NODE_TYPE.set(A.DOM_MARKER,A.DOM_MARKER),A.LAYER_NODE_TYPE.set(A.DYNAMIC_MODEL_MARKER,A.DYNAMIC_MODEL_MARKER),A.LAYER_NODE_TYPE.set(A.EXTRUDE_MARKER,A.EXTRUDE_MARKER),A.LAYER_NODE_TYPE.set(A.HEAT_MAP_MARKER,A.HEAT_MAP_MARKER),A.LAYER_NODE_TYPE.set(A.LINE_MARKER,A.LINE_MARKER),A.LAYER_NODE_TYPE.set(A.LOCATION_MARKER,A.LOCATION_MARKER),A.LAYER_NODE_TYPE.set(A.POLYGON_MARKER,A.POLYGON_MARKER),A.LAYER_NODE_TYPE.set(A.TEXT_MARKER,A.TEXT_MARKER),A.LAYER_NODE_TYPE.set(A.IMAGE_MARKER,A.IMAGE_MARKER),A.LAYER_NODE_TYPE.set(A.FLOW_LINE_LAYER,A.FLOW_LINE_MARKER),A.LAYER_NODE_TYPE.set(A.FIRE_MARKER,A.FIRE_MARKER),A.LAYER_NODE_TYPE.set(A.WALL_MARKER,A.WALL_MARKER),A.LAYER_NODE_TYPE.set(A.TUBE_MARKER,A.TUBE_MARKER),A.LAYER_NODE_TYPE.set(A.LINE3D_MARKER,A.LINE3D_MARKER),A.LAYER_NODE_TYPE.set(A.SPHERE_MARKER,A.SPHERE_MARKER),A),o={MODULE_SHORTEST:1,MODULE_BEST:2},s={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},a={ROUTE_SUCCESS:1,ROUTE_FAILED_NO_DATA_START:2,ROUTE_FAILED_NO_DATA_DEST:3,ROUTE_FAILED_CANNOT_ARRIVE:4,ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR:5,ROUTE_FAILED_NO_START_ARRIVAL:6,ROUTE_FAILED_NO_DEST_ARRIVAL:7,ROUTE_FAILED_OUTLINE:8,ROUTE_FAILED_ENTRANCE:9},u={ZH:"zh",EN:"en"},h={TRANSFER_LIFT:1,TRANSFER_STAIR:2,TRANSFER_ESCALATOR:3,TRANSFER_ACCESSIBLE:4,TRANSFER_RAMP:5,TRANSFER_ENTRANCE:6},l={NONE_RODE_NETWORK:1,NONE_WALK_RODE_NETWORK:2,NONE_DRIVE_RODE_NETWORK:4};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===c(t=function(t,e){if("object"!==c(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==c(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var A=function(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.V=e,this.Y=i}),p=(Object.assign(A.prototype,{X:function(t){return!1},H:function(t,e){}}),A);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=y(t);if(i=e?(i=y(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===d(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return i.call(this,t,e);throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var g=(Object.assign(A.prototype,{X:function(t){return this.Y==t.fid}}),A);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=w(t);if(i=e?(i=w(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===v(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t,e)).K=null,"object"==v(t.Y)?(t.J=t.Y.text,t.$=t.Y.fuzzy,t.tt=void 0===t.Y.matchCase||t.Y.matchCase):(t.J=t.Y,t.tt=!0),t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var x=(Object.assign(A.prototype,{X:function(t){var e=null;if(e="ename"===this.K?t.ename:t.name)if(this.$){if(this.tt){if(-1!=e.indexOf(this.J))return!0}else if(-1!=e.toLocaleLowerCase().indexOf(this.J.toLocaleLowerCase()))return!0}else if(this.tt){if(this.J==e)return!0}else if(this.J.toLocaleLowerCase()==e.toLocaleLowerCase())return!0;return!1}}),A);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(){var t=r,e=x;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=S(t);if(i=e?(i=S(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===M(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t,e)).K="name",t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(){var t=r,e=x;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=T(t);if(i=e?(i=T(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===E(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t,e)).K="ename",t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=D(t);if(i=e?(i=D(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===P(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t)).Y=Array.isArray(e)?e:[e],t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var R=(Object.assign(A.prototype,{X:function(t){return-1!=this.Y.indexOf(t.type)}}),A);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=L(t);if(i=e?(i=L(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===I(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return"object"==I((t=i.call(this,t,e)).Y)?(t.J=t.Y.text,t.$=void 0===t.Y.fuzzy||t.Y.fuzzy,t.tt=void 0===t.Y.matchCase||t.Y.matchCase):(t.J=t.Y,t.$=!0,t.tt=!0),t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var k=(Object.assign(A.prototype,{X:function(t){if(this.$){if(this.tt){if(t.name&&-1!=t.name.indexOf(this.J)||t.ename&&-1!=t.ename.indexOf(this.J))return!0}else if(t.name&&-1!=t.name.toLocaleLowerCase().indexOf(this.J.toLocaleLowerCase())||t.ename&&-1!=t.ename.toLocaleLowerCase().indexOf(this.J.toLocaleLowerCase()))return!0}else if(this.tt){if(t.name&&t.name==this.J||t.ename&&t.ename==this.J)return!0}else if(t.name&&t.name.toLocaleLowerCase()==this.J.toLocaleLowerCase()||t.ename&&t.ename.toLocaleLowerCase()==this.J.toLocaleLowerCase())return!0;return!1}}),A),j=(A={NONE:0,POINT:1,LINE:2,POLYGON:4,MULTIPOINT:8,MULTILINE:16,MULTIPOLYGON:32,GROUP:64,EXTENT:1024,EXTERNALMODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,EXTENTGROUP:1<<20,EXTERNALMODELGROUP:1<<21,MODELGROUP:1<<22,FACILITYGROUP:1<<23,LABELGROUP:1<<24},Object.freeze(A),A),Q=function(t,e,i){i=i||2;var r,n,o,s,a,u=e&&e.length,h=u?e[0]*i:t.length,l=N(t,0,h,i,!0),c=[];if(l&&l.next!==l.prev){if(u&&(l=function(t,e,i,r){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=N(t,s=e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(function(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}(s));for(a.sort(H),n=0;n<a.length;n++)!function(t,e){(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&s<a){if((s=a)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!i)return null;if(n!==s){var u,h=i,l=i.x,c=i.y,f=1/0;for(r=i;n>=r.x&&r.x>=l&&n!==r.x&&G(o<c?n:s,o,l,c,o<c?s:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),Z(r,t))&&(u<f||u===f&&(r.x>i.x||r.x===i.x&&function(t,e){return K(t.prev,t,e.prev)<0&&K(e.next,t,t.next)<0}(i,r)))&&(i=r,f=u),(r=r.next)!==h;);}return i}(t,e))&&(t=J(e,t),z(e,e.next),z(t,t.next))}(a[n],i),i=z(i,i.next);return i}(t,e,l,i)),t.length>80*i){for(var f=r=t[0],A=n=t[1],p=i;p<h;p+=i)(o=t[p])<f&&(f=o),(s=t[p+1])<A&&(A=s),r<o&&(r=o),n<s&&(n=s);a=0!==(a=Math.max(r-f,n-A))?1/a:0}!function t(e,i,r,n,o,s,a){if(e){if(!a&&s){for(var u=e,h=n,l=o,c=s,f=u;null===f.z&&(f.z=V(f.x,f.y,h,l,c)),f.prevZ=f.prev,f.nextZ=f.next,(f=f.next)!==u;);f.prevZ.nextZ=null,f.prevZ=null;var A,p,d,m,y,g,v,b,w=f,x=1;do{for(p=w,y=w=null,g=0;p;){for(g++,d=p,A=v=0;A<x&&(v++,d=d.nextZ);A++);for(b=x;0<v||0<b&&d;)0!==v&&(0===b||!d||p.z<=d.z)?(p=(m=p).nextZ,v--):(d=(m=d).nextZ,b--),y?y.nextZ=m:w=m,m.prevZ=y,y=m;p=d}}while(y.nextZ=null,x*=2,1<g)}for(var M,_,S=e;e.prev!==e.next;)if(M=e.prev,_=e.next,s?function(t,e,i,r){var n=t.prev,o=t,s=t.next;if(!(0<=K(n,o,s))){for(var a=(n.x<o.x?n.x<s.x?n:s:o.x<s.x?o:s).x,u=(n.y<o.y?n.y<s.y?n:s:o.y<s.y?o:s).y,h=(n.x>o.x?n.x>s.x?n:s:o.x>s.x?o:s).x,l=(n.y>o.y?n.y>s.y?n:s:o.y>s.y?o:s).y,c=V(a,u,e,i,r),f=V(h,l,e,i,r),A=t.prevZ,p=t.nextZ;A&&A.z>=c&&p&&p.z<=f;){if(A!==t.prev&&A!==t.next&&G(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=K(A.prev,A,A.next))return;if(A=A.prevZ,p!==t.prev&&p!==t.next&&G(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=K(p.prev,p,p.next))return;p=p.nextZ}for(;A&&A.z>=c;){if(A!==t.prev&&A!==t.next&&G(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=K(A.prev,A,A.next))return;A=A.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&G(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=K(p.prev,p,p.next))return;p=p.nextZ}return 1}}(e,n,o,s):function(t){var e=t.prev,i=t,r=t.next;if(!(0<=K(e,i,r))){for(var n=t.next.next;n!==t.prev;){if(G(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=K(n.prev,n,n.next))return;n=n.next}return 1}}(e))i.push(M.i/r),i.push(e.i/r),i.push(_.i/r),tt(e),e=_.next,S=_.next;else if((e=_)===S){a?1===a?t(e=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next}while(!Y(n,o)&&X(n,r,r.next,o)&&Z(n,o)&&Z(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),tt(r),tt(r.next),r=t=o),(r=r.next)!==t);return z(r)}(z(e),i,r),i,r,n,o,s,2):2===a&&function(e,i,r,n,o,s){var a=e;do{for(var u,h=a.next.next;h!==a.prev;){if(a.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&X(i,i.next,t,e))return 1}while((i=i.next)!==t)}(t,e)&&(Z(t,e)&&Z(e,t)&&function(t,e){for(var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),(i=i.next)!==t;);return r}(t,e)&&(K(t.prev,t,e.prev)||K(t,e.prev,e))||Y(t,e)&&0<K(t.prev,t,t.next)&&0<K(e.prev,e,e.next))}(a,h))return u=J(a,h),a=z(a,a.next),u=z(u,u.next),t(a,i,r,n,o,s),t(u,i,r,n,o,s);h=h.next}}while((a=a.next)!==e)}(e,i,r,n,o,s):t(z(e),i,r,n,o,s,1);break}}}(l,c,i,f,A,a)}return c};function N(t,e,i,r,n){var o,s;if(n===0<function(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}(t,e,i,r))for(o=e;o<i;o+=r)s=$(o,t[o],t[o+1],s);else for(o=i-r;e<=o;o-=r)s=$(o,t[o],t[o+1],s);return s&&Y(s,s.next)&&(tt(s),s=s.next),s}function z(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!Y(r,r.next)&&0!==K(r.prev,r,r.next))r=r.next;else{if(tt(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function H(t,e){return t.x-e.x}function V(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function G(t,e,i,r,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(i-s)*(e-a)&&0<=(i-s)*(o-a)-(n-s)*(r-a)}function K(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Y(t,e){return t.x===e.x&&t.y===e.y}function X(t,e,i,r){var n=q(K(t,e,i)),o=q(K(t,e,r)),s=q(K(i,r,t)),a=q(K(i,r,e));return n!==o&&s!==a||0===n&&W(t,i,e)||0===o&&W(t,r,e)||0===s&&W(i,t,r)||!(0!==a||!W(i,e,r))}function W(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function q(t){return 0<t?1:t<0?-1:0}function Z(t,e){return K(t.prev,t,t.next)<0?0<=K(t,e,t.next)&&0<=K(t,t.prev,e):K(t,e,t.prev)<0||K(t,t.next,e)<0}function J(t,e){var i=new et(t.i,t.x,t.y),r=new et(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function $(t,e,i,r){return t=new et(t,e,i),r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function tt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function et(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function it(t){return function(t){if(Array.isArray(t))return rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?rt(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?rt(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var nt={area:function(t){for(var e=t.length,i=0,r=e-1,n=0;n<e;r=n++)i+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*i},isClockWise:function(t){return nt.area(t)<0},triangulateShape:function(t,e){var i=[],r=[],n=[],o=(ot(t),st(i,t),t.length);e.forEach(ot);for(var s=0;s<e.length;s++)r.push(o),o+=e[s].length,st(i,e[s]);for(var a=Q(i,r),u=0;u<a.length;u+=3)n.push(a.slice(u,u+3));return n},triangulate:function(t){(n=[]).push.apply(n,it(t[0]));for(var e=[],i=1;i<t.length;i++){var r=[];r.push.apply(r,it(t[i])),e.push(r)}if(!nt.isClockWise(n))for(var n=n.reverse(),o=0,s=e.length;o<s;o++){var a=e[o];nt.isClockWise(a)&&(e[o]=a.reverse())}return nt.triangulateShape(n,e)}};function ot(t){var e,i=t.length;2<i&&(i=t[i-1],e=t[0],i.x===e.x)&&i.y===e.y&&t.pop()}function st(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===at(t=function(t,e){if("object"!==at(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==at(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var ht=1e-5,lt=.001,ct=Math.PI/180,ft=180/Math.PI;A=function(t,e,i){return e&&ut(t.prototype,e),i&&ut(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(A.prototype,{rt:function(){return ht},nt:function(){return ct},it:function(){return ft},et:function(t){return t<ht&&-ht<t},ot:function(t){return ht<t},st:function(t){return t<-ht},ut:function(t,e,i){return e=(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y),Math.abs(e)<ht?0:e},distanceOfTwoPoints:function(t,e){return t&&e?Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)):Number.NaN},distance:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},isPolygonContainPoint:function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].x,o=t[r].y,s=0,a=(r<t.length-1?(s=t[r+1].x,t[r+1]):(s=t[0].x,t[0])).y;if(n===e.x&&o===e.y||s===e.x&&a===e.y)return!0;if(a!==o){var u=n+(e.y-o)*(s-n)/(a-o);if(u===e.x)return!0;n!==s?u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&u!==n&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++):u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++)}}return 0<i%2},ft:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y))},ht:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y)||0===this.ut(i,e,t)&&0===this.ut(e,r,t)||this.ut(i,e,t)*this.ut(e,r,t)<0||this.ut(t,r,i)*this.ut(r,e,i)<0)},ct:function(t,e,i){return!(t.x<e.x||t.y<e.y||t.x>i.x||t.y>i.y)},lt:function(t,e,i){var r=Math.min(e.x,i.x),n=Math.max(e.x,i.x),o=Math.min(e.y,i.y);e=Math.max(e.y,i.y);return!(t.x<r||t.x>n||t.y<o||t.y>e)},vt:function(t,e,i){var r=Math.min(i.x,e.x),n=Math.max(i.x,e.x),o=Math.min(i.y,e.y);i=Math.max(i.y,e.y);return!(t.x<r||t.x>n||t.y<o||t.y>i)},yt:function(t,e,i){for(var r,n,o=!1,s=0;s<i;s++)r=e[s],n=e[(s+1)%i],(r.y<t.y&&n.y>=t.y||n.y<t.y&&r.y>=t.y)&&(r.x<=t.x||n.x<=t.x)&&r.x+(t.y-r.y)/(n.y-r.y)*(n.x-r.x)<t.x&&(o=!o);return o},bt:function(t,e,i){return(t.x-e.x)*(i.y-e.y)==(i.x-e.x)*(t.y-e.y)&&Math.min(e.x,i.x)<=t.x&&t.x<=Math.max(e.x,i.x)&&Math.min(e.y,i.y)<=t.y&&t.y<=Math.max(e.y,i.y)},dt:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},wt:function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},xt:function(t,e,i){var r=e.x,n=(e=e.y,i.x),o=(i=i.y,t.x),s=n-r,a=i-e,u=s*s+a*a,h=o-r,l=(t=t.y)-e,c=h*h+l*l;return this.et(u)?this.et(c)?0:c:(u=Math.sqrt(u),l=this.ot(a=(s/=u)*h+(h=a/u)*l)?this.st(a-u)?(l=o-(r+a*s))*l+(u=t-(e+a*h))*u:(r=o-n)*r+(s=t-i)*s:c,this.et(l)?0:l)},_t:function(t,e,i,r){var n,o=e.x,s=e.y,a=i.x,u=i.y,h=t.x,l=(t=t.y,a-o),c=u-s,f=Math.sqrt(l*l+c*c),A=h-o,p=t-s,d=Math.sqrt(A*A+p*p);return this.et(f)?(r.x=e.x,r.y=e.y,this.et(n=d)?0:n):(n=this.ot(c=(l/=f)*A+(A=c/f)*p)?this.st(c-f)?(f=h-(p=o+c*l),l=t-(o=s+c*A),s=Math.sqrt(f*f+l*l),r.x=p,r.y=o,s):(c=h-a,A=t-u,f=Math.sqrt(c*c+A*A),r.x=i.x,r.y=i.y,f):(r.x=e.x,r.y=e.y,d),this.et(n)?0:n)},gt:function(t,e){for(var i=0,r=0,n=0,o=0;o<e;o++){var s=t[o],a=t[(o+1)%e],u=(s.x*a.y-s.y*a.x)/2;i+=u,r+=u*(s.x+a.x)/3,n+=u*(s.y+a.y)/3}return{x:r/=i,y:n/=i}},jt:function(t){for(var e=nt.triangulate([t]),i=0,r=0,n=0,o=0;o<e.length;o++){var s=t[e[o][0]],a=t[e[o][1]],u=t[e[o][2]],h=a.x-s.x,l=a.y-s.y,c=u.x-s.x;i+=h=(h*(u.y-s.y)-c*l)/2,r+=(s.x+a.x+u.x)/3*h,n+=(s.y+a.y+u.y)/3*h}return{x:r/i,y:n/i}},St:function(t,e){if(e<3)return 0;for(var i=0,r=0;r<e;++r){var n=t[r],o=t[(r+1)%e];i+=n.x*o.y-n.y*o.x}return Math.abs(i/2)},Ot:function(t,e,i,r,n){var o,s;return this.ht(t,e,i,r)?(o=(r.x-i.x)*(t.y-e.y)-(e.x-t.x)*(i.y-r.y),s=(t.y-i.y)*(e.x-t.x)*(r.x-i.x)+i.x*(r.y-i.y)*(e.x-t.x)-t.x*(e.y-t.y)*(r.x-i.x),n.x=s/o,o=(t.x-e.x)*(r.y-i.y)-(e.y-t.y)*(i.x-r.x),s=e.y*(t.x-e.x)*(r.y-i.y)+(r.x-e.x)*(r.y-i.y)*(t.y-e.y)-r.y*(i.x-r.x)*(e.y-t.y),n.y=s/o,1):0},Et:function(t,e,i,r,n){var o=Math.min(i.x,r.x),s=Math.max(i.x,r.x),a=Math.min(i.y,r.y),u=Math.max(i.y,r.y),h=t.x,l=t.y,c=i.x,f=i.y,A=r.x,p=r.y;if(90==e)return!(t.x<o||t.x>s||(Math.abs(s-o<lt)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.x<f?(n.x=c,n.y=f,0):!(p<f&&t.x<p)||(n.x=A,n.y=p,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,d<l||!this.vt(n,i,r))));if(270==e)return!(t.x<o||t.x>s||(Math.abs(s-o<lt)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.y>p?(n.x=A,n.y=p,0):!(p<f&&t.y>f)||(n.x=c,n.y=f,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,l<d||!this.vt(n,i,r))));if(270!=e&&90!=e&&Math.abs(s-o<lt)){t=o;var d=Math.tan(e/180*Math.PI)*(t-h)+l;if(n.y=d,n.x=t,this.vt(n,i,r))return s=d-l,0<(o=t-h)/Math.sqrt(o*o+s*s)*Math.cos(e/180*Math.PI)}return Math.abs(u-a<=lt)?(d=a,t=1/Math.tan(e/180*Math.PI)*(d-l)+h,n.x=t,n.y=d,!!this.vt(n,i,r)&&(o=d-l,0<(s=t-h)/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI))):(t=l+(u=Math.tan(e/180*Math.PI))*((d=(f-l-((a=(p-f)/(A-c))*c-u*h))/(u-a))-h),n.x=d,n.y=t,!!this.vt(n,i,r)&&(s=d-h,o=t-l,Math.abs(s)<=lt&&Math.abs(o)<=lt||0<s/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI)))},Tt:function(t,e){return Math.abs(t.x-e.x)<ht&&Math.abs(t.y-e.y)<ht},Rt:function(t,e,i,r){var n,o,s,a,u=t.x,h=t.y,l=e.x,c=e.y,f=i.x,A=i.y;return this.Tt(t,e)||this.Tt(t,i)?(r.x=u,r.y=h,!0):(s=Math.min(e.x,i.x),a=Math.max(e.x,i.x),n=Math.min(e.y,i.y),o=Math.max(e.y,i.y),Math.abs(l-f)<1e-5?(r.x=l,n<=(r.y=h)&&h<=o):Math.abs(c-A)<1e-5?(r.x=u,r.y=c,s<=u&&u<=a):(a=h+(n=-1/((A-c)/(f-l)))*((s=(c-h-((o=(A-c)/(f-l))*l-n*u))/(n-o))-u),r.x=s,r.y=a,!!this.vt(r,e,i)||!(!this.Tt(t,e)&&!this.Tt(t,i))))},Mt:function(t,e){return{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}},Nt:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},kt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},At:function(t,e){return t.x*e.x+t.y*e.y},It:function(t,e){return t.x*e.y-t.y*e.x},Pt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Dt:function(t,e){var i,r;return 0==t.x&&0==t.y||0==e.x&&0==e.y?0:(i={x:t.x,y:t.y,z:0},r={x:e.x,y:e.y,z:0},i=this.Mt(i,r),r=this.At(t,e),r=Math.acos(r/(this.Pt(t)*this.Pt(e))),0<i.z?r/Math.PI*180:360-r/Math.PI*180)},Lt:function(t,e,i,r){for(var n=0;n<i.length;n++){var o=i[n],s=i[(n+1)%i.length];if(1==this.Ot(t,e,o,s,r))return!0}return!1},Ft:function(t,e,i,r,n){var o=Math.min(t.x,i.x,r.x),s=Math.max(t.x,i.x,r.x),a=Math.min(t.y,i.y,r.y),u=Math.max(t.y,i.y,r.y);s=Math.sqrt((s-o)*(s-o)+(u-a)*(u-a)),o=e/180*Math.PI,u=s*Math.cos(o)+t.x,a=s*Math.sin(o)+t.y;return 1==this.Ot(t,{x:u,y:a},i,r,n)},Ct:function(t){for(var e={x:null,y:null},i=0,r=0,n=0;n<t.length;n++)i+=t[n].x,r+=t[n].y;return e.x=i/t.length,e.y=r/t.length,e},Bt:function(t,e,i,r){var n=[],o=t.x-e,s=t.x+e,a=t.y-e,u=t.y+e,h=Math.min(i.x,r.x),l=Math.max(i.x,r.x),c=Math.min(i.y,r.y),f=Math.max(i.y,r.y);return l<o||s<h||f<a||u<c||(o=r.x-i.x,s=r.y-i.y,(a=(t=(o*(a=t.x-i.x)+s*(u=t.y-i.y))/(r=o*o+s*s))*t-(a*a+u*u-e*e)/r)<0)||(u=Math.sqrt(a),r={x:i.x-o*(e=-t+u),y:i.y-s*e},o={x:i.x-o*(a=-t-u),y:i.y-s*a},e!==a&&(h<=r.x&&r.x<=l&&c<=r.y&&r.y<=f&&n.push(r),h<=o.x)&&o.x<=l&&c<=o.y&&o.y<=f&&n.push(o)),n},Ut:function(t,e,i){var r,n={};if(t.x!=e.x)return r=e=(e.y-t.y)/(e.x-t.x),e=t.y-e*t.x,n.x=(+i.x- -1*r*i.y-r*e)/(r*r+1),n.y=(r*r*i.y- -1*r*i.x- -1*e)/(r*r+1),n;n.x=t.x,n.y=i.y},Gt:function(t,e,i,r){var n,o,s,a,u={point:null,isintersect:!1};return t==i||t==r?(u.isintersect=!0,u.point=t):e==i||e==r?(u.isintersect=!0,u.point=e):(n={x:e.x-t.x,y:e.y-t.y},o={x:r.x-i.x,y:r.y-i.y},s={x:i.x-t.x,y:i.y-t.y},r={x:r.x-t.x,y:r.y-t.y},e={x:e.x-i.x,y:e.y-i.y},i={x:-s.x,y:-s.y},a=this.It(o,n),Math.abs(a)<=1e-5||this.It(s,n)*this.It(r,n)<=5e-4&&this.It(i,o)*this.It(e,o)<5e-4&&(r=this.It(o,s)/a,u.point={x:t.x+n.x*r,y:t.y+n.y*r},u.isintersect=!0)),u},Wt:function(t,e,i){t.x===e.x&&(e.x=e.x+1),t.y===e.y&&(e.y=e.y+1),e.x===i.x&&(i.x=i.x+1),e.y===i.y&&(i.y=i.y+1);var r=e.x-t.x,n=(t=e.y-t.y,i.x-e.x);return!(0<r*(i.y-e.y)-t*n)},getAngle:function(t){var e=t.p1,i=(t=t.p2).x-e.x;t=t.y-e.y,e=Math.sqrt(i*i+t*t),e=Math.asin(Math.abs(t)/e);return 0<i&&0<t?e:i<0&&0<t?Math.PI-e:i<0&&t<0?Math.PI+e:0<i&&t<0?2*Math.PI-e:0==i&&0<t?e:0==i&&t<0?3*Math.PI/2:0<i&&0==t?e:i<0&&0==t?Math.PI:null},Zt:function(t){var e=this.distanceOfTwoPoints(t[0],t[1]),i=this.distanceOfTwoPoints(t[1],t[2]),r=(e+i+(t=this.distanceOfTwoPoints(t[0],t[2])))/2;return Math.sqrt(r*(r-e)*(r-i)*(r-t))},Vt:function(t,e){var i,r,n,o,s;return this._t(t,e[0],e[1],{})<1e-4||this._t(t,e[0],e[2],{})<1e-4||this._t(t,e[1],e[2],{})<1e-4||(o={x:e[1].x-e[0].x,y:e[1].y-e[0].y},i={x:e[0].x-e[2].x,y:e[0].y-e[2].y},r={x:e[2].x-e[1].x,y:e[2].y-e[1].y},s={x:t.x-e[0].x,y:t.y-e[0].y},n={x:t.x-e[1].x,y:t.y-e[1].y},t={x:t.x-e[2].x,y:t.y-e[2].y},e=this.It(o,s),o=this.It(r,n),s=this.It(i,t),ht<e*o&&ht<o*s)},Yt:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null,type:0,outer:null},o=[];if(this.Vt(t,i)&&(n.start=t),this.Vt(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0,n.type=1;else{for(var s=(i[1].x+i[2].x)/2,a=(i[1].y+i[2].y)/2,u=1;u<r;u++){var h,l=this.Gt(t,e,i[u-1],i[u]);if(l.isintersect){if(null!=n.start)return n.end=l.point,n.isintersect=!0,n.outer="end",h=this.Dt({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;if(null!=n.end)return n.start=l.point,n.isintersect=!0,n.outer="start",h=this.Dt({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;o.push(l)}}var c,f=this.Gt(t,e,i[0],i[r-1]);if(f.isintersect){if(null!=n.start)return n.end=f.point,n.isintersect=!0,n.outer="end",c=this.Dt({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;if(null!=n.end)return n.start=f.point,n.isintersect=!0,n.outer="start",c=this.Dt({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;o.push(f)}2!=o.length||this.distanceOfTwoPoints(o[0].point,o[1].point)<.01||(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?(n.start=o[0].point,n.end=o[1].point):(n.start=o[1].point,n.end=o[0].point),n.isintersect=!0,n.type=4)}return n},zt:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null},o=[];if(this.Vt(t,i)&&(n.start=t),this.Vt(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0;else{for(var s=1;s<r;s++){var a=this.Gt(t,e,i[s-1],i[s]);if(a.isintersect){if(null!=n.start)return n.end=a.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(a)}}var u=this.Gt(t,e,i[0],i[r-1]);if(u.isintersect){if(null!=n.start)return n.end=u.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(u)}2==o.length&&(n.start=(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.end=(this.distanceOfTwoPoints(o[0].point,t)>this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.isintersect=!0)}return n},Xt:function(t,e){if(0==e.length)return[t];var i,r,n=this.qt(e),o=[],s=(n.sort(function(e,i){var r=(e.Ht.x-t.Ht.x)*(e.Ht.x-t.Ht.x)+(e.Ht.y-t.Ht.y)*(e.Ht.y-t.Ht.y),n=(i.Ht.x-t.Ht.x)*(i.Ht.x-t.Ht.x)+(i.Ht.y-t.Ht.y)*(i.Ht.y-t.Ht.y);e=(e.Qt.x-t.Ht.x)*(e.Qt.x-t.Ht.x)+(e.Qt.y-t.Ht.y)*(e.Qt.y-t.Ht.y),i=(i.Qt.x-t.Ht.x)*(i.Qt.x-t.Ht.x)+(i.Qt.y-t.Ht.y)*(i.Qt.y-t.Ht.y);return(r<e?r:e)<(n<i?n:i)}),0);for(s=0;s<n.length;s++)this.distanceOfTwoPoints(n[s].Ht,n[s].Qt)<.01||(i=this.distanceOfTwoPoints(n[s].Ht,t.Ht),r=this.distanceOfTwoPoints(n[s].Qt,t.Ht),i<.01?t.Ht=n[s].Qt:r<.01?t.Ht=n[s].Ht:i<r?.1<this.distanceOfTwoPoints(t.Ht,n[s].Ht)&&(o.push({Kt:t.Kt,Ht:t.Ht,Qt:n[s].Ht,dt:t.dt,Jt:t.Jt}),t.Ht=n[s].Qt):.1<this.distanceOfTwoPoints(t.Ht,n[s].Qt)&&(o.push({Kt:t.Kt,Ht:t.Ht,Qt:n[s].Qt,dt:t.dt,Jt:t.Jt}),t.Ht=n[s].Ht),n.splice(s,1));return.1<this.distanceOfTwoPoints(t.Ht,t.Qt)&&o.push(t),o},qt:function(t){var e=[];if(1==t.length)return t;for(var i=t[0],r=1;0<t.length;){if(r>=t.length){if(e.push(i),t.splice(0,1),t.length<1)break;i=t[0],r=1}if(1===t.length){e.push(i);break}this.$t(i.Ht,i.Qt,t[r].Ht)?(this.$t(i.Ht,i.Qt,t[r].Qt)||(i.Qt=t[r].Qt),t.splice(r,1)):this.$t(i.Ht,i.Qt,t[r].Qt)?(i.Ht=t[r].Ht,t.splice(r,1)):this.$t(t[r].Ht,t[r].Qt,i.Ht)?(this.$t(t[r].Ht,t[r].Qt,i.Qt)||(t[r].Qt=i.Qt),i=t[r],t.splice(r,1)):this.$t(t[r].Ht,t[r].Qt,i.Qt)?(t[r].Ht=i.Ht,i=t[r],t.splice(r,1)):r++}return e},$t:function(t,e,i){var r=t.x-i.x,n=t.y-i.y,o=e.x-i.x,s=e.y-i.y,a=this.distanceOfTwoPoints(t,i);i=this.distanceOfTwoPoints(e,i),t=this.distanceOfTwoPoints(t,e);return r*s-n*o<1e-5&&a+i-t<.001}});var At=new A;function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===pt(t=function(t,e){if("object"!==pt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==pt(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}A=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.tr={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.rr={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var e,i;return e=t,(i=[{key:"min",get:function(){return this.tr}},{key:"max",get:function(){return this.rr}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}},{key:"copy",value:function(t){return this.rr.x=t.max.x,this.rr.y=t.max.y,this.tr.x=t.min.x,this.tr.y=t.min.y,this}},{key:"clone",value:function(){return(new t).copy(this)}},{key:"reset",value:function(){this.tr={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.rr={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}},{key:"toObject",value:function(){return{min:this.min,max:this.max,center:this.center,size:this.size}}},{key:"expand",value:function(t){this.nr(t)}},{key:"expandByCoords",value:function(t){this.ir(t)}},{key:"valid",value:function(){return this.er()}},{key:"isCross",value:function(t){var e=!0;return t.max.x<this.min.x&&(e=!1),t.min.x>this.max.x&&(e=!1),t.max.y<this.min.y&&(e=!1),!(t.min.y>this.max.y)&&e}}])&&dt(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var mt=(Object.assign(A.prototype,{er:function(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},nr:function(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},ir:function(t){var e=this;t&&0!=t.length&&t.forEach(function(t){t.x<e.min.x&&(e.min.x=t.x),t.y<e.min.y&&(e.min.y=t.y),t.x>e.max.x&&(e.max.x=t.x),t.y>e.max.y&&(e.max.y=t.y)})}}),A);function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=vt(t);if(i=e?(i=vt(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===yt(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t,e)).sr=new mt,t.ur=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var bt=(Object.assign(A.prototype,{X:function(t){return t.getType()!=j.MODEL?this.ar(t):this.hr(t)},hr:function(t){return!0},cr:function(t){return t=t.getBound(),!!At.ft(this.sr.tr,this.sr.rr,t.min,t.max)},H:function(t,e){var i=t.getCoordinates();if(t.getType()!==j.MODEL)e.dt=Math.sqrt(At.wt(i[0],this.lr));else{for(var r=Number.MAX_VALUE,n=0,o=i.length;n<o;n++)for(var s=1,a=i[n].length;s<a;s++){var u=i[n][s-1],h=i[n][s];(u=At.xt(this.lr,u,h))<r&&(r=u)}e.dt=Math.sqrt(r)}},ar:function(t){return t=t.getCoordinates()[0],!!At.ct(t,this.sr.tr,this.sr.rr)&&("circle"===this.ur?At.wt(t,this.lr)<this.vr:At.yt(t,this.yr,this.yr.length-1))}}),A);function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=bt;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Mt(t);if(i=e?(i=Mt(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===wt(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t,e)).ur="circle",t.lr=t.Y.center,t.br=t.Y.radius,t.vr=t.Y.radius*t.Y.radius,t.sr.ir([{x:t.lr.x-t.br,y:t.lr.y-t.br},{x:t.lr.x+t.br,y:t.lr.y+t.br}]),t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var _t=(Object.assign(A.prototype,{hr:function(t){if(this.cr(t))for(var e=t.getCoordinates(),i=0,r=e.length;i<r;i++)for(var n=1,o=e[i].length;n<o;n++){var s=e[i][n];if(At.wt(s,this.lr)<this.vr)return!0;var a=e[i][n-1];if(1==n&&At.wt(a,this.lr)<this.vr)return!0;if(At.xt(this.lr,a,s)<this.vr)return!0}return!1}}),A);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){return(Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=bt;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bt(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Et(t);if(i=e?(i=Et(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===St(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t,e)).ur="polygon",t.yr=t.Y,t.dr=t.yr.length-1,t.lr=At.jt(t.yr),t.sr.ir(t.yr),t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var Ct=(Object.assign(A.prototype,{hr:function(t){if(this.cr(t)){for(var e=t.getCoordinates(),i=0,r=e.length;i<r;i++)for(var n=0,o=e[i].length-1;n<o;n++)if(At.yt(e[i][n],this.yr,this.yr.length))return!0;for(var s=0;s<this.dr;s++){for(var a=!1,u=0,h=e.length;u<h;u++)At.yt(this.yr[s],e[u],e[u].length-1)&&(a=0==u);if(a)return!0}for(var l=0;l<=this.dr;l++)for(var c=null,f=l===this.dr?(c=this.yr[0],this.yr[l]):(c=this.yr[l],this.yr[l+1]),A=0,p=e.length;A<p;A++)for(var d=0,m=e[A].length-1;d<m;d++){var y=e[A][d],g=e[A][d+1];if(At.ht(c,f,y,g))return!0}}return!1}}),A);function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){return(Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Pt(t);if(i=e?(i=Pt(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Tt(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return i.call(this,t,e);throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var Ot=(Object.assign(A.prototype,{X:function(t){return!1}}),A);function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){return(Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}A=function(){var t=r,e=p;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rt(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=It(t);if(i=e?(i=It(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Dt(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e){if(this instanceof r)return(t=i.call(this,t,e)).pr=t.Y.point,t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var Ut=(Object.assign(A.prototype,{X:function(t){return t.getType()==j.MODEL&&this.hr(t)},hr:function(t){var e=t.getBound();if(!At.ct(this.pr,e.min,e.max))return!1;for(var i=t.getCoordinates(),r=0,n=0,o=i.length;n<o&&(At.yt(this.pr,i[n],i[n].length-1)&&r++,!(1<r));n++);return 1==r}}),A);function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Lt(t=function(t,e){if("object"!==Lt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Lt(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var jt=new(function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,i;return e=t,(i=[{key:"create",value:function(t){if(!t||"object"!=Lt(t))return null;var e,i=[];for(e in t)switch(e){case"FID":i.push(new g(e,t[e]));break;case"name":i.push(new B(e,t[e]));break;case"ename":i.push(new F(e,t[e]));break;case"keyword":i.push(new k(e,t[e]));break;case"typeID":i.push(new R(e,t[e]));break;case"circle":i.push(new _t(e,t[e]));break;case"polygon":i.push(new Ct(e,t[e]));break;case"buffer":i.push(new Ot(e,t[e]));break;case"contain":i.push(new Ut(e,t[e]))}return i}}])&&kt(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function zt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Qt(t=function(t,e){if("object"!==Qt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Qt(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}A=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.mr=null,this.wr=n.MODEL,this._r=null,this.gr=[],this.jr=[],this.Sr=!1,this.Or=null}var e,i;return e=t,(i=[{key:"levels",get:function(){return this.mr},set:function(t){this.mr=t}},{key:"type",get:function(){return this.wr},set:function(t){this.wr=t}},{key:"addCondition",value:function(t){var e,i=jt.create(t);(e=this.jr).push.apply(e,function(t){return function(t){if(Array.isArray(t))return Nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?Nt(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Nt(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i)),this.gr.push(t)}},{key:"onlyInBuilding",get:function(){return this.Sr},set:function(t){this.Sr=t}},{key:"buildings",get:function(){return this.Or},set:function(t){this.Or=t}},{key:"buildingID",get:function(){return this._r},set:function(t){this._r=t}}])&&zt(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Ht=i(1),Vt=0,Gt=2,Kt=4,Yt=8,Xt=404,Wt=64;function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function Jt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$t(r.key),r)}}function $t(t){return"symbol"===qt(t=function(t,e){if("object"!==qt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==qt(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}var te=function(t,e,i){return e&&Jt(t.prototype,e),i&&Jt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Er=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(i),!0).forEach(function(e){var r,n;r=t,n=i[e=e],(e=$t(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Zt(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({data:null,method:"GET",responseType:"json"},e),this.Tr=null}),ee=(Object.assign(te.prototype,{Rr:function(t,e,i){var r=this.Er,n=r.data,o=r.method,s=r.url,a=r.responseType,u=r.header,h=null;if((h=new("undefined"!=typeof XMLHttpRequest?XMLHttpRequest:Ht.a.global().fengmap.XMLHttpRequest)).responseType=a,h.open(o,s),"object"==qt(u))for(var l in u)h.setRequestHeader(l,u[l]);h.addEventListener("load",function(){200===h.status||0===h.status||201===h.status?t&&t(h.response):e&&(404===h.status?e(Xt):2069===h.response.error_code?e(Vt):2063===h.response.error_code?e(Gt):400===h.response.error_code?e(Kt):e(h.response))}),h.addEventListener("timeout",function(t){i&&i(t)}),h.addEventListener("error",function(t){e&&e(t)}),h.send(JSON.stringify(n)),this.Tr=h},Mr:function(){this.Tr&&this.Tr.abort&&(this.Tr.abort(),this.Tr=null)}}),te),ie=(te=i(27),i.n(te));function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===re(t=function(t,e){if("object"!==re(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==re(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}for(var oe=["TmF2aVNlZ21lbg==","YWNjZXNzaWJsZQ==","Zmlk","bmZv","Rmxvb3JHZW8=","bGlmdFR5cGU=","bGVu","dmVs","ZXh0ZW50TGF5ZQ==","RXh0ZW50Qml6SQ==","cmVhZE9ubHk=","LnByb3RvYnVm","aW50MzI=","ZG9vcnR5cGU=","R0VPUE9JTlRfTQ==","TmF2aVpvbmU=","ZW50cmFuY2VGbA==","bGVuZ3Ro","ZWxCaXpJbmZv","c3RhaXJMYXllcg==","dG9CaWQ=","R2F0ZQ==","b2Zmc2V0WQ==","Zmlkcw==","aXNTZWxlY3RhYg==","ZmxhZw==","ZXh0ZXJuYWxNbw==","bGlmdEVudHJ5","VklTRUdNRU5U","SW5kZXhJbmZv","ZGF0YQ==","ZGVsQml6SW5mbw==","bWlk","cG9pTGF5ZXI=","bW9kZWxpZA==","cGFja2Vk","dGhyb3VnaA==","bmF2aVNlZ21lbg==","bGlmdExheWVy","cmVwZWF0ZWQ=","ZGVmQ2VuWQ==","b29y","bm9kZUlk","TmF2aU1vZGVs","cmFuaw==","c25vZGU=","cHRz","ZGVmR2lk","aGFzaENvZGU=","bmVzdGVk","Ymlk","cmVxdWlyZWQ=","R0VPTElORV9OQQ==","b2Zmc2V0WA==","TmF2aU5vZGU=","bHR5cGU=","T1ZFUkxBWURBVA==","ZGVmQ2VuWA==","b3B0aW9ucw==","YmFzZUxldmVs","YXJlYQ==","TGF5ZXJHcm91cA==","ZmllbGRz","cGFzcw==","Zmxvb3Jz","SUZU","Rmxvb3JOYXZp","amF2YV9vdXRlcg==","UG9seWdvbkxhYg==","ZW50cmFuY2VUeQ==","VHlwZQ==","bmF2aVpvbmVz","ZWxMYXllcg==","YWxpYXM=","d2lkdGg=","YXllcg==","ZW50cnl0eXBlcw==","TGlmdEJpekluZg==","bm9kZXR5cGVz","amF2YV9wYWNrYQ==","bmF2aVR5cGU=","ZGF0ZVZlcg==","bGlmdEZsYWc=","Z2lk","bWF4WA==","bW5hbWU=","bWluU2NhbGVMZQ==","Zmxvb3JJZA==","X2NsYXNzbmFtZQ==","TW9kZWxCaXpJbg==","Zmxvb3I=","bmFtZQ==","c2NhbGVMZXZlbA==","RXh0ZXJuYWxNbw==","cGdpZA==","ZmlsZVZlcg==","VEFJUg==","bWlubGV2ZWw=","Rmxvb3JDb25maQ==","R2VuZXJhbEdlbw==","ZHJpdmU=","Ym9vbA==","a2V5","R0VPUE9MWUdPTg==","dG9HaWQ=","ZGVmQ2VuWg==","YnR5cGU=","R0VPUE9JTlRfUw==","cC5wbGF0Zm9ybQ==","TmF2aUZsb29y","ZmxvYXQ=","bmF2aUV4dGVudA==","UE9JQml6SW5mbw==","TGFiZWxCaXpJbg==","TGF5ZXI=","cnVsZQ==","bGlk","Y29tLmZlbmdtYQ==","c2NhbGU=","c2VnbWVudElk","ZGVzYw==","ZGVsTGF5ZXI=","R0VPUE9JTlRfUA==","cm90YXRlQW5nbA==","X0xBQkVM","cG9seWdvbkxheQ==","ZmlsZURhdGU=","R0VPUE9JTlRfTA==","U3RhaXJCaXpJbg==","ZXNjYWxhdG9yTA==","bGlua1NlZw==","QnVmZmVy","TmF2aUV4dGVudA==","Z2Vv","R0VPTElORQ==","bmF2aU5vZGVz","cmVqZWN0cw==","UG9seWdvbkJpeg==","aXNWaXNpYmxl","b25zaGlw","YnVmZmVycw==","bWF4bGV2ZWw=","ZG91Ymxl","R0VPUE9JTlRfRQ==","bmF2aQ==","Rmxvb3JCaXo=","Z1Byb3RvQnVm","T0RFTA==","ZW5hbWU=","bW9kZWxMYXllcg==","a2V5cw==","ZWlk","bGF5ZXJz","QU5PUkFNQQ==","UkRFUg==","R0VPUE9JTlQ=","QnVpbGRpbmc=","bWluWA==","TWFw","aGVpZ2h0","c3RyaW5n","dHlwZQ==","ZGVmYXVsdA==","cG9seWdvbkxhYg==","TmF2aVJlbGF0aQ==","dWludDY0","aWR4cw==","SW5mbw==","X0VYVEVOVA=="],se=oe,ae=218;--ae;)se.push(se.shift());function ue(t,e){var i=oe[t=+t],r=(void 0===ue.ngQRZk&&((r=function(){var t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}()).atob||(r.atob=function(t){for(var e,i,r=String(t).replace(/=+$/,""),n="",o=0,s=0;i=r.charAt(s++);~i&&(e=o%4?64*e+i:i,o++%4)&&(n+=String.fromCharCode(255&e>>(-2*o&6))))i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return n}),ue.bOCUYG=function(t){for(var e=atob(t),i=[],r=0,n=e.length;r<n;r++)i+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(i)},ue.TcYoxp={},ue.ngQRZk=!0),ue.TcYoxp[t]);return void 0===r?(i=ue.bOCUYG(i),ue.TcYoxp[t]=i):i=r,i}var he=function(t,e,i){return e&&ne(t.prototype,e),i&&ne(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");var e,i,r,n,o,s,a,u,h,l,c,f,A,p,d,m,y,g,v,b,w,x={},M=((n=((w=((_=((g=((h=((a=((d=((m=((b=(x[ue("0x1f")+"ge"]=ue("0x45")+ue("0x3c")+ue("0x84"),x[ue("0x13")+ue("0x28")]=ue("0x32")+ue("0x62"),{}))[ue("0x43")]="required",b[ue("0x71")]=ue("0x70"),b.id=1,{})).rule=ue("0x3"),m[ue("0x71")]=ue("0x85"),m.id=2,{})).rule=ue("0x3"),d.type=ue("0x75"),d.id=3,{}))[ue("0x43")]=ue("0x3"),a[ue("0x71")]=ue("0x70"),a.id=4,{}))[ue("0x43")]=ue("0x3"),h[ue("0x71")]=ue("0x70"),h.id=5,{}))[ue("0x71")]=ue("0x70"),g.id=6,{}))[ue("0x71")]=ue("0x70"),_.id=7,{}))[ue("0x71")]=ue("0x70"),w.id=8,{}))[ue("0x72")]=!1,{}),_=((g=((h=((a=((d=((m=((b=((u=((T=((n=(M.type="bool",M.id=9,M[ue("0xa")]=n,{}))[ue("0x43")]="repeated",n[ue("0x71")]=ue("0x53"),n.id=10,{})).rule="repeated",T.type=ue("0x70"),T.id=11,{}))[ue("0x99")]=b,u.fileVer=m,u[ue("0x21")]=d,u[ue("0x25")]=a,u.hashCode=h,u[ue("0x36")]=g,u[ue("0x4e")]=_,u.desc=w,u.readOnly=M,u[ue("0x5c")]=n,u[ue("0x66")]=T,{}))[ue("0x43")]=ue("0x3"),b[ue("0x71")]="int32",b.id=1,{}))[ue("0x43")]=ue("0x3"),m.type=ue("0x85"),m.id=2,{}))[ue("0x43")]="required",d[ue("0x71")]="int32",d.id=3,{})).rule="required",a[ue("0x71")]=ue("0x75"),a.id=4,{})).rule=ue("0x3"),h[ue("0x71")]="bytes",h.id=5,{}))[ue("0x23")]=b,g[ue("0x2f")]=m,g[ue("0x3a")]=d,g[ue("0x7f")]=a,g[ue("0x97")]=h,{}),S=(_=((g=((h=((a=((d=((m=((b=((T=((n=((M=((w=(_[ue("0xe")]=g,{})).Buffer=_,{}))[ue("0xe")]=u,M.nested=w,{}))[ue("0x43")]=ue("0x3"),n[ue("0x71")]="string",n.id=19,{})).rule=ue("0x3"),T.type=ue("0x85"),T.id=20,{}))[ue("0x43")]=ue("0x3"),b[ue("0x71")]="uint64",b.id=21,{}))[ue("0x43")]=ue("0x3"),m[ue("0x71")]=ue("0x70"),m.id=22,{})).rule=ue("0x3"),d[ue("0x71")]=ue("0x70"),d.id=23,{})).type="string",a.id=24,{}))[ue("0x71")]=ue("0x70"),h.id=25,{}))[ue("0x72")]=!1,{}),(A=((P=((B=((y=((i=((o=((e=((E=((g=((w=((u=(_[ue("0x71")]=ue("0x35"),_.id=26,_[ue("0xa")]=g,{}))[ue("0x71")]=ue("0x3e"),u.id=1,{}))[ue("0x71")]="float",w.id=2,{}))[ue("0x71")]="float",g.id=3,{}))[ue("0x71")]=ue("0x3e"),E.id=4,{})).type=ue("0x3e"),e.id=5,{})).type=ue("0x3e"),o.id=6,{})).type=ue("0x3e"),i.id=7,{}))[ue("0x71")]=ue("0x70"),y.id=8,{})).type=ue("0x3e"),B.id=9,{}))[ue("0x71")]=ue("0x3e"),P.id=10,{}))[ue("0x71")]=ue("0x3e"),A.id=11,{}),B=(S=((A=((P=((B=((y=((i=((o=((e=((E=((g=((w=((u=((_=((h=((a=((d=((m=((b=((T=((n=((v=((C=((s=((F=((p=((l=((f=((r=((c=(S.type=ue("0x3e"),S.id=12,{}))[ue("0x71")]=ue("0x3e"),c.id=13,{}))[ue("0x71")]=ue("0x3e"),r.id=14,{})).type=ue("0x3e"),f.id=15,{}))[ue("0x71")]=ue("0x3e"),l.id=16,{}))[ue("0x71")]=ue("0x70"),p.id=17,{}))[ue("0x71")]="int32",F.id=28,{})).rule=ue("0xa0"),s[ue("0x71")]="LayerGroup",s.id=18,{}))[ue("0x43")]="repeated",C[ue("0x71")]=ue("0x6c"),C.id=27,{})).mid=n,v.fileVer=T,v[ue("0x21")]=b,v[ue("0x25")]=m,v[ue("0x0")]=d,v[ue("0x36")]=a,v[ue("0x48")]=h,v[ue("0x83")]=_,v.x=u,v.y=w,v.z=g,v[ue("0x6d")]=E,v.minY=e,v[ue("0x24")]=o,v.maxY=i,v[ue("0xa8")]=y,v[ue("0x9")]=B,v[ue("0xa1")]=P,v[ue("0x39")]=A,v[ue("0x6f")]=S,v[ue("0x4b")+"eX"]=c,v.rotateAngleY=r,v[ue("0x4b")+"eZ"]=f,v[ue("0x46")]=l,v[ue("0x2c")]=p,v[ue("0x20")]=F,v.layerGroups=s,v.buildings=C,{}))[ue("0x71")]=ue("0x85"),n.id=1,{}))[ue("0x71")]=ue("0x70"),T.id=2,{}))[ue("0x71")]=ue("0x70"),b.id=3,{}))[ue("0x71")]=ue("0x16"),m.id=4,{})).type=ue("0x3e"),d.id=5,{}))[ue("0x71")]=ue("0x3e"),a.id=6,{}))[ue("0x71")]=ue("0x3e"),h.id=7,{}))[ue("0x71")]=ue("0x3e"),_.id=8,{}))[ue("0x71")]=ue("0x3e"),u.id=9,{}))[ue("0x71")]=ue("0x3e"),w.id=10,{}))[ue("0x71")]=ue("0x3e"),g.id=11,{}))[ue("0x71")]=ue("0x3e"),E.id=12,{}))[ue("0x71")]=ue("0x35"),e.id=13,{}))[ue("0x71")]=ue("0x35"),o.id=14,{}))[ue("0x71")]=ue("0x35"),i.id=15,{})).type=ue("0x70"),y.id=16,{}))[ue("0x44")]=n,B.lname=T,B[ue("0x19")]=b,B[ue("0x7")]=m,B[ue("0x5")]=d,B[ue("0x8f")]=a,B[ue("0x6f")]=h,B[ue("0x4b")+"eX"]=_,B.rotateAngleY=u,B[ue("0x4b")+"eZ"]=w,B[ue("0x26")+ue("0x80")]=g,B["maxScaleLe"+ue("0x80")]=E,B[ue("0x5a")]=e,B[ue("0x91")+"le"]=o,B.isEditable=i,B[ue("0x48")]=y,{}))[ue("0x6b")]=1,P[ue("0x5f")+"SCALATOR"]=2,P[ue("0x4f")+ue("0x11")]=3,P[ue("0x3b")+ue("0x30")]=4,P[ue("0x4a")+ue("0x69")]=5,P[ue("0x4a")+"OI"]=6,P[ue("0x3b")+"TORELABEL"]=7,P.GEOPOINT_NAVINODE=8,P[ue("0x87")+ue("0x63")]=9,P[ue("0x56")]=20,P[ue("0x4")+ue("0x95")]=21,P["GEOLINE_BO"+ue("0x6a")]=22,P[ue("0x37")]=30,P[ue("0x37")+ue("0x78")]=31,P.GEOPOLYGON_STORE=32,P[ue("0x37")+ue("0x4c")]=33,P.RASTERATA=40,P[ue("0x8")+"A"]=50,{})).values=P,{}),(A=((P=((y=((i=((o=((e=((E=((g=((w=((u=((_=((h=((a=((d=((m=((b=((T=((n=((C=((s=((F=((p=((l=((f=((r=((c=(S[ue("0x16")]=A,{}))[ue("0xe")]=B,c[ue("0x1")]=S,{}))[ue("0x71")]="int32",r.id=1,{}))[ue("0x71")]="string",f.id=2,{}))[ue("0x71")]="string",l.id=3,{}))[ue("0x71")]=ue("0x3e"),p.id=4,{}))[ue("0x71")]=ue("0x70"),F.id=5,{}))[ue("0x43")]="repeated",s[ue("0x71")]=ue("0x42"),s.id=6,{}))[ue("0x71")]=ue("0x70"),C.id=7,{}))[ue("0x71")]="int32",n.id=8,{})).gid=r,T.gname=f,T[ue("0x19")]=l,T[ue("0x6f")]=p,T[ue("0x48")]=F,T[ue("0x68")]=s,T[ue("0x27")]=C,T[ue("0x20")]=n,{}))[ue("0xe")]=T,{}))[ue("0x71")]=ue("0x85"),m.id=1,{}))[ue("0x71")]=ue("0x3e"),d.id=2,{}))[ue("0x71")]=ue("0x3e"),a.id=3,{})).type=ue("0x3e"),h.id=4,{})).type=ue("0x3e"),_.id=5,{}))[ue("0x71")]="float",u.id=6,{}))[ue("0x71")]=ue("0x3e"),w.id=7,{}))[ue("0x43")]=ue("0xa0"),g.type=ue("0x70"),g.id=8,{})).type=ue("0x85"),E.id=9,{})).type="bool",e.id=10,{}))[ue("0x71")]=ue("0x85"),o.id=11,{}))[ue("0x71")]="int32",i.id=12,{}))[ue("0x71")]=ue("0x70"),y.id=13,{})).rule="repeated",P[ue("0x71")]=ue("0x96"),P.id=14,{}))[ue("0x9c")]=!1,{}),E=((g=((w=((u=((_=((h=((a=((d=((m=((A=((T=((n=((C=((s=((F=((p=((l=((f=((r=((S=(B[ue("0x43")]=ue("0xa0"),B.type=ue("0x5e"),B.id=15,B[ue("0xa")]=A,{}))[ue("0x23")]=m,S.x=d,S.y=a,S.offsetX=h,S[ue("0x8f")]=_,S.angle=u,S.scale=w,S[ue("0x90")]=g,S[ue("0x2e")]=E,S[ue("0xb")]=e,S.minlevel=o,S[ue("0x5d")]=i,S.floorId=y,S.idxs=P,S[ue("0xa7")]=B,{}))[ue("0x9c")]=!1,{})).rule=ue("0xa0"),f[ue("0x71")]=ue("0x85"),f.id=1,f[ue("0xa")]=r,{}))[ue("0x76")]=f,{}))[ue("0xe")]=l,{})).IndexInfo=p,{}))[ue("0xe")]=S,s[ue("0x1")]=F,{}))[ue("0x71")]=ue("0x70"),C.id=1,{})).type="string",n.id=2,{})).type=ue("0x70"),T.id=3,{}))[ue("0x71")]=ue("0x70"),A.id=4,{})).type="float",m.id=5,{}))[ue("0x71")]=ue("0x3e"),d.id=6,{})).type=ue("0x70"),a.id=7,{}))[ue("0x71")]=ue("0x85"),h.id=8,{}))[ue("0x43")]="repeated",_[ue("0x71")]="Floor",_.id=9,{}))[ue("0x71")]="int32",u.id=10,{}))[ue("0x2")]=C,w[ue("0x2b")]=n,w[ue("0x64")]=T,w[ue("0x19")]=A,w.x=m,w.y=d,w.mid=a,w.version=h,w.floors=_,w.bcode=u,{})).fields=w,{}),C=(E=((v=((g=((s=((b=((c=((w=((u=((_=((h=((a=((d=((m=((A=((T=((n=((C=((F=((S=((p=((l=((f=((r=((B=((P=((y=((i=((o=((e=(E[ue("0x42")]=c,E[ue("0xd")]=b,E.Floor=s,E[ue("0x6c")]=g,{}))[ue("0xe")]=v,e[ue("0x1")]=E,{}))[ue("0x43")]=ue("0x3"),o[ue("0x71")]=ue("0x70"),o.id=1,{}))[ue("0x43")]="repeated",i[ue("0x71")]=ue("0x3d"),i.id=2,{})).mid=o,y[ue("0x10")]=i,{}))[ue("0x71")]="int32",P.id=1,{}))[ue("0x71")]="string",B.id=2,{}))[ue("0x71")]=ue("0x70"),r.id=3,{}))[ue("0x71")]=ue("0x70"),f.id=4,{}))[ue("0x43")]=ue("0xa0"),l.type=ue("0x74")+ue("0x5b"),l.id=5,{}))[ue("0x43")]=ue("0xa0"),p[ue("0x71")]=ue("0x74")+ue("0x5b"),p.id=6,{}))[ue("0x43")]=ue("0xa0"),S[ue("0x71")]=ue("0x74")+ue("0x5b"),S.id=7,{})).gid=P,F[ue("0x27")]=B,F[ue("0x2")]=r,F[ue("0x99")]=f,F[ue("0x60")]=l,F[ue("0x34")]=p,F.accessible=S,{}))[ue("0xe")]=F,{}))[ue("0x43")]=ue("0x3"),n[ue("0x71")]="int32",n.id=1,{}))[ue("0x71")]=ue("0x85"),T.id=2,{}))[ue("0x71")]=ue("0x85"),A.id=3,{}))[ue("0x43")]=ue("0xa0"),m[ue("0x71")]="IndexInfo",m.id=4,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]=ue("0xa0"),a[ue("0x71")]=ue("0x5e"),a.id=5,a.options=d,{})).type=ue("0x85"),h.id=6,{}))[ue("0x43")]=ue("0xa0"),_.type=ue("0x70"),_.id=7,{}))[ue("0x43")]="repeated",u[ue("0x71")]="string",u.id=8,{}))[ue("0x67")]=n,w[ue("0x71")]=T,w[ue("0x7a")]=A,w[ue("0x76")]=m,w[ue("0xa7")]=a,w[ue("0x92")]=h,w[ue("0x8d")]=_,w[ue("0x38")]=u,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]=ue("0xa0"),b[ue("0x71")]=ue("0x85"),b.id=1,b.options=c,{}))[ue("0x76")]=b,{}))[ue("0xe")]=s,{}))[ue("0x96")]=g,{}),(v=((w=((g=((s=((b=((c=((u=((_=((h=((a=((m=((A=((T=((n=((d=((F=((S=((p=((l=((f=((r=((B=((P=((i=((o=(E[ue("0xe")]=w,E.nested=v,{}))[ue("0x3d")]=C,o[ue("0x74")+ue("0x5b")]=E,{})).fields=y,i[ue("0x1")]=o,{}))[ue("0x43")]=ue("0x3"),P[ue("0x71")]=ue("0x70"),P.id=1,{}))[ue("0x43")]="required",B[ue("0x71")]=ue("0x85"),B.id=2,{})).type=ue("0x3e"),r.id=3,{}))[ue("0x43")]=ue("0xa0"),f[ue("0x71")]=ue("0x33")+ue("0x77"),f.id=4,{})).rule=ue("0xa0"),l[ue("0x71")]=ue("0x33")+"Info",l.id=5,{})).rule="repeated",p[ue("0x71")]="GeneralGeo"+ue("0x77"),p.id=6,{}))[ue("0x43")]="repeated",S[ue("0x71")]="GeneralGeoInfo",S.id=7,{}))[ue("0x43")]="repeated",F[ue("0x71")]=ue("0x33")+ue("0x77"),F.id=8,{})).rule=ue("0xa0"),d[ue("0x71")]=ue("0x33")+"Info",d.id=9,{}))[ue("0x43")]=ue("0xa0"),n[ue("0x71")]="GeneralGeoInfo",n.id=10,{}))[ue("0x43")]=ue("0xa0"),T.type=ue("0x33")+ue("0x77"),T.id=11,{}))[ue("0x43")]=ue("0xa0"),A[ue("0x71")]=ue("0x33")+"Info",A.id=12,{}))[ue("0x43")]=ue("0xa0"),m[ue("0x71")]=ue("0x33")+ue("0x77"),m.id=13,{}))[ue("0x99")]=P,a[ue("0x23")]=B,a[ue("0x6f")]=r,a[ue("0x81")+"r"]=f,a[ue("0x65")]=l,a.labelLayer=p,a[ue("0x9a")]=S,a[ue("0x4d")+"er"]=F,a[ue("0x73")+"elLayer"]=d,a[ue("0x9f")]=n,a[ue("0x8c")]=T,a[ue("0x51")+ue("0x1b")]=A,a[ue("0x93")+ue("0x49")]=m,{}))[ue("0x43")]=ue("0x3"),h[ue("0x71")]=ue("0x85"),h.id=1,{}))[ue("0x71")]="string",_.id=2,{}))[ue("0x71")]=ue("0x3e"),u.id=3,{})).type="float",c.id=4,{}))[ue("0x43")]="repeated",b[ue("0x71")]=ue("0x96"),b.id=5,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]=ue("0xa0"),g.type=ue("0x5e"),g.id=6,g[ue("0xa")]=s,{})).eid=h,w[ue("0x55")]=_,w[ue("0x6f")]=u,w[ue("0xc")]=c,w.idxs=b,w[ue("0xa7")]=g,{})).packed=!1,{}),T=(C=((v=((g=((b=((c=((u=((_=((h=((s=((m=((A=((T=((n=((d=((F=((S=((p=((l=((f=((r=((B=((P=((o=((y=((E=(C[ue("0x43")]=ue("0xa0"),C.type=ue("0x85"),C.id=1,C[ue("0xa")]=v,{}))[ue("0x76")]=C,{}))[ue("0xe")]=E,{}))[ue("0x96")]=y,{})).fields=w,P[ue("0x1")]=o,{}))["GeneralGeo"+ue("0x77")]=P,{}))[ue("0xe")]=a,r[ue("0x1")]=B,{})).rule=ue("0x3"),f[ue("0x71")]=ue("0x70"),f.id=1,{}))[ue("0x43")]=ue("0x3"),l[ue("0x71")]=ue("0x85"),l.id=2,{}))[ue("0x43")]="repeated",p[ue("0x71")]=ue("0x82")+ue("0x7c"),p.id=3,{})).rule="repeated",S.type=ue("0x29")+"fo",S.id=4,{}))[ue("0x43")]=ue("0xa0"),F.type=ue("0x41")+"fo",F.id=5,{})).rule=ue("0xa0"),d.type=ue("0x40"),d.id=6,{}))[ue("0x43")]=ue("0xa0"),n.type=ue("0x59")+"Info",n.id=7,{}))[ue("0x43")]=ue("0xa0"),T[ue("0x71")]=ue("0x1d")+"o",T.id=8,{}))[ue("0x43")]=ue("0xa0"),A.type=ue("0x50")+"fo",A.id=9,{}))[ue("0x43")]=ue("0xa0"),m[ue("0x71")]=ue("0x14")+ue("0x8b"),m.id=10,{}))[ue("0x43")]=ue("0xa0"),s[ue("0x71")]=ue("0x2d")+ue("0x98"),s.id=11,{}))[ue("0x99")]=f,h[ue("0x23")]=l,h[ue("0x81")+"r"]=p,h[ue("0x65")]=S,h.labelLayer=F,h[ue("0x9a")]=d,h[ue("0x4d")+"er"]=n,h.liftLayer=T,h[ue("0x8c")]=A,h["polygonLab"+ue("0x18")]=m,h[ue("0x93")+"delLayer"]=s,{})).rule=ue("0x3"),_[ue("0x71")]=ue("0x85"),_.id=1,{})).type=ue("0x70"),u.id=2,{}))[ue("0x71")]=ue("0x85"),c.id=3,{}))[ue("0x71")]=ue("0x70"),b.id=4,{})).type=ue("0x70"),g.id=5,{}))[ue("0x71")]="int32",v.id=6,{}),C=((v=((g=((b=((c=((u=((_=((s=((m=((A=((T=((n=((d=((F=((S=((p=((l=((f=((B=((a=((P=((o=((w=((y=((E=(C[ue("0x71")]="int32",C.id=7,{})).eid=_,E[ue("0x7b")]=u,E.type=c,E[ue("0x2b")]=b,E[ue("0x64")]=g,E[ue("0x31")]=v,E[ue("0x5d")]=C,{})).fields=E,{}))[ue("0x43")]="required",w[ue("0x71")]=ue("0x85"),w.id=1,{}))[ue("0x71")]="string",o.id=2,{}))[ue("0x71")]="int32",P.id=3,{}))[ue("0x71")]=ue("0x70"),a.id=4,{}))[ue("0x71")]=ue("0x70"),B.id=5,{})).type=ue("0x85"),f.id=6,{}))[ue("0x71")]=ue("0x85"),l.id=7,{}))[ue("0x71")]="int32",p.id=8,{}))[ue("0x67")]=w,S[ue("0x7b")]=o,S[ue("0x71")]=P,S[ue("0x2b")]=a,S[ue("0x64")]=B,S[ue("0x31")]=f,S[ue("0x5d")]=l,S[ue("0xf")]=p,{}))[ue("0xe")]=S,{}))[ue("0x43")]=ue("0x3"),d[ue("0x71")]=ue("0x85"),d.id=1,{}))[ue("0x71")]=ue("0x70"),n.id=2,{}))[ue("0x71")]=ue("0x85"),T.id=3,{}))[ue("0x71")]=ue("0x70"),A.id=4,{})).type=ue("0x70"),m.id=5,{}))[ue("0x71")]=ue("0x85"),s.id=6,{})).type=ue("0x85"),_.id=7,{}))[ue("0x67")]=d,u[ue("0x7b")]=n,u[ue("0x71")]=T,u[ue("0x2b")]=A,u[ue("0x64")]=m,u[ue("0x31")]=s,u.maxlevel=_,{})).fields=u,{}))[ue("0x43")]=ue("0x3"),b[ue("0x71")]=ue("0x85"),b.id=1,{}))[ue("0x71")]=ue("0x70"),g.id=2,{}))[ue("0x71")]="int32",v.id=3,{}),C=((v=((g=((b=((u=((_=((s=((m=((A=((T=((n=((d=((S=((p=((l=((f=((B=((a=((P=((o=((w=((E=(C[ue("0x71")]=ue("0x70"),C.id=4,{}))[ue("0x71")]=ue("0x70"),E.id=5,{})).type="int32",w.id=6,{}))[ue("0x71")]=ue("0x85"),o.id=7,{}))[ue("0x67")]=b,P.fid=g,P[ue("0x71")]=v,P[ue("0x2b")]=C,P[ue("0x64")]=E,P[ue("0x31")]=w,P[ue("0x5d")]=o,{}))[ue("0xe")]=P,{}))[ue("0x43")]=ue("0x3"),B.type=ue("0x85"),B.id=1,{})).type=ue("0x70"),f.id=2,{}))[ue("0x71")]=ue("0x85"),l.id=3,{}))[ue("0x71")]=ue("0x70"),p.id=4,{})).type=ue("0x70"),S.id=5,{}))[ue("0x71")]="int32",d.id=6,{})).type="int32",n.id=7,{})).eid=B,T[ue("0x7b")]=f,T[ue("0x71")]=l,T.name=p,T[ue("0x64")]=S,T[ue("0x31")]=d,T[ue("0x5d")]=n,{}))[ue("0xe")]=T,{}))[ue("0x43")]="required",m[ue("0x71")]=ue("0x85"),m.id=1,{})).type=ue("0x70"),s.id=2,{})).type=ue("0x85"),_.id=3,{})).type=ue("0x85"),u.id=4,{}))[ue("0x71")]=ue("0x70"),b.id=5,{})).type=ue("0x85"),g.id=6,{}))[ue("0x71")]=ue("0x85"),v.id=7,{}),C=((v=((g=((b=((u=((_=((s=((m=((T=((n=((d=((S=((p=((l=((f=((B=((P=((o=((w=((E=(C[ue("0x67")]=m,C[ue("0x7b")]=s,C[ue("0x71")]=_,C[ue("0x92")]=u,C[ue("0x2a")]=b,C[ue("0x31")]=g,C[ue("0x5d")]=v,{}))[ue("0xe")]=C,{}))[ue("0x43")]=ue("0x3"),w[ue("0x71")]="int32",w.id=1,{}))[ue("0x71")]=ue("0x70"),o.id=2,{}))[ue("0x71")]=ue("0x85"),P.id=3,{}))[ue("0x71")]=ue("0x85"),B.id=4,{}))[ue("0x71")]="int32",f.id=5,{}))[ue("0x71")]=ue("0x85"),l.id=6,{}))[ue("0x67")]=w,p[ue("0x7b")]=o,p[ue("0x71")]=P,p[ue("0x92")]=B,p[ue("0x31")]=f,p.maxlevel=l,{}))[ue("0xe")]=p,{})).rule=ue("0x3"),d[ue("0x71")]=ue("0x85"),d.id=1,{})).type=ue("0x70"),n.id=2,{}))[ue("0x71")]="int32",T.id=3,{}))[ue("0x71")]="float",m.id=4,{}))[ue("0x71")]=ue("0x70"),s.id=5,{}))[ue("0x71")]="string",_.id=6,{}))[ue("0x71")]=ue("0x3e"),u.id=7,{}))[ue("0x67")]=d,b[ue("0x7b")]=n,b[ue("0x71")]=T,b[ue("0x1a")]=m,b[ue("0x2b")]=s,b[ue("0x64")]=_,b.angle=u,{})).fields=b,{}))[ue("0x43")]=ue("0x3"),v[ue("0x71")]="int32",v.id=1,{}),C=((v=((b=((u=((_=((s=((m=((T=((n=((d=((p=((l=((f=((B=((P=((o=((w=(C.type="string",C.id=2,{}))[ue("0x71")]=ue("0x85"),w.id=3,{}))[ue("0x71")]=ue("0x70"),o.id=4,{}))[ue("0x71")]=ue("0x70"),P.id=5,{}))[ue("0x71")]="int32",B.id=6,{})).type=ue("0x85"),f.id=7,{}))[ue("0x67")]=v,l[ue("0x7b")]=C,l[ue("0x71")]=w,l.name=o,l[ue("0x64")]=P,l[ue("0x31")]=B,l[ue("0x5d")]=f,{}))[ue("0xe")]=l,{}))[ue("0x82")+"nfo"]=y,d[ue("0x29")+"fo"]=F,d[ue("0x41")+"fo"]=c,d[ue("0x59")+ue("0x77")]=a,d.POIBizInfo=A,d[ue("0x1d")+"o"]=E,d[ue("0x50")+"fo"]=S,d[ue("0x14")+ue("0x8b")]=g,d[ue("0x2d")+"delBizInfo"]=p,{}))[ue("0xe")]=h,n.nested=d,{}))[ue("0x43")]="required",T.type=ue("0x70"),T.id=1,{}))[ue("0x43")]="required",m.type=ue("0x85"),m.id=2,{}))[ue("0x43")]=ue("0xa0"),s[ue("0x71")]=ue("0x6"),s.id=3,{}))[ue("0x43")]="repeated",_[ue("0x71")]=ue("0x79")+"t",_.id=4,{}))[ue("0x43")]=ue("0xa0"),u[ue("0x71")]=ue("0x88"),u.id=5,{}))[ue("0x43")]=ue("0xa0"),b[ue("0x71")]="NaviModel",b.id=6,{}))[ue("0x9c")]=!1,{}),(v=((d=((h=((p=((g=((S=((E=((A=((a=((c=((F=((y=((l=((f=((B=((P=((o=((w=(C[ue("0x43")]=ue("0xa0"),C[ue("0x71")]=ue("0x85"),C.id=7,C[ue("0xa")]=v,{}))[ue("0x43")]=ue("0xa0"),w[ue("0x71")]="NaviExtent",w.id=8,{}))[ue("0x99")]=T,o[ue("0x23")]=m,o[ue("0x57")]=s,o[ue("0x9e")+"ts"]=_,o[ue("0x17")]=u,o.naviModels=b,o.nextFloors=C,o[ue("0x3f")+"s"]=w,{}))[ue("0x71")]="int32",P.id=1,{})).type=ue("0x85"),B.id=2,{}))[ue("0x71")]=ue("0x85"),f.id=3,{}))[ue("0x71")]=ue("0x85"),l.id=4,{}))[ue("0x71")]="int32",y.id=5,{}))[ue("0x71")]=ue("0x70"),F.id=6,{})).type="string",c.id=7,{}))[ue("0x71")]=ue("0x70"),a.id=8,{}))[ue("0x71")]="int32",A.id=9,{}))[ue("0x71")]=ue("0x70"),E.id=10,{}))[ue("0x71")]=ue("0x85"),S.id=11,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]=ue("0xa0"),p.type=ue("0x85"),p.id=12,p[ue("0xa")]=g,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]=ue("0xa0"),d[ue("0x71")]=ue("0x5e"),d.id=13,d[ue("0xa")]=h,{})).default=0,{}),F=((y=((l=((f=((B=((P=((v=((h=((g=((w=((C=((b=((u=((_=((s=((m=(T.type="int32",T.id=14,T[ue("0xa")]=v,{}))[ue("0xa3")]=P,m.nodeType=B,m[ue("0x7e")]=f,m[ue("0x22")]=l,m[ue("0x94")]=y,m.liftFloor=F,m[ue("0x52")]=c,m[ue("0x55")]=a,m[ue("0x15")+"pe"]=A,m[ue("0x89")+ue("0xa2")]=E,m[ue("0x86")]=S,m[ue("0x76")]=p,m.pts=d,m[ue("0x7a")]=T,{}))[ue("0xe")]=m,{}))[ue("0x71")]=ue("0x85"),_.id=1,{}))[ue("0x71")]="int32",u.id=2,{}))[ue("0x71")]=ue("0x85"),b.id=3,{}))[ue("0x71")]=ue("0x5e"),C.id=4,{}))[ue("0x71")]=ue("0x85"),w.id=5,{}))[ue("0x71")]=ue("0x70"),g.id=6,{}))[ue("0x71")]=ue("0x85"),h.id=7,{}))[ue("0x71")]=ue("0x70"),v.id=8,{}))[ue("0x71")]=ue("0x70"),P.id=9,{}))[ue("0x71")]=ue("0x85"),B.id=10,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]="repeated",l[ue("0x71")]=ue("0x85"),l.id=11,l[ue("0xa")]=f,{}))[ue("0x9c")]=!1,{}),P=((v=((h=((g=((w=((C=((b=((u=((_=((y=((f=((m=((T=((d=((p=((S=((E=((A=((a=((c=(F[ue("0x43")]=ue("0xa0"),F[ue("0x71")]=ue("0x5e"),F.id=12,F[ue("0xa")]=y,{}))[ue("0x47")]=_,c[ue("0xa6")]=u,c.enode=b,c[ue("0x8a")]=C,c[ue("0xa5")]=w,c[ue("0x2b")]=g,c.entry=h,c[ue("0x48")]=v,c[ue("0x55")]=P,c[ue("0x9d")]=B,c[ue("0x76")]=l,c[ue("0xa7")]=F,{}))[ue("0xe")]=c,{})).rule=ue("0x3"),A[ue("0x71")]=ue("0x85"),A.id=1,{}))[ue("0x72")]=0,{}))[ue("0x43")]=ue("0x3"),S.type=ue("0x85"),S.id=2,S[ue("0xa")]=E,{})).type=ue("0x70"),p.id=3,{}))[ue("0x43")]=ue("0xa0"),d[ue("0x71")]=ue("0x70"),d.id=4,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]=ue("0xa0"),m[ue("0x71")]="int32",m.id=5,m[ue("0xa")]=T,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]="repeated",y[ue("0x71")]=ue("0x5e"),y.id=6,y[ue("0xa")]=f,{})).id=A,_[ue("0x71")]=S,_[ue("0x55")]=p,_[ue("0x58")]=d,_[ue("0x76")]=m,_.pts=y,{}))[ue("0xe")]=_,{}))[ue("0x43")]="required",b[ue("0x71")]=ue("0x85"),b.id=1,{}))[ue("0x9c")]=!1,{}))[ue("0x43")]=ue("0xa0"),w.type=ue("0x85"),w.id=2,w.options=C,{})).packed=!1,{}))[ue("0x43")]=ue("0xa0"),h[ue("0x71")]="int32",h.id=3,h[ue("0xa")]=g,{}))[ue("0x9c")]=!1,{});(w=((b=((v=((g=((C=((_=((y=((m=((d=((p=((S=((A=((f=((T=((E=((c=((F=((l=((B=(P[ue("0x43")]=ue("0xa0"),P.type=ue("0x85"),P.id=4,P[ue("0xa")]=v,{}))[ue("0x9b")]=b,B.doorids=w,B[ue("0x1e")]=h,B[ue("0x1c")]=P,{}))[ue("0xe")]=B,{}))[ue("0x43")]=ue("0x3"),F[ue("0x71")]=ue("0x85"),F.id=1,{}))[ue("0x9c")]=!1,{})).rule=ue("0xa0"),E[ue("0x71")]="double",E.id=2,E.options=c,{}))[ue("0x43")]="repeated",T[ue("0x71")]=ue("0x96"),T.id=3,{})).id=F,f[ue("0xa7")]=E,f[ue("0x76")]=T,{})).packed=!1,{}))[ue("0x43")]=ue("0xa0"),S[ue("0x71")]=ue("0x85"),S.id=1,S.options=A,{}))[ue("0x76")]=S,{}))[ue("0xe")]=p,{}))[ue("0x96")]=d,{}))[ue("0xe")]=f,y[ue("0x1")]=m,{}))[ue("0x6")]=s,_[ue("0x79")+"t"]=a,_[ue("0x88")]=u,_[ue("0xa4")]=l,_[ue("0x54")]=y,{})).fields=o,C[ue("0x1")]=_,{}))[ue("0x6e")]=M,g.Scene=e,g[ue("0x8e")]=i,g[ue("0x7d")]=r,g[ue("0x61")]=n,g[ue("0x12")]=C,{}))[ue("0xa")]=x,v[ue("0x1")]=g,{})).protobuf=v,{}))[ue("0x1")]=b,this.id=w});function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===le(t=function(t,e){if("object"!==le(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==le(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(t,e,i){return e&&ce(t.prototype,e),i&&ce(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Nr=null});var fe=(Object.assign(te.prototype,{kr:function(){this.Nr||(this.Nr=ie.a.Root.fromJSON((new("undefined"!=typeof KjWzhWlSj&&KjWzhWlSj.ProtoDef?KjWzhWlSj.ProtoDef:he)).id))},Ar:function(t){return this.kr(),this.Nr.lookup("Map").decode(t)},Ir:function(t){for(var e=0;e<t.buffers.length;e++){var i=t.buffers[e];if(1==i.btype)return this.Pr(i.data)}return null},Dr:function(t){for(var e=0;e<t.buffers.length;e++){var i=t.buffers[e];if(7==i.btype)return this.Lr(i.data)}return null},Fr:function(t,e){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(2==r.btype&&r.gid==e)return this.Cr(r.data)}return null},Br:function(t,e){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(3==r.btype&&r.gid==e)return this.Ur(r.data)}return null},Gr:function(t,e){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(4==r.btype&&r.gid==e)return this.Wr(r.data)}return null},Zr:function(t,e){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(5===r.btype&&r.gid===e)return this.Wr(r.data)}return null},Vr:function(t,e){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(6===r.btype&&r.gid===e)return this.Wr(r.data)}return null},Pr:function(t){this.kr();var e=this.Nr.lookup("Scene").decode(t);return e.levels=[],e.layerGroups.forEach(function(t){e.levels.push(t.gid)}),e},Lr:function(t){return this.kr(),this.Nr.lookup("Gate").decode(t)},Cr:function(t){return this.kr(),this.Nr.lookup("FloorGeo").decode(t)},Ur:function(t){return this.kr(),this.Nr.lookup("FloorBiz").decode(t)},Wr:function(t){return this.kr(),this.Nr.lookup("FloorNavi").decode(t)}}),te);function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ae(t=function(t,e){if("object"!==Ae(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ae(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(t,e,i){return e&&pe(t.prototype,e),i&&pe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");void 0!==Ht.a.global().KjWzhWlSj&&Ht.a.global().KjWzhWlSj.ProtoReaderStatic?(e=Ht.a.global().KjWzhWlSj.ProtoReaderStatic,this.Yr=new e):this.Yr=new fe});var de,me,ye,ge,ve,be=(Object.assign(te.prototype,{Ar:function(t){return this.Yr.Ar(t)},Ir:function(t){return this.Yr.Ir(t)},Dr:function(t){return this.Yr.Dr(t)},Fr:function(t,e){return this.Yr.Fr(t,e)},Br:function(t,e){return this.Yr.Br(t,e)},Gr:function(t,e){return this.Yr.Gr(t,e)},Zr:function(t,e){return this.Yr.Zr(t,e)},Vr:function(t,e){return this.Yr.Vr(t,e)},Pr:function(t){return this.Yr.Pr(t)},Lr:function(t){return this.Yr.Lr(t)},Cr:function(t){return this.Yr.Cr(t)},Ur:function(t){return this.Yr.Ur(t)},Wr:function(t){return this.Yr.Wr(t)}}),te),we={domain:te="https://console.fengmap.com/api-s/",online:te+"sdk/check",check:te+"sdk/auth/web",download:te+"sdk/auth/obtainMapRoute",downloadTile:te+"sdk/authLayered/obtainMapRoute",collect:te+"sdk/collect",themeUrl:te+"webtheme/",externalModelURL:te+"webmodel/"};function xe(t,e){var i,r=0,n=0;for(n=0;n<8;n++)1&e&&(r^=t),i=128&t,t<<=1,i&&(t^=27),e>>=1;return r}function Me(t,e,i){for(var r=0;r<4;r++)t[0+r]^=e[16*i+4*r],t[4+r]^=e[16*i+4*r+1],t[8+r]^=e[16*i+4*r+2],t[12+r]^=e[16*i+4*r+3]}function _e(t){for(var e,i,r,n=1;n<4;n++)for(i=0;i<n;){for(r=t[4*n+4-1],e=3;0<e;e--)t[4*n+e]=t[4*n+e-1];t[4*n+0]=r,i++}}function Se(t){for(var e,i,r,n=0;n<4;n++)for(e=0;e<4;e++)i=(240&t[4*n+e])>>4,r=15&t[4*n+e],t[4*n+e]=me[16*i+r]}function Be(t){for(var e=0;e<4;e++)t[e]=de[16*((240&t[e])>>4)+(15&t[e])]}function Ee(t){return parseInt(t,16)}de=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],me=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ve=[2,ge=ye=0,0,0];var Ce=function(t,e){for(var i=Array(16),r=0;r<16;r++)i[r]=16*Ee(e.substr(2*r,1))+Ee(e.substr(2*r+1,1));var n=Array(16);for(r=0;r<16;r++)n[r]=16*Ee(t.substr(2*r,1))+Ee(t.substr(2*r+1,1));var o=Array(16);switch(r=[],i.length){default:case 16:ye=4,ge=10;break;case 24:ye=6,ge=12;break;case 32:ye=8,ge=14}for(var s=r=Array(16*(ge+1)),a=Array(4),u=4*(ge+1),h=0;h<ye;h++)s[4*h+0]=i[4*h+0],s[4*h+1]=i[4*h+1],s[4*h+2]=i[4*h+2],s[4*h+3]=i[4*h+3];for(h=ye;h<u;h++){if(a[0]=s[4*(h-1)+0],a[1]=s[4*(h-1)+1],a[2]=s[4*(h-1)+2],a[3]=s[4*(h-1)+3],0==h%ye){var l=void 0,c=void 0;for(l=(i=a)[0],c=0;c<3;c++)i[c]=i[c+1];if(i[3]=l,Be(a),1==(i=h/ye))ve[0]=1;else if(1<i)for(ve[0]=2,i--;0<i-1;)ve[0]=xe(ve[0],2),i--;(c=i=a)[0]=i[0]^(l=ve)[0],c[1]=i[1]^l[1],c[2]=i[2]^l[2],c[3]=i[3]^l[3]}else 6<ye&&4==h%ye&&Be(a);s[4*h+0]=s[4*(h-ye)+0]^a[0],s[4*h+1]=s[4*(h-ye)+1]^a[1],s[4*h+2]=s[4*(h-ye)+2]^a[2],s[4*h+3]=s[4*(h-ye)+3]^a[3]}for(s=Array(16),a=0;a<4;a++)for(h=0;h<4;h++)s[4*a+h]=n[a+4*h];for(Me(s,r,ge),n=ge-1;1<=n;n--)for(_e(s),Se(s),Me(s,r,n),a=s,h=[14,9,13,11],u=c=void 0,i=Array(4),l=Array(4),u=0;u<4;u++){for(c=0;c<4;c++)i[c]=a[4*c+u];c=h;var f=i,A=l;for(A[0]=xe(c[0],f[0])^xe(c[3],f[1])^xe(c[2],f[2])^xe(c[1],f[3]),A[1]=xe(c[1],f[0])^xe(c[0],f[1])^xe(c[3],f[2])^xe(c[2],f[3]),A[2]=xe(c[2],f[0])^xe(c[1],f[1])^xe(c[0],f[2])^xe(c[3],f[3]),A[3]=xe(c[3],f[0])^xe(c[2],f[1])^xe(c[1],f[2])^xe(c[0],f[3]),c=0;c<4;c++)a[4*c+u]=l[c]}for(_e(s),Se(s),Me(s,r,0),a=0;a<4;a++)for(h=0;h<4;h++)o[a+4*h]=s[4*a+h];for(n="",r=0;r<16;++r)n+=s=(s=o[r].toString(16)).length<2?"0"+s:s;return n};function Te(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function Fe(t,e,i,r,n,o){return Te((e=Te(Te(e,t),Te(r,o)))<<n|e>>>32-n,i)}function Pe(t,e,i,r,n,o,s){return Fe(e&i|~e&r,t,e,n,o,s)}function Oe(t,e,i,r,n,o,s){return Fe(e&r|i&~r,t,e,n,o,s)}function De(t,e,i,r,n,o,s){return Fe(e^i^r,t,e,n,o,s)}function Re(t,e,i,r,n,o,s){return Fe(i^(e|~r),t,e,n,o,s)}function Ie(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i,r,n,o,s=1732584193,a=-271733879,u=-1732584194,h=271733878,l=0;l<t.length;l+=16)s=Re(s=De(s=De(s=De(s=De(s=Oe(s=Oe(s=Oe(s=Oe(s=Pe(s=Pe(s=Pe(s=Pe(i=s,r=a,n=u,o=h,t[l],7,-680876936),a=Pe(a,u=Pe(u,h=Pe(h,s,a,u,t[l+1],12,-389564586),s,a,t[l+2],17,606105819),h,s,t[l+3],22,-1044525330),u,h,t[l+4],7,-176418897),a=Pe(a,u=Pe(u,h=Pe(h,s,a,u,t[l+5],12,1200080426),s,a,t[l+6],17,-1473231341),h,s,t[l+7],22,-45705983),u,h,t[l+8],7,1770035416),a=Pe(a,u=Pe(u,h=Pe(h,s,a,u,t[l+9],12,-1958414417),s,a,t[l+10],17,-42063),h,s,t[l+11],22,-1990404162),u,h,t[l+12],7,1804603682),a=Pe(a,u=Pe(u,h=Pe(h,s,a,u,t[l+13],12,-40341101),s,a,t[l+14],17,-1502002290),h,s,t[l+15],22,1236535329),u,h,t[l+1],5,-165796510),a=Oe(a,u=Oe(u,h=Oe(h,s,a,u,t[l+6],9,-1069501632),s,a,t[l+11],14,643717713),h,s,t[l],20,-373897302),u,h,t[l+5],5,-701558691),a=Oe(a,u=Oe(u,h=Oe(h,s,a,u,t[l+10],9,38016083),s,a,t[l+15],14,-660478335),h,s,t[l+4],20,-405537848),u,h,t[l+9],5,568446438),a=Oe(a,u=Oe(u,h=Oe(h,s,a,u,t[l+14],9,-1019803690),s,a,t[l+3],14,-187363961),h,s,t[l+8],20,1163531501),u,h,t[l+13],5,-1444681467),a=Oe(a,u=Oe(u,h=Oe(h,s,a,u,t[l+2],9,-51403784),s,a,t[l+7],14,1735328473),h,s,t[l+12],20,-1926607734),u,h,t[l+5],4,-378558),a=De(a,u=De(u,h=De(h,s,a,u,t[l+8],11,-2022574463),s,a,t[l+11],16,1839030562),h,s,t[l+14],23,-35309556),u,h,t[l+1],4,-1530992060),a=De(a,u=De(u,h=De(h,s,a,u,t[l+4],11,1272893353),s,a,t[l+7],16,-155497632),h,s,t[l+10],23,-1094730640),u,h,t[l+13],4,681279174),a=De(a,u=De(u,h=De(h,s,a,u,t[l],11,-358537222),s,a,t[l+3],16,-722521979),h,s,t[l+6],23,76029189),u,h,t[l+9],4,-640364487),a=De(a,u=De(u,h=De(h,s,a,u,t[l+12],11,-421815835),s,a,t[l+15],16,530742520),h,s,t[l+2],23,-995338651),u,h,t[l],6,-198630844),a=Re(a=Re(a=Re(a=Re(a,u=Re(u,h=Re(h,s,a,u,t[l+7],10,1126891415),s,a,t[l+14],15,-1416354905),h,s,t[l+5],21,-57434055),u=Re(u,h=Re(h,s=Re(s,a,u,h,t[l+12],6,1700485571),a,u,t[l+3],10,-1894986606),s,a,t[l+10],15,-1051523),h,s,t[l+1],21,-2054922799),u=Re(u,h=Re(h,s=Re(s,a,u,h,t[l+8],6,1873313359),a,u,t[l+15],10,-30611744),s,a,t[l+6],15,-1560198380),h,s,t[l+13],21,1309151649),u=Re(u,h=Re(h,s=Re(s,a,u,h,t[l+4],6,-145523070),a,u,t[l+11],10,-1120210379),s,a,t[l+2],15,718787259),h,s,t[l+9],21,-343485551),s=Te(s,i),a=Te(a,r),u=Te(u,n),h=Te(h,o);return[s,a,u,h]}function Ue(t){for(var e="",i=32*t.length,r=0;r<i;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}function Le(t){var e=[];for(e[(t.length>>2)-1]=void 0,r=0;r<e.length;r+=1)e[r]=0;for(var i=8*t.length,r=0;r<i;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}function ke(t){for(var e,i="0123456789abcdef",r="",n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+=i.charAt(e>>>4&15)+i.charAt(15&e);return r}function je(t){return unescape(encodeURIComponent(t))}function Qe(t){return Ue(Ie(Le(t=je(t)),8*t.length))}function Ne(t,e){t=je(t),e=je(e);var i,r=Le(t),n=[],o=[];for(n[15]=o[15]=void 0,16<r.length&&(r=Ie(r,8*t.length)),i=0;i<16;i+=1)n[i]=909522486^r[i],o[i]=1549556828^r[i];return t=Ie(n.concat(Le(e)),512+8*e.length),Ue(Ie(o.concat(t),640))}var ze=function(t){return function(t,e,i){return e?i?Ne(e,t):ke(Ne(e,t)):i?Qe(t):ke(Qe(t))}(t)};function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===He(t=function(t,e){if("object"!==He(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==He(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var Ge="0.0.0.0";te=function(t,e,i){return e&&Ve(t.prototype,e),i&&Ve(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(te.prototype,{zr:function(t,e,i,r,n){"undefined"==typeof KjWzhWlSj||!KjWzhWlSj.license||"string"==typeof e&&0!=e.length&&(e=Ce(e,"026685bf295f587b5dffc1f18d5dc27c"),i=ze(i),e=Ce(e,i),-1!==t.indexOf(e))?r&&r():n&&n()},Xr:function(t,e,i,r){var n;-1!==e.indexOf("")||-1!==e.indexOf("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")?i&&i():(n=ze("fengmap.localhost:"+t.appName),n=Ce(t.key,n),-1!==e.indexOf(n)?this.zr(e,t.license,t.buildingID,function(){i&&i()},function(){r&&r(Yt)}):r&&r(Vt))},qr:function(t,e,i){var r=this;void 0!==t.mapURL?e&&e():(t.enableCollect&&this.Hr(t),this.Qr(function(){new ee({method:"POST",url:we.check,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:r.Kr(t)}).Rr(function(){e&&e()},function(t){i&&i(t)},function(){e&&e()})},function(){e&&e()}))},Qr:function(t,e){new ee({method:"GET",url:we.online}).Rr(function(){t&&t()},function(){e&&e()},function(){e&&e()})},Kr:function(t,e){var i=Ht.a.global().location.host,r=(-1!==(r=i.indexOf(":"))&&(i=i.slice(0,r)),{mapId:t.buildingID,appName:t.appName});return e?r.keyValue=t.key:r.appKey=t.key,e?r.webUrl=i||Ge:r.webURL=i||Ge,r},Hr:function(t){if("undefined"!=typeof navigator&&"undefined"!=typeof document){var e={};-1!==navigator.userAgent.indexOf("Opera")?e.userAgent="Opera":-1!==navigator.userAgent.indexOf("Firefox")?e.userAgent="FF":-1!==navigator.userAgent.indexOf("Chrome")?e.userAgent="Chrome":-1!==navigator.userAgent.indexOf("Safari")&&0===navigator.userAgent.indexOf("Chrome")?e.userAgent="Safari":-1!==navigator.userAgent.indexOf("compatible")&&-1!==navigator.userAgent.indexOf("MSIE")?e.userAgent="IE":-1!==navigator.userAgent.indexOf("Trident")&&(e.userAgent="Edge"),e.product="JS",e.sdkVersion=r+".70",e.appName=t.appName,e.appkey=t.key;for(var i=(t=document.createElement("canvas").getContext("experimental-webgl")).getExtension("WEBGL_debug_renderer_info"),n=(e.gpu=i?t.getParameter(i.UNMASKED_RENDERER_WEBGL):null,e.os=navigator.platform,!0),o=navigator.userAgent,s=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=0;a<s.length;a++)if(0<o.indexOf(s[a])){n=!1;break}e.device=n?"pc":"mobile",new ee({method:"POST",url:we.collect,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:e}).Rr()}}});var Ke=new te;function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t){return function(t){if(Array.isArray(t))return We(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?We(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?We(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function qe(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ye(t=function(t,e){if("object"!==Ye(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ye(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(t,e,i){return e&&qe(t.prototype,e),i&&qe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Yr=new be,this.Jr=[]});var Ze=(Object.assign(te.prototype,{Mr:function(){this.Jr.forEach(function(t){t.Mr()}),this.Jr.length=0},$r:function(t,e,i,r){var n;t.mapURL?(n=t.isPreview?t.isOutdoor?t.tile?t.mapURL+t.buildingID+"/separate/"+t.buildingID+e+".fmap":t.mapURL+t.buildingID+"/"+t.buildingID+e+".fmap":t.tile?t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/separate/"+t.buildingID+e+".fmap":t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/"+t.buildingID+e+".fmap":t.mapURLAbsolute?t.mapURL+t.buildingID+e+".fmap":t.isOutdoor?t.mapURL+t.buildingID+"/"+t.buildingID+e+".fmap":t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/"+t.buildingID+e+".fmap",i&&i(n)):(n={newFlag:"2",keyType:3,isSeparate:!1},t.isOutdoor||(n.bId=t.bid,n.rootMid=t.mapID),e=new ee({method:"POST",url:""===e?we.download:we.downloadTile+"/"+t.buildingID+e+".fmap",header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:Object.assign(n,Ke.Kr(t,!0))}),this.Jr.push(e),e.Rr(function(t){i&&i(t.replace('"',"").replace('"',""))},function(t){r&&r(t)},function(t){r&&r(t)}))},tn:function(t,e,i){var r=this;t.enableCollect=!0,Ke.qr(t,function(){r.$r(t,"",function(n){n=new ee({method:"GET",responseType:"arraybuffer",url:n}),r.Jr.push(n),n.Rr(function(n){n=new Uint8Array(n);var o=r.Yr.Ar(n);!t.isOutdoor||(n=[],o.keys&&0!==o.keys.length?n.push.apply(n,Xe(o.keys)):n.push(o.key),t.isPreview)?e&&e(o):Ke.Xr(t,n,function(){e&&e(o)},function(t){i&&i(t)})},function(t){i&&i(t===Xt?Gt:t)},function(t){i&&i(t)})},function(t){i&&i(t)})},function(t){i&&i(t)})},rn:function(t,e,i){var r=this;t.enableCollect=!0,Ke.qr(t,function(){r.$r(t,".scene",function(n){n=new ee({method:"GET",responseType:"arraybuffer",url:n}),r.Jr.push(n),n.Rr(function(n){n=new Uint8Array(n);var o=r.Yr.Pr(n);!t.isOutdoor||(n=[],o.keys&&0!==o.keys.length?n.push.apply(n,Xe(o.keys)):n.push(o.key),t.isPreview)?e&&e(o):Ke.Xr(t,n,function(){e&&e(o)},function(t){i&&i(t)})},function(t){i&&i(t)},function(t){i&&i(t)})},function(t){i&&i(t)})},function(t){i&&i(t)})},nn:function(t,e,i){var r=this;this.$r(t,".gate",function(t){t=new ee({method:"GET",responseType:"arraybuffer",url:t}),r.Jr.push(t),t.Rr(function(t){t=new Uint8Array(t),t=r.Yr.Lr(t),e&&e(t)},function(t){i&&i(t)},function(t){i&&i(t)})},function(t){i&&i(t)})},sn:function(t,e,i,r){var n=this;this.$r(t,".floor."+e+".geo",function(t){t=new ee({method:"GET",responseType:"arraybuffer",url:t}),n.Jr.push(t),t.Rr(function(t){t=new Uint8Array(t),t=n.Yr.Cr(t),i&&i(t)},function(t){r&&r(t)},function(t){r&&r(t)})},function(t){r&&r(t)})},un:function(t,e,i,r){var n=this;this.$r(t,".floor."+e+".biz",function(t){t=new ee({method:"GET",responseType:"arraybuffer",url:t}),n.Jr.push(t),t.Rr(function(t){t=new Uint8Array(t),t=n.Yr.Ur(t),i&&i(t)},function(t){r&&r(t)},function(t){r&&r(t)})},function(t){r&&r(t)})},an:function(t,e,i,r){var n=this;this.$r(t,e,function(t){t=new ee({method:"GET",responseType:"arraybuffer",url:t}),n.Jr.push(t),t.Rr(function(t){t=new Uint8Array(t),t=n.Yr.Wr(t),i&&i(t)},function(t){r&&r(t)})},function(t){r&&r(t)},function(t){r&&r(t)})},hn:function(t,e,i,r){this.an(t,".floor."+e+".navi",i,r)},cn:function(t,e,i,r){this.an(t,".floor."+e+".drive.navi",i,r)},ln:function(t,e,i,r){this.an(t,".floor."+e+".accessible.navi",i,r)}}),te);function Je(t){for(var e=[],i=t.length,r=0;r<i;r++){for(var n=t[r],o={x:this.vn(n.x),y:this.vn(n.y)},s=e.length,a=!1,u=0;u<s;u++){var h=e[u];if(h.x==o.x&&h.y==o.y){a=!0;break}}a||e.push(o)}return e}function $e(t){return+t.toFixed(2)}function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ti(t=function(t,e){if("object"!==ti(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ti(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(t,e,i){return e&&ei(t.prototype,e),i&&ei(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}),Object.assign(te.prototype,{yn:function(t,e){for(var i=[],r=0,n=0;n<t.length;n++){var o=t[n].idxs;if("number"==typeof(o=o||t[n]))for(;r<o;)i.push({x:e[r],y:e[r+1]}),r+=2;else for(var s=0;s<o.length;s++)for(var a=o[s];r<a;)i.push({x:e[r],y:e[r+1]}),r+=2}return i},bn:function(t,e){for(var i=[],r=0,n=0;n<t.length;n++){var o=t[n].idxs;if("number"==typeof(o=o||t[n])){for(var s=[];r<o;)s.push({x:e[r],y:e[r+1]}),r+=2;i.push(s)}else for(var a=0;a<o.length;a++){for(var u=o[a],h=[];r<u;)h.push({x:e[r],y:e[r+1]}),r+=2;i.push(h)}}return i},dn:function(t,e){for(var i=[],r=[],n=0,o=0;o<t.length;o++){var s=t[o].idxs;if("number"==typeof(s=s||t[o]))for(;n<s;)i.push({x:e[n],y:e[n+1]}),n+=2;else for(var a=0;a<s.length;a++)if(0===a)for(var u=s[a];n<u;)i.push({x:e[n],y:e[n+1]}),n+=2;else{for(var h=[],l=s[a];n<l;)h.push({x:e[n],y:e[n+1]}),n+=2;r.push(h)}}var c=[];return c.push(i),c.push.apply(c,r),c},pn:function(t){return Je(t)},vn:$e});var ii=new te;function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ni(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ri(t=function(t,e){if("object"!==ri(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ri(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var oi={G1:"MULTIPOLYGON(((",G2:"POINT(",G3:"MULTILINESTRING(("};oi.GLEN1="MULTIPOLYGON(((".length,oi.GLEN2="POINT(".length,oi.GLEN3="MULTILINESTRING((".length,te=function(t,e,i){return e&&ni(t.prototype,e),i&&ni(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(te.prototype,{yn:function(t){var e=[];return 0!=t.indexOf(oi.G2)?[]:(t=t.substring(oi.GLEN2,t.length-1).split(" "),e.push({x:parseFloat(t[0]),y:parseFloat(t[1])}),e)},mn:function(t,e){for(var i=0;i<t.length;i++){var r=t[i].split(" ");e.push({x:parseFloat(r[0]),y:parseFloat(r[1])})}},bn:function(t){return 0!=t.indexOf(oi.G3)?[]:(t=t.substring(oi.GLEN3,t.length-2).split(","),this.mn(t,t=[]),[t])},dn:function(t){var e=[],i=[];if(0!=t.indexOf(oi.G1))return[];for(var r=t.substring(oi.GLEN1,t.length-3).split(/\),\(/),n=0;n<r.length;n++){var o=r[n].split(/,/);if(0==n)this.mn(o,e);else{for(var s=[],a=0;a<o.length;a++){var u=o[a].split(" ");s.push({x:parseFloat(u[0]),y:parseFloat(u[1])})}i.push(s)}}return(t=[]).push(e),t.push.apply(t,i),t},pn:function(t){return Je(t)},vn:$e});var si=new te,ai=(te={STOP:0,PASS:1,PUSH:2},Object.freeze(te),te);function ui(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===hi(t=function(t,e){if("object"!==hi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==hi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.wr=j.GROUP,this.wn=new Map,this.xn=-1,this.sr=null,Object.assign(this,e)}var e,i;return e=t,(i=[{key:"getType",value:function(){return this.wr}},{key:"getBound",value:function(){return this.sr||this._n(),this.sr}},{key:"getChildren",value:function(){return this.wn}}])&&li(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var ci=(Object.assign(te.prototype,{Mr:function(){var t,e=function(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=function(t,e){var i;if(t)return"string"==typeof t?ui(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ui(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.wn.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i.Mr&&i.Mr()}}catch(t){e.e(t)}finally{e.f()}this.wn.clear()},gn:function(t){var e=t._support(this);e==ai.PASS?this.wn.forEach(function(e){e.gn(t)}):e==ai.PUSH&&t.jn.push(this)},_n:function(){var t=this;this.sr=new mt,0!=this.wn.size&&this.wn.forEach(function(e){t.sr.nr(e.getBound())})}}),te);function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ai(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===fi(t=function(t,e){if("object"!==fi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==fi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.xn=-1,this.wr=j.NONE,this.Sn=null,this.sr=null}var e,i;return e=t,(i=[{key:"getType",value:function(){return this.wr}},{key:"getCoordinates",value:function(){return this.Sn}},{key:"getBound",value:function(){return this.sr||this._n(),this.sr}}])&&Ai(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var pi=(Object.assign(te.prototype,{Mr:function(){},gn:function(t){t._support(this)==ai.PUSH&&t.jn.push(this)}}),te);function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(t,e){return(mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}te=function(){var t=r,e=pi;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mi(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=gi(t);if(i=e?(i=gi(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===di(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return yi(r)}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this)).xn=t.eid,e.wr=j.POINT,Object.assign(yi(e),t),e;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var vi=(Object.assign(te.prototype,{_n:function(){this.sr=new mt,this.Sn&&this.sr.ir(this.Sn)},gn:function(t){t._support(this)==ai.PUSH&&t.jn.push(this)}}),te);function bi(t){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wi(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===bi(t=function(t,e){if("object"!==bi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==bi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function xi(t,e){return(xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _i(t){return(_i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}te=function(){var t=r,e=pi;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xi(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=_i(t);if(i=e?(i=_i(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===bi(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return Mi(r)}}(r);function r(t){var e;if(this instanceof r)return(e=i.call(this)).xn=t.eid,e.wr=j.POLYGON,Object.assign(Mi(e),t),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getCenter",value:function(){return this.lr}}])&&wi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();var Si=(Object.assign(te.prototype,{_n:function(){var t=this;this.sr=new mt,this.Sn&&this.Sn.forEach(function(e){t.sr.ir(e)})},gn:function(t){t._support(this)==ai.PUSH&&t.jn.push(this)}}),te);function Bi(t){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ei=["layerGroups"],Ci=["layers"];function Ti(t,e){if(null==t)return{};var i,r=function(t,e){if(null==t)return{};var i,r,n={},o=Object.keys(t);for(r=0;r<o.length;r++)i=o[r],0<=e.indexOf(i)||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(t),o=0;o<n.length;o++)i=n[o],0<=e.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i]);return r}function Fi(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Bi(t=function(t,e){if("object"!==Bi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Bi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(t,e,i){return e&&Fi(t.prototype,e),i&&Fi(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.On=[1,2,3,4],this.En=[6,7,9],this.Tn=[31,32],this.Rn=new Map,this.Rn.set(31,j.EXTENTGROUP),this.Rn.set(32,j.MODELGROUP),this.Rn.set(6,j.FACILITYGROUP),this.Rn.set(7,j.LABELGROUP),this.Rn.set(9,j.EXTERNALMODELGROUP),this.Mn=new Map,this.Mn.set(31,["extentLayer",null]),this.Mn.set(32,["modelLayer","labelLayer"]),this.Mn.set(6,["poiLayer",null]),this.Mn.set(7,["labelLayer",null]),this.Mn.set(9,["externalModelLayer",null]),this.Yr=new be});var Pi=(Object.assign(te.prototype,{Nn:function(t){var e;return t?(e=t.scene,this.kn(e,t)):null},kn:function(t,e){var i=this,r=t.layerGroups,n=Ti(t,Ei),o=t.fileVer,s=new ci(n);return r.forEach(function(t){var r=i.An(t,e,o);s.wn.set(t.gid,r)}),s},An:function(t,e,i){var r=this,n=t.layers,o=Ti(t,Ci),s=new ci(o),a=e&&e.floors?e.floors.get(t.gid).geo[0]:null,u=e&&e.floors?e.floors.get(t.gid).biz[0]:null;return n.forEach(function(t){6===t.ltype&&-1!==t.lname.indexOf("storelabel")&&(t.ltype=7);var e=r.In(t,a,u,i);null!==e&&s.wn.set(r.Rn.get(t.ltype),e)}),this.Pn(s),s},Pn:function(t){var e=Array.from(t.wn);e.sort(function(t,e){return t[0]-e[0]}),t.wn=new Map(e)},In:function(t,e,i,r){var n;return-1===this.On.indexOf(t.ltype)&&this.Mn.get(t.ltype)?(n=new ci(t),this.Dn(n,e,i,r),n&&(n.wr=this.Rn.get(t.ltype)),n):null},Dn:function(t,e,i,r){if(t){var n=this.Mn.get(t.ltype);if(n){var o=e?e[n[0]]:[],s=i?i[n[0]]:[];switch(t.ltype){case 6:this.Ln(t,o,s,r,j.FACILITY);break;case 7:this.Ln(t,o,s,r,j.LABEL);break;case 9:this.Ln(t,o,s,r,j.EXTERNALMODEL);break;case 31:this.Fn(t,o,s,r,j.EXTENT,null);break;case 32:this.Fn(t,o,s,r,j.MODEL,e?e[n[1]]:null)}}}},Ln:function(t,e,i,r,n){for(var o=0;o<e.length;o++){var s=this.Cn(e[o],i[o],r);s.wr=n,t.wn.set(e[o].eid,s)}},Cn:function(t,e,i){return e=Object.assign({},e,{area:t.area,eid:t.eid,height:t.height}),e=new vi(e),t.coordinates?e.Sn=t.coordinates:(e.Sn=1==i?si.yn(t.geo):ii.yn(t.idxs,t.pts),t.coordinates=e.Sn),e},Fn:function(t,e,i,r,n,o){for(var s=0;s<e.length;s++){var a=this.Bn(e[s],i[s],r,o?o[s]:null);a.wr=n,t.wn.set(e[s].eid,a)}},Bn:function(t,e,i,r){return e=Object.assign({},e,{area:t.area,eid:t.eid,height:t.height}),(e=new Si(e)).Sn=1===i?si.dn(t.geo):ii.dn(t.idxs,t.pts),r&&(r.coordinates||(r.coordinates=1===i?si.yn(r.geo):ii.yn(r.idxs,r.pts)),e.lr=r.coordinates[0]),e}}),te),Oi=2,Di=4,Ri=8;function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ui(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ii(t=function(t,e){if("object"!==Ii(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ii(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(t,e,i){return e&&Ui(t.prototype,e),i&&Ui(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Un=e.disposeCallback,this.Gn=!1,this.Wn=!1,this.Zn=void 0!==e.enable&&e.enable,this.name=void 0!==e.name?e.name:"",this.Vn=new Map,this.Yn=e.mapCreateTime});for(var Li=(Object.assign(te.prototype,{zn:function(){!this.Zn||this.Wn||this.Gn&&0===this.Vn.size&&(this.Un({mapCreateTime:this.Yn}),this.Wn=!0)},Xn:function(t){this.Zn&&(this.Gn=t,this.zn())},qn:function(t){this.Zn&&(this.Vn.has(t),this.Vn.set(t,0))},Hn:function(t){this.Zn&&this.Vn.has(t)&&(this.Vn.delete(t),this.zn())}}),te),ki=[],ji=0;ji<256;ji++)ki[ji]=(ji<16?"0":"")+ji.toString(16);var Qi={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ki[255&t]+ki[t>>8&255]+ki[t>>16&255]+ki[t>>24&255]+"-"+ki[255&e]+ki[e>>8&255]+"-"+ki[e>>16&15|64]+ki[e>>24&255]+"-"+ki[63&i|128]+ki[i>>8&255]+"-"+ki[i>>16&255]+ki[i>>24&255]+ki[255&r]+ki[r>>8&255]+ki[r>>16&255]+ki[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Qi.DEG2RAD},radToDeg:function(t){return t*Qi.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var o=Math.cos,s=Math.sin,a=o(i/2),u=(i=s(i/2),o((e+r)/2)),h=s((e+r)/2),l=o((e-r)/2),c=s((e-r)/2);o=o((r-e)/2),s=s((r-e)/2);"XYX"===n?t.set(a*h,i*l,i*c,a*u):"YZY"===n?t.set(i*c,a*h,i*l,a*u):"ZXZ"===n?t.set(i*l,i*c,a*h,a*u):"XZX"===n?t.set(a*h,i*s,i*o,a*u):"YXY"===n?t.set(i*o,a*h,i*s,a*u):"ZYZ"===n&&t.set(i*s,i*o,a*h,a*u)}};function Ni(t){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ni(t=function(t,e){if("object"!==Ni(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ni(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Qn=new Map,this.Kn=new Map,this.Er=new Map,this.Jn=new Map,this.$n=new Map,this.ti=new Map,this.ri=[2,3],this.ni=!1,this.Yr=new be,this.ii=new Pi,this.ei=new Ze,this.oi=null,this.si=this.si.bind(this),this.ui=new Li({disposeCallback:this.si,enable:!0,name:"DataManager",mapCreateTime:e?e.mapCreateTime:(new Date).getTime()})}var e,i;return e=t,(i=[{key:"load",value:function(t,e){this.fi(t,e)}},{key:"loadWhole",value:function(t,e){this.ai(t,e)}},{key:"getDecode",value:function(t){return t=void 0!==t.buildingID?t.buildingID:t.mapID,this.ci({buildingID:t})}},{key:"getData",value:function(t){return t=void 0!==t.buildingID?t.buildingID:t.mapID,this.Qn.get(t)}},{key:"setCache",value:function(t){this.Qn=t[0],this.Kn=t[1]}},{key:"getCache",value:function(){return[this.Qn,this.Kn]}}])&&zi(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Hi=(Object.assign(te.prototype,{Mr:function(t){this.oi=t,this.ei.Mr(),this.ui.Xn(!0)},si:function(){this.Qn.clear(),this.Qn=null,this.Kn.clear(),this.Kn=null,this.Er.clear(),this.Er=null,this.Jn.clear(),this.Jn=null,this.$n.clear(),this.$n=null,this.ti.clear(),this.ti=null,this.oi&&this.oi({name:"DataManager"})},li:function(t){this.Jn.set(t.buildingID+t.uuid,null),this.$n.set(t.buildingID+t.uuid,null),this.ti.set(t.buildingID+t.uuid,0)},fi:function(t,e){var i=this;this.li(t),this.rn(t,function(r,n){e&&e(r,n);var o=i.vi(t);n=t.loadNavi&&o.buildings&&0<o.buildings.length;i.nn(t,n,function(r,n){e&&e(r,n);for(var s=void 0!==t.level?t.level:parseInt(o.defGid),a=(i.yi(t,s,e),t.visibleLevels||o.levels),u=0;u<a.length;u++)a[u]===s||o.levels.indexOf(a[u])<0||i.yi(t,a[u],e);if(t.preLoad)for(var h=0;h<o.levels.length;h++)o.levels[h]!==s&&-1===a.indexOf(o.levels[h])&&i.yi(t,o.levels[h],e)},function(t){e&&e(r,t)})},function(t,i){e&&e(t,i)})},nn:function(t,e,i,r){var n,o=this;e?(e=this.bi(t))?i&&i("gate",e):(n="_sendGate"+Qi.generateUUID(),this.ui.qn(n),this.ei.nn(t,function(e){o.Kn.get(t.buildingID).gate=e,i&&i("gate",e),o.ui.Hn(n)},function(e){var s;t.navigationData?((s=o.Kn.get(t.buildingID)).gate=t.navigationData,i&&i("gate",s.gate)):r("error",e),o.ui.Hn(n)})):i&&i("gate",null)},rn:function(t,e,i){var r,n=this,o=this.vi(t);o?(e&&e("scene",o),t.justDecode||(o=this.Qn.get(t.buildingID),e&&e("building",o))):(r="_sendScene"+Qi.generateUUID(),this.ui.qn(r),this.ei.rn(t,function(i){t.isOutdoor&&n.di(i),n.Kn.set(t.buildingID,{scene:i}),e&&e("scene",i),t.justDecode||(i=n.ii.kn(i),n.Qn.set(t.buildingID,i),e&&e("building",i)),n.ui.Hn(r)},function(t){i&&i("error",t===Xt?Gt:t),n.ui.Hn(r)}))},di:function(t){var e=t.fileVer;t.buildings&&1<e&&t.buildings.forEach(function(t){t.floors&&(t.levelChart=[],t.fids=[],t.floors.forEach(function(e){e.Sn=ii.dn(e.idxs,e.pts),e.pgid&&t.levelChart.push(e.pgid,e.gid),e.baseLevel&&(t.minlevel=e.minlevel,t.maxlevel=e.maxlevel),e.fids&&t.fids.push.apply(t.fids,e.fids)}))})},yi:function(t,e,i,r){var n=this.Jn.get(t.buildingID+t.uuid);n||this.Jn.set(t.buildingID+t.uuid,n=[]),r?n.unshift(e):n.push(e),this.ni&&1!==n.length||this.pi(t,i)},pi:function(t,e){var i,r,n,o=this,s=this.vi(t);s&&(i=this.Jn.get(t.buildingID+t.uuid))&&0!==i.length&&((r=this.$n.get(t.buildingID+t.uuid))||this.$n.set(t.buildingID+t.uuid,r=[]),n=i[0],-1!==r.indexOf(n)?(i.splice(i.indexOf(n),1),this.pi(t,e)):(r.push(n),this.mi(t,n,function(r,a){var u=o.ti.get(t.buildingID+t.uuid);"layerGroup"===r&&(e&&e(r,a),o.ti.set(t.buildingID+t.uuid,++u),u===s.layerGroups.length&&e&&e("decode",o.ci(t)),i.splice(i.indexOf(n),1),o.pi(t,e)),"layer"===r&&e&&e(r,a),"floor"===r&&(e&&e(r,a),u===s.layerGroups.length)&&e&&e("complete",o.wi(t))},function(t,i){e&&e(t,i)})))},mi:function(t,e,i,r){var n,o,s,a,u,h,l=this,c=this.vi(t),f=this.xi(c,e);f?(n=f.gname,f=f.naviType||0,o=this.ri[0],s=0,a=new Map,u=t.merge,h=function(r){var n,h,l;o===++s&&(n=a.get("geo"),h=a.get("biz"),u&&u.merge(e,n,h,c.fileVer),i&&i("layerGroup",a),t.justDecode||((l=r._i(t,e)).wn.forEach(function(t){r.ii.Dn(t,n,h,c.fileVer),i&&i("layer",t)}),i&&i("floor",l)))},t.loadNavi&&((0!=(f&Oi)||c.fileVer<3)&&(o++,this.hn(t,e,n,function(t,e){a.set(t,e),i&&i(t,e),h(l)},function(t){r&&r(t)})),0!=(f&Di)&&(o++,this.cn(t,e,n,function(t,e){a.set(t,e),i&&i(t,e),h(l)},function(t){r&&r(t)})),0!=(f&Ri))&&(o++,this.ln(t,e,n,function(t,e){a.set(t,e),i&&i(t,e),h(l)},function(t){r&&r(t)})),this.sn(t,e,n,function(t,e){a.set(t,e),i&&i(t,e),h(l)},function(t){r&&r(t)}),this.un(t,e,n,function(t,e){a.set(t,e),i&&i(t,e),h(l)},function(t){r&&r(t)})):r&&r("error",Wt)},sn:function(t,e,i,r,n){var o,s=this,a=this.gi(t,e,"geo");a?r&&r("geo",a):(o="_sendFloorGeo"+Qi.generateUUID(),this.ui.qn(o),this.ei.sn(t,i,function(i){s.ji(t,e,"geo",i),r&&r("geo",i),s.ui.Hn(o)},function(t){n&&n("error",t),s.ui.Hn(o)}))},un:function(t,e,i,r,n){var o,s=this,a=this.gi(t,e,"biz");a?r&&r("biz",a):(o="_sendFloorBiz"+Qi.generateUUID(),this.ui.qn(o),this.ei.un(t,i,function(i){s.ji(t,e,"biz",i),r&&r("biz",i),s.ui.Hn(o)},function(t){n&&n("error",t),s.ui.Hn(o)}))},hn:function(t,e,i,r,n){var o,s=this,a=this.gi(t,e,"navi");a?r&&r("navi",a):(o="_sendFloorNavi"+Qi.generateUUID(),this.ui.qn(o),this.ei.hn(t,i,function(i){s.ji(t,e,"navi",i),r&&r("navi",i),s.ui.Hn(o)},function(t){n&&n("error",t),s.ui.Hn(o)}))},cn:function(t,e,i,r,n){var o,s=this,a=this.gi(t,e,"drive_navi");a?r&&r("drive_navi",a):(o="_sendFloorNaviDrive"+Qi.generateUUID(),this.ui.qn(o),this.ei.cn(t,i,function(i){s.ji(t,e,"drive_navi",i),r&&r("drive_navi",i),s.ui.Hn(o)},function(t){n&&n("error",t),s.ui.Hn(o)}))},ln:function(t,e,i,r,n){var o,s=this,a=this.gi(t,e,"accessible_navi");a?r&&r("drive_navi",a):(o="_sendFloorNaviAccessible"+Qi.generateUUID(),this.ui.qn(o),this.ei.ln(t,i,function(i){s.ji(t,e,"accessible_navi",i),r&&r("accessible_navi",i),s.ui.Hn(o)},function(t){n&&n("error",t),s.ui.Hn(o)}))},ai:function(t,e){this.tn(t,function(t,i){e&&e(t,i)},function(t,i){e&&e(t,i)})},tn:function(t,e,i){var r,n=this,o=this.ci(t);o?e&&e("decode",o):(r="_sendWhole"+Qi.generateUUID(),this.ui.qn(r),this.ei.tn(t,function(i){n.Si(t,i),o=n.ci(t),e&&e("decode",o),t.justDecode||(i=n.ii.Nn(o),n.Qn.set(t.buildingID,i),e&&e("complete",i)),n.ui.Hn(r)},function(t){i&&i("error",t),n.ui.Hn(r)}))},wi:function(t){if(this.Qn)return this.Qn.get(t.buildingID)||null},_i:function(t,e){return(t=this.Qn.get(t.buildingID))?t.wn.get(e):null},Si:function(t,e){var i={scene:null,floors:new Map},r=this.Yr.Ir(e);t.isOutdoor&&this.di(r),i.scene=r,i.gate=this.Yr.Dr(e);for(var n=0;n<r.layerGroups.length;n++){var o=r.layerGroups[n],s=this.Yr.Fr(e,o.gid),a=this.Yr.Br(e,o.gid),u=this.Yr.Gr(e,o.gid),h=this.Yr.Zr(e,o.gid),l=this.Yr.Vr(e,o.gid),c=(t.merge&&t.merge.merge(o.gid,s,a,r.fileVer),new Map);c.set("geo",s),c.set("biz",a),c.set("navi",u),c.set("drive_navi",h),c.set("accessible_navi",l),i.floors.set(o.gid,c)}this.Kn.set(t.buildingID,i)},ci:function(t){if(!(i=this.Kn.get(t.buildingID)))return null;for(var e=i.scene,i=i.gate,r=new Map,n=(i={scene:e,floors:r,gate:i},0);n<e.layerGroups.length;n++){var o,s=e.layerGroups[n],a=s.gid,u={gid:a,gname:s.gname,level:a,geo:[],biz:[],navi:[],naviDrive:[],naviAccessible:[]};(o=((o=((o=(u.geo.push(this.gi(t,a,"geo")),u.biz.push(this.gi(t,a,"biz")),this.gi(t,a,"navi")))&&u.navi.push(o),this.gi(t,a,"drive_navi")))&&u.naviDrive.push(o),this.gi(t,a,"accessible_navi")))&&u.naviAccessible.push(o),r.set(s.gid,u)}return i},vi:function(t){return(t=this.Kn.get(t.buildingID))?t.scene:null},bi:function(t){return(t=this.Kn.get(t.buildingID))?t.gate:null},ji:function(t,e,i,r){var n;(t=this.Kn.get(t.buildingID))&&((n=t.floors)||(n=new Map,t.floors=n),(t=n.get(e))||(t=new Map,n.set(e,t)),t.set(i,r))},gi:function(t,e,i){return(t=(t=this.Kn.get(t.buildingID))&&t.floors)&&(t=t.get(e))?t.get(i):null},xi:function(t,e){if(null!=t)for(var i=t.layerGroups,r=0;r<i.length;r++)if(i[r].gid==e)return i[r];return null}}),te),Vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gi={h:0,s:0,l:0},Ki={h:0,s:0,l:0};function Yi(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function Xi(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function Wi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function qi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Zi(t){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ji(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Zi(t=function(t,e){if("object"!==Zi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Zi(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}Object.assign(Yi.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){return t=Qi.euclideanModulo(t,1),e=Qi.clamp(e,0,1),i=Qi.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(this.r=Xi(e=2*i-(i=i<=.5?i*(1+e):i+e-i*e),i,t+1/3),this.g=Xi(e,i,t),this.b=Xi(e,i,t-1/3)),this},setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}if(u=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r,n,o,s=u[1],a=u[2];switch(s){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return r=parseFloat(i[1])/360,n=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,e(i[5]),this.setHSL(r,n,o)}}else if(u=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=(s=u[1]).length;if(3===u)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var e=Vi[t];return void 0!==e&&this.setHex(e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return e=0<(e=void 0===e?2:e)?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Wi(t.r),this.g=Wi(t.g),this.b=Wi(t.b),this},copyLinearToSRGB:function(t){return this.r=qi(t.r),this.g=qi(t.g),this.b=qi(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,i=this.r,r=this.g,n=this.b,o=Math.max(i,r,n),s=Math.min(i,r,n),a=(s+o)/2;if(s===o)h=e=0;else{var u=o-s,h=a<=.5?u/(o+s):u/(2-o-s);switch(o){case i:e=(r-n)/u+(r<n?6:0);break;case r:e=(n-i)/u+2;break;case n:e=(i-r)/u+4}e/=6}return t.h=e,t.s=h,t.l=a,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(Gi),Gi.h+=t,Gi.s+=e,Gi.l+=i,this.setHSL(Gi.h,Gi.s,Gi.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Gi),t.getHSL(Ki);t=Qi.lerp(Gi.h,Ki.h,e);var i=Qi.lerp(Gi.s,Ki.s,e);e=Qi.lerp(Gi.l,Ki.l,e);return this.setHSL(t,i,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}}),Yi.NAMES=Vi;var $i=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,i;return e=t,i=[{key:"round",value:function(t){return 0<t.toFixed(2)?Math.ceil(t.toFixed(2)):Math.floor(t.toFixed(2))}},{key:"generateUUID",value:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);var i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;i=t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&r]+t[r>>8&255]+"-"+t[r>>16&15|64]+t[r>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&o]+t[o>>8&255]+t[o>>16&255]+t[o>>24&255];return t.length=0,i.toUpperCase()}},{key:"findNearNthPowerOfTwo",value:function(t){return t-=1,(t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)<0?1:1+t}},{key:"rgbToArray",value:function(t){var e=new Yi;return e.setStyle(t),[e.r,e.g,e.b]}},{key:"toRgba",value:function(t){var e;return void 0===t?t:"number"!=typeof t?3<=(e=t.split(",")).length?"rgba("+parseInt(e[0])+","+parseInt(e[1])+","+parseInt(e[2])+",1)":t:"rgba("+parseInt(255*new Yi(t).r)+","+parseInt(255*new Yi(t).g)+","+parseInt(255*new Yi(t).b)+",1)"}},{key:"toColor",value:function(t){var e;return"number"==typeof t?t:3<=(e=t.split(",")).length?parseInt(e[0])<<16|parseInt(e[1])<<8|parseInt(e[2]):0}}],null&&Ji(e.prototype,null),i&&Ji(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tr(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=function(t,e){var i;if(t)return"string"==typeof t?er(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?er(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function ir(t){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ir(t=function(t,e){if("object"!==ir(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ir(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}te=function(){function t(e,i,r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Er=Object.assign({tile:!0,isPreview:!1},e),this.Er.buildingID=e.mapID,this.Oi=!!e.map,this.Ei=e.map?e.map.getDataManager():new Hi,this.Or=[],this.Ti={},this.Ri=e.statistics||null,this.Mi=i,this.Ni=r,this.ki=$i.generateUUID(),this.Ai()}var e,i;return e=t,(i=[{key:"dispose",value:function(){this.Er=null,this.Oi||this.Ei.Mr(),this.Ei=null,this.Mi=null,this.Ni=null}},{key:"query",value:function(t,e){if(this.Ii(),null===t.buildings){for(var i=[],r=0;r<this.Or.length;r++)i.push({buildingID:this.Or[r].bid});t.buildings=i}var n=[];if(!t.onlyInBuilding){t.buildingID=this.Er.mapID,null===t.buildingID&&(t.buildingID=this.Er.mapID);for(var o=this.Pi(t),s=0;s<o.length;s++)o[s].buildingID=null,n.push(o[s])}for(var a=t.buildings,u=0;u<a.length;u++)for(var h=this.Di(a[u].buildingID),l=(t.buildingID=h,t.levels=a[u].levels,this.Pi(t)),c=0;c<l.length;c++)l[c].buildingID=a[u].buildingID,n.push(l[c]);e&&e(n)}}])&&rr(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var nr=(Object.assign(te.prototype,{Ai:function(){this.Or=[],this.Oi&&(t=this.Er.map.getMapOptions(),this.Er.mapID=t.mapID,this.Er.buildingID=t.mapID,this.Er.appName=t.appName,this.Er.key=t.key,this.Er.license=t.license,this.Er.mapURL=t.mapURL,this.Er.mapURLAbsolute=t.mapURLAbsolute,this.Er.buildings=t.buildings,this.Er.buildingOptions=t.buildingOptions,this.Er.isPreview="undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,this.Er.tile=t.tile);var t={mapID:this.Er.mapID,buildingID:this.Er.mapID,appName:this.Er.appName,key:this.Er.key,buildings:this.Er.buildings,license:this.Er.license,mapURL:this.Er.mapURL,mapURLAbsolute:this.Er.mapURLAbsolute,merge:this.Er.merge,tile:this.Er.tile,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,uuid:this.ki,bid:this.Er.buildingID||null,isOutdoor:!0};this.Li(t)},Li:function(t){var e=this;setTimeout(function(){e.Er.tile?e.Ei.load(t,function(i,r){e.Fi(i,r,t.isOutdoor),e.Ri&&e.Ri._analyse(i,r,t)}):e.Ei.loadWhole(t,function(i,r){e.Fi(i,r,t.isOutdoor),e.Ri&&e.Ri._analyse(i,r,t)})},0)},Ii:function(){if(!(0<this.Or.length)){var t=this.Er.mapID,e=this.Ei.getData({buildingID:t});if(e&&e.buildings)for(var i=0;i<e.buildings.length;i++)this.Or.push(e.buildings[i])}},Fi:function(t,e,i){if("error"==t&&this.Ni&&this.Ni(e),"decode"===t){if(i&&(this.Ti[""+e.scene.mid]=!1,e.scene.buildings)&&0<e.scene.buildings.length)for(var r=0;r<e.scene.buildings.length;r++){var n=e.scene.buildings[r],o=((o={mapID:this.Er.mapID,buildingID:null,appName:this.Er.appName,key:this.Er.key,license:this.Er.license,mapURL:this.Er.mapURL,mapURLAbsolute:this.Er.mapURLAbsolute,merge:this.Er.merge,loadNavi:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.Er.tile,type:this.Er.type,bid:null,isOutdoor:!1,uuid:this.ki}).buildingID=n.mid,o.bid=n.bid,Object.assign({},o));this.Ti[""+n.mid]=!1,this.Li(o)}if(this.Oi&&!this.Er.tile){var s,a=this.Ti[""+e.scene.mid]=!0;for(s in this.Ti)this.Ti[s]||(a=!1);a&&this.Mi&&this.Mi()}}if("complete"==t){var u,h=this.Ti[""+e.mid]=!0;for(u in this.Ti)this.Ti[u]||(h=!1);h&&this.Mi&&this.Mi()}},Ci:function(t){var e=j.NONE;return 0!=(t.wr&j.MODEL)&&(e|=j.MODELGROUP),0!=(t.wr&j.LABEL)&&(e|=j.LABELGROUP),0!=(t.wr&j.FACILITY)&&(e|=j.FACILITYGROUP),0!=(t.wr&j.EXTERNALMODEL)&&(e|=j.EXTERNALMODELGROUP),e},Bi:function(t){if(Array.isArray(t.mr))return t.mr;var e=this.Er;if(!(t=(null!==t.buildingID&&(e={buildingID:t.buildingID,mapID:t.buildingID}),this.Ei.getData(e))))return[];var i,r=[],n=tr(t.getChildren());try{for(n.s();!(i=n.n()).done;){var o=i.value;r.push(o[1].gid)}}catch(t){n.e(t)}finally{n.f()}return r},Ui:function(t,e,i,r){if(0!=e)for(var n=0;n<e;n++){if(!t[n].X(i))return!1;t[n].H(i,r)}return!0},Gi:function(t,e,i){return{level:t,type:e.getType(),FID:e.fid,name:e.name,ename:e.ename,eid:e.eid,typeID:e.type,center:void 0!==e.getCenter?Object.assign({z:e.height},e.getCenter()):Object.assign({z:e.height},e.getCoordinates()[0]),distance:i.dt}},Wi:function(t){t.sort(function(t,e){return t.level==e.level&&t.type==e.type&&t.distance&&e.distance?t.distance-e.distance:0})},Pi:function(t,e,i){var r=this.Er;if(!(r=(null!==t.buildingID&&(r={buildingID:t.buildingID,mapID:t.buildingID}),this.Ei.getData(r))))return[];var n=this.Bi(t),o=this.Ci(t);if(o===j.NONE)return[];var s,a=t.jr,u=a.length,h=[],l=tr(r.getChildren());try{for(l.s();!(s=l.n()).done;){var c=s.value,f=c[0];if(-1!==n.indexOf(f)){var A,p=tr(c[1].getChildren());try{for(p.s();!(A=p.n()).done;){var d=A.value[1];if(0!=(d.getType()&o)){var m,y=tr(d.getChildren());try{for(y.s();!(m=y.n()).done;){var g=m.value[1],v={dt:void 0};this.Ui(a,u,g,v)&&h.push(this.Gi(f,g,v))}}catch(t){y.e(t)}finally{y.f()}}}}catch(t){p.e(t)}finally{p.f()}}}}catch(t){l.e(t)}finally{l.f()}return h},Di:function(t){for(var e=null,i=this.Or,r=0;r<i.length;r++)if(i[r].bid===t){e=i[r].mid;break}return e}}),{NaviNodeType_NULL:-1,NaviNodeType_COMMON:0,NaviNodeType_SIDE:1,NaviNodeType_FLOOR:2,NaviNodeType_EXTENT:3,NaviLiftType_NULL:0,NaviLiftType_Lift:1,NaviLiftType_Stair:2,NaviLiftType_Escalator:3,NaviLiftType_Accessible:4,NaviLiftType_Ramp:5,NaviLiftEntry_BOTH:0,NaviLiftEntry_UP:1,NaviLiftEntry_DOWN:2,NaviLiftEntry_FORBID:3,NaviEntranceType_NULL:0,NaviEntranceType_EXIT:1,NaviEntranceType_ENTRANCE:2,NaviEntranceType_ACCESS:3,NaviRoadRank_MAIN:1,NaviRoadRank_MINOR:2,NaviRoadRank_NARROW:3,NaviRoadEntry_BOTH:0,NaviRoadEntry_FORWARD:1,NaviRoadEntry_BACK:2,NaviRoadEntry_FORBID:3,NaviRoadPass_NULL:-1,NaviRoadPass_NOT_THROUGH:0,NaviRoadPass_THROUGH:1,NaviZoneType_NULL:-1,NaviZoneType_PASS_UNRESTRAINT:0,NaviZoneType_PASS_THROUGH:1,NaviZoneType_PASS_NOT_THROUGH:2,NaviZoneType_NO_ENTRY:3,NaviZoneType_CORRIDOR:4,NaviModelPassType_PASS_THROUGH:0,NaviModelPassType_PASS_NOT_THROUGH:1,NaviModelPassType_NOT_PASS:2,NaviModelPassType_DECORATE:3,NaviRoadHinderType_HINDER_GENERAL:0,NaviRoadHinderType_HINDER_HIGH:1,NaviObstructType_MODEL:0,NaviObstructType_EXTENT:1}),or={Drive:1,Walk:0},sr=0,ar=1,ur=2;function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===hr(t=function(t,e){if("object"!==hr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==hr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var cr=function(){function t(e,i,r,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Zi=e,this.Vi=i,this.Yi=r||[],this.zi=n||[]}var e,i;return e=t,(i=[{key:"level",get:function(){return this.Zi}},{key:"length",get:function(){return this.Vi}},{key:"pointList",get:function(){for(var t=[],e=0,i=this.Yi.length;e<i;e++)t.push({x:this.Yi[e].x,y:this.Yi[e].y,level:this.Zi});return t}}])&&lr(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),fr=(Object.assign(cr.prototype,{Mr:function(){this.Yi=[],this.zi=[]}}),cr);function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ar(t=function(t,e){if("object"!==Ar(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ar(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var dr=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=i,this.z=r}var e,i;return e=t,(i=[{key:"set",value:function(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"cross",value:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var i=t.x,r=t.y,n=(t=t.z,e.x),o=e.y;e=e.z;return this.x=r*e-t*o,this.y=t*n-i*e,this.z=i*o-r*n,this}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,e=Math.max(-1,Math.min(1,t)),Math.acos(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}}])&&pr(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mr(t){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===mr(t=function(t,e){if("object"!==mr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==mr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&yr(t.prototype,e),i&&yr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.xn=0,this.pr={},this.wr=0,this.Xi=[],this.qi=[],this.Hi=0,this.Qi=[],this.Ki=!1,this.Ji=!1,this.$i=0,this.te=!1,this.re=[]});var gr=(Object.assign(cr.prototype,{set ne(t){-1!=t&&(this.wr|=t)},get ne(){return 3&this.wr},set ie(t){this.wr|=t<<2},get ie(){return this.wr>>2&7},set ee(t){this.wr|=t<<5},get ee(){return this.wr>>5&3},Ai:function(t){this.xn=t,this.pr={x:0,y:0},this.wr=0,this.Hi=0,this.Ki=!1,this.Ji=!1},oe:function(t){return this.xn==t.xn},se:function(t){this.xn=t.xn,this.pr=Object.assign({},t.pr),this.wr=t.wr,this.Xi=[];for(var e=0;e<t.Xi.length;e++)this.Xi[e]=t.Xi[e];this.qi=[];for(var i=0;i<t.qi.length;i++)this.qi[i]=t.qi[i];this.Hi=t.Hi,this.Qi=[];for(var r=0;r<t.Qi.length;r++)this.Qi[r]=t.Qi[r];this.Ki=t.Ki,this.Ji=t.Ji}}),cr);function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){return(br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xr=function(){var t=r,e=gr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&br(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=wr(t);if(i=e?(i=wr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===vr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t;if(this instanceof r)return(t=i.call(this)).ue=0,t.Zi=0,t.fe=null,t.$i=0,t.ae=null,t.ie=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function Mr(t){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Mr(t=function(t,e){if("object"!==Mr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Mr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&_r(t.prototype,e),i&&_r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.xn=0,this.he=-1,this.Ht={},this.ce=-1,this.Qt={},this.Vi=0,this.wr=0,this.le=[],this.ve=-1,this.ye=!1,this.be=0});var Sr=(Object.assign(cr.prototype,{set de(t){this.wr|=t},get de(){return 3&this.wr},set pe(t){this.wr|=t<<2},get pe(){return this.wr>>2&3},set me(t){this.wr|=t<<4},get me(){return this.wr>>4&3},set we(t){t?this.wr|=16:this.wr&=-17},get we(){return 16&this.wr?1:0},xe:function(t){this.xn=t.xn,this.he=t.he,this.Ht=Object.assign({},t.Ht),this.ce=t.ce,this.Qt=Object.assign({},t.Qt),this.Vi=t.Vi,this.wr=t.wr,this.le=[],this.ve=t.ve;for(var e=0;e<t.le.Vi;e++)this.le[e]=t.le[e]},_e:function(){this.Vi=At.distanceOfTwoPoints(this.Ht,this.Qt)},ge:function(){var t=this.Ht.x-this.Qt.x,e=this.Ht.y-this.Qt.y;this.Vi=Math.abs(t)+Math.abs(e)},je:function(){var t={};return t.x=(this.Ht.x+this.Qt.x)/2,t.y=(this.Ht.y+this.Qt.y)/2,t}}),cr);function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Er(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Br(t=function(t,e){if("object"!==Br(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Br(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(){function t(e,i,r,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.xn=e,this.Zi=i||-1,this.wr=r,this.Se=n,this.Oe=n&&n.length?n.length-1:0,this.Ee=0,this.Te=null,this.Re=null,this.Me=[],this.Ne=[],this.ke=null,this.sr=new mt,this.sr.ir(this.Se)}var e,i;return e=t,(i=[{key:"_pass",get:function(){return 3&this.wr},set:function(t){this.wr|=t}},{key:"_area",get:function(){return null==this.ke&&(this.ke=At.St(this.Se,this.Oe)),this.ke}}])&&Er(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Cr=(Object.assign(cr.prototype,{Ae:function(t){return!!At.ct(t,this.sr.tr,this.sr.rr)&&At.yt(this.Se,t,this.Oe)},Ot:function(t,e){for(var i={},r=0;r<this.Oe;r++){var n=this.Se[r],o=this.Se[(r+1)%this.Oe];if(1==At.Ot(n,o,t,e,i))break}return i}}),cr);function Tr(t){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Tr(t=function(t,e){if("object"!==Tr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Tr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(){function t(e,i,r,n,o,s){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.xn=e,this.Ie="",this.Se=n,this.Oe=n&&n.length?n.length-1:0,this.lr=o,this.Pe=s,this.wr=r,this.Zi=i,this.De=[],this.Le=[],this.Fe=[],this.Te=null,this.Re=null,this.Me=[],this.Ce=0,this.Ee=0,this.ke=null,this.Be=!1,this.sr=new mt,this.sr.ir(this.Se)}var e,i;return e=t,(i=[{key:"pass",get:function(){return 3&this.wr},set:function(t){this.wr|=t}},{key:"area",get:function(){return null==this.ke&&(this.ke=At.St(this.Se,this.Oe)),this.ke}}])&&Fr(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Pr=(Object.assign(cr.prototype,{Ae:function(t){if(this.Pe)for(var e=0;e<this.Pe.length;e++)if(At.yt(t,this.Pe[e],this.Pe[e].length-1))return!1;return At.yt(t,this.Se,this.Oe)}}),cr);function Or(t){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t,e){return(Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}cr=function(){var t=r,e=gr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dr(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Rr(t);if(i=e?(i=Rr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Or(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t;if(this instanceof r)return(t=i.call(this)).Zi=0,t.ve=-1,t.Ue=[],t.fe=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var Ir=(Object.assign(cr.prototype,{Ge:function(t,e,i){if(!t)return[];var r=[];i=i||this.Ue;for(var n=0;n<i.length;n++){var o=i[n];t==o.ie&&(e&&(o.$i=o.$i+e),r.push(o))}return r}}),cr);function Ur(t){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Ur(t=function(t,e){if("object"!==Ur(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Ur(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var kr=function(){function t(e,i,r,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Zi=0,this.wr=n,this.We=e,this.Ze=i,this.Ve=[],this.Ye=[],this.ze=[],this.Xe=[],this.qe=new Map,this.He=new Map,this.Qe=[],this.Ke=new Map,this.Je=new Map,this.$e=0,this.ro=0,this.no()}var e,i;return e=t,(i=[{key:"queryContainIdOfExtent",value:function(t){return this.io(t)}},{key:"queryContainExtentID",value:function(t){return this.eo(t)}}])&&Lr(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),jr=(Object.assign(kr.prototype,{Mr:function(){this.We=null,this.Ze=null,this.Ve=null,this.Ye=null,this.ze=null,(this.Xe=null)!=this.qe&&(this.qe.clear(),this.qe=null),null!=this.He&&(this.He.clear(),this.He=null),(this.Qe=null)!=this.Ke&&(this.Ke.clear(),this.Ke=null),null!=this.Je&&(this.Je.clear(),this.Je=null)},oo:function(){this.Xe=[];for(var t=0;t<this.Ye.length;t++){var e=this.Ye[t].toZone();this.Xe.push(e)}for(var i=0;i<this.Ve.length;i++){var r=this.Ye[i].toZone();this.Xe.push(r)}},so:function(t){for(var e=0;e<this.Xe.length;e++){var i=this.Xe[e];if(i&&i.xn==t)return i}return null},uo:function(t){for(var e=0;e<this.Xe.length;e++){var i=this.Xe[e];if(i&&1==i.contain(t))return i}return null},io:function(t){if(0!==this.Ye.length&&t)for(var e=0,i=this.Ye.length;e<i;e++){var r=this.Ye[e];if(r.Ae(t))return r.xn}return 0},eo:function(t){if(0!==this.Ye.length&&t)for(var e=0,i=this.Ye.length;e<i;e++){var r=this.Ye[e];if(r.Ae(t))return r.ve}return 0},fo:function(t,e){if(0!=this.ze.length&&t&&e)for(var i=0;i<this.ze.length;i++)if(this.ze[i].isCross(t,e))return!0;return!1},no:function(){this.$e=0;for(var t=this.ro=0;t<this.Ze.length;)null==this.Ze[t]?this.Ze.splice(t,1):(this.Ze[t].xn>this.ro&&(this.ro=this.Ze[t].xn),t++);for(var e=0;e<this.We.length;)null==this.We[e]?this.We.splice(e,1):(this.We[e].xn>this.$e&&(this.$e=this.We[e].xn),e++)},ao:function(t){return void 0===(t=this.Ke.get(t))?null:t},ho:function(t){return void 0===(t=this.Je.get(t))?null:t},co:function(t){for(var e=Number.MAX_VALUE,i=null,r=0;r<this.Ye.length;++r){var n=this.Ye[r];n.contain(t)&&n.area<e&&(e=cur_area,i=n)}for(var o=0;o<this.Ve.size();++o){var s=this.Ve[o];s.contain(t)&&s.area<e&&(e=cur_area,i=s)}return i||null},vo:function(t){for(var e=Number.MAX_VALUE,i=null,r=0;r<this.Ve.length;++r){var n=this.Ve[r];n.Ae(t)&&n.area<e&&(e=n.area,i=n)}return i||null},yo:function(){return++this.$e},bo:function(){return++this.ro},do:function(t){this.$e=t},po:function(t){this.ro=t},mo:function(){for(var t=0;t<this.We.length;t++){var e=this.We[t];e&&(e instanceof Ir?this.Ke.set(e.ve,t):this.Ke.set(e.xn,t))}},wo:function(){for(var t=0;t<this.Ze.length;t++){var e=this.Ze[t];e&&this.Je.set(e.xn,t)}},xo:function(){for(var t=this,e=(this.He.clear(),0);e<this.Ze.length;e++)!function(){var i=t.Ze[e];if(null!=i){var r,n,o=i.pe;nr.NaviRoadEntry_BOTH!=o&&nr.NaviRoadEntry_FORWARD!=o||(r=i.he,(n=t.He.get(r))||t.He.set(r,n=[]),null==n.find(function(t){return t._o==i.ce})&&n.push({_o:i.ce,Vi:i.Vi})),nr.NaviRoadEntry_BOTH!=o&&nr.NaviRoadEntry_BACK!=o||(r=i.ce,(n=t.He.get(r))||t.He.set(r,n=[]),null==n.find(function(t){return t._o==i.he})&&n.push({_o:i.he,Vi:i.Vi}))}}()},jo:function(t){for(var e=0;e<this.We.length;e++)if(this.We[e].xn==t)return e;return-1},So:function(t){for(var e=9;e<this.Ze.length;e++)if(this.Ze[e].xn==t)return e;return-1},Oo:function(t){for(var e=[],i=this.Ze,r=0;r<i.length;r++){var n=i[r],o=n.Ht,s=n.Qt,a=[];t.Eo([o,s],a)?e.push({road:n,crss:a,index:r}):t.To(o)&&e.push({road:n,crss:[],index:r})}return e},Ro:function(t){for(var e=null,i=Number.MAX_VALUE,r=0;r<this.Ve.length;r++){var n=this.Ve[r];At.yt(t,n.Se,n.Oe)&&i>n.area&&(i=(e=n).area)}return e},Mo:function(t){for(var e=-1,i=0;i<this.Xe.length;i++){var r=this.Xe[i];if(At.yt(t,r.Se,r.Oe)){e=r.xn;break}}return e},No:function(){var t=this.Ve.length;t=parseInt(Math.random()*t);return this.Ve[t]},ko:function(){for(var t=0;t<this.Qe.length;t++)this.Qe[t]=!1},Ao:function(){for(var t=[],e=0;e<this.We.length;e++){var i=this.We[e];i.ie!=nr.NaviLiftType_NULL&&t.push(i)}return t},Io:function(t){for(var e=null,i=0;i<this.Ye.length;i++)if(t==this.Ye[i].xn){e=this.Ye[i];break}if(!e)return null;for(var r=[],n=0;n<this.We.length;n++){var o=this.We[n];At.yt(o.pr,e.Se,e.Oe)&&r.push(o)}for(var s=[],a=0;a<this.Ze.length;a++){var u=this.Ze[a];At.yt(u.Ht,e.Se,e.Oe)&&s.push(u)}for(var h=[],l=0;l<this.Ve.length;l++){var c=this.Ve[l];At.yt(c.lr,e.Se,e.Oe)&&h.push(c)}var f=new kr(r,s,!0,1);return f.Ve=h,f.Ye=[e],f}}),kr);function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Qr(t=function(t,e){if("object"!==Qr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Qr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&Nr(t.prototype,e),i&&Nr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Po=null});var zr=(Object.assign(cr.prototype,{Mr:function(){this.Po=null},Do:function(t){this.Po=t},Lo:function(t,e){var i=null;return 0==e?i=si.yn(t):1==e?i=si.bn(t):2==e&&(i=si.dn(t)),{points:i[0],holes:i.slice(1)}},Fo:function(t,e,i){var r=null;return 0==i?r=ii.yn(t,e):1==i?r=ii.bn(t,e):2==i&&(r=ii.dn(t,e)),{points:r[0],holes:r.slice(1)}},Co:function(t){if(t&&"string"!=typeof t)for(var e in t){var i=t[e];if("vertices"==e||"vertex"==e)for(var r in i)r%2==0&&(i[r]=-i[r]);else"scene_data"==e?(i.x=-i.x,i.defCenX=-i.defCenX):this.Co(i)}},Bo:function(t){var e,i;return""!=t&&t?(e=[],i=[],0<=(t=t).indexOf("|")||0<=t.indexOf("-")||0<=t.indexOf(",")?(i=t.split(/[|,-]/),e.push.apply(e,i)):e.push(t),e):[]},Uo:function(t,e,i,r){for(var n={},o=[],s=[],a=[],u=[],h=[],l=this.Po.fileVer,c=r.naviExtents&&0<r.naviExtents.length?r.naviExtents:e.extentLayer,f=0,A=c.length;f<A;f++){var p=c[f],d=1===l?this.Lo(p.geo,2):this.Fo(p.idxs,p.pts,2);p={eid:p.id||p.eid,geoArr:d.points,holes:d.holes};s.push(p)}for(var m=0,y=e.labelLayer.length;m<y;m++)n[e.labelLayer[m].eid]=e.labelLayer[m];for(var g=0,v=e.modelLayer.length;g<v;g++){var b=e.modelLayer[g],w=i.modelLayer[g],x={};w=(x.fid=w.fid,x.eid=b.eid,x.pass=w.pass,x.lr=(1===l?this.Lo(n[b.eid].geo,0):this.Fo(n[b.eid].idxs,n[b.eid].pts,0)).points,null),w=1===l?this.Lo(b.geo,2):this.Fo(b.idxs,b.pts,2);x.geoArr=w.points,x.holes=w.holes,o.push(x)}if(r&&r.naviNodes)for(var M=0,_=r.naviNodes.length;M<_;M++){var S=r.naviNodes[M];S.geoArr=(1===l?this.Lo(S.geo,0):this.Fo(S.idxs,S.pts,0)).points,S.linkSegArr=this.Bo(S.linkSeg),S.liftFloorArr=this.Bo(S.liftFloor),a.push(S)}if(r&&r.naviSegments)for(var B=0,E=r.naviSegments.length;B<E;B++){var C=r.naviSegments[B];C.geoArr=(1===l?this.Lo(C.geo,1):this.Fo(C.idxs,C.pts,1)).points,C.m_Id=r.mid,u.push(C)}if(r&&r.naviZones)for(var T=0,F=r.naviZones.length;T<F;T++){var P=r.naviZones[T],O=1===l?this.Lo(P.geo,2):this.Fo(P.idxs,P.pts,2);P.geoArr=O.points,P.holes=O.holes,P.m_Id=r.mid,h.push(P)}return{level:t,extentLayer:s,modelLayer:o,naviSegments:u,naviNodes:a,naviZones:h}}}),cr);function Hr(t){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=function(t,e){var i;if(t)return"string"==typeof t?Gr(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Gr(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Kr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Hr(t=function(t,e){if("object"!==Hr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Hr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&Kr(t.prototype,e),i&&Kr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Go=e,this.Wo=null,this.Zo=null,this.Vo=-1,this.Yo=-1,this.zo=o.MODULE_SHORTEST,this.Xo=[],this.Go.mo(),this.Go.wo(),this.Go.xo(),this.qo=5e-4,this.Ho=0});var Yr=(Object.assign(cr.prototype,{Qo:function(t,e){if(null!=this.Go.We&&0!=this.Go.We.length&&this.Go.We[0]instanceof Ir){this.Ho=10;for(var i={},r=0;r<this.Go.We.length;r++){var n=(a=this.Go.We[r]).Ko.Se,o=n.length-1,s=this.Go.We[r].ve,a=(o=(i[s]=[1,1,Number.MAX_VALUE],At.yt(t,n,o)&&(i[s][0]=0,t.level==a.Zi)&&a.ve,At.yt(e,n,o)&&(i[s][1]=0,e.level==a.Zi)&&a.ve,At.Ct(n)),At.dt(t,o)+At.dt(e,o));i[s][2]=a}var u,h=this.Go.He,l=Vr(h.keys());try{for(l.s();!(u=l.n()).done;){var c=u.value;h.get(c).sort(function(t,e){var r=i[t._o][0]+i[t._o][1]-(i[e._o][0]+i[e._o][1]);return 0==r?i[t._o][2]-i[e._o][2]:r})}}catch(t){l.e(t)}finally{l.f()}}},Jo:function(t,e,i,r,n){return this.$o(i),this.Wo=t,this.Zo=e,this.Qo(r,n),this.Vo=t.xn,this.Yo=e.xn,null!=(i=this.Go.ao(this.Vo))&&null!=(r=this.Go.ao(e.xn))&&((n=[]).push(r),this.ts(this.Go,i,n))?a.ROUTE_SUCCESS:a.ROUTE_FAILED_CANNOT_ARRIVE},rs:function(t,e,i,r){return i&&r&&this.Qo(i,r),this.Vo=t,this.Yo=e,null!=(i=this.Go.ao(t))&&null!=(r=this.Go.ao(e))&&((t=[]).push(r),this.ts(this.Go,i,t))?a.ROUTE_SUCCESS:a.ROUTE_FAILED_CANNOT_ARRIVE},ns:function(){var t=[],e=this.Go.ao(this.Yo),i=[];i.push(e),e=[];return this.es(i,this.Go.We,e,[]),t.push.apply(t,e),t},Mr:function(){this.Go.Mr(),this.Go=null,this.Wo=null,this.Zo=null},ts:function(t,e,i){if(null==t)return!1;var r=t.We.length;if(e<0||r<=e)return!1;this.ss(i,e);for(var n=0;n<r;++n)t.We[n].$i=Number.MAX_VALUE,t.We[n].te=!1,t.We[n].re=[];t.We[e].$i=0;for(var o=i.length,s=0,a=[],u=(a.push(t.We[e]),this.us.bind(this));0<a.length;){var h=a[0]instanceof Ir?a[0].ve:a[0].xn,l=(a.splice(0,1),t.ao(h));if(null!=l){var c=t.We[l];if(!c.te){if(c.te=!0,-1!=i.indexOf(l)&&++s==o)return!0;if(0!=t.He.size){var f=t.He.get(h);if(f)for(var A=0;A<f.length;A++){var p,d,m=f[A],y=m._o;null==(y=t.ao(y))||(m=m.Vi,p=t.We[y],d=this.Ho+m+c.$i,d=Number(d.toFixed(3)),p.te)||(p.$i>d?(p.$i=d,p.re=[],p.re.push(l),a.push(t.We[y]),a.sort(u)):Math.abs(p.$i-(m+c.$i))<1e-12&&-1==p.re.indexOf(l)&&p.re.push(l))}}}}}return!(s<o)},us:function(t,e){return t.$i-e.$i},ss:function(t,e){for(var i=t.indexOf(e);-1!=i;)t.splice(i,1),i=t.indexOf(e)},$o:function(t){if(this.zo!=t){for(var e={},i=0;i<this.Go.Ze.length;i++){var r=(s=this.Go.Ze[i]).he,n=s.ce,s=s.de;e.hasOwnProperty(r)||(e[r]={}),e[r][n]=s,e.hasOwnProperty(n)||(e[n]={}),e[n][r]=s}if(o.MODULE_SHORTEST==t){var a,u=Vr(this.Go.He.keys());try{for(u.s();!(a=u.n()).done;){var h,l=a.value,c=Vr(this.Go.He.get(l));try{for(c.s();!(h=c.n()).done;){var f=h.value,A=f._o,p=e[l][A];f.Vi=f.Vi/p}}catch(t){c.e(t)}finally{c.f()}}}catch(t){u.e(t)}finally{u.f()}}else if(o.MODULE_BEST==t){var d,m=Vr(this.Go.He.keys());try{for(m.s();!(d=m.n()).done;){var y,g=d.value,v=Vr(this.Go.He.get(g));try{for(v.s();!(y=v.n()).done;){var b=y.value,w=b._o,x=e[g][w];b.Vi=b.Vi*x}}catch(t){v.e(t)}finally{v.f()}}}catch(t){m.e(t)}finally{m.f()}}this.zo=t}},hs:function(t,e,i,r){0!=e[t].re.length&&(t=e[t].re[0],i.push(e[t]),r.count++,this.hs(t,e,i,r))},es:function(t,e,i,r){for(var n=0;n<t.length;n++){var o=t[n],s=(i.push(e[o]),{count:1});this.hs(o,e,i,s),r.push(s.count)}}}),cr);function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wr(t,e){return(Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zr=function(){var t=r,e=Pr;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wr(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=qr(t);if(i=e?(i=qr(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Xr(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var t;if(this instanceof r)return(t=i.call(this)).xn=-1,t.cs=[],t;throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Jr(t=function(t,e){if("object"!==Jr(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Jr(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var tn=function(t,e,i){return e&&$r(t.prototype,e),i&&$r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ut=null,this.Jt=null,this.ls=null,this.dt=0,this.vs=!1,this.ys=nr.NaviObstructType_MODEL});function en(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=nn(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rn(t){return function(t){if(Array.isArray(t))return on(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||nn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(t,e){var i;if(t)return"string"==typeof t?on(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?on(t,e):void 0}function on(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function an(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===sn(t=function(t,e){if("object"!==sn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==sn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.xn=null,this.bs=null,this.ds=null,this.Go=e,this.ps=new Map,this.ws=new Map,this.xs=new Map,this._s=new Map,this.gs=new Map,this.js=[],this.Ss=Number.INT_MIN,this.Os=Number.INT_MIN,this.Es=-1,this.Wo=null,this.Zo=null,this.zo=o.MODULE_SHORTEST,this.Ts=new Map,this.Rs=new Map,this.Ms=new Map,this.Ns=[],this.ks=[],this.As=[],this.Is=[],this.Ps=100,this.Ds=-1,this.Ls=15,this.Fs=.1,this.Cs=[],this.Bs=[],this.Us=[],this.Gs=[],this.Ws=!0,this.Zs=[],this.wr=null,this.Vs(),this.Ys(),this.zs(),this.Xs(),this.qs(),this.te=!1,this.Hs=[],this.wr=null}var e,i;return e=t,(i=[{key:"assignedPts",get:function(){return this.Bs},set:function(t){this.Bs=t}},{key:"obstruct",get:function(){return this.Ws},set:function(t){this.Ws=t}},{key:"level",get:function(){return this.Zi},set:function(t){this.Zi=t}}])&&an(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var un=(Object.assign(cr.prototype,{Qs:function(t){var e,i=null==t.Ks?null:t.Ks;t instanceof gr?this.Wo=t:(e=new gr,this.Js(t,e,i)||this._failedInsertPts.push(t),this.Wo=e)},$s:function(t){var e,i=null==t.Ks?null:t.Ks;t instanceof gr?this.Zo=t:(e=new gr,this.Js(t,e,i)||this._failedInsertPts.push(t),this.Zo=e)},tu:function(t){var e=this.Go.Ye[0].Se;return!!At.yt(t,e,e.length-1)},Jo:function(t,e,i){this.Ss=t instanceof gr?this.ru(t.pr):this.ru(t),this.Os=e instanceof gr?this.ru(e.pr):this.ru(e),i&&(this.zo=i),this.nu(this.Ss),this.nu(this.Os),this.Is=[];i=this.ws.get(this.Ss);var r=this.ws.get(this.Os);if(t instanceof gr)if(null!=t.iu){if(t=t.pr,a.ROUTE_FAILED_NO_START_ARRIVAL==this.eu(t,i))return a.ROUTE_FAILED_NO_START_ARRIVAL}else this.Wo=t;else if(a.ROUTE_FAILED_NO_START_ARRIVAL==this.eu(t,i))return a.ROUTE_FAILED_NO_START_ARRIVAL;if(e instanceof gr)if(null!=e.iu){if(e=e.pr,a.ROUTE_FAILED_NO_DEST_ARRIVAL==this.ou(e,r))return a.ROUTE_FAILED_NO_DEST_ARRIVAL}else this.Zo=e;else if(a.ROUTE_FAILED_NO_DEST_ARRIVAL==this.ou(e,r))return a.ROUTE_FAILED_NO_DEST_ARRIVAL;return null==this.Wo?a.ROUTE_FAILED_NO_DATA_START:null==this.Zo?a.ROUTE_FAILED_NO_DATA_DEST:this.su()},uu:function(){var t;this.Gs=[];for(var e=0;e<this.Bs.length;e++){var i={x:(i=this.Bs[e])[0],y:i[1]},r=this.ru(i);r=this.fu(r,i);this.Gs.push(r)}(t=this.js).push.apply(t,rn(this.Gs))},ns:function(){return this.js},Mr:function(){this.bs=null,this.ds=null,this.Go.Mr(),this.Go=null,this.ps.clear(),this.ps=null;var t,e=en(this.ws);try{for(e.s();!(t=e.n()).done;)t.value[1].Mr()}catch(t){e.e(t)}finally{e.f()}this.ws.clear(),this.ws=null;var i,r=en(this._s);try{for(r.s();!(i=r.n()).done;)i.value[1].Mr()}catch(t){r.e(t)}finally{r.f()}this._s.clear(),this._s=null;var n,o=en(this.xs);try{for(o.s();!(n=o.n()).done;)n.value[1].Mr()}catch(t){o.e(t)}finally{o.f()}this.xs.clear(),this.xs=null;var s,a=en(this.gs);try{for(a.s();!(s=a.n()).done;)s.value[1].Mr()}catch(t){a.e(t)}finally{a.f()}this.gs.clear(),this.gs=null,this.js=[],this.Wo=null,this.Zo=null,this.Ts.clear(),this.Ts=null,this.Rs.clear(),this.Rs=null,this.Ms.clear(),this.Ns=[],this.ks=[],this.As=[],this.Is=[],this.Zs=[],this.Ws=!1},li:function(){this.js=[],this.au(-1),this.au(this.Ss),this.Ss=Number.INT_MIN,this.au(this.Os),this.Os=Number.INT_MIN,this.hu(),this.Cs=[];var t=this.Go.Ze.length;this.Es<-2*t&&(this.Es=-1);for(var e=0;e<this.Ns.length;e++){var i=this.Ns[e];this.cu(i.lu,i.ls,nr.NaviRoadHinderType_HINDER_HIGH)}this.Ns=[],this.ks=[],this.As=[],this.Is=[]},vu:function(t){this.Zs=t,this.xs.clear(),this.gs.clear();for(var e=0;e<this.Zs.length;e++)for(var i=this.Zs[e],r=this.yu(i),n=0;n<r.length;n++){var o=r[n],s=this.xs.get(o);s||(s=this.bu(this.ws.get(o)),this.xs.set(o,s)),this.du(s,i)}var a,u=en(this.xs);try{for(u.s();!(a=u.n()).done;){var h=a.value;this.gs.set(h[0],new Yr(h[1]))}}catch(t){u.e(t)}finally{u.f()}},du:function(t,e){for(var i=t.Oo(e),r=0;r<i.length;r++){var n=i[r],o=new Sr,s=(o.xe(n.road),o.pe);o.pe=nr.NaviRoadEntry_FORBID,t.Ze[n.index]=o,1==n.crss.length&&(e.To(o.Ht)?this.pu(n.crss[0],this.yo(),o.Qt,this.yo(),s,t):this.pu(o.Ht,this.yo(),n.crss[0],this.yo(),s,t)),2<=n.crss.length&&(this.pu(o.Ht,this.yo(),n.crss[0],this.yo(),s,t),this.pu(n.crss[n.crss.length-1],this.yo(),o.Qt,this.yo(),s,t))}var a=new Zr;a.xn=this.mu(),a.Se=e.Se,a.pass=nr.NaviModelPassType_NOT_PASS,t.Ve.push(a)},pu:function(t,e,i,r,n,o){var s,a;t instanceof gr?s=t:((s=new gr).xn=e,s.pr=t,o.We.push(s)),i instanceof gr?a=i:((a=new gr).xn=r,a.pr=i,o.We.push(a)),(e=new Sr).xn=this.bo(),e.he=s.xn,e.Ht=s.pr,e.ce=a.xn,e.Qt=a.pr,e.pe=n,e.xn,e.he,e.Ht.x.toFixed(3),e.Ht.y.toFixed(3),e.ce,e.Qt.x.toFixed(3),e.Qt.y.toFixed(3),o.Ze.push(e)},mu:function(){return this.Es--},wu:function(t){var e={ls:null};if(1!==this.wr){var i=this.ru(t),r=this.xu(i).vo(t,-0);if(r&&(e.ls=r).pass!=nr.NaviModelPassType_NOT_PASS&&(r.pass===nr.NaviModelPassType_PASS_THROUGH||r.pass===nr.NaviModelPassType_PASS_NOT_THROUGH)){if(0<r.De.length)return e;for(var n={},o=[],s=[],a=this.xu(i).Ze,u=!0,h=0;h<r.Oe;h++)for(var l=r.Se[h],c=r.Se[h+1],f=0;f<a.length;f++){var A=a[f];1===At.Ot(l,c,A.Ht,A.Qt,n)&&nr.NaviRoadEntry_FORBID!==A.pe&&(u=!1,(A={}).x=n.x,A.y=n.y,o.push(A),s.push(a[f]))}if(!u){r.De=[],r.Fe=[],r.Le=[];for(var p=0;p<o.length;p++){var d=s[p],m=this._u(i,o[p],d);m.gu.push(d.xn),m.ne=nr.NaviNodeType_COMMON,d.pe===nr.NaviRoadEntry_BOTH?m.entranceType=nr.NaviEntranceType_ACCESS:At.yt(d.Ht,r.Se,r.Oe)?(d.pe===nr.NaviRoadEntry_FORWARD&&(m.entranceType=nr.NaviEntranceType_EXIT),d.pe===nr.NaviRoadEntry_BACK&&(m.entranceType=nr.NaviEntranceType_ENTRANCE)):(d.pe===nr.NaviRoadEntry_FORWARD&&(m.entranceType=nr.NaviEntranceType_ENTRANCE),d.pe===nr.NaviRoadEntry_BACK&&(m.entranceType=nr.NaviEntranceType_EXIT)),r.De.push(m),r.Fe.push(m.entranceType),r.Le.push(m.ne)}}}}return e},ju:function(t){var e,i=null,r=Number.MAX_VALUE,n=en(t.values());try{for(n.s();!(e=n.n()).done;){var o=e.value;0<o.length&&o[0].dt<r&&(i=o[0],r=o[0].dt)}}catch(t){n.e(t)}finally{n.f()}return i},Su:function(t,e){for(var i=[],r=0;r<e.length;r++){Number.MAX_VALUE;var n=At._t(t,e[r].Ht,e[r].Qt,{});i.push({Kt:e[r].xn,Ht:e[r].Ht,Qt:e[r].Qt,dt:n,Jt:e[r]})}return i.sort(function(t,e){return t.dt-e.dt}),i},Ou:function(t,e,i){var r=[],n=[],o=[],s=[],a=[],u=[],h=(u.push(t),u.push(e.Ht),u.push(e.Qt),[]),l=(h.push(t),1e7/Math.sqrt((e.Ht.x-t.x)*(e.Ht.x-t.x)+(e.Ht.y-t.y)*(e.Ht.y-t.y)));h.push({x:t.x+(e.Ht.x-t.x)*l,y:t.y+(e.Ht.y-t.y)*l}),l=1e7/Math.sqrt((e.Qt.x-t.x)*(e.Qt.x-t.x)+(e.Qt.y-t.y)*(e.Qt.y-t.y));h.push({x:t.x+(e.Qt.x-t.x)*l,y:t.y+(e.Qt.y-t.y)*l});for(var c,f,A,p,d,m=0;m<i.length;m++)i[m].Kt==e.Kt?(i[m].dt=At._t(t,i[m].Ht,i[m].Qt,{}),o.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:i[m].Qt,dt:i[m].dt,Jt:i[m].Jt})):(d=At.Yt(i[m].Ht,i[m].Qt,u)).isintersect?1==d.type?.01<At.distanceOfTwoPoints(d.start,d.end)&&o.push({Kt:i[m].Kt,Ht:d.start,Qt:d.end,dt:i[m].dt,Jt:i[m].Jt}):2==d.type?("start"==d.outer?(i[m].Qt=d.start,i[m].dt=At.dt(d.start,t)):"end"==d.outer&&(i[m].Ht=d.end,i[m].dt=At.dt(d.end,t)),.01<At.distanceOfTwoPoints(d.start,d.end)&&o.push({Kt:i[m].Kt,Ht:d.start,Qt:d.end,dt:i[m].dt,Jt:i[m].Jt}),r.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:i[m].Qt,dt:i[m].dt,Jt:i[m].Jt})):3==d.type?("start"==d.outer?(i[m].Qt=d.start,i[m].dt=At.dt(d.start,t)):"end"==d.outer&&(i[m].Ht=d.end,i[m].dt=At.dt(d.end,t)),.01<At.distanceOfTwoPoints(d.end,d.start)&&o.push({Kt:i[m].Kt,Ht:d.start,Qt:d.end,dt:i[m].dt,Jt:i[m].Jt}),n.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:i[m].Qt,dt:i[m].dt,Jt:i[m].Jt})):4==d.type&&(.01<At.distanceOfTwoPoints(d.start,d.end)&&o.push({Kt:i[m].Kt,Ht:d.start,Qt:d.end,dt:i[m].dt,Jt:i[m].Jt}),At.distanceOfTwoPoints(i[m].Ht,d.start)<At.distanceOfTwoPoints(i[m].Ht,d.end)?(f={x:d.start.x-t.x,y:d.start.y-t.y},c={x:i[m].Ht.x-t.x,y:i[m].Ht.y-t.y},0<(f=(f=At.Dt(f,c))<180?f:f-360)?(.01<At.distanceOfTwoPoints(i[m].Ht,d.start)&&r.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:d.start,dt:At.dt(d.start,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,d.end)&&n.push({Kt:i[m].Kt,Ht:d.end,Qt:i[m].Qt,dt:At.dt(d.end,t),Jt:i[m].Jt})):(.01<At.distanceOfTwoPoints(i[m].Ht,d.start)&&n.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:d.start,dt:At.dt(d.start,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,d.end)&&r.push({Kt:i[m].Kt,Ht:d.end,Qt:i[m].Qt,dt:At.dt(d.start,t),Jt:i[m].Jt}))):(c={x:d.end.x-t.x,y:d.end.y-t.y},f={x:i[m].Ht.x-t.x,y:i[m].Ht.y-t.y},0<(A=(A=At.Dt(c,f))<180?A:A-360)?(.01<At.distanceOfTwoPoints(i[m].Ht,d.end)&&r.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:d.end,dt:At.dt(d.end,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,d.start)&&n.push({Kt:i[m].Kt,Ht:d.start,Qt:i[m].Qt,dt:At.dt(d.start,t),Jt:i[m].Jt})):(.01<At.distanceOfTwoPoints(i[m].Ht,d.end)&&n.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:d.end,dt:At.dt(d.end,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,d.start)&&r.push({Kt:i[m].Kt,Ht:d.start,Qt:i[m].Qt,dt:At.dt(d.start,t),Jt:i[m].Jt})))):(A=At.Yt(i[m].Ht,i[m].Qt,h)).isintersect?1==A.type?.01<At.distanceOfTwoPoints(A.start,A.end)&&a.push({Kt:i[m].Kt,Ht:A.start,Qt:A.end,dt:i[m].dt,Jt:i[m].Jt}):2==A.type?("start"==A.outer?(i[m].Qt=A.start,i[m].dt=At.dt(A.start,t)):"end"==A.outer&&(i[m].Ht=A.end,i[m].dt=At.dt(A.end,t)),.01<At.distanceOfTwoPoints(A.start,A.end)&&a.push({Kt:i[m].Kt,Ht:A.start,Qt:A.end,dt:i[m].dt,Jt:i[m].Jt}),r.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:i[m].Qt,dt:i[m].dt,Jt:i[m].Jt})):3==A.type?("start"==A.outer?(i[m].Qt=A.start,i[m].dt=At.dt(A.start,t)):"end"==A.outer&&(i[m].Ht=A.end,i[m].dt=At.dt(A.end,t)),.01<At.distanceOfTwoPoints(A.start,A.end)&&a.push({Kt:i[m].Kt,Ht:A.start,Qt:A.end,dt:i[m].dt,Jt:i[m].Jt}),n.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:i[m].Qt,dt:i[m].dt,Jt:i[m].Jt})):4==A.type&&(.01<At.distanceOfTwoPoints(A.start,A.end)&&a.push({Kt:i[m].Kt,Ht:A.start,Qt:A.end,dt:i[m].dt,Jt:i[m].Jt}),At.distanceOfTwoPoints(i[m].Ht,A.start)<At.distanceOfTwoPoints(i[m].Ht,A.end)?(d={x:A.start.x-t.x,y:A.start.y-t.y},p={x:i[m].Ht.x-t.x,y:i[m].Ht.y-t.y},0<(d=(d=At.Dt(d,p))<180?d:d-360)?(.01<At.distanceOfTwoPoints(i[m].Ht,A.start)&&r.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:A.start,dt:At.dt(A.start,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,A.end)&&n.push({Kt:i[m].Kt,Ht:A.end,Qt:i[m].Qt,dt:At.dt(A.end,t),Jt:i[m].Jt})):(.01<At.distanceOfTwoPoints(i[m].Ht,A.start)&&n.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:A.start,dt:At.dt(A.start,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,A.end)&&r.push({Kt:i[m].Kt,Ht:A.end,Qt:i[m].Qt,dt:At.dt(A.start,t),Jt:i[m].Jt}))):(p={x:A.end.x-t.x,y:A.end.y-t.y},d={x:i[m].Ht.x-t.x,y:i[m].Ht.y-t.y},0<(d=(d=At.Dt(p,d))<180?d:d-360)?(.01<At.distanceOfTwoPoints(i[m].Ht,A.end)&&r.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:A.end,dt:At.dt(A.end,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,A.start)&&n.push({Kt:i[m].Kt,Ht:A,Qt:i[m].Qt,dt:At.dt(A.start,t),Jt:i[m].Jt})):(.01<At.distanceOfTwoPoints(i[m].Ht,A.end)&&n.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:A.end,dt:At.dt(A.end,t),Jt:i[m].Jt}),.01<At.distanceOfTwoPoints(i[m].Qt,A.start)&&r.push({Kt:i[m].Kt,Ht:A.start,Qt:i[m].Qt,dt:At.dt(A.start,t),Jt:i[m].Jt})))):s.push({Kt:i[m].Kt,Ht:i[m].Ht,Qt:i[m].Qt,dt:i[m].dt,Jt:i[m].Jt});return{left:r,right:n,inside:o,invalid:a,other:s}},nu:function(t){var e,i=this.ws.get(t),r=en(i.He.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;n<0&&i.He.delete(n)}}catch(t){r.e(t)}finally{r.f()}var o,s=en(i.Ke.keys());try{for(s.s();!(o=s.n()).done;){var a=o.value;a<0&&i.Ke.delete(a)}}catch(t){s.e(t)}finally{s.f()}var u,h=en(i.Ke.keys());try{for(h.s();!(u=h.n()).done;){var l=u.value;l<0&&i.Ke.delete(l)}}catch(t){h.e(t)}finally{h.f()}for(var c=[],f=0;f<i.We.length&&0<i.We[f].xn;f++)c.push(i.We[f]);i.We=c;for(var A=[],p=0;p<i.Ze.length&&0<i.Ze[p].xn;p++)A.push(i.Ze[p]);i.Ze=A,this.ws.delete(t),this.ws.set(t,i)},Eu:function(t,e){Number.MAX_VALUE;for(var i=this.Su(t,e.Ze),r=[],n=[],o=i[0],s=[],a=0;a<i.length;a++){if(i[a].dt<.01)return s.push(i[a]),s;if(!(i[a].Kt<0)){o=i[a],i.splice(0,a);break}}var u=0,h=0,l={x:null,y:null};At.Rt(t,o.Ht,o.Qt,l)||(l=At.dt(t,o.Ht)<=At.dt(t,o.Qt)?o.Ht:o.Qt);for(var c,f,A=0;A<i.length;A++)i[A].Kt<0||(c=i[A].Ht,f=i[A].Qt,c=(c=At.Dt({x:l.x-t.x,y:l.y-t.y},{x:c.x-t.x,y:c.y-t.y}))<180?c:c-360,f=(f=At.Dt({x:l.x-t.x,y:l.y-t.y},{x:f.x-t.x,y:f.y-t.y}))<180?f:f-360,(0<c&&0<f?r:(c<0&&f<0||r.push(i[A]),n)).push(i[A]));for(var p=[],d=[];;){var m=this.Ou(t,o,r);if(m.inside&&0<m.inside.length){m.inside.sort(function(t,e){return t.dt-e.dt});for(var y=0;y<m.inside.length;y++){for(var g,v,b,w,x=[],M=0;M<m.inside.length;M++)y==M||m.inside[M].remain&&0===m.inside[M].remain.length||((g=[]).push(t),g.push(m.inside[y].Ht),g.push(m.inside[y].Qt),At.Yt(m.inside[M].Ht,m.inside[M].Qt,g).isintersect&&m.inside[M].dt<m.inside[y].dt&&(g=(m.inside[M].Ht.x-t.x)/Math.sqrt((m.inside[M].Ht.x-t.x)*(m.inside[M].Ht.x-t.x)+(m.inside[M].Ht.y-t.y)*(m.inside[M].Ht.y-t.y))*1e7,b=(m.inside[M].Ht.y-t.y)/Math.sqrt((m.inside[M].Ht.x-t.x)*(m.inside[M].Ht.x-t.x)+(m.inside[M].Ht.y-t.y)*(m.inside[M].Ht.y-t.y))*1e7,g={x:t.x+g,y:t.y+b},b=(m.inside[M].Qt.x-t.x)/Math.sqrt((m.inside[M].Qt.x-t.x)*(m.inside[M].Qt.x-t.x)+(m.inside[M].Qt.y-t.y)*(m.inside[M].Qt.y-t.y))*1e7,v=(m.inside[M].Qt.y-t.y)/Math.sqrt((m.inside[M].Qt.x-t.x)*(m.inside[M].Qt.x-t.x)+(m.inside[M].Qt.y-t.y)*(m.inside[M].Qt.y-t.y))*1e7,b={x:t.x+b,y:t.y+v},v={x:null,y:null},At.Ot(t,g,m.inside[y].Ht,m.inside[y].Qt,g={x:null,y:null}),At.Ot(t,b,m.inside[y].Ht,m.inside[y].Qt,v),g.x)&&g.y&&v.x&&v.y&&(b=At.distanceOfTwoPoints(g,m.inside[y].Ht),w=At.distanceOfTwoPoints(v,m.inside[y].Ht),x.push({Kt:m.inside[y].Kt,Ht:b<w?g:v,Qt:b<w?v:g,dt:m.inside[y].dt,Jt:m.inside[y].Jt})));var _=At.Xt(m.inside[y],x);m.inside[y].remain=_,p.push.apply(p,rn(_))}}if(r=[],o=null,!(m.left&&0<m.left.length))break;m.left.sort(function(t,e){return t.dt-e.dt});for(var S=0;S<m.left.length;S++){var B={x:m.left[S].Ht.x-t.x,y:m.left[S].Ht.y-t.y},E={x:m.left[S].Qt.x-t.x,y:m.left[S].Qt.y-t.y},C={x:l.x-t.x,y:l.y-t.y};B=At.Dt(C,B);if(u<(E=(C=(C=At.Dt(C,E))<180?C:C-360)<(B=B<180?B:B-360)?B:C)){o=m.left[S],u=E;break}}if(!o)break;r.push.apply(r,rn(m.left)),r.push.apply(r,rn(m.other))}for(o=i[0];;){var T=this.Ou(t,o,n);if(T.inside&&0<T.inside.length){T.inside.sort(function(t,e){return t.dt-e.dt});for(var F=0;F<T.inside.length;F++){for(var P,O,D,R,I=[],U=0;U<T.inside.length;U++)F==U||T.inside[U].remain&&0===T.inside[U].remain.length||((P=[]).push(t),P.push(T.inside[F].Ht),P.push(T.inside[F].Qt),At.Yt(T.inside[U].Ht,T.inside[U].Qt,P).isintersect&&T.inside[U].dt<T.inside[F].dt&&(P=(T.inside[U].Ht.x-t.x)/Math.sqrt((T.inside[U].Ht.x-t.x)*(T.inside[U].Ht.x-t.x)+(T.inside[U].Ht.y-t.y)*(T.inside[U].Ht.y-t.y))*1e7,D=(T.inside[U].Ht.y-t.y)/Math.sqrt((T.inside[U].Ht.x-t.x)*(T.inside[U].Ht.x-t.x)+(T.inside[U].Ht.y-t.y)*(T.inside[U].Ht.y-t.y))*1e7,P={x:t.x+P,y:t.y+D},D=(T.inside[U].Qt.x-t.x)/Math.sqrt((T.inside[U].Qt.x-t.x)*(T.inside[U].Qt.x-t.x)+(T.inside[U].Qt.y-t.y)*(T.inside[U].Qt.y-t.y))*1e7,O=(T.inside[U].Qt.y-t.y)/Math.sqrt((T.inside[U].Qt.x-t.x)*(T.inside[U].Qt.x-t.x)+(T.inside[U].Qt.y-t.y)*(T.inside[U].Qt.y-t.y))*1e7,D={x:t.x+D,y:t.y+O},O={x:null,y:null},At.Ot(t,P,T.inside[F].Ht,T.inside[F].Qt,P={x:null,y:null}),At.Ot(t,D,T.inside[F].Ht,T.inside[F].Qt,O),P.x)&&P.y&&O.x&&O.y&&(D=At.distanceOfTwoPoints(P,T.inside[F].Ht),R=At.distanceOfTwoPoints(O,T.inside[F].Ht),I.push({Kt:T.inside[F].Kt,Ht:D<R?P:O,Qt:D<R?O:P,dt:T.inside[F].dt,Jt:T.inside[F].Jt})));var L=At.Xt(T.inside[F],I);T.inside[F].remain=L,d.push.apply(d,rn(L))}}if(n=[],o=null,!(T.right&&0<T.right.length))break;T.right.sort(function(t,e){return t.dt-e.dt});for(var k=0;k<T.right.length;k++){var j={x:T.right[k].Ht.x-t.x,y:T.right[k].Ht.y-t.y},Q={x:T.right[k].Qt.x-t.x,y:T.right[k].Qt.y-t.y},N={x:l.x-t.x,y:l.y-t.y};j=At.Dt(N,j),N=At.Dt(N,Q);if((Q=(j=j<180?j:j-360)<(N=N<180?N:N-360)?j:N)<h){o=T.right[k],h=Q;break}}if(!o)break;n.push.apply(n,rn(T.right)),n.push.apply(n,rn(T.other))}return p.push.apply(p,d),s.push.apply(s,p),s},Tu:function(t,e,i,r,n){if(1!=this.wr)for(var o={},s=0;s<i.Ve.length;s++){var a=i.Ve[s];if(null!=a&&a!=n&&nr.NaviModelPassType_DECORATE!=a.pass&&(null==n||n.pass==nr.NaviModelPassType_DECORATE||!At.yt(n.lr,a.Se,a.Se.length-1)))for(var u=a.Se.length,h=0;h<u-1;h++){if(At.Ot(t,e,a.Se[h],a.Se[h+1],o)&&!(At.distanceOfTwoPoints(t,o)<.01))return!1}}for(var l={},c=i.Ye,f=0;f<c.length;f++){c[f];for(var A=c[f].Pe,p=0;p<A.length;p++)for(var d=A[p],m=0;m<d.length-1;m++)if(At.Ot(t,e,d[m],d[m+1],l))return!1;for(var y=c[f].Se,g=0;g<y.length-1;g++)if(At.Ot(t,e,y[g],y[g+1],l))return!1}for(var v=0;v<i.Ze.length;v++){var b=i.Ze[v];if(!(b.xn==r.xn||b.xn<0))if(At.Ot(t,e,b.Ht,b.Qt,{})&&.01<At.distanceOfTwoPoints(e,b.Ht)&&.01<At.distanceOfTwoPoints(e,b.Qt))return!1}return!0},Ru:function(t,e){for(var i=this.xu(this.Ss),r=new Map,n=0;n<e.length;n++){var o=!0,s=new tn,a=At.Ut(e[n].Ht,e[n].Qt,t),u=(At.Gt(t,a,e[n].Ht,e[n].Qt).isintersect||(a=At.dt(t,e[n].Ht)<=At.dt(t,e[n].Qt)?e[n].Ht:e[n].Qt),s.ut=Object.assign({},a),s.Jt=Object.assign({},i.Ze[i.So(e[n].xn)]),At.dt(t,a));if(1!=this.wr)for(var h=0;h<i.Ve.length;h++){var l=i.Ve[h];if(null!=l&&l!=obstruct&&nr.NaviModelPassType_DECORATE!=l.pass&&(null==obstruct||obstruct.pass==nr.NaviModelPassType_DECORATE||!At.yt(obstruct.lr,l.Se,l.Se.length-1)))for(var c=l.Se.length,f=0;f<c-1;f++){var A=At.Gt(t,a,l.Se[f],l.Se[f+1]);A.isintersect&&(A=At.dt(t,A.point))<u&&(u=A,s.ls=l,s.dt=Number.MAX_VALUE,s.vs=!1,s.ys=nr.NaviObstructType_MODEL,o=!1)}}for(var p,d=i.Ye,m=0;m<d.length;m++){for(var y=d[m],g=d[m].Pe,v=0;v<g.length;v++)for(var b=g[v],w=0;w<b.length-1;w++){var x=At.Et(t,a,b[w],b[w+1]);x.isintersect&&(x=At.dt(t,x.point))<u&&(u=x,s.ls=y,s.dt=Number.MAX_VALUE,s.vs=!1,s.ys=nr.NaviObstructType_EXTENT,o=!1)}for(var M=d[m].Se,_=0;_<M.length-1;_++){var S=At.Et(t,a,M[_],M[_+1]);S.isintersect&&(S=At.dt(t,S.point))<u&&(u=S,s.ls=y,s.dt=Number.MAX_VALUE,s.vs=!1,s.ys=nr.NaviObstructType_EXTENT,o=!1)}}o&&((p=r.get(s.Jt.xn))?p.push(s):((p=[]).push(s),r.set(s.Jt.xn,p)))}},eu:function(t,e){for(var i,r=0;r<this.Zs.length;r++)if(At.yt(t,this.Zs[r].Se,this.Zs[r].Mu))return a.ROUTE_FAILED_NO_DEST_ARRIVAL;if(1===this.wr)return(i=this.Nu(t,e)).road?(i=this.ku(this.Ss,i.coords,i.road),void(this.Wo=i)):a.ROUTE_FAILED_NO_START_ARRIVAL;for(var n=this.Eu(t,e),o=new Map,s=0;s<n.length;s++){var u,h={x:null,y:null},l=n[s];if(At.Rt(t,l.Ht,l.Qt,h)?h.dt=0:(At.distanceOfTwoPoints(t,l.Ht)<At.distanceOfTwoPoints(t,l.Qt)?(h.x=l.Ht.x,h.y=l.Ht.y):(h.x=l.Qt.x,h.y=l.Qt.y),c=At.Rt(t,l.Jt.Ht,l.Jt.Qt,u={x:null,y:null}),h.dt=c?At.dt(h,u):Number.MAX_VALUE),At.distanceOfTwoPoints(h,l.Jt.Ht)<.001?(h.id=l.Jt.he,h.newNode=!1):At.distanceOfTwoPoints(h,l.Jt.Qt)<.001?(h.id=l.Jt.ce,h.newNode=!1):h.newNode=!0,null!=this.bs&&this.bs.pass==nr.NaviModelPassType_PASS_THROUGH&&0==this.bs.De.length?this.Tu(t,h,e,l.Jt,this.bs):this.Tu(t,h,e,l.Jt)){var c={ut:h,Jt:l.Jt,dt:n[s].dt};if(o.has(l.Kt)){for(var f=o.get(l.Kt),A=!1,p=0;p<f.length;p++)if(At.distanceOfTwoPoints(f[p].ut,h)<.01){A=!0;break}A||o.get(l.Kt).push(c)}else o.set(l.Kt,[c])}}var d,m=!0,y=(this.Wo=this.fu(this.Ss,t),null==this.bs&&(m=!1),new Map),g=new Map,v=en(o);try{for(v.s();!(d=v.n()).done;){var b,w=d.value,x=!1,M=en(w[1]);try{for(M.s();!(b=M.n()).done;){var _=b.value;if(_.ut.newNode&&_.ut.dt<.01){y.set(w[0],[_]),x=!0;break}}}catch(t){M.e(t)}finally{M.f()}x||g.set(w[0],w[1])}}catch(t){v.e(t)}finally{v.f()}if(null!=(o=0<y.size?y:g)&&0<o.size){m=!1;var S,B=en(o);try{for(B.s();!(S=B.n()).done;)for(var E=S.value[1],C=0;C<E.length;C++)0!=E[C].Jt.pe&&(m=!0)}catch(t){B.e(t)}finally{B.f()}var T,F=en(o);try{for(F.s();!(T=F.n()).done;){var P=T.value[1];if(P.sort(function(t,e){return t.ut.dt-e.ut.dt}),P[0].Jt,P[0].ut.dt==Number.MAX_VALUE){var O,D=en(P);try{for(D.s();!(O=D.n()).done;){var R=O.value,I=this.ku(this.Ss,R.ut,R.Jt);this.Au(this.Ss,this.Wo,I,R.Jt.pe)}}catch(t){D.e(t)}finally{D.f()}}else{var U=this.ku(this.Ss,P[0].ut,P[0].Jt);this.Au(this.Ss,this.Wo,U,P[0].Jt.pe)}}}catch(t){F.e(t)}finally{F.f()}}if(m&&null!=this.bs&&this.bs.De&&0<this.bs.De.length)for(var L=null,k=this.ws.get(this.Ss),j=0;j<this.bs.De.length;j++){L=this.bs.De[j];var Q=this.bs.Fe[j];if(Q==nr.NaviEntranceType_EXIT||Q==nr.NaviEntranceType_ACCESS){for(var N=this.bs.Pe,z=!0,H=0;H<N.length;H++){for(var V=N[H],G=0;G<V.length-1;G++)if(At.ht(t,L.pr,V[G],V[G+1])){z=!1;break}if(0==z)break}if(0!=z){for(var K=0;K<k.Ze.length;K++){var Y=k.Ze[K];if(0!=Y.pe&&At.ht(t,L.pr,Y.Ht,Y.Qt)&&0<Y.xn&&0==L.gu.includes(Y.xn)){z=!1;break}}0!=z&&this.Au(this.Ss,this.Wo,L)}}}},ou:function(t,e){for(var i,r=0;r<this.Zs.length;r++)if(At.yt(t,this.Zs[r].Se,this.Zs[r].Mu))return a.ROUTE_FAILED_NO_DEST_ARRIVAL;if(1===this.wr)return(i=this.Nu(t,e)).road?(i=this.ku(this.Os,i.coords,i.road),t.Ks&&(i.Ks=t.Ks),void(this.Zo=i)):a.ROUTE_FAILED_NO_DEST_ARRIVAL;for(var n=this.Eu(t,e),o=new Map,s=0;s<n.length;s++){var u,h={x:null,y:null},l=n[s];if(At.Rt(t,l.Ht,l.Qt,h)?h.dt=0:(At.distanceOfTwoPoints(t,l.Ht)<At.distanceOfTwoPoints(t,l.Qt)?(h.x=l.Ht.x,h.y=l.Ht.y):(h.x=l.Qt.x,h.y=l.Qt.y),c=At.Rt(t,l.Jt.Ht,l.Jt.Qt,u={x:null,y:null}),h.dt=c?At.dt(h,u):Number.MAX_VALUE),At.distanceOfTwoPoints(h,l.Jt.Ht)<.001?(h.id=l.Jt.he,h.newNode=!1):At.distanceOfTwoPoints(h,l.Jt.Qt)<.001?(h.id=l.Jt.ce,h.newNode=!1):h.newNode=!0,null!=this.ds&&this.ds.pass==nr.NaviModelPassType_PASS_THROUGH&&0==this.ds.De.length?this.Tu(t,h,e,l.Jt,this.ds):this.Tu(t,h,e,l.Jt)){var c={ut:h,Jt:l.Jt};if(o.has(l.Kt)){for(var f=o.get(l.Kt),A=!1,p=0;p<f.length;p++)if(At.distanceOfTwoPoints(f[p].ut,h)<.01){A=!0;break}A||o.get(l.Kt).push(c)}else o.set(l.Kt,[c])}}var d,m=!0,y=(this.Zo=this.fu(this.Os,t),t.Ks&&(this.Zo.Ks=t.Ks),null==this.ds&&(m=!1),new Map),g=new Map,v=en(o);try{for(v.s();!(d=v.n()).done;){var b,w=d.value,x=!1,M=en(w[1]);try{for(M.s();!(b=M.n()).done;){var _=b.value;if(_.ut.newNode&&_.ut.dt<.01){y.set(w[0],[_]),x=!0;break}}}catch(t){M.e(t)}finally{M.f()}x||g.set(w[0],w[1])}}catch(t){v.e(t)}finally{v.f()}if(null!=(o=0<y.size?y:g)&&0<o.size){m=!1;var S,B=en(o);try{for(B.s();!(S=B.n()).done;)for(var E=S.value[1],C=0;C<E.length;C++)0!=E[C].Jt.pe&&(m=!0)}catch(t){B.e(t)}finally{B.f()}var T,F=en(o);try{for(F.s();!(T=F.n()).done;){var P=T.value[1];if(P.sort(function(t,e){return t.ut.dt-e.ut.dt}),P[0].Jt,P[0].ut.dt==Number.MAX_VALUE){var O,D=en(P);try{for(D.s();!(O=D.n()).done;){var R=O.value,I=this.ku(this.Os,R.ut,R.Jt);this.Au(this.Os,this.Zo,I,R.Jt.pe)}}catch(t){D.e(t)}finally{D.f()}}else{var U=this.ku(this.Os,P[0].ut,P[0].Jt);this.Au(this.Os,this.Zo,U,P[0].Jt.pe)}}}catch(t){F.e(t)}finally{F.f()}}if(m&&null!=this.ds&&this.ds.De&&0<this.ds.De.length)for(var L=null,k=this.ws.get(this.Os),j=0;j<this.ds.De.length;j++){L=this.ds.De[j];var Q=this.ds.Fe[j];if(Q==nr.NaviEntranceType_ENTRANCE||Q==nr.NaviEntranceType_ACCESS){for(var N=this.ds.Pe,z=!0,H=0;H<N.length;H++){for(var V=N[H],G=0;G<V.length-1;G++)if(At.ht(t,L.pr,V[G],V[G+1])){z=!1;break}if(0==z)break}if(0!=z){for(var K=0;K<k.Ze.length;K++){var Y=k.Ze[K];if(0!=Y.pe&&At.ht(t,L.pr,Y.Ht,Y.Qt)&&0<Y.xn&&0==L.gu.includes(Y.xn)){z=!1;break}}0!=z&&this.Au(this.Os,this.Zo,L)}}}},Js:function(t,e,i){var r,n,o=this,s=t instanceof Array&&2==t.length&&(t={x:t[0],y:t[1]}),a=!0,u=this.ru(t),h=this.Go.Ro(t),l=this.Go.Mo(t);s=null!=h&&h.pass==nr.NaviModelPassType_PASS_THROUGH&&0==h.De.length?this.Iu(l,t,30,h):this.Iu(l,t);if(1===this.wr)return(c=this.ju(s))?(r=c.Jt,n=null,(n=0==(r=this.Pu(l,t,r,[c],h)).length?this.ku(l,c.ut,c.Jt):this.ku(l,r[0].ut,r[0].Jt)).Ks=void 0!==i&&i,i&&(Object.assign(t,n.pr),n.pr=t),Object.assign(e,n),!0):void 0;var c=this.fu(l,t);if(c.Ks=void 0!==i&&i,Object.assign(e,c),null==h&&(a=!1),0<s.size){a=!1;var f,A=en(s);try{for(A.s();!(f=A.n()).done;)for(var p=f.value[1],d=0;d<p.length;d++)0!=p[d].Jt.pe&&(a=!0)}catch(t){A.e(t)}finally{A.f()}var m,y=!1,g=[],v=en(s);try{for(v.s();!(m=v.n()).done;){var b,w=m.value[1],x=w[0].Jt,M=this.Pu(l,t,x,w,h);if(0==M.length){var _,S=en(w);try{for(S.s();!(_=S.n()).done;){var B=_.value,E=this.ku(l,B.ut,B.Jt);this.Au(l,e,E)}}catch(t){S.e(t)}finally{S.f()}}else Math.abs(M[0].Du)>At.rt()?g.push.apply(g,rn(M)):(y=!0,b=this.ku(l,M[0].ut,M[0].Jt),this.Au(l,e,b))}}catch(t){v.e(t)}finally{v.f()}y||g.forEach(function(t){t=o.ku(l,t.ut,t.Jt),o.Au(l,e,t)})}if(h&&h.pass!=nr.NaviModelPassType_NOT_PASS){if(h.pass===nr.NaviModelPassType_PASS_THROUGH||h.pass===nr.NaviModelPassType_PASS_NOT_THROUGH){for(var C={},T=[],F=[],P=this.Go.Ze,O=!0,D=0;D<h.Oe;D++)for(var R=h.Se[D],I=h.Se[D+1],U=0;U<P.length;U++){var L=P[U];1===At.Ot(R,I,L.Ht,L.Qt,C)&&nr.NaviRoadEntry_FORBID!==L.pe&&(O=!1,(L={}).x=C.x,L.y=C.y,T.push(L),F.push(P[U]))}if(!O){h.De=[],h.Fe=[],h.Le=[];for(var k=0;k<T.length;k++){var j=F[k],Q=this._u(u,T[k],j);Q.gu.push(j.xn),Q.ne=nr.NaviNodeType_COMMON,j.pe===nr.NaviRoadEntry_BOTH?Q.entranceType=nr.NaviEntranceType_ACCESS:At.yt(j.Ht,h.Se,h.Oe)?(j.pe===nr.NaviRoadEntry_FORWARD&&(Q.entranceType=nr.NaviEntranceType_EXIT),j.pe===nr.NaviRoadEntry_BACK&&(Q.entranceType=nr.NaviEntranceType_ENTRANCE)):(j.pe===nr.NaviRoadEntry_FORWARD&&(Q.entranceType=nr.NaviEntranceType_ENTRANCE),j.pe===nr.NaviRoadEntry_BACK&&(Q.entranceType=nr.NaviEntranceType_EXIT)),h.De.push(Q),h.Fe.push(Q.entranceType),h.Le.push(Q.ne)}}}if(a&&null!=h&&h.De&&0<h.De.length){for(var N=!1,z=0;z<h.De.length;z++){var H=h.De[z],V=h.Fe[z];V!=nr.NaviEntranceType_EXIT&&V!=nr.NaviEntranceType_ACCESS||(this.Au(l,e,H),N=!0)}if(!N)return!1}return!0}},su:function(){if((t=((t=this.Lu(this.Wo.pr))&&(this.cu(this.Ss,t,nr.NaviRoadHinderType_HINDER_GENERAL),this.Ns.push({lu:this.Ss,ls:t})),this.Lu(this.Zo.pr)))&&(this.cu(this.Os,t,nr.NaviRoadHinderType_HINDER_GENERAL),this.Ns.push({lu:this.Os,ls:t})),this.js=[],this.Ss===this.Os){if((i=(t=this.Fu(this.Ss)).Jo(this.Wo,this.Zo,this.zo))!==a.ROUTE_SUCCESS)return i;i=t.ns(),this.js=[],i.reverse(),(t=this.js).push.apply(t,rn(i))}else{if(-1!==this.Ss&&-1===this.Os){var t=this.Cu(this.Wo.pr,this.Ss,nr.NaviEntranceType_EXIT);if((r=(i=this._s.get(this.Ss)).Jo(this.Wo,t,this.zo))!=a.ROUTE_SUCCESS)return r;var e=i.ns(e);if((r=(i=this._contain_zoneIdDijkstras.get(-1)).Jo(t,this.Zo,this.zo))!=a.ROUTE_SUCCESS)return r;t=i.ns(),e.reverse(),t.reverse(),(r=this.js).push.apply(r,rn(e)),(i=this.js).push.apply(i,rn(t))}if(-1===this.Ss&&-1!==this.Os){var i,r=this.Cu(this.Zo.pr,this.Os,nr.NaviEntranceType_ENTRANCE);if((i=(e=this._s.get(this.Os)).Jo(r,this.Zo,this.zo))!=a.ROUTE_SUCCESS)return i;if(t=e.ns(),(i=(e=this._s.get(-1)).Jo(this.Wo,r,this.zo))!=a.ROUTE_SUCCESS)return i;(r=e.ns()).reverse(),t.reverse(),(i=this.js).push.apply(i,rn(r)),(e=this.js).push.apply(e,rn(t))}if(-1!==this.Ss&&-1!==this.Os){if(i=this.Cu(this.Wo.pr,this.Ss,nr.NaviEntranceType_EXIT),(e=(r=this._s.get(this.Ss)).Jo(this.Wo,i,this.zo))!=a.ROUTE_SUCCESS)return e;var n=r.ns(n);t=this.Cu(this.Zo.pr,this.Os,nr.NaviEntranceType_ENTRANCE);if((e=(r=this._s(this.Os)).Jo(t,this.Zo,this.zo))!=a.ROUTE_SUCCESS)return e;var o=r.ns(o);if((e=(r=this._s(-1)).Jo(i,t,this.zo))!=a.ROUTE_SUCCESS)return e;i=r.ns(),n.reverse(),i.reverse(),o.reverse(),(t=this.js).push.apply(t,rn(n)),(e=this.js).push.apply(e,rn(i)),(r=this.js).push.apply(r,rn(o))}}return a.ROUTE_SUCCESS},Bu:function(t,e,i){for(var r=0;r<e;r++)if(null!=t[r]&&t[r].xn==i)return r;return-1},ru:function(t){for(var e=this.Go.Xe,i=0;i<e.length;i++){var r=e[i];if(r.Ae(t))return r.xn}return-1},Vs:function(){for(var t=this.Go.Xe,e=0;e<t.length;e++){var i=t[e],r=this.Uu(this.Go,i);this.ws.set(i.xn,r)}this.ws.set(-1,this.Go);var n,o=en(this.ws);try{for(o.s();!(n=o.n()).done;){var s=n.value;s[1].no(),this._s.set(s[0],new Yr(s[1]))}}catch(t){o.e(t)}finally{o.f()}},Uu:function(t,e){if(t&&e){for(var i,r=0,n=0,o=t.Ze.length,s=t.We.length,a=t.Ze,u=t.We,h=0,l=new Int8Array(o),c=0;c<o;c++)a[c]&&a[c].pe!=nr.NaviRoadEntry_FORBID&&(i=a[c],r=e.contain(i.Ht),n=e.contain(i.Qt),0==r&&0==n||(h=!0),1==r&&1==n&&(l[c]=1),1==r&&0==n&&(l[c]=2),0==r&&1==n&&(l[c]=3),0==r&&0==n&&(l[c]=4),2==r&&0==n&&(l[c]=6),2==r&&1==n&&(l[c]=7),0==r&&2==n&&(l[c]=8),1==r)&&2==n&&(l[c]=9);if(0==h)return null;for(var f,A,p,d,m,y,g=new Array(s),v=new Array(o),b=0,w=new Int8Array(s),x=0,M=C=l.length;x<M;x++)0!=l[x]&&6!=l[x]&&8!=l[x]&&1!=l[x]&&a[x]&&(y=(f=a[x]).pe,m=[f.xn],2==l[x]||9==l[x]?(A=null,A=2==l[x]?e.Ot(f.Ht,f.Qt):Object.assign({},f.Qt),(p=new gr).xn=this.yo(),p.ne=nr.NaviNodeType_COMMON,p.ie=nr.NaviLiftType_NULL,p.entranceType=nr.NaviEntranceType_ACCESS,p.pr=Object.assign({},A),(A=new Sr).setRoad(f),A.xn=this.bo(),m.push(A.xn),p.segLinks=m,(d=new gr).setNode(p),y==nr.NaviRoadEntry_FORWARD?d.entranceType=nr.NaviEntranceType_EXIT:y==nr.NaviRoadEntry_BACK&&(d.entranceType=nr.NaviEntranceType_ENTRANCE),e.Ne.push(d),b=this.Bu(u,s,A.ce),A.Qt=Object.assign({},d.pr),A.le[1]=Object.assign({},d.pr),A.ce=d.xn,A._e(),v[x]=A,g[b]=d,g[b=this.Bu(u,s,A.he)]=u[b],g[b].segLinks.splice(g[b].segLinks.indexOf(f.xn),1,A.xn),(d=new gr).setNode(p),f.he=d.xn,f.Ht=Object.assign({},d.pr),f.le[0]=Object.assign({},d.pr),f._e(),u[b].segLinks.splice(u[b].segLinks.indexOf(f.xn),1),u.push(d),w[b]=2):3!=l[x]&&7!=l[x]||(A=null,A=3==l[x]?e.Ot(f.Ht,f.Qt):Object.assign({},f.Ht),(p=new gr).xn=this.yo(),p.ne=nr.NaviNodeType_COMMON,p.ie=nr.NaviLiftType_NULL,p.entranceType=nr.NaviEntranceType_ACCESS,p.pr=Object.assign({},A),(d=new Sr).setRoad(f),d.xn=this.bo(),m.push(d.xn),p.segLinks=m,(m=new gr).setNode(p),y==nr.NaviRoadEntry_FORWARD?m.entranceType=nr.NaviEntranceType_ENTRANCE:y==nr.NaviRoadEntry_BACK&&(m.entranceType=nr.NaviEntranceType_EXIT),e.Ne.push(m),b=this.Bu(u,s,d.he),d.Ht=Object.assign({},m.pr),d.le[0]=Object.assign({},m.pr),d.he=m.xn,d._e(),v[x]=d,g[b]=m,g[b=this.Bu(u,s,d.ce)]=u[b],g[b].segLinks.splice(g[b].segLinks.indexOf(f.xn),1,d.xn),(y=new gr).setNode(p),f.ce=y.xn,f.Qt=Object.assign({},y.pr),f.le[1]=Object.assign({},y.pr),f._e(),u[b].segLinks.splice(u[b].segLinks.indexOf(f.xn),1),u.push(y),w[b]=2));for(var _,S=0,B=C;S<B;S++)1==l[S]&&(_=a[S])&&(v[S]=_,2!=w[b=this.Bu(u,s,_.he)]&&(g[b]=u[b],w[b]=1),2!=w[b=this.Bu(u,s,_.ce)]&&(g[b]=u[b],w[b]=1),a[S]=null);for(var E=0;E<s;E++)1==w[E]&&(u[E]=null);for(var C=new jr(g,v,!0,1),T=[],F=t.Ve,P=0;P<F.length;P++){var O=F[P];O&&this.Gu(O,e)&&T.push(O)}return(t=C.Ve).push.apply(t,T),C}},Ys:function(){var t,e=en(this.ws);try{for(e.s();!(t=e.n()).done;)for(var i=t.value,r=i[0],n=i[1].Ve,o=0;o<n.length;o++){var s,a=n[o];nr.NaviModelPassType_PASS_NOT_THROUGH==a.pass&&((s=this.Ts.get(r))||(s=[],this.Ts.set(r,s)),s.push(a))}}catch(t){e.e(t)}finally{e.f()}},zs:function(){var t,e=en(this.ws);try{for(e.s();!(t=e.n()).done;)for(var i=t.value,r=i[0],n=i[1].Ve,o=0;o<n.length;o++){var s,a=n[o];nr.NaviModelPassType_NOT_PASS==a.pass&&((s=this.Rs.get(r))||(s=[],this.Rs.set(r,s)),s.push(a))}}catch(t){e.e(t)}finally{e.f()}},Xs:function(){var t,e=en(this.Ts);try{for(e.s();!(t=e.n()).done;)for(var i=t.value,r=i[0],n=i[1],o=this.xu(r).Ze,s=0;s<n.length;s++){for(var a=n[s],u=0;u<o.length;u++){var h,l=o[u].je();At.yt(l,a.Se,a.Oe)&&(o[u].Vi=o[u].Vi*this.Ps,(h=this.Ms.get(a.xn))||(h=[],this.Ms.set(a.xn,h)),h.push(o[u]))}this.cu(r,a,nr.NaviRoadHinderType_HINDER_HIGH)}}catch(t){e.e(t)}finally{e.f()}},qs:function(){var t,e=en(this.Rs);try{for(e.s();!(t=e.n()).done;)for(var i=t.value,r=i[0],n=i[1],o=this.xu(r).Ze,s=0;s<n.length;s++)for(var a=n[s],u=0;u<o.length;u++){var h=o[u],l=h.pe,c=h.je();if(At.yt(c,a.Se,a.Oe)){if(h.Vi=Number.MAX_VALUE,l==nr.NaviRoadEntry_BOTH||l==nr.NaviRoadEntry_FORWARD){var f=this.xu(r).He.get(h.he);if(f)for(var A=0;A<f.length;A++)f[A]._o==h.ce&&(f[A].Vi=h.Vi)}if(h.pe==nr.NaviRoadEntry_BOTH||h.pe==nr.NaviRoadEntry_BACK){var p=this.xu(r).He.get(h.ce);if(p)for(var d=0;d<p.length;d++)p[d]._o==h.he&&(p[d].Vi=h.Vi)}}}}catch(t){e.e(t)}finally{e.f()}},cu:function(t,e,i){var r=this.Ms.get(e.xn);if(r){if(nr.NaviRoadHinderType_HINDER_HIGH==i)for(var n=0;n<r.length;n++){var o=r[n];if(o._e(),o.Vi=r.length*this.Ps,o.pe==nr.NaviRoadEntry_BOTH||o.pe==nr.NaviRoadEntry_FORWARD){var s=this.xu(t).He.get(o.he);if(s)for(var a=0;a<s.length;a++)s[a]._o==o.ce&&(s[a].Vi=o.Vi)}if(o.pe==nr.NaviRoadEntry_BOTH||o.pe==nr.NaviRoadEntry_BACK){var u=this.xu(t).He.get(o.ce);if(u)for(var h=0;h<u.length;h++)u[h]._o==o.he&&(u[h].Vi=o.Vi)}}if(nr.NaviRoadHinderType_HINDER_GENERAL==i)for(var l=0;l<r.length;l++){var c=r[l];if(c._e(),c.pe==nr.NaviRoadEntry_BOTH||c.pe==nr.NaviRoadEntry_FORWARD){var f=this.xu(t).He.get(c.he);if(f)for(var A=0;A<f.length;A++)f[A]._o==c.ce&&(f[A].Vi=c.Vi)}if(c.pe==nr.NaviRoadEntry_BOTH||c.pe==nr.NaviRoadEntry_BACK){var p=this.xu(t).He.get(c.ce);if(p)for(var d=0;d<p.length;d++)p[d]._o==c.he&&(p[d].Vi=c.Vi)}}}},Cu:function(t,e,i){var r=this.Go.so(e);if(null==r)return null;for(var n=this.xu(e).vo(t,void 0),o=(n.area,Number.MAX_VALUE),s=null,a=0;a<r.Ne.length;a++){var u,h=r.Ne[a],l=At.dt(h.pr,t);h.entranceType!=nr.NaviEntranceType_ACCESS&&h.entranceType!=i||l<o&&((u=this.Wu(e,h.pr))==n||u.pass!=nr.NaviModelPassType_PASS_NOT_THROUGH)&&(o=l,s=h)}return s},Wu:function(t,e){for(var i=null,r=(t=this.xu(t),Number.MAX_VALUE),n=Number.MAX_VALUE,o=null,s=t.Ve,a=0;a<s.length;a++){var u,h=s[a];(u=At._pointToPolygon2d(h.Se,e,h.Se.length-1))<n&&(n=u,o=h),this.Fs>u&&(u=h.area)<r&&(r=u,i=h)}return null==i?o:i},Gu:function(t,e){return!t.bb.isSeparate(e.bb)&&(t=t.lr,!!At.yt(t,e.Se,e.Oe))},ku:function(t,e,i){for(var r=this.Cs.find(function(t){return t==i.he}),n=this.Cs.find(function(t){return t==i.ce}),o=(null==r&&this.Cs.push(i.he),null==n&&this.Cs.push(i.ce),this.Is),s=null,a=0;a<o.length;a++)if(o[a].Zu==i){s=o[a];break}if(null==s)(s={}).Zu=i,o.push(s);else for(;null!=s.Vu;){var u=s.Vu.Zu;s=At.lt(e,u.Ht,u.Qt)?s.Vu:s.Yu}i=s.Zu;var h,l,c;r=new gr;return e.id?r.xn=e.id:r.xn=this.mu(),r.pr.x=e.x,r.pr.y=e.y,r.zu=!1!==e.newNode,!r.zu&&1!==this.wr||((n=new Sr).xn=this.mu(),n.he=i.he,n.Ht=i.Ht,n.ce=r.xn,n.Qt=r.pr,n.le=[i.Ht,r.pr],n.de=i.de,(h=new Sr).xn=this.mu(),h.he=r.xn,h.Ht=r.pr,h.ce=i.ce,h.Qt=i.Qt,h.le=[r.pr,i.Qt],h.de=i.de,this.ks.push(n),this.ks.push(h),(c={}).Zu=n,(l={}).Zu=h,s.Vu=c,s.Yu=l,r.tempType=1,n.tempType=1,h.tempType=1,n._e(),h._e(),n.pe=i.pe,h.pe=i.pe,(c=this.xu(t)).We.push(r),c.Ze.push(n),c.Ze.push(h),(l=this.Fu(t).Go).Ke.set(r.xn,c.We.length-1),i.pe==nr.NaviRoadEntry_BOTH&&((t=[]).push({_o:i.he,Vi:n.Vi}),t.push({_o:i.ce,Vi:h.Vi}),l.He.set(r.xn,t),(t=l.He.get(i.he))||l.He.set(i.he,t=[]),t.push({_o:r.xn,Vi:n.Vi}),(t=l.He.get(i.ce))||l.He.set(i.ce,t=[]),t.push({_o:r.xn,Vi:h.Vi})),i.pe==nr.NaviRoadEntry_FORWARD&&((c=[]).push({_o:i.ce,Vi:h.Vi}),l.He.set(r.xn,c),(c=l.He.get(i.he))||l.He.set(i.he,c=[]),c.push({_o:r.xn,Vi:n.Vi})),i.pe!=nr.NaviRoadEntry_BACK)||((t=[]).push({_o:i.he,Vi:n.Vi}),l.He.set(r.xn,t),(t=l.He.get(i.ce))||l.He.set(i.ce,t=[]),t.push({_o:r.xn,Vi:h.Vi})),r},Xu:function(t,e){for(var i=e.length-1;0<=i;i--)if(e[i].xn&&0<e[i].xn)return e.splice(i+1,0,t),i+1;return-1},_u:function(t,e,i,r){var n,o,s;return r?this.ku(t,e,i):(r=this.xu(t),(t=new gr).xn=this.yo(),t.pr=e,(e=new Sr).xn=this.bo(),e.he=i.he,e.Ht=i.Ht,e.ce=t.xn,e.Qt=t.pr,e.de=i.de,e.le=[i.Ht,t.pr],(n=new Sr).xn=this.bo(),n.he=t.xn,n.Ht=t.pr,n.ce=i.ce,n.Qt=i.Qt,n.de=i.de,n.le=[t.pr,i.Qt],(o=[]).push(e.xn),o.push(n.xn),t.segLinks=o,e._e(),n._e(),e.pe=i.pe,n.pe=i.pe,o=r.We,s=r.Ze,o=this.Xu(t,o),this.Xu(e,s),this.Xu(n,s),r.Ke.set(t.xn,o),i.pe==nr.NaviRoadEntry_BOTH&&((s=[]).push({_o:i.he,Vi:e.Vi}),s.push({_o:i.ce,Vi:n.Vi}),r.He.set(t.xn,s),(s=r.He.get(i.he))||r.He.set(i.he,s=[]),s.push({_o:t.xn,Vi:e.Vi}),(s=r.He.get(i.ce))||r.He.set(i.ce,s=[]),s.push({_o:t.xn,Vi:n.Vi})),i.pe==nr.NaviRoadEntry_FORWARD&&((o=[]).push({_o:i.ce,Vi:n.Vi}),r.He.set(t.xn,o),(o=r.He.get(i.he))||r.He.set(i.he,o=[]),o.push({_o:t.xn,Vi:e.Vi})),i.pe==nr.NaviRoadEntry_BACK&&((s=[]).push({_o:i.he,Vi:e.Vi}),r.He.set(t.xn,s),(s=r.He.get(i.ce))||r.He.set(i.ce,s=[]),s.push({_o:t.xn,Vi:n.Vi})),t.gu=[],t.gu.push(e.xn),t.gu.push(n.xn),t)},qu:function(t){if(null!=t){for(var e=this.xu(t),i=e.We.length-1;0<=i;i--){var r=e.We[i];if(null==r||0<=r.xn)break;e.We.splice(i,1)}for(var n=e.Ze.length-1;0<=n;n--){var o=e.Ze[n];if(null==o||0<=o.xn)break;e.Ze.splice(n,1)}}},Hu:function(t,e){var i=t.get(e);if(i)for(var r=0;r<i.length;r++)i[r]._o<0&&(i.splice(r,1),r--)},Qu:function(t,e){for(var i=t.get(e),r=0;r<i.length;r++)this.Hu(t,i[r]._o);t.delete(e)},Ku:function(t,e,i,r,n){r.Ju=Number.MAX_VALUE,r.vs=!1,r.Du=i;for(var o=Number.MAX_VALUE,s={},a=this.xu(t),u=Number.MAX_VALUE,h=0;h<a.Ze.length;h++){var l,c=a.Ze[h];null==c||c.xn<0||(c.pe==nr.NaviRoadEntry_FORBID?At.Et(e,i,c.Ht,c.Qt,s)&&(l=At.dt(e,s))<=u&&(u=l):At.Et(e,i,c.Ht,c.Qt,s)&&(l=At.dt(e,s))<o&&(o=l,r.ut=Object.assign({},s),r.dt=o,r.Jt=c,r.vs=!0))}if(r.dt>=u)return r.dt=Number.MAX_VALUE,r.vs=!1;if(!r.vs)return!1;if(1!=this.wr)for(var f={},A=0;A<a.Ve.length;A++){var p=a.Ve[A];if(null!=p&&p!=n&&nr.NaviModelPassType_DECORATE!=p.pass&&(null==n||n.pass==nr.NaviModelPassType_DECORATE||!At.yt(n.lr,p.Se,p.Se.length-1)))for(var d=p.Se.length,m=0;m<d-1;m++)if(At.Et(e,i,p.Se[m],p.Se[m+1],f)){var y=At.dt(e,f);if(y<o)return o=y,r.ls=p,r.dt=Number.MAX_VALUE,r.vs=!1,r.ys=nr.NaviObstructType_MODEL,!1}}for(var g={},v=a.Ye,b=0;b<v.length;b++){for(var w=v[b],x=v[b].Pe,M=0;M<x.length;M++)for(var _=x[M],S=0;S<_.length-1;S++)if(At.Et(e,i,_[S],_[S+1],g)){var B=At.dt(e,g);if(B<o)return o=B,r.ls=w,r.dt=Number.MAX_VALUE,r.vs=!1,r.ys=nr.NaviObstructType_EXTENT,!1}for(var E=v[b].Se,C=0;C<E.length-1;C++)if(At.Et(e,i,E[C],E[C+1],g)){var T=At.dt(e,g);if(T<o)return o=T,r.ls=w,r.dt=Number.MAX_VALUE,r.vs=!1,r.ys=nr.NaviObstructType_EXTENT,!1}}return!0},$u:function(t,e){return t.dt-e.dt},tf:function(t,e){return e.Du-t.Du},au:function(t){if(t=this.xu(t)){for(var e=t.We,i=t.Ke,r=e.length-1;0<=r;r--){var n=e[r];if(null==n||0<=n.xn)break;i.delete(n.xn),e.splice(r,1)}for(var o=t.Ze,s=t.Je,a=o.length-1;0<=a;a--){var u=o[a];if(null==u||0<=u.xn)break;s.delete(u.xn),o.splice(a,1)}}},hu:function(){this.rf(this.gs),this.rf(this._s)},rf:function(t){var e,i=en(t);try{for(i.s();!(e=i.n()).done;){var r,n=e.value[1],o=[],s=n.Go.He,a=en(s);try{for(a.s();!(r=a.n()).done;){var u=r.value;u[0]<0&&o.push(u[0])}}catch(t){a.e(t)}finally{a.f()}for(var h=0;h<o.length;h++)this.Qu(n.Go.He,o[h]);for(var l=0;l<this.Cs.length;l++)this.Hu(s,this.Cs[l])}}catch(t){i.e(t)}finally{i.f()}},Pu:function(t,e,i,r,n){var o=[],s={x:0,y:0};if(At.Rt(e,i.Ht,i.Qt,s)&&this.nf(e,s,{},n))(n={}).ut=s,n.vs=!0,n.Jt=i,n.Du=0,n.dt=At.dt(e,s),o.push(n);else{for(var a={x:s.x-e.x,y:s.y-e.y},u=0;u<r.length;u++){var h=r[u],l={x:h.ut.x-e.x,y:h.ut.y-e.y};l=At.Dt(l,a);h.Du=270<l?l-360:l}r.sort(this.tf);var c,f=null;if(r[r.length-1].Du<0)f=r[r.length-1],o.push(f);else for(var A=0;A<r.length;A++)if(0<r[A].Du)return f=r[A],0==A?o.push(f):(c=r[A-1],At.dt(f.ut,i.Ht)>At.dt(c.ut,i.Ht)?(o.push(c),o.push(f)):(o.push(f),o.push(c))),o}return o},if:function(t,e,i,r,n){for(var o=r||30,s=0;s<360;s+=o){var a=new tn;this.Ku(t,e,s,a,n),1==a.vs&&i.push(a)}i.sort(this.$u)},Iu:function(t,e,i,r){var n=new Map,o=[];for(this.if(t,e,o,i,r);0!=o.length;){var s=o[0],a=n.get(s.Jt.xn);a?a.push(s):((a=[]).push(s),n.set(s.Jt.xn,a)),o.splice(0,1)}return n},fu:function(t,e){var i=new gr;return(e=(i.xn=this.mu(),i.pr=Object.assign({},e),this.xu(t))).We.push(i),e.Ke.set(i.xn,e.We.length-1),this.Fu(t).Go=e,i},ef:function(t,e,i){return i?this.fu(t,e):((i=new gr).xn=this.yo(),i.pr=Object.assign({},e),t=(e=this.xu(t)).We,t=this.Xu(i,t),e.Ke.set(i.xn,t),i)},nf:function(t,e,i,r){for(var n,o=this.xu(-1),s=0;s<o.Ve.length;s++)if(null!=(n=o.Ve[s])&&n!=r&&nr.NaviModelPassType_DECORATE!=n.pass)for(var a=n.Se,u=0;u<a.length-1;u++)if(At.Ot(t,e,a[u],a[u+1],i)){var h=At.dt(t,i),l=At.dt(e,i);if(!(h<=At.rt()||l<=At.rt()))return!1}for(var c=o.Ye,f=0;f<c.length;f++){for(var A=c[f],p=A.Pe,d=0;d<p.length;d++)for(var m=p[d],y=0;y<m.length-1;y++)if(At.Ot(t,e,m[y],m[y+1],i))return!1;for(var g=A.Se,v=0;v<g.length-1;v++)if(At.Ot(t,e,g[v],g[v+1],i))return!1}return!0},Au:function(t,e,i,r,n,o){for(var s=0;s<this.As.length;s++){var a=this.As[s],u={};if(1==At.Ot(a.Ht,a.Qt,e.pr,i.pr,u)&&.001<At.dt(e.pr,u)&&.001<At.dt(i.pr,u))return null}void 0===r&&(r=nr.NaviRoadEntry_BOTH),void 0===n&&(n=!0),void 0===o&&(o=!0);var h=new Sr;return h.he=e.xn,h.Ht=e.pr,h.ce=i.xn,h.Qt=i.pr,h.le=[e.pr,i.pr],h.de=1,this.Cs.push(e.xn),this.Cs.push(i.xn),h.xn=n?this.mu():this.bo(),h.pe=r,h._e(),o&&this.As.push(h),this.xu(t).Ze.push(h),n=this.Fu(t),nr.NaviRoadEntry_BOTH==r&&(o={_o:i.xn,Vi:h.Vi},(t=n.Go.He.get(e.xn))?t.push(o):((t=[]).push(o),n.Go.He.set(e.xn,t)),o={_o:e.xn,Vi:h.Vi},(t=n.Go.He.get(i.xn))?t.push(o):((t=[]).push(o),n.Go.He.set(i.xn,t))),nr.NaviRoadEntry_FORWARD==r&&(o={_o:i.xn,Vi:h.Vi},(t=n.Go.He.get(e.xn))?t.push(o):((t=[]).push(o),n.Go.He.set(e.xn,t))),nr.NaviRoadEntry_BACK==r&&(o={_o:e.xn,Vi:h.Vi},(t=n.Go.He.get(i.xn))?t.push(o):((t=[]).push(o),n.Go.He.set(i.xn,t))),h},Lu:function(t){var e=this.ru(t),i=this.Ts.get(e);if(i)for(var r=0;r<i.length;r++){var n=i[r];if(At.yt(t,n.Se,n.Oe))return n}return null},xu:function(t){var e=null;return(e=this.Ws?this.xs.get(t):e)||this.ws.get(t)},Fu:function(t){var e=null;return(e=this.Ws?this.gs.get(t):e)||this._s.get(t)},sf:function(){return this.Ws?this.gs:this._s},yo:function(){return this.Go.yo()},bo:function(){return this.Go.bo()},bu:function(t){var e,i=((e=[]).push.apply(e,rn(t.We)),[]);return(i=(e=(i.push.apply(i,rn(t.Ze)),new jr(e,i,!0,1))).Ve).push.apply(i,rn(t.Ve)),e},yu:function(t){for(var e=[-1],i=this.Go.Xe,r=0;r<i.length;r++){var n=i[r];t.uf(n.sr.tr,n.sr.rr)&&e.push(n.xn)}return e},Nu:function(t,e,i){var r=null,n=e.Ze;if(!n||n.length<=0)return null;var o=e.io(t);if(o<=0)return null;var s,a,u={},h=(r={distance:Number.MAX_VALUE,road:null,coords:{level:t.level}},en(n));try{for(h.s();!(a=h.n()).done;){var l=a.value;l.pe===nr.NaviRoadEntry_FORBID||o!==l.ve||i&&i.indexOf(l.de)<0||(s=At._t(t,l.Ht,l.Qt,u))<r.distance&&(r.distance=s,r.road=l,Object.assign(r.coords,u))}}catch(t){h.e(t)}finally{h.f()}return r}}),cr);function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=function(t,e){var i;if(t)return"string"==typeof t?cn(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?cn(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function fn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===hn(t=function(t,e){if("object"!==hn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==hn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&fn(t.prototype,e),i&&fn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ff=[],this.af=new Map,this.wr=i||null,this.hf(e)});var An=(Object.assign(cr.prototype,{hf:function(t){var e,i=ln(t);try{for(i.s();!(e=i.n()).done;)for(var r=e.value,n=r[1],o=n.Ye,s=0;s<o.length;s++){var a=o[s].xn,u=n.Io(a),h=o[s].ve,l=new un(u);l.xn=h,l.wr=this.wr,l.Zi=r[0],this.ff.push(l),this.af.set(h,l)}}catch(t){i.e(t)}finally{i.f()}},Vi:function(){return this.ff.length},cf:function(t){if(this.ff)for(var e=this.ff,i=0;i<e.length;i++){var r=e[i];if(t.level==r.Zi&&r.tu(t))return r}return null},lf:function(t){var e,i=ln(this.ff);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.xn==t)return r}}catch(t){i.e(t)}finally{i.f()}return null}}),cr);function pn(t){return function(t){if(Array.isArray(t))return yn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=mn(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mn(t,e){var i;if(t)return"string"==typeof t?yn(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?yn(t,e):void 0}function yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===gn(t=function(t,e){if("object"!==gn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==gn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Er=e,this.Ht=null,this.Qt=null,this.zo=o.MODULE_SHORTEST,this.vf=s.PRIORITY_DEFAULT,this.yf=new Map,this.bf=new Map,this.df=null,this.pf=null,this.mf=[],this.wf=[],this.xf=[],this._f=[],this.gf=[],this.jf=[],this.jn=[],this.Sf=.1,this.Of=1,this.Ef=10,this.Tf=.1,this.Rf=1,this.Mf=10,this.Nf=.1,this.kf=1,this.Af=10,this.If=1,this.Pf=10,this.Po=null,this.Df=null,this.Lf=null,this.Ff=null,this.bs=null,this.ds=null,this.Cf=null,this.Bf=!1,this.Uf=[],this.Ws=!0,this.Zs=new Map,this.Gf=null,this.wr=e.type,this.barrierFree=!1,this.Wf=!1,this.iu=0,this.Zf=0,this.Vf=[]}var e,i;return e=t,(i=[{key:"assginedInfos",get:function(){return this.Uf},set:function(t){this.Uf=t}},{key:"passPts",set:function(t){this.Yf=t}},{key:"failedInsertedPts",get:function(){return this._failedInsertedPts}},{key:"toDoors",get:function(){return this.Bf},set:function(t){this.Bf=t}},{key:"obstruct",get:function(){return this.Ws},set:function(t){this.Ws=t}}])&&vn(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var bn=(Object.assign(cr.prototype,{Ai:function(t){if(t&&t.scene&&t.floors&&(this.Po=t.scene,this.Df=new zr,0!=(t=t.floors).size)){this.zf(t),this.Xf(),this.Lf=new An(this.yf,this.wr),this.Lf.wr=this.wr;var e,i=dn(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(null!=r[1].gid){var n=r[1].naviAccessible;if(n&&n[0]&&0<n[0].naviNodes.length){this.Wf=!0;break}}}}catch(t){i.e(t)}finally{i.f()}this.Wf&&(this.zf(t),this.Xf(),this.Ff=new An(this.bf,this.wr),this.Ff.wr=this.wr)}},Mr:function(){this.Er=null,this.Po=null,this.Df&&(this.Df.Mr(),this.Df=null);var t,e=dn(this.yf);try{for(e.s();!(t=e.n()).done;)t.value[1].Mr()}catch(t){e.e(t)}finally{e.f()}if(this.yf.clear(),this.yf=null,this.df.Mr(),this.df=null,this.mf=null,this.xf=null,this.Wf){var i,r=dn(this.bf);try{for(r.s();!(i=r.n()).done;)i.value[1].Mr()}catch(t){r.e(t)}finally{r.f()}this.bf.clear(),this.bf=null,this.pf.Mr(),this.pf=null,this.wf=null,this._f=null}this.gf=null,this.jf=null,this.jn=null},qf:function(t,e){if(this.li(),(i=this.Hf([t])).length<1)return a.ROUTE_FAILED_NO_DATA_START;var i=i[0];if((r=(t.extentID=i,this.Hf([e]))).length<1)return a.ROUTE_FAILED_NO_DATA_DEST;for(var r=r[0],n=(e.endExtentID=r,this.Yf),o=0;o<n.length;o++)n[o].Ks=!0;var s=this.Hf(n);if((i=this.Qf(i,r,s)).rst!=a.ROUTE_SUCCESS)return i.rst;for(var u=new Map,h=0;h<s.length;h++)u.has(s[h])?u.get(s[h]).push(n[h]):u.set(s[h],[n[h]]);return r=i.extentPath,i=this.Kf(t,e,u,r),this.Jf(i.nodePath),i.rst},$f:function(t,e,i,r){this.li();var n=null,o=(n=this.Wf&&this.barrierFree?this.Ff:this.Lf).cf(t);if(!o)return a.ROUTE_FAILED_NO_DATA_START;if((l=o.wu(t))&&l.ls&&l.ls.pass==nr.NaviModelPassType_NOT_PASS)return a.ROUTE_FAILED_NO_START_ARRIVAL;if(!(h=n.cf(e)))return a.ROUTE_FAILED_NO_DATA_DEST;if((c=h.wu(e))&&c.ls&&c.ls.pass==nr.NaviModelPassType_NOT_PASS)return a.ROUTE_FAILED_NO_DEST_ARRIVAL;this.zo=i,this.Ht=t,this.bs=l.ls,this.Qt=e,this.ds=c.ls;var s=o.xn,u=h.xn,h=l.ls,l=c.ls,c=a.ROUTE_FAILED_CANNOT_ARRIVE;if(this.jn=[],1!==this.wr&&this.ta(r),s===u)r=t.level,o.bs=h,o.ds=l,(c=o.Jo(t,e,i))===a.ROUTE_SUCCESS&&(h=o.ns(),this.jn.push({Zi:r,jn:h}));else{if(this.ra(s,u,t,e)!=a.ROUTE_SUCCESS&&(c=a.ROUTE_FAILED_OUTLINE),this.gf.reverse(),(l=this.na(n,t,e))==a.ROUTE_SUCCESS)return l;c=l}if(c!=a.ROUTE_SUCCESS)for(;2<this.ia(s,u,t,e).length;){if(this.na(n,t,e)===a.ROUTE_SUCCESS)return this.ea(),a.ROUTE_SUCCESS;s===u&&0<this.gf.length&&(u=this.gf[this.gf.length-1].ve)}return this.ea(),c},ia:function(t,e,i,r){var n=null;if(n=this.Wf&&this.barrierFree?this.pf:this.df,t===e){var o=this.mf.length+1,s=new Ir,u=n.Go.ao(t);u=n.Go.We[u],u=(s.xn=u.xn,s.Zi=u.Zi,s.ve=o,s.Ko=u.Ko,s.Ue=u.Ue,s.Hi=u.Hi,s.Xi=u.Xi,this.mf.push(s),this.oa(),new jr(this.mf,this.xf));if(s=(e=o,(n=new Yr(u)).Go.He.get(t))){var h,l=dn(s.values());try{for(l.s();!(h=l.n()).done;){var c=h.value;c._o===e&&(c.Vi=Number.MAX_VALUE)}}catch(t){l.e(t)}finally{l.f()}}}else for(var f=0;f<this.Vf.length;f++){var A=this.Vf[f].from.ve,p=this.Vf[f].to.ve;if(A=n.Go.He.get(A)){var d,m=dn(A.values());try{for(m.s();!(d=m.n()).done;){var y=d.value;y._o===p&&(y.Vi=Number.MAX_VALUE)}}catch(t){m.e(t)}finally{m.f()}}}return this.df=n,this.ra(t,e,i,r)!=a.ROUTE_SUCCESS&&(this.gf=[]),this.gf.reverse(),this.gf},ea:function(){var t;this.Wf&&this.barrierFree?(this.sa(),this.oa(),t=new jr(this.wf,this._f),this.pf=new Yr(t)):(this.sa(),this.oa(),t=new jr(this.mf,this.xf),this.df=new Yr(t)),this.Vf=[]},na:function(t,e,i){this.jn=[];for(var r=[],n=[this.Ht],o=a.ROUTE_FAILED_CANNOT_ARRIVE,s=0;s<this.gf.length-1;s++){var u=[],h=[];if(null==this.wr||0===this.wr){if(!this.ua(this.gf[s],this.gf[s+1],n[n.length-1],u,h))return this.Vf.push({from:this.gf[s],to:this.gf[s+1]}),a.ROUTE_FAILED_CANNOT_ARRIVE}else if(!this.fa(this.gf[s],this.gf[s+1],n[n.length-1],u,h))return this.Vf.push({from:this.gf[s],to:this.gf[s+1]}),a.ROUTE_FAILED_CANNOT_ARRIVE;for(var l=!1,c=0;c<u.length;c++){var f=u[c].ae,A=h[c].ae,p=u[c].Zi,d=h[c].Zi,m={x:f.pr.x,y:f.pr.y,level:p},y={x:A.pr.x,y:A.pr.y,level:d};m=t.cf(m),o=0==s?(m.bs=this.bs,m.Jo(e,f,this.zo)):m.Jo(r[r.length-1],f,this.zo);if(a.ROUTE_SUCCESS==o){if(f=m.ns(),this.jn.push({Zi:p,jn:f}),r.push(A),n.push(A.pr),l=!0,this.gf.length-2==s){if((m=t.cf(y)).ds=this.ds,o=m.Jo(A,i,this.zo),a.ROUTE_SUCCESS!=o){this.jn.splice(this.jn.length-1,1),l=!1,n.splice(n.length-1,1),r.splice(r.length-1,1);continue}p=m.ns(),this.jn.push({Zi:d,jn:p})}if(a.ROUTE_SUCCESS==o)break}}if(!l)return 0==s?this.Vf.push({from:this.gf[s],to:this.gf[s+1]}):this.Vf.push({from:this.gf[s-1],to:this.gf[s]}),a.ROUTE_FAILED_CANNOT_ARRIVE;o!==a.ROUTE_SUCCESS&&this.Vf.push({from:this.gf[s],to:this.gf[s+1]})}return o},aa:function(){if(this.Bf&&(this.Cf=null,this.ds)&&0<this.jn.length){for(var t,e,i=this.jn[this.jn.length-1].jn,r=null,n={x:-1,y:-1},o=i.length-1;0<o;o--){var s=i[o],a=i[o-1];if(At.Lt(s.pr,a.pr,this.ds.Se,n)){r=o;break}}null!=r&&(t=i[i.length-1],i.splice(r,i.length-r),(e=new gr).xn=-1,e.pr=n,(t.Ks||t.pr.Ks)&&(e.Ks=!0),i.push(e),this.Cf=n)}for(var u=[],h=0;h<this.jn.length;h++)1<this.jn[h].jn.length&&u.push(this.jn[h]);for(var l=[],c=0;c<u.length;c++){this.ha(u[c]);for(var f=(y=u[c]).Zi,A=y.jn,p=[],d=0,m=0;m<A.length;m++)p.push(A[m].pr),m!=A.length-1&&(d+=At.dt(A[m].pr,A[m+1].pr));var y;(y=new fr).Zi=f,y.zi=A,y.Yi=p,y.Vi=d,l.push(y),c!=u.length-1&&(f=this.ca(u[c]),y=this.la(u[c+1]),l.push(f),l.push(y))}return l},ha:function(t){if(null!=t&&t.jn){var e=t.jn;if((a=e.length)&&!(a<2)){var i=[],r=(i.push(e[0]),e[0]),n=e[a-1];At.dt(r.pr,n.pr),At.rt();for(var o=1;o<a-1;o++){var s=e[o];null!=r&&At.dt(r.pr,s.pr)<At.rt()||null!=n&&At.dt(n.pr,s.pr)<At.rt()||i.push(s)}i.push(n);for(var a=i.length,u=new Array(a),h=0;h<a;h++)u[h]=0;for(var l=1;l<a-1;l++){for(var c=i[l],f=l-1;0!=u[f];)f--;!At.bt(c.pr,i[f].pr,i[l+1].pr)||c.Ks||(u[l]=1)}for(var A=[],p=0;p<a;p++)0==u[p]&&A.push(i[p]);t.jn=A}}},li:function(){this.gf=[],this.jf=[];var t,e=this.Lf.af,i=dn(e.keys());try{for(i.s();!(t=i.n()).done;){var r=t.value,n=e.get(r);n.li(),n.obstruct=this.Ws}}catch(t){i.e(t)}finally{i.f()}var o,s=this.Lf.af,a=dn(s.keys());try{for(a.s();!(o=a.n()).done;){var u=o.value,h=s.get(u);h.li(),h.obstruct=this.Ws}}catch(t){a.e(t)}finally{a.f()}},va:function(t,e){var i=null,r=null;if(null==(r=(this.Wf&&this.barrierFree?this.Ff:this.Lf).cf(t)))return null;r=r.Go;for(var n=[],o=(n.push.apply(n,pn(r.Ze)),i={distance:Number.MAX_VALUE,road:null,angle:null,coords:{level:t.level}},{}),s=0;s<n.length;s++){var a,u=n[s];u.pe===nr.NaviRoadEntry_FORBID||Array.isArray(e)&&0<e.length&&e.indexOf(u.de)<0||(a=At._t(t,u.Ht,u.Qt,o))<i.distance&&(i.distance=a,i.road=u,i.angle=this.ya(u.Ht,u.Qt),Object.assign(i.coords,o))}return null!=i.road&&(r={id:(r=i.road).xn,extentID:r.ve,roadEntry:r.pe,roadRank:r.de,startID:r.he,startPoint:r.Ht,endID:r.ce,endPoint:r.Qt},i.road=r),i},ya:function(t,e){var i=new dr(0,0,1);t=new dr(t.x,0,t.y),t=(e=new dr(e.x,0,e.y).clone().sub(t).normalize()).angleTo(i)*At.it();return 0<e.clone().cross(i).y?360-t:t},zf:function(t){this.Wf?this.bf=new Map:this.yf=new Map,this.Df.Do(this.Po);var e,i=dn(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,n=r[1].gid;if(null!=n){var o=r[1].geo[0],s=r[1].biz[0],a=null;if(1==this.wr?0<r[1].naviDrive.length&&(a=r[1].naviDrive[0]):this.Wf?0<r[1].naviAccessible.length&&(a=r[1].naviAccessible[0]):0<r[1].navi.length&&(a=r[1].navi[0]),a){var u=this.Df.Uo(n,o,s,a);if(0!=u.naviNodes.length&&0!=u.naviSegments.length){var h=new Map,l=this.ba(u,h),c=this.da(u),f=this.pa(u),A=this.ma(u),p=this.wa(u),d=(this.xa(p,l,a,h),new jr(l,c,!0,1));d.Zi=n,0!=A.length&&(d.Ye=A),0!=f.length&&(d.Xe=f),0!=p.length&&(d.Ve=p);for(var m=0;m<c.length;m++)c[m].ve=d.io(c[m].Ht);(0==this.Wf?this.yf:this.bf).set(u.level,d)}}}}}catch(t){i.e(t)}finally{i.f()}},ba:function(t,e){var i,r=[];for(i in t.naviNodes)!function(){var n=t.naviNodes[i];if(null!=n.nodeId){var o=new gr;o.xn=n.nodeId,o.pr={x:parseFloat(n.geoArr.x.toFixed(3)),y:parseFloat(n.geoArr.y.toFixed(3))},o.ne=n.nodeType,o.ie=n.liftType,o.Hi=n.liftFlag,o.ee=n.liftEntry,n.accessible&&(o._a=n.accessible),n.linkSegArr.forEach(function(t){o.qi.push(parseInt(t))}),n.liftFloorArr.forEach(function(t){o.Xi.push(parseInt(t))}),r.push(o),e.set(n.nodeId,i)}}();return r},da:function(t){var e,i=[];for(e in t.naviSegments){var r,n=t.naviSegments[e],o=n.geoArr;o&&((r=new Sr).xn=n.segmentId,r.he=n.snode,r.Ht={x:parseFloat(o[0].x.toFixed(3)),y:parseFloat(o[0].y.toFixed(3))},r.ce=n.enode,r.Qt={x:parseFloat(o[1].x.toFixed(3)),y:parseFloat(o[1].y.toFixed(3))},r.Vi=n.length,r.pe=n.entry,r.de=n.rank,i.push(r))}return i},ma:function(t){for(var e=[],i=0,r=t.extentLayer.length;i<r;i++){var n=t.extentLayer[i],o=(o=n.geoArr)||[];(o=new Pr(n.eid,t.gid,0,o,n.lr,n.holes)).fid=n.fid,e.push(o)}return e},wa:function(t){for(var e=[],i=0,r=t.modelLayer.length;i<r;i++){var n=t.modelLayer[i],o=(o=n.geoArr)||[];(o=new Pr(n.eid,t.gid,0,o,n.lr,n.holes)).fid=n.fid,o.pass=n.pass,e.push(o)}return e},pa:function(t){for(var e=[],i=0,r=t.naviZones.length;i<r;i++){var n=t.naviZones[i];n=new Cr(n.xn,t.gid,n.type,n.geoArr);e.push(n)}return e},xa:function(t,e,i,r){for(var n=new Map,o=0;o<t.length;o++){var s=t[o];n.set(s.xn,o)}for(var a=0;a<i.naviModels.length;a++)for(var u=i.naviModels[a],h=u.modelid,l=t[n.get(h)],c=0;c<u.doorids.length;c++){var f=u.doorids[c],A=(f=e[r.get(f)],f=(l.De.push(f),u.nodetypes[c]),u.entrytypes[c]);l.Le.push(f),l.Fe.push(A)}},Xf:function(){var t;this.Wf?(this.sa(),this.oa(),t=new jr(this.wf,this._f),this.pf=new Yr(t)):(this.sa(),this.oa(),t=new jr(this.mf,this.xf),this.df=new Yr(t))},sa:function(){var t,e=0,i=0,r=dn(this.Wf?(this.wf=[],this.bf):(this.mf=[],this.yf));try{for(r.s();!(t=r.n()).done;)for(var n=t.value,o=n[1],s=o.Ye,a=0;a<s.length;a++){var u=s[a],h=new Ir;h.xn=u.xn,h.Zi=n[0],h.ve=++e,u.ve=h.ve,h.Ko=u;for(var l=0;l<o.We.length;l++){var c,f,A=o.We[l];A.ie!=nr.NaviLiftType_NULL&&At.yt(A.pr,u.Se,u.Oe)&&(c=new xr,f=o.uo(A.pr),c.fe=f,c.se(A),c.ue=++i,c.Zi=n[0],c.ae=A,c.ee=A.ee,c.ie=A.ie,c.Hi=A.Hi,c.ve=h.ve,this.Wf?1===A._a&&(c._a=A._a,h.Ue.push(c)):(1===A._a&&(c._a=A._a),h.Ue.push(c)))}(this.Wf?this.wf:this.mf).push(h)}}catch(t){r.e(t)}finally{r.f()}},oa:function(){for(var t=0,e=this.Wf?this.wf:this.mf,i=[],r=0;r<e.length;r++)for(var n=e[r],o=0;o<e.length;o++){var s,a,u=e[o];r!=o&&(a=void 0,null!=(a=null==this.wr||0==this.wr?this.ga(n,u):this.ja(n,u)))&&(a*=0==(s=Math.abs(n.Zi-u.Zi))?1:s,(s=new Sr).he=n.ve,s.ce=u.ve,s.Vi=a,s.pe=nr.NaviRoadEntry_FORWARD,s.xn=t,t+=1,i.push(s))}this.Wf?this._f=i:this.xf=i},ga:function(t,e){for(var i=Number.MAX_VALUE,r=!1,n=t.Zi,o=e.Zi,a=n<o?nr.NaviLiftEntry_DOWN:nr.NaviLiftEntry_UP,u=0;u<t.Ue.length;u++){var h=t.Ue[u],l=h.ee;if(l!=nr.NaviLiftEntry_FORBID&&l!=a){var c=h.ie;if(s.PRIORITY_LIFTONLY==this.vf){if(nr.NaviLiftType_Lift!=c)continue}else if(s.PRIORITY_ESCALATORONLY==this.vf){if(nr.NaviLiftType_Escalator!=c)continue}else if(s.PRIORITY_STAIRONLY==this.vf){if(nr.NaviLiftType_Stair!=c)continue}else if(s.PRIORITY_ACCESSIBLEONLY==this.vf&&nr.NaviLiftType_Accessible!=c)continue;if(c==nr.NaviLiftType_Stair||-1!=h.Xi.indexOf(o))for(var f=0;f<e.Ue.length;f++){var A=e.Ue[f];if(null!=A&&h.Hi==A.Hi)if(s.PRIORITY_LIFTFIRST==this.vf||s.PRIORITY_DEFAULT==this.vf){if(nr.NaviLiftType_Lift==c||nr.NaviLiftType_Accessible==c)return this.Sf;if(nr.NaviLiftType_Escalator==c){(A=this.Rf)<i&&(i=A),r=!0;break}if(nr.NaviLiftType_Stair==c){(A=this.Af)<i&&(i=A),r=!0;break}}else if(s.PRIORITY_ESCALATORFIRST==this.vf){if(nr.NaviLiftType_Lift==c||nr.NaviLiftType_Accessible==c){(A=this.Of)<i&&(i=A),r=!0;break}if(nr.NaviLiftType_Escalator==c)return this.Tf;if(nr.NaviLiftType_Stair==c){(A=this.Af)<i&&(i=A),r=!0;break}}else if(s.PRIORITY_STAIRFIRST==this.vf){if(nr.NaviLiftType_Lift==c){(A=this.Of)<i&&(i=A),r=!0;break}if(nr.NaviLiftType_Escalator==c||nr.NaviLiftType_Accessible==c){(A=this.Mf)<i&&(i=A),r=!0;break}if(nr.NaviLiftType_Stair==c)return this.Nf}else{if(s.PRIORITY_LIFTFIRST1==this.vf||s.PRIORITY_STAIRFIRST1==this.vf||s.PRIORITY_ESCALATORFIRST1==this.vf)return this.If;if(s.PRIORITY_LIFTONLY==this.vf||s.PRIORITY_ESCALATORONLY==this.vf||s.PRIORITY_STAIRONLY==this.vf||s.PRIORITY_ACCESSIBLEONLY==this.vf)return this.If}}}}return r?i:null},ja:function(t,e){for(var i=Number.MAX_VALUE,r=!1,n=t.Zi<e.Zi?nr.NaviLiftEntry_DOWN:nr.NaviLiftEntry_UP,o=0;o<t.Ue.length;o++){var s=t.Ue[o],a=s.ee;if(a!=nr.NaviLiftEntry_FORBID&&a!=n){for(var u=0;u<e.Ue.length;u++){var h=e.Ue[u];if(s.Hi==h.Hi){i=this.Pf,r=!0;break}}if(r)break}}return r?i:null},ta:function(t){this.vf!==t&&(this.vf=t,this.barrierFree?(this.oa(),t=new jr(this.wf,this._f),this.pf=new Yr(t)):(this.oa(),t=new jr(this.mf,this.xf),this.df=new Yr(t)))},la:function(t){var e=t.jn,i=new fr;return i.Zi=t.Zi,i.zi.push(e[0]),i.Yi.push(e[0].pr),i.Vi=0,i},ca:function(t){var e=t.jn,i=new fr;return i.Zi=t.Zi,i.zi.push(e[e.length-1]),i.Yi.push(e[e.length-1].pr),i.Vi=0,i},Sa:function(t,e){for(var i=this.Wf&&this.barrierFree?this.wf:this.mf,r=0;r<i.length;r++)if(null!=t&&i[r].Zi==t&&i[r].xn==e)return i[r];return null},Oa:function(t){for(var e=null,i=this.Wf&&this.barrierFree?this.wf:this.mf,r=0;r<i.length;r++)if(i[r].ve==t)return i[r];return e},ra:function(t,e,i,r){var n,o=null;if((t=(o=this.Wf&&this.barrierFree?this.pf:this.df).rs(t,e,i,r))==a.ROUTE_SUCCESS){n=o.ns(),this.gf=[];for(var s=0;s<n.length;s++)this.gf.push(n[s])}return t},ua:function(t,e,i,r,n){var o=null,a=(o=(this.Wf&&this.barrierFree?(o=this.Ff.cf(i),this.Gf=(o||this.Ff.af.get(t.Zi)).Go.uo(i)):(o=this.Lf.cf(i),this.Gf=(o||this.Lf.af.get(t.Zi)).Go.uo(i)),Math.abs(t.Zi-e.Zi)),[]);function u(e,i){e=t.Ge(e,i,h),a.push.apply(a,pn(e))}var h=[];if(0==this.Wf&&1==this.barrierFree)for(var l=0;l<t.Ue.length;l++)1==t.Ue[l]._a&&h.push(t.Ue[l]);else h=t.Ue;for(var c=0;c<h.length;c++){var f=h[c];f.$i=At.dt(f.pr,this.Qt)+At.dt(f.pr,i)}var A,p=(p=t.Ko.sr.size).x+p.y,d=(s.PRIORITY_LIFTONLY!==this.vf&&s.PRIORITY_ESCALATORONLY!==this.vf&&s.PRIORITY_STAIRONLY!==this.vf&&s.PRIORITY_ACCESSIBLEONLY!==this.vf||(A=null,s.PRIORITY_LIFTONLY===this.vf&&(A=nr.NaviLiftType_Lift),s.PRIORITY_ESCALATORONLY===this.vf&&(A=nr.NaviLiftType_Escalator),s.PRIORITY_STAIRONLY===this.vf&&(A=nr.NaviLiftType_Stair),s.PRIORITY_ACCESSIBLEONLY===this.vf&&(A=nr.NaviLiftType_Accessible),a=t.Ge(A,null,h)),s.PRIORITY_LIFTFIRST!==this.vf&&s.PRIORITY_ESCALATORFIRST!==this.vf&&s.PRIORITY_STAIRFIRST!==this.vf&&s.PRIORITY_DEFAULT!==this.vf||(s.PRIORITY_LIFTFIRST!==this.vf&&s.PRIORITY_DEFAULT!==this.vf||(u(nr.NaviLiftType_Lift,-15*o),u(nr.NaviLiftType_Escalator,-8*o),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_ESCALATORFIRST===this.vf&&(u(nr.NaviLiftType_Lift,-8*o),u(nr.NaviLiftType_Escalator,-15*o),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_STAIRFIRST===this.vf&&(u(nr.NaviLiftType_Lift,-8*o),u(nr.NaviLiftType_Escalator,0),u(nr.NaviLiftType_Stair,-15*o))),s.PRIORITY_LIFTFIRST1!==this.vf&&s.PRIORITY_ESCALATORFIRST1!==this.vf&&s.PRIORITY_STAIRFIRST1!==this.vf||(s.PRIORITY_LIFTFIRST1===this.vf&&(u(nr.NaviLiftType_Lift,-p),u(nr.NaviLiftType_Escalator,0),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_ESCALATORFIRST1===this.vf&&(u(nr.NaviLiftType_Lift,0),u(nr.NaviLiftType_Escalator,-p),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_STAIRFIRST1===this.vf&&(u(nr.NaviLiftType_Lift,0),u(nr.NaviLiftType_Escalator,0),u(nr.NaviLiftType_Stair,-p))),this);a.sort(function(t,e){if(t.zone!==e.zone){if(t.zone===d.Gf)return-1;if(e.zone===d.Gf)return 1}return t.$i-e.$i});for(var m=0;m<a.length;m++){var y=a[m];if(!(1===y.ee&&e.Zi<t.Zi||2===y.ee&&e.Zi>t.Zi||3===y.ee))for(var g=0;g<e.Ue.length;g++){var v=e.Ue[g];if(y.Hi===v.Hi){r.push(y),n.push(v);break}}}return 0!==r.length},fa:function(t,e,i,r,n){this.Gf=this.Lf.af.get(t.Zi).Go.uo(i);for(var o=[],s=t.Ue,a=0;a<s.length;a++){var u=s[a];u.$i=At.dt(u.pr,this.Qt)+At.dt(u.pr,i)}var h=this;(o=t.Ge(nr.NaviLiftType_Ramp)).sort(function(t,e){if(t.zone!==e.zone){if(t.zone===h.Gf)return-1;if(e.zone===h.Gf)return 1}return t.$i-e.$i});for(var l=0;l<o.length;l++){var c=o[l];if(!(1===c.ee&&e.Zi<t.Zi||2===c.ee&&e.Zi>t.Zi||3===c.ee))for(var f=0;f<e.Ue.length;f++){var A=e.Ue[f];if(c.Hi===A.Hi){r.push(c),n.push(A);break}}}return 0!==r.length},Hf:function(t){var e=[],i=null;if(i=this.barrierFree?this.Ff:this.Lf){var r,n=dn(t);try{for(n.s();!(r=n.n()).done;){var o=r.value,s=i.cf(o),a=null==s?void 0:s.xn;a&&e.push(a)}}catch(t){n.e(t)}finally{n.f()}}return e},Qf:function(t,e,i){var r,n=null;if(-1!=(r=(-1!=(r=(i=Array.from(new Set(i))).indexOf(t))&&i.splice(r,1),i.indexOf(e)))&&i.splice(r,1),i.length<=0){if(n={rst:a.ROUTE_FAILED_OUTLINE,extentPath:[]},t==e)return n.extentPath.push(t),n.rst=a.ROUTE_SUCCESS,n;if(n.rst=this.ra(t,e),n.rst!=a.ROUTE_SUCCESS)return n;this.gf.reverse();for(var o=0;o<this.gf.length;o++)n.extentPath.push(this.gf[o].ve)}else n=this.Ea(t,e,i);return n},Ta:function(t){var e=0;if(!(null==t||t.length<=0))for(var i=this.df.Go.He,r=1;r<t.length;r++)for(var n=t[r].xn,o=t[r-1].xn,s=i.get(o),a=0;a<s.length;a++)if(s[a]._o==n){e+=s[a].Vi;break}return e},Ea:function(t,e,i){for(var r={rst:null,extentPath:[]},n=[],o=t;0<i.length;){for(var s=Number.MAX_VALUE,u=null,h=null,l=0;l<i.length;l++){var c,f=i[l];this.df.rs(o,f)==a.ROUTE_SUCCESS&&((f=this.df.ns()).reverse(),(c=this.Ta(f))<s)&&(s=c,u=l,h=f)}if(null==u)return r;o=i[u],h.splice(h.length-1,1),n.push.apply(n,pn(h)),i.splice(u,1)}if(r.rst=this.df.rs(o,e),r.rst==a.ROUTE_SUCCESS){(t=this.df.ns()).reverse(),n.push.apply(n,pn(t));for(var A=0;A<n.length;A++)r.extentPath.push(n[A].ve)}return r},Kf:function(t,e,i,r){this.li();for(var n=[],o=t,s=0;s<r.length;s++){var u=r[s],h=((this.barrierFree?this.Ff:this.Lf).lf(u),[]),l=i.get(r[s]);if(null!=l)for(;0<l.length;){for(var c=null,f=null,A=(this.Ra(o,l),3<=l.length?3:l.length),p=[],d=0;d<A;d++){var m=this.Ma(o,l[d]);m.rst==a.ROUTE_SUCCESS&&p.push({result:m,index:d})}p.sort(function(t,e){return t.result.dist-e.result.dist});var y=this.Na(l,p);if(y&&(c=y.result.nodePath,f=y.index,y.result.dist),null==f)return{rst:a.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:n};(o=c[c.length-1].pr).level=l[f].level,l.splice(f,1),c.splice(c.length-1,1),h.push.apply(h,pn(c));for(var g=0;g<y.result.naviResult.length;g++)n.push({level:y.result.naviResult[g].Zi,path:y.result.naviResult[g].zi})}if(s==r.length-1){this.Bf&&(u=(this.Wf&&this.barrierFree?this.Ff:this.Lf).cf(e).wu(e))&&(this.ds=u.ls);var v=this.Ma(o,e);if(v.rst!=a.ROUTE_SUCCESS)return{rst:a.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:n};h.push.apply(h,pn(v.nodePath));for(var b=0;b<v.naviResult.length;b++)n.push({level:v.naviResult[b].Zi,path:v.naviResult[b].zi});for(var w,x=[n[0]],M=1;M<n.length;M++)n[M].level==x[x.length-1].level?(w=x[x.length-1].path).push.apply(w,pn(n[M].path)):x.push(n[M]);return{rst:a.ROUTE_SUCCESS,nodePath:x}}}return{rst:a.ROUTE_SUCCESS,nodePath:n}},Jf:function(t){for(var e=[],i=0;i<t.length;i++)e.push({Zi:t[i].level,jn:t[i].path});this.jn=e},Ma:function(t,e){this.li(),this.jn=[];var i=null,r=Number.MAX_VALUE,n=[],o=(i=this.Wf&&this.barrierFree?this.Ff:this.Lf).cf(t);if(!o)return a.ROUTE_FAILED_NO_DATA_START;if(!(h=i.cf(e)))return a.ROUTE_FAILED_NO_DATA_DEST;if(o.li(),h.li(),(l=o.wu(t))&&l.ls&&l.ls.pass==nr.NaviModelPassType_NOT_PASS)return{rst:a.ROUTE_FAILED_NO_START_ARRIVAL,dist:r,nodePath:n};if((c=h.wu(e))&&c.ls&&c.ls.pass==nr.NaviModelPassType_NOT_PASS)return{rst:a.ROUTE_FAILED_NO_DEST_ARRIVAL,dist:r,nodePath:n};this.Ht=t,this.bs=l.ls,this.Qt=e,this.ds=c.ls;var s=o.xn,u=h.xn,h=l.ls,l=c.ls,c=a.ROUTE_FAILED_CANNOT_ARRIVE;if(this.jn=[],s===u){var f=t.level;o.bs=h,o.ds=l,(c=o.Jo(t,e,this.zo))===a.ROUTE_SUCCESS&&(h=o.ns(),this.jn.push({Zi:f,jn:h}))}else{if(this.ra(s,u,t,e)!=a.ROUTE_SUCCESS&&(c=a.ROUTE_FAILED_OUTLINE),this.gf.reverse(),(l=this.na(i,t,e))==a.ROUTE_SUCCESS){n=this.aa();for(var A=[],p=0;p<n.length;p++)A.push.apply(A,pn(n[p].zi));return{rst:l,dist:r=this.ka(A),nodePath:A,naviResult:n}}c=l}if(c!=a.ROUTE_SUCCESS)for(;2<this.ia(s,u,t,e).length;){if(this.na(i,t,e)===a.ROUTE_SUCCESS){n=this.aa();for(var d=[],m=0;m<n.length;m++)d.push.apply(d,pn(n[m].zi));return r=this.ka(d),this.ea(),{rst:a.ROUTE_SUCCESS,dist:r,nodePath:d,naviResult:n}}s===u&&0<this.gf.length&&(u=this.gf[this.gf.length-1].ve)}n=this.aa();for(var y=[],g=0;g<n.length;g++)y.push.apply(y,pn(n[g].zi));return r=this.ka(y),this.ea(),{rst:c,dist:r,nodePath:y,naviResult:n}},ka:function(t){var e=0;if(!(null==t||t.length<=1))for(var i=1;i<t.length;i++)e+=At.dt(t[i].pr,t[i-1].pr);return e},Aa:function(t,e,i,r,n){var o=Math.abs(t.Zi-e.Zi),a=[];function u(e,i){e=t.Ge(e,i,h),a.push.apply(a,pn(e))}var h=[];if(0==this.Wf&&1==this.barrierFree)for(var l=0;l<t.Ue.length;l++)1==t.Ue[l]._a&&h.push(t.Ue[l]);else h=t.Ue;for(var c=0;c<h.length;c++){var f=h[c];f.$i=At.dt(i,f.pr)}var A,p=(p=t.Ko.sr.size).x+p.y,d=(s.PRIORITY_LIFTONLY!==this.vf&&s.PRIORITY_ESCALATORONLY!==this.vf&&s.PRIORITY_STAIRONLY!==this.vf&&s.PRIORITY_ACCESSIBLEONLY!==this.vf||(A=null,s.PRIORITY_LIFTONLY===this.vf&&(A=nr.NaviLiftType_Lift),s.PRIORITY_ESCALATORONLY===this.vf&&(A=nr.NaviLiftType_Escalator),s.PRIORITY_STAIRONLY===this.vf&&(A=nr.NaviLiftType_Stair),s.PRIORITY_ACCESSIBLEONLY===this.vf&&(A=nr.NaviLiftType_Accessible),a=t.Ge(A,null,h)),s.PRIORITY_LIFTFIRST!==this.vf&&s.PRIORITY_ESCALATORFIRST!==this.vf&&s.PRIORITY_STAIRFIRST!==this.vf&&s.PRIORITY_DEFAULT!==this.vf||(s.PRIORITY_LIFTFIRST!==this.vf&&s.PRIORITY_DEFAULT!==this.vf||(u(nr.NaviLiftType_Lift,-15*o),u(nr.NaviLiftType_Escalator,-8*o),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_ESCALATORFIRST===this.vf&&(u(nr.NaviLiftType_Lift,-8*o),u(nr.NaviLiftType_Escalator,-15*o),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_STAIRFIRST===this.vf&&(u(nr.NaviLiftType_Lift,-8*o),u(nr.NaviLiftType_Escalator,0),u(nr.NaviLiftType_Stair,-15*o))),s.PRIORITY_LIFTFIRST1!==this.vf&&s.PRIORITY_ESCALATORFIRST1!==this.vf&&s.PRIORITY_STAIRFIRST1!==this.vf||(s.PRIORITY_LIFTFIRST1===this.vf&&(u(nr.NaviLiftType_Lift,-p),u(nr.NaviLiftType_Escalator,0),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_ESCALATORFIRST1===this.vf&&(u(nr.NaviLiftType_Lift,0),u(nr.NaviLiftType_Escalator,-p),u(nr.NaviLiftType_Stair,0)),s.PRIORITY_STAIRFIRST1===this.vf&&(u(nr.NaviLiftType_Lift,0),u(nr.NaviLiftType_Escalator,0),u(nr.NaviLiftType_Stair,-p))),this);a.sort(function(t,e){if(t.zone!==e.zone){if(t.zone===d.Gf)return-1;if(e.zone===d.Gf)return 1}return t.$i-e.$i});for(var m=0;m<a.length;m++){var y=a[m];if(!(1===y.ee&&e.Zi<t.Zi||2===y.ee&&e.Zi>t.Zi))for(var g=0;g<e.Ue.length;g++){var v=e.Ue[g];if(y.Hi===v.Hi){r.push(y),n.push(v);break}}}return 0!==r.length},Ra:function(t,e){e.sort(function(e,i){return At.wt(t,e)-At.wt(t,i)})},Na:function(t,e){var i=null;if(!(e.length<1)){var r=(i=e[0]).index;if(!(e.length<2)&&3<=e.length){for(var n,o=Number.MAX_VALUE,s=-1,a=0;a<t.length;a++)a!=r&&(n=At.dt(t[r],t[a]))<o&&(o=n,s=a);s!=e[1].index&&(i=e[1])}}return i},vu:function(t){for(var e=new Map,i=0;i<t.length;i++){var r=t[i],n=e.get(r.Zi);n||e.set(r.Zi,n=[]),n.push(r)}var o,s=this.Lf.af,a=this.Lf.af,u=dn(e.keys());try{for(u.s();!(o=u.n()).done;){var h=o.value,l=this.Zs.get(h);if(!l||this.Ia(e.get(h),l)){var c,f=dn(s.keys());try{for(f.s();!(c=f.n()).done;){var A=c.value,p=s.get(A);p.level===h&&(p.vu(e.get(h)),this.Zs.set(h,e.get(h)))}}catch(t){f.e(t)}finally{f.f()}var d,m=dn(a.keys());try{for(m.s();!(d=m.n()).done;){var y=d.value,g=a.get(y);g.level===h&&(g.vu(e.get(h)),this.Zs.set(h,e.get(h)))}}catch(t){m.e(t)}finally{m.f()}}}}catch(t){u.e(t)}finally{u.f()}},Pa:function(){var t,e=this.Lf.af,i=dn(this.Zs.keys());try{for(i.s();!(t=i.n()).done;){var r,n=t.value,o=dn(e.keys());try{for(o.s();!(r=o.n()).done;){var s=r.value,a=e.get(s);a.level===n&&a.Pa()}}catch(t){o.e(t)}finally{o.f()}}}catch(t){i.e(t)}finally{i.f()}this.Zs.clear()},Ia:function(t,e){if(t.length!=e.length)return!0;for(var i=0;i<t.length;i++){for(var r=!1,n=0;n<e.length;n++)e[n].Da(t[i])&&(r=!0);if(!r)return!0}return!1},uu:function(){for(var t in this.Uf){var e,i=parseInt(t),r=void 0,n=dn((r=(this.Wf&&this.barrierFree?this.Lf:this.Ff).af).keys());try{for(n.s();!(e=n.n()).done;){var o=e.value;r.get(o).Zi===i&&(dij.assignedPts=this.Uf[i],dij.uu(),this.jn.push({Zi:i,jn:dij.ns()}))}}catch(t){n.e(t)}finally{n.f()}}}}),cr),wn={zh:{straight:"",still_go_straight:"",back_to:"",turn_right:"",turn_left:"",right_front:" ",left_front:" ",turn_right_rear:"",turn_left_rear:"",up:"",down:"",up_to:"",down_to:"",drive_up:"",drive_down:"",meter:"",pass:"",arrived:"",front:"",stair:"",stair_pure:"",escalator_pure:"",lift_pure:"",ramp_pure:"",take:"",along:"",take_stair:"",along_ramp:"",front_pure:"",right_front_pure:"",right_pure:"",right_back_pure:"",back_pure:"",left_back_pure:"",left_pure:"",left_front_pure:"",east:"",west:"",south:"",north:"",southeast:"",northeast:"",southwest:"",northwest:"",face_to:"",start:"",dest:"",enter:"",outdoor:"",entrance:"",exit:"",reach:""},en:{straight:"go straight",still_go_straight:"go straight",back_to:"turn back",turn_right:"turn right",turn_left:"turn left",right_front:"go straight right front ",left_front:"go straight left front ",turn_right_rear:"turn right rear",turn_left_rear:"turn left rear",up:"up",down:"up",up_to:"up to",down_to:"down to",drive_up:"drive up",drive_down:"drive down",meter:"meter",pass:"pass",arrived:"arrived",front:"front",stair:"stair",stair_pure:"stair",escalator_pure:"escalator",lift_pure:"lift",ramp_pure:"ramp",take:"take",along:"along",take_stair:"take stair",along_ramp:"along ramp",front_pure:"front",right_front_pure:"right front",right_pure:"right",right_back_pure:"right back",back_pure:"back",left_back_pure:"left back",left_pure:"left",left_front_pure:"left front",east:"east",west:"west",south:"south",north:"north",southeast:"southeast",northeast:"northeast",southwest:"southwest",northwest:"northwest",face_to:"face to",start:"start",dest:"dest",enter:"enter",outdoor:"outdoor",entrance:"entrance",exit:"exit",reach:"reach"}};function xn(t){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===xn(t=function(t,e){if("object"!==xn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==xn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&Mn(t.prototype,e),i&&Mn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.La=e.data||null,this.Fa=e.directionAssert||10,this.Ca=e.combineAsset||5,this.Ba=e.combineDistance||.1,this.Ua=e.language||u.ZH,this.wr=e.type||or.Walk,this.Ga=["north","northeast","east","southeast","south","southwest","west","northwest","north"],this.Wa=["front_pure","right_front_pure","right_pure","right_back_pure","back_pure","left_back_pure","left_pure","left_front_pure","front_pure"],this.Za=["still_go_straight","right_front","turn_right","turn_right_rear","back_to","turn_left_rear","turn_left","left_front","still_go_straight"],this.Va=0,this.Ya=[],this.za=!1,this.Xa=0,Object.assign(this,e)});var _n=(Object.assign(cr.prototype,{qa:function(t){for(var e=[],i=0;i<t.length;i++)e=e.concat(t[i].zi);return e},Ha:function(t,e){var i=Math.PI/4,r=(t=t/i,parseInt(t));t=t%1*i;return r%2==0?e<t&&(r+=1):i-e<=t&&(r+=1),r},Qa:function(t,e){var i=e.angleTo(t);return new dr(e.x,e.z,e.y).cross(new dr(t.x,t.z,t.y)).z<0?2*Math.PI-i:i},vi:function(){var t={center:{x:0,y:0,z:0}};return this.La&&(t.center.x=this.La.scene.defCenX,t.center.y=this.La.scene.defCenY,t.center.z=this.La.scene.defCenZ),t},Ka:function(t,e){var i=0;return e.level&&(i=this._i(e.level).height),new dr(e.x-t.x,t.y+i,-e.y+t.y)},Ja:function(t){return(t=wn[this.Ua][t])||""},_i:function(t){var e=null;if(!this.La)return null;for(var i=this.La.scene,r=(e={level:t,height:0,gname:"",desc:""},0);r<i.layerGroups.length;r++){var n=i.layerGroups[r];if(n.gid===t){e.height=n.height,e.gname=n.gname,e.desc=n.desc;break}}return e},$a:function(t){if(-1!=t)switch(t){case 2:return" "+this.Ja("stair_pure");case 3:return" "+this.Ja("escalator_pure");case 1:return" "+this.Ja("lift_pure");case 5:return" "+this.Ja("ramp_pure");default:return""}return this.Ja("stair")},th:function(t,e){var i,r,n,o;return e==t.length-1?{index:t[t.length-1].index}:(n=r=new dr(0,0,1),0!=e&&((n=t[e].clone().sub(t[e-1]).normalize()).y=0,n.z*=-1),(o=t[e+1].clone().sub(t[e])).y=0,i=o.length(),(o=o.normalize()).z*=-1,r=this.Ha(this.Qa(r,o),22.5*At.nt()),n=this.Qa(n,o),{relField:o=this.Ha(n,this.Fa*At.nt()),relDesc:this.Ja(this.Wa[o]),relAngle:n*At.it(),absField:r,absDesc:this.Ja(this.Ga[r]),distance:i,index:t[e].index})},rh:function(t,e){for(var i=this,r=this.vi().center,n=t.map(function(t,e){return(t=i.Ka(r,t)).index=e,t}),o=[],s=0;s<n.length;s++){var a=this.th(n,s);a.point=t[s],a.level=e,o.push(a)}for(var u=[o[0]],h=1;h<o.length;h++)1==h&&o[0].distance<=this.Ba?(o[0].distance+=o[h].distance,o[0].relDesc=o[h].relDesc,o[0].relAngle=o[h].relAngle,o[0].absField=o[h].absField,o[0].absDesc=o[h].absDesc):o[h].distance<=this.Ba&&(o[h].relAngle<=this.Ca||360-o[h].relAngle<=this.Ca)||o[h].relAngle<=this.Ca||360-o[h].relAngle<=this.Ca?u[u.length-1].distance+=o[h].distance:u.push(o[h]);return u},nh:function(t,e){var i=[],r=0;if(e.forEach(function(t){(t.Ks||t.pr.Ks)&&i.push(r),r++}),0!=i.length)for(;0!=i.length;){for(var n=0;n<t.length-1;n++)if(t[n].index<=i[0]&&t[n+1].index>=i[0]){t[n+1].Ks=!0;break}i.splice(0,1)}},ih:function(t){var e="";return null==(t=this._i(t))||""+(e=this.Ua==u.ZH?t.desc:t.gname.toUpperCase())!="null"&&""+e!=""&&""+e!="undefined"?e:t.gname.toUpperCase()},eh:function(t,e,i,r,n,o){var s,a,u=t[e],h=t[e+1],l=null,c=this.Ja(this.Za[h.relField]);this.za=e==t.length-3&&h.distance<this.Va,c&&!this.za||(r?(this.za=!1,c||(l=this.oh(t[e+1].point,n),n=this.$a(l),s=null,a=this.ih(r),c=this.wr==or.Drive?(s=i<r?this.Ja("drive_up"):this.Ja("drive_down"),this.Ja("along")+n+" "+s+" "+a):(s=i<r?this.Ja("up_to"):this.Ja("down_to"),this.Ja("take")+n+" "+s+" "+a))):(this.za&&(this.Xa=h.distance),o||(c=this.Ja("arrived")))),i=null,i=0==e?2==t.length?this.Ja("face_to")+" "+u.absDesc+" "+this.Ja("straight")+" "+Math.ceil(u.distance)+" "+this.Ja("meter")+" "+c:this.Ja("face_to")+" "+u.absDesc+" "+this.Ja("straight")+" "+Math.ceil(u.distance)+" "+this.Ja("meter")+" "+this.Ja(this.Za[t[e+1].relField]):this.Ja("straight")+" "+Math.ceil(u.distance+(this.za&&!r?h.distance:0))+" "+this.Ja("meter")+" "+c;return[i=h.Ks?(i+=" ")+this.Ja("pass"):i,l]},sh:function(t,e,i,r,n){var o=t[e],s=t[e+1];return this.Ja(this.Za[t[e+1].relField])&&!this.za||(r?(t=i<r?this.Ja("up"):this.Ja("down"),s.relDesc=t):s.relDesc=n?this.Ja("front_pure"):this.Ja("dest")),{startPoint:o.point,startLevel:o.level,startIndex:o.index,endPoint:s.point,endLevel:s.level,endIndex:s.index,startDirection:o.absDesc,endDirection:s.relDesc,distance:o.distance+(this.za&&!r?s.distance:0)}},oh:function(t,e){for(var i,r=Number.MAX_SAFE_INTEGER,n=-1,o=0;o<e.length;o++)e[o]&&(i=Math.pow(e[o].pr.x-t.x,2)+Math.pow(e[o].pr.y-t.y,2))<r&&(r=i,n=e[o].ie);return n},uh:function(t){for(var e,i=t.fh,r=t.ah,n=t.result,o=[],s=[],a=[],u=null,h=0,l=[],c=!(this.Ya=[]),f=null,A=null,p=(t=t.buildingName||this.Ja("outdoor"),this.qa(n)),d=0;d<n.length;d++){if(e=(g=n[d]).level,u=null,d<n.length-1)for(var m=d;m<n.length;m++)if(n[m].level!=e){u=n[m].level;break}var y,g,v=g.pointList,b=this.rh(v,e);if(this.nh(b,g.zi),1<b.length&&(this.Ya=this.Ya.concat(b)),1==b.length)(u||c)&&(c?s.length&&(d==n.length-1&&(r?(o[o.length-1]+=" "+this.Ja("arrived"),s[s.length-1].endDirection=this.Ja("dest")):s[s.length-1].endDirection=this.Ja("front_pure")),s[s.length-1].endPoint=v[0],s[s.length-1].endLevel=e):f!=e&&null!=f||(g=null,y=this.ih(u),A=this.wr===or.Drive?(g=e<u?this.Ja("drive_up"):this.Ja("drive_down"),this.Ja("along_ramp")+" "+g+" "+y):(g=e<u?this.Ja("up_to"):this.Ja("down_to"),this.Ja("take_stair")+" "+g+" "+y),o.push(A),s.push({startPoint:v[0],startDirection:e<u?this.Ja("up"):this.Ja("down"),startLevel:e})),c=!c);else{f=e;for(var w=0;w<b.length-1&&!this.za;w++){var x,M=(x=this.eh(b,w,e,u,p,r))[0];(x=x[1])&&a.push(x),o.push(M),s.push(this.sh(b,w,e,u,r))}}1<b.length&&(g=b.reduce(function(t,e){return t+(e.distance||0)},0),l.push({level:e,distance:g}),h+=g)}return i&&0<o.length&&(o[0]=this.Ja("enter")+" "+t+" "+o[0]),r&&0<o.length&&(t===this.Ja("outdoor")?o[o.length-1]=o[o.length-1]+this.Ja("reach")+" "+r+" "+this.Ja("entrance"):o[o.length-1]=o[o.length-1]+this.Ja("reach")+" "+t+" "+this.Ja("exit")),[o,s,h,l,this.Xa,a]}}),cr);function Sn(t){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=Cn(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function En(t){return function(t){if(Array.isArray(t))return Tn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Cn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(t,e){var i;if(t)return"string"==typeof t?Tn(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Tn(t,e):void 0}function Tn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Fn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Sn(t=function(t,e){if("object"!==Sn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Sn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&Fn(t.prototype,e),i&&Fn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.hh=e.gate,this.lh=e.bidToOutline,this.yh=e.bidToOutlineAccess,this.bh={},this.dh={},this.ph=-1,this.mh=-1,this.wh=[],this.xh=[],this._h=new Map,this.gh=new Map,this.jh=[],this.Sh=new Map,this.Oh=[],this.Eh=new Map,this.Th=new Map,this.Rh=new Map,this.he=null,this.ce=null,this.Mh=null,this.Nh=null,this.wr=e.type,this.kh=e.barrierFree,this.Ah=!1,this.Ih=null,this.Ph=10,this.Dh=2,this.Lh()});var Pn=(Object.assign(cr.prototype,{Lh:function(){this.hh&&(this.Fh(),this.Ch(),this.Bh(this.wh,this.Th),this.Bh(this.xh,this.Rh))},Fh:function(){for(var t=0;t<this.hh.length;t++){var e=null,i=null,r=(e=null==this.wr||0===this.wr?(i=this.hh[t].accessible,this.hh[t].navi):this.hh[t].drive,""==this.hh[t].bid?null:this.hh[t].bid),n=this.hh[t].gid;e=this.Uh(e,n,r),i=this.Uh(i,n,r);(n=this.jh).push.apply(n,En(e)),(n=this.Oh).push.apply(n,En(i)),null==this.bh[r]&&(this.bh[r]=[]),(n=this.bh[r]).push.apply(n,En(e)),null==this.dh[r]&&(this.dh[r]=[]),(n=this.dh[r]).push.apply(n,En(i))}for(var o=0;o<this.jh.length;o++)this.jh[o].xn=o,this.Sh.set(o,this.jh[o]);for(var s=0;s<this.Oh.length;s++)this.Oh[s].xn=s,this.Eh.set(s,this.Oh[s])},Uh:function(t,e,i){if(null==t)return[];for(var r=[],n=0;n<t.length;n++){var o=t[n];o.level=e,o.bid=i,r.push(o)}return r},Ch:function(){this.wh=this.Gh(this.Sh),this.xh=this.Gh(this.Eh,!0);for(var t=0;t<this.wh.length;t++)this.wh[t].xn=t,this._h.set(t,this.wh[t]);for(var e=0;e<this.xh.length;e++)this.xh[e].xn=e,this.gh.set(e,this.xh[e])},Gh:function(t,e){for(var i=[],r=Array.from(t.keys()),n=0;n<r.length;n++)for(var o=n+1;o<r.length;o++){var s,a=r[n],u=r[o],h=t.get(a),l=t.get(u);t.get(a).flag==t.get(u).flag&&(s=this.Wh(h,l),i.push(s)),t.get(a).bid==t.get(u).bid&&this.Zh(h,l,e)&&(s=this.Wh(h,l),i.push(s))}return i},Wh:function(t,e){var i,r,n,o=0,s={};return s.startPoint=t.xn,s.endPoint=e.xn,s.xn=null,t.bid==e.bid?(i={x:t.pts[0],y:t.pts[1]},r={x:e.pts[0],y:e.pts[1]},o=0!=(n=Math.abs(t.level-e.level)*this.Ph)||t.extentID!==e.extentID?(At.distance(i,r)+n)*this.Dh:At.distance(i,r)+n,s.dist=Number(o.toFixed(5))):s.dist=o,s},Zh:function(t,e,i){var r=t.bid,n=this.Vh(t),o=this.Vh(e);return(t.extentID=n)==(e.extentID=o)||(i?this.yh:this.lh).get(r).rs(n,o)===a.ROUTE_SUCCESS},Vh:function(t){for(var e,i=null==(e=this.lh.get(t.bid).Go)?void 0:e.We,r=0;r<i.length;r++){var n=i[r].Ko,o=i[r].Zi;if(t.level===o&&(o={x:t.pts[0],y:t.pts[1]},n.Ae(o)))return n.ve}return 0},Yh:function(t){this.he=this.ph;var e,i=t.buildingID||null,r=[],n={type:null,pts:[t.x,t.y],bid:i,level:t.level,xn:this.he};if(null==(e=(this.kh?this.dh:this.bh)[i])||0==e.length)return!1;for(var o,s=0;s<e.length;s++)this.Zh(n,e[s])&&(o=this.Wh(n,e[s]))&&(o.xn=this.mh,r.push(o),(this.kh?(this.xh.push(o),this.gh):(this.wh.push(o),this._h)).set(this.mh,o),--this.mh);return this.kh?(this.Oh.push(n),this.Eh.set(this.he,n),this.Bh(r,this.Rh)):(this.jh.push(n),this.Sh.set(this.he,n),this.Bh(r,this.Th)),--this.ph,!0},Xh:function(t){this.ce=this.ph;var e,i=t.buildingID||null,r=[],n={type:null,pts:[t.x,t.y],bid:i,level:t.level,xn:this.ce};if(null==(e=(this.kh?this.dh:this.bh)[i])||0==e.length)return!1;this.jh.push(n),this.Sh.set(this.ce,n);for(var o,s=0;s<e.length;s++)this.Zh(n,e[s])&&(o=this.Wh(n,e[s]))&&(o.xn=this.mh,r.push(o),(this.kh?(this.xh.push(o),this.gh):(this.wh.push(o),this._h)).set(this.mh,o),--this.mh);return this.kh?(this.Oh.push(n),this.Eh.set(this.ce,n),this.Bh(r,this.Rh)):(this.jh.push(n),this.Sh.set(this.ce,n),this.Bh(r,this.Th)),--this.ph,!0},Bh:function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=r.startPoint,o=r.endPoint;e.has(n)||e.set(n,new Map),e.get(n).set(o,r.dist),e.has(o)||e.set(o,new Map),e.get(o).set(n,r.dist)}return e},qh:function(t,e,i){var r=null,n=null;if(this.kh){if(!this.Rh.has(t))return!1;for(var o=0;o<e.length;o++)if(!this.Rh.has(e[o]))return!1;r=this.Eh,n=this.Rh}else{if(!this.Th.has(t))return!1;for(var s=0;s<e.length;s++)if(!this.Th.has(e[s]))return!1;r=this.Sh,n=this.Th}this.ss(e,t);var a,u=e.length,h=0,l=Bn(r.keys());try{for(l.s();!(a=l.n()).done;){var c=a.value;if(r.get(c).$i=c==t?0:Number.MAX_VALUE,r.get(c).te=!1,r.get(c).re=[],i instanceof Array)for(var f=0;f<i.length;f++){if(c!=i[f]&&r.get(c).flag===r.get(i[f]).flag){-1==i.indexOf(c)&&i.push(c);break}if(i.length>=r.size)return!1}}}catch(t){l.e(t)}finally{l.f()}var A=[];for(A.push(t);0<A.length;){var p=A[0],d=(A.splice(0,1),r.get(p));if(!d.te){if(d.te=!0,-1!=e.indexOf(p)&&++h==u)return!0;var m=n.get(p);if(m){var y,g=Bn(m.keys());try{for(g.s();!(y=g.n()).done;){var v=y.value,b=d.$i+m.get(v),w=r.get(v);i instanceof Array&&i.includes(v)||w.te||w.$i>b&&(w.$i=b,w.re=[],w.re.push(p),A.push(v))}}catch(t){g.e(t)}finally{g.f()}A.sort(function(t,e){r.get(t).$i,r.get(e).$i})}}}return!(h<u)},ss:function(t,e){for(var i=t.indexOf(e);-1!=i;)t.splice(i,1),i=t.indexOf(e)},Jo:function(){if(this.kh){if(!this.Rh.has(this.he))return a.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.Rh.has(this.ce))return a.ROUTE_FAILED_CANNOT_CALCULATE}else{if(!this.Th.has(this.he))return a.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.Th.has(this.ce))return a.ROUTE_FAILED_CANNOT_CALCULATE}var t=[];return t.push(this.ce),this.qh(this.he,t)?a.ROUTE_SUCCESS:a.ROUTE_FAILED_CANNOT_ARRIVE},ns:function(){var t=[],e=[];e.push(this.ce),this.es(e,t);for(var i=0;i<t.length;i++)t[i].paths.reverse();return t},es:function(t,e){for(var i=0;i<t.length;i++){var r={paths:[],distance:0};r.paths.push(t[i]),this.hs(t[i],r),e.push(r)}},hs:function(t,e){var i=null,r=null;if(this.kh){if(0==this.Eh.get(t).re.length)return;i=this.Eh.get(t).re[0],r=this.Eh.get(t).$i}else{if(0==this.Sh.get(t).re.length)return;i=this.Sh.get(t).re[0],r=this.Sh.get(t).$i}null!=i&&(e.paths.push(i),e.distance+=r),this.hs(i,e)},Hh:function(t){var e,i=new Map,r=Bn(t.keys());try{for(r.s();!(e=r.n()).done;){for(var n=e.value,o=At.Ct(t.get(n)),s=(o.bid=n,0),a=0;a<t.get(n).length;a++)s+=t.get(n)[a].level;s=Math.floor(s/t.get(n).length),o.level=s,i.set(n,o)}}catch(t){r.e(t)}finally{r.f()}return i},Qh:function(t){var e,i=null,r=null,n=[],o=Bn(t.keys());try{for(o.s();!(e=o.n()).done;){var s=e.value,a=this.Kh(t.get(s));a.bid==this.Mh?i=a:a.bid==this.Nh?r=a:n.push(a)}}catch(t){o.e(t)}finally{o.f()}return null!=i&&n.unshift(i),null!=r&&n.push(r),n},Kh:function(t){for(var e,i=t.bid||null,r=[],n={type:null,pts:[t.x,t.y],bid:t.bid,level:t.level,xn:this.ph},o=(this.kh?this.dh:this.bh)[i],s=0;s<o.length;s++)this.Zh(n,o[s])&&(e=this.Wh(n,o[s]))&&(e.xn=this.mh,r.push(e),(this.kh?(this.xh.push(e),this.gh):(this.wh.push(e),this._h)).set(this.mh,e),--this.mh);return this.kh?(this.Oh.push(n),this.Eh.set(this.ph,n),this.Bh(r,this.Rh)):(this.jh.push(n),this.Sh.set(this.ph,n),this.Bh(r,this.Th)),--this.ph,n},Jh:function(){if(!this.hh||0===this.hh.length)return null;var t=null;if(this.Ah){for(var e=this.Hh(this.Ih),i=this.Qh(e),r=[],n=1;n<i.length-1;n++)r.push(i[n].xn);var o=[e=i[0].xn],s=[],a=i[i.length-1].xn;if(this.$h(e,r,o,s),this.$h(o[o.length-1],[a],o,s),o.length==i.length)return this.tc(s)}return t},tc:function(t){for(var e=[],i=-1,r=[],n=0;n<t.length;n++)for(var o,s=t[n].paths,a=null,u=0;u<s.length;u++)0<s[u]&&(o=s[u],a=this.Sh.get(o),-1==i&&(i=a.bid),a.bid==i?r.push(a):(e.push({bid:i,entrances:r}),r=[a]),i=a.bid),n==t.length-1&&u==s.length-1&&a&&e.push({bid:a.bid,entrances:r});return e},$h:function(t,e,i,r){if(0!=e.length){for(var n,o=null,s=Number.MAX_VALUE,a=null,u=0,h=0;h<e.length;h++)this.qh(t,[e[h]])&&(this.hs(e[h],n={paths:[],distance:0}),n.distance<s)&&(s=n.distance,o=e[h],a=n,u=h);o&&(i.push(o),a.paths.reverse(),r.push(a),e.splice(u,1),this.$h(o,e,i,r))}},li:function(){this.jh=this.jh.filter(function(t){return 0<=t.xn}),this.Oh=this.Oh.filter(function(t){return 0<=t.xn}),this.wh=this.wh.filter(function(t){return 0<=t.xn}),this.xh=this.xh.filter(function(t){return 0<=t.xn});var t,e=Bn(this.Sh.keys());try{for(e.s();!(t=e.n()).done;){var i=t.value;i<0&&this.Sh.delete(i)}}catch(t){e.e(t)}finally{e.f()}var r,n=Bn(this.Eh.keys());try{for(n.s();!(r=n.n()).done;){var o=r.value;o<0&&this.Eh.delete(o)}}catch(t){n.e(t)}finally{n.f()}var s,a=Bn(this._h.keys());try{for(a.s();!(s=a.n()).done;){var u=s.value;u<0&&this._h.delete(u)}}catch(t){a.e(t)}finally{a.f()}var h,l=Bn(this.gh.keys());try{for(l.s();!(h=l.n()).done;){var c=h.value;c<0&&this.gh.delete(c)}}catch(t){l.e(t)}finally{l.f()}var f,A=Bn(this.Th.keys());try{for(A.s();!(f=A.n()).done;){var p=f.value;if(p<0)this.Th.delete(p);else{var d,m=Bn(this.Th.get(p).keys());try{for(m.s();!(d=m.n()).done;){var y=d.value;y<0&&this.Th.get(p).delete(y)}}catch(t){m.e(t)}finally{m.f()}}}}catch(t){A.e(t)}finally{A.f()}var g,v=Bn(this.Rh.keys());try{for(v.s();!(g=v.n()).done;){var b=g.value;if(b<0)this.Rh.delete(b);else{var w,x=Bn(this.Rh.get(b).keys());try{for(x.s();!(w=x.n()).done;){var M=w.value;M<0&&this.Rh.get(b).delete(M)}}catch(t){x.e(t)}finally{x.f()}}}}catch(t){v.e(t)}finally{v.f()}this.ph=-1,this.mh=-1}}),cr);function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dn(t){return function(t){if(Array.isArray(t))return Un(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||In(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=In(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function In(t,e){var i;if(t)return"string"==typeof t?Un(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Un(t,e):void 0}function Un(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Ln(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===On(t=function(t,e){if("object"!==On(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==On(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(t,e,i){return e&&Ln(t.prototype,e),i&&Ln(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Er=null,this.Ht=null,this.Qt=null,this.zo=null,this.vf=null,this.wr=null,this.yf=new Map,this.rc=new Map,this.jn=a.ROUTE_FAILED_CANNOT_ARRIVE,this.nc=[],this.ic=null,this.ec=[],this.Cf=null,this.Uf=[],this.Bf=!1,this.barrierFree=!1,this.Yf=[],this.oc=null});var kn=(Object.assign(cr.prototype,{Ai:function(t){this.Er=t,this.wr=t.type,this.oc=t.bid||null;var e,i=new Map,r=Rn(this.rc.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;i.set(n,this.rc.get(n).df)}}catch(t){r.e(t)}finally{r.f()}var o,s=new Map,a=Rn(this.rc.keys());try{for(a.s();!(o=a.n()).done;){var u=o.value;s.set(u,this.rc.get(u).pf)}}catch(t){a.e(t)}finally{a.f()}t={gate:this.Er.gate,bidToOutline:i,bidToOutlineAccess:s,type:this.wr,barrierFree:this.barrierFree},this.sc=new Pn(t)},$f:function(t,e,i,r){this.li(),t.buildingID=void 0!==t.buildingID?t.buildingID:this.oc,e.buildingID=void 0!==e.buildingID?e.buildingID:this.oc,this.Ht=t,this.Qt=e,this.zo=i,this.vf=r;var n=[];if(this.Ht.buildingID==this.Qt.buildingID){var o=[[{pts:[t.x,t.y],bid:t.buildingID||null,level:t.level},{pts:[e.x,e.y],bid:e.buildingID||null,level:e.level}]];if(this.jn=this.uc(o),this.jn==a.ROUTE_SUCCESS||this.jn==a.ROUTE_FAILED_NO_START_ARRIVAL||this.jn==a.ROUTE_FAILED_NO_DEST_ARRIVAL)return this.jn;if(null==this.sc)return this.jn}if(0==(o=this.fc(t,e)).length)this.jn=a.ROUTE_FAILED_ENTRANCE;else{for(var s=0;s<o.length;s++)n.push(o[s][0].bid);i=this.uc(o),this.jn=i}return this.jn},li:function(){this.jn=a.ROUTE_FAILED_CANNOT_ARRIVE,this.nc=[],this.ic=null,this.ec=[]},fc:function(t,e){var i=[];if(this.ac(t,e)===a.ROUTE_SUCCESS)for(var r=this.hc()[0],n=[],o=0;o<r.length-1;o++){var s=r[o],u=r[o+1];0===n.length&&n.push(s),s.bid===u.bid?(n.push(u),o==r.length-2&&i.push(n)):(i.push(n),n=[])}return i},uc:function(t){var e,i=new Map,r=new Map;null!=(e=this.sc)&&e.bh&&(r=this.sc.bh);for(var n=0;n<t.length;){if(t[n].length<=1)return a.ROUTE_FAILED_CANNOT_ARRIVE;for(var o=0;o<t[n].length-1;o++){var s,u=((s={}).x=t[n][o].pts[0],s.y=t[n][o].pts[1],s.level=t[n][o].level,t[n][o].xn),h={},l=(h.x=t[n][o+1].pts[0],h.y=t[n][o+1].pts[1],h.level=t[n][o+1].level,t[n][o+1].xn),c=t[n][o].bid;if((s=(this.rc.get(c),this.cc(s,h,c)))===a.ROUTE_SUCCESS){if(h=this.lc(c),this.ec.push({bid:c,result:h}),o===t[n].length-2){n+=1;break}}else{if(h=r[c],1==t.length)return s;if(n==t.length-1){var f=t[n-1][o].xn,A=l,p=(i[c]=i[c]||[],i[c].push(u),i[c]);if(p.length===h.length)return s;if((f=this.vc(f,[A],p)).length<=1)return s;t.splice(n,1),t.splice(n-1,1),t.splice.apply(t,[n-1,0].concat(Dn(f))),n-=1,this.ec.pop();break}if(A=u,p=t[n+1][o+1].xn,i[c]=i[c]||[],i[c].push(l),(f=i[c]).length===h.length)return s;var d=this.vc(A,[p],f);if(!(1<d.length)){if(i[c].pop(),n<1)return s;var m=t[n-1][o].xn;if((u=(i[c]=i[c]||[],i[c].push(u),i[c])).length===h.length)return s;if((c=this.vc(m,[l],u)).length<=1)return s;t.splice(n,1),t.splice(n-1,1),t.splice.apply(t,[n-1,0].concat(Dn(c))),n-=1,this.ec.pop();break}t.splice(n+1,1),t.splice(n,1),t.splice.apply(t,[n,0].concat(Dn(d)))}}}return a.ROUTE_SUCCESS},vc:function(t,e,i){var r=[],n=[],o=[],s=[];if(this.sc.qh(t,e,i)){this.sc.es(e,r);for(var a=0;a<r.length;a++)r[a].paths.reverse();for(var u=0;u<r.length;u++){for(var h=[],l=0;l<r[u].paths.length;l++)this.barrierFree?h.push(this.sc.Eh.get(r[u].paths[l])):h.push(this.sc.Sh.get(r[u].paths[l]));n.push(h)}for(var c=n[0],f=0;f<c.length-1;f++){var A=c[f],p=c[f+1];0===o.length&&o.push(A),A.bid===p.bid?(o.push(p),f==c.length-2&&s.push(o)):(s.push(o),o=[])}}return s},cc:function(t,e,i){return(i=this.rc.get(i=void 0===i?null:i)).barrierFree=this.barrierFree,i.Bf=this.toDoors,i.$f(t,e,this.zo,this.vf)},yc:function(){return this.ec},bc:function(t){for(var e=[],i=0;i<t.length;i++){var r=this.lc(t[i]);e.push({bid:t[i],result:r})}return e},lc:function(t){var e=(t=this.rc.get(t=void 0===t?null:t)).aa();return this.Cf=t.Cf,e},ac:function(t,e){var i=a.ROUTE_FAILED_CANNOT_ARRIVE;return this.sc.li(),this.sc.kh=this.barrierFree,this.sc.Yh(t)&&this.sc.Xh(e)?this.sc.Jo():i},hc:function(){for(var t=this.sc.ns(),e=[],i=0;i<t.length;i++){for(var r=[],n=0;n<t[i].paths.length;n++)this.barrierFree?r.push(this.sc.Eh.get(t[i].paths[n])):r.push(this.sc.Sh.get(t[i].paths[n]));e.push(r)}return e},va:function(t,e){var i=void 0!==t.buildingID?t.buildingID:this.oc;return(i=this.rc.get(i).va(t,e))&&void 0!==t.buildingID&&(i.coords.buildingID=t.buildingID),i},vu:function(t){for(var e=new Map,i=0;i<t.length;i++){var r=t[i],n=e.get(r.oc);n||e.set(r.oc,n=[]),n.push(r)}var o,s=Rn(e.keys());try{for(s.s();!(o=s.n()).done;){var a=o.value;this.rc.get(a).vu(t)}}catch(t){s.e(t)}finally{s.f()}},uu:function(){for(var t in this.Uf){var e=parseInt(t);t=((e=this.rc.get(e)).Uf=this.Uf[t],e.uu(),e.aa());(e=this.ec).push.apply(e,Dn(t))}},qf:function(t,e,i,r){this.Ht=t,this.Qt=e,this.zo=i,this.vf=r;for(var n=!1,o=0;o<this.Yf.length;o++)this.Yf[o].Ks=!0,this.Yf[o].order?n=!0:n&&(this.Yf[o].order=Number.MAX_VALUE);n&&this.Yf.sort(function(t,e){return t.order-e.order}),this.Yf.unshift(t),this.Yf.push(e);for(var s=0;s<this.Yf.length;s++)this.Yf[s].buildingID=void 0!==this.Yf[s].buildingID?this.Yf[s].buildingID:this.oc;return n?this.dc(this.Yf):(i=this.mc(this.Yf),r=null,this.sc&&(this.sc.Ih=i,this.sc.Ah=!0,this.sc.Mh=t.buildingID,this.sc.Nh=e.buildingID,r=this.sc.Jh()),this.wc(t,e,r,this.Yf))},mc:function(t){for(var e=new Map,i=0;i<t.length;i++){var r=t[i].buildingID||null;e.has(r)||e.set(r,[]),e.get(r).push(t[i])}return e},wc:function(t,e,i,r){var n=[],o=null;if(r.shift(),r.pop(),i)for(var s=this.mc(r),u=0;u<i.length;u++){var h,l,c,f,A,p=i[u].bid;if(0==u?(l={x:i[u].entrances[0].pts[0],y:i[u].entrances[0].pts[1],level:i[u].entrances[0].level},s.has(p)?(h=s.get(p),o=this.xc(t,l,p,h),s.delete(p)):o=this.cc(t,l,p)):u==i.length-1?(h={x:i[u].entrances[0].pts[0],y:i[u].entrances[0].pts[1],level:i[u].entrances[0].level},s.has(p)?(l=s.get(p),o=this.xc(h,e,p,l),s.delete(p)):o=this.cc(h,e,p)):(c={x:i[u].entrances[0].pts[0],y:i[u].entrances[0].pts[1],level:i[u].entrances[0].level},f={x:i[u].entrances[1].pts[0],y:i[u].entrances[1].pts[1],level:i[u].entrances[1].level},s.has(p)?(A=s.get(p),o=this.xc(c,f,p,A),s.delete(p)):o=this.cc(c,f,p)),o!==a.ROUTE_SUCCESS)break;m=this.lc(p),n.push({bid:p,result:m})}else{var d=t.buildingID||null,m=(o=this.xc(t,e,d,r),this.lc(d));n.push({bid:d,result:m})}return this.ec=n,this.jn=o},dc:function(t){for(var e,i=[],r=null,n=null,o=0;o<t.length-1;o++)if(t[o].buildingID==t[o+1].buildingID){var s=t[o].buildingID;if((r=this.toDoors&&0<o?(A=(n=e).result[n.result.length-1].Yi,(p=t[o]).x=A[A.length-1].x,p.y=A[A.length-1].y,this.cc(p,t[o+1],s)):this.cc(t[o],t[o+1],s))!=a.ROUTE_SUCCESS)return r;if(e={bid:s,result:this.lc(s)},0<i.length){if(e.bid===i[i.length-1].bid)for(var u,h=i[i.length-1].result.length,l=i[i.length-1].result[h-1],c=!0,f=0;f<e.result.length;f++)l.Zi==e.result[f].Zi&&1<e.result[f].zi.length&&c?(i[i.length-1].result[h-1].Vi+=e.result[f].Vi,e.result[f].zi.shift(),e.result[f].Yi.shift(),(u=i[i.length-1].result[h-1].zi).push.apply(u,Dn(e.result[f].zi)),(u=i[i.length-1].result[h-1].Yi).push.apply(u,Dn(e.result[f].Yi))):(c=c&&!1,i[i.length-1].result.push(e.result[f]))}else i.push(e)}else{var A,p,d=this.toDoors&&0<o?(A=(n=e[e.length-1]).result[n.result.length-1].Yi,(p=t[o]).x=A[A.length-1].x,p.y=A[A.length-1].y,this.fc(p,this.Yf[o+1])):this.fc(this.Yf[o],this.Yf[o+1]);if((r=this.uc(d))!=a.ROUTE_SUCCESS)return r;for(var m=[],y=0;y<d.length;y++)m.push(d[y][0].bid);e=this.bc(m),i.push.apply(i,Dn(e))}return this.ec=i,this.jn=r},xc:function(t,e,i,r){return(i=this.rc.get(i)).Yf=r,i.barrierFree=this.barrierFree,i.Bf=this.toDoors,i.zo=this.zo,i.vf=this.vf,r=i.qf(t,e),i.Yf=null,r},Mr:function(){this.Er=null,this.ec=null,this.nc=null,this.ic=null;var t,e=Rn(this.rc.keys());try{for(e.s();!(t=e.n()).done;){var i=t.value;this.rc.get(i).Mr()}}catch(t){e.e(t)}finally{e.f()}}}),cr);function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=zn(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nn(t){return function(t){if(Array.isArray(t))return Hn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(t,e){var i;if(t)return"string"==typeof t?Hn(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Hn(t,e):void 0}function Hn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Vn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===jn(t=function(t,e){if("object"!==jn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==jn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(){function t(e,i,r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Er=Object.assign({tile:!0,isPreview:!1},e),this._c=new Map,this.gc=null,this.jc=[],this.Sc=[],this.Oc=[],this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0,this.load_cnt=0,this.sc=null,this.Ec=void 0!==e.mapID?e.mapID:null,this.Tc=null,this.Oi=!!e.map,this.Ei=e.map?e.map.getDataManager():new Hi,this.Rc=1,this.Mc={radius:.5,dash:{size:4,gap:2}},this.Mi=i,this.Ni=r,this.wr=e.type,this.Nc=new Map,this.kc=new Map,this.ki=$i.generateUUID(),this.Ac=null,this.Ai()}var e,i;return e=t,(i=[{key:"setObstructions",value:function(t){this.gc&&this.gc.vu(t)}},{key:"route",value:function(t,e,i){this.gc.toDoors=void 0!==t.toDoors&&t.toDoors,this.gc.obstruct=void 0===t.obstruct||t.obstruct,this.gc.barrierFree=void 0!==t.barrierFree&&t.barrierFree;var r;if((r=t.viapoints&&0<t.viapoints.length?(this.gc.Yf=t.viapoints,this.gc.qf(t.start,t.dest,t.mode||o.MODULE_SHORTEST,t.priority||s.PRIORITY_DEFAULT)):this.gc.$f(t.start,t.dest,t.mode||o.MODULE_SHORTEST,t.priority||s.PRIORITY_DEFAULT))===a.ROUTE_SUCCESS){this.jc=this.gc.yc();var n=null,h=null;this.Sc=[];for(var l=0;l<this.jc.length;l++)0<l&&(n=this.Er.bidToName.get(this.jc[l-1].bid)?this.Er.bidToName.get(this.jc[l-1].bid):"outdoor"),l<this.jc.length-1&&(h=this.Er.bidToName.get(this.jc[l+1].bid)?this.Er.bidToName.get(this.jc[l+1].bid):"outdoor"),this.jc[l].fh=n,this.jc[l].ah=h,h=n=null,this.jc[l].buildingName=this.Er.bidToName.get(this.jc[l].bid),this.Sc.push([this.Ic(this.jc[l],{language:u.ZH}),this.Ic(this.jc[l],{language:u.EN})]);this.Tc=this.gc.Cf,e&&e(this.Gi())}else i&&i(r)}},{key:"dispose",value:function(){this.Pc=null,this.jc=[],this.Sc=[],this.gc&&(this.gc.Mr(),this.gc=null)}},{key:"pathConstraint",value:function(t,e){return this.gc?this.gc.va(t,e):null}},{key:"getNaviGraph",value:function(t){var e=t.buildingID;t=t.level;return null!=e?null!=t?this.gc.yf.get(e).get(t):this.gc.yf.get(e):null!=t?this.gc.yf.get(null).get(t):Nn(this.gc.yf.values())}},{key:"query",value:function(t,e,i,r){var n=[],o=i?this.gc.rc.get(i):this.gc.rc.get(null),s=r?o.bf:o.yf;if(s){if(null==t){var a,u=Qn(s.keys());try{for(u.s();!(a=u.n()).done;){var h=a.value;n.push({level:h,roadRanks:e,roadVector:s.get(h).Ze.slice(0)})}}catch(t){u.e(t)}finally{u.f()}}else if(null==e)n.push({level:t,roadRanks:e,roadVector:s.get(t).Ze.slice(0)});else{for(var l=[],c=s.get(t).Ze,f=0;f<e.length;f++)for(var A=0;A<c.length;A++)c[A].de===e[f]&&l.push(c[A]);n.push({level:t,roadRanks:e,roadVector:l})}for(var p=0;p<n.length;p++)for(var d=0;d<n[p].roadVector.length;d++)n[p].roadVector[d]=Object.assign({},this.Dc(n[p].roadVector[d])),i&&(n[p].roadVector[d].buildingID=i)}return n}},{key:"intersectionRoadsByCircle",value:function(t,e,i){var r;if(!i||!i.roadVector||i.roadVector.length<=0)return null;var n,o=null==i.roadVector[0].buildingID?null:i.roadVector[0].buildingID,s={center:t,radius:e,points:[]},a=t.x-e,u=t.x+e,h=t.y-e,l=t.y+e,c=[],f=new Map,A=Qn(i.roadVector);try{for(A.s();!(n=A.n()).done;){var p,d=n.value,m=At.Bt(t,e,d.startPoint,d.endPoint);if(!(m.length<1)){var y=d.roadEntry,g=d.endId;if(At.distance(d.endPoint,t)>e&&((y=y===nr.Entry_FORWARD?ur:y)===nr.Entry_BACK&&(y=ar),g=d.startId),y===ar||y===sr){var v,b=Qn(m);try{for(b.s();!(v=b.n()).done;){var w=v.value;w.direction=y,w.Lc=g}}catch(t){b.e(t)}finally{b.f()}(p=s.points).push.apply(p,Nn(m)),d.startPoint.x>=a&&d.startPoint.x<=u&&d.startPoint.y>=h&&d.startPoint.y<=l&&c.push(d.startId),d.endPoint.x>=a&&d.endPoint.x<=u&&d.endPoint.y>=h&&d.endPoint.y<=l&&c.push(d.endId)}}}}catch(t){A.e(t)}finally{A.f()}i=i.level;for(var x=(null==(r=this.gc.rc)?void 0:r.get(o)).yf.get(i).He,M=0,_=c;M<_.length;M++){var S=_[M];f.set(S,x.get(S))}var B,E=Qn(s.points);try{for(E.s();!(B=E.n()).done;){var C=B.value;C.branch=this.Fc(f,C.Lc,t.nodeID)}}catch(t){E.e(t)}finally{E.f()}return s}},{key:"queryNode",value:function(t){var e=t.buildingID?this.gc.rc.get(buildingID):this.gc.rc.get(null);if(null!=e){var i=(e=(t.barrierFree?e.bf:e.yf).get(t.level)).io(t.point);if(!(i<=0))for(var r=e.Ze,n=new Set,o=0;o<r.length;o++)if(i===r[o].ve){if(!n.has(r[o].he)&&At._compare(t.point,r[o].Ht))return t.nodeID=r[o].he,t;if(!n.has(r[o].ce)&&At._compare(t.point,r[o].Qt))return t.nodeID=r[o].ce,t;n.add(r[o].he),n.add(r[o].ce)}}return null}},{key:"constraintTrack",value:function(t){var e=[];if(!(null==t||t.length<=0)){for(var i=new Map,r=0;r<t.length;r++){var n=void 0===t[r].coords.buildingID?null:t[r].coords.buildingID;i.has(n)?i.get(n).push(t[r]):i.set(n,[t[r]])}if(!(i.size<=0)){var o,s=Qn(i.keys());try{for(s.s();!(o=s.n()).done;){for(var a=o.value,u=i.get(a),h=new Set,l=new Set,c=0;c<u.length;c++)h.add(u[c].coords.level),l.add(u[c].road.roadRank);if(h.size<=0)return e;var f=Array.from(h),A=Array.from(l);this.Cc(f,A,a)}}catch(t){s.e(t)}finally{s.f()}for(var p=t.length-1,d=0;d<p;d++){var m=this.Bc(t[d],t[d+1]);e.push(t[d].coords),e.push.apply(e,Nn(m)),d+1==p&&e.push(t[d+1].coords)}}}return e}}])&&Vn(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Gn=(Object.assign(cr.prototype,{Ai:function(){this.Oi&&(t=this.Er.map.getMapOptions(),this.Er.mapID=t.mapID,this.Er.appName=t.appName,this.Er.key=t.key,this.Er.license=t.license,this.Er.mapURL=t.mapURL,this.Er.mapURLAbsolute=t.mapURLAbsolute,this.Er.navigationData=t.navigationData,this.Er.buildingOptions=t.buildingOptions,this.Er.type=this.wr);var t={buildingID:this.Er.mapID,appName:this.Er.appName,key:this.Er.key,license:this.Er.license,mapURL:this.Er.mapURL,mapURLAbsolute:this.Er.mapURLAbsolute,buildingOptions:this.Er.buildingOptions,navigationData:this.Er.navigationData,merge:this.Er.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,tile:this.Er.tile,type:this.Er.type,bid:this.Er.buildingID||null,gate:null,isOutdoor:!0,uuid:this.ki};this.Ec||(this.Ec=this.Er.mapID),this._c.set(t.bid,t),this.Er.bidToMid=new Map,this.Er.bidToName=new Map,this.Er.bidToMid.set(t.bid,this.Ec),this.gc=new kn,this.Li(t)},Li:function(t){var e=this;setTimeout(function(){t.tile?e.Ei.load(t,function(i,r){e.Fi(i,r,t)}):e.Ei.loadWhole(t,function(i,r){e.Fi(i,r,t)})},0)},Fi:function(t,e,i){if("error"===t)this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1;else if("scene"===t&&e.naviType&&"undefined"!=e.naviType&&0!=e.naviType){this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0;var r=e.naviType;1===r?(this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1):(8<=r&&(r-=8),this.isExistAccess=!1,4<=r?r-=4:this.wr===or.Drive&&(this.isExistDrive=!1),r<=0&&!this.isExistAccess&&this.wr===or.Walk&&(this.isExistNavi=!1)),this.load_cnt++,this.isExistAccess||this.isExistNavi||this.wr!==or.Walk?this.isExistDrive||this.wr!==or.Drive||this.Oc.push({buildingID:i.buildingID,error:"NONE_DRIVE_RODE_NETWORK",data:l.NONE_DRIVE_RODE_NETWORK}):this.Oc.push({buildingID:i.buildingID,error:"NONE_WALK_RODE_NETWORK",data:l.NONE_WALK_RODE_NETWORK})}else if("decode"===t){(r=new bn(i)).Ai(e),this.gc.rc.set(i.bid,r),this.gc.yf.set(i.bid,r.yf),e.gate&&(this.Ac=e.gate.floors);for(var n=0;n<(null==(o=e.scene.buildings)?void 0:o.length);n++){var o=e.scene.buildings[n],s=((s={mapID:this.Er.mapID,buildingID:null,appName:this.Er.appName,key:this.Er.key,license:this.Er.license,mapURL:this.Er.mapURL,mapURLAbsolute:this.Er.mapURLAbsolute,merge:this.Er.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.Er.tile,type:this.Er.type,bid:null,isOutdoor:!1,uuid:this.ki}).buildingID=o.mid,s.bid=o.bid,Object.assign({},s));this._c.set(o.bid,s),this.Er.bidToMid.set(o.bid,o.mid),this.Er.bidToName.set(o.bid,o.name),this.Li(s)}this.gc.rc.size===this.Er.bidToMid.size&&(null!=this.Ac&&this.gc.Ai(Object.assign(this.Er,{gate:this.Ac})),0!==this.load_cnt&&this.Oc.length>=this.load_cnt?this.Ni&&this.Ni({result:this.Oc}):(this.Oc={state:t,error:"0",data:null},this.Mi&&this.Mi()))}},Gi:function(){for(var t={buildings:[],distance:0,subs:[],viapoints:[]},e=0;e<this.jc.length;e++){var i,r={buildingID:null,buildingName:null,levels:[],distance:0},n=this.jc[e].bid,o=this.jc[e].buildingName,s=this.Uc(this.jc[e],this.Sc[e],n),a=(r.levels=s.levels,r.distance=s.distance,t.distance+=r.distance,e!==this.jc.length-1&&s.subs[s.subs.length-1]&&(s.subs[s.subs.length-1].transfer=h.TRANSFER_ENTRANCE),r.buildingID=n==this.Ec?null:n,r.buildingName=o||null,Qn(s.subs));try{for(a.s();!(i=a.n()).done;){var u=i.value;u.buildingID=r.buildingID,u.buildingName=r.buildingName}}catch(t){a.e(t)}finally{a.f()}t.buildings.push(r),(n=t.subs).push.apply(n,Nn(s.subs)),(o=t.viapoints).push.apply(o,Nn(s.viapoints))}return t},Uc:function(t,e,i){if(0==t.length||0==e.length)return null;for(var r={viapoints:[],subs:[],levels:[],distance:0},n=e[0].descriptions,o=e[0].descriptionsData,s=e[1].descriptions,a=e[1].descriptionsData,u=e[0].ladderList,h=0,l=[],c=!1,f=[],A=0;A<o.length;A++){var p={instruction:{zh:null,en:null},waypoint:{points:null,direction:{zh:null,en:null}},viapoint:null,levels:null,distance:Number.NaN,buildingID:null},d=n[A],m=o[A],y=s[A],g=a[A];d=(p.instruction.zh=d,p.instruction.en=y,p.levels=[m.startLevel,m.endLevel],p.distance=void 0!==m.distance?m.distance:0,p.waypoint.direction.zh=[m.startDirection,m.endDirection||m.startDirection],p.waypoint.direction.en=[g.startDirection,g.endDirection||g.startDirection],p.levels[0]!=p.levels[1]?(c=!0,l.push.apply(l,Nn(p.levels)),p.transfer=u[h],h+=1):0!=l.length&&l.slice(-1)[0]==p.levels[0]&&!c||(l.push(p.levels[0]),c=!1),this.Gc([m.startIndex,m.endIndex],l,t.result));p.waypoint.points=d.points,d.via&&-1==f.indexOf(d.via)&&(p.viapoint=Object.assign({},d.via.pr),r.viapoints.push(Object.assign({},d.via.pr)),f.push(d.via)),r.distance+=p.distance,p.buildingID=i,r.subs.push(p)}for(var v=0;v<l.length;v++)0!=r.levels.length&&r.levels.slice(-1)[0]==l[v]||r.levels.push(l[v]);return r.door=this.Tc,r},Gc:function(t,e,i){for(var r=[],n=[],o=null,s=[],a=0;a<i.length;a++){var u=i[a];if(s.push(u.Zi),e.toString()==s.toString()){var h=e[e.length-1],l=u.Yi,c=u.zi;if(void 0===t[0]||void 0===t[1])r.push(Object.assign({level:u.Zi},u.Yi[0])),n.push(u.zi[0]),u=i[a-1],r.unshift(Object.assign({level:u.Zi},u.Yi[0])),n.unshift(u.zi[0]);else for(var f=t[0];f<=t[1];f++)r.push({x:l[f].x,y:l[f].y,level:h}),n.push(c[f]);break}}return n.forEach(function(t){t.Ks&&(o=t)}),{points:r,via:o}},Ic:function(t,e){var i=t.bid,r=t.result;return this.Wc(r)?(r=new _n(Object.assign({data:this.Ei.getDecode(this._c.get(i)),directionAssert:10,combineAsset:10,language:u.ZH},e)).uh(t),i=this.Zc(r[5]),{descriptions:r[0],descriptionsData:r[1],distance:r[2],distances:r[3],ladderList:i}):{}},Zc:function(t){for(var e=0;e<t.length;e++)switch(t[e]){case 1:t[e]=h.TRANSFER_LIFT;break;case 2:t[e]=h.TRANSFER_STAIR;break;case 3:t[e]=h.TRANSFER_ESCALATOR;break;case 4:t[e]=h.TRANSFER_ACCESSIBLE;break;case 5:t[e]=h.TRANSFER_RAMP;break;default:return}return t},Vc:function(t){this.gc.Uf=t,this.gc.uu(),this.jc=this._navi.aa()},Yc:function(){return this.jc},zc:function(t){var e=t||this.jc;if(!this.Wc(e))return[];var i,r=[];for(i in e)e[i].getPointList&&r.push.apply(r,Nn(e[i].pointList));return r},Xc:function(t){var e=t||this.jc;if(!this.Wc(e))return[];for(var i=[],r=0;r<e.length;r++){for(var n=e[r],o=n.level,s=n.pointList,a={level:o,points:[]},u=0;u<s.length;u++)a.points.push(Object.assign({},s[u]));i.push(a)}return i},qc:function(t){if(t=t||this.jc,!this.Wc(t))return 0;var e=this.zc(t);if(0==e.length)return 0;for(var i=0,r=0;r<e.length-1;r++)i+=At.dt(e[r],e[r+1]);return i},Hc:function(t){var e=t||this.jc;if(!this.Wc(e))return[];var i,r=[];for(i in e)!e[i].level||0!=i&&r[r.length-1]==e[i].level||r.push(e[i].level);return r},Qc:function(t,e){var i=e||this.jc;if(!this.Wc(i))return[];var r,n=[];for(r in i)i[r].level&&i[r].level==t&&(n=n.concat(i[r].pointList));return n},Wc:function(t){if(!Array.isArray(t))return!1;if(0==t.length)return!1;for(var e=0;e<t.length;e++)if(!(t[e]instanceof fr))return!1;return!0},Kc:function(t,e){if(0===t.length)return null;null==e&&(e={});for(var i=Object.assign({},this.Mc),r=(e&&e.style&&Object.assign(i,e.style),1===this.wr&&(i.color="#002FA7"),e&&e.height?e.height:this.Rc),n=[],o=0;o<t.length;o++)!function(){var e=(i=t[o]).pointList;if(0!==e.length){var i=i.level,s=[],a=(e.forEach(function(t){var e=parseFloat(""+t.x);t=parseFloat(""+t.y);s.push({x:e,y:t,z:r})}),e.length<2&&(a=parseFloat(""+e[0].x),e=parseFloat(""+e[0].y),s.push({x:a,y:e,z:r})),new fengmap.FMSegment);a.level=i,a.points=s,n.push(a)}}();return(i=new fengmap.FMLineMarker(Object.assign({segments:n},i))).passed=e&&e.passed?e.passed:this._linePassed,i},Dc:function(t){return{id:t.xn,startPoint:{x:t.Ht.x,y:t.Ht.y},endPoint:{x:t.Qt.x,y:t.Qt.y},startId:t.he,endId:t.ce,roadRank:t.de,roadEntry:t.pe}},Fc:function(t,e,i){if(0!=t.length&&null!=t.get(e)&&null!=t.get(i)){var r,n=new Map,o=Qn(t.keys());try{for(o.s();!(r=o.n()).done;){var s=r.value;n.set(s,!1)}}catch(t){o.e(t)}finally{o.f()}for(var a=[e];0<a.length;){var u=a[0];if(n.get(u))a.splice(0,1);else{if(n.set(u,!0),a.splice(0,1),u==i)return!1;var h=t.get(u);if(!h||2<h.length)return!0;for(var l=0;l<h.length;l++)a.push(h[l]._o)}}return!0}},Bc:function(t,e){var i=[];if(t.coords.buildingID==e.coords.buildingID&&t.coords.level==e.coords.level){var r=null==t.buildingID?null:t.buildingID,n=t.coords.level,o=this.Nc.get(r).get(n),s=t.road.id,a=e.road.id,u=o.get(s),h=(o=o.get(a),t.coords.buildingID),l=null==this.kc.get(h)?[]:this.kc.get(h);r=h?this.gc.rc.get(r):this.gc.rc.get(null);if(u!=o){for(var c=null,f=0;f<l.length;f++)if(l[f].level==n&&null!=l[f].ptsBwteenRoad){c=l[f].ptsBwteenRoad;break}null!=c&&null!=c.get(s)&&null!=c.get(s).get(a)?i=c.get(s).get(a):(u=r._multiFloorDijkstraMap.get(n),i=this.Jc(t,e,u),null==c?((c=new Map).set(s,new Map),c.get(s).set(a,i),l.push({level:n,ptsBwteenRoad:c}),this.kc.set(h,l)):(null==c.get(s)&&c.set(s,new Map),c.get(s).set(a,i)))}}return i},Cc:function(t,e,i,r){var n,o=new Map;if(null==(n=(i=null==i?null:i)?this.gc.rc.get(i):this.gc.rc.get(null)))return null;for(var s=r?n.bf:n.yf,a=0;a<t.length;a++){var u=t[a],h=s.get(u).Ze,l=[],c=void 0;if(null!=e&&0<e.length){for(var f=0;f<e.length;f++)for(var A=0;A<h.length;A++)h[A].de===e[f]&&l.push(h[A]);c=this.$c(l)}else c=this.$c(h);o.set(u,c)}this.Nc.set(i,o)},$c:function(t){for(var e=new Map,i=new Map,r=0,n=0;n<t.length;n++)i.set(t[n].xn,[0,0]),e.set(t[n].xn,-1);for(var o=0;o<t.length;o++){var s=t[o];if(1!=i.get(s.xn)[0]||1!=i.get(s.xn)[1]){for(var a=s.he,u=s.ce,h=new dr(s.Qt.x-s.Ht.x,s.Qt.y-s.Ht.y),l=o+1;l<t.length;l++){var c=t[l];if(s.de==c.de){var f=c.he,A=c.ce,p=e.get(s.xn),d=e.get(c.xn),m=void 0,y=(m=-1==p&&-1==d?-1:-1!=p&&(-1==d||p<=d)?p:d,new dr(c.Qt.x-c.Ht.x,c.Qt.y-c.Ht.y));if(0==i.get(s.xn)[0]){if(a==f){if(h.multiplyScalar(-1).angleTo(y)*At.it()<=5){if(m=-1==m?++r:m,e.set(s.xn,m),e.set(c.xn,m),i.get(s.xn)[0]=1,-(i.get(c.xn)[0]=1)!=d&&d!=m){var g,v=Qn(e.keys());try{for(v.s();!(g=v.n()).done;){var b=g.value;e.get(b)==d&&e.set(b,m)}}catch(t){v.e(t)}finally{v.f()}}if(-1!=p&&p!=m){var w,x=Qn(e.keys());try{for(x.s();!(w=x.n()).done;){var M=w.value;e.get(M)==p&&e.set(M,m)}}catch(t){x.e(t)}finally{x.f()}}}continue}if(a==A){if(h.multiplyScalar(-1).angleTo(y.multiplyScalar(-1))*At.it()<=5){if(m=-1==m?++r:m,e.set(s.xn,m),e.set(c.xn,m),i.get(s.xn)[0]=1,-(i.get(c.xn)[1]=1)!=d&&d!=m){var _,S=Qn(e.keys());try{for(S.s();!(_=S.n()).done;){var B=_.value;e.get(B)==d&&e.set(B,m)}}catch(t){S.e(t)}finally{S.f()}}if(-1!=p&&p!=m){var E,C=Qn(e.keys());try{for(C.s();!(E=C.n()).done;){var T=E.value;e.get(T)==p&&e.set(T,m)}}catch(t){C.e(t)}finally{C.f()}}}continue}}if(0==i.get(s.xn)[1])if(u==f){if(h.angleTo(y)*At.it()<=5){if(m=-1==m?++r:m,e.set(s.xn,m),e.set(c.xn,m),i.get(s.xn)[1]=1,-(i.get(c.xn)[0]=1)!=d&&d!=m){var F,P=Qn(e.keys());try{for(P.s();!(F=P.n()).done;){var O=F.value;e.get(O)==d&&e.set(O,m)}}catch(t){P.e(t)}finally{P.f()}}if(-1!=p&&p!=m){var D,R=Qn(e.keys());try{for(R.s();!(D=R.n()).done;){var I=D.value;e.get(I)==p&&e.set(I,m)}}catch(t){R.e(t)}finally{R.f()}}}}else if(u==A&&h.angleTo(y.multiplyScalar(-1))*At.it()<=5){if(m=-1==m?++r:m,e.set(s.xn,m),e.set(c.xn,m),i.get(s.xn)[1]=1,-(i.get(c.xn)[1]=1)!=d&&d!=m){var U,L=Qn(e.keys());try{for(L.s();!(U=L.n()).done;){var k=U.value;e.get(k)==d&&e.set(k,m)}}catch(t){L.e(t)}finally{L.f()}}if(-1!=p&&p!=m){var j,Q=Qn(e.keys());try{for(Q.s();!(j=Q.n()).done;){var N=j.value;e.get(N)==p&&e.set(N,m)}}catch(t){Q.e(t)}finally{Q.f()}}}}}-1==e.get(s.xn)&&e.set(s.xn,++r)}}return e},Jc:function(t,e,i){var r=[],n=t.coords,o=(t=t.road,e.coords),s=(e=e.road,i.ru(n)),a=i.ru(o);if(null!=t&&null!=e&&n.level==o.level&&t.extentID==e.extentID&&s==a){a=null;var u=n.level,h=At.wt(o,t.startPoint)<=At.wt(o,t.endPoint)?(a=t.startPoint,t.startID):(a=t.endPoint,t.endID);n=null,n=At.wt(a,e.startPoint)<=At.wt(a,e.endPoint)?(e.startPoint,e.startID):(e.endPoint,e.endID),t=(o=i.Go).jo(h),a=[o.jo(n)];if((e=i.Fu(s)).ts(o,t,a)){e.Yo=n;for(var l=e.ns(),c=l.length-1;0<=c;c--)r.push(Object.assign({level:u},l[c].pr))}}return r}}),cr);function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){return(Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Zn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===Wn(t=function(t,e){if("object"!==Wn(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==Wn(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}cr=function(){var t=r,e=Gn;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yn(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=Xn(t);if(i=e?(i=Xn(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===Kn(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){if(this instanceof r)return i.call(this,t,e,n);throw new TypeError("Cannot call a class as a function")}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}();var Jn=function(t,e,i){return e&&Zn(t.prototype,e),i&&Zn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.oc=void 0!==e.buildingID?e.buildingID:null,this.Zi=void 0!==e.level?e.level:null,this.Se=void 0!==e.points?e.points:null,this.Mu=-1,this.sr=null,this.Ai()});function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===$n(t=function(t,e){if("object"!==$n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==$n(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function eo(t,e){return(eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.assign(Jn.prototype,{Ai:function(){this.Se&&(this.sr=new mt,this.sr.ir(this.Se),this.Mu=this.Se.length,this.Se[0].x==this.Se[this.Mu-1].x&&this.Se[0].y==this.Se[this.Mu-1].y?this.Mu--:this.Se.push(this.Se[0]))},uf:function(t,e){return At.ft(t,e,this.sr.tr,this.sr.rr)},To:function(t){return!!At.ct(t,this.sr.min,this.sr.max)&&At.yt(t,this.Se,this.Mu)},tl:function(t){var e=0;return this.To(t[0])&&(e|=1),this.To(t[1])&&(e|=2),e},Eo:function(t,e){if(!At.ft(t[0],t[1],this.sr.min,this.sr.max))return!1;for(var i,r,n=!1,o=0;o<this.Mu;o++){var s={};1==At.Ot(t[0],t[1],this.Se[o],this.Se[o+1],s)&&(n=!0,e.push(s))}return t[0].x!=t[1].x?(i=t[0].x<t[1].x,e.sort(function(t,e){return i?t.x-e.x:e.x-t.x})):(r=t[0].y<t[1].y,e.sort(function(t,e){return r?t.y-e.y:e.y-t.y})),n},rl:function(t,e){for(var i=[],r=(i.push(t[0]),i.push.apply(i,function(t){return function(t){if(Array.isArray(t))return qn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?qn(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qn(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e)),i.push(t[1]),[]),n=0;n<i.length-1;n++)r.push([i[n],i[n+1]]);return r},Da:function(t){if(this.oc!=t.bid||this.Zi!=t.Zi)return!1;if(this.Se.length!=t.Se.length)return!1;for(var e=0;e<this.Se.length;e++){if(this.Se[e].x!=t.Se[e].x)return!1;if(this.Se[e].y!=t.Se[e].y)return!1}return!0}});var ro=function(){var t=r,e=Gn;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eo(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=io(t);if(i=e?(i=io(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===$n(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){if(this instanceof r)return t.type=or.Drive,i.call(this,t,e,n);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"route",value:function(t,e,i){this.gc.obstruct=void 0===t.obstruct||t.obstruct;var r;if((r=t.viapoints&&0<t.viapoints.length?(this.gc.Yf=t.viapoints,this.gc.qf(t.start,t.dest)):this.gc.$f(t.start,t.dest,t.mode||o.MODULE_SHORTEST,t.priority||s.PRIORITY_DEFAULT))===a.ROUTE_SUCCESS){this.jc=this.gc.yc();var n=null,h=null;this.Sc=[];for(var l=0;l<this.jc.length;l++)0<l&&(n=this.Er.bidToName.get(this.jc[l-1].bid)?this.Er.bidToName.get(this.jc[l-1].bid):"outdoor"),l<this.jc.length-1&&(h=this.Er.bidToName.get(this.jc[l+1].bid)?this.Er.bidToName.get(this.jc[l+1].bid):"outdoor"),this.jc[l].fh=n,this.jc[l].ah=h,h=n=null,this.jc[l].buildingName=this.Er.bidToName.get(this.jc[l].bid),this.Sc.push([this.Ic(this.jc[l],{language:u.ZH,type:or.Drive}),this.Ic(this.jc[l],{language:u.EN,type:or.Drive})]);this.Tc=this.gc.Cf,e&&e(this.Gi())}else i&&i(r)}}])&&to(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===no(t=function(t,e){if("object"!==no(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==no(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function so(t,e){return(so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uo,ho=function(){var t=r,e=Gn;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&so(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ao(t);if(i=e?(i=ao(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===no(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){if(this instanceof r)return t.type=or.Walk,i.call(this,t,e,n);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"route",value:function(t,e,i){this.gc.toDoors=void 0!==t.toDoors&&t.toDoors,this.gc.obstruct=void 0===t.obstruct||t.obstruct,this.gc.barrierFree=void 0!==t.barrierFree&&t.barrierFree;var r;if((r=t.viapoints&&0<t.viapoints.length?(this.gc.Yf=t.viapoints,this.gc.qf(t.start,t.dest,t.mode||o.MODULE_SHORTEST,t.priority||s.PRIORITY_DEFAULT)):this.gc.$f(t.start,t.dest,t.mode||o.MODULE_SHORTEST,t.priority||s.PRIORITY_DEFAULT))===a.ROUTE_SUCCESS){this.jc=this.gc.yc();var n=null,h=null;this.Sc=[];for(var l=0;l<this.jc.length;l++)0<l&&(n=this.Er.bidToName.get(this.jc[l-1].bid)?this.Er.bidToName.get(this.jc[l-1].bid):"outdoor"),l<this.jc.length-1&&(h=this.Er.bidToName.get(this.jc[l+1].bid)?this.Er.bidToName.get(this.jc[l+1].bid):"outdoor"),this.jc[l].fh=n,this.jc[l].ah=h,h=n=null,this.jc[l].buildingName=this.Er.bidToName.get(this.jc[l].bid),this.Sc.push([this.Ic(this.jc[l],{language:u.ZH}),this.Ic(this.jc[l],{language:u.EN})]);this.Tc=this.gc.Cf,e&&e(this.Gi())}else i&&i(r)}}])&&oo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),lo=(i=i(28),{VERSION:r,BUILD:70,XMLHttpRequest:i.a,FMType:n,FMNaviMode:o,FMNaviPriority:s,FMRouteResult:a,FMLanguageType:u,FMNaviTransfer:h,FMRoadNetworkResult:l,FMSearchRequest:A,FMSearchAnalyser:te,FMNaviAnalyser:cr,FMNaviObstruction:Jn,FMNaviDriveAnalyser:ro,FMNaviWalkAnalyser:ho}),co=void 0!==(i=Ht.a.global())?i.fengmap:{};for(uo in void 0===co&&(co={}),lo)co[uo]=lo[uo];void 0!==i&&(i.fengmap=co),e.default=co}]).default},module.exports=r(__webpack_require__("Ya8g"))},bvvg:function(t,e,i){"use strict";var r=t.exports=function(t,e,i){"function"==typeof e&&(i=e,e={}),function t(e,i,n,o,s,a,u,h,l,c){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var f in i(o,s,a,u,h,l,c),o){var A=o[f];if(Array.isArray(A)){if(f in r.arrayKeywords)for(var p=0;p<A.length;p++)t(e,i,n,A[p],s+"/"+f+"/"+p,a,s,f,o,p)}else if(f in r.propsKeywords){if(A&&"object"==typeof A)for(var d in A)t(e,i,n,A[d],s+"/"+f+"/"+d.replace(/~/g,"~0").replace(/\//g,"~1"),a,s,f,o,d)}else(f in r.keywords||e.allKeys&&!(f in r.skipKeywords))&&t(e,i,n,A,s+"/"+f,a,s,f,o)}n(o,s,a,u,h,l,c)}}(e,"function"==typeof(i=e.cb||i)?i:i.pre||function(){},i.post||function(){},t,"",t)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},cGpA:function(t,e,i){"use strict";t.exports=function(t){for(var e,i=0,r=t.length,n=0;n<r;)i++,(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<r&&56320==(64512&(e=t.charCodeAt(n)))&&n++;return i}},cNvS:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f=t.opts.$data&&s&&s.$data;f&&(r+=" var schema"+n+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var A="i"+n,p="schema"+n;f||(r+=" var "+p+" = validate.schema"+a+";"),r+="var "+c+";",f&&(r+=" if (schema"+n+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+n+")) "+c+" = false; else {"),r+=c+" = false;for (var "+A+"=0; "+A+"<"+p+".length; "+A+"++) if (equal("+l+", "+p+"["+A+"])) { "+c+" = true; break; }",f&&(r+="  }  "),r+=" if (!"+c+") {   ";var d=d||[];d.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValues: schema"+n+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var m=r;return r=d.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r}},cSWu:function(t,e,i){(e=t.exports=i("Rt1F")).Stream=e,e.Readable=e,e.Writable=i("7dSG"),e.Duplex=i("DsFX"),e.Transform=i("D1Va"),e.PassThrough=i("f48b")},cZwb:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||"");if(!1===t.opts.format)return h&&(r+=" if (true) { "),r;var c,f=t.opts.$data&&s&&s.$data;f?(r+=" var schema"+n+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",c="schema"+n):c=s;var A=t.opts.unknownFormats,p=Array.isArray(A);if(f){r+=" var "+(d="format"+n)+" = formats["+c+"]; var "+(m="isObject"+n)+" = typeof "+d+" == 'object' && !("+d+" instanceof RegExp) && "+d+".validate; var "+(y="formatType"+n)+" = "+m+" && "+d+".type || 'string'; if ("+m+") { ",t.async&&(r+=" var async"+n+" = "+d+".async; "),r+=" "+d+" = "+d+".validate; } if (  ",f&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" (","ignore"!=A&&(r+=" ("+c+" && !"+d+" ",p&&(r+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),r+=") || "),r+=" ("+d+" && "+y+" == '"+i+"' && !(typeof "+d+" == 'function' ? ",t.async?r+=" (async"+n+" ? await "+d+"("+l+") : "+d+"("+l+")) ":r+=" "+d+"("+l+") ",r+=" : "+d+".test("+l+"))))) {"}else{var d;if(!(d=t.formats[s])){if("ignore"==A)return t.logger.warn('unknown format "'+s+'" ignored in schema at path "'+t.errSchemaPath+'"'),h&&(r+=" if (true) { "),r;if(p&&A.indexOf(s)>=0)return h&&(r+=" if (true) { "),r;throw new Error('unknown format "'+s+'" is used in schema at path "'+t.errSchemaPath+'"')}var m,y=(m="object"==typeof d&&!(d instanceof RegExp)&&d.validate)&&d.type||"string";if(m){var g=!0===d.async;d=d.validate}if(y!=i)return h&&(r+=" if (true) { "),r;if(g){if(!t.async)throw new Error("async format in sync schema");r+=" if (!(await "+(v="formats"+t.util.getProperty(s)+".validate")+"("+l+"))) { "}else{r+=" if (! ";var v="formats"+t.util.getProperty(s);m&&(v+=".validate"),r+="function"==typeof d?" "+v+"("+l+") ":" "+v+".test("+l+") ",r+=") { "}}var b=b||[];b.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { format:  ",r+=f?""+c:""+t.util.toQuotedString(s),r+="  } ",!1!==t.opts.messages&&(r+=" , message: 'should match format \"",r+=f?"' + "+c+" + '":""+t.util.escapeQuotes(s),r+="\"' "),t.opts.verbose&&(r+=" , schema:  ",r+=f?"validate.schema"+a:""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var w=r;return r=b.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r}},d2Xw:function(t,e,i){"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},d6cF:function(t,e,i){"use strict";t.exports=EvalError},dDmH:function(t,e,i){"use strict";var r=i("lXu4"),n=i("aRdZ"),o=i("HBxp");t.exports=r?function(t){return r(t)}:n?function(t){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("getProto: not an object");return n(t)}:o?function(t){return o(t)}:null},dE4w:function(t,e,i){"use strict";var r=i("9MlZ");t.exports=function(){return r()&&!!Symbol.toStringTag}},dK10:function(t,e,i){"use strict";var r=["undefined","string","number","object","function","boolean","symbol"];t.exports=function t(e){return t.definition={inline:function(t,e,i){var r="data"+(t.dataLevel||"");return"string"==typeof i?"typeof "+r+' == "'+i+'"':(i="validate.schema"+t.schemaPath+"."+e)+".indexOf(typeof "+r+") >= 0"},metaSchema:{anyOf:[{type:"string",enum:r},{type:"array",items:{type:"string",enum:r}}]}},e.addKeyword("typeof",t.definition),e}},eCz2:function(t,e,i){"use strict";var r=i("LC74"),n=i("yDvu"),o=i("X3l8").Buffer,s=new Array(16);function a(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function h(t,e,i,r,n,o,s){return u(t+(e&i|~e&r)+n+o|0,s)+e|0}function l(t,e,i,r,n,o,s){return u(t+(e&r|i&~r)+n+o|0,s)+e|0}function c(t,e,i,r,n,o,s){return u(t+(e^i^r)+n+o|0,s)+e|0}function f(t,e,i,r,n,o,s){return u(t+(i^(e|~r))+n+o|0,s)+e|0}r(a,n),a.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,n=this._c,o=this._d;r=f(r=f(r=f(r=f(r=c(r=c(r=c(r=c(r=l(r=l(r=l(r=l(r=h(r=h(r=h(r=h(r,n=h(n,o=h(o,i=h(i,r,n,o,t[0],3614090360,7),r,n,t[1],3905402710,12),i,r,t[2],606105819,17),o,i,t[3],3250441966,22),n=h(n,o=h(o,i=h(i,r,n,o,t[4],4118548399,7),r,n,t[5],1200080426,12),i,r,t[6],2821735955,17),o,i,t[7],4249261313,22),n=h(n,o=h(o,i=h(i,r,n,o,t[8],1770035416,7),r,n,t[9],2336552879,12),i,r,t[10],4294925233,17),o,i,t[11],2304563134,22),n=h(n,o=h(o,i=h(i,r,n,o,t[12],1804603682,7),r,n,t[13],4254626195,12),i,r,t[14],2792965006,17),o,i,t[15],1236535329,22),n=l(n,o=l(o,i=l(i,r,n,o,t[1],4129170786,5),r,n,t[6],3225465664,9),i,r,t[11],643717713,14),o,i,t[0],3921069994,20),n=l(n,o=l(o,i=l(i,r,n,o,t[5],3593408605,5),r,n,t[10],38016083,9),i,r,t[15],3634488961,14),o,i,t[4],3889429448,20),n=l(n,o=l(o,i=l(i,r,n,o,t[9],568446438,5),r,n,t[14],3275163606,9),i,r,t[3],4107603335,14),o,i,t[8],1163531501,20),n=l(n,o=l(o,i=l(i,r,n,o,t[13],2850285829,5),r,n,t[2],4243563512,9),i,r,t[7],1735328473,14),o,i,t[12],2368359562,20),n=c(n,o=c(o,i=c(i,r,n,o,t[5],4294588738,4),r,n,t[8],2272392833,11),i,r,t[11],1839030562,16),o,i,t[14],4259657740,23),n=c(n,o=c(o,i=c(i,r,n,o,t[1],2763975236,4),r,n,t[4],1272893353,11),i,r,t[7],4139469664,16),o,i,t[10],3200236656,23),n=c(n,o=c(o,i=c(i,r,n,o,t[13],681279174,4),r,n,t[0],3936430074,11),i,r,t[3],3572445317,16),o,i,t[6],76029189,23),n=c(n,o=c(o,i=c(i,r,n,o,t[9],3654602809,4),r,n,t[12],3873151461,11),i,r,t[15],530742520,16),o,i,t[2],3299628645,23),n=f(n,o=f(o,i=f(i,r,n,o,t[0],4096336452,6),r,n,t[7],1126891415,10),i,r,t[14],2878612391,15),o,i,t[5],4237533241,21),n=f(n,o=f(o,i=f(i,r,n,o,t[12],1700485571,6),r,n,t[3],2399980690,10),i,r,t[10],4293915773,15),o,i,t[1],2240044497,21),n=f(n,o=f(o,i=f(i,r,n,o,t[8],1873313359,6),r,n,t[15],4264355552,10),i,r,t[6],2734768916,15),o,i,t[13],1309151649,21),n=f(n,o=f(o,i=f(i,r,n,o,t[4],4149444226,6),r,n,t[11],3174756917,10),i,r,t[2],718787259,15),o,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},ejIc:function(t,e){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},ejoV:function(t,e){t.exports={type:"object",properties:{name:{},regExp:{},context:{type:"string"},publicPath:{},outputPath:{},useRelativePath:{type:"boolean"},emitFile:{type:"boolean"}},additionalProperties:!0}},evxy:function(t,e,i){"use strict";const r={26:"abcdefghijklmnopqrstuvwxyz",32:"123456789abcdefghjkmnpqrstuvwxyz",36:"0123456789abcdefghijklmnopqrstuvwxyz",49:"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",52:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",64:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"};t.exports=function(t,e,n,o){e=e||"md5",o=o||9999;const s=i("VI/i").createHash(e);return s.update(t),"base26"===n||"base32"===n||"base36"===n||"base49"===n||"base52"===n||"base58"===n||"base62"===n||"base64"===n?function(t,e){const n=r[e];if(!n)throw new Error("Unknown encoding base"+e);const o=t.length,s=i("gaXx");s.RM=s.DP=0;let a=new s(0);for(let e=o-1;e>=0;e--)a=a.times(256).plus(t[e]);let u="";for(;a.gt(0);)u=n[a.mod(e)]+u,a=a.div(e);return s.DP=20,s.RM=1,u}(s.digest(),n.substr(4)).substr(0,o):s.digest(n||"hex").substr(0,o)}},ewJk:function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(11).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function h(t,e,i,r){for(var n=0,o=Math.min(t.length,i),s=e;s<o;s++){var a=t.charCodeAt(s)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o=0,s=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,s=o%r,a=Math.min(o,o-s)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var c=1;for(u=h(t,l,t.length,e),l=0;l<s;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function A(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=67108863&s,u=s/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),A=Math.max(0,h-t.length+1);A<=f;A++){var p=h-A|0;l+=(s=(n=0|t.words[p])*(o=0|e.words[A])+c)/67108864|0,c=67108863&s}i.words[h]=0|c,u=0|l}return 0!==u?i.words[h]=0|u:i.length--,i.strip()}o.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],A=f[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var d=p.modn(A).toString(t);i=(p=p.idivn(A)).isZero()?d+i:l[h-d.length]+d+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,h=new t(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[a]=s;for(;a<o;a++)h[a]=0}else{for(a=0;a<o-n;a++)h[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[o-a-1]=s}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|i.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<i.length;s++)o=(e=(0|i.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,s=t.words,a=e.words,u=i.words,h=0,l=0|s[0],c=8191&l,f=l>>>13,A=0|s[1],p=8191&A,d=A>>>13,m=0|s[2],y=8191&m,g=m>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],M=8191&x,_=x>>>13,S=0|s[5],B=8191&S,E=S>>>13,C=0|s[6],T=8191&C,F=C>>>13,P=0|s[7],O=8191&P,D=P>>>13,R=0|s[8],I=8191&R,U=R>>>13,L=0|s[9],k=8191&L,j=L>>>13,Q=0|a[0],N=8191&Q,z=Q>>>13,H=0|a[1],V=8191&H,G=H>>>13,K=0|a[2],Y=8191&K,X=K>>>13,W=0|a[3],q=8191&W,Z=W>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,At=0|a[9],pt=8191&At,dt=At>>>13;i.negative=t.negative^e.negative,i.length=19;var mt=(h+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,z))+Math.imul(f,N)|0))<<13)|0;h=((o=Math.imul(f,z))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,z))+Math.imul(d,N)|0,o=Math.imul(d,z);var yt=(h+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,V)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,z))+Math.imul(g,N)|0,o=Math.imul(g,z),r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(d,V)|0,o=o+Math.imul(d,G)|0;var gt=(h+(r=r+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(b,N),n=(n=Math.imul(b,z))+Math.imul(w,N)|0,o=Math.imul(w,z),r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0,r=r+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(d,Y)|0,o=o+Math.imul(d,X)|0;var vt=(h+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,q)|0))<<13)|0;h=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(M,N),n=(n=Math.imul(M,z))+Math.imul(_,N)|0,o=Math.imul(_,z),r=r+Math.imul(b,V)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(y,Y)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(d,q)|0,o=o+Math.imul(d,Z)|0;var bt=(h+(r=r+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(B,N),n=(n=Math.imul(B,z))+Math.imul(E,N)|0,o=Math.imul(E,z),r=r+Math.imul(M,V)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(b,Y)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,Z)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(d,$)|0,o=o+Math.imul(d,tt)|0;var wt=(h+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;h=((o=o+Math.imul(f,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,N),n=(n=Math.imul(T,z))+Math.imul(F,N)|0,o=Math.imul(F,z),r=r+Math.imul(B,V)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,r=r+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(d,it)|0,o=o+Math.imul(d,rt)|0;var xt=(h+(r=r+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,st)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,z))+Math.imul(D,N)|0,o=Math.imul(D,z),r=r+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,G)|0,r=r+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(d,ot)|0,o=o+Math.imul(d,st)|0;var Mt=(h+(r=r+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,N),n=(n=Math.imul(I,z))+Math.imul(U,N)|0,o=Math.imul(U,z),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,G)|0,r=r+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,r=r+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(d,ut)|0,o=o+Math.imul(d,ht)|0;var _t=(h+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,z))+Math.imul(j,N)|0,o=Math.imul(j,z),r=r+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,G)|0,r=r+Math.imul(O,Y)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,r=r+Math.imul(T,q)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(F,q)|0,o=o+Math.imul(F,Z)|0,r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(_,it)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(d,ct)|0,o=o+Math.imul(d,ft)|0;var St=(h+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(f,pt)|0))<<13)|0;h=((o=o+Math.imul(f,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(k,V),n=(n=Math.imul(k,G))+Math.imul(j,V)|0,o=Math.imul(j,G),r=r+Math.imul(I,Y)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(U,Y)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,r=r+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var Bt=(h+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,dt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((o=o+Math.imul(d,dt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(k,Y),n=(n=Math.imul(k,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(I,q)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,Z)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(T,it)|0,n=(n=n+Math.imul(T,rt)|0)+Math.imul(F,it)|0,o=o+Math.imul(F,rt)|0,r=r+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,dt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((o=o+Math.imul(g,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(k,q),n=(n=Math.imul(k,Z))+Math.imul(j,q)|0,o=Math.imul(j,Z),r=r+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(D,it)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ft)|0;var Ct=(h+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((o=o+Math.imul(w,dt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(k,$),n=(n=Math.imul(k,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(I,it)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(U,it)|0,o=o+Math.imul(U,rt)|0,r=r+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var Tt=(h+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,dt)|0)+Math.imul(_,pt)|0))<<13)|0;h=((o=o+Math.imul(_,dt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(k,it),n=(n=Math.imul(k,rt))+Math.imul(j,it)|0,o=Math.imul(j,rt),r=r+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(U,ot)|0,o=o+Math.imul(U,st)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(T,ct)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(F,ct)|0,o=o+Math.imul(F,ft)|0;var Ft=(h+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,dt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((o=o+Math.imul(E,dt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(k,ot),n=(n=Math.imul(k,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(U,ut)|0,o=o+Math.imul(U,ht)|0,r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Pt=(h+(r=r+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,dt)|0)+Math.imul(F,pt)|0))<<13)|0;h=((o=o+Math.imul(F,dt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(k,ut),n=(n=Math.imul(k,ht))+Math.imul(j,ut)|0,o=Math.imul(j,ht),r=r+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(U,ct)|0,o=o+Math.imul(U,ft)|0;var Ot=(h+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,dt)|0)+Math.imul(D,pt)|0))<<13)|0;h=((o=o+Math.imul(D,dt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,ct),n=(n=Math.imul(k,ft))+Math.imul(j,ct)|0,o=Math.imul(j,ft);var Dt=(h+(r=r+Math.imul(I,pt)|0)|0)+((8191&(n=(n=n+Math.imul(I,dt)|0)+Math.imul(U,pt)|0))<<13)|0;h=((o=o+Math.imul(U,dt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Rt=(h+(r=Math.imul(k,pt))|0)+((8191&(n=(n=Math.imul(k,dt))+Math.imul(j,pt)|0))<<13)|0;return h=((o=Math.imul(j,dt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=mt,u[1]=yt,u[2]=gt,u[3]=vt,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=_t,u[9]=St,u[10]=Bt,u[11]=Et,u[12]=Ct,u[13]=Tt,u[14]=Ft,u[15]=Pt,u[16]=Ot,u[17]=Dt,u[18]=Rt,0!==h&&(u[19]=h,i.length++),i};function d(t,e,i){return(new m).mulp(t,e,i)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=A),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?A(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var s=n;n=0;for(var a=67108863&r,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;a=67108863&(f=f+a|0),n+=(s=(s=s+(c/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}i.words[o]=a,r=s,s=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},m.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},m.prototype.permute=function(t,e,i,r,n,o){for(var s=0;s<o;s++)r[s]=e[t[s]],n[s]=i[t[s]]},m.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var c=u,f=h,A=0;A<s;A++){var p=i[l+A],d=r[l+A],m=i[l+A+s],y=r[l+A+s],g=c*m-f*y;y=c*y+f*m,m=g,i[l+A]=p+m,r[l+A]=d+y,i[l+A+s]=p-m,r[l+A+s]=d-y,A!==a&&(g=u*c-h*f,f=u*f+h*c,c=g)}},m.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},m.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},m.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,n),this.transform(h,o,l,c,r,n);for(var A=0;A<r;A++){var p=a[A]*l[A]-u[A]*c[A];u[A]=a[A]*c[A]+u[A]*l[A],a[A]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this.length=0===t?1:this.length,this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i)&&!!(this.words[i]&n)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,s=0|n.words[n.length-1];0!==(i=26-this._countBits(s))&&(n=n.ushln(i),r.iushln(i),s=0|n.words[n.length-1]);var a,u=r.length-n.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=r.clone()._ishlnsubmul(n,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var l=i.clone(),c=e.clone();!e.isZero();){for(var f=0,A=1;0==(e.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(l),s.isub(c)),n.iushrn(1),s.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(c)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),s.isub(u)):(i.isub(e),a.isub(n),u.isub(s))}return{a:a,b:u,gcd:i.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new o(1),a=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(a)):(i.isub(e),a.isub(s))}return(n=0===e.cmpn(1)?s:a).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},n(v,g),v.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,g),n(w,g),n(x,g),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),A=this.pow(t,n),p=s;0!==A.cmp(a);){for(var d=A,m=0;0!==d.cmp(a);m++)d=d.redSqr();r(m<p);var y=this.pow(c,new o(1).iushln(p-m-1));f=f.redMul(y),c=y.redSqr(),A=A.redMul(c),p=m}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var h=e.words[r],l=u-1;l>=0;l--){var c=h>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++a||0===r&&0===l)&&(n=this.mul(n,i[s]),a=0,s=0)):a=0}u=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new _(t)},n(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(e,i("3IRH")(t))},f48b:function(t,e,i){"use strict";t.exports=o;var r=i("D1Va"),n=Object.create(i("jOgh"));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}n.inherits=i("LC74"),n.inherits(o,r),o.prototype._transform=function(t,e,i){i(null,t)}},fPvb:function(t,e,i){"use strict";t.exports=function t(e){return t.definition={type:"object",macro:function(t){return 0==t.length||(1==t.length?{not:{required:t}}:{not:{anyOf:t.map(function(t){return{required:[t]}})}})},metaSchema:{type:"array",items:{type:"string"}}},e.addKeyword("prohibited",t.definition),e}},fRHV:function(t,e,i){"use strict";var r=Object.prototype.toString,n=Math.max,o=function(t,e){for(var i=[],r=0;r<t.length;r+=1)i[r]=t[r];for(var n=0;n<e.length;n+=1)i[n+t.length]=e[n];return i};t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==r.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var i,s=function(t,e){for(var i=[],r=e||0,n=0;r<t.length;r+=1,n+=1)i[n]=t[r];return i}(arguments,1),a=n(0,e.length-s.length),u=[],h=0;h<a;h++)u[h]="$"+h;if(i=Function("binder","return function ("+function(t,e){for(var i="",r=0;r<t.length;r+=1)i+=t[r],r+1<t.length&&(i+=e);return i}(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var r=e.apply(this,o(s,arguments));return Object(r)===r?r:this}return e.apply(t,o(s,arguments))}),e.prototype){var l=function(){};l.prototype=e.prototype,i.prototype=new l,l.prototype=null}return i}},fSjk:function(t,e,i){"use strict";t.exports=function t(e){return t.definition={type:"string",inline:function(t,e,i){return function(){try{if("object"==typeof i)return new RegExp(i.pattern,i.flags);var t=i.match(/^\/(.*)\/([gimuy]*)$/);if(t)return new RegExp(t[1],t[2]);throw new Error("cannot parse string into RegExp")}catch(t){throw t}}()+".test(data"+(t.dataLevel||"")+")"},metaSchema:{type:["string","object"],properties:{pattern:{type:"string"},flags:{type:"string"}},required:["pattern"],additionalProperties:!1}},e.addKeyword("regexp",t.definition),e}},fWB8:function(t,e,i){"use strict";var r=i("1lLf"),n=i("Q48P");function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,n),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},frcP:function(t,e,i){"use strict";t.exports=Number.isNaN||function(t){return t!=t}},fxuI:function(t,e,i){var r=i("jkjm"),n=i("Cua8"),o=i("zOO0"),s=i("2Ejg"),a=i("jSRM"),u=i("BVsN"),h=i("5QAX"),l=i("X3l8").Buffer;t.exports=function(t,e,i){var c;c=t.padding?t.padding:i?1:4;var f,A=r(t),p=A.modulus.byteLength();if(e.length>p||new s(e).cmp(A.modulus)>=0)throw new Error("decryption error");f=i?h(new s(e),A):a(e,A);var d=l.alloc(p-f.length);if(f=l.concat([d,f],p),4===c)return function(t,e){var i=t.modulus.byteLength(),r=u("sha1").update(l.alloc(0)).digest(),s=r.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,s+1),h=e.slice(s+1),c=o(a,n(h,s)),f=o(h,n(c,i-s-1));if(function(t,e){t=l.from(t),e=l.from(e);var i=0,r=t.length;t.length!==e.length&&(i++,r=Math.min(t.length,e.length));var n=-1;for(;++n<r;)i+=t[n]^e[n];return i}(r,f.slice(0,s)))throw new Error("decryption error");var A=s;for(;0===f[A];)A++;if(1!==f[A++])throw new Error("decryption error");return f.slice(A)}(A,f);if(1===c)return function(t,e,i){var r=e.slice(0,2),n=2,o=0;for(;0!==e[n++];)if(n>=e.length){o++;break}var s=e.slice(2,n-1);("0002"!==r.toString("hex")&&!i||"0001"!==r.toString("hex")&&i)&&o++;s.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(n)}(0,f,i);if(3===c)return f;throw new Error("unknown padding")}},gaXx:function(t,e,i){var r;!function(n){"use strict";var o,s=20,a=1,u=1e6,h=-7,l=21,c="[big.js] ",f=c+"Invalid ",A=f+"decimal places",p=f+"rounding mode",d={},m=void 0,y=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function g(t,e,i,r){var n=t.c,o=t.e+e+1;if(o<n.length){if(1===i)r=n[o]>=5;else if(2===i)r=n[o]>5||5==n[o]&&(r||o<0||n[o+1]!==m||1&n[o-1]);else if(3===i)r=r||!!n[0];else if(r=!1,0!==i)throw Error(p);if(o<1)n.length=1,r?(t.e=-e,n[0]=1):n[0]=t.e=0;else{if(n.length=o--,r)for(;++n[o]>9;)n[o]=0,o--||(++t.e,n.unshift(1));for(o=n.length;!n[--o];)n.pop()}}else if(i<0||i>3||i!==~~i)throw Error(p);return t}function v(t,e,i,r){var n,o,s=t.constructor,a=!t.c[0];if(i!==m){if(i!==~~i||i<(3==e)||i>u)throw Error(3==e?f+"precision":A);for(i=r-(t=new s(t)).e,t.c.length>++r&&g(t,i,s.RM),2==e&&(r=t.e+i+1);t.c.length<r;)t.c.push(0)}if(n=t.e,i=(o=t.c.join("")).length,2!=e&&(1==e||3==e&&r<=n||n<=s.NE||n>=s.PE))o=o.charAt(0)+(i>1?"."+o.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)o="0"+o;o="0."+o}else if(n>0)if(++n>i)for(n-=i;n--;)o+="0";else n<i&&(o=o.slice(0,n)+"."+o.slice(n));else i>1&&(o=o.charAt(0)+"."+o.slice(1));return t.s<0&&(!a||4==e)?"-"+o:o}d.abs=function(){var t=new this.constructor(this);return t.s=1,t},d.cmp=function(t){var e,i=this,r=i.c,n=(t=new i.constructor(t)).c,o=i.s,s=t.s,a=i.e,u=t.e;if(!r[0]||!n[0])return r[0]?o:n[0]?-s:0;if(o!=s)return o;if(e=o<0,a!=u)return a>u^e?1:-1;for(s=(a=r.length)<(u=n.length)?a:u,o=-1;++o<s;)if(r[o]!=n[o])return r[o]>n[o]^e?1:-1;return a==u?0:a>u^e?1:-1},d.div=function(t){var e=this,i=e.constructor,r=e.c,n=(t=new i(t)).c,o=e.s==t.s?1:-1,s=i.DP;if(s!==~~s||s<0||s>u)throw Error(A);if(!n[0])throw Error("[big.js] Division by zero");if(!r[0])return new i(0*o);var a,h,l,c,f,p=n.slice(),d=a=n.length,y=r.length,v=r.slice(0,a),b=v.length,w=t,x=w.c=[],M=0,_=s+(w.e=e.e-t.e)+1;for(w.s=o,o=_<0?0:_,p.unshift(0);b++<a;)v.push(0);do{for(l=0;l<10;l++){if(a!=(b=v.length))c=a>b?1:-1;else for(f=-1,c=0;++f<a;)if(n[f]!=v[f]){c=n[f]>v[f]?1:-1;break}if(!(c<0))break;for(h=b==a?n:p;b;){if(v[--b]<h[b]){for(f=b;f&&!v[--f];)v[f]=9;--v[f],v[b]+=10}v[b]-=h[b]}for(;!v[0];)v.shift()}x[M++]=c?l:++l,v[0]&&c?v[b]=r[d]||0:v=[r[d]]}while((d++<y||v[0]!==m)&&o--);return x[0]||1==M||(x.shift(),w.e--),M>_&&g(w,s,i.RM,v[0]!==m),w},d.eq=function(t){return!this.cmp(t)},d.gt=function(t){return this.cmp(t)>0},d.gte=function(t){return this.cmp(t)>-1},d.lt=function(t){return this.cmp(t)<0},d.lte=function(t){return this.cmp(t)<1},d.minus=d.sub=function(t){var e,i,r,n,o=this,s=o.constructor,a=o.s,u=(t=new s(t)).s;if(a!=u)return t.s=-u,o.plus(t);var h=o.c.slice(),l=o.e,c=t.c,f=t.e;if(!h[0]||!c[0])return c[0]?(t.s=-u,t):new s(h[0]?o:0);if(a=l-f){for((n=a<0)?(a=-a,r=h):(f=l,r=c),r.reverse(),u=a;u--;)r.push(0);r.reverse()}else for(i=((n=h.length<c.length)?h:c).length,a=u=0;u<i;u++)if(h[u]!=c[u]){n=h[u]<c[u];break}if(n&&(r=h,h=c,c=r,t.s=-t.s),(u=(i=c.length)-(e=h.length))>0)for(;u--;)h[e++]=0;for(u=e;i>a;){if(h[--i]<c[i]){for(e=i;e&&!h[--e];)h[e]=9;--h[e],h[i]+=10}h[i]-=c[i]}for(;0===h[--u];)h.pop();for(;0===h[0];)h.shift(),--f;return h[0]||(t.s=1,h=[f=0]),t.c=h,t.e=f,t},d.mod=function(t){var e,i=this,r=i.constructor,n=i.s,o=(t=new r(t)).s;if(!t.c[0])throw Error("[big.js] Division by zero");return i.s=t.s=1,e=1==t.cmp(i),i.s=n,t.s=o,e?new r(i):(n=r.DP,o=r.RM,r.DP=r.RM=0,i=i.div(t),r.DP=n,r.RM=o,this.minus(i.times(t)))},d.plus=d.add=function(t){var e,i=this,r=i.constructor,n=i.s,o=(t=new r(t)).s;if(n!=o)return t.s=-o,i.minus(t);var s=i.e,a=i.c,u=t.e,h=t.c;if(!a[0]||!h[0])return h[0]?t:new r(a[0]?i:0*n);if(a=a.slice(),n=s-u){for(n>0?(u=s,e=h):(n=-n,e=a),e.reverse();n--;)e.push(0);e.reverse()}for(a.length-h.length<0&&(e=h,h=a,a=e),n=h.length,o=0;n;a[n]%=10)o=(a[--n]=a[n]+h[n]+o)/10|0;for(o&&(a.unshift(o),++u),n=a.length;0===a[--n];)a.pop();return t.c=a,t.e=u,t},d.pow=function(t){var e=this,i=new e.constructor(1),r=i,n=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(f+"exponent");for(n&&(t=-t);1&t&&(r=r.times(e)),t>>=1;)e=e.times(e);return n?i.div(r):r},d.round=function(t,e){var i=this.constructor;if(t===m)t=0;else if(t!==~~t||t<-u||t>u)throw Error(A);return g(new i(this),t,e===m?i.RM:e)},d.sqrt=function(){var t,e,i,r=this,n=r.constructor,o=r.s,s=r.e,a=new n(.5);if(!r.c[0])return new n(r);if(o<0)throw Error(c+"No square root");0===(o=Math.sqrt(r+""))||o===1/0?((e=r.c.join("")).length+s&1||(e+="0"),o=Math.sqrt(e),s=((s+1)/2|0)-(s<0||1&s),t=new n((o==1/0?"1e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):t=new n(o),s=t.e+(n.DP+=4);do{i=t,t=a.times(i.plus(r.div(i)))}while(i.c.slice(0,s).join("")!==t.c.slice(0,s).join(""));return g(t,n.DP-=4,n.RM)},d.times=d.mul=function(t){var e,i=this,r=i.constructor,n=i.c,o=(t=new r(t)).c,s=n.length,a=o.length,u=i.e,h=t.e;if(t.s=i.s==t.s?1:-1,!n[0]||!o[0])return new r(0*t.s);for(t.e=u+h,s<a&&(e=n,n=o,o=e,h=s,s=a,a=h),e=new Array(h=s+a);h--;)e[h]=0;for(u=a;u--;){for(a=0,h=s+u;h>u;)a=e[h]+o[u]*n[h-u-1]+a,e[h--]=a%10,a=a/10|0;e[h]=(e[h]+a)%10}for(a?++t.e:e.shift(),u=e.length;!e[--u];)e.pop();return t.c=e,t},d.toExponential=function(t){return v(this,1,t,t)},d.toFixed=function(t){return v(this,2,t,this.e+t)},d.toPrecision=function(t){return v(this,3,t,t-1)},d.toString=function(){return v(this)},d.valueOf=d.toJSON=function(){return v(this,4)},(o=function t(){function e(i){var r=this;if(!(r instanceof e))return i===m?t():new e(i);i instanceof e?(r.s=i.s,r.e=i.e,r.c=i.c.slice()):function(t,e){var i,r,n;if(0===e&&1/e<0)e="-0";else if(!y.test(e+=""))throw Error(f+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(i=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(i<0&&(i=r),i+=+e.slice(r+1),e=e.substring(0,r)):i<0&&(i=e.length),n=e.length,r=0;r<n&&"0"==e.charAt(r);)++r;if(r==n)t.c=[t.e=0];else{for(;n>0&&"0"==e.charAt(--n););for(t.e=i-r-1,t.c=[],i=0;r<=n;)t.c[i++]=+e.charAt(r++)}}(r,i),r.constructor=e}return e.prototype=d,e.DP=s,e.RM=a,e.NE=h,e.PE=l,e.version="5.2.2",e}()).default=o.Big=o,void 0===(r=function(){return o}.call(e,i,e,t))||(t.exports=r)}()},geuY:function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(8).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function u(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function h(t,e,i,n){for(var o=0,s=0,a=Math.min(t.length,i),u=e;u<a;u++){var h=t.charCodeAt(u)-48;o*=n,s=h>=49?h-49+10:h>=17?h-17+10:h,r(h>=0&&s<n,"Invalid character"),o+=s}return o}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o=0,s=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,s=o%r,a=Math.min(o,o-s)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var c=1;for(u=h(t,l,t.length,e),l=0;l<s;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){l(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(t){o.prototype.inspect=c}else o.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?f[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=A[t],l=p[t];i="";var c=this.clone();for(c.negative=0;!c.isZero();){var d=c.modrn(l).toString(t);i=(c=c.idivn(l)).isZero()?d+i:f[h-d.length]+d+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(s,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=67108863&s,u=s/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),A=Math.max(0,h-t.length+1);A<=f;A++){var p=h-A|0;l+=(s=(n=0|t.words[p])*(o=0|e.words[A])+c)/67108864|0,c=67108863&s}i.words[h]=0|c,u=0|l}return 0!==u?i.words[h]=0|u:i.length--,i._strip()}o.prototype.toArrayLike=function(t,e,i){this._strip();var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,n),s},o.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,n=0,o=0;n<this.length;n++){var s=this.words[n]<<o|r;t[i++]=255&s,i<t.length&&(t[i++]=s>>8&255),i<t.length&&(t[i++]=s>>16&255),6===o?(i<t.length&&(t[i++]=s>>24&255),r=0,o=0):(r=s>>>24,o+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,n=0,o=0;n<this.length;n++){var s=this.words[n]<<o|r;t[i--]=255&s,i>=0&&(t[i--]=s>>8&255),i>=0&&(t[i--]=s>>16&255),6===o?(i>=0&&(t[i--]=s>>24&255),r=0,o=0):(r=s>>>24,o+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this._strip()},o.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|i.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<i.length;s++)o=(e=(0|i.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,i){var r,n,o,s=t.words,a=e.words,u=i.words,h=0,l=0|s[0],c=8191&l,f=l>>>13,A=0|s[1],p=8191&A,d=A>>>13,m=0|s[2],y=8191&m,g=m>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],M=8191&x,_=x>>>13,S=0|s[5],B=8191&S,E=S>>>13,C=0|s[6],T=8191&C,F=C>>>13,P=0|s[7],O=8191&P,D=P>>>13,R=0|s[8],I=8191&R,U=R>>>13,L=0|s[9],k=8191&L,j=L>>>13,Q=0|a[0],N=8191&Q,z=Q>>>13,H=0|a[1],V=8191&H,G=H>>>13,K=0|a[2],Y=8191&K,X=K>>>13,W=0|a[3],q=8191&W,Z=W>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,At=0|a[9],pt=8191&At,dt=At>>>13;i.negative=t.negative^e.negative,i.length=19;var mt=(h+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,z))+Math.imul(f,N)|0))<<13)|0;h=((o=Math.imul(f,z))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,z))+Math.imul(d,N)|0,o=Math.imul(d,z);var yt=(h+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,V)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,z))+Math.imul(g,N)|0,o=Math.imul(g,z),r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(d,V)|0,o=o+Math.imul(d,G)|0;var gt=(h+(r=r+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(b,N),n=(n=Math.imul(b,z))+Math.imul(w,N)|0,o=Math.imul(w,z),r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0,r=r+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(d,Y)|0,o=o+Math.imul(d,X)|0;var vt=(h+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,q)|0))<<13)|0;h=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(M,N),n=(n=Math.imul(M,z))+Math.imul(_,N)|0,o=Math.imul(_,z),r=r+Math.imul(b,V)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(y,Y)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(d,q)|0,o=o+Math.imul(d,Z)|0;var bt=(h+(r=r+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(B,N),n=(n=Math.imul(B,z))+Math.imul(E,N)|0,o=Math.imul(E,z),r=r+Math.imul(M,V)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(b,Y)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,Z)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(d,$)|0,o=o+Math.imul(d,tt)|0;var wt=(h+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;h=((o=o+Math.imul(f,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,N),n=(n=Math.imul(T,z))+Math.imul(F,N)|0,o=Math.imul(F,z),r=r+Math.imul(B,V)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,r=r+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(d,it)|0,o=o+Math.imul(d,rt)|0;var xt=(h+(r=r+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,st)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,z))+Math.imul(D,N)|0,o=Math.imul(D,z),r=r+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,G)|0,r=r+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(d,ot)|0,o=o+Math.imul(d,st)|0;var Mt=(h+(r=r+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,N),n=(n=Math.imul(I,z))+Math.imul(U,N)|0,o=Math.imul(U,z),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,G)|0,r=r+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,r=r+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(d,ut)|0,o=o+Math.imul(d,ht)|0;var _t=(h+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,z))+Math.imul(j,N)|0,o=Math.imul(j,z),r=r+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,G)|0,r=r+Math.imul(O,Y)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,r=r+Math.imul(T,q)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(F,q)|0,o=o+Math.imul(F,Z)|0,r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(_,it)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(d,ct)|0,o=o+Math.imul(d,ft)|0;var St=(h+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(f,pt)|0))<<13)|0;h=((o=o+Math.imul(f,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(k,V),n=(n=Math.imul(k,G))+Math.imul(j,V)|0,o=Math.imul(j,G),r=r+Math.imul(I,Y)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(U,Y)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,r=r+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var Bt=(h+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,dt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((o=o+Math.imul(d,dt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(k,Y),n=(n=Math.imul(k,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(I,q)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,Z)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(T,it)|0,n=(n=n+Math.imul(T,rt)|0)+Math.imul(F,it)|0,o=o+Math.imul(F,rt)|0,r=r+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,dt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((o=o+Math.imul(g,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(k,q),n=(n=Math.imul(k,Z))+Math.imul(j,q)|0,o=Math.imul(j,Z),r=r+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(D,it)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ft)|0;var Ct=(h+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((o=o+Math.imul(w,dt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(k,$),n=(n=Math.imul(k,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(I,it)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(U,it)|0,o=o+Math.imul(U,rt)|0,r=r+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var Tt=(h+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,dt)|0)+Math.imul(_,pt)|0))<<13)|0;h=((o=o+Math.imul(_,dt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(k,it),n=(n=Math.imul(k,rt))+Math.imul(j,it)|0,o=Math.imul(j,rt),r=r+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(U,ot)|0,o=o+Math.imul(U,st)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(T,ct)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(F,ct)|0,o=o+Math.imul(F,ft)|0;var Ft=(h+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,dt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((o=o+Math.imul(E,dt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(k,ot),n=(n=Math.imul(k,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(U,ut)|0,o=o+Math.imul(U,ht)|0,r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Pt=(h+(r=r+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,dt)|0)+Math.imul(F,pt)|0))<<13)|0;h=((o=o+Math.imul(F,dt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(k,ut),n=(n=Math.imul(k,ht))+Math.imul(j,ut)|0,o=Math.imul(j,ht),r=r+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(U,ct)|0,o=o+Math.imul(U,ft)|0;var Ot=(h+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,dt)|0)+Math.imul(D,pt)|0))<<13)|0;h=((o=o+Math.imul(D,dt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,ct),n=(n=Math.imul(k,ft))+Math.imul(j,ct)|0,o=Math.imul(j,ft);var Dt=(h+(r=r+Math.imul(I,pt)|0)|0)+((8191&(n=(n=n+Math.imul(I,dt)|0)+Math.imul(U,pt)|0))<<13)|0;h=((o=o+Math.imul(U,dt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Rt=(h+(r=Math.imul(k,pt))|0)+((8191&(n=(n=Math.imul(k,dt))+Math.imul(j,pt)|0))<<13)|0;return h=((o=Math.imul(j,dt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=mt,u[1]=yt,u[2]=gt,u[3]=vt,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=_t,u[9]=St,u[10]=Bt,u[11]=Et,u[12]=Ct,u[13]=Tt,u[14]=Ft,u[15]=Pt,u[16]=Ot,u[17]=Dt,u[18]=Rt,0!==h&&(u[19]=h,i.length++),i};function y(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var s=n;n=0;for(var a=67108863&r,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;a=67108863&(f=f+a|0),n+=(s=(s=s+(c/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}i.words[o]=a,r=s,s=n}return 0!==r?i.words[o]=r:i.length--,i._strip()}function g(t,e,i){return y(t,e,i)}function v(t,e){this.x=t,this.y=e}Math.imul||(m=d),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?m(this,t,e):i<63?d(this,t,e):i<1024?y(this,t,e):g(this,t,e)},v.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},v.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},v.prototype.permute=function(t,e,i,r,n,o){for(var s=0;s<o;s++)r[s]=e[t[s]],n[s]=i[t[s]]},v.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var c=u,f=h,A=0;A<s;A++){var p=i[l+A],d=r[l+A],m=i[l+A+s],y=r[l+A+s],g=c*m-f*y;y=c*y+f*m,m=g,i[l+A]=p+m,r[l+A]=d+y,i[l+A+s]=p-m,r[l+A+s]=d-y,A!==a&&(g=u*c-h*f,f=u*f+h*c,c=g)}},v.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},v.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},v.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},v.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},v.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},v.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,n),this.transform(h,o,l,c,r,n);for(var A=0;A<r;A++){var p=a[A]*l[A]-u[A]*c[A];u[A]=a[A]*c[A]+u[A]*l[A],a[A]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),g(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var i=0,n=0;n<this.length;n++){var o=(0|this.words[n])*t,s=(67108863&o)+(67108863&i);i>>=26,i+=o/67108864|0,i+=s>>>26,this.words[n]=67108863&s}return 0!==i&&(this.words[n]=i,this.length++),this.length=0===t?1:this.length,e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=t.words[r]>>>n&1}return e}(t);if(0===e.length)return new o(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i)&&!!(this.words[i]&n)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,s=0|n.words[n.length-1];0!==(i=26-this._countBits(s))&&(n=n.ushln(i),r.iushln(i),s=0|n.words[n.length-1]);var a,u=r.length-n.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=r.clone()._ishlnsubmul(n,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(i*n+(0|this.words[o]))%t;return e?-n:n},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*i;this.words[n]=o/t|0,i=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var l=i.clone(),c=e.clone();!e.isZero();){for(var f=0,A=1;0==(e.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(l),s.isub(c)),n.iushrn(1),s.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(c)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),s.isub(u)):(i.isub(e),a.isub(n),u.isub(s))}return{a:a,b:u,gcd:i.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new o(1),a=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(a)):(i.isub(e),a.isub(s))}return(n=0===e.cmpn(1)?s:a).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new B(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){B.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},n(x,w),x.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(M,w),n(_,w),n(S,w),S.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new M;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return b[t]=e,e},B.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},B.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},B.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},B.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},B.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},B.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},B.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},B.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},B.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},B.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},B.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},B.prototype.isqr=function(t){return this.imul(t,t.clone())},B.prototype.sqr=function(t){return this.mul(t,t)},B.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),A=this.pow(t,n),p=s;0!==A.cmp(a);){for(var d=A,m=0;0!==d.cmp(a);m++)d=d.redSqr();r(m<p);var y=this.pow(c,new o(1).iushln(p-m-1));f=f.redMul(y),c=y.redSqr(),A=A.redMul(c),p=m}return f},B.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},B.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var h=e.words[r],l=u-1;l>=0;l--){var c=h>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++a||0===r&&0===l)&&(n=this.mul(n,i[s]),a=0,s=0)):a=0}u=26}return n},B.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},B.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},n(E,B),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(e,i("3IRH")(t))},gw8B:function(t,e,i){(function(e){var r=i("lZ6o"),n=i("ewJk");t.exports=function(t){return new s(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function a(t,i,r){Array.isArray(t)||(t=t.toArray());var n=new e(t);if(r&&n.length<r){var o=new e(r-n.length);o.fill(0),n=e.concat([o,n])}return i?n.toString(i):n}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},s.prototype.computeSecret=function(t,i,r){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),a(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},s.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),a(i,t)},s.prototype.getPrivateKey=function(t){return a(this.keys.getPrivate(),t)},s.prototype.setPublicKey=function(t,i){return i=i||"utf8",e.isBuffer(t)||(t=new e(t,i)),this.keys._importPublic(t),this},s.prototype.setPrivateKey=function(t,i){i=i||"utf8",e.isBuffer(t)||(t=new e(t,i));var r=new n(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(e,i("EuP9").Buffer)},hBsI:function(t,e,i){"use strict";t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var i,r="boolean"==typeof e.cycles&&e.cycles,n=e.cmp&&(i=e.cmp,function(t){return function(e,r){var n={key:e,value:t[e]},o={key:r,value:t[r]};return i(n,o)}}),o=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var i,s;if(Array.isArray(e)){for(s="[",i=0;i<e.length;i++)i&&(s+=","),s+=t(e[i])||"null";return s+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=o.push(e)-1,u=Object.keys(e).sort(n&&n(e));for(s="",i=0;i<u.length;i++){var h=u[i],l=t(e[h]);l&&(s&&(s+=","),s+=JSON.stringify(h)+":"+l)}return o.splice(a,1),"{"+s+"}"}}(t)}},hPi6:function(t,e,i){"use strict";t.exports=RangeError},hQ80:function(t,e,i){"use strict";var r,n=e,o=i("3PYz"),s=i("tRuz"),a=i("TkWM").assert;function u(t){"short"===t.type?this.curve=new s.short(t):"edwards"===t.type?this.curve=new s.edwards(t):this.curve=new s.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var i=new u(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:i}),i}})}n.PresetCurve=u,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=i("9bI3")}catch(t){r=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},hgsc:function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(10).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function h(t,e,i,r){for(var n=0,o=Math.min(t.length,i),s=e;s<o;s++){var a=t.charCodeAt(s)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o=0,s=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,s=o%r,a=Math.min(o,o-s)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var c=1;for(u=h(t,l,t.length,e),l=0;l<s;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function A(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=67108863&s,u=s/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),A=Math.max(0,h-t.length+1);A<=f;A++){var p=h-A|0;l+=(s=(n=0|t.words[p])*(o=0|e.words[A])+c)/67108864|0,c=67108863&s}i.words[h]=0|c,u=0|l}return 0!==u?i.words[h]=0|u:i.length--,i.strip()}o.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],A=f[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var d=p.modn(A).toString(t);i=(p=p.idivn(A)).isZero()?d+i:l[h-d.length]+d+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,h=new t(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[a]=s;for(;a<o;a++)h[a]=0}else{for(a=0;a<o-n;a++)h[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[o-a-1]=s}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|i.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<i.length;s++)o=(e=(0|i.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,s=t.words,a=e.words,u=i.words,h=0,l=0|s[0],c=8191&l,f=l>>>13,A=0|s[1],p=8191&A,d=A>>>13,m=0|s[2],y=8191&m,g=m>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],M=8191&x,_=x>>>13,S=0|s[5],B=8191&S,E=S>>>13,C=0|s[6],T=8191&C,F=C>>>13,P=0|s[7],O=8191&P,D=P>>>13,R=0|s[8],I=8191&R,U=R>>>13,L=0|s[9],k=8191&L,j=L>>>13,Q=0|a[0],N=8191&Q,z=Q>>>13,H=0|a[1],V=8191&H,G=H>>>13,K=0|a[2],Y=8191&K,X=K>>>13,W=0|a[3],q=8191&W,Z=W>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,At=0|a[9],pt=8191&At,dt=At>>>13;i.negative=t.negative^e.negative,i.length=19;var mt=(h+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,z))+Math.imul(f,N)|0))<<13)|0;h=((o=Math.imul(f,z))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,z))+Math.imul(d,N)|0,o=Math.imul(d,z);var yt=(h+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,V)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,z))+Math.imul(g,N)|0,o=Math.imul(g,z),r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(d,V)|0,o=o+Math.imul(d,G)|0;var gt=(h+(r=r+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(b,N),n=(n=Math.imul(b,z))+Math.imul(w,N)|0,o=Math.imul(w,z),r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0,r=r+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(d,Y)|0,o=o+Math.imul(d,X)|0;var vt=(h+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,q)|0))<<13)|0;h=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(M,N),n=(n=Math.imul(M,z))+Math.imul(_,N)|0,o=Math.imul(_,z),r=r+Math.imul(b,V)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(y,Y)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(d,q)|0,o=o+Math.imul(d,Z)|0;var bt=(h+(r=r+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(B,N),n=(n=Math.imul(B,z))+Math.imul(E,N)|0,o=Math.imul(E,z),r=r+Math.imul(M,V)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(b,Y)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,Z)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(d,$)|0,o=o+Math.imul(d,tt)|0;var wt=(h+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;h=((o=o+Math.imul(f,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,N),n=(n=Math.imul(T,z))+Math.imul(F,N)|0,o=Math.imul(F,z),r=r+Math.imul(B,V)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,r=r+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(d,it)|0,o=o+Math.imul(d,rt)|0;var xt=(h+(r=r+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,st)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,z))+Math.imul(D,N)|0,o=Math.imul(D,z),r=r+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,G)|0,r=r+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(d,ot)|0,o=o+Math.imul(d,st)|0;var Mt=(h+(r=r+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,N),n=(n=Math.imul(I,z))+Math.imul(U,N)|0,o=Math.imul(U,z),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,G)|0,r=r+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,r=r+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(d,ut)|0,o=o+Math.imul(d,ht)|0;var _t=(h+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,z))+Math.imul(j,N)|0,o=Math.imul(j,z),r=r+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,G)|0,r=r+Math.imul(O,Y)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,r=r+Math.imul(T,q)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(F,q)|0,o=o+Math.imul(F,Z)|0,r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(_,it)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(d,ct)|0,o=o+Math.imul(d,ft)|0;var St=(h+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(f,pt)|0))<<13)|0;h=((o=o+Math.imul(f,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(k,V),n=(n=Math.imul(k,G))+Math.imul(j,V)|0,o=Math.imul(j,G),r=r+Math.imul(I,Y)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(U,Y)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,r=r+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var Bt=(h+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,dt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((o=o+Math.imul(d,dt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(k,Y),n=(n=Math.imul(k,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(I,q)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,Z)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(T,it)|0,n=(n=n+Math.imul(T,rt)|0)+Math.imul(F,it)|0,o=o+Math.imul(F,rt)|0,r=r+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,dt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((o=o+Math.imul(g,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(k,q),n=(n=Math.imul(k,Z))+Math.imul(j,q)|0,o=Math.imul(j,Z),r=r+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(D,it)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ft)|0;var Ct=(h+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((o=o+Math.imul(w,dt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(k,$),n=(n=Math.imul(k,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(I,it)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(U,it)|0,o=o+Math.imul(U,rt)|0,r=r+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var Tt=(h+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,dt)|0)+Math.imul(_,pt)|0))<<13)|0;h=((o=o+Math.imul(_,dt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(k,it),n=(n=Math.imul(k,rt))+Math.imul(j,it)|0,o=Math.imul(j,rt),r=r+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(U,ot)|0,o=o+Math.imul(U,st)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(T,ct)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(F,ct)|0,o=o+Math.imul(F,ft)|0;var Ft=(h+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,dt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((o=o+Math.imul(E,dt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(k,ot),n=(n=Math.imul(k,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(U,ut)|0,o=o+Math.imul(U,ht)|0,r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Pt=(h+(r=r+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,dt)|0)+Math.imul(F,pt)|0))<<13)|0;h=((o=o+Math.imul(F,dt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(k,ut),n=(n=Math.imul(k,ht))+Math.imul(j,ut)|0,o=Math.imul(j,ht),r=r+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(U,ct)|0,o=o+Math.imul(U,ft)|0;var Ot=(h+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,dt)|0)+Math.imul(D,pt)|0))<<13)|0;h=((o=o+Math.imul(D,dt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,ct),n=(n=Math.imul(k,ft))+Math.imul(j,ct)|0,o=Math.imul(j,ft);var Dt=(h+(r=r+Math.imul(I,pt)|0)|0)+((8191&(n=(n=n+Math.imul(I,dt)|0)+Math.imul(U,pt)|0))<<13)|0;h=((o=o+Math.imul(U,dt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Rt=(h+(r=Math.imul(k,pt))|0)+((8191&(n=(n=Math.imul(k,dt))+Math.imul(j,pt)|0))<<13)|0;return h=((o=Math.imul(j,dt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=mt,u[1]=yt,u[2]=gt,u[3]=vt,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=_t,u[9]=St,u[10]=Bt,u[11]=Et,u[12]=Ct,u[13]=Tt,u[14]=Ft,u[15]=Pt,u[16]=Ot,u[17]=Dt,u[18]=Rt,0!==h&&(u[19]=h,i.length++),i};function d(t,e,i){return(new m).mulp(t,e,i)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=A),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?A(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var s=n;n=0;for(var a=67108863&r,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;a=67108863&(f=f+a|0),n+=(s=(s=s+(c/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}i.words[o]=a,r=s,s=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},m.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},m.prototype.permute=function(t,e,i,r,n,o){for(var s=0;s<o;s++)r[s]=e[t[s]],n[s]=i[t[s]]},m.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var c=u,f=h,A=0;A<s;A++){var p=i[l+A],d=r[l+A],m=i[l+A+s],y=r[l+A+s],g=c*m-f*y;y=c*y+f*m,m=g,i[l+A]=p+m,r[l+A]=d+y,i[l+A+s]=p-m,r[l+A+s]=d-y,A!==a&&(g=u*c-h*f,f=u*f+h*c,c=g)}},m.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},m.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},m.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,n),this.transform(h,o,l,c,r,n);for(var A=0;A<r;A++){var p=a[A]*l[A]-u[A]*c[A];u[A]=a[A]*c[A]+u[A]*l[A],a[A]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this.length=0===t?1:this.length,this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i)&&!!(this.words[i]&n)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,s=0|n.words[n.length-1];0!==(i=26-this._countBits(s))&&(n=n.ushln(i),r.iushln(i),s=0|n.words[n.length-1]);var a,u=r.length-n.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=r.clone()._ishlnsubmul(n,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var l=i.clone(),c=e.clone();!e.isZero();){for(var f=0,A=1;0==(e.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(l),s.isub(c)),n.iushrn(1),s.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(c)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),s.isub(u)):(i.isub(e),a.isub(n),u.isub(s))}return{a:a,b:u,gcd:i.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new o(1),a=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(a)):(i.isub(e),a.isub(s))}return(n=0===e.cmpn(1)?s:a).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},n(v,g),v.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,g),n(w,g),n(x,g),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),A=this.pow(t,n),p=s;0!==A.cmp(a);){for(var d=A,m=0;0!==d.cmp(a);m++)d=d.redSqr();r(m<p);var y=this.pow(c,new o(1).iushln(p-m-1));f=f.redMul(y),c=y.redSqr(),A=A.redMul(c),p=m}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var h=e.words[r],l=u-1;l>=0;l--){var c=h>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++a||0===r&&0===l)&&(n=this.mul(n,i[s]),a=0,s=0)):a=0}u=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new _(t)},n(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(e,i("3IRH")(t))},hkfz:function(t,e,i){"use strict";var r=i("YP8Q"),n=i("TkWM"),o=n.assert,s=n.cachedProperty,a=n.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(o(e.length===2*t.encodingLength,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof r&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}s(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),s(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),s(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),s(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},iLJX:function(t,e,i){var r=e;r.der=i("reGU"),r.pem=i("vWx2")},iNQt:function(t,e,i){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},e.ip=function(t,e,i,r){for(var n=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)n<<=1,n|=e>>>a+s&1;for(a=0;a<=24;a+=8)n<<=1,n|=t>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1}i[r+0]=n>>>0,i[r+1]=o>>>0},e.rip=function(t,e,i,r){for(var n=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)n<<=1,n|=e>>>a+s&1,n<<=1,n|=t>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=e>>>a+s&1,o<<=1,o|=t>>>a+s&1;i[r+0]=n>>>0,i[r+1]=o>>>0},e.pc1=function(t,e,i,r){for(var n=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)n<<=1,n|=e>>a+s&1;for(a=0;a<=24;a+=8)n<<=1,n|=t>>a+s&1}for(a=0;a<=24;a+=8)n<<=1,n|=e>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;i[r+0]=n>>>0,i[r+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,i,n){for(var o=0,s=0,a=r.length>>>1,u=0;u<a;u++)o<<=1,o|=t>>>r[u]&1;for(u=a;u<r.length;u++)s<<=1,s|=e>>>r[u]&1;i[n+0]=o>>>0,i[n+1]=s>>>0},e.expand=function(t,e,i){var r=0,n=0;r=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=t>>>o&63;for(o=11;o>=3;o-=4)n|=t>>>o&63,n<<=6;n|=(31&t)<<1|t>>>31,e[i+0]=r>>>0,e[i+1]=n>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var i=0,r=0;r<4;r++){i<<=4,i|=n[64*r+(t>>>18-6*r&63)]}for(r=0;r<4;r++){i<<=4,i|=n[256+64*r+(e>>>18-6*r&63)]}return i>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,i=0;i<o.length;i++)e<<=1,e|=t>>>o[i]&1;return e>>>0},e.padSplit=function(t,e,i){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var n=[],o=0;o<e;o+=i)n.push(r.slice(o,o+i));return n.join(" ")}},iP15:function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation"),r=!0}return t.apply(this,arguments)}}}).call(e,i("DuR2"))},iTY7:function(t,e,i){var r=i("LC74"),n=i("3UtB").Reporter,o=i("EuP9").Buffer;function s(t,e){n.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof a||(t=new a(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(s,n),e.DecoderBuffer=s,s.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},s.prototype.restore=function(t){var e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,n.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var i=new s(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=a,a.prototype.join=function(t,e){return t||(t=new o(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(i){i.join(t,e),e+=i.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},jOgh:function(t,e,i){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i("EuP9").Buffer.isBuffer},jSRM:function(t,e,i){"use strict";var r=i("geuY"),n=i("rOku"),o=i("X3l8").Buffer;function s(t){var e,i=t.modulus.byteLength();do{e=new r(n(i))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,e){var i=function(t){var e=s(t);return{blinder:e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(e),n=e.modulus.byteLength(),a=new r(t).mul(i.blinder).umod(e.modulus),u=a.toRed(r.mont(e.prime1)),h=a.toRed(r.mont(e.prime2)),l=e.coefficient,c=e.prime1,f=e.prime2,A=u.redPow(e.exponent1).fromRed(),p=h.redPow(e.exponent2).fromRed(),d=A.isub(p).imul(l).umod(c).imul(f);return p.iadd(d).imul(i.unblinder).umod(e.modulus).toArrayLike(o,"be",n)}a.getr=s,t.exports=a},jVn3:function(t,e,i){"use strict";var r=i("PiFy"),n=i("9RdJ"),o=i("x+9s");t.exports=function(){return o(r,n,arguments)}},jkjm:function(t,e,i){"use strict";var r=i("19bf"),n=i("8YCc"),o=i("7VT+"),s=i("tXf9"),a=i("/vd3"),u=i("X3l8").Buffer;function h(t){var e;"object"!=typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=u.from(t));var i,h,l=o(t,e),c=l.tag,f=l.data;switch(c){case"CERTIFICATE":h=r.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(h||(h=r.PublicKey.decode(f,"der")),i=h.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(h.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return h.subjectPrivateKey=h.subjectPublicKey,{type:"ec",data:h};case"1.2.840.10040.4.1":return h.algorithm.params.pub_key=r.DSAparam.decode(h.subjectPublicKey.data,"der"),{type:"dsa",data:h.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var i=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=n[t.algorithm.decrypt.cipher.algo.join(".")],h=t.algorithm.decrypt.cipher.iv,l=t.subjectPrivateKey,c=parseInt(o.split("-")[1],10)/8,f=a.pbkdf2Sync(e,i,r,c,"sha1"),A=s.createDecipheriv(o,f,h),p=[];return p.push(A.update(l)),p.push(A.final()),u.concat(p)}(f=r.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(i=(h=r.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(h.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:h.algorithm.curve,privateKey:r.ECPrivateKey.decode(h.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return h.algorithm.params.priv_key=r.DSAparam.decode(h.subjectPrivateKey,"der"),{type:"dsa",params:h.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=r.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+c)}}h.signature=r.signature,t.exports=h},joVi:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="errs__"+n,f=t.util.copy(t),A="";f.level++;var p="valid"+f.level,d="key"+n,m="idx"+n,y=f.dataLevel=t.dataLevel+1,g="data"+y,v="dataProperties"+n,b=Object.keys(s||{}).filter(D),w=t.schema.patternProperties||{},x=Object.keys(w).filter(D),M=t.schema.additionalProperties,_=b.length||x.length,S=!1===M,B="object"==typeof M&&Object.keys(M).length,E=t.opts.removeAdditional,C=S||B||E,T=t.opts.ownProperties,F=t.baseId,P=t.schema.required;if(P&&(!t.opts.$data||!P.$data)&&P.length<t.opts.loopRequired)var O=t.util.toHash(P);function D(t){return"__proto__"!==t}if(r+="var "+c+" = errors;var "+p+" = true;",T&&(r+=" var "+v+" = undefined;"),C){if(r+=T?" "+v+" = "+v+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+v+".length; "+m+"++) { var "+d+" = "+v+"["+m+"]; ":" for (var "+d+" in "+l+") { ",_){if(r+=" var isAdditional"+n+" = !(false ",b.length)if(b.length>8)r+=" || validate.schema"+a+".hasOwnProperty("+d+") ";else{var R=b;if(R)for(var I=-1,U=R.length-1;I<U;)W=R[I+=1],r+=" || "+d+" == "+t.util.toQuotedString(W)+" "}if(x.length){var L=x;if(L)for(var k=-1,j=L.length-1;k<j;)ot=L[k+=1],r+=" || "+t.usePattern(ot)+".test("+d+") "}r+=" ); if (isAdditional"+n+") { "}if("all"==E)r+=" delete "+l+"["+d+"]; ";else{var Q=t.errorPath,N="' + "+d+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,d,t.opts.jsonPointers)),S)if(E)r+=" delete "+l+"["+d+"]; ";else{r+=" "+p+" = false; ";var z=u;u=t.errSchemaPath+"/additionalProperties",(it=it||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { additionalProperty: '"+N+"' } ",!1!==t.opts.messages&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var H=r;r=it.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+H+"]); ":r+=" validate.errors = ["+H+"]; return false; ":r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=z,h&&(r+=" break; ")}else if(B)if("failing"==E){r+=" var "+c+" = errors;  ";var V=t.compositeRule;t.compositeRule=f.compositeRule=!0,f.schema=M,f.schemaPath=t.schemaPath+".additionalProperties",f.errSchemaPath=t.errSchemaPath+"/additionalProperties",f.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,d,t.opts.jsonPointers);var G=l+"["+d+"]";f.dataPathArr[y]=d;var K=t.validate(f);f.baseId=F,t.util.varOccurences(K,g)<2?r+=" "+t.util.varReplace(K,g,G)+" ":r+=" var "+g+" = "+G+"; "+K+" ",r+=" if (!"+p+") { errors = "+c+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+d+"]; }  ",t.compositeRule=f.compositeRule=V}else{f.schema=M,f.schemaPath=t.schemaPath+".additionalProperties",f.errSchemaPath=t.errSchemaPath+"/additionalProperties",f.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,d,t.opts.jsonPointers);G=l+"["+d+"]";f.dataPathArr[y]=d;K=t.validate(f);f.baseId=F,t.util.varOccurences(K,g)<2?r+=" "+t.util.varReplace(K,g,G)+" ":r+=" var "+g+" = "+G+"; "+K+" ",h&&(r+=" if (!"+p+") break; ")}t.errorPath=Q}_&&(r+=" } "),r+=" }  ",h&&(r+=" if ("+p+") { ",A+="}")}var Y=t.opts.useDefaults&&!t.compositeRule;if(b.length){var X=b;if(X)for(var W,q=-1,Z=X.length-1;q<Z;){var J=s[W=X[q+=1]];if(t.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:t.util.schemaHasRules(J,t.RULES.all)){var $=t.util.getProperty(W),tt=(G=l+$,Y&&void 0!==J.default);f.schema=J,f.schemaPath=a+$,f.errSchemaPath=u+"/"+t.util.escapeFragment(W),f.errorPath=t.util.getPath(t.errorPath,W,t.opts.jsonPointers),f.dataPathArr[y]=t.util.toQuotedString(W);K=t.validate(f);if(f.baseId=F,t.util.varOccurences(K,g)<2){K=t.util.varReplace(K,g,G);var et=G}else{et=g;r+=" var "+g+" = "+G+"; "}if(tt)r+=" "+K+" ";else{if(O&&O[W]){r+=" if ( "+et+" === undefined ",T&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(W)+"') "),r+=") { "+p+" = false; ";Q=t.errorPath,z=u;var it,rt=t.util.escapeQuotes(W);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(Q,W,t.opts.jsonPointers)),u=t.errSchemaPath+"/required",(it=it||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+rt+"' } ",!1!==t.opts.messages&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+rt+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";H=r;r=it.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+H+"]); ":r+=" validate.errors = ["+H+"]; return false; ":r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=z,t.errorPath=Q,r+=" } else { "}else h?(r+=" if ( "+et+" === undefined ",T&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(W)+"') "),r+=") { "+p+" = true; } else { "):(r+=" if ("+et+" !== undefined ",T&&(r+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+t.util.escapeQuotes(W)+"') "),r+=" ) { ");r+=" "+K+" } "}}h&&(r+=" if ("+p+") { ",A+="}")}}if(x.length){var nt=x;if(nt)for(var ot,st=-1,at=nt.length-1;st<at;){J=w[ot=nt[st+=1]];if(t.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:t.util.schemaHasRules(J,t.RULES.all)){f.schema=J,f.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(ot),f.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(ot),r+=T?" "+v+" = "+v+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+v+".length; "+m+"++) { var "+d+" = "+v+"["+m+"]; ":" for (var "+d+" in "+l+") { ",r+=" if ("+t.usePattern(ot)+".test("+d+")) { ",f.errorPath=t.util.getPathExpr(t.errorPath,d,t.opts.jsonPointers);G=l+"["+d+"]";f.dataPathArr[y]=d;K=t.validate(f);f.baseId=F,t.util.varOccurences(K,g)<2?r+=" "+t.util.varReplace(K,g,G)+" ":r+=" var "+g+" = "+G+"; "+K+" ",h&&(r+=" if (!"+p+") break; "),r+=" } ",h&&(r+=" else "+p+" = true; "),r+=" }  ",h&&(r+=" if ("+p+") { ",A+="}")}}}return h&&(r+=" "+A+" if ("+c+" == errors) {"),r}},k2Sm:function(t,e,i){var r=i("X3l8").Buffer;function n(t,e,i){for(var r,n,s,a=-1,u=0;++a<8;)r=t._cipher.encryptBlock(t._prev),n=e&1<<7-a?128:0,u+=(128&(s=r[0]^n))>>a%8,t._prev=o(t._prev,i?n:s);return u}function o(t,e){var i=t.length,n=-1,o=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++n<i;)o[n]=t[n]<<1|t[n+1]>>7;return o}e.encrypt=function(t,e,i){for(var o=e.length,s=r.allocUnsafe(o),a=-1;++a<o;)s[a]=n(t,e[a],i);return s}},kCPa:function(t,e,i){"use strict";var r=i("ZdvT");if(r)try{r([],"length")}catch(t){r=null}t.exports=r},kJAH:function(t,e,i){var r=i("KDHK"),n=i("LC74");function o(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new o(t,e)},o.prototype._createNamed=function(t){var e;try{e=i("+W7P").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(t){e=function(t){this._initNamed(t)}}return n(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},o.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(r.decoders[t])),this.decoders[t]},o.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},o.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(r.encoders[t])),this.encoders[t]},o.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)}},kKzE:function(t,e,i){var r;r=function(){return e=[function(t,e,i){"use strict";function r(){var t=0,e=document.createElement("div");function i(t){return e.appendChild(t.dom),t}function n(i){for(var r=0;r<e.children.length;r++)e.children[r].style.display=r===i?"block":"none";t=i}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(i){i.preventDefault(),n(++t%e.children.length)},!1);var o,s=(performance||Date).now(),a=s,u=0,h=i(new r.Panel("FPS","#0ff","#002")),l=i(new r.Panel("MS","#0f0","#020"));return self.performance&&self.performance.memory&&(o=i(new r.Panel("MB","#f08","#201"))),n(0),{REVISION:16,dom:e,addPanel:i,showPanel:n,begin:function(){s=(performance||Date).now()},end:function(){u++;var t,e=(performance||Date).now();return l.update(e-s,200),a+1e3<=e&&(h.update(1e3*u/(e-a),100),a=e,u=0,o)&&(t=performance.memory,o.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)),e},update:function(){s=this.end()},domElement:e,setMode:n}}i.r(e),r.Panel=function(t,e,i){var r=1/0,n=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,u=48*s,h=3*s,l=2*s,c=3*s,f=15*s,A=74*s,p=30*s,d=document.createElement("canvas"),m=(d.width=a,d.height=u,d.style.cssText="width:80px;height:48px",d.getContext("2d"));return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,a,u),m.fillStyle=e,m.fillText(t,h,l),m.fillRect(c,f,A,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c,f,A,p),{dom:d,update:function(u,y){r=Math.min(r,u),n=Math.max(n,u),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,a,f),m.fillStyle=e,m.fillText(o(u)+" "+t+" ("+o(r)+"-"+o(n)+")",h,l),m.drawImage(d,c+s,f,A-s,p,c,f,A-s,p),m.fillRect(c+A-s,f,s,p),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c+A-s,f,s,o((1-u/y)*p))}}};var n=r;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,i){return(e=u(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){return"symbol"===o(t=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==o(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}var h=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.map=e,this.info={extent:{faceCount:0,vertexCount:0},model:{faceCount:0,vertexCount:0},externalModel:{faceCount:0,vertexCount:0},tiles3d:{faceCount:0,vertexCount:0}},this.initDom()}var e,i;return e=t,(i=[{key:"initDom",value:function(){this.domElement=document.createElement("div"),this.domElement.classList.add("fengmap-performance-container"),this.domElement.innerHTML='\n    <div class="fengmap-performance-layer extent">\n      <div class="fengmap-performance-title">extent</div>\n      <div class="fengmap-performance-item">&nbsp;&nbsp;&nbsp;&nbsp;: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">: <span class="vertex">0</span> </div>\n    </div>\n\n    <div class="fengmap-performance-layer model">\n      <div class="fengmap-performance-title">model</div>\n      <div class="fengmap-performance-item">&nbsp;&nbsp;&nbsp;&nbsp;: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">:<span class="vertex">0</span> </div>\n    </div>\n\n    <div class="fengmap-performance-layer externalModel">\n      <div class="fengmap-performance-title">externalModel</div>\n      <div class="fengmap-performance-item">&nbsp;&nbsp;&nbsp;&nbsp;: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">:<span class="vertex">0</span> </div>\n    </div>\n\n\n    <div class="fengmap-performance-layer tiles3d">\n      <div class="fengmap-performance-title">tiles3d</div>\n      <div class="fengmap-performance-item">&nbsp;&nbsp;&nbsp;&nbsp;: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">:<span class="vertex">0</span> </div>\n    </div>\n    ';var t=document.createElement("style");t.textContent="\n      .fengmap-performance-container {\n        position: absolute;\n        top: 2px;\n        right: 2px;\n        cursor: pointer;\n        z-index: 10000;\n        width: 180px;\n        background-color: rgba(0,0,2,0.6);\n        padding: 8px;\n        border-radius: 4px;\n        font-family: sans-serif;\n        color: rgba(25,255,255,1);\n      }\n\n      .fengmap-performance-container span {\n        margin-left: 15px;\n        color:#fff;\n      }\n\n      .fengmap-performance-layer {\n        margin-bottom: 10px;\n      }\n\n      .fengmap-performance-title{\n        font-size: 18px;\n        margin-bottom: 2px;\n        color:#fff;\n      }\n\n      .fengmap-performance-item {\n        margin-left: 20px;\n        font-size: 14px;\n      }\n    ",document.getElementsByTagName("HEAD").item(0).appendChild(t)}},{key:"handleLayer",value:function(t,e){var i,r=this;e!==fengmap.FMType.MODEL_LAYER&&e!==fengmap.FMType.EXTENT_LAYER&&e!==fengmap.FMType.EXTERNAL_MODEL_LAYER||(i=s(s(s({},fengmap.FMType.EXTENT_LAYER,"extent"),fengmap.FMType.MODEL_LAYER,"model"),fengmap.FMType.EXTERNAL_MODEL_LAYER,"externalModel")[e],t.traverse(function(t){var n;"Mesh"===t.type&&(e===fengmap.FMType.EXTERNAL_MODEL_LAYER?t.geometry.attributes?(r.info[i].vertexCount+=t.geometry.attributes.position.count,r.info[i].faceCount+=t.geometry.index.count/3):t.geometry.faces&&(r.info[i].faceCount+=null!=(n=null==(n=t.geometry)||null==(n=n.faces)?void 0:n.length)?n:0,r.info[i].vertexCount+=null!=(n=null==(n=t.geometry)||null==(n=n.vertices)?void 0:n.length)?n:0):(r.info[i].faceCount+=null!=(n=null==(n=t.geometry)||null==(n=n.faces)?void 0:n.length)?n:0,r.info[i].vertexCount+=null!=(t=null==(n=t.geometry)||null==(n=n.vertices)?void 0:n.length)?t:0))}),document.querySelector(".".concat(i," .face")).innerText=Number(this.info[i].faceCount).toLocaleString(),document.querySelector(".".concat(i," .vertex")).innerText=Number(this.info[i].vertexCount).toLocaleString())}},{key:"clear",value:function(){this.info.extent.faceCount=0,this.info.extent.vertexCount=0,this.info.model.faceCount=0,this.info.model.vertexCount=0,this.info.externalModel.faceCount=0,this.info.externalModel.vertexCount=0,this.info.tiles3d.faceCount=0,this.info.tiles3d.vertexCount=0}},{key:"handleTile3d",value:function(){for(var t=this,e=this.map.getRenderManager().get3DTilesLayerSceneArr(),i="tiles3d",r=0;r<e.length;r++){var n=e[r];n&&n.traverse(function(e){"Mesh"===e.type&&(t.info[i].vertexCount+=e.geometry.attributes.position.count,t.info[i].faceCount+=e.geometry.index.count/3)})}document.querySelector(".".concat(i," .face")).innerText=Number(this.info[i].faceCount).toLocaleString(),document.querySelector(".".concat(i," .vertex")).innerText=Number(this.info[i].vertexCount).toLocaleString()}},{key:"update",value:function(){var t=this;this.map&&(this.clear(),this.map.getRenderManager().getRenderList().forEach(function(e,i){i=i.split("%A%B%C%D")[2],t.handleLayer(e,+i)}),this.handleTile3d())}}])&&a(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===l(t=function(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==l(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}i=function(){function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.u=e,this.v=!0,this.h=void 0===i.needUpdateVertex||i.needUpdateVertex,this.g=void 0===i.needUpdateFPS||i.needUpdateFPS,this.initFPS(),this.initVertex(e),this.update=this.update.bind(this),this.visible=!0}var e,i;return e=t,(i=[{key:"visible",get:function(){return this.v},set:function(t){(this.v=t)?(this.u.on("update",this.update),this.S.domElement.style.top="2px",this.j.domElement.style.top="2px"):(this.u.off("update",this.update),this.S.domElement.style.top="-9999px",this.j.domElement.style.top="-9999px")}},{key:"update",value:function(){this.g&&this.S.update(),this.h&&this.j.update()}},{key:"initFPS",value:function(){this.S=new n,this.S.setMode(0),this.S.domElement.style.position="absolute",this.S.domElement.style.left="2px",document.body.appendChild(this.S.domElement)}},{key:"initVertex",value:function(t){this.j=new h(t),this.j.domElement.style.position="absolute",this.j.domElement.style.right="2px",document.body.appendChild(this.j.domElement)}}])&&c(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var f=window.fengmap||{};f.FMPerformance=i,e.default=f}],i={},t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"M",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.M)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.M?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=0).default;function t(r){var n;return(i[r]||(n=i[r]={i:r,l:!1,exports:{}},e[r].call(n.exports,n,n.exports,t),n.l=!0,n)).exports}var e,i},t.exports=r()},kkc6:function(t,e,i){var r=i("EuP9"),n=r.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function s(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(n,s),s.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},lQBd:function(t,e,i){"use strict";var r=i("KDHK"),n=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),s=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}),u=r.define("RelativeDistinguishedName",function(){this.setof(o)}),h=r.define("RDNSequence",function(){this.seqof(u)}),l=r.define("Name",function(){this.choice({rdnSequence:this.use(h)})}),c=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))}),f=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),A=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(l),this.key("validity").use(c),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),p=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(A),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())});t.exports=p},lUSU:function(t,e,i){var r=i("H2Pp");e.encrypt=function(t,e){var i=r(e,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},e.decrypt=function(t,e){var i=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return r(n,i)}},lXn8:function(t,e,i){"use strict";var r=i("LC74"),n=i("zvjZ"),o=i("CzQx"),s=i("X3l8").Buffer,a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}r(u,n),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=s.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},lXu4:function(t,e,i){"use strict";t.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},lZ6o:function(t,e,i){"use strict";var r=e;r.version=i("KYqO").version,r.utils=i("TkWM"),r.rand=i("txgm"),r.curve=i("tRuz"),r.curves=i("hQ80"),r.ec=i("F11g"),r.eddsa=i("+e0g")},lagR:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f="errs__"+n,A=t.util.copy(t),p="";A.level++;var d="valid"+A.level,m=A.baseId,y="prevValid"+n,g="passingSchemas"+n;r+="var "+f+" = errors , "+y+" = false , "+c+" = false , "+g+" = null; ";var v=t.compositeRule;t.compositeRule=A.compositeRule=!0;var b=s;if(b)for(var w,x=-1,M=b.length-1;x<M;)w=b[x+=1],(t.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:t.util.schemaHasRules(w,t.RULES.all))?(A.schema=w,A.schemaPath=a+"["+x+"]",A.errSchemaPath=u+"/"+x,r+="  "+t.validate(A)+" ",A.baseId=m):r+=" var "+d+" = true; ",x&&(r+=" if ("+d+" && "+y+") { "+c+" = false; "+g+" = ["+g+", "+x+"]; } else { ",p+="}"),r+=" if ("+d+") { "+c+" = "+y+" = true; "+g+" = "+x+"; }";return t.compositeRule=A.compositeRule=v,r+=p+"if (!"+c+") {   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { passingSchemas: "+g+" } ",!1!==t.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&h&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",t.opts.allErrors&&(r+=" } "),r}},llro:function(t,e,i){"use strict";t.exports=Function.prototype.call},msF0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.raw=void 0,e.default=function(t){if(!this.emitFile)throw new Error("File Loader\n\nemitFile is required from module system");var e=n.default.getOptions(this)||{};(0,o.default)(s.default,e,"File Loader");var i=e.context||this.rootContext||this.options&&this.options.context,a=n.default.interpolateName(this,e.name,{context:i,content:t,regExp:e.regExp}),u=a;e.outputPath&&(u="function"==typeof e.outputPath?e.outputPath(a):r.default.posix.join(e.outputPath,a));if(e.useRelativePath){var h=this.resourcePath,l=e.context?i:this._module&&this._module.issuer&&this._module.issuer.context,c=l&&r.default.relative(l,h).split(r.default.sep).join("/"),f=c&&`${r.default.dirname(c)}/`;u=~f.indexOf("../")?r.default.posix.join(u,f,a):r.default.posix.join(f,a)}var A=`__webpack_public_path__ + ${JSON.stringify(u)}`;e.publicPath&&(A="function"==typeof e.publicPath?e.publicPath(a):e.publicPath.endsWith("/")?e.publicPath+a:`${e.publicPath}/${a}`,A=JSON.stringify(A));(void 0===e.emitFile||e.emitFile)&&this.emitFile(u,t);return`module.exports = ${A};`};var r=a(i("o/zv")),n=a(i("3cnB")),o=a(i("OXfi")),s=a(i("ejoV"));function a(t){return t&&t.__esModule?t:{default:t}}e.raw=!0},nF6k:function(t,e,i){"use strict";const r=i("o/zv"),n=i("Ogt7"),o=i("evxy"),s=/[\uD800-\uDFFF]./,a=n.filter(t=>s.test(t)),u={};t.exports=function(t,e,i){let n;const s=t.resourceQuery&&t.resourceQuery.length>1;n="function"==typeof e?e(t.resourcePath,s?t.resourceQuery:void 0):e||"[hash].[ext]";const h=i.context,l=i.content,c=i.regExp;let f="bin",A="file",p="",d="",m="";if(t.resourcePath){const e=r.parse(t.resourcePath);let i=t.resourcePath;e.ext&&(f=e.ext.substr(1)),e.dir&&(A=e.name,i=e.dir+r.sep),1===(p=void 0!==h?(p=r.relative(h,i+"_").replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1")).substr(0,p.length-1):i.replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1")).length?p="":p.length>1&&(d=r.basename(p))}if(t.resourceQuery&&t.resourceQuery.length>1){const e=(m=t.resourceQuery).indexOf("#");e>=0&&(m=m.substr(0,e))}let y=n;if(l&&(y=y.replace(/\[(?:([^[:\]]+):)?(?:hash|contenthash)(?::([a-z]+\d*))?(?::(\d+))?\]/gi,(t,e,i,r)=>o(l,e,i,parseInt(r,10))).replace(/\[emoji(?::(\d+))?\]/gi,(t,e)=>(function(t,e){if(u[t])return u[t];e=e||1;const i=[];do{if(!a.length)throw new Error("Ran out of emoji");const t=Math.floor(Math.random()*a.length);i.push(a[t]),a.splice(t,1)}while(--e>0);const r=i.join("");return u[t]=r,r})(l,parseInt(e,10)))),y=y.replace(/\[ext\]/gi,()=>f).replace(/\[name\]/gi,()=>A).replace(/\[path\]/gi,()=>p).replace(/\[folder\]/gi,()=>d).replace(/\[query\]/gi,()=>m),c&&t.resourcePath){const e=t.resourcePath.match(new RegExp(c));e&&e.forEach((t,e)=>{y=y.replace(new RegExp("\\["+e+"\\]","ig"),t)})}return"object"==typeof t.options&&"function"==typeof t.options.customInterpolateName&&(y=t.options.customInterpolateName.call(t,y,e,i)),y}},nYxf:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f="errs__"+n,A=t.util.copy(t),p="";A.level++;var d,m="valid"+A.level,y="ifPassed"+t.level,g=A.baseId;r+="var "+y+";";var v=s;if(v)for(var b,w=-1,x=v.length-1;w<x;){if(b=v[w+=1],w&&!d&&(r+=" if (!"+y+") { ",p+="}"),b.if&&(t.opts.strictKeywords?"object"==typeof b.if&&Object.keys(b.if).length>0:t.util.schemaHasRules(b.if,t.RULES.all))){r+=" var "+f+" = errors;   ";var M=t.compositeRule;if(t.compositeRule=A.compositeRule=!0,A.createErrors=!1,A.schema=b.if,A.schemaPath=a+"["+w+"].if",A.errSchemaPath=u+"/"+w+"/if",r+="  "+t.validate(A)+" ",A.baseId=g,A.createErrors=!0,t.compositeRule=A.compositeRule=M,r+=" "+y+" = "+m+"; if ("+y+") {  ","boolean"==typeof b.then){if(!1===b.then){(S=S||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { caseIndex: "+w+" } ",!1!==t.opts.messages&&(r+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var _=r;r=S.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var "+m+" = "+b.then+"; "}else A.schema=b.then,A.schemaPath=a+"["+w+"].then",A.errSchemaPath=u+"/"+w+"/then",r+="  "+t.validate(A)+" ",A.baseId=g;r+="  } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } } "}else if(r+=" "+y+" = true;  ","boolean"==typeof b.then){if(!1===b.then){var S;(S=S||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { caseIndex: "+w+" } ",!1!==t.opts.messages&&(r+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";_=r;r=S.pop(),!t.compositeRule&&h?t.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var "+m+" = "+b.then+"; "}else A.schema=b.then,A.schemaPath=a+"["+w+"].then",A.errSchemaPath=u+"/"+w+"/then",r+="  "+t.validate(A)+" ",A.baseId=g;d=b.continue}return r+=p+"var "+c+" = "+m+";"}},nbHd:function(t,e,i){"use strict";(function(e){var r=i("+IQu"),n="undefined"==typeof globalThis?e:globalThis;t.exports=function(){for(var t=[],e=0;e<r.length;e++)"function"==typeof n[r[e]]&&(t[t.length]=r[e]);return t}}).call(e,i("DuR2"))},nmTc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAApRJREFUSEuVlluITnEUxX/rUZ5ESjy4XyIxJkUKJQmJMA9DLoWpKddSLsnlYWqmUJpchjeSkEtuuRQP7rfcy8QbSVIivKilPf7fdHwz3/m+2XU6ndNur/9ee691jqggbE8BlgLLUvoP4DlwVFJLXgmVq297B7A95d0D7gP9gAnpfkfSpFJ1cgEyxU8BeyUFQHvYXg9sAP5IGtAZSEmARMtNoEVSXakT2h4HPC6VlwdwEhgCTJX0LY9K2+uiQ6Ba0pNsbh6AgWZJqyuY0+g09JWSjnQFYL6kMxUAdAN+ATslxVK0R14HX4HN5dYwKtnuDXzuKkCs4ytJKyrooBp4BMyQdLXSDjYBW4Fpkh6UGfIBYBYwStL3SgHGAreBZ8BcSV86A7G9CDgGrJbUXJxTTmhhEaGF98Ae4Lykj4n3UHI9sBi4Lml6l4RWSE6CC6sIsIgXQF+gZ3qulxQUdRp5W7QcWJIK3wA+AJ+AEUAI7ylwRdK71NEcoAp4LSmspS06ANgeDuwCFgIXkgVcLDPkoLHQYaSeklTTAcB2L+ASML4LKi64bV1oxvYq4FBBE/91YPs8EK2G/9wqPrXtiZLuZt/bjgMNkzQ4M7eg7aGk2naALDJwLVvIdvh/DDJseV4RQGOsKDBGUqvtoWm1m8I2sgBhuWG9hWiUtMl2fMUOAi/DLYEGSSHAtrDdBGyM4QKngQXAyLgkvWkDsB0DDXsu5vE4UAucALYAu4HZwMC0pg3ATGBNep6ccLdJCpH+2yLbUbyqEx4HhV1IikKRF/sf3+JWoA/wG5gn6W2uDhIN+0vxWMR5mN9hYJ+ktXnrm+2gezgn8DPDYw9JceIOYbtGUnRdNrJD7p/+HoLjs8A5SZfLViiT8BcSUhwoDH3R5AAAAABJRU5ErkJggg=="},nyV4:function(t,e,i){"use strict";var r=i("08Lv"),n=i("LC74"),o={};e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}n(e,t);for(var i=Object.keys(o),r=0;r<i.length;r++){var s=i[r];e.prototype[s]=o[s]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new function(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}(this.options.iv);this._cbcState=t},o._update=function(t,e,i,r){var n=this._cbcState,o=this.constructor.super_.prototype,s=n.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=t[e+a];o._update.call(this,s,0,i,r);for(a=0;a<this.blockSize;a++)s[a]=i[r+a]}else{o._update.call(this,t,e,i,r);for(a=0;a<this.blockSize;a++)i[r+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=t[e+a]}}},o2Cy:function(t,e,i){var r;r=function(){return e=[function(t,e,i){"use strict";i.r(e);i={MODULE_SHORTEST:1,MODULE_BEST:2};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return"symbol"===r(t=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==r(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(n.key),n)}}var o=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}),s=(Object.assign(o.prototype,{h:function(t,e){void 0===this.u&&(this.u={});var i=this.u;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},v:function(t,e){var i;return void 0!==this.u&&void 0!==(i=this.u)[t]&&-1!==i[t].indexOf(e)},M:function(t,e){var i;void 0!==this.u&&void 0!==(t=this.u[t])&&-1!==(i=t.indexOf(e))&&t.splice(i,1)},k:function(t){if(void 0!==this.u){var e=this.u[t.type];if(void 0!==e)for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t)}}}),o);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===a(t=function(t,e){if("object"!==a(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==a(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var h=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}var e,i;return e=t,(i=[{key:"start",value:function(){this.startTime=l(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=((t=l())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}}])&&u(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(){return("undefined"==typeof performance?Date:performance).now()}for(var c=[],f=0;f<256;f++)c[f]=(f<16?"0":"")+f.toString(16);var A=1234567,p={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(c[255&t]+c[t>>8&255]+c[t>>16&255]+c[t>>24&255]+"-"+c[255&e]+c[e>>8&255]+"-"+c[e>>16&15|64]+c[e>>24&255]+"-"+c[63&i|128]+c[i>>8&255]+"-"+c[i>>16&255]+c[i>>24&255]+c[255&r]+c[r>>8&255]+c[r>>16&255]+c[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((A=16807*(A=void 0!==t?t%2147483647:A)%2147483647)-1)/2147483646},degToRad:function(t){return t*p.DEG2RAD},radToDeg:function(t){return t*p.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var o=Math.cos,s=Math.sin,a=o(i/2),u=s(i/2),h=o((e+r)/2),l=s((e+r)/2),c=o((e-r)/2),f=s((e-r)/2),A=o((r-e)/2),p=s((r-e)/2);switch(n){case"XYX":t.set(a*l,u*c,u*f,a*h);break;case"YZY":t.set(u*f,a*l,u*c,a*h);break;case"ZXZ":t.set(u*c,u*f,a*l,a*h);break;case"XZX":t.set(a*l,u*p,u*A,a*h);break;case"YXY":t.set(u*A,a*l,u*p,a*h);break;case"ZYZ":t.set(u*p,u*A,a*l,a*h)}}};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===d(t=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==d(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===y(t=function(t,e){if("object"!==y(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==y(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}o=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isQuaternion",{value:!0}),this.g=e,this.S=i,this._=r,this.j=n}var e,i,r;return e=t,r=[{key:"slerp",value:function(t,e,i,r){return i.copy(t).slerp(e,r)}},{key:"slerpFlat",value:function(t,e,i,r,n,o,s){var a,u,h,l=i[r+0],c=i[r+1],f=i[r+2],A=(i=i[r+3],r=n[o+0],n[o+1]),p=n[o+2];i===(n=n[o+3])&&l===r&&c===A&&f===p||(o=1-s,a=0<=(u=l*r+c*A+f*p+i*n)?1:-1,(h=1-u*u)>Number.EPSILON&&(h=Math.sqrt(h),u=Math.atan2(h,u*a),o=Math.sin(o*u)/h,s=Math.sin(s*u)/h),l=l*o+r*(u=s*a),c=c*o+A*u,f=f*o+p*u,i=i*o+n*u,o===1-s&&(l*=h=1/Math.sqrt(l*l+c*c+f*f+i*i),c*=h,f*=h,i*=h)),t[e]=l,t[e+1]=c,t[e+2]=f,t[e+3]=i}},{key:"multiplyQuaternionsFlat",value:function(t,e,i,r,n,o){var s=i[r],a=i[r+1],u=i[r+2],h=(i=i[r+3],r=n[o],n[o+1]),l=n[o+2];n=n[o+3];return t[e]=s*n+i*r+a*l-u*h,t[e+1]=a*n+i*h+u*r-s*l,t[e+2]=u*n+i*l+s*h-a*r,t[e+3]=i*n-s*r-a*h-u*l,t}}],(i=[{key:"x",get:function(){return this.g},set:function(t){this.g=t,this.O()}},{key:"y",get:function(){return this.S},set:function(t){this.S=t,this.O()}},{key:"z",get:function(){return this._},set:function(t){this._=t,this.O()}},{key:"w",get:function(){return this.j},set:function(t){this.j=t,this.O()}},{key:"set",value:function(t,e,i,r){return this.g=t,this.S=e,this._=i,this.j=r,this.O(),this}},{key:"clone",value:function(){return new this.constructor(this.g,this.S,this._,this.j)}},{key:"copy",value:function(t){return this.g=t.x,this.S=t.y,this._=t.z,this.j=t.w,this.O(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t.g,r=t.S,n=t._,o=t._order,s=(t=Math.cos,Math.sin),a=t(i/2),u=t(r/2),h=t(n/2),l=s(i/2),c=s(r/2),f=s(n/2);switch(o){case"XYZ":this.g=l*u*h+a*c*f,this.S=a*c*h-l*u*f,this._=a*u*f+l*c*h,this.j=a*u*h-l*c*f;break;case"YXZ":this.g=l*u*h+a*c*f,this.S=a*c*h-l*u*f,this._=a*u*f-l*c*h,this.j=a*u*h+l*c*f;break;case"ZXY":this.g=l*u*h-a*c*f,this.S=a*c*h+l*u*f,this._=a*u*f+l*c*h,this.j=a*u*h-l*c*f;break;case"ZYX":this.g=l*u*h-a*c*f,this.S=a*c*h+l*u*f,this._=a*u*f-l*c*h,this.j=a*u*h+l*c*f;break;case"YZX":this.g=l*u*h+a*c*f,this.S=a*c*h+l*u*f,this._=a*u*f-l*c*h,this.j=a*u*h-l*c*f;break;case"XZY":this.g=l*u*h-a*c*f,this.S=a*c*h-l*u*f,this._=a*u*f+l*c*h,this.j=a*u*h+l*c*f}return!1!==e&&this.O(),this}},{key:"setFromAxisAngle",value:function(t,e){e/=2;var i=Math.sin(e);return this.g=t.x*i,this.S=t.y*i,this._=t.z*i,this.j=Math.cos(e),this.O(),this}},{key:"setFromRotationMatrix",value:function(t){var e=(t=t.elements)[0],i=t[4],r=t[8],n=t[1],o=t[5],s=t[9],a=t[2],u=t[6],h=e+o+(t=t[10]);return 0<h?(h=.5/Math.sqrt(h+1),this.j=.25/h,this.g=(u-s)*h,this.S=(r-a)*h,this._=(n-i)*h):o<e&&t<e?(h=2*Math.sqrt(1+e-o-t),this.j=(u-s)/h,this.g=.25*h,this.S=(i+n)/h,this._=(r+a)/h):t<o?(h=2*Math.sqrt(1+o-e-t),this.j=(r-a)/h,this.g=(i+n)/h,this.S=.25*h,this._=(s+u)/h):(h=2*Math.sqrt(1+t-e-o),this.j=(n-i)/h,this.g=(r+a)/h,this.S=(s+u)/h,this._=.25*h),this.O(),this}},{key:"setFromUnitVectors",value:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.g=-t.y,this.S=t.x,this._=0):(this.g=0,this.S=-t.z,this._=t.y)):(this.g=t.y*e.z-t.z*e.y,this.S=t.z*e.x-t.x*e.z,this._=t.x*e.y-t.y*e.x),this.j=i,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(p.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var i=this.angleTo(t);return 0!==i&&(e=Math.min(1,e/i),this.slerp(t,e)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.g*=-1,this.S*=-1,this._*=-1,this.O(),this}},{key:"dot",value:function(t){return this.g*t.g+this.S*t.S+this._*t._+this.j*t.j}},{key:"lengthSq",value:function(){return this.g*this.g+this.S*this.S+this._*this._+this.j*this.j}},{key:"length",value:function(){return Math.sqrt(this.g*this.g+this.S*this.S+this._*this._+this.j*this.j)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.g=0,this.S=0,this._=0,this.j=1):(this.g=this.g*(t=1/t),this.S=this.S*t,this._=this._*t,this.j=this.j*t),this.O(),this}},{key:"multiply",value:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var i=t.g,r=t.S,n=t._,o=(t=t.j,e.g),s=e.S,a=e._;e=e.j;return this.g=i*e+t*o+r*a-n*s,this.S=r*e+t*s+n*o-i*a,this._=n*e+t*a+i*s-r*o,this.j=t*e-i*o-r*s-n*a,this.O(),this}},{key:"slerp",value:function(t,e){if(0!==e){if(1===e)return this.copy(t);var i,r=this.g,n=this.S,o=this._,s=this.j,a=s*t.j+r*t.g+n*t.S+o*t._;a<0?(this.j=-t.j,this.g=-t.g,this.S=-t.S,this._=-t._,a=-a):this.copy(t),1<=a?(this.j=s,this.g=r,this.S=n,this._=o):((t=1-a*a)<=Number.EPSILON?(this.j=(i=1-e)*s+e*this.j,this.g=i*r+e*this.g,this.S=i*n+e*this.S,this._=i*o+e*this._,this.normalize()):(i=Math.sqrt(t),t=Math.atan2(i,a),a=Math.sin((1-e)*t)/i,e=Math.sin(e*t)/i,this.j=s*a+this.j*e,this.g=r*a+this.g*e,this.S=n*a+this.S*e,this._=o*a+this._*e),this.O())}return this}},{key:"equals",value:function(t){return t.g===this.g&&t.S===this.S&&t._===this._&&t.j===this.j}},{key:"fromArray",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.g=t[e],this.S=t[e+1],this._=t[e+2],this.j=t[e+3],this.O(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.g,t[e+1]=this.S,t[e+2]=this._,t[e+3]=this.j,t}},{key:"fromBufferAttribute",value:function(t,e){return this.g=t.getX(e),this.S=t.getY(e),this._=t.getZ(e),this.j=t.getW(e),this}},{key:"_onChange",value:function(t){return this.O=t,this}},{key:"_onChangeCallback",value:function(){}}])&&m(e.prototype,i),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var v=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=i,this.z=r}var e,i;return e=t,(i=[{key:"set",value:function(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler,this.applyQuaternion(w.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(w.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,i=this.y,r=this.z,n=1/((t=t.elements)[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this}},{key:"applyQuaternion",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,o=t.y,s=t.z,a=(t=t.w)*e+o*r-s*i,u=t*i+s*e-n*r,h=t*r+n*i-o*e;e=-n*e-o*i-s*r;return this.x=a*t+e*-n+u*-s-h*-o,this.y=u*t+e*-o+h*-n-a*-s,this.z=h*t+e*-s+a*-o-u*-n,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}},{key:"cross",value:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var i=t.x,r=t.y,n=(t=t.z,e.x),o=e.y;e=e.z;return this.x=r*e-t*o,this.y=t*n-i*e,this.z=i*o-r*n,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))}},{key:"projectOnPlane",value:function(t){return b.copy(this).projectOnVector(t),this.sub(b)}},{key:"reflect",value:function(t){return this.sub(b.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(p.clamp(t,-1,1)))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}])&&g(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),b=new v,w=new o;function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===x(t=function(t,e){if("object"!==x(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==x(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}o=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.T={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.R={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var e,i;return e=t,(i=[{key:"min",get:function(){return this.T}},{key:"max",get:function(){return this.R}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}},{key:"copy",value:function(t){return this.R.x=t.max.x,this.R.y=t.max.y,this.T.x=t.min.x,this.T.y=t.min.y,this}},{key:"clone",value:function(){return(new t).copy(this)}},{key:"reset",value:function(){this.T={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.R={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}},{key:"toObject",value:function(){return{min:this.min,max:this.max,center:this.center,size:this.size}}},{key:"expand",value:function(t){this.P(t)}},{key:"expandByCoords",value:function(t){this.I(t)}},{key:"valid",value:function(){return this.C()}},{key:"isCross",value:function(t){var e=!0;return t.max.x<this.min.x&&(e=!1),t.min.x>this.max.x&&(e=!1),t.max.y<this.min.y&&(e=!1),!(t.min.y>this.max.y)&&e}}])&&M(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var _=(Object.assign(o.prototype,{C:function(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},P:function(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},I:function(t){var e=this;t&&0!=t.length&&t.forEach(function(t){t.x<e.min.x&&(e.min.x=t.x),t.y<e.min.y&&(e.min.y=t.y),t.x>e.max.x&&(e.max.x=t.x),t.y>e.max.y&&(e.max.y=t.y)})}}),o),S=function(t,e,i){i=i||2;var r,n,o,s,a,u=e&&e.length,h=u?e[0]*i:t.length,l=B(t,0,h,i,!0),c=[];if(l&&l.next!==l.prev){if(u&&(l=function(t,e,i,r){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=B(t,s=e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(function(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}(s));for(a.sort(C),n=0;n<a.length;n++)!function(t,e){(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&s<a){if((s=a)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}}while((r=r.next)!==e);if(!i)return null;if(n!==s){var u,h=i,l=i.x,c=i.y,f=1/0;for(r=i;n>=r.x&&r.x>=l&&n!==r.x&&F(o<c?n:s,o,l,c,o<c?s:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),U(r,t))&&(u<f||u===f&&(r.x>i.x||r.x===i.x&&function(t,e){return P(t.prev,t,e.prev)<0&&P(e.next,t,t.next)<0}(i,r)))&&(i=r,f=u),(r=r.next)!==h;);}return i}(t,e))&&(t=L(e,t),E(e,e.next),E(t,t.next))}(a[n],i),i=E(i,i.next);return i}(t,e,l,i)),t.length>80*i){for(var f=r=t[0],A=n=t[1],p=i;p<h;p+=i)(o=t[p])<f&&(f=o),(s=t[p+1])<A&&(A=s),r<o&&(r=o),n<s&&(n=s);a=0!==(a=Math.max(r-f,n-A))?1/a:0}!function t(e,i,r,n,o,s,a){if(e){if(!a&&s){for(var u=e,h=n,l=o,c=s,f=u;null===f.z&&(f.z=T(f.x,f.y,h,l,c)),f.prevZ=f.prev,f.nextZ=f.next,(f=f.next)!==u;);f.prevZ.nextZ=null,f.prevZ=null;var A,p,d,m,y,g,v,b,w=f,x=1;do{for(p=w,y=w=null,g=0;p;){for(g++,d=p,A=v=0;A<x&&(v++,d=d.nextZ);A++);for(b=x;0<v||0<b&&d;)0!==v&&(0===b||!d||p.z<=d.z)?(p=(m=p).nextZ,v--):(d=(m=d).nextZ,b--),y?y.nextZ=m:w=m,m.prevZ=y,y=m;p=d}}while(y.nextZ=null,x*=2,1<g)}for(var M,_,S=e;e.prev!==e.next;)if(M=e.prev,_=e.next,s?function(t,e,i,r){var n=t.prev,o=t,s=t.next;if(!(0<=P(n,o,s))){for(var a=(n.x<o.x?n.x<s.x?n:s:o.x<s.x?o:s).x,u=(n.y<o.y?n.y<s.y?n:s:o.y<s.y?o:s).y,h=(n.x>o.x?n.x>s.x?n:s:o.x>s.x?o:s).x,l=(n.y>o.y?n.y>s.y?n:s:o.y>s.y?o:s).y,c=T(a,u,e,i,r),f=T(h,l,e,i,r),A=t.prevZ,p=t.nextZ;A&&A.z>=c&&p&&p.z<=f;){if(A!==t.prev&&A!==t.next&&F(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=P(A.prev,A,A.next))return;if(A=A.prevZ,p!==t.prev&&p!==t.next&&F(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=P(p.prev,p,p.next))return;p=p.nextZ}for(;A&&A.z>=c;){if(A!==t.prev&&A!==t.next&&F(n.x,n.y,o.x,o.y,s.x,s.y,A.x,A.y)&&0<=P(A.prev,A,A.next))return;A=A.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&F(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=P(p.prev,p,p.next))return;p=p.nextZ}return 1}}(e,n,o,s):function(t){var e=t.prev,i=t,r=t.next;if(!(0<=P(e,i,r))){for(var n=t.next.next;n!==t.prev;){if(F(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=P(n.prev,n,n.next))return;n=n.next}return 1}}(e))i.push(M.i/r),i.push(e.i/r),i.push(_.i/r),j(e),e=_.next,S=_.next;else if((e=_)===S){a?1===a?t(e=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next}while(!O(n,o)&&D(n,r,r.next,o)&&U(n,o)&&U(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),j(r),j(r.next),r=t=o),(r=r.next)!==t);return E(r)}(E(e),i,r),i,r,n,o,s,2):2===a&&function(e,i,r,n,o,s){var a=e;do{for(var u,h=a.next.next;h!==a.prev;){if(a.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&D(i,i.next,t,e))return 1}while((i=i.next)!==t)}(t,e)&&(U(t,e)&&U(e,t)&&function(t,e){for(var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),(i=i.next)!==t;);return r}(t,e)&&(P(t.prev,t,e.prev)||P(t,e.prev,e))||O(t,e)&&0<P(t.prev,t,t.next)&&0<P(e.prev,e,e.next))}(a,h))return u=L(a,h),a=E(a,a.next),u=E(u,u.next),t(a,i,r,n,o,s),t(u,i,r,n,o,s);h=h.next}}while((a=a.next)!==e)}(e,i,r,n,o,s):t(E(e),i,r,n,o,s,1);break}}}(l,c,i,f,A,a)}return c};function B(t,e,i,r,n){var o,s;if(n===0<function(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}(t,e,i,r))for(o=e;o<i;o+=r)s=k(o,t[o],t[o+1],s);else for(o=i-r;e<=o;o-=r)s=k(o,t[o],t[o+1],s);return s&&O(s,s.next)&&(j(s),s=s.next),s}function E(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!O(r,r.next)&&0!==P(r.prev,r,r.next))r=r.next;else{if(j(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function C(t,e){return t.x-e.x}function T(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function F(t,e,i,r,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(i-s)*(e-a)&&0<=(i-s)*(o-a)-(n-s)*(r-a)}function P(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function O(t,e){return t.x===e.x&&t.y===e.y}function D(t,e,i,r){var n=I(P(t,e,i)),o=I(P(t,e,r)),s=I(P(i,r,t)),a=I(P(i,r,e));return n!==o&&s!==a||0===n&&R(t,i,e)||0===o&&R(t,r,e)||0===s&&R(i,t,r)||!(0!==a||!R(i,e,r))}function R(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function I(t){return 0<t?1:t<0?-1:0}function U(t,e){return P(t.prev,t,t.next)<0?0<=P(t,e,t.next)&&0<=P(t,t.prev,e):P(t,e,t.prev)<0||P(t,t.next,e)<0}function L(t,e){var i=new Q(t.i,t.x,t.y),r=new Q(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function k(t,e,i,r){return t=new Q(t,e,i),r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function j(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Q(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function N(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var i;if(t)return"string"==typeof t?z(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?z(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var H={area:function(t){for(var e=t.length,i=0,r=e-1,n=0;n<e;r=n++)i+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*i},isClockWise:function(t){return H.area(t)<0},triangulateShape:function(t,e){var i=[],r=[],n=[],o=(V(t),G(i,t),t.length);e.forEach(V);for(var s=0;s<e.length;s++)r.push(o),o+=e[s].length,G(i,e[s]);for(var a=S(i,r),u=0;u<a.length;u+=3)n.push(a.slice(u,u+3));return n},triangulate:function(t){(n=[]).push.apply(n,N(t[0]));for(var e=[],i=1;i<t.length;i++){var r=[];r.push.apply(r,N(t[i])),e.push(r)}if(!H.isClockWise(n))for(var n=n.reverse(),o=0,s=e.length;o<s;o++){var a=e[o];H.isClockWise(a)&&(e[o]=a.reverse())}return H.triangulateShape(n,e)}};function V(t){var e,i=t.length;2<i&&(i=t[i-1],e=t[0],i.x===e.x)&&i.y===e.y&&t.pop()}function G(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===K(t=function(t,e){if("object"!==K(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==K(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}var X=1e-5,W=.001,q=Math.PI/180,Z=180/Math.PI;o=function(t,e,i){return e&&Y(t.prototype,e),i&&Y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(o.prototype,{N:function(){return X},D:function(){return q},L:function(){return Z},A:function(t){return t<X&&-X<t},F:function(t){return X<t},Y:function(t){return t<-X},V:function(t,e,i){return e=(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y),Math.abs(e)<X?0:e},distanceOfTwoPoints:function(t,e){return t&&e?Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)):Number.NaN},distance:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},isPolygonContainPoint:function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].x,o=t[r].y,s=0,a=(r<t.length-1?(s=t[r+1].x,t[r+1]):(s=t[0].x,t[0])).y;if(n===e.x&&o===e.y||s===e.x&&a===e.y)return!0;if(a!==o){var u=n+(e.y-o)*(s-n)/(a-o);if(u===e.x)return!0;n!==s?u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&u!==n&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++):u<=Math.max(n,s)&&u>=Math.min(n,s)&&u>e.x&&(u===s&&0<(o-e.y)*(a-e.y)?i+=2:i++)}}return 0<i%2},Z:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y))},B:function(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y)||0===this.V(i,e,t)&&0===this.V(e,r,t)||this.V(i,e,t)*this.V(e,r,t)<0||this.V(t,r,i)*this.V(r,e,i)<0)},U:function(t,e,i){return!(t.x<e.x||t.y<e.y||t.x>i.x||t.y>i.y)},X:function(t,e,i){var r=Math.min(e.x,i.x),n=Math.max(e.x,i.x),o=Math.min(e.y,i.y);e=Math.max(e.y,i.y);return!(t.x<r||t.x>n||t.y<o||t.y>e)},H:function(t,e,i){var r=Math.min(i.x,e.x),n=Math.max(i.x,e.x),o=Math.min(i.y,e.y);i=Math.max(i.y,e.y);return!(t.x<r||t.x>n||t.y<o||t.y>i)},q:function(t,e,i){for(var r,n,o=!1,s=0;s<i;s++)r=e[s],n=e[(s+1)%i],(r.y<t.y&&n.y>=t.y||n.y<t.y&&r.y>=t.y)&&(r.x<=t.x||n.x<=t.x)&&r.x+(t.y-r.y)/(n.y-r.y)*(n.x-r.x)<t.x&&(o=!o);return o},G:function(t,e,i){return(t.x-e.x)*(i.y-e.y)==(i.x-e.x)*(t.y-e.y)&&Math.min(e.x,i.x)<=t.x&&t.x<=Math.max(e.x,i.x)&&Math.min(e.y,i.y)<=t.y&&t.y<=Math.max(e.y,i.y)},W:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},$:function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},J:function(t,e,i){var r=e.x,n=(e=e.y,i.x),o=(i=i.y,t.x),s=n-r,a=i-e,u=s*s+a*a,h=o-r,l=(t=t.y)-e,c=h*h+l*l;return this.A(u)?this.A(c)?0:c:(u=Math.sqrt(u),l=this.F(a=(s/=u)*h+(h=a/u)*l)?this.Y(a-u)?(l=o-(r+a*s))*l+(u=t-(e+a*h))*u:(r=o-n)*r+(s=t-i)*s:c,this.A(l)?0:l)},K:function(t,e,i,r){var n,o=e.x,s=e.y,a=i.x,u=i.y,h=t.x,l=(t=t.y,a-o),c=u-s,f=Math.sqrt(l*l+c*c),A=h-o,p=t-s,d=Math.sqrt(A*A+p*p);return this.A(f)?(r.x=e.x,r.y=e.y,this.A(n=d)?0:n):(n=this.F(c=(l/=f)*A+(A=c/f)*p)?this.Y(c-f)?(f=h-(p=o+c*l),l=t-(o=s+c*A),s=Math.sqrt(f*f+l*l),r.x=p,r.y=o,s):(c=h-a,A=t-u,f=Math.sqrt(c*c+A*A),r.x=i.x,r.y=i.y,f):(r.x=e.x,r.y=e.y,d),this.A(n)?0:n)},tt:function(t,e){for(var i=0,r=0,n=0,o=0;o<e;o++){var s=t[o],a=t[(o+1)%e],u=(s.x*a.y-s.y*a.x)/2;i+=u,r+=u*(s.x+a.x)/3,n+=u*(s.y+a.y)/3}return{x:r/=i,y:n/=i}},it:function(t){for(var e=H.triangulate([t]),i=0,r=0,n=0,o=0;o<e.length;o++){var s=t[e[o][0]],a=t[e[o][1]],u=t[e[o][2]],h=a.x-s.x,l=a.y-s.y,c=u.x-s.x;i+=h=(h*(u.y-s.y)-c*l)/2,r+=(s.x+a.x+u.x)/3*h,n+=(s.y+a.y+u.y)/3*h}return{x:r/i,y:n/i}},nt:function(t,e){if(e<3)return 0;for(var i=0,r=0;r<e;++r){var n=t[r],o=t[(r+1)%e];i+=n.x*o.y-n.y*o.x}return Math.abs(i/2)},et:function(t,e,i,r,n){var o,s;return this.B(t,e,i,r)?(o=(r.x-i.x)*(t.y-e.y)-(e.x-t.x)*(i.y-r.y),s=(t.y-i.y)*(e.x-t.x)*(r.x-i.x)+i.x*(r.y-i.y)*(e.x-t.x)-t.x*(e.y-t.y)*(r.x-i.x),n.x=s/o,o=(t.x-e.x)*(r.y-i.y)-(e.y-t.y)*(i.x-r.x),s=e.y*(t.x-e.x)*(r.y-i.y)+(r.x-e.x)*(r.y-i.y)*(t.y-e.y)-r.y*(i.x-r.x)*(e.y-t.y),n.y=s/o,1):0},rt:function(t,e,i,r,n){var o=Math.min(i.x,r.x),s=Math.max(i.x,r.x),a=Math.min(i.y,r.y),u=Math.max(i.y,r.y),h=t.x,l=t.y,c=i.x,f=i.y,A=r.x,p=r.y;if(90==e)return!(t.x<o||t.x>s||(Math.abs(s-o<W)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.x<f?(n.x=c,n.y=f,0):!(p<f&&t.x<p)||(n.x=A,n.y=p,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,d<l||!this.H(n,i,r))));if(270==e)return!(t.x<o||t.x>s||(Math.abs(s-o<W)?t.y>=f&&t.y<=p||t.y>=p&&t.y<=f?(n.x=t.x,n.y=t.y,0):f<p&&t.y>p?(n.x=A,n.y=p,0):!(p<f&&t.y>f)||(n.x=c,n.y=f,0):(n.y=d=(p-f)/(A-c)*(h-c)+f,n.x=h,l<d||!this.H(n,i,r))));if(270!=e&&90!=e&&Math.abs(s-o<W)){t=o;var d=Math.tan(e/180*Math.PI)*(t-h)+l;if(n.y=d,n.x=t,this.H(n,i,r))return s=d-l,0<(o=t-h)/Math.sqrt(o*o+s*s)*Math.cos(e/180*Math.PI)}return Math.abs(u-a<=W)?(d=a,t=1/Math.tan(e/180*Math.PI)*(d-l)+h,n.x=t,n.y=d,!!this.H(n,i,r)&&(o=d-l,0<(s=t-h)/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI))):(t=l+(u=Math.tan(e/180*Math.PI))*((d=(f-l-((a=(p-f)/(A-c))*c-u*h))/(u-a))-h),n.x=d,n.y=t,!!this.H(n,i,r)&&(s=d-h,o=t-l,Math.abs(s)<=W&&Math.abs(o)<=W||0<s/Math.sqrt(s*s+o*o)*Math.cos(e/180*Math.PI)))},st:function(t,e){return Math.abs(t.x-e.x)<X&&Math.abs(t.y-e.y)<X},ot:function(t,e,i,r){var n,o,s,a,u=t.x,h=t.y,l=e.x,c=e.y,f=i.x,A=i.y;return this.st(t,e)||this.st(t,i)?(r.x=u,r.y=h,!0):(s=Math.min(e.x,i.x),a=Math.max(e.x,i.x),n=Math.min(e.y,i.y),o=Math.max(e.y,i.y),Math.abs(l-f)<1e-5?(r.x=l,n<=(r.y=h)&&h<=o):Math.abs(c-A)<1e-5?(r.x=u,r.y=c,s<=u&&u<=a):(a=h+(n=-1/((A-c)/(f-l)))*((s=(c-h-((o=(A-c)/(f-l))*l-n*u))/(n-o))-u),r.x=s,r.y=a,!!this.H(r,e,i)||!(!this.st(t,e)&&!this.st(t,i))))},ht:function(t,e){return{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}},ut:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},ft:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},ct:function(t,e){return t.x*e.x+t.y*e.y},lt:function(t,e){return t.x*e.y-t.y*e.x},vt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},yt:function(t,e){var i,r;return 0==t.x&&0==t.y||0==e.x&&0==e.y?0:(i={x:t.x,y:t.y,z:0},r={x:e.x,y:e.y,z:0},i=this.ht(i,r),r=this.ct(t,e),r=Math.acos(r/(this.vt(t)*this.vt(e))),0<i.z?r/Math.PI*180:360-r/Math.PI*180)},bt:function(t,e,i,r){for(var n=0;n<i.length;n++){var o=i[n],s=i[(n+1)%i.length];if(1==this.et(t,e,o,s,r))return!0}return!1},dt:function(t,e,i,r,n){var o=Math.min(t.x,i.x,r.x),s=Math.max(t.x,i.x,r.x),a=Math.min(t.y,i.y,r.y),u=Math.max(t.y,i.y,r.y);s=Math.sqrt((s-o)*(s-o)+(u-a)*(u-a)),o=e/180*Math.PI,u=s*Math.cos(o)+t.x,a=s*Math.sin(o)+t.y;return 1==this.et(t,{x:u,y:a},i,r,n)},Mt:function(t){for(var e={x:null,y:null},i=0,r=0,n=0;n<t.length;n++)i+=t[n].x,r+=t[n].y;return e.x=i/t.length,e.y=r/t.length,e},kt:function(t,e,i,r){var n=[],o=t.x-e,s=t.x+e,a=t.y-e,u=t.y+e,h=Math.min(i.x,r.x),l=Math.max(i.x,r.x),c=Math.min(i.y,r.y),f=Math.max(i.y,r.y);return l<o||s<h||f<a||u<c||(o=r.x-i.x,s=r.y-i.y,(a=(t=(o*(a=t.x-i.x)+s*(u=t.y-i.y))/(r=o*o+s*s))*t-(a*a+u*u-e*e)/r)<0)||(u=Math.sqrt(a),r={x:i.x-o*(e=-t+u),y:i.y-s*e},o={x:i.x-o*(a=-t-u),y:i.y-s*a},e!==a&&(h<=r.x&&r.x<=l&&c<=r.y&&r.y<=f&&n.push(r),h<=o.x)&&o.x<=l&&c<=o.y&&o.y<=f&&n.push(o)),n},gt:function(t,e,i){var r,n={};if(t.x!=e.x)return r=e=(e.y-t.y)/(e.x-t.x),e=t.y-e*t.x,n.x=(+i.x- -1*r*i.y-r*e)/(r*r+1),n.y=(r*r*i.y- -1*r*i.x- -1*e)/(r*r+1),n;n.x=t.x,n.y=i.y},wt:function(t,e,i,r){var n,o,s,a,u={point:null,isintersect:!1};return t==i||t==r?(u.isintersect=!0,u.point=t):e==i||e==r?(u.isintersect=!0,u.point=e):(n={x:e.x-t.x,y:e.y-t.y},o={x:r.x-i.x,y:r.y-i.y},s={x:i.x-t.x,y:i.y-t.y},r={x:r.x-t.x,y:r.y-t.y},e={x:e.x-i.x,y:e.y-i.y},i={x:-s.x,y:-s.y},a=this.lt(o,n),Math.abs(a)<=1e-5||this.lt(s,n)*this.lt(r,n)<=5e-4&&this.lt(i,o)*this.lt(e,o)<5e-4&&(r=this.lt(o,s)/a,u.point={x:t.x+n.x*r,y:t.y+n.y*r},u.isintersect=!0)),u},St:function(t,e,i){t.x===e.x&&(e.x=e.x+1),t.y===e.y&&(e.y=e.y+1),e.x===i.x&&(i.x=i.x+1),e.y===i.y&&(i.y=i.y+1);var r=e.x-t.x,n=(t=e.y-t.y,i.x-e.x);return!(0<r*(i.y-e.y)-t*n)},getAngle:function(t){var e=t.p1,i=(t=t.p2).x-e.x;t=t.y-e.y,e=Math.sqrt(i*i+t*t),e=Math.asin(Math.abs(t)/e);return 0<i&&0<t?e:i<0&&0<t?Math.PI-e:i<0&&t<0?Math.PI+e:0<i&&t<0?2*Math.PI-e:0==i&&0<t?e:0==i&&t<0?3*Math.PI/2:0<i&&0==t?e:i<0&&0==t?Math.PI:null},_t:function(t){var e=this.distanceOfTwoPoints(t[0],t[1]),i=this.distanceOfTwoPoints(t[1],t[2]),r=(e+i+(t=this.distanceOfTwoPoints(t[0],t[2])))/2;return Math.sqrt(r*(r-e)*(r-i)*(r-t))},jt:function(t,e){var i,r,n,o,s;return this.K(t,e[0],e[1],{})<1e-4||this.K(t,e[0],e[2],{})<1e-4||this.K(t,e[1],e[2],{})<1e-4||(o={x:e[1].x-e[0].x,y:e[1].y-e[0].y},i={x:e[0].x-e[2].x,y:e[0].y-e[2].y},r={x:e[2].x-e[1].x,y:e[2].y-e[1].y},s={x:t.x-e[0].x,y:t.y-e[0].y},n={x:t.x-e[1].x,y:t.y-e[1].y},t={x:t.x-e[2].x,y:t.y-e[2].y},e=this.lt(o,s),o=this.lt(r,n),s=this.lt(i,t),X<e*o&&X<o*s)},Ot:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null,type:0,outer:null},o=[];if(this.jt(t,i)&&(n.start=t),this.jt(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0,n.type=1;else{for(var s=(i[1].x+i[2].x)/2,a=(i[1].y+i[2].y)/2,u=1;u<r;u++){var h,l=this.wt(t,e,i[u-1],i[u]);if(l.isintersect){if(null!=n.start)return n.end=l.point,n.isintersect=!0,n.outer="end",h=this.yt({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;if(null!=n.end)return n.start=l.point,n.isintersect=!0,n.outer="start",h=this.yt({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(h=h<180?h:h-360)?2:3,n;o.push(l)}}var c,f=this.wt(t,e,i[0],i[r-1]);if(f.isintersect){if(null!=n.start)return n.end=f.point,n.isintersect=!0,n.outer="end",c=this.yt({x:s-i[0].x,y:a-i[0].y},{x:e.x-i[0].x,y:e.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;if(null!=n.end)return n.start=f.point,n.isintersect=!0,n.outer="start",c=this.yt({x:s-i[0].x,y:a-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),n.type=0<(c=c<180?c:c-360)?2:3,n;o.push(f)}2!=o.length||this.distanceOfTwoPoints(o[0].point,o[1].point)<.01||(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?(n.start=o[0].point,n.end=o[1].point):(n.start=o[1].point,n.end=o[0].point),n.isintersect=!0,n.type=4)}return n},xt:function(t,e,i){var r=i.length,n={isintersect:!1,start:null,end:null},o=[];if(this.jt(t,i)&&(n.start=t),this.jt(e,i)&&(n.end=e),null!=n.start&&null!=n.end)n.isintersect=!0;else{for(var s=1;s<r;s++){var a=this.wt(t,e,i[s-1],i[s]);if(a.isintersect){if(null!=n.start)return n.end=a.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(a)}}var u=this.wt(t,e,i[0],i[r-1]);if(u.isintersect){if(null!=n.start)return n.end=u.point,n.isintersect=!0,n;if(null!=n.end)return n.start=t,n.isintersect=!0,n;o.push(u)}2==o.length&&(n.start=(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.end=(this.distanceOfTwoPoints(o[0].point,t)>this.distanceOfTwoPoints(o[0].point,e)?o[0]:o[1]).point,n.isintersect=!0)}return n},Tt:function(t,e){if(0==e.length)return[t];var i,r,n=this.Rt(e),o=[],s=(n.sort(function(e,i){var r=(e.Et.x-t.Et.x)*(e.Et.x-t.Et.x)+(e.Et.y-t.Et.y)*(e.Et.y-t.Et.y),n=(i.Et.x-t.Et.x)*(i.Et.x-t.Et.x)+(i.Et.y-t.Et.y)*(i.Et.y-t.Et.y);e=(e.Pt.x-t.Et.x)*(e.Pt.x-t.Et.x)+(e.Pt.y-t.Et.y)*(e.Pt.y-t.Et.y),i=(i.Pt.x-t.Et.x)*(i.Pt.x-t.Et.x)+(i.Pt.y-t.Et.y)*(i.Pt.y-t.Et.y);return(r<e?r:e)<(n<i?n:i)}),0);for(s=0;s<n.length;s++)this.distanceOfTwoPoints(n[s].Et,n[s].Pt)<.01||(i=this.distanceOfTwoPoints(n[s].Et,t.Et),r=this.distanceOfTwoPoints(n[s].Pt,t.Et),i<.01?t.Et=n[s].Pt:r<.01?t.Et=n[s].Et:i<r?.1<this.distanceOfTwoPoints(t.Et,n[s].Et)&&(o.push({It:t.It,Et:t.Et,Pt:n[s].Et,W:t.W,Ct:t.Ct}),t.Et=n[s].Pt):.1<this.distanceOfTwoPoints(t.Et,n[s].Pt)&&(o.push({It:t.It,Et:t.Et,Pt:n[s].Pt,W:t.W,Ct:t.Ct}),t.Et=n[s].Et),n.splice(s,1));return.1<this.distanceOfTwoPoints(t.Et,t.Pt)&&o.push(t),o},Rt:function(t){var e=[];if(1==t.length)return t;for(var i=t[0],r=1;0<t.length;){if(r>=t.length){if(e.push(i),t.splice(0,1),t.length<1)break;i=t[0],r=1}if(1===t.length){e.push(i);break}this.Nt(i.Et,i.Pt,t[r].Et)?(this.Nt(i.Et,i.Pt,t[r].Pt)||(i.Pt=t[r].Pt),t.splice(r,1)):this.Nt(i.Et,i.Pt,t[r].Pt)?(i.Et=t[r].Et,t.splice(r,1)):this.Nt(t[r].Et,t[r].Pt,i.Et)?(this.Nt(t[r].Et,t[r].Pt,i.Pt)||(t[r].Pt=i.Pt),i=t[r],t.splice(r,1)):this.Nt(t[r].Et,t[r].Pt,i.Pt)?(t[r].Et=i.Et,i=t[r],t.splice(r,1)):r++}return e},Nt:function(t,e,i){var r=t.x-i.x,n=t.y-i.y,o=e.x-i.x,s=e.y-i.y,a=this.distanceOfTwoPoints(t,i);i=this.distanceOfTwoPoints(e,i),t=this.distanceOfTwoPoints(t,e);return r*s-n*o<1e-5&&a+i-t<.001}});var J=new o,$={Drive:1,Walk:0},tt={Auto:1,SpecifiedDistance:2};function et(t,e){var i,r,n,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return r=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){r=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(r)throw n}}};if(Array.isArray(t)||(s=nt(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t){return function(t){if(Array.isArray(t))return ot(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||nt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){var i;if(t)return"string"==typeof t?ot(t,e):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ot(t,e):void 0}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function st(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===it(t=function(t,e){if("object"!==it(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==it(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}o=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Dt=e.type,this.stepLength=.7,this.Lt=180/Math.PI,this.At=[295829355.45,147914677.73,73957338.86,36978669.43,18489334.72,9244667.36,4622333.68,2311166.84,1155583.42,577791.71,288895.85,144447.93,72223.96,36111.98,18056,9028,4514,2257,1128,564,282,141,70,35,17,8,4,2,1],this.Ft=null,this.Yt=null,this.Vt=5,this.Zt=!0,this.zt=.2,this.Bt=!1,this.Ut=!0,this.Xt=!1,this.Ht=1.2,this.Qt=80,this.qt=30,this.Gt=21,this.Wt=!0,this.$t=22,this.Jt=1.3,this.Kt="",this.ti=100,this.ii=3,this.ni=1,this.ei=6,this.ri=10,this.si=5,this.oi=0,this.hi=!1,this.ui=!1,this.ai=!1,this.fi=!1,this.ci=0,this.li=0,this.vi=0,this.yi=0,this.bi=null,this.di=null,this.mi=!1,this.pi=null,this.Mi=null,this.ki=!1,this.gi=!1,this.wi=null,this.Si=0,this._i=fengmap.FMLanguageType.ZH,this.ji=fengmap.FMNaviMode.MODULE_SHORTEST,this.Oi=fengmap.FMNaviPriority.PRIORITY_DEFAULT,this.xi=!1,this.Ti=!0,this.Ri=[],this.Ei=!1,this.Pi=new Map,this.Ii=!0,this.crossCircles,this.Ci=tt.Auto,this.Ni={radius:.5,dash:{size:4,gap:2}},this.Di="#002FA7",this.Li=!0,this.Ai=0,this.Fi=new h,this.Yi=new s,this.on=this.on.bind(this),this.Vi(e),this.Zi()}var e,i;return e=t,(i=[{key:"locationMarker",get:function(){return this.zi},set:function(t){this.zi=t}},{key:"lineFillMode",get:function(){return this.Ci},set:function(t){this.Ci=t}},{key:"naviResult",get:function(){return this.Bi}},{key:"followPosition",get:function(){return this.Zt},set:function(t){this.Zt=t}},{key:"on",value:function(t,e){this.Yi.h(t,e)}},{key:"off",value:function(t,e){this.Yi.M(t,e)}},{key:"dispose",value:function(){this.stop(),this.Ft=null,this.Yt&&(this.Yt.dispose(),this.Yt=null)}},{key:"setLanguage",value:function(t){this._i!=t&&(this._i=t,this.Ui())}},{key:"setObstructions",value:function(t){this.Yt.setObstructions(t)}},{key:"setStartPoint",value:function(t,e){this.Xi=Object.assign({},this.Xi,t,{x:t.x,y:t.y,level:t.level,buildingID:t.buildingID,height:"number"==typeof t.height?t.height:this.ei});var i=null;return t.url&&!e?this.Hi(this.Xi,!0):i}},{key:"setDestPoint",value:function(t,e){this.Qi=Object.assign({},this.Qi,t,{x:t.x,y:t.y,level:t.level,buildingID:t.buildingID,height:"number"==typeof t.height?t.height:this.ei});var i=null;return t.url&&!e?this.Hi(this.Qi,!1):i}},{key:"route",value:function(t,e,i){this.Vi(t),this.qi(),this.Gi({mode:this.ji,priority:this.Oi,toDoors:this.xi,obstruct:this.Ti,viapoints:this.Ri,barrierFree:this.Ei},e,i)}},{key:"naviConstraint",value:function(t){if(this.Xi&&this.Qi){null==this.Wi&&this.$i(),t.buildingID=void 0!==t.buildingID?t.buildingID:null;var e={},i=[],r=Number.MAX_VALUE,n=0,o={index:-1,coords:{level:t.level,buildingID:t.buildingID},angle:null,distance:Number.MAX_VALUE,distanceToNext:Number.MAX_VALUE,remain:this.Ji,relDirection:1,time:null,dots:[],insertIndex:-1,toNext:null,buildingIndex:-1};this.Ki&&this.Ki.coords.buildingID!==t.buildingID&&(this.Ki.insertIndex=-1);for(var s=0;s<this.Wi.length;s++){if(this.Wi[s].bid!==t.buildingID);else for(var a=this.Wi[s].naviPoints,u=1;u<a.length;u++){var h,l,c=a[u-1],f=a[u],A=c.index-n;this.Ki&&this.Ki.index>c.index||(A=this.tn[s].result.naviDescriptionsData[A].endPoint,c.level===t.level&&f.level===t.level&&(h=J.K(t,c,f,e))<r&&(1===u||null===this.Ki||this.Ki&&this.Ki.coords.buildingID===t.buildingID&&this.Ki&&this.Ki.insertIndex<=u)&&(null!=this.nn&&(l=(t.x-this.nn.x)*(f.x-c.x)+(t.y-this.nn.y)*(f.y-c.y),0===Math.abs(l)&&null!=this.Ki?o.relDirection=this.Ki.relDirection:l<0&&(o.relDirection=-1)),o.distance=h,Object.assign(o.coords,e),o.angle=this.en(c,f),o.index=c.index,o.distanceToNext=J.W(e,A),o.insertIndex=u,o.toNext=J.W(e,f),o.buildingIndex=s,this.rn(o),i.push(Object.assign({},o)),r=h))}n+=this.tn[s].result.naviDescriptionsData.length}var p=o;if(this.Ki)for(var d=i.length-2;0<=d;d--)i[d].remain>=p.remain&&i[d].remain<this.Ki.remain&&(i[d].distance<=p.distance||Math.abs(4<=p.insertIndex-this.Ki.insertIndex)&&p.buildingIndex==this.Ki.buildingIndex)&&(p=i[d]);return p.time=t.time,this.nn=t,p.remain<.5?this.Ki=null:this.Ki=p,p}}},{key:"pathConstraint",value:function(t,e){return this.Yt?this.Yt.pathConstraint(t,e):null}},{key:"locate",value:function(t,e){this.ui&&this.stop(),this.sn(t,e),this.nn=t}},{key:"locateNoConstraint",value:function(t,e){this.ui&&this.stop(),this.hn(t,e),this.nn=t}},{key:"clearLocationMarker",value:function(){this.zi&&(this.zi.remove(),this.zi=null)}},{key:"clearMarkers",value:function(){this.un&&(this.un.remove(),this.un=null,this.Xi=null),this.an&&(this.an.remove(),this.an=null,this.Qi=null)}},{key:"drawNaviLine",value:function(t){if(this.Xi&&this.Qi)return this.fn=this.cn(this.ln,t),this.fn}},{key:"clearNaviLine",value:function(){this.fn&&(this.fn.remove(),this.fn=null)}},{key:"clearAll",value:function(){this.clearMarkers(),this.clearNaviLine(),this.clearLocationMarker()}},{key:"overview",value:function(t,e){var i=this;if(0!==this.ln.length){for(var r=new _,n=[],o=0;o<this.ln.length;o++)!function(){var t=[Number.MAX_VALUE,-Number.MAX_VALUE];i.ln[o].resultbuild.forEach(function(e){t[0]=Math.min(t[0],e.level),t[1]=Math.max(t[1],e.level),r.I(e.pointList)}),n.push({bid:i.ln[o].bid,levelRange:t})}();this.vn(t,r,n,e)}}},{key:"focusNaviLineSegment",value:function(t,e,i){if(0!=this.tn.length){for(var r,n,o,s=null,a=null,u=0;u<this.tn.length;u++){var h=this.tn[u].result.naviDescriptionsData;if(t-h.length<0){s=h[t],a=this.tn[u].bid;break}t-=h.length}a&&s&&((r=new _).I([s.startPoint,s.endPoint]),n=[Math.min(s.startLevel,s.endLevel),Math.max(s.startLevel,s.endLevel)],o=this.Ft.getBuilding(a),this.vn(e,r,n,o,i))}}},{key:"simulate",value:function(t){var e,i,r=this;this.Xi&&this.Qi&&0!==this.ln.length&&(this.ui&&this.stop(),this.ui=!0,this.Vi(t),e={},this.mi=!1,this.pi=this.Ft.getRotation(),i=e.Ht||this.Ht,e.Gt=e.Gt||this.Gt||0,this.yn(),this.zi.rotateTo({heading:-this.pi}),this.Zt?this.bn(this.Xi.level,this.Xi.buildingID,i,function(){r.ui&&r.dn(r.Xi,i,function(){var t;r.ui&&(t=e.Gt>r.$t?r.$t:e.Gt,r.Wt?r.mn(r.Qt,i,function(){r.ui&&r.pn(t,i,function(){r.ui&&r.Mn()})}):r.pn(t,i,function(){r.ui&&r.Mn()}))})}):this.ui&&this.Mn())}},{key:"pause",value:function(){this.fi=!0}},{key:"resume",value:function(){this.fi=!1}},{key:"stop",value:function(){this.hi=!0,this.Fi.stop(),this.kn&&this.Ft.off("update",this.kn),this.fi=!1,this.di=null,this.Mi=null,this.vi=0,this.mi=!1,this.wi=null,this.Si=0,this.ki=!1,this.gi=!1,this.kn=null,this.ui=!1,this.ai=!1,this.ci=0,this.li=0,this.bi=null}},{key:"getSpeed",value:function(){return this.Vt}},{key:"setSpeed",value:function(t){this.Vt=t}},{key:"addZoomCircle",value:function(t){if(0!=t.length){var e,i=null==t[0].buildingID?null:t[0].buildingID;this.Pi.has(i)?e=this.Pi.get(i):(e=new Map,this.Pi.set(i,e));for(var r,n=0;n<t.length;n++)e.has(t[n].level)||e.set(t[n].level,[]),(r=e.get(t[n].level)).push.apply(r,rt(t[n].circle))}}},{key:"stopZoomCircle",value:function(){this.Ii=!1}},{key:"constraintTrack",value:function(t){return this.Yt.constraintTrack(t)}},{key:"setLineFillMode",value:function(t){this.Ci=t}},{key:"setPassedLineDistance",value:function(t){this.fn&&this.Ci==tt.SpecifiedDistance&&this.fn.moveProportion(t/this.Ji)}}])&&st(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var at=(Object.assign(o.prototype,{Vi:function(t){t&&(void 0!==t.map&&(this.Ft=t.map),void 0!==t.analyser&&(this.Yt=t.analyser),void 0!==t.speed&&(this.Vt=t.speed),void 0!==t.followSpeed&&(this.zt=t.followSpeed),void 0!==t.followPosition&&(this.Zt=t.followPosition),void 0!==t.followAngle&&(this.Bt=t.followAngle),void 0!==t.locationMarkerFollowAngle&&(this.Ut=t.locationMarkerFollowAngle),void 0!==t.isMultiLevels&&(this.Xt=t.isMultiLevels),void 0!==t.inTime&&(this.Ht=t.inTime),void 0!==t.tiltAngle&&(this.Qt=t.tiltAngle),void 0!==t.changeFloorTiltAngle&&(this.qt=t.changeFloorTiltAngle),void 0!==t.changeTiltAngle&&(this.Wt=t.changeTiltAngle),void 0!==t.zoom&&(this.Gt=t.zoom),void 0!==t.maxZoom&&(this.$t=t.maxZoom),void 0!==t.extendScale&&(this.Jt=t.extendScale),void 0!==t.locationMarkerUrl&&(this.Kt=t.locationMarkerUrl),void 0!==t.locationMarkerSize&&(this.ti=t.locationMarkerSize),void 0!==t.locationMarkerHeight&&(this.ii=t.locationMarkerHeight),void 0!==t.lineMarkerHeight&&(this.ni=t.lineMarkerHeight),void 0!==t.imageMarkerHeight&&(this.ei=t.imageMarkerHeight),void 0!==t.directionAssert&&(this.ri=t.directionAssert),void 0!==t.combineAsset&&(this.si=t.combineAsset),void 0!==t.completeDistance&&(this.oi=t.completeDistance),void 0!==t._i&&(this.ri=t.directionAssert),void 0!==t.mode&&(this.ji=t.mode),void 0!==t.priority&&(this.Oi=t.priority),void 0!==t.toDoors&&(this.xi=t.toDoors),void 0!==t.obstruct&&(this.Ti=t.obstruct),void 0!==t.viapoints&&(this.Ri=t.viapoints),void 0!==t.barrierFree&&(this.Ei=t.barrierFree),void 0!==t.lineStyle&&Object.assign(this.Ni,t.lineStyle),void 0!==t.linePassed&&(this.Li=t.linePassed),void 0!==t.lineFillMode)&&(this.Ci=t.lineFillMode)},Zi:function(){1===this.Dt?this.gn=void 0!==fengmap.FMNaviDriveAnalyser&&this.Yt instanceof fengmap.FMNaviDriveAnalyser:this.gn=void 0!==fengmap.FMNaviAnalyser&&(this.Yt instanceof fengmap.FMNaviAnalyser||this.Yt instanceof fengmap.FMNaviWalkAnalyser),this.Xi=null,this.Qi=null,this.un=null,this.an=null,this.zi=null,this.kn=null,this.qi()},yn:function(){this.zi instanceof fengmap.FMLocationMarker?this.zi.moveTo({buildingID:this.Xi.buildingID,level:this.Xi.level,x:this.Xi.x,y:this.Xi.y}):this.zi=new fengmap.FMLocationMarker({id:"location",buildingID:this.Xi.buildingID,level:this.Xi.level,x:this.Xi.x,y:this.Xi.y,url:this.Kt||"",size:this.ti,height:this.ii}),this.zi.addTo(this.Ft)},wn:function(t){for(var e,i=arguments.length<=1?0:arguments.length-1,r=0;r<i;r++){var n=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];if(t[n])return t[n]}return(e=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=e?void 0:arguments[e]},Sn:function(t){if(this.Xi&&this.Qi)return t==this.Xi.level||t==this._detData.level},qi:function(){this.Bi=null,this._n=[],this.jn=[],this.ln=[],this.On=[],this.tn=[],this.Wi=[],this.xn=[],this.Tn=[],this.Ji=0,this.Rn=[],this.Ki=null,this.nn=null},Hi:function(t,e){if(t.level){var i=t.url||(e?"image/small/marker/nav_location_start.png":"image/small/marker/nav_location_dest.png"),r=e?this.un:this.an,n=(r&&r.remove(),(null!=t.buildingID?this.Ft.getBuilding(t.buildingID):this.Ft).getFloor(t.level));if(n)return(r=new fengmap.FMImageMarker(Object.assign({map:this.Ft,url:i,callback:function(){t.callback&&t.callback(r)},anchor:fengmap.FMMarkerAnchor.BOTTOM,depth:!1,collision:!1},t))).addTo(n),e?this.un=r:this.an=r,r}},Gi:function(t,e,i){var r=this;this.Xi&&this.Qi&&(t=Object.assign({start:Object.assign({},this.Xi),dest:Object.assign({},this.Qi)},t),this.En(t,function(t){r.Bi=t,r.Pn(),r.crossCircles=r.In(r.ln,r.Pi),r.Cn(),r.Nn(),r.Dn(),r.$i(),e&&e(t)},function(t){i&&i(t)}))},Pn:function(){if(this.Bi&&this.Bi.subs&&0!=this.Bi.subs.length){for(var t=this.Bi.subs[0].buildingID,e=[],i=[],r=[],n=0;n<this.Bi.subs.length;n++){var o=this.Bi.subs[n];o.buildingID!==t&&(r.push({bid:t,result:e}),e=[],t=o.buildingID),e.push(o),n==this.Bi.subs.length-1&&r.push({bid:t,result:e})}for(var s=0;s<r.length;s++){var a=this.Ln(r[s].result);i.push({bid:r[s].bid,resultbuild:a})}this._n=r,this.ln=i}},Ln:function(t){for(var e=[],i=Number.NaN,r=null,n=0;n<t.length;n++){var o,s=t[n];i!=s.levels[0]&&((r={length:0,level:s.levels[0],pointList:[]}).pointList.push(s.waypoint.points[0]),e.push(r),i=s.levels[0]),s.levels[0]==s.levels[1]?((o=r.pointList).push.apply(o,rt(s.waypoint.points.slice(1))),r.length+=s.distance):(r={length:0,level:s.levels[0],pointList:[s.waypoint.points[0]]},e.push(r),r={length:0,level:s.levels[1],pointList:[s.waypoint.points[1]]},e.push(r))}return e},Cn:function(){for(var t=0;t<this.ln.length;t++){var e=this.ln[t].resultbuild;this.An(e)}},An:function(t){for(var e=0;e<t.length-1;e++){var i,r,n=t[e];n.length&&(i=n.pointList[n.pointList.length-1],r=t[e+1].pointList[0],.2<J.W(i,r))&&n.pointList.push(Object.assign({},r))}},Nn:function(){for(var t=0;t<this.ln.length;t++){var e=this.ln[t].resultbuild;e=this.Fn(e);this.On.push({bid:this.ln[t].bid,groupsPoints:e})}},Fn:function(t){for(var e=[],i=null,r=null,n=0;n<t.length;n++){var o=t[n],s=i==o.level;0==o.length&&0!=n&&n!=t.length-1||(s||(i=o.level,r&&e.push(r),r={level:o.level,pointList:[]}),r.pointList=r.pointList.concat(o.pointList))}return r&&e.push(r),e},Dn:function(){if(this.Bi)for(var t=0;t<this._n.length;t++){var e=this._n[t].bid,i=this._n[t].result;i=this.Ui(i);this.tn.push({bid:e,result:i}),this.Ji+=i.naviDistance}},Ui:function(t){if(t){for(var e=[],i=[],r=[],n=0,o=this._i,s=t,a=0,u=null,h=0;h<s.length;h++){var l=s[h],c=l.waypoint.points,f=l.waypoint.direction[o];f=(e.push(l.instruction[o]),{startDirection:f[0],startIndex:void 0,startLevel:l.levels[0],startPoint:c[0],endDirection:f[1],endIndex:void 0,endLevel:l.levels[1],endPoint:c.slice(-1)[0],distance:l.distance});l.levels[0]==l.levels[1]?(f.startIndex=a,a+=c.length-1,f.endIndex=a):a=0,i.push(f),null!=u&&l.levels[0]==l.levels[1]||(u={level:l.levels[1],distance:0},r.push(u)),u.distance+=l.distance,n+=l.distance}return{naviDescriptions:e,naviDescriptionsData:i,naviFloorsDistance:r,naviDistance:n}}},$i:function(){if(this._n){for(var t=0,e=[],i=0;i<this._n.length;i++){for(var r=this._n[i].result,n=this._n[i].bid,o=this.Yn(r),s=this.Vn(r),a=0;a<o.length;a++)o[a].index+=t;for(var u=0;u<s.length;u++)s[u].index+=t;var h=this.tn[i].result.naviDistance;t+=r.length,e.push({bid:n,distance:h,naviPoints:o,naviSubPoints:s})}this.Wi=e}},Yn:function(t){if(!t)return[];for(var e=[],i=t,r=0;r<i.length;r++){var n=i[r];if(n.levels[0]==n.levels[1])for(var o=r+1==i.length?null:i[r+1],s=n.waypoint.points,a=null==o||o.levels[0]!=o.levels[1]?s.length:s.length-1,u=0;u<a;u++){var h={x:s[u].x,y:s[u].y,z:0,level:n.levels[0],index:r};e.push(h)}}return e},Vn:function(t){if(!t)return[];for(var e=[],i=t,r=0;r<i.length;r++){var n=i[r].waypoint.points,o={x:n[0].x,y:n[0].y,level:n[0].level,index:r};e.push(o),r==i.length-1&&(o={x:n.slice(-1)[0].x,y:n.slice(-1)[0].y,level:n.slice(-1)[0].level,index:i.length},e.push(o))}return e},Zn:function(t,e){var i=null;if(0!=t.length){for(var r=[],n=0;n<t.length;)t[n].distance==e&&r.push(t[n]),n+=1;if(1<r.length){for(var o=0;o<r.length;o++)if(0<=r[o].relDirection){i=r[o];break}i=i||r[0]}else 1==r.length&&(i=r[0])}return i},rn:function(t){if(-1!=t.buildingIndex&&-1!==t.insertIndex){for(var e,i,r=t.buildingIndex,n=this.Wi[r].naviPoints,o=0,s=n.length-1;s>t.insertIndex;s--)s-1>=t.insertIndex&&(e=n[s],i=n[s-1],e.level===i.level)&&(o+=J.W(e,i));n[t.insertIndex]&&n[t.insertIndex].level===t.coords.level&&(o+=J.W(n[t.insertIndex],t.coords));for(var a=r+1;a<this.Wi.length;a++)o+=this.Wi[a].distance;t.remain=o}},cn:function(t,e){if(0===t.length)return null;1!==this.Dt||this.Ni.hasOwnProperty("color")||(this.Ni.color=this.Di);for(var i=Object.assign({},this.Ni),r=(e&&e.style&&Object.assign(i,e.style),e&&e.height?e.height:this.ni),n=[],o=0;o<t.length;o++)for(var s=t[o].bid,a=t[o].resultbuild,u=0;u<a.length;u++)!function(){var t=(e=a[u]).pointList;if(0!==t.length){var e=e.level,i=[],o=(t.forEach(function(t){var e=parseFloat(""+t.x);t=parseFloat(""+t.y);i.push({x:e,y:t,z:r})}),t.length<2&&(o=parseFloat(""+t[0].x),t=parseFloat(""+t[0].y),i.push({x:o,y:t,z:r})),new fengmap.FMSegment);o.level=e,o.points=i,o.buildingID=s,n.push(o)}}();return(i=new fengmap.FMLineMarker(Object.assign({segments:n},i))).passed=e&&null!=e.passed?e.passed:this.Li,i.addTo(this.Ft),i},En:function(t,e,i){var r=this;this.Yt.route(t,function(t){r.xi&&t.door&&(r.Qi.x=t.door.x,r.Qi.y=t.door.y),e&&e(t)},function(t){i&&i(t)})},dn:function(t,e,i){this.Ft.setCenter({x:t.x,y:t.y,animate:"number"==typeof e,duration:"number"==typeof e?e:0,finish:i})},mn:function(t,e,i){this.Ft.setTilt({tilt:t,animate:"number"==typeof e,duration:"number"==typeof e?e:0,finish:i})},zn:function(t,e,i){this.Ft.setRotation({rotation:t,animate:"number"==typeof e,duration:"number"==typeof e?e:0,finish:i})},pn:function(t,e,i){this.Ft.setZoom({zoom:t,animate:"number"==typeof e,duration:"number"==typeof e?e:0,finish:i},!0)},bn:function(t,e,i,r){var n;return(e=null==e?((n=this.Ft).setVisibleLevels([t]),n.getLevel()):((n=this.Ft.getBuilding(e)).setVisibleLevels([t]),n.level))==t?(r&&r(),null):n.setLevel({level:t,animate:"number"==typeof i,duration:"number"==typeof i?i:0,finish:r})},Bn:function(t){var e=this.jn;if(0===e.length)return[];for(var i=[],r=0,n=0;n<e.length;n++){var o=e[n];if(!(o.pointList.length<=1))for(var s=o.level,a=0;a<o.pointList.length;a++){for(var u=o.pointList[a],h=((u=new v(u.x,0,u.y)).level=s,-1),l=1;l<t.length;l++)if(r<t[l].Un){h=t[l-1].Xn;break}u.Xn=-1!==h?h:t[t.length-1].Xn,i.push(u),r++}}return i},Hn:function(t,e){if(0===e)return t[0];for(var i,r,n=0,o=0,s=t[0],a=1;a<t.length;a++)if((i=t[a]).bid!==s.bid)s=i;else if(i.level!==s.level)s=i;else{if(e<=(n+=(r=i.clone().sub(s)).length()))return r.normalize(),(r=s.clone().add(r.clone().multiplyScalar(e-o))).level=i.level,r.index=i.Xn!=s.index?s.index:i.Xn,r.bid=(i.bid!=s.bid?s:i).bid,r;(s=i.clone()).level=i.level,s.index=i.Xn,s.bid=i.bid,o=n}var u=t[t.length-1];return u.index=u.Xn,u.bid=u.bid,u},Qn:function(t){var e,i,r,n,o;return t&&0!==t.length?(i=0,r=e=-1,t=t.map(function(t,n){var o=new v(t.startPoint.x,0,t.startPoint.y);return o.level=t.startLevel,o.Xn=n,e=n,t.startLevel!==t.endLevel?(i+=r,o.Un=i,i++):o.Un=t.startIndex+i,r=t.endIndex,o}),n=this._naviDescriptionsData[this._naviDescriptionsData.length-1],(o=new v(n.endPoint.x,0,n.endPoint.y)).level=n.endLevel,o.Xn=e+1,o.Un=n.endIndex+i,t.push(o),t):[]},qn:function(t){var e,i,r,n=this;this.zi&&(this.gi?(e={x:t.x,y:t.y,height:this.zi.height,level:t.level,buildingID:t.bid},this.zi.moveTo(e),this.gi=!1):(i=(e={}).Ht||this.Ht,e.Gt=e.Gt||this.Gt||0,r=e.Gt>this.$t?this.$t:e.Gt,this.Xt||(this.Gn(t),this.zi.visible=!0),this.Wt&&this.mn(this.Qt,i,null),this.dn(t,i,function(){n.pn(r,i,function(){n.ki=!1})})))},Wn:function(t){this.zi&&(this.Gn(t),this.gi=!1)},en:function(t,e){var i=new v(0,0,1);t=new v(t.x,0,t.y),t=(e=new v(e.x,0,e.y).clone().sub(t).normalize()).angleTo(i)*J.L();return 0<e.clone().cross(i).y?360-t:t},$n:function(t,e,i){return t===e?t:(180<Math.abs(e-t)&&(t<e?t+=360:e+=360),(t*(1-i)+e*i)%360)},Jn:function(t,e){var i=this.At,r=Math.floor(t),n=i[r-1]*(1-t%1)+i[r]*(t%1);for(n*=e,r=0;n<i[r];)r++;return r+1-(n-i[r])/(i[r-1]-i[r])},Kn:function(t){var e,i,r;this.hi||requestAnimationFrame(this.Kn.bind(this,t)),this.ai||(t.cnt++,t.cnt!==t.step)||(t.cnt=0,e=this.Fi.getDelta(),this.gi)||this.ki||this.fi||(this.vi+=this.Vt*e,this.vi<=0)||this.Vt*e==0||(e=Object.assign({},this.Hn(t.ps,this.vi)),i=this.Ji-this.vi,r=e.y,e.y=e.z,e.z=r,this.bi={distance:0,remain:i<this.yi?this.yi:i,walk:this.vi,point:e,level:e.level,buildingID:e.bid,index:e.index-1},null!=this.di&&(this.Mi=this.en(this.di,e)),this.di=Object.assign({},e),!e||i<this.yi&&this.mi?this.ai=!0:(i<this.yi&&!this.mi&&(this.mi=!0),this.Si||(this.Si=t.ps[0].level),null==this.wi&&(this.wi=t.ps[0].bid||"outdoor"),this.ui&&(r=e.bid||"outdoor",this.wi!==r?(this.gi=!0,this.wi=r,this.ci++,this.li=0,this.Si=e.level,this.te(1,e),this.Yi.k({type:"transit",level:e.level,buildingID:e.bid})):this.Si!==e.level&&(this.Si=e.level,this.li++,this.te(0,e),this.Yi.k({type:"transit",level:e.level,buildingID:e.bid})))))},te:function(t,e){var i=this;if(this.Zt){var r={},n=r.Ht||this.Ht,o=(r.Gt=r.Gt||this.Gt||0,r.Gt>this.$t?this.$t:r.Gt);if(1===t)return this.ie(e.level,e.bid,function(){i.bn(e.level,e.bid,n,function(){i.qn(e)})});this.ki=!0,this.Wt&&this.mn(this.qt,n,null),this.Xt||(this.zi.visible=!1),this.ie(e.level,e.bid,function(){i.bn(e.level,e.bid,n,function(){i.pn(o,n,function(){i.dn(e,n,function(){i.Wt?i.mn(i.Qt,n,function(){i.qn(e)}):i.qn(e)})})})})}else if(1===t)return this.ie(e.level,e.bid,function(){i.qn(e)})},ne:function(){this.hi=!1;for(var t=[],e=0;e<this.Wi.length;e++){for(var i=this.Wi[e].naviPoints,r=[],n=0;n<i.length;n++){var o=new v(i[n].x,0,i[n].y);o.Xn=i[n].index,o.level=i[n].level,o.bid=this.Wi[e].bid,r.push(o)}t.push.apply(t,r)}this.Fi.start(),this.ai=!1,this.ci=0,this.li=0,this.Kn({step:2,cnt:0,ps:t})},ee:function(){if(!(this.ki||this.gi||this.fi)){if(this.di){var t,e,i=new v(this.zi.x,this.zi.y,0).lerp(this.di,this.mi?1:this.zt),r=(i.level=this.di.level,i.buildingID=this.di.bid,this.naviConstraint(i));if(r.index<0)return;if(this.zi.moveTo({x:i.x,y:i.y,height:this.ii,level:i.level,buildingID:i.buildingID}),this.fn&&(this.fn.passed?this.fn.moveProportion(1-r.remain/this.Ji):this.fn.moveProportion(0)),this.Ii)for(var n=0;n<this.crossCircles.length;n++)r.coords.buildingID==this.crossCircles[n].bid&&r.coords.level==this.crossCircles[n].level&&r.remain<=this.crossCircles[n].point.remain&&r.remain>=this.crossCircles[n].remain&&(t=!0,e=this.crossCircles[n].point);if(this.Yi.k(Object.assign({},this.bi,this.re(r,t,e))),t=!1,e=null,this.Zt?this.dn(i):this.Ft.updateCountDown_=0,this.ai)return this.stop(),void this.Yi.k({type:"complete"})}null!=this.Mi&&(i=this.$n(this.pi,this.Mi,this.zt),this.pi=i,this.zi.rotateTo({heading:-i}),this.Bt)&&this.zn(i)}},Mn:function(){this.ne(),this.kn=this.ee.bind(this),this.Ft.on("update",this.kn)},sn:function(t,e){var i,r,n=this.naviConstraint(t);if(this.Ci==tt.Auto&&this.fn&&(this.fn.passed?this.fn.moveProportion(1-n.remain/this.Ji):this.fn.moveProportion(0)),this.Ii)for(var o=0;o<this.crossCircles.length;o++)n.coords.buildingID==this.crossCircles[o].bid&&n.coords.leve==this.crossCircles[o].level&&n.remain<=this.crossCircles[o].point.remain&&n.remain>=this.crossCircles[o].remain&&(i=!0,r=this.crossCircles[o].point);this.Yi.k(this.re(n,i,r)),i=!1,r=null,this.zi&&(n.coords.height=this.ii,this.zi.moveTo(n.coords),void 0!==e?this.zi.rotateTo({heading:e}):this.zi.rotateTo({heading:-n.angle}))},hn:function(t,e){var i,r,n=this.naviConstraint(t);if(this.Ii)for(var o=0;o<this.crossCircles.length;o++)n.coords.buildingID==this.crossCircles[o].bid&&n.coords.leve==this.crossCircles[o].level&&n.remain<=this.crossCircles[o].point.remain&&n.remain>=this.crossCircles[o].remain&&(i=!0,r=this.crossCircles[o].point);this.Yi.k(this.re(n,i,r)),i=!1,r=null,this.zi&&(t.height=this.ii,this.zi.moveTo(t),void 0!==e?this.zi.rotateTo({heading:e}):this.zi.rotateTo({heading:-n.angle}))},se:function(t,e){for(var i=[{x:t.min.x,y:t.min.y},{x:t.min.x,y:t.max.y},{x:t.max.x,y:t.max.y},{x:t.max.x,y:t.min.y}],r=new _,n=0;n<e.length;n++)for(var o=e[n].levelRange,s=0;s<o.length;s++)for(var a=s===o.length-1?this.ni+2*this.Ni.radius:this.ni,u=0;u<i.length;u++){var h=fengmap.FMUtil.coordsMapToScreen(this.Ft,{x:i[u].x,y:i[u].y,buildingID:e[n].bid,level:o[s],height:a});h&&r.I([h])}return r},oe:function(t,e){t=this.se(t,e).size,e=this.Ft.getContainer().clientHeight;var i=this.Ft.getContainer().clientWidth;return i/e>t.x/t.y?t.y/e:t.x/i},he:function(t,e,i,r,n,o){var s=this,a=this.oe(t,e),u=this.Ft.getZoom();a?(u=this.Jn(this.Ft.getZoom(),a*(i||1)),n=r-1):u-=1,this.Ft.setZoom({zoom:u,animate:!1,finish:function(){++n===r?o&&o({zoom:u}):s.he(t,e,i,r,n,o)}})},ue:function(t,e){for(var i=this.se(t,e),r=[],n=0;n<e.length;n++)for(var o=e[n].levelRange,s=e[n].bid||this.Ft.getMapOptions().buildingID,a=0;a<o.length;a++){var u=this.Ft.getBuilding(s).getFloor(o[a]).height;r.push(fengmap.FMUtil.coordsScreenToMap(this.Ft,{x:(i.max.x+i.min.x)/2,y:(i.max.y+i.min.y)/2,z:u+2*this.Ni.radius}))}for(var h=new v,l=0;l<r.length;l++)h.add(r[l]);return h.divideScalar(r.length),h},ae:function(t,e,i,r,n,o){var s=this;this.he(t,e,i,10,0,function(a){var u=s.ue(t,e);s.Ft.setCenter({animate:!1,x:u.x,y:u.y,finish:function(){++n===r?o&&o({zoom:a.zoom,center:u}):s.ae(t,e,i,r,n,o)}})})},vn:function(t,e,i,r){for(var n=this,o=t&&void 0!==t.ratio?t.ratio:1,s=t&&void 0!==t.rotation?t.rotation:0,a=t&&void 0!==t.tilt?t.tilt:30,u=!t||void 0===t.animate||t.animate,h=1,l=[1],c=0;c<i.length;c++){for(var f=i[c].levelRange,A=[],p=f[0];p<=f[1];)A.push(p),p++;null==i[c].bid?h=(l=A)[Math.floor((A.length-1)/2)]:this.Ft.getBuilding(i[c].bid).setVisibleLevels(A)}this.Ft.setVisibleLevels(l,function(){n.Ft.setLevel({level:h,animate:u,finish:function(){var t=l.length%2==0?n.Ft.getFloorSpace()/2:0;n.Ft.getInteracations().controls.panAdd({x:0,y:t,z:0}),n.Ft.setCenter({animate:u,x:e.center.x,y:e.center.y,finish:function(){n.Ft.setTilt({tilt:a,animate:u,finish:function(){n.Ft.setRotation({rotation:s,animate:u,finish:function(){var t=n.Ft.getInteracations(),s=n.Ft.copyCamera(),a=t.copyControls(s),h=t.controls,l=n.Ft.camera;t.controls=a,n.Ft.camera=s,n.Ft.getInteracations().controls.update(),n.ae(e,i,o,10,0,function(e){t.controls=h,n.Ft.camera=l,a.dispose(),a=null,n.Ft.enableUpdateRender(),n.Ft.setZoom({animate:u,zoom:e.zoom,duration:.5}),n.Ft.setCenter({animate:u,x:e.center.x,y:e.center.y,duration:.5,finish:function(){r&&r()}})})}})}})}})}})})},ie:function(t,e,i){if(null==t||null==e)return i&&i(),null;for(var r=this.Ft.getBuilding(e).levelChart,n=this.Ft.getVisibleLevels(),o=null,s=0;s<r.length;s++)if(s%2==1&&r[s]===t&&(o=r[s-1],n.indexOf(o)<0)){this.Ft.setVisibleLevels([o]);break}return null==o||this.Ft.getLevel()===o?(i&&i(),null):this.Ft.setLevel({level:o,animate:"number"==typeof duration,duration:"number"==typeof duration?duration:0,finish:i})},In:function(t,e){if(!e)return[];for(var i=0,r=0,n=[],o=0;o<t.length;o++)for(var s=t[o].resultbuild,a=0;a<s.length;a++)r+=s[a].length;for(var u=0;u<t.length;u++)for(var h=t[u].bid,l=t[u].resultbuild,c=0;c<l.length;c++){var f=l[c].level,A=l[c].pointList;if(0<c&&(i+=l[c-1].length),!(A.length<=1)&&e.has(h)&&e.get(h).has(f))for(var p=0,d=e.get(h).get(f),m=0;m<A.length;m++){0<m&&(p+=J.distance(A[m-1],A[m]));var y,g=et(d);try{for(g.s();!(y=g.n()).done;){var v,b=y.value,w=this.fe(A,b,m);w&&(w.remain=0==m?r-(i+p):r-(i+p-w.disIntersectToPoint),v=r-(i+p-w.disCenterToPoint),n.push({center:b.center,radius:b.radius,remain:v,point:w,level:f,bid:h}))}}catch(t){g.e(t)}finally{g.f()}}}return n},fe:function(t,e,i){var r=0;if(0==i)return J.$(t[i],e.center)<=.001?Object.assign({disIntersectToCenter:disIntersectToCenter,disIntersectToPoint:r},t[i]):null;if(!(J.$(e.center,t[i-1])<=.001)&&J.J(e.center,t[i-1],t[i])<=.001){var n,o=et(e.points);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!J.H(s,e.center,t[i]))for(var a=i;0<a;a--)if(J.H(s,t[a-1],t[a])&&J.J(s,t[a-1],t[a])<=.001){for(var u=[s],h=a;h<=i;h++)u.push(t[h]);for(var l=0;l<u.length-1;l++)r+=J.distance(u[l],u[l+1]);return s.disIntersectToPoint=r,s.disCenterToPoint=J.distance(e.center,t[i]),s}}}catch(t){o.e(t)}finally{o.f()}}return null},Gn:function(t){t={x:this.zi.x,y:this.zi.y,height:this.zi.height,level:t.level,buildingID:t.bid};var e=this.On[this.ci].groupsPoints[this.li];e&&e.pointList&&0<e.pointList.length&&(t=Object.assign(t,e.pointList[0])),this.zi.moveTo(t)},re:function(t,e,i){return e={distance:t.distance,remain:t.remain,distanceToNext:t.distanceToNext,angle:t.angle,point:t.coords,level:t.coords.level,buildingID:t.coords.buildingID,index:t.index,enterCircle:e,intersect:i},this.Dt===$.Drive?(e.type="driving",e.drive=this.Ji-t.remain):(e.type="walking",e.walk=this.Ji-t.remain),e}}),o);function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===ut(t=function(t,e){if("object"!==ut(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==ut(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function lt(){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ft(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function ct(t,e){return(ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===At(t=function(t,e){if("object"!==At(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==At(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function dt(){return(dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function mt(t,e){return(mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){return"symbol"===gt(t=function(t,e){if("object"!==gt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==gt(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(r.key),r)}}function bt(){return(bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xt(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}function wt(t,e){return(wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mt,_t={FMNaviMode:i,FMNaviPriority:{PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},FMLanguageType:{ZH:"zh",EN:"en"},FMNavigation:function(){var t=r,e=at;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=ft(t);if(i=e?(i=ft(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===ut(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){if(this instanceof r)return i.call(this,t,e,n);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"on",value:function(t,e){lt(ft(r.prototype),"on",this).call(this,t,e)}},{key:"off",value:function(t,e){lt(ft(r.prototype),"off",this).call(this,t,e)}}])&&ht(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),FMNavigationDrive:function(){var t=r,e=at;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mt(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=yt(t);if(i=e?(i=yt(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===At(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){if(this instanceof r)return t.type=$.Drive,(t=i.call(this,t,e,n)).Vt=7,t.zt=.2,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"on",value:function(t,e){dt(yt(r.prototype),"on",this).call(this,t,e)}},{key:"off",value:function(t,e){dt(yt(r.prototype),"off",this).call(this,t,e)}},{key:"locate",value:function(t,e){dt(yt(r.prototype),"locate",this).call(this,t,e)}},{key:"route",value:function(t,e,i){dt(yt(r.prototype),"route",this).call(this,t,e,i)}},{key:"locateNoConstraint",value:function(t,e){dt(yt(r.prototype),"locateNoConstraint",this).call(this,t,e)}},{key:"simulate",value:function(t){dt(yt(r.prototype),"simulate",this).call(this,t)}},{key:"naviResult",get:function(){return this.Bi}}])&&pt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(),FMNavigationWalk:function(){var t=r,e=at;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e);var i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=xt(t);if(i=e?(i=xt(this).constructor,Reflect.construct(r,arguments,i)):r.apply(this,arguments),r=this,i&&("object"===gt(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(t,e,n){if(this instanceof r)return t.type=$.Walk,i.call(this,t,e,n);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"on",value:function(t,e){bt(xt(r.prototype),"on",this).call(this,t,e)}},{key:"off",value:function(t,e){bt(xt(r.prototype),"off",this).call(this,t,e)}},{key:"route",value:function(t,e,i){bt(xt(r.prototype),"route",this).call(this,t,e,i)}}])&&vt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}()},St=window.fengmap||{};for(Mt in _t)St[Mt]=_t[Mt];window.fengmap=St,e.default=St}],i={},t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"ce",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.ce)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.ce?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=0).default;function t(r){var n;return(i[r]||(n=i[r]={i:r,l:!1,exports:{}},e[r].call(n.exports,n,n.exports,t),n.l=!0,n)).exports}var e,i},t.exports=r()},oE5w:function(t,e){},oKL6:function(t,e,i){"use strict";var r=i("PiFy"),n=i("xTtY"),o=i("llro"),s=i("x+9s");t.exports=function(t){if(t.length<1||"function"!=typeof t[0])throw new n("a function is required");return s(r,o,t)}},oOoY:function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=" ",o=t.level,s=t.dataLevel,a=t.schema[e],u=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(s||""),f=t.opts.$data&&a&&a.$data;f?(n+=" var schema"+o+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",r="schema"+o):r=a;var A=f?"(new RegExp("+r+"))":t.usePattern(a);n+="if ( ",f&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),n+=" !"+A+".test("+c+") ) {   ";var p=p||[];p.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { pattern:  ",n+=f?""+r:""+t.util.toQuotedString(a),n+="  } ",!1!==t.opts.messages&&(n+=" , message: 'should match pattern \"",n+=f?"' + "+r+" + '":""+t.util.escapeQuotes(a),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+u:""+t.util.toQuotedString(a),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var d=n;return n=p.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+d+"]); ":n+=" validate.errors = ["+d+"]; return false; ":n+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},oYso:function(t,e,i){var r=i("EuP9"),n=r.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function s(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(n,s),s.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},ow1b:function(t,e,i){"use strict";var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch(t){r=!1}t.exports=r},oyTM:function(t,e,i){"use strict";function r(t,e,i,r){var n=r?" !== ":" === ",o=r?" || ":" && ",s=r?"!":"",a=r?"":"!";switch(t){case"null":return e+n+"null";case"array":return s+"Array.isArray("+e+")";case"object":return"("+s+e+o+"typeof "+e+n+'"object"'+o+a+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+o+a+"("+e+" % 1)"+o+e+n+e+(i?o+s+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+n+'"'+t+'"'+(i?o+s+"isFinite("+e+")":"")+")";default:return"typeof "+e+n+'"'+t+'"'}}t.exports={copy:function(t,e){for(var i in e=e||{},t)e[i]=t[i];return e},checkDataType:r,checkDataTypes:function(t,e,i){switch(t.length){case 1:return r(t[0],e,i,!0);default:var n="",s=o(t);for(var a in s.array&&s.object&&(n=s.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)n+=(n?" && ":"")+r(a,e,i,!0);return n}},coerceToTypes:function(t,e){if(Array.isArray(e)){for(var i=[],r=0;r<e.length;r++){var o=e[r];n[o]?i[i.length]=o:"array"===t&&"array"===o&&(i[i.length]=o)}if(i.length)return i}else{if(n[e])return[e];if("array"===t&&"array"===e)return["array"]}},toHash:o,getProperty:u,escapeQuotes:h,equal:i("EHWV"),ucs2length:i("cGpA"),varOccurences:function(t,e){e+="[^0-9]";var i=t.match(new RegExp(e,"g"));return i?i.length:0},varReplace:function(t,e,i){return e+="([^0-9])",i=i.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),i+"$1")},schemaHasRules:function(t,e){if("boolean"==typeof t)return!t;for(var i in t)if(e[i])return!0},schemaHasRulesExcept:function(t,e,i){if("boolean"==typeof t)return!t&&"not"!=i;for(var r in t)if(r!=i&&e[r])return!0},schemaUnknownRules:function(t,e){if("boolean"==typeof t)return;for(var i in t)if(!e[i])return i},toQuotedString:l,getPathExpr:function(t,e,i,r){return A(t,i?"'/' + "+e+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(t,e,i){var r=l(i?"/"+p(e):u(e));return A(t,r)},getData:function(t,e,i){var r,n,o,s;if(""===t)return"rootData";if("/"==t[0]){if(!c.test(t))throw new Error("Invalid JSON-pointer: "+t);n=t,o="rootData"}else{if(!(s=t.match(f)))throw new Error("Invalid JSON-pointer: "+t);if(r=+s[1],"#"==(n=s[2])){if(r>=e)throw new Error("Cannot access property/index "+r+" levels up, current level is "+e);return i[e-r]}if(r>e)throw new Error("Cannot access data "+r+" levels up, current level is "+e);if(o="data"+(e-r||""),!n)return o}for(var a=o,h=n.split("/"),l=0;l<h.length;l++){var A=h[l];A&&(o+=u(d(A)),a+=" && "+o)}return a},unescapeFragment:function(t){return d(decodeURIComponent(t))},unescapeJsonPointer:d,escapeFragment:function(t){return encodeURIComponent(p(t))},escapeJsonPointer:p};var n=o(["string","number","integer","boolean","null"]);function o(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;return e}var s=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function u(t){return"number"==typeof t?"["+t+"]":s.test(t)?"."+t:"['"+h(t)+"']"}function h(t){return t.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function l(t){return"'"+h(t)+"'"}var c=/^\/(?:[^~]|~0|~1)*$/,f=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function A(t,e){return'""'==t?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function p(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function d(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},"pS+P":function(t,e,i){"use strict";var r=i("YP8Q"),n=i("LC74"),o=i("B6Bn"),s=i("TkWM");function a(t){o.call(this,"mont",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,i){o.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(e,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(a,o),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),r=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},n(u,o.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},a.prototype.point=function(t,e){return new u(this,t,e)},a.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e),r=t.redMul(e),n=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,n)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(i),s=n.redMul(r),a=e.z.redMul(o.redAdd(s).redSqr()),u=e.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,u)},u.prototype.mul=function(t){for(var e=t.clone(),i=this,r=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var o=n.length-1;o>=0;o--)0===n[o]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},pmdr:function(t,e,i){"use strict";var r=i("ow1b"),n=i("XHij"),o=i("xTtY"),s=i("kCPa");t.exports=function(t,e,i){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new o("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],c=!!s&&s(t,e);if(r)r(t,e,{configurable:null===h&&c?c.configurable:!h,enumerable:null===a&&c?c.enumerable:!a,value:i,writable:null===u&&c?c.writable:!u});else{if(!l&&(a||u||h))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=i}}},"pn+s":function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("ARY+"),o=i("jSRM"),s=i("lZ6o").ec,a=i("geuY"),u=i("jkjm"),h=i("QDfD"),l=1;function c(t,e,i,o){if((t=r.from(t.toArray())).length<e.byteLength()){var s=r.alloc(e.byteLength()-t.length);t=r.concat([s,t])}var a=i.length,u=function(t,e){t=(t=f(t,e)).mod(e);var i=r.from(t.toArray());if(i.length<e.byteLength()){var n=r.alloc(e.byteLength()-i.length);i=r.concat([n,i])}return i}(i,e),h=r.alloc(a);h.fill(1);var l=r.alloc(a);return l=n(o,l).update(h).update(r.from([0])).update(t).update(u).digest(),h=n(o,l).update(h).digest(),{k:l=n(o,l).update(h).update(r.from([1])).update(t).update(u).digest(),v:h=n(o,l).update(h).digest()}}function f(t,e){var i=new a(t),r=(t.length<<3)-e.bitLength();return r>0&&i.ishrn(r),i}function A(t,e,i){var o,s;do{for(o=r.alloc(0);8*o.length<t.bitLength();)e.v=n(i,e.k).update(e.v).digest(),o=r.concat([o,e.v]);s=f(o,t),e.k=n(i,e.k).update(e.v).update(r.from([0])).digest(),e.v=n(i,e.k).update(e.v).digest()}while(-1!==s.cmp(t));return s}function p(t,e,i,r){return t.toRed(a.mont(i)).redPow(e).fromRed().mod(r)}t.exports=function(t,e,i,n,d){var m=u(e);if(m.curve){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");return function(t,e){var i=h[e.curve.join(".")];if(!i)throw new Error("unknown curve "+e.curve.join("."));var n=new s(i).keyFromPrivate(e.privateKey).sign(t);return r.from(n.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==n)throw new Error("wrong private key type");return function(t,e,i){for(var n,o=e.params.priv_key,s=e.params.p,u=e.params.q,h=e.params.g,l=new a(0),d=f(t,u).mod(u),m=!1,y=c(o,u,t,i);!1===m;)n=A(u,y,i),l=p(h,n,s,u),0===(m=n.invm(u).imul(d.add(o.mul(l))).mod(u)).cmpn(0)&&(m=!1,l=new a(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),r.from(i)}(l,m)}(t,m,i)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");if(void 0!==e.padding&&e.padding!==l)throw new Error("illegal or unsupported padding mode");t=r.concat([d,t]);for(var y=m.modulus.byteLength(),g=[0,1];t.length+g.length+1<y;)g.push(255);g.push(0);for(var v=-1;++v<t.length;)g.push(t[v]);return o(g,m)},t.exports.getKey=c,t.exports.makeKey=A},ps4E:function(t,e,i){var r=i("LC74"),n=i("EuP9").Buffer,o=i("KDHK"),s=o.base,a=o.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new h,this.tree._init(t.body)}function h(t){s.Node.call(this,"der",t)}function l(t){return t<10?"0"+t:t}t.exports=u,u.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(h,s.Node),h.prototype._encodeComposite=function(t,e,i,r){var o,s=function(t,e,i,r){var n;"seqof"===t?t="seq":"setof"===t&&(t="set");if(a.tagByName.hasOwnProperty(t))n=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);n=t}if(n>=31)return r.error("Multi-octet tag encoding unsupported");e||(n|=32);return n|=a.tagClassByName[i||"universal"]<<6}(t,e,i,this.reporter);if(r.length<128)return(o=new n(2))[0]=s,o[1]=r.length,this._createEncoderBuffer([o,r]);for(var u=1,h=r.length;h>=256;h>>=8)u++;(o=new n(2+u))[0]=s,o[1]=128|u;h=1+u;for(var l=r.length;l>0;h--,l>>=8)o[h]=255&l;return this._createEncoderBuffer([o,r])},h.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var i=new n(2*t.length),r=0;r<t.length;r++)i.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(i)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)?this._createEncoderBuffer(t):"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},h.prototype._encodeObjid=function(t,e,i){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t)){t=t.slice();for(r=0;r<t.length;r++)t[r]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!i){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}var o=0;for(r=0;r<t.length;r++){var s=t[r];for(o++;s>=128;s>>=7)o++}var a=new n(o),u=a.length-1;for(r=t.length-1;r>=0;r--){s=t[r];for(a[u--]=127&s;(s>>=7)>0;)a[u--]=128|127&s}return this._createEncoderBuffer(a)},h.prototype._encodeTime=function(t,e){var i,r=new Date(t);return"gentime"===e?i=[l(r.getFullYear()),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[l(r.getFullYear()%100),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},h.prototype._encodeNull=function(){return this._createEncoderBuffer("")},h.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!n.isBuffer(t)){var i=t.toArray();!t.sign&&128&i[0]&&i.unshift(0),t=new n(i)}if(n.isBuffer(t)){var r=t.length;0===t.length&&r++;var o=new n(r);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);r=1;for(var s=t;s>=256;s>>=8)r++;for(s=(o=new Array(r)).length-1;s>=0;s--)o[s]=255&t,t>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new n(o))},h.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},h.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},h.prototype._skipDefault=function(t,e,i){var r,n=this._baseState;if(null===n.default)return!1;var o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,i).join()),o.length!==n.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==n.defaultBuffer[r])return!1;return!0}},pymM:function(t,e,i){"use strict";(function(e){var i={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};t.exports=function t(r){return void 0!==e&&(i.Buffer=e),"undefined"!=typeof Promise&&(i.Promise=Promise),t.definition={compile:function(t){if("string"==typeof t){var e=n(t);return function(t){return t instanceof e}}var i=t.map(n);return function(t){for(var e=0;e<i.length;e++)if(t instanceof i[e])return!0;return!1}},CONSTRUCTORS:i,metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}},r.addKeyword("instanceof",t.definition),r;function n(t){var e=i[t];if(e)return e;throw new Error('invalid "instanceof" keyword value '+t)}}}).call(e,i("EuP9").Buffer)},q6ws:function(t,e,i){"use strict";const r=i("o/zv");t.exports=function(t,e){return!(/^[a-z][a-z0-9+.-]*:/i.test(t)&&!r.win32.isAbsolute(t)||/^\/\//.test(t)||/^[{}[\]#*;,'$%&(=?`^<>]/.test(t)||(void 0===e||!1===e)&&/^\//.test(t))}},qFST:function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=" ",o=t.level,s=t.dataLevel,a=t.schema[e],u=t.schemaPath+t.util.getProperty(e),h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(s||""),f=t.opts.$data&&a&&a.$data;if(f?(n+=" var schema"+o+" = "+t.util.getData(a.$data,s,t.dataPathArr)+"; ",r="schema"+o):r=a,!f&&"number"!=typeof a)throw new Error(e+" must be number");n+="var division"+o+";if (",f&&(n+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),n+=" (division"+o+" = "+c+" / "+r+", ",t.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+t.opts.multipleOfPrecision+" ":n+=" division"+o+" !== parseInt(division"+o+") ",n+=" ) ",f&&(n+="  )  "),n+=" ) {   ";var A=A||[];A.push(n),n="",!1!==t.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { multipleOf: "+r+" } ",!1!==t.opts.messages&&(n+=" , message: 'should be multiple of ",n+=f?"' + "+r:r+"'"),t.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+u:""+a,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),n+=" } "):n+=" {} ";var p=n;return n=A.pop(),!t.compositeRule&&l?t.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},qsNF:function(t,e){},rOku:function(t,e,i){"use strict";(function(e,r){var n=65536,o=4294967295;var s=i("X3l8").Buffer,a=e.crypto||e.msCrypto;a&&a.getRandomValues?t.exports=function(t,e){if(t>o)throw new RangeError("requested too many random bytes");var i=s.allocUnsafe(t);if(t>0)if(t>n)for(var u=0;u<t;u+=n)a.getRandomValues(i.slice(u,u+n));else a.getRandomValues(i);if("function"==typeof e)return r.nextTick(function(){e(null,i)});return i}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(e,i("DuR2"),i("W2nU"))},reGU:function(t,e,i){var r=i("LC74"),n=i("KDHK"),o=n.base,s=n.bignum,a=n.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new h,this.tree._init(t.body)}function h(t){o.Node.call(this,"der",t)}function l(t,e){var i=t.readUInt8(e);if(t.isError(i))return i;var r=a.tagClass[i>>6],n=0==(32&i);if(31==(31&i)){var o=i;for(i=0;128==(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;i<<=7,i|=127&o}}else i&=31;return{cls:r,primitive:n,tag:i,tagStr:a.tag[i]}}function c(t,e,i){var r=t.readUInt8(i);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;var n=127&r;if(n>4)return t.error("length octect is too long");r=0;for(var o=0;o<n;o++){r<<=8;var s=t.readUInt8(i);if(t.isError(s))return s;r|=s}return r}t.exports=u,u.prototype.decode=function(t,e){return t instanceof o.DecoderBuffer||(t=new o.DecoderBuffer(t,e)),this.tree._decode(t,e)},r(h,o.Node),h.prototype._peekTag=function(t,e,i){if(t.isEmpty())return!1;var r=t.save(),n=l(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(r),n.tag===e||n.tagStr===e||n.tagStr+"of"===e||i)},h.prototype._decodeTag=function(t,e,i){var r=l(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var n=c(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(n))return n;if(!i&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==n)return t.skip(n,'Failed to match body of: "'+e+'"');var o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(n=t.offset-o.offset,t.restore(o),t.skip(n,'Failed to match body of: "'+e+'"'))},h.prototype._skipUntilEnd=function(t,e){for(;;){var i=l(t,e);if(t.isError(i))return i;var r,n=c(t,i.primitive,e);if(t.isError(n))return n;if(r=i.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(r))return r;if("end"===i.tagStr)break}},h.prototype._decodeList=function(t,e,i,r){for(var n=[];!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var s=i.decode(t,"der",r);if(t.isError(s)&&o)break;n.push(s)}return n},h.prototype._decodeStr=function(t,e){if("bitstr"===e){var i=t.readUInt8();return t.isError(i)?i:{unused:i,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var n="",o=0;o<r.length/2;o++)n+=String.fromCharCode(r.readUInt16BE(2*o));return n}if("numstr"===e){var s=t.raw().toString("ascii");return this._isNumstr(s)?s:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var a=t.raw().toString("ascii");return this._isPrintstr(a)?a:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},h.prototype._decodeObjid=function(t,e,i){for(var r,n=[],o=0;!t.isEmpty();){var s=t.readUInt8();o<<=7,o|=127&s,0==(128&s)&&(n.push(o),o=0)}128&s&&n.push(o);var a=n[0]/40|0,u=n[0]%40;if(r=i?n:[a,u].concat(n.slice(1)),e){var h=e[r.join(" ")];void 0===h&&(h=e[r.join(".")]),void 0!==h&&(r=h)}return r},h.prototype._decodeTime=function(t,e){var i=t.raw().toString();if("gentime"===e)var r=0|i.slice(0,4),n=0|i.slice(4,6),o=0|i.slice(6,8),s=0|i.slice(8,10),a=0|i.slice(10,12),u=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|i.slice(0,2),n=0|i.slice(2,4),o=0|i.slice(4,6),s=0|i.slice(6,8),a=0|i.slice(8,10),u=0|i.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,o,s,a,u,0)},h.prototype._decodeNull=function(t){return null},h.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},h.prototype._decodeInt=function(t,e){var i=t.raw(),r=new s(i);return e&&(r=e[r.toString(10)]||r),r},h.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},ry01:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="errs__"+n,f=t.util.copy(t);f.level++;var A="valid"+f.level;if(r+="var "+c+" = errors;",t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all)){f.schema=s,f.schemaPath=a,f.errSchemaPath=u;var p="key"+n,d="idx"+n,m="i"+n,y="' + "+p+" + '",g="data"+(f.dataLevel=t.dataLevel+1),v="dataProperties"+n,b=t.opts.ownProperties,w=t.baseId;b&&(r+=" var "+v+" = undefined; "),r+=b?" "+v+" = "+v+" || Object.keys("+l+"); for (var "+d+"=0; "+d+"<"+v+".length; "+d+"++) { var "+p+" = "+v+"["+d+"]; ":" for (var "+p+" in "+l+") { ",r+=" var startErrs"+n+" = errors; ";var x=p,M=t.compositeRule;t.compositeRule=f.compositeRule=!0;var _=t.validate(f);f.baseId=w,t.util.varOccurences(_,g)<2?r+=" "+t.util.varReplace(_,g,x)+" ":r+=" var "+g+" = "+x+"; "+_+" ",t.compositeRule=f.compositeRule=M,r+=" if (!"+A+") { for (var "+m+"=startErrs"+n+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+p+"; }   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { propertyName: '"+y+"' } ",!1!==t.opts.messages&&(r+=" , message: 'property name \\'"+y+"\\' is invalid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&h&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),h&&(r+=" break; "),r+=" } }"}return h&&(r+="  if ("+c+" == errors) {"),r}},s83z:function(t,e,i){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(5).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function h(t,e,i,r){for(var n=0,o=Math.min(t.length,i),s=e;s<o;s++){var a=t.charCodeAt(s)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===i)for(n=t.length-1,o=0;n>=0;n-=3)s=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===i)for(n=0,o=0;n<t.length;n+=3)s=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o=0,s=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=u(t,e,r)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,s=o%r,a=Math.min(o,o-s)+i,u=0,l=i;l<a;l+=r)u=h(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var c=1;for(u=h(t,l,t.length,e),l=0;l<s;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function A(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],s=n*o,a=67108863&s,u=s/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),A=Math.max(0,h-t.length+1);A<=f;A++){var p=h-A|0;l+=(s=(n=0|t.words[p])*(o=0|e.words[A])+c)/67108864|0,c=67108863&s}i.words[h]=0|c,u=0|l}return 0!==u?i.words[h]=0|u:i.length--,i.strip()}o.prototype.toString=function(t,e){var i;if(t=t||10,e=0|e||1,16===t||"hex"===t){i="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<n|o)).toString(16);o=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,s--),i=0!==o||s!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],A=f[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var d=p.modn(A).toString(t);i=(p=p.idivn(A)).isZero()?d+i:l[h-d.length]+d+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,h=new t(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[a]=s;for(;a<o;a++)h[a]=0}else{for(a=0;a<o-n;a++)h[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),h[o-a-1]=s}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|i.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<i.length;s++)o=(e=(0|i.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,s=t.words,a=e.words,u=i.words,h=0,l=0|s[0],c=8191&l,f=l>>>13,A=0|s[1],p=8191&A,d=A>>>13,m=0|s[2],y=8191&m,g=m>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],M=8191&x,_=x>>>13,S=0|s[5],B=8191&S,E=S>>>13,C=0|s[6],T=8191&C,F=C>>>13,P=0|s[7],O=8191&P,D=P>>>13,R=0|s[8],I=8191&R,U=R>>>13,L=0|s[9],k=8191&L,j=L>>>13,Q=0|a[0],N=8191&Q,z=Q>>>13,H=0|a[1],V=8191&H,G=H>>>13,K=0|a[2],Y=8191&K,X=K>>>13,W=0|a[3],q=8191&W,Z=W>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],ot=8191&nt,st=nt>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,lt=0|a[8],ct=8191&lt,ft=lt>>>13,At=0|a[9],pt=8191&At,dt=At>>>13;i.negative=t.negative^e.negative,i.length=19;var mt=(h+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,z))+Math.imul(f,N)|0))<<13)|0;h=((o=Math.imul(f,z))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,z))+Math.imul(d,N)|0,o=Math.imul(d,z);var yt=(h+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,V)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,z))+Math.imul(g,N)|0,o=Math.imul(g,z),r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(d,V)|0,o=o+Math.imul(d,G)|0;var gt=(h+(r=r+Math.imul(c,Y)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,Y)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(b,N),n=(n=Math.imul(b,z))+Math.imul(w,N)|0,o=Math.imul(w,z),r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0,r=r+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(d,Y)|0,o=o+Math.imul(d,X)|0;var vt=(h+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,q)|0))<<13)|0;h=((o=o+Math.imul(f,Z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(M,N),n=(n=Math.imul(M,z))+Math.imul(_,N)|0,o=Math.imul(_,z),r=r+Math.imul(b,V)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(y,Y)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,X)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(d,q)|0,o=o+Math.imul(d,Z)|0;var bt=(h+(r=r+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(B,N),n=(n=Math.imul(B,z))+Math.imul(E,N)|0,o=Math.imul(E,z),r=r+Math.imul(M,V)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(b,Y)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(y,q)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,Z)|0,r=r+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(d,$)|0,o=o+Math.imul(d,tt)|0;var wt=(h+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;h=((o=o+Math.imul(f,rt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,N),n=(n=Math.imul(T,z))+Math.imul(F,N)|0,o=Math.imul(F,z),r=r+Math.imul(B,V)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,G)|0,r=r+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(b,q)|0,n=(n=n+Math.imul(b,Z)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(y,$)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(d,it)|0,o=o+Math.imul(d,rt)|0;var xt=(h+(r=r+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,st)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,st)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,z))+Math.imul(D,N)|0,o=Math.imul(D,z),r=r+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,G)|0,r=r+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Z)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(b,$)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,rt)|0,r=r+Math.imul(p,ot)|0,n=(n=n+Math.imul(p,st)|0)+Math.imul(d,ot)|0,o=o+Math.imul(d,st)|0;var Mt=(h+(r=r+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,N),n=(n=Math.imul(I,z))+Math.imul(U,N)|0,o=Math.imul(U,z),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,V)|0,o=o+Math.imul(D,G)|0,r=r+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,r=r+Math.imul(B,q)|0,n=(n=n+Math.imul(B,Z)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(b,it)|0,n=(n=n+Math.imul(b,rt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0,r=r+Math.imul(p,ut)|0,n=(n=n+Math.imul(p,ht)|0)+Math.imul(d,ut)|0,o=o+Math.imul(d,ht)|0;var _t=(h+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,z))+Math.imul(j,N)|0,o=Math.imul(j,z),r=r+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,G)|0,r=r+Math.imul(O,Y)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,r=r+Math.imul(T,q)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(F,q)|0,o=o+Math.imul(F,Z)|0,r=r+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(_,it)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(d,ct)|0,o=o+Math.imul(d,ft)|0;var St=(h+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(f,pt)|0))<<13)|0;h=((o=o+Math.imul(f,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(k,V),n=(n=Math.imul(k,G))+Math.imul(j,V)|0,o=Math.imul(j,G),r=r+Math.imul(I,Y)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(U,Y)|0,o=o+Math.imul(U,X)|0,r=r+Math.imul(O,q)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(D,q)|0,o=o+Math.imul(D,Z)|0,r=r+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,r=r+Math.imul(B,it)|0,n=(n=n+Math.imul(B,rt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,r=r+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var Bt=(h+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,dt)|0)+Math.imul(d,pt)|0))<<13)|0;h=((o=o+Math.imul(d,dt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(k,Y),n=(n=Math.imul(k,X))+Math.imul(j,Y)|0,o=Math.imul(j,X),r=r+Math.imul(I,q)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,Z)|0,r=r+Math.imul(O,$)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(T,it)|0,n=(n=n+Math.imul(T,rt)|0)+Math.imul(F,it)|0,o=o+Math.imul(F,rt)|0,r=r+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,dt)|0)+Math.imul(g,pt)|0))<<13)|0;h=((o=o+Math.imul(g,dt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(k,q),n=(n=Math.imul(k,Z))+Math.imul(j,q)|0,o=Math.imul(j,Z),r=r+Math.imul(I,$)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,tt)|0,r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(D,it)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(T,ot)|0,n=(n=n+Math.imul(T,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,r=r+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ft)|0;var Ct=(h+(r=r+Math.imul(b,pt)|0)|0)+((8191&(n=(n=n+Math.imul(b,dt)|0)+Math.imul(w,pt)|0))<<13)|0;h=((o=o+Math.imul(w,dt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(k,$),n=(n=Math.imul(k,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),r=r+Math.imul(I,it)|0,n=(n=n+Math.imul(I,rt)|0)+Math.imul(U,it)|0,o=o+Math.imul(U,rt)|0,r=r+Math.imul(O,ot)|0,n=(n=n+Math.imul(O,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(T,ut)|0,n=(n=n+Math.imul(T,ht)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ht)|0,r=r+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var Tt=(h+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,dt)|0)+Math.imul(_,pt)|0))<<13)|0;h=((o=o+Math.imul(_,dt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(k,it),n=(n=Math.imul(k,rt))+Math.imul(j,it)|0,o=Math.imul(j,rt),r=r+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,st)|0)+Math.imul(U,ot)|0,o=o+Math.imul(U,st)|0,r=r+Math.imul(O,ut)|0,n=(n=n+Math.imul(O,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,r=r+Math.imul(T,ct)|0,n=(n=n+Math.imul(T,ft)|0)+Math.imul(F,ct)|0,o=o+Math.imul(F,ft)|0;var Ft=(h+(r=r+Math.imul(B,pt)|0)|0)+((8191&(n=(n=n+Math.imul(B,dt)|0)+Math.imul(E,pt)|0))<<13)|0;h=((o=o+Math.imul(E,dt)|0)+(n>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,r=Math.imul(k,ot),n=(n=Math.imul(k,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(U,ut)|0,o=o+Math.imul(U,ht)|0,r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Pt=(h+(r=r+Math.imul(T,pt)|0)|0)+((8191&(n=(n=n+Math.imul(T,dt)|0)+Math.imul(F,pt)|0))<<13)|0;h=((o=o+Math.imul(F,dt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(k,ut),n=(n=Math.imul(k,ht))+Math.imul(j,ut)|0,o=Math.imul(j,ht),r=r+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(U,ct)|0,o=o+Math.imul(U,ft)|0;var Ot=(h+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,dt)|0)+Math.imul(D,pt)|0))<<13)|0;h=((o=o+Math.imul(D,dt)|0)+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(k,ct),n=(n=Math.imul(k,ft))+Math.imul(j,ct)|0,o=Math.imul(j,ft);var Dt=(h+(r=r+Math.imul(I,pt)|0)|0)+((8191&(n=(n=n+Math.imul(I,dt)|0)+Math.imul(U,pt)|0))<<13)|0;h=((o=o+Math.imul(U,dt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Rt=(h+(r=Math.imul(k,pt))|0)+((8191&(n=(n=Math.imul(k,dt))+Math.imul(j,pt)|0))<<13)|0;return h=((o=Math.imul(j,dt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=mt,u[1]=yt,u[2]=gt,u[3]=vt,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=_t,u[9]=St,u[10]=Bt,u[11]=Et,u[12]=Ct,u[13]=Tt,u[14]=Ft,u[15]=Pt,u[16]=Ot,u[17]=Dt,u[18]=Rt,0!==h&&(u[19]=h,i.length++),i};function d(t,e,i){return(new m).mulp(t,e,i)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=A),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?A(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var s=n;n=0;for(var a=67108863&r,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;a=67108863&(f=f+a|0),n+=(s=(s=s+(c/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}i.words[o]=a,r=s,s=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},m.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},m.prototype.permute=function(t,e,i,r,n,o){for(var s=0;s<o;s++)r[s]=e[t[s]],n[s]=i[t[s]]},m.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),l=0;l<n;l+=a)for(var c=u,f=h,A=0;A<s;A++){var p=i[l+A],d=r[l+A],m=i[l+A+s],y=r[l+A+s],g=c*m-f*y;y=c*y+f*m,m=g,i[l+A]=p+m,r[l+A]=d+y,i[l+A+s]=p-m,r[l+A+s]=d-y,A!==a&&(g=u*c-h*f,f=u*f+h*c,c=g)}},m.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},m.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,i,n){for(var o=0,s=0;s<e;s++)o+=0|t[s],i[2*s]=8191&o,o>>>=13,i[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<n;++s)i[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},m.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,n),this.transform(h,o,l,c,r,n);for(var A=0;A<r;A++){var p=a[A]*l[A]-u[A]*c[A];u[A]=a[A]*c[A]+u[A]*l[A],a[A]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this.length=0===t?1:this.length,this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<i;this.words[e]=u|s,s=a>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=i;if(n-=s,n=Math.max(0,n),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i)&&!!(this.words[i]&n)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var n,o,s=t.length+i;this._expand(s);var a=0;for(n=0;n<t.length;n++){o=(0|this.words[n+i])+a;var u=(0|t.words[n])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)a=(o=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,s=0|n.words[n.length-1];0!==(i=26-this._countBits(s))&&(n=n.ushln(i),r.iushln(i),s=0|n.words[n.length-1]);var a,u=r.length-n.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var l=r.clone()._ishlnsubmul(n,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(n,f,c);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++h;for(var l=i.clone(),c=e.clone();!e.isZero();){for(var f=0,A=1;0==(e.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(l),s.isub(c)),n.iushrn(1),s.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(c)),a.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),s.isub(u)):(i.isub(e),a.isub(n),u.isub(s))}return{a:a,b:u,gcd:i.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new o(1),a=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(a)):(i.isub(e),a.isub(s))}return(n=0===e.cmpn(1)?s:a).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,s=i;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function g(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},g.prototype.split=function(t,e){t.iushrn(this.n,0,e)},g.prototype.imulK=function(t){return t.imul(this.k)},n(v,g),v.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(b,g),n(w,g),n(x,g),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),A=this.pow(t,n),p=s;0!==A.cmp(a);){for(var d=A,m=0;0!==d.cmp(a);m++)d=d.redSqr();r(m<p);var y=this.pow(c,new o(1).iushln(p-m-1));f=f.redMul(y),c=y.redSqr(),A=A.redMul(c),p=m}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var h=e.words[r],l=u-1;l>=0;l--){var c=h>>l&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==s?(s<<=1,s|=c,(4===++a||0===r&&0===l)&&(n=this.mul(n,i[s]),a=0,s=0)):a=0}u=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new _(t)},n(_,M),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}).call(e,i("3IRH")(t))},sakm:function(t,e,i){"use strict";t.exports={metaSchemaRef:function(t){var e=t._opts.defaultMeta;return"string"==typeof e?{$ref:e}:t.getSchema(r)?{$ref:r}:{}}};var r="http://json-schema.org/draft-07/schema"},tRuz:function(t,e,i){"use strict";var r=e;r.base=i("B6Bn"),r.short=i("wrMp"),r.mont=i("pS+P"),r.edwards=i("24Y6")},tXf9:function(t,e,i){var r=i("bSQl"),n=i("+jDU"),o=i("6ZSt");e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=n.createDecipher,e.createDecipheriv=e.Decipheriv=n.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},toHR:function(t,e,i){"use strict";t.exports=function t(e){return t.definition={type:"object",macro:function(t){return 0==t.length||(1==t.length?{required:t}:{anyOf:t.map(function(t){return{required:[t]}})})},metaSchema:{type:"array",items:{type:"string"}}},e.addKeyword("anyRequired",t.definition),e}},tpuU:function(t,e,i){"use strict";var r=e;function n(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",i=0;i<t.length;i++)e+=n(t[i].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)i[r]=0|t[r];return i}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var n=t.charCodeAt(r),o=n>>8,s=255&n;o?i.push(o,s):i.push(s)}return i},r.zero2=n,r.toHex=o,r.encode=function(t,e){return"hex"===e?o(t):t}},txgm:function(t,e,i){var r;function n(t){this.rand=t}if(t.exports=function(t){return r||(r=new n(null)),r.generate(t)},t.exports.Rand=n,n.prototype.generate=function(t){return this._rand(t)},n.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=i(7);if("function"!=typeof o.randomBytes)throw new Error("Not supported");n.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},vRXZ:function(t,e,i){"use strict";var r,n,o=Function.prototype.toString,s="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof s&&"function"==typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},s(function(){throw 42},null,r)}catch(t){t!==n&&(s=null)}else s=null;var a=/^\s*class\b/,u=function(t){try{var e=o.call(t);return a.test(e)}catch(t){return!1}},h=function(t){try{return!u(t)&&(o.call(t),!0)}catch(t){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,f=!(0 in[,]),A=function(){return!1};if("object"==typeof document){var p=document.all;l.call(p)===l.call(document.all)&&(A=function(t){if((f||!t)&&(void 0===t||"object"==typeof t))try{var e=l.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=s?function(t){if(A(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{s(t,null,r)}catch(t){if(t!==n)return!1}return!u(t)&&h(t)}:function(t){if(A(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return h(t);if(u(t))return!1;var e=l.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&h(t)}},vWx2:function(t,e,i){var r=i("LC74"),n=i("EuP9").Buffer,o=i("reGU");function s(t){o.call(this,t),this.enc="pem"}r(s,o),t.exports=s,s.prototype.decode=function(t,e){for(var i=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,u=-1,h=0;h<i.length;h++){var l=i[h].match(s);if(null!==l&&l[2]===r){if(-1!==a){if("END"!==l[1])break;u=h;break}if("BEGIN"!==l[1])break;a=h}}if(-1===a||-1===u)throw new Error("PEM section not found for: "+r);var c=i.slice(a+1,u).join("");c.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new n(c,"base64");return o.prototype.decode.call(this,f,e)}},vugd:function(t,e,i){var r=i("3UtB").Reporter,n=i("3UtB").EncoderBuffer,o=i("3UtB").DecoderBuffer,s=i("08Lv"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function h(t,e){var i={};this._baseState=i,i.enc=t,i.parent=e||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}t.exports=h;var l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){var t=this._baseState,e={};l.forEach(function(i){e[i]=t[i]});var i=new this.constructor(e.parent);return i._baseState=e,i},h.prototype._wrap=function(){var t=this._baseState;u.forEach(function(e){this[e]=function(){var i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}},this)},h.prototype._init=function(t){var e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),s.equal(e.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(t){var e=this._baseState,i=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==i.length&&(s(null===e.children),e.children=i,i.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(i){i==(0|i)&&(i|=0);var r=t[i];e[r]=i}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){h.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),a.forEach(function(t){h.prototype[t]=function(){var e=this._baseState,i=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(i),this}}),h.prototype.use=function(t){s(t);var e=this._baseState;return s(null===e.use),e.use=t,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(t){var e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},h.prototype.explicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},h.prototype.implicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},h.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},h.prototype.key=function(t){var e=this._baseState;return s(null===e.key),e.key=t,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(t){var e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},h.prototype.contains=function(t){var e=this._baseState;return s(null===e.use),e.contains=t,this},h.prototype._decode=function(t,e){var i=this._baseState;if(null===i.parent)return t.wrapResult(i.children[0]._decode(t,e));var r,n=i.default,s=!0,a=null;if(null!==i.key&&(a=t.enterKey(i.key)),i.optional){var u=null;if(null!==i.explicit?u=i.explicit:null!==i.implicit?u=i.implicit:null!==i.tag&&(u=i.tag),null!==u||i.any){if(s=this._peekTag(t,u,i.any),t.isError(s))return s}else{var h=t.save();try{null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e),s=!0}catch(t){s=!1}t.restore(h)}}if(i.obj&&s&&(r=t.enterObject()),s){if(null!==i.explicit){var l=this._decodeTag(t,i.explicit);if(t.isError(l))return l;t=l}var c=t.offset;if(null===i.use&&null===i.choice){if(i.any)h=t.save();var f=this._decodeTag(t,null!==i.implicit?i.implicit:i.tag,i.any);if(t.isError(f))return f;i.any?n=t.raw(h):t=f}if(e&&e.track&&null!==i.tag&&e.track(t.path(),c,t.length,"tagged"),e&&e.track&&null!==i.tag&&e.track(t.path(),t.offset,t.length,"content"),n=i.any?n:null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e),t.isError(n))return n;if(i.any||null!==i.choice||null===i.children||i.children.forEach(function(i){i._decode(t,e)}),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){var A=new o(n);n=this._getUse(i.contains,t._reporterState.obj)._decode(A,e)}}return i.obj&&s&&(n=t.leaveObject(r)),null===i.key||null===n&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,i.key,n),n},h.prototype._decodeGeneric=function(t,e,i){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],i):/str$/.test(t)?this._decodeStr(e,t,i):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],i):"objid"===t?this._decodeObjid(e,null,null,i):"gentime"===t||"utctime"===t?this._decodeTime(e,t,i):"null_"===t?this._decodeNull(e,i):"bool"===t?this._decodeBool(e,i):"objDesc"===t?this._decodeStr(e,t,i):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],i):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},h.prototype._getUse=function(t,e){var i=this._baseState;return i.useDecoder=this._use(t,e),s(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},h.prototype._decodeChoice=function(t,e){var i=this._baseState,r=null,n=!1;return Object.keys(i.choice).some(function(o){var s=t.save(),a=i.choice[o];try{var u=a._decode(t,e);if(t.isError(u))return!1;r={type:o,value:u},n=!0}catch(e){return t.restore(s),!1}return!0},this),n?r:t.error("Choice not matched")},h.prototype._createEncoderBuffer=function(t){return new n(t,this.reporter)},h.prototype._encode=function(t,e,i){var r=this._baseState;if(null===r.default||r.default!==t){var n=this._encodeValue(t,e,i);if(void 0!==n&&!this._skipDefault(n,e,i))return n}},h.prototype._encodeValue=function(t,e,i){var n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,e||new r);var o=null;if(this.reporter=e,n.optional&&void 0===t){if(null===n.default)return;t=n.default}var s=null,a=!1;if(n.any)o=this._createEncoderBuffer(t);else if(n.choice)o=this._encodeChoice(t,e);else if(n.contains)s=this._getUse(n.contains,i)._encode(t,e),a=!0;else if(n.children)s=n.children.map(function(i){if("null_"===i._baseState.tag)return i._encode(null,e,t);if(null===i._baseState.key)return e.error("Child should have a key");var r=e.enterKey(i._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var n=i._encode(t[i._baseState.key],e,t);return e.leaveKey(r),n},this).filter(function(t){return t}),s=this._createEncoderBuffer(s);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return e.error("Too many args for : "+n.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(i){var r=this._baseState;return this._getUse(r.args[0],t)._encode(i,e)},u))}else null!==n.use?o=this._getUse(n.use,i)._encode(t,e):(s=this._encodePrimitive(n.tag,t),a=!0);if(!n.any&&null===n.choice){var h=null!==n.implicit?n.implicit:n.tag,l=null===n.implicit?"universal":"context";null===h?null===n.use&&e.error("Tag could be omitted only for .use()"):null===n.use&&(o=this._encodeComposite(h,a,l,s))}return null!==n.explicit&&(o=this._encodeComposite(n.explicit,!1,"context",o)),o},h.prototype._encodeChoice=function(t,e){var i=this._baseState,r=i.choice[t.type];return r||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(i.choice))),r._encode(t.value,e)},h.prototype._encodePrimitive=function(t,e){var i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},h.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},h.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}},vzCy:function(t,e,i){"use strict";var r,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise(function(i,r){function n(i){t.removeListener(e,o),r(i)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&m(t,"error",e,i)}(t,n,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,i,r){var n,o,s;if(h(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),s=o[e]),void 0===s)s=o[e]=i,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),(n=l(t))>0&&s.length>n&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,console&&console.warn}return t}function f(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return n.listener=i,r.wrapFn=n,n}function A(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):d(n,n.length)}function p(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function d(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function m(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function n(o){r.once&&t.removeEventListener(e,n),i(o)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=n[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var h=u.length,l=d(u,h);for(i=0;i<h;++i)o(l[i],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){return h(e),this.on(t,f(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,f(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,r,n,o,s;if(h(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){s=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,o=Object.keys(i);for(r=0;r<o.length;++r)"removeListener"!==(n=o[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return A(this,t,!0)},a.prototype.rawListeners=function(t){return A(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},wAvw:function(t,e,i){"use strict";var r=i("GfdO");t.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:r.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:r.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},wTgI:function(t,e,i){"use strict";t.exports=Math.pow},wrMp:function(t,e,i){"use strict";var r=i("TkWM"),n=i("YP8Q"),o=i("LC74"),s=i("B6Bn"),a=r.assert;function u(t){s.call(this,"short",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(t,e,i,r){s.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(e,16),this.y=new n(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(t,e,i,r){s.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(e,16),this.y=new n(i,16),this.z=new n(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,s),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new n(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)i=new n(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?i=o[0]:(i=o[1],a(0===this.g.mul(i).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:i,basis:t.basis?t.basis.map(function(t){return{a:new n(t.a,16),b:new n(t.b,16)}}):this._getEndoBasis(i)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:n.mont(t),i=new n(2).toRed(e).redInvm(),r=i.redNeg(),o=new n(3).toRed(e).redNeg().redSqrt().redMul(i);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,i,r,o,s,a,u,h,l,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,A=this.n.clone(),p=new n(1),d=new n(0),m=new n(0),y=new n(1),g=0;0!==f.cmpn(0);){var v=A.div(f);h=A.sub(v.mul(f)),l=m.sub(v.mul(p));var b=y.sub(v.mul(d));if(!r&&h.cmp(c)<0)e=u.neg(),i=p,r=h.neg(),o=l;else if(r&&2==++g)break;u=h,A=f,f=h,m=p,p=l,y=d,d=b}s=h.neg(),a=l;var w=r.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(w)>=0&&(s=e,a=i),r.negative&&(r=r.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:r,b:o},{a:s,b:a}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],n=r.b.mul(t).divRound(this.n),o=i.b.neg().mul(t).divRound(this.n),s=n.mul(i.a),a=o.mul(r.a),u=n.mul(i.b),h=o.mul(r.b);return{k1:t.sub(s).sub(a),k2:u.add(h).neg()}},u.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(e&&!o||!e&&o)&&(r=r.redNeg()),this.point(t,r)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(n).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,n=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),r[2*o]=a,r[2*o+1]=u,n[2*o]=s.k1,n[2*o+1]=s.k2}for(var h=this._wnafMulAdd(1,r,n,2*o,i),l=0;l<2*o;l++)r[l]=null,n[l]=null;return h},o(h,s.BasePoint),u.prototype.point=function(t,e,i){return new h(this,t,e,i)},u.prototype.pointFromJSON=function(t,e){return h.fromJSON(this,t,e)},h.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function n(e){return t.point(e[0],e[1],i)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(n))}},r},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},h.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),o=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(t){return t=new n(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},h.prototype.mulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},h.prototype.jmulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},h.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},h.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,s.BasePoint),u.prototype.jpoint=function(t,e,i){return new l(this,t,e,i)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),n=t.x.redMul(i),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(i.redMul(this.z)),a=r.redSub(n),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),l=h.redMul(a),c=r.redMul(h),f=u.redSqr().redIAdd(l).redISub(c).redISub(c),A=u.redMul(c.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,A,p)},l.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),n=this.y,o=t.y.redMul(e).redMul(this.z),s=i.redSub(r),a=n.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),h=u.redMul(s),l=i.redMul(u),c=a.redSqr().redIAdd(h).redISub(l).redISub(l),f=a.redMul(l.redISub(c)).redISub(n.redMul(h)),A=this.z.redMul(s);return this.curve.jpoint(c,f,A)},l.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,n=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),h=s.redAdd(s);for(e=0;e<t;e++){var l=o.redSqr(),c=h.redSqr(),f=c.redSqr(),A=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(u)),p=o.redMul(c),d=A.redSqr().redISub(p.redAdd(p)),m=p.redISub(d),y=A.redMul(m);y=y.redIAdd(y).redISub(f);var g=h.redMul(a);e+1<t&&(u=u.redMul(f)),o=d,a=g,h=y}return this.curve.jpoint(o,h.redMul(n),a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r),u=a.redSqr().redISub(s).redISub(s),h=o.redIAdd(o);h=(h=h.redIAdd(h)).redIAdd(h),t=u,e=a.redMul(s.redISub(u)).redISub(h),i=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),c=this.y.redSqr(),f=c.redSqr(),A=this.x.redAdd(c).redSqr().redISub(l).redISub(f);A=A.redIAdd(A);var p=l.redAdd(l).redIAdd(l),d=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),t=d.redISub(A).redISub(A),e=p.redMul(A.redISub(t)).redISub(m),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},l.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);t=u;var h=o.redIAdd(o);h=(h=h.redIAdd(h)).redIAdd(h),e=a.redMul(s.redISub(u)).redISub(h),i=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),c=this.y.redSqr(),f=this.x.redMul(c),A=this.x.redSub(l).redMul(this.x.redAdd(l));A=A.redAdd(A).redIAdd(A);var p=f.redIAdd(f),d=(p=p.redIAdd(p)).redAdd(p);t=A.redSqr().redISub(d),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(l);var m=c.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),e=A.redMul(p.redISub(t)).redISub(m)}return this.curve.jpoint(t,e,i)},l.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,n=r.redSqr().redSqr(),o=e.redSqr(),s=i.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(n)),u=e.redAdd(e),h=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(h.redAdd(h)),c=h.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var A=a.redMul(c).redISub(f),p=i.redAdd(i).redMul(r);return this.curve.jpoint(l,A,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),n=t.redAdd(t).redIAdd(t),o=n.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(r),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var h=n.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=e.redMul(h);l=(l=l.redIAdd(l)).redIAdd(l);var c=this.x.redMul(a).redISub(l);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.y.redMul(h.redMul(u.redISub(h)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var A=this.z.redAdd(s).redSqr().redISub(i).redISub(a);return this.curve.jpoint(c,f,A)},l.prototype.mul=function(t,e){return t=new n(t,e),this.curve._wnafMul(this,t)},l.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),n=i.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),0===this.x.cmp(i))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},"x+9s":function(t,e,i){"use strict";var r=i("PiFy"),n=i("9RdJ"),o=i("llro"),s=i("d2Xw");t.exports=s||r.call(o,n)},x0Ha:function(t,e,i){"use strict";var r=i("ypnx");function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(n,this,t)):r.nextTick(n,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?i._writableState?i._writableState.errorEmitted||(i._writableState.errorEmitted=!0,r.nextTick(n,i,t)):r.nextTick(n,i,t):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},x4q6:function(t,e,i){"use strict";(function(e){var i=4,r=new e(i);r.fill(0);t.exports=function(t,n){var o=n(function(t){if(t.length%i!=0){var n=t.length+(i-t.length%i);t=e.concat([t,r],n)}for(var o=new Array(t.length>>>2),s=0,a=0;s<t.length;s+=i,a++)o[a]=t.readInt32LE(s);return o}(t),8*t.length);t=new e(16);for(var s=0;s<o.length;s++)t.writeInt32LE(o[s],s<<2,!0);return t}}).call(e,i("EuP9").Buffer)},"xHa+":function(t,e,i){"use strict";const r=i("o/zv"),n=/^\.\.?[/\\]/;function o(t){return r.posix.isAbsolute(t)||r.win32.isAbsolute(t)}t.exports=function(t,e){const i=e.split("!"),s=t.context||t.options&&t.options.context;return JSON.stringify(i.map(t=>{const e=t.match(/^(.*?)(\?.*)/),i=e?e[2]:"";let u=e?e[1]:t;if(o(u)&&s){if(o(u=r.relative(s,u)))return u+i;!1===(a=u,n.test(a))&&(u="./"+u)}return u.replace(/\\/g,"/")+i}).join("!"));var a}},xTtY:function(t,e,i){"use strict";t.exports=TypeError},xiFT:function(t,e){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},xl8I:function(t,e,i){"use strict";t.exports=function(t,e,i){var r=" ",n=t.level,o=t.dataLevel,s=t.schema[e],a=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,l="data"+(o||""),c="valid"+n,f="errs__"+n,A=t.util.copy(t),p="";A.level++;var d="valid"+A.level;if(s.every(function(e){return t.opts.strictKeywords?"object"==typeof e&&Object.keys(e).length>0||!1===e:t.util.schemaHasRules(e,t.RULES.all)})){var m=A.baseId;r+=" var "+f+" = errors; var "+c+" = false;  ";var y=t.compositeRule;t.compositeRule=A.compositeRule=!0;var g=s;if(g)for(var v,b=-1,w=g.length-1;b<w;)v=g[b+=1],A.schema=v,A.schemaPath=a+"["+b+"]",A.errSchemaPath=u+"/"+b,r+="  "+t.validate(A)+" ",A.baseId=m,r+=" "+c+" = "+c+" || "+d+"; if (!"+c+") { ",p+="}";t.compositeRule=A.compositeRule=y,r+=" "+p+" if (!"+c+") {   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&h&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else h&&(r+=" if (true) { ");return r}},xthj:function(t,e,i){"use strict";t.exports={$ref:i("R5/c"),allOf:i("5x49"),anyOf:i("xl8I"),$comment:i("3D9i"),const:i("040L"),contains:i("+hAD"),dependencies:i("Hi1a"),enum:i("cNvS"),format:i("cZwb"),if:i("Ik9x"),items:i("49tr"),maximum:i("XfLb"),minimum:i("XfLb"),maxItems:i("DeUQ"),minItems:i("DeUQ"),maxLength:i("DFwl"),minLength:i("DFwl"),maxProperties:i("WwT5"),minProperties:i("WwT5"),multipleOf:i("qFST"),not:i("KWtJ"),oneOf:i("lagR"),pattern:i("oOoY"),properties:i("joVi"),propertyNames:i("ry01"),required:i("0ufc"),uniqueItems:i("JBxl"),validate:i("NpaQ")}},yDvu:function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("9DG0").Transform;function o(t){n.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i("LC74")(o,n),o.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(t){r=t}i(r)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)};var s="undefined"!=typeof Uint8Array,a="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);o.prototype.update=function(t,e){if(this._finalized)throw new Error("Digest already called");t=function(t,e){if(t instanceof r)return t;if("string"==typeof t)return r.from(t,e);if(a&&ArrayBuffer.isView(t)){if(0===t.byteLength)return r.alloc(0);var i=r.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}if(s&&t instanceof Uint8Array)return r.from(t);if(r.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return r.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,e);for(var i=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)i[o++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)i[this._blockOffset++]=t[n++];for(var u=0,h=8*t.length;h>0;++u)this._length[u]+=h,(h=this._length[u]/4294967296|0)>0&&(this._length[u]-=4294967296*h);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},yMmo:function(t,e,i){"use strict";var r=i("YP8Q"),n=i("TkWM").assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,i){return e instanceof o?e:new o(t,{pub:e,pubEnc:i})},o.fromPrivate=function(t,e,i){return e instanceof o?e:new o(t,{priv:e,privEnc:i})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?n(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.validate()||n(t.validate(),"public point not validated"),t.mul(this.priv).getX()},o.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},o.prototype.verify=function(t,e,i){return this.ec.verify(t,e,this,void 0,i)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},yY1b:function(t,e,i){"use strict";t.exports=Math.abs},yYa5:function(t,e,i){var r;r=function(){return e=[function(t,e,i){var r;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r=function(){"use strict";var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(e,i)};function e(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}var i=function(){return(i=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function r(t,e,i,r){return new(i=i||Promise)(function(n,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function o(t,e){var i,r,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&u[0]?r.return:u[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,u[1])).done)return n;switch(r=0,(u=n?[2&u[0],n.value]:u)[0]){case 0:case 1:n=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(n=0<(n=o.trys).length&&n[n.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3]))o.label=u[1];else if(6===u[0]&&o.label<n[1])o.label=n[1],n=u;else{if(!(n&&o.label<n[2])){n[2]&&o.ops.pop(),o.trys.pop();continue}o.label=n[2],o.ops.push(u)}}u=e.call(t,o)}catch(a){u=[6,a],r=0}finally{i=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}a.prototype.add=function(t,e,i,r){return new a(this.left+t,this.top+e,this.width+i,this.height+r)},a.fromClientRect=function(t,e){return new a(e.left+t.windowBounds.left,e.top+t.windowBounds.top,e.width,e.height)},a.fromDOMRectList=function(t,e){return(e=Array.from(e).find(function(t){return 0!==t.width}))?new a(e.left+t.windowBounds.left,e.top+t.windowBounds.top,e.width,e.height):a.EMPTY},a.EMPTY=new a(0,0,0,0);var s=a;function a(t,e,i,r){this.left=t,this.top=e,this.width=i,this.height=r}for(var u=function(t,e){return s.fromClientRect(t,e.getBoundingClientRect())},h=function(t){for(var e=[],i=0,r=t.length;i<r;){var n,o=t.charCodeAt(i++);55296<=o&&o<=56319&&i<r?56320==(64512&(n=t.charCodeAt(i++)))?e.push(((1023&o)<<10)+(1023&n)+65536):(e.push(o),i--):e.push(o)}return e},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var r=[],n=-1,o="";++n<i;){var s=t[n];s<=65535?r.push(s):r.push(55296+((s-=65536)>>10),s%1024+56320),(n+1===i||16384<r.length)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"==typeof Uint8Array?[]:new Uint8Array(256),A=0;A<c.length;A++)f[c.charCodeAt(A)]=A;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"==typeof Uint8Array?[]:new Uint8Array(256),m=0;m<p.length;m++)d[p.charCodeAt(m)]=m;function y(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))}v.prototype.get=function(t){var e;if(0<=t){if(t<55296||56319<t&&t<=65535)return e=this.index[t>>5],this.data[e=(e<<2)+(31&t)];if(t<=65535)return e=this.index[2048+(t-55296>>5)],this.data[e=(e<<2)+(31&t)];if(t<this.highStart)return e=this.index[e=2080+(t>>11)],e=this.index[e+=t>>5&63],this.data[e=(e<<2)+(31&t)];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue};var g=v;function v(t,e,i,r,n,o){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=r,this.index=n,this.data=o}for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="undefined"==typeof Uint8Array?[]:new Uint8Array(256),x=0;x<b.length;x++)w[b.charCodeAt(x)]=x;function M(t,e,i,r){var n=r[i];if(Array.isArray(t)?-1!==t.indexOf(n):t===n)for(var o=i;o<=r.length;){if((a=r[++o])===e)return 1;if(a!==S)break}if(n===S)for(o=i;0<o;){var s=r[--o];if(Array.isArray(t)?-1!==t.indexOf(s):t===s)for(var a,u=i;u<=r.length;){if((a=r[++u])===e)return 1;if(a!==S)break}if(s!==S)break}}function _(t,e){for(var i=t;0<=i;){var r=e[i];if(r!==S)return r;i--}return 0}var S=10,B=13,E=15,C=17,T=18,F=19,P=20,O=21,D=22,R=24,I=25,U=26,L=27,k=28,j=32,Q=33,N=34,z=35,H=37,V=38,G=39,K=40,Y=[9001,65288],X="",W=(le=function(t){var e,i,r,n,o=.75*t.length,s=t.length,a=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2])&&o--;o=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(o);for(var u=Array.isArray(o)?o:new Uint8Array(o),h=0;h<s;h+=4)e=d[t.charCodeAt(h)],i=d[t.charCodeAt(h+1)],r=d[t.charCodeAt(h+2)],n=d[t.charCodeAt(h+3)],u[a++]=e<<2|i>>4,u[a++]=(15&i)<<4|r>>2,u[a++]=(3&r)<<6|63&n;return o}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Sr=Array.isArray(le)?function(t){for(var e=t.length,i=[],r=0;r<e;r+=4)i.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return i}(le):new Uint32Array(le),Br=y(ve=Array.isArray(le)?function(t){for(var e=t.length,i=[],r=0;r<e;r+=2)i.push(t[r+1]<<8|t[r]);return i}(le):new Uint16Array(le),12,Sr[4]/2),Er=2===Sr[5]?y(ve,(24+Sr[4])/2):(le=Sr,ve=Math.ceil((24+Sr[4])/4),le.slice?le.slice(ve,Er):new Uint32Array(Array.prototype.slice.call(le,ve,Er))),new g(Sr[0],Sr[1],Sr[2],Sr[3],Br,Er)),q=[30,36],Z=[1,2,3,5],J=[S,8],$=[L,U],tt=Z.concat(J),et=[V,G,K,N,z],it=[E,B],rt=(nt.prototype.slice=function(){return l.apply(void 0,this.codePoints.slice(this.start,this.end))},nt);function nt(t,e,i,r){this.codePoints=t,this.required="!"===e,this.start=i,this.end=r}function ot(t){return 48<=t&&t<=57}function st(t){return ot(t)||65<=t&&t<=70||97<=t&&t<=102}function at(t){return 10===t||9===t||32===t}function ut(t){return 97<=(e=t)&&e<=122||65<=e&&e<=90||128<=t||95===t;var e}function ht(t){return ut(t)||ot(t)||45===t}function lt(t,e){return 92===t&&10!==e}function ct(t,e,i){return 45===t?ut(e)||lt(e,i):ut(t)||92===t&&10!==e}function ft(t,e,i){return 43===t||45===t?ot(e)||46===e&&ot(i):ot(46===t?e:t)}var At={type:2},pt={type:3},dt={type:4},mt={type:13},yt={type:8},gt={type:21},vt={type:9},bt={type:10},wt={type:11},xt={type:12},Mt={type:14},_t={type:23},St={type:1},Bt={type:25},Et={type:24},Ct={type:26},Tt={type:27},Ft={type:28},Pt={type:29},Ot={type:31},Dt={type:32},Rt=(It.prototype.write=function(t){this.A=this.A.concat(h(t))},It.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==Dt;)t.push(e),e=this.consumeToken();return t},It.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e,i=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(ht(i)||lt(r,n))return e=ct(i,r,n)?2:1,{type:5,value:this.consumeName(),flags:e};break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),mt;break;case 39:return this.consumeStringToken(39);case 40:return At;case 41:return pt;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Mt;break;case 43:if(ft(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return dt;case 45:if(ft(n=t,e=this.peekCodePoint(0),s=this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(ct(n,e,s))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(45===e&&62===s)return this.consumeCodePoint(),this.consumeCodePoint(),Et;break;case 46:if(ft(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var o=this.consumeCodePoint();if(42===o&&47===(o=this.consumeCodePoint()))return this.consumeToken();if(-1===o)return this.consumeToken()}break;case 58:return Ct;case 59:return Tt;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),Bt;break;case 64:var s=this.peekCodePoint(0),a=this.peekCodePoint(1),u=this.peekCodePoint(2);if(ct(s,a,u))return{type:7,value:this.consumeName()};break;case 91:return Ft;case 92:if(lt(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return Pt;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),yt;break;case 123:return wt;case 125:return xt;case 117:case 85:return a=this.peekCodePoint(0),u=this.peekCodePoint(1),43!==a||!st(u)&&63!==u||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),vt;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),gt;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),bt;break;case-1:return Dt}return at(t)?(this.consumeWhiteSpace(),Ot):ot(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):ut(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:l(t)}},It.prototype.consumeCodePoint=function(){var t=this.A.shift();return void 0===t?-1:t},It.prototype.reconsumeCodePoint=function(t){this.A.unshift(t)},It.prototype.peekCodePoint=function(t){return t>=this.A.length?-1:this.A[t]},It.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();st(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var i=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),i=!0;if(i)return{type:30,start:parseInt(l.apply(void 0,t.map(function(t){return 63===t?48:t})),16),end:parseInt(l.apply(void 0,t.map(function(t){return 63===t?70:t})),16)};var r=parseInt(l.apply(void 0,t),16);if(45===this.peekCodePoint(0)&&st(this.peekCodePoint(1))){this.consumeCodePoint();e=this.consumeCodePoint();for(var n=[];st(e)&&n.length<6;)n.push(e),e=this.consumeCodePoint();return{type:30,start:r,end:parseInt(l.apply(void 0,n),16)}}return{type:30,start:r,end:r}},It.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},It.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var e=this.peekCodePoint(0);if(39===e||34===e)return 0===(e=this.consumeStringToken(this.consumeCodePoint())).type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:e.value}):(this.consumeBadUrlRemnants(),_t);for(;;){var i=this.consumeCodePoint();if(-1===i||41===i)return{type:22,value:l.apply(void 0,t)};if(at(i))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:l.apply(void 0,t)}):(this.consumeBadUrlRemnants(),_t);if(34===i||39===i||40===i||0<=i&&i<=8||11===i||14<=i&&i<=31||127===i)return this.consumeBadUrlRemnants(),_t;if(92===i){if(!lt(i,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),_t;t.push(this.consumeEscapedCodePoint())}else t.push(i)}},It.prototype.consumeWhiteSpace=function(){for(;at(this.peekCodePoint(0));)this.consumeCodePoint()},It.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||-1===t)return;lt(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},It.prototype.consumeStringSlice=function(t){for(var e="";0<t;){var i=Math.min(5e4,t);e+=l.apply(void 0,this.A.splice(0,i)),t-=i}return this.A.shift(),e},It.prototype.consumeStringToken=function(t){for(var e="",i=0;;){var r,n=this.A[i];if(-1===n||void 0===n||n===t)return{type:0,value:e+=this.consumeStringSlice(i)};if(10===n)return this.A.splice(0,i),St;92===n&&-1!==(r=this.A[i+1])&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(i),i=-1,this.A.shift()):lt(n,r)&&(e=(e+=this.consumeStringSlice(i))+l(this.consumeEscapedCodePoint()),i=-1)),i++}},It.prototype.consumeNumber=function(){var t=[],e=4;for(43!==(i=this.peekCodePoint(0))&&45!==i||t.push(this.consumeCodePoint());ot(this.peekCodePoint(0));)t.push(this.consumeCodePoint());var i=this.peekCodePoint(0),r=this.peekCodePoint(1);if(46===i&&ot(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;ot(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),r=this.peekCodePoint(1);var n=this.peekCodePoint(2);if((69===i||101===i)&&((43===r||45===r)&&ot(n)||ot(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;ot(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[function(t){var e=0,i=1;43!==t[e]&&45!==t[e]||(45===t[e]&&(i=-1),e++);for(var r=[];ot(t[e]);)r.push(t[e++]);var n=r.length?parseInt(l.apply(void 0,r),10):0;46===t[e]&&e++;for(var o=[];ot(t[e]);)o.push(t[e++]);var s=o.length,a=s?parseInt(l.apply(void 0,o),10):0,u=(69!==t[e]&&101!==t[e]||e++,1);43!==t[e]&&45!==t[e]||(45===t[e]&&(u=-1),e++);for(var h=[];ot(t[e]);)h.push(t[e++]);var c=h.length?parseInt(l.apply(void 0,h),10):0;return i*(n+a*Math.pow(10,-s))*Math.pow(10,u*c)}(t),e]},It.prototype.consumeNumericToken=function(){var t=(e=this.consumeNumber())[0],e=e[1],i=this.peekCodePoint(0);return ct(i,this.peekCodePoint(1),this.peekCodePoint(2))?{type:15,number:t,flags:e,unit:this.consumeName()}:37===i?(this.consumeCodePoint(),{type:16,number:t,flags:e}):{type:17,number:t,flags:e}},It.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(st(t)){for(var e=l(t);st(this.peekCodePoint(0))&&e.length<6;)e+=l(this.consumeCodePoint());at(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(e,16);return 0===i||55296<=i&&i<=57343||1114111<i?65533:i}return-1===t?65533:t},It.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(ht(e))t+=l(e);else{if(!lt(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=l(this.consumeEscapedCodePoint())}}},It);function It(){this.A=[]}Lt.create=function(t){var e=new Rt;return e.write(t),new Lt(e.read())},Lt.parseValue=function(t){return Lt.create(t).parseComponentValue()},Lt.parseValues=function(t){return Lt.create(t).parseComponentValues()},Lt.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);for(var e=this.consumeComponentValue();31===(t=this.consumeToken()).type;);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},Lt.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},Lt.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},Lt.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},i=this.consumeToken();;){if(32===i.type||re(i,t))return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue()),i=this.consumeToken()}},Lt.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(32===i.type||3===i.type)return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue())}},Lt.prototype.consumeToken=function(){var t=this.B.shift();return void 0===t?Dt:t},Lt.prototype.reconsumeToken=function(t){this.B.unshift(t)};var Ut=Lt;function Lt(t){this.B=t}function kt(t){return 15===t.type}function jt(t){return 17===t.type}function Qt(t){return 20===t.type}function Nt(t){return 0===t.type}function zt(t,e){return Qt(t)&&t.value===e}function Ht(t){return 31!==t.type}function Vt(t){return 31!==t.type&&4!==t.type}function Gt(t){var e=[],i=[];return t.forEach(function(t){if(4===t.type){if(0===i.length)throw new Error("Error parsing function args, zero tokens for arg");e.push(i),i=[]}else 31!==t.type&&i.push(t)}),i.length&&e.push(i),e}function Kt(t){return 17===t.type||15===t.type}function Yt(t){return 16===t.type||Kt(t)}function Xt(t){return 1<t.length?[t[0],t[1]]:[t[0]]}function Wt(t,e,i){var r=t[0];t=t[1];return[ae(r,e),ae(void 0!==t?t:r,i)]}function qt(t){return 15===t.type&&("deg"===t.unit||"grad"===t.unit||"rad"===t.unit||"turn"===t.unit)}function Zt(t){switch(t.filter(Qt).map(function(t){return t.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ne,ne];case"to top":case"bottom":return ie(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ne,se];case"to right":case"left":return ie(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[se,se];case"to bottom":case"top":return ie(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[se,ne];case"to left":case"right":return ie(270)}return 0}function Jt(t){return 0==(255&t)}function $t(t){var e=255&t,i=255&t>>8,r=255&t>>16;t=255&t>>24;return e<255?"rgba("+t+","+r+","+i+","+e/255+")":"rgb("+t+","+r+","+i+")"}function te(t,e){var i;return 17===t.type?t.number:16!==t.type?0:(i=3===e?1:255,3===e?t.number/100*i:Math.round(t.number/100*i))}function ee(t,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case"grad":return Math.PI/200*e.number;case"rad":return e.number;case"turn":return 2*Math.PI*e.number}throw new Error("Unsupported angle type")}function ie(t){return Math.PI*t/180}var re=function(t,e){return 11===e&&12===t.type||28===e&&29===t.type||2===e&&3===t.type},ne={type:17,number:0,flags:4},oe={type:16,number:50,flags:4},se={type:16,number:100,flags:4},ae=function(t,e){if(16===t.type)return t.number/100*e;if(kt(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},ue=function(t,e){if(18===e.type){var i=be[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(t,e.values)}if(5===e.type){var r,n,o,s;if(3===e.value.length)return r=e.value.substring(0,1),n=e.value.substring(1,2),o=e.value.substring(2,3),he(parseInt(r+r,16),parseInt(n+n,16),parseInt(o+o,16),1);if(4===e.value.length)return r=e.value.substring(0,1),n=e.value.substring(1,2),o=e.value.substring(2,3),s=e.value.substring(3,4),he(parseInt(r+r,16),parseInt(n+n,16),parseInt(o+o,16),parseInt(s+s,16)/255);if(6===e.value.length)return r=e.value.substring(0,2),n=e.value.substring(2,4),o=e.value.substring(4,6),he(parseInt(r,16),parseInt(n,16),parseInt(o,16),1);if(8===e.value.length)return r=e.value.substring(0,2),n=e.value.substring(2,4),o=e.value.substring(4,6),s=e.value.substring(6,8),he(parseInt(r,16),parseInt(n,16),parseInt(o,16),parseInt(s,16)/255)}return 20===e.type&&void 0!==(e=we[e.value.toUpperCase()])?e:we.TRANSPARENT},he=function(t,e,i,r){return(t<<24|e<<16|i<<8|Math.round(255*r)<<0)>>>0},le=function(t,e){var i,r,n;return 3===(e=e.filter(Vt)).length?(i=(n=e.map(te))[0],r=n[1],n=n[2],he(i,r,n,1)):4!==e.length?0:(i=(e=e.map(te))[0],r=e[1],n=e[2],e=e[3],he(i,r,n,e))};function ce(t,e,i){return i<0&&(i+=1),1<=i&&--i,i<1/6?(e-t)*i*6+t:i<.5?e:i<2/3?6*(e-t)*(2/3-i)+t:t}function fe(t,e){return ue(t,Ut.create(e).parseComponentValue())}function Ae(t,e){return t=ue(t,e[0]),(e=e[1])&&Yt(e)?{color:t,stop:e}:{color:t,stop:null}}function pe(t,e){var i=t[0],r=t[t.length-1];null===i.stop&&(i.stop=ne),null===r.stop&&(r.stop=se);for(var n=[],o=0,s=0;s<t.length;s++){var a=t[s].stop;null!==a?(o<(a=ae(a,e))?n.push(a):n.push(o),o=a):n.push(null)}var u=null;for(s=0;s<n.length;s++){var h=n[s];if(null===h)null===u&&(u=s);else if(null!==u){for(var l=s-u,c=(h-n[u-1])/(1+l),f=1;f<=l;f++)n[u+f-1]=c*f;u=null}}return t.map(function(t,i){return{color:t.color,stop:Math.max(Math.min(1,n[i]/e),0)}})}function de(t,e){return Math.sqrt(t*t+e*e)}function me(t,e,i,r,n){return[[0,0],[0,e],[t,0],[t,e]].reduce(function(t,e){var o=e[0],s=e[1];s=de(i-o,r-s);return(n?s<t.optimumDistance:s>t.optimumDistance)?{optimumCorner:e,optimumDistance:s}:t},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner}function ye(t,e){var i;if(22===e.type)return i={url:e.value,type:0},t.cache.addImage(e.value),i;if(18!==e.type)throw new Error("Unsupported image type "+e.type);if(void 0===(i=Fe[e.name]))throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return i(t,e.values)}var ge,ve=function(t,e){var i=(o=e.filter(Vt))[0],r=o[1],n=o[2],o=(e=o[3],(17===i.type?ie(i.number):ee(0,i))/(2*Math.PI));t=Yt(r)?r.number/100:0,i=Yt(n)?n.number/100:0,r=void 0!==e&&Yt(e)?ae(e,1):1;return 0==t?he(255*i,255*i,255*i,1):(t=ce(e=2*i-(n=i<=.5?i*(1+t):i+t-i*t),n,o+1/3),i=ce(e,n,o),o=ce(e,n,o-1/3),he(255*t,255*i,255*o,r))},be={hsl:ve,hsla:ve,rgb:le,rgba:le},we={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},xe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(t){if(Qt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Me={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_e="closest-side",Se="farthest-side",Be="closest-corner",Ee="farthest-corner",Ce="ellipse",Te="contain",Fe={"linear-gradient":function(t,e){var i=ie(180),r=[];return Gt(e).forEach(function(e,n){if(0===n){if(20===(n=e[0]).type&&"to"===n.value)return void(i=Zt(e));if(qt(n))return void(i=ee(0,n))}e=Ae(t,e),r.push(e)}),{angle:i,stops:r,type:1}},"-moz-linear-gradient":ve=function(t,e){var i=ie(180),r=[];return Gt(e).forEach(function(e,n){if(0===n){if(20===(n=e[0]).type&&-1!==["top","left","right","bottom"].indexOf(n.value))return void(i=Zt(e));if(qt(n))return void(i=(ee(0,n)+ie(270))%ie(360))}e=Ae(t,e),r.push(e)}),{angle:i,stops:r,type:1}},"-ms-linear-gradient":ve,"-o-linear-gradient":ve,"-webkit-linear-gradient":ve,"radial-gradient":function(t,e){var i=0,r=3,n=[],o=[];return Gt(e).forEach(function(e,s){var a,u=!0;0===s&&(a=!1,u=e.reduce(function(t,e){if(a)if(Qt(e))switch(e.value){case"center":return o.push(oe),t;case"top":case"left":return o.push(ne),t;case"right":case"bottom":return o.push(se),t}else(Yt(e)||Kt(e))&&o.push(e);else if(Qt(e))switch(e.value){case"circle":return i=0,!1;case Ce:return!(i=1);case"at":return!(a=!0);case _e:return r=0,!1;case"cover":case Se:return!(r=1);case Te:case Be:return!(r=2);case Ee:return!(r=3)}else if(Kt(e)||Yt(e))return(r=Array.isArray(r)?r:[]).push(e),!1;return t},u)),u&&(e=Ae(t,e),n.push(e))}),{size:r,shape:i,stops:n,position:o,type:2}},"-moz-radial-gradient":le=function(t,e){var i=0,r=3,n=[],o=[];return Gt(e).forEach(function(e,s){var a=!0;0===s?a=e.reduce(function(t,e){if(Qt(e))switch(e.value){case"center":return o.push(oe),!1;case"top":case"left":return o.push(ne),!1;case"right":case"bottom":return o.push(se),!1}else if(Yt(e)||Kt(e))return o.push(e),!1;return t},a):1===s&&(a=e.reduce(function(t,e){if(Qt(e))switch(e.value){case"circle":return i=0,!1;case Ce:return!(i=1);case Te:case _e:return r=0,!1;case Se:return!(r=1);case Be:return!(r=2);case"cover":case Ee:return!(r=3)}else if(Kt(e)||Yt(e))return(r=Array.isArray(r)?r:[]).push(e),!1;return t},a)),a&&(e=Ae(t,e),n.push(e))}),{size:r,shape:i,stops:n,position:o,type:2}},"-ms-radial-gradient":le,"-o-radial-gradient":le,"-webkit-radial-gradient":le,"-webkit-gradient":function(t,e){var i=ie(180),r=[],n=1;return Gt(e).forEach(function(e,i){var o;e=e[0];if(0===i){if(Qt(e)&&"linear"===e.value)return void(n=1);if(Qt(e)&&"radial"===e.value)return void(n=2)}18===e.type&&("from"===e.name?(o=ue(t,e.values[0]),r.push({stop:ne,color:o})):"to"===e.name?(o=ue(t,e.values[0]),r.push({stop:se,color:o})):"color-stop"===e.name&&2===(e=e.values.filter(Vt)).length&&(o=ue(t,e[1]),jt(e=e[0]))&&r.push({stop:{type:16,number:100*e.number,flags:e.flags},color:o}))}),1===n?{angle:(i+ie(180))%ie(360),stops:r,type:n}:{size:3,shape:0,stops:r,position:[],type:n}}},Pe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){var i;return 0===e.length||20===(i=e[0]).type&&"none"===i.value?[]:e.filter(function(t){return Vt(t)&&!(20===t.type&&"none"===t.value||18===t.type&&!Fe[t.name])}).map(function(e){return ye(t,e)})}},Oe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(t){if(Qt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},De={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Gt(e).map(function(t){return t.filter(Yt)}).map(Xt)}},Re={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Gt(e).map(function(t){return t.filter(Qt).map(function(t){return t.value}).join(" ")}).map(Ie)}},Ie=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};function Ue(t,e){return Qt(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:Yt(t)?ae(t,e):e}var Le,ke,je={name:"background-size",initialValue:"0",prefix:!((le=ge={AUTO:"auto",CONTAIN:"contain"}).COVER="cover"),type:1,parse:function(t,e){return Gt(e).map(function(t){return t.filter(Qe)})}},Qe=function(t){return Qt(t)||Yt(t)},Ne=(le=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}})("top"),ze=le("right"),He=le("bottom"),Ve=le("left"),Ge=(le=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return Xt(e.filter(Yt))}}})("top-left"),Ke=le("top-right"),Ye=le("bottom-right"),Xe=le("bottom-left"),We=(le=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}})("top"),qe=le("right"),Ze=le("bottom"),Je=le("left"),$e=(le=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return kt(e)?e.number:0}}})("top"),ti=le("right"),ei=le("bottom"),ii=le("left"),ri={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ni={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return"rtl"!==e?0:1}},oi={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Qt).reduce(function(t,e){return t|si(e.value)},0)}},si=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ai={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ui={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value||17!==e.type&&15!==e.type?0:e.number}},hi={name:"line-break",initialValue:(le=Le={}).NORMAL="normal",prefix:!(le.STRICT="strict"),type:2,parse:function(t,e){return"strict"!==e?Le.NORMAL:Le.STRICT}},li={name:"line-height",initialValue:"normal",prefix:!1,type:4},ci={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:ye(t,e)}},fi={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return"inside"!==e?1:0}},Ai={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},pi=(le=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}})("top"),di=le("right"),mi=le("bottom"),yi=le("left"),gi={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Qt).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},vi={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"break-word"!==e?"normal":"break-word"}},bi=(le=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}})("top"),wi=le("right"),xi=le("bottom"),Mi=le("left"),_i={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Si={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Bi={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&zt(e[0],"none")?[]:Gt(e).map(function(e){for(var i={color:we.TRANSPARENT,offsetX:ne,offsetY:ne,blur:ne},r=0,n=0;n<e.length;n++){var o=e[n];Kt(o)?(0===r?i.offsetX=o:1===r?i.offsetY=o:i.blur=o,r++):i.color=ue(t,o)}return i})}},Ei={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ci={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18!==e.type)return null;var i=Ti[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}},Ti={matrix:function(t){return 6===(t=t.filter(function(t){return 17===t.type}).map(function(t){return t.number})).length?t:null},matrix3d:function(t){var e=t.filter(function(t){return 17===t.type}).map(function(t){return t.number}),i=e[0],r=e[1],n=(e[2],e[3],e[4]),o=e[5],s=(e[6],e[7],e[8],e[9],e[10],e[11],e[12]);t=e[13];return e[14],e[15],16===e.length?[i,r,n,o,s,t]:null}},Fi=[le={type:16,number:50,flags:4},le],Pi={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){return 2!==(e=e.filter(Yt)).length?Fi:[e[0],e[1]]}},Oi={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};function Di(t,e){return 0!=(t&e)}function Ri(t,e,i){return(t=t&&t[Math.min(e,t.length-1)])?i?t.open:t.close:""}function Ii(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}var Ui={name:"word-break",initialValue:"normal",prefix:!((le=ke={NORMAL:"normal",BREAK_ALL:"break-all"}).KEEP_ALL="keep-all"),type:2,parse:function(t,e){switch(e){case"break-all":return ke.BREAK_ALL;case"keep-all":return ke.KEEP_ALL;default:return ke.NORMAL}}},Li={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(jt(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ki={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return jt(e)?e.number:1}},ji={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Qi={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Qt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return 0!==t})}},Ni={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var i=[],r=[];return e.forEach(function(t){switch(t.type){case 20:case 0:i.push(t.value);break;case 17:i.push(t.number.toString());break;case 4:r.push(i.join(" ")),i.length=0}}),i.length&&r.push(i.join(" ")),r.map(function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"})}},zi={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Hi={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){return jt(e)?e.number:Qt(e)&&"bold"===e.value?700:400}},Vi={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Qt).map(function(t){return t.value})}},Gi={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Ki={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){var i;return 0===e.length||20===(i=e[0]).type&&"none"===i.value?[]:e}},Yi={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;for(var r=[],n=e.filter(Ht),o=0;o<n.length;o++){var s=n[o],a=n[o+1];20===s.type&&(a=a&&jt(a)?a.number:1,r.push({counter:s.value,increment:a}))}return r}},Xi={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var i=[],r=e.filter(Ht),n=0;n<r.length;n++){var o=r[n],s=r[n+1];Qt(o)&&"none"!==o.value&&(s=s&&jt(s)?s.number:0,i.push({counter:o.value,reset:s}))}return i}},Wi={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(kt).map(function(t){return Ii(0,t)})}},qi={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;var r=[],n=e.filter(Nt);if(n.length%2!=0)return null;for(var o=0;o<n.length;o+=2){var s=n[o].value,a=n[o+1].value;r.push({open:s,close:a})}return r}},Zi={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&zt(e[0],"none")?[]:Gt(e).map(function(e){for(var i={color:255,offsetX:ne,offsetY:ne,blur:ne,spread:ne,inset:!1},r=0,n=0;n<e.length;n++){var o=e[n];zt(o,"inset")?i.inset=!0:Kt(o)?(0===r?i.offsetX=o:1===r?i.offsetY=o:2===r?i.blur=o:i.spread=o,r++):i.color=ue(t,o)}return i})}},Ji={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var i=[];return e.filter(Qt).forEach(function(t){switch(t.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2)}}),[0,1,2].forEach(function(t){-1===i.indexOf(t)&&i.push(t)}),i}},$i={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},tr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return kt(e)?e.number:0}},er=(ir.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&0===this.visibility},ir.prototype.isTransparent=function(){return Jt(this.backgroundColor)},ir.prototype.isTransformed=function(){return null!==this.transform},ir.prototype.isPositioned=function(){return 0!==this.position},ir.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},ir.prototype.isFloating=function(){return 0!==this.float},ir.prototype.isInlineLevel=function(){return Di(this.display,4)||Di(this.display,33554432)||Di(this.display,268435456)||Di(this.display,536870912)||Di(this.display,67108864)||Di(this.display,134217728)},ir);function ir(t,e){this.animationDuration=or(t,Wi,e.animationDuration),this.backgroundClip=or(t,xe,e.backgroundClip),this.backgroundColor=or(t,Me,e.backgroundColor),this.backgroundImage=or(t,Pe,e.backgroundImage),this.backgroundOrigin=or(t,Oe,e.backgroundOrigin),this.backgroundPosition=or(t,De,e.backgroundPosition),this.backgroundRepeat=or(t,Re,e.backgroundRepeat),this.backgroundSize=or(t,je,e.backgroundSize),this.borderTopColor=or(t,Ne,e.borderTopColor),this.borderRightColor=or(t,ze,e.borderRightColor),this.borderBottomColor=or(t,He,e.borderBottomColor),this.borderLeftColor=or(t,Ve,e.borderLeftColor),this.borderTopLeftRadius=or(t,Ge,e.borderTopLeftRadius),this.borderTopRightRadius=or(t,Ke,e.borderTopRightRadius),this.borderBottomRightRadius=or(t,Ye,e.borderBottomRightRadius),this.borderBottomLeftRadius=or(t,Xe,e.borderBottomLeftRadius),this.borderTopStyle=or(t,We,e.borderTopStyle),this.borderRightStyle=or(t,qe,e.borderRightStyle),this.borderBottomStyle=or(t,Ze,e.borderBottomStyle),this.borderLeftStyle=or(t,Je,e.borderLeftStyle),this.borderTopWidth=or(t,$e,e.borderTopWidth),this.borderRightWidth=or(t,ti,e.borderRightWidth),this.borderBottomWidth=or(t,ei,e.borderBottomWidth),this.borderLeftWidth=or(t,ii,e.borderLeftWidth),this.boxShadow=or(t,Zi,e.boxShadow),this.color=or(t,ri,e.color),this.direction=or(t,ni,e.direction),this.display=or(t,oi,e.display),this.float=or(t,ai,e.cssFloat),this.fontFamily=or(t,Ni,e.fontFamily),this.fontSize=or(t,zi,e.fontSize),this.fontStyle=or(t,Gi,e.fontStyle),this.fontVariant=or(t,Vi,e.fontVariant),this.fontWeight=or(t,Hi,e.fontWeight),this.letterSpacing=or(t,ui,e.letterSpacing),this.lineBreak=or(t,hi,e.lineBreak),this.lineHeight=or(t,li,e.lineHeight),this.listStyleImage=or(t,ci,e.listStyleImage),this.listStylePosition=or(t,fi,e.listStylePosition),this.listStyleType=or(t,Ai,e.listStyleType),this.marginTop=or(t,pi,e.marginTop),this.marginRight=or(t,di,e.marginRight),this.marginBottom=or(t,mi,e.marginBottom),this.marginLeft=or(t,yi,e.marginLeft),this.opacity=or(t,ki,e.opacity);var i=or(t,gi,e.overflow);this.overflowX=i[0],this.overflowY=i[1<i.length?1:0],this.overflowWrap=or(t,vi,e.overflowWrap),this.paddingTop=or(t,bi,e.paddingTop),this.paddingRight=or(t,wi,e.paddingRight),this.paddingBottom=or(t,xi,e.paddingBottom),this.paddingLeft=or(t,Mi,e.paddingLeft),this.paintOrder=or(t,Ji,e.paintOrder),this.position=or(t,Si,e.position),this.textAlign=or(t,_i,e.textAlign),this.textDecorationColor=or(t,ji,null!=(i=e.textDecorationColor)?i:e.color),this.textDecorationLine=or(t,Qi,null!=(i=e.textDecorationLine)?i:e.textDecoration),this.textShadow=or(t,Bi,e.textShadow),this.textTransform=or(t,Ei,e.textTransform),this.transform=or(t,Ci,e.transform),this.transformOrigin=or(t,Pi,e.transformOrigin),this.visibility=or(t,Oi,e.visibility),this.webkitTextStrokeColor=or(t,$i,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(t,tr,e.webkitTextStrokeWidth),this.wordBreak=or(t,Ui,e.wordBreak),this.zIndex=or(t,Li,e.zIndex)}for(var rr=function(t,e){this.content=or(t,Ki,e.content),this.quotes=or(t,qi,e.quotes)},nr=function(t,e){this.counterIncrement=or(t,Yi,e.counterIncrement),this.counterReset=or(t,Xi,e.counterReset)},or=function(t,e,i){var r=new Rt,n=(i=null!=i?i.toString():e.initialValue,r.write(i),new Ut(r.read()));switch(e.type){case 2:var o=n.parseComponentValue();return e.parse(t,Qt(o)?o.value:e.initialValue);case 0:return e.parse(t,n.parseComponentValue());case 1:return e.parse(t,n.parseComponentValues());case 4:return n.parseComponentValue();case 3:switch(e.format){case"angle":return ee(0,n.parseComponentValue());case"color":return ue(t,n.parseComponentValue());case"image":return ye(t,n.parseComponentValue());case"length":var s=n.parseComponentValue();return Kt(s)?s:ne;case"length-percentage":return Yt(s=n.parseComponentValue())?s:ne;case"time":return Ii(0,n.parseComponentValue())}}},sr=function(t,e){return 1===(t=function(){switch(t.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}())||e===t},ar=function(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,sr(e,3),this.styles=new er(t,window.getComputedStyle(e,null)),Tn(e)&&(this.styles.animationDuration.some(function(t){return 0<t})&&(e.style.animationDuration="0s"),null!==this.styles.transform)&&(e.style.transform="none"),this.bounds=u(this.context,e),sr(e,4)&&(this.flags|=16)},ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),lr=0;lr<ur.length;lr++)hr[ur.charCodeAt(lr)]=lr;function cr(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))}function fr(t,e,i,r,n,o){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=r,this.index=n,this.data=o}fr.prototype.get=function(t){var e;if(0<=t){if(t<55296||56319<t&&t<=65535)return e=this.index[t>>5],this.data[e=(e<<2)+(31&t)];if(t<=65535)return e=this.index[2048+(t-55296>>5)],this.data[e=(e<<2)+(31&t)];if(t<this.highStart)return e=this.index[e=2080+(t>>11)],e=this.index[e+=t>>5&63],this.data[e=(e<<2)+(31&t)];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},g=fr;for(var Ar="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),dr=0;dr<Ar.length;dr++)pr[Ar.charCodeAt(dr)]=dr;function mr(t){return Dr.get(t)}function yr(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]}function gr(t,e,i,r,n){var o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg");o=document.createElementNS(o,"foreignObject");return s.setAttributeNS(null,"width",t.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",i.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(n),s}function vr(t){return new Promise(function(e,i){var r=new Image;r.onload=function(){return e(r)},r.onerror=i,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})}function br(t,e){this.text=t,this.bounds=e}function wr(t,e,i){var r=t.ownerDocument;if(r)return(r=r.createRange()).setStart(t,e),r.setEnd(t,e+i),r;throw new Error("Node has no owner document")}function xr(t){var e;if(Ir.SUPPORT_NATIVE_TEXT_SEGMENTATION)return e=new Intl.Segmenter(void 0,{granularity:"grapheme"}),Array.from(e.segment(t)).map(function(t){return t.segment});r=function(t){for(var e=[],i=0,r=t.length;i<r;){var n,o=t.charCodeAt(i++);55296<=o&&o<=56319&&i<r?56320==(64512&(n=t.charCodeAt(i++)))?e.push(((1023&o)<<10)+(1023&n)+65536):(e.push(o),i--):e.push(o)}return e}(t),n=r.length,s=o=0,a=r.map(mr);for(var i,r,n,o,s,a,u={next:function(){if(n<=o)return{done:!0,value:null};for(var t,e=Rr;o<n&&(e=function(t,e){var i=e-2,r=t[i],n=t[e-1];e=t[e];if(2===n&&3===e)return Rr;if(2!==n&&3!==n&&4!==n&&2!==e&&3!==e&&4!==e){if(n===Tr&&-1!==[Tr,Fr,Pr,Or].indexOf(e))return Rr;if(!(n!==Pr&&n!==Fr||e!==Fr&&10!==e))return Rr;if((n===Or||10===n)&&10===e)return Rr;if(13===e||5===e)return Rr;if(7===e)return Rr;if(1===n)return Rr;if(13===n&&14===e){for(;5===r;)r=t[--i];if(14===r)return Rr}if(15===n&&15===e){for(var o=0;15===r;)o++,r=t[--i];if(o%2==0)return Rr}}return""}(a,++o))===Rr;);return e===Rr&&o!==n?{done:!0,value:null}:(t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var r=[],n=-1,o="";++n<i;){var s=t[n];s<=65535?r.push(s):r.push(55296+((s-=65536)>>10),s%1024+56320),(n+1===i||16384<r.length)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o}.apply(null,r.slice(s,o)),s=o,{value:t,done:!1})}},h=[];!(i=u.next()).done;)i.value&&h.push(i.value.slice());return h}function Mr(t,e){for(var i,r=function(t,e){var i,r,n,o,s,a,u,l,c=h(t),f=(i=c,void 0===(r=(t=(t=e)||{lineBreak:"normal",wordBreak:"normal"}).lineBreak)&&(r="strict"),n=[],o=[],s=[],i.forEach(function(t,e){var i=W.get(t);return 50<i?(s.push(!0),i-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(r)&&-1!==[8208,8211,12316,12448].indexOf(t)?(o.push(e),n.push(16)):4!==i&&11!==i?(o.push(e),31===i?n.push("strict"===r?O:H):42===i||29===i?n.push(30):43===i?n.push(131072<=t&&t<=196605||196608<=t&&t<=262141?H:30):void n.push(i)):0!==e&&-1===tt.indexOf(i=n[e-1])?(o.push(o[e-1]),n.push(i)):(o.push(e),n.push(30))}),a=(l=[o,n,s])[0],u=l[1],l=l[2],(e=[a,u="break-all"===t.wordBreak||"break-word"===t.wordBreak?u.map(function(t){return-1!==[I,30,42].indexOf(t)?H:t}):u,"keep-all"===t.wordBreak?l.map(function(t,e){return t&&19968<=i[e]&&i[e]<=40959}):void 0])[0]),A=e[1],p=e[2],d=c.length,m=0,y=0;return{next:function(){if(d<=y)return{done:!0,value:null};for(var t,e=X;y<d&&(e=function(t,e,i,r,n){if(0===i[r])return X;var o=r-1;if(Array.isArray(n)&&!0===n[o])return X;var s,a=o-1,u=1+o,h=e[o];if(r=0<=a?e[a]:0,n=e[u],2===h&&3===n)return X;if(-1!==Z.indexOf(h))return"!";if(-1!==Z.indexOf(n))return X;if(-1!==J.indexOf(n))return X;if(8===_(o,e))return"";if(11===W.get(t[o]))return X;if((h===j||h===Q)&&11===W.get(t[u]))return X;if(7===h||7===n)return X;if(9===h)return X;if(-1===[S,B,E].indexOf(h)&&9===n)return X;if(-1!==[C,T,F,R,k].indexOf(n))return X;if(_(o,e)===D)return X;if(M(23,D,o,e))return X;if(M([C,T],O,o,e))return X;if(M(12,12,o,e))return X;if(h===S)return"";if(23===h||23===n)return X;if(16===n||16===h)return"";if(-1!==[B,E,O].indexOf(n)||14===h)return X;if(36===r&&-1!==it.indexOf(h))return X;if(h===k&&36===n)return X;if(n===P)return X;if(-1!==q.indexOf(n)&&h===I||-1!==q.indexOf(h)&&n===I)return X;if(h===L&&-1!==[H,j,Q].indexOf(n)||-1!==[H,j,Q].indexOf(h)&&n===U)return X;if(-1!==q.indexOf(h)&&-1!==$.indexOf(n)||-1!==$.indexOf(h)&&-1!==q.indexOf(n))return X;if(-1!==[L,U].indexOf(h)&&(n===I||-1!==[D,E].indexOf(n)&&e[1+u]===I)||-1!==[D,E].indexOf(h)&&n===I||h===I&&-1!==[I,k,R].indexOf(n))return X;if(-1!==[I,k,R,C,T].indexOf(n))for(var l=o;0<=l;){if((s=e[l])===I)return X;if(-1===[k,R].indexOf(s))break;l--}if(-1!==[L,U].indexOf(n))for(l=-1!==[C,T].indexOf(h)?a:o;0<=l;){if((s=e[l])===I)return X;if(-1===[k,R].indexOf(s))break;l--}if(V===h&&-1!==[V,G,N,z].indexOf(n)||-1!==[G,N].indexOf(h)&&-1!==[G,K].indexOf(n)||-1!==[K,z].indexOf(h)&&n===K)return X;if(-1!==et.indexOf(h)&&-1!==[P,U].indexOf(n)||-1!==et.indexOf(n)&&h===L)return X;if(-1!==q.indexOf(h)&&-1!==q.indexOf(n))return X;if(h===R&&-1!==q.indexOf(n))return X;if(-1!==q.concat(I).indexOf(h)&&n===D&&-1===Y.indexOf(t[u])||-1!==q.concat(I).indexOf(n)&&h===T)return X;if(41===h&&41===n){for(var c=i[o],f=1;0<c&&41===e[--c];)f++;if(f%2!=0)return X}return h===j&&n===Q?X:""}(c,A,f,++y,p))===X;);return e===X&&y!==d?{done:!0,value:null}:(t=new rt(c,e,m,y),m=y,{value:t,done:!1})}}}(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),n=[];!(i=r.next()).done;)!function(){var t,e;i.value&&(t=i.value.slice(),t=h(t),e="",t.forEach(function(t){-1===Ur.indexOf(t)?e+=l(t):(e.length&&n.push(e),n.push(l(t)),e="")}),e.length)&&n.push(e)}();return n}var _r,Sr,Br,Er,Cr,Tr=8,Fr=9,Pr=11,Or=12,Dr=(Sr=function(t){var e,i,r,n,o=.75*t.length,s=t.length,a=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2])&&o--;o=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(o);for(var u=Array.isArray(o)?o:new Uint8Array(o),h=0;h<s;h+=4)e=hr[t.charCodeAt(h)],i=hr[t.charCodeAt(h+1)],r=hr[t.charCodeAt(h+2)],n=hr[t.charCodeAt(h+3)],u[a++]=e<<2|i>>4,u[a++]=(15&i)<<4|r>>2,u[a++]=(3&r)<<6|63&n;return o}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Br=Array.isArray(Sr)?function(t){for(var e=t.length,i=[],r=0;r<e;r+=4)i.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return i}(Sr):new Uint32Array(Sr),ve=cr(Er=Array.isArray(Sr)?function(t){for(var e=t.length,i=[],r=0;r<e;r+=2)i.push(t[r+1]<<8|t[r]);return i}(Sr):new Uint16Array(Sr),12,Br[4]/2),_r=2===Br[5]?cr(Er,(24+Br[4])/2):(Sr=Br,Er=Math.ceil((24+Br[4])/4),Sr.slice?Sr.slice(Er,_r):new Uint32Array(Array.prototype.slice.call(Sr,Er,_r))),new g(Br[0],Br[1],Br[2],Br[3],ve,_r)),Rr="",Ir={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var i=t.createElement("boundtest");if(i.style.height="123px",i.style.display="block",t.body.appendChild(i),e.selectNode(i),e=e.getBoundingClientRect(),e=Math.round(e.height),t.body.removeChild(i),123===e)return!0}}return!1}(document);return Object.defineProperty(Ir,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t,e,i,r,n,o,s=Ir.SUPPORT_RANGE_BOUNDS&&((t=(s=document).createElement("boundtest")).style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",s.body.appendChild(t),e=s.createRange(),t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"",i=t.firstChild,r=h(i.data).map(function(t){return l(t)}),n=0,o={},r=r.every(function(t,r){e.setStart(i,n),e.setEnd(i,n+t.length);var s=e.getBoundingClientRect();return n+=t.length,t=s.x>o.x||s.y>o.y,o=s,0===r||t}),s.body.removeChild(t),r);return Object.defineProperty(Ir,"SUPPORT_WORD_BREAKING",{value:s}),s},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,i=t.createElement("canvas");if(!(t=i.getContext("2d")))return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{t.drawImage(e,0,0),i.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(Ir,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas"),i=100,r=(e.width=i,e.height=i,e.getContext("2d"));if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,i,i);var n=new Image,o=e.toDataURL();return n.src=o,n=gr(i,i,0,0,n),r.fillStyle="red",r.fillRect(0,0,i,i),vr(n).then(function(e){r.drawImage(e,0,0);var n=r.getImageData(0,0,i,i).data;return r.fillStyle="red",r.fillRect(0,0,i,i),(e=t.createElement("div")).style.backgroundImage="url("+o+")",e.style.height="100px",yr(n)?vr(gr(i,i,0,0,e)):Promise.reject(!1)}).then(function(t){return r.drawImage(t,0,0),yr(r.getImageData(0,0,i,i).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Ir,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(Ir,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Ir,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ir,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Ir,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ur=[32,160,4961,65792,65793,4153,4241],Lr=function(t,e,i){var r,n,o,a,h,l;this.text=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(kr,jr);case 2:return t.toUpperCase();default:return t}}(e.data,i.textTransform),this.textBounds=(r=t,t=this.text,o=e,e=t,t=0!==(i=n=i).letterSpacing?xr(e):(e=e,i=i,Ir.SUPPORT_NATIVE_TEXT_SEGMENTATION?(l=new Intl.Segmenter(void 0,{granularity:"word"}),Array.from(l.segment(e)).map(function(t){return t.segment})):Mr(e,i)),a=[],h=0,t.forEach(function(t){var e,i,l;n.textDecorationLine.length||0<t.trim().length?Ir.SUPPORT_RANGE_BOUNDS?1<(l=wr(o,h,t.length).getClientRects()).length?(e=xr(t),i=0,e.forEach(function(t){a.push(new br(t,s.fromDOMRectList(r,wr(o,i+h,t.length).getClientRects()))),i+=t.length})):a.push(new br(t,s.fromDOMRectList(r,l))):(l=o.splitText(t.length),a.push(new br(t,function(t,e){var i=e.ownerDocument;if(i){var r=i.createElement("html2canvaswrapper");if(r.appendChild(e.cloneNode(!0)),i=e.parentNode)return i.replaceChild(r,e),t=u(t,r),r.firstChild&&i.replaceChild(r.firstChild,r),t}return s.EMPTY}(r,o))),o=l):Ir.SUPPORT_RANGE_BOUNDS||(o=o.splitText(t.length)),h+=t.length}),a)},kr=/(^|\s|:|-|\(|\))([a-z])/g,jr=function(t,e,i){return 0<t.length?e+i.toUpperCase():t},Qr=(e(Nr,Cr=ar),Nr);function Nr(t,e){return(t=Cr.call(this,t,e)||this).src=e.currentSrc||e.src,t.intrinsicWidth=e.naturalWidth,t.intrinsicHeight=e.naturalHeight,t.context.cache.addImage(t.src),t}e(Vr,zr=ar);var zr,Hr=Vr;function Vr(t,e){return(t=zr.call(this,t,e)||this).canvas=e,t.intrinsicWidth=e.width,t.intrinsicHeight=e.height,t}e(Yr,Gr=ar);var Gr,Kr=Yr;function Yr(t,e){var i=Gr.call(this,t,e)||this,r=new XMLSerializer;t=u(t,e);return e.setAttribute("width",t.width+"px"),e.setAttribute("height",t.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(e)),i.intrinsicWidth=e.width.baseVal.value,i.intrinsicHeight=e.height.baseVal.value,i.context.cache.addImage(i.svg),i}e(qr,Xr=ar);var Xr,Wr=qr;function qr(t,e){return(t=Xr.call(this,t,e)||this).value=e.value,t}e($r,Zr=ar);var Zr,Jr=$r;function $r(t,e){return(t=Zr.call(this,t,e)||this).start=e.start,t.reversed="boolean"==typeof e.reversed&&!0===e.reversed,t}var tn,en=[{type:15,flags:0,unit:"px",number:3}],rn=[{type:16,flags:0,number:50}],nn="checkbox",on="radio",sn=707406591,an=(e(un,tn=ar),un);function un(t,e){var i=tn.call(this,t,e)||this;switch(i.type=e.type.toLowerCase(),i.checked=e.checked,i.value=0===(e="password"===(t=e).type?new Array(t.value.length+1).join(""):t.value).length?t.placeholder||"":e,i.type!==nn&&i.type!==on||(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=(e=i.bounds).width>e.height?new s(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new s(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e),i.type){case nn:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=en;break;case on:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=rn}return i}e(cn,hn=ar);var hn,ln=cn;function cn(t,e){return t=hn.call(this,t,e)||this,e=e.options[e.selectedIndex||0],t.value=e&&e.text||"",t}e(pn,fn=ar);var fn,An=pn;function pn(t,e){return(t=fn.call(this,t,e)||this).value=e.value,t}e(yn,dn=ar);var dn,mn=yn;function yn(t,e){var i,r,n=dn.call(this,t,e)||this;n.src=e.src,n.width=parseInt(e.width,10)||0,n.height=parseInt(e.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement&&(n.tree=_n(t,e.contentWindow.document.documentElement),i=e.contentWindow.document.documentElement?fe(t,getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):we.TRANSPARENT,r=e.contentWindow.document.body?fe(t,getComputedStyle(e.contentWindow.document.body).backgroundColor):we.TRANSPARENT,n.backgroundColor=Jt(i)?Jt(r)?n.styles.backgroundColor:r:i)}catch(t){}return n}function gn(t){return"VIDEO"===t.tagName}function vn(t){return"STYLE"===t.tagName}function bn(t){return 0<t.tagName.indexOf("-")}function wn(t){return"BODY"===t.tagName}var xn=["OL","UL","MENU"],Mn=function(t,e){return new(Un(e)?Qr:In(e)?Hr:Rn(e)?Kr:Pn(e)?Wr:On(e)?Jr:Dn(e)?an:jn(e)?ln:kn(e)?An:Ln(e)?mn:ar)(t,e)},_n=function(t,e){var i=Mn(t,e);return i.flags|=4,function t(e,i,r,n){for(var o=i.firstChild;o;o=a){var s,a=o.nextSibling;En(o)&&0<o.data.trim().length?r.textNodes.push(new Lr(e,o,r.styles)):Cn(o)&&(Qn(o)&&o.assignedNodes?o.assignedNodes().forEach(function(i){return t(e,i,r,n)}):(s=Mn(e,o)).styles.isVisible()&&(Sn(o,s,n)?s.flags|=4:Bn(s.styles)&&(s.flags|=2),-1!==xn.indexOf(o.tagName)&&(s.flags|=8),r.elements.push(s),o.slot,o.shadowRoot?t(e,o.shadowRoot,s,n):kn(o)||Rn(o)||jn(o)||t(e,o,s,n)))}}(t,e,i,i),i},Sn=function(t,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||wn(t)&&i.styles.isTransparent()},Bn=function(t){return t.isPositioned()||t.isFloating()},En=function(t){return t.nodeType===Node.TEXT_NODE},Cn=function(t){return t.nodeType===Node.ELEMENT_NODE},Tn=function(t){return Cn(t)&&void 0!==t.style&&!Fn(t)},Fn=function(t){return"object"==n(t.className)},Pn=function(t){return"LI"===t.tagName},On=function(t){return"OL"===t.tagName},Dn=function(t){return"INPUT"===t.tagName},Rn=function(t){return"svg"===t.tagName},In=function(t){return"CANVAS"===t.tagName},Un=function(t){return"IMG"===t.tagName},Ln=function(t){return"IFRAME"===t.tagName},kn=function(t){return"TEXTAREA"===t.tagName},jn=function(t){return"SELECT"===t.tagName},Qn=function(t){return"SLOT"===t.tagName},Nn=(zn.prototype.getCounterValue=function(t){return(t=this.counters[t])&&t.length?t[t.length-1]:1},zn.prototype.getCounterValues=function(t){return(t=this.counters[t])||[]},zn.prototype.pop=function(t){var e=this;t.forEach(function(t){return e.counters[t].pop()})},zn.prototype.parse=function(t){var e=this,i=t.counterIncrement,r=(t=t.counterReset,!0),n=(null!==i&&i.forEach(function(t){var i=e.counters[t.counter];i&&0!==t.increment&&(r=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=t.increment)}),[]);return r&&t.forEach(function(t){var i=e.counters[t.counter];n.push(t.counter),(i=i||(e.counters[t.counter]=[])).push(t.reset)}),n},zn);function zn(){this.counters={}}function Hn(t,e,i,r,n,o){return t<e||i<t?to(t,n,0<o.length):r.integers.reduce(function(e,i,n){for(;i<=t;)t-=i,e+=r.values[n];return e},"")+o}function Vn(t,e,i,r){for(var n="";i||t--,n=r(t)+n,e<=(t/=e)*e;);return n}function Gn(t,e,i,r,n){var o=i-e+1;return(t<0?"-":"")+(Vn(Math.abs(t),o,r,function(t){return l(Math.floor(t%o)+e)})+n)}function Kn(t,e,i){void 0===i&&(i=". ");var r=e.length;return Vn(Math.abs(t),r,!1,function(t){return e[Math.floor(t%r)]})+i}function Yn(t,e,i,r,n,o){if(t<-9999||9999<t)return to(t,4,0<n.length);var s=Math.abs(t),a=n;if(0===s)return e[0]+a;for(var u=0;0<s&&u<=4;u++){var h=s%10;0==h&&Di(o,1)&&""!==a?a=e[h]+a:1<h||1==h&&0===u||1==h&&1===u&&Di(o,2)||1==h&&1===u&&Di(o,4)&&100<t||1==h&&1<u&&Di(o,8)?a=e[h]+(0<u?i[u-1]:"")+a:1==h&&0<u&&(a=i[u-1]+a),s=Math.floor(s/10)}return(t<0?r:"")+a}var Xn,Wn={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},qn={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Zn={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Jn={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$n="",to=function(t,e,i){var r=i?". ":"",n=i?"":"",o=i?", ":"",s=i?" ":"";switch(e){case 0:return""+s;case 1:return""+s;case 2:return""+s;case 5:var a=Gn(t,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return Kn(t,"",n);case 6:return Hn(t,1,3999,Wn,3,r).toLowerCase();case 7:return Hn(t,1,3999,Wn,3,r);case 8:return Gn(t,945,969,!1,r);case 9:return Gn(t,97,122,!1,r);case 10:return Gn(t,65,90,!1,r);case 11:return Gn(t,1632,1641,!0,r);case 12:case 49:return Hn(t,1,9999,qn,3,r);case 35:return Hn(t,1,9999,qn,3,r).toLowerCase();case 13:return Gn(t,2534,2543,!0,r);case 14:case 30:return Gn(t,6112,6121,!0,r);case 15:return Kn(t,"",n);case 16:return Kn(t,"",n);case 17:case 48:return Yn(t,"","","",n,14);case 47:return Yn(t,"","","",n,15);case 42:return Yn(t,"","","",n,14);case 41:return Yn(t,"","","",n,15);case 26:return Yn(t,"","","",n,0);case 25:return Yn(t,"","","",n,7);case 31:return Yn(t,"","",$n,o,7);case 33:return Yn(t,"","",$n,o,0);case 32:return Yn(t,"","",$n,o,7);case 18:return Gn(t,2406,2415,!0,r);case 20:return Hn(t,1,19999,Jn,3,r);case 21:return Gn(t,2790,2799,!0,r);case 22:return Gn(t,2662,2671,!0,r);case 22:return Hn(t,1,10999,Zn,3,r);case 23:return Kn(t,"");case 24:return Kn(t,"");case 27:return Gn(t,3302,3311,!0,r);case 28:return Kn(t,"",n);case 29:return Kn(t,"",n);case 34:return Gn(t,3792,3801,!0,r);case 37:return Gn(t,6160,6169,!0,r);case 38:return Gn(t,4160,4169,!0,r);case 39:return Gn(t,2918,2927,!0,r);case 40:return Gn(t,1776,1785,!0,r);case 43:return Gn(t,3046,3055,!0,r);case 44:return Gn(t,3174,3183,!0,r);case 45:return Gn(t,3664,3673,!0,r);case 46:return Gn(t,3872,3881,!0,r);default:return Gn(t,48,57,!0,r)}},eo="data-html2canvas-ignore",io=(ro.prototype.toIFrame=function(t,e){var i,n,s,a,u=this,h=oo(t,e);return h.contentWindow?(i=t.defaultView.pageXOffset,n=t.defaultView.pageYOffset,s=h.contentWindow,a=s.document,t=ao(h).then(function(){return r(u,void 0,void 0,function(){var t,i;return o(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(fo),s&&(s.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||s.scrollY===e.top&&s.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-e.left,s.scrollY-e.top,0,0))),t=this.options.onclone,void 0===(i=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,so(a)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then(function(){return t(a,i)}).then(function(){return h})]:[2,h]}})})}),a.open(),a.write(lo(document.doctype)+"<html></html>"),co(this.referenceElement.ownerDocument,i,n),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),t):Promise.reject("Unable to find iframe window")},ro.prototype.createElementClone=function(t){var e;return sr(t,2),In(t)?this.createCanvasClone(t):gn(t)?this.createVideoClone(t):vn(t)?this.createStyleClone(t):(e=t.cloneNode(!1),Un(e)&&(Un(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading)&&(e.loading="eager"),bn(e)?this.createCustomElementClone(e):e)},ro.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return ho(t.style,e),e},ro.prototype.createStyleClone=function(t){try{var e,i,r=t.sheet;if(r&&r.cssRules)return e=[].slice.call(r.cssRules,0).reduce(function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t},""),(i=t.cloneNode(!1)).textContent=e,i}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},ro.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}i=t.cloneNode(!1);try{i.width=t.width,i.height=t.height;var r,n,o=t.getContext("2d"),s=i.getContext("2d");s&&(!this.options.allowTaint&&o?s.putImageData(o.getImageData(0,0,t.width,t.height),0,0):((r=null!=(e=t.getContext("webgl2"))?e:t.getContext("webgl"))&&!1===(null==(n=r.getContextAttributes())?void 0:n.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t),s.drawImage(t,0,0)))}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return i},ro.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas"),i=(e.width=t.offsetWidth,e.height=t.offsetHeight,e.getContext("2d"));try{return i&&(i.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||i.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",t)}return(e=t.ownerDocument.createElement("canvas")).width=t.offsetWidth,e.height=t.offsetHeight,e},ro.prototype.appendChildNode=function(t,e,i){Cn(e)&&("SCRIPT"===e.tagName||e.hasAttribute(eo)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&Cn(e)&&vn(e)||t.appendChild(this.cloneNode(e,i))},ro.prototype.cloneChildNodes=function(t,e,i){for(var r,n=this,o=(t.shadowRoot||t).firstChild;o;o=o.nextSibling)Cn(o)&&Qn(o)&&"function"==typeof o.assignedNodes?(r=o.assignedNodes()).length&&r.forEach(function(t){return n.appendChildNode(e,t,i)}):this.appendChildNode(e,o,i)},ro.prototype.cloneNode=function(t,e){var i,r,n,o,s;return En(t)?document.createTextNode(t.data):t.ownerDocument&&(i=t.ownerDocument.defaultView)&&Cn(t)&&(Tn(t)||Fn(t))?((r=this.createElementClone(t)).style.transitionProperty="none",n=i.getComputedStyle(t),o=i.getComputedStyle(t,":before"),s=i.getComputedStyle(t,":after"),this.referenceElement===t&&Tn(r)&&(this.clonedReferenceElement=r),wn(r)&&yo(r),i=this.counters.parse(new nr(this.context,n)),o=this.resolvePseudoContent(t,r,o,Xn.BEFORE),bn(t)&&(e=!0),gn(t)||this.cloneChildNodes(t,r,e),o&&r.insertBefore(o,r.firstChild),(s=this.resolvePseudoContent(t,r,s,Xn.AFTER))&&r.appendChild(s),this.counters.pop(i),(n&&(this.options.copyStyles||Fn(t))&&!Ln(t)||e)&&ho(n,r),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(kn(t)||jn(t))&&(kn(r)||jn(r))&&(r.value=t.value),r):t.cloneNode(!1)},ro.prototype.resolvePseudoContent=function(t,e,i,r){var n=this;if(i){var o,s,a=i.content,u=e.ownerDocument;if(u&&a&&"none"!==a&&"-moz-alt-content"!==a&&"none"!==i.display)return this.counters.parse(new nr(this.context,i)),o=new rr(this.context,i),s=u.createElement("html2canvaspseudoelement"),ho(i,s),o.content.forEach(function(e){if(0===e.type)s.appendChild(u.createTextNode(e.value));else if(22===e.type){var i=u.createElement("img");i.src=e.value,i.style.opacity="1",s.appendChild(i)}else if(18===e.type){var r,a,h,l,c;"attr"===e.name?(i=e.values.filter(Qt)).length&&s.appendChild(u.createTextNode(t.getAttribute(i[0].value)||"")):"counter"===e.name?(h=(a=e.values.filter(Vt))[0],a=a[1],h&&Qt(h)&&(r=n.counters.getCounterValue(h.value),c=a&&Qt(a)?Ai.parse(n.context,a.value):3,s.appendChild(u.createTextNode(to(r,c,!1))))):"counters"===e.name&&(h=(r=e.values.filter(Vt))[0],c=r[1],a=r[2],h)&&Qt(h)&&(h=n.counters.getCounterValues(h.value),l=a&&Qt(a)?Ai.parse(n.context,a.value):3,c=c&&0===c.type?c.value:"",c=h.map(function(t){return to(t,l,!1)}).join(c),s.appendChild(u.createTextNode(c)))}else if(20===e.type)switch(e.value){case"open-quote":s.appendChild(u.createTextNode(Ri(o.quotes,n.quoteDepth++,!0)));break;case"close-quote":s.appendChild(u.createTextNode(Ri(o.quotes,--n.quoteDepth,!1)));break;default:s.appendChild(u.createTextNode(e.value))}}),s.className=Ao+" "+po,r=r===Xn.BEFORE?" "+Ao:" "+po,Fn(e)?e.className.baseValue+=r:e.className+=r,s}},ro.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},ro);function ro(t,e,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=e,this.counters=new Nn,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}function no(t){return new Promise(function(e){!t.complete&&t.src?(t.onload=e,t.onerror=e):e()})}(le=Xn=Xn||{})[le.BEFORE=0]="BEFORE",le[le.AFTER=1]="AFTER";var oo=function(t,e){var i=t.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(eo,"true"),t.body.appendChild(i),i},so=function(t){return Promise.all([].slice.call(t.images,0).map(no))},ao=function(t){return new Promise(function(e,i){var r=t.contentWindow;if(!r)return i("No window assigned for iframe");var n=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){0<n.body.childNodes.length&&"complete"===n.readyState&&(clearInterval(i),e(t))},50)}})},uo=["all","d","content"],ho=function(t,e){for(var i=t.length-1;0<=i;i--){var r=t.item(i);-1===uo.indexOf(r)&&e.style.setProperty(r,t.getPropertyValue(r))}return e},lo=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},co=function(t,e,i){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||i!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,i)},fo=function(t){var e=t[0],i=t[1];t=t[2];e.scrollLeft=i,e.scrollTop=t},Ao="___html2canvas___pseudoelement_before",po="___html2canvas___pseudoelement_after",mo='{\n    content: "" !important;\n    display: none !important;\n}',yo=function(t){go(t,"."+Ao+":before"+mo+"\n         ."+po+":after"+mo)},go=function(t,e){var i=t.ownerDocument;i&&((i=i.createElement("style")).textContent=e,t.appendChild(i))},vo=(bo.getOrigin=function(t){var e=bo.U;return e?(e.href=t,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},bo.isSameOrigin=function(t){return bo.getOrigin(t)===bo.F},bo.setContext=function(t){bo.U=t.document.createElement("a"),bo.F=bo.getOrigin(t.location.href)},bo.F="about:blank",bo);function bo(){}xo.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)||(To(t)||Bo(t))&&(this.g[t]=this.loadImage(t)).catch(function(){}),e},xo.prototype.match=function(t){return this.g[t]},xo.prototype.loadImage=function(t){return r(this,void 0,void 0,function(){var e,i,r,n,s=this;return o(this,function(o){switch(o.label){case 0:return e=vo.isSameOrigin(t),i=!Eo(t)&&!0===this.C.useCORS&&Ir.SUPPORT_CORS_IMAGES&&!e,r=!Eo(t)&&!e&&!To(t)&&"string"==typeof this.C.proxy&&Ir.SUPPORT_CORS_XHR&&!i,e||!1!==this.C.allowTaint||Eo(t)||To(t)||r||i?(n=t,r?[4,this.proxy(n)]:[3,2]):[2];case 1:n=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(t,e){var r=new Image;r.onload=function(){return t(r)},r.onerror=e,(Co(n)||i)&&(r.crossOrigin="anonymous"),r.src=n,!0===r.complete&&setTimeout(function(){return t(r)},500),0<s.C.imageTimeout&&setTimeout(function(){return e("Timed out ("+s.C.imageTimeout+"ms) loading image")},s.C.imageTimeout)})];case 3:return[2,o.sent()]}})})},xo.prototype.has=function(t){return void 0!==this.g[t]},xo.prototype.keys=function(){return Promise.resolve(Object.keys(this.g))},xo.prototype.proxy=function(t){var e,i=this,r=this.C.proxy;if(r)return e=t.substring(0,256),new Promise(function(n,o){var s=Ir.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){var t;200===a.status?"text"==s?n(a.response):((t=new FileReader).addEventListener("load",function(){return n(t.result)},!1),t.addEventListener("error",function(t){return o(t)},!1),t.readAsDataURL(a.response)):o("Failed to proxy resource "+e+" with status code "+a.status)},a.onerror=o;var u,h=-1<r.indexOf("?")?"&":"?";a.open("GET",r+h+"url="+encodeURIComponent(t)+"&responseType="+s),"text"!=s&&a instanceof XMLHttpRequest&&(a.responseType=s),i.C.imageTimeout&&(u=i.C.imageTimeout,a.timeout=u,a.ontimeout=function(){return o("Timed out ("+u+"ms) proxying "+e)}),a.send()});throw new Error("No proxy defined")};var wo=xo;function xo(t,e){this.context=t,this.C=e,this.g={}}var Mo=/^data:image\/svg\+xml/i,_o=/^data:image\/.*;base64,/i,So=/^data:image\/.*/i,Bo=function(t){return Ir.SUPPORT_SVG_DRAWING||!Fo(t)},Eo=function(t){return So.test(t)},Co=function(t){return _o.test(t)},To=function(t){return"blob"===t.substr(0,4)},Fo=function(t){return"svg"===t.substr(-3).toLowerCase()||Mo.test(t)},Po=(Oo.prototype.add=function(t,e){return new Oo(this.x+t,this.y+e)},Oo);function Oo(t,e){this.type=0,this.x=t,this.y=e}function Do(t,e,i){return new Po(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)}Uo.prototype.subdivide=function(t,e){var i=Do(this.start,this.startControl,t),r=Do(this.startControl,this.endControl,t),n=Do(this.endControl,this.end,t),o=Do(i,r,t);t=Do(o,r=Do(r,n,t),t);return e?new Uo(this.start,i,o,t):new Uo(t,r,n,this.end)},Uo.prototype.add=function(t,e){return new Uo(this.start.add(t,e),this.startControl.add(t,e),this.endControl.add(t,e),this.end.add(t,e))},Uo.prototype.reverse=function(){return new Uo(this.end,this.endControl,this.startControl,this.start)};var Ro,Io=Uo;function Uo(t,e,i,r){this.type=1,this.start=t,this.startControl=e,this.endControl=i,this.end=r}function Lo(t){return 1===t.type}function ko(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]}function jo(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]}function Qo(t){return 1===t.type}function No(t,e){return t.length===e.length&&t.some(function(t,i){return t===e[i]})}function zo(t,e){this.path=t,this.target=e,this.type=1}function Ho(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}(le=Ro=Ro||{})[le.TOP_LEFT=0]="TOP_LEFT",le[le.TOP_RIGHT=1]="TOP_RIGHT",le[le.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",le[le.BOTTOM_LEFT=3]="BOTTOM_LEFT";var Vo=function(t,e,i,r,n){var o=(Math.sqrt(2)-1)/3*4,s=i*o,a=r*o,u=t+i,h=e+r;switch(n){case Ro.TOP_LEFT:return new Io(new Po(t,h),new Po(t,h-a),new Po(u-s,e),new Po(u,e));case Ro.TOP_RIGHT:return new Io(new Po(t,e),new Po(t+s,e),new Po(u,h-a),new Po(u,h));case Ro.BOTTOM_RIGHT:return new Io(new Po(u,e),new Po(u,e+a),new Po(t+s,h),new Po(t,h));default:return Ro.BOTTOM_LEFT,new Io(new Po(u,h),new Po(u-s,h),new Po(t,e+a),new Po(t,e))}},Go=(Ko.prototype.getEffects=function(t){for(var e=-1===[2,3].indexOf(this.container.styles.position),i=this.parent,r=this.effects.slice(0);i;){var n,o=i.effects.filter(function(t){return!Qo(t)});e||0!==i.container.styles.position||!i.parent?(r.unshift.apply(r,o),e=-1===[2,3].indexOf(i.container.styles.position),0!==i.container.styles.overflowX&&(No(ko(i.curves),n=jo(i.curves))||r.unshift(new zo(n,6)))):r.unshift.apply(r,o),i=i.parent}return r.filter(function(e){return Di(e.target,t)})},Ko);function Ko(t,e){var i,r;this.container=t,this.parent=e,this.effects=[],this.curves=new function(t){var e=t.styles,i=t.bounds,r=(m=Wt(e.borderTopLeftRadius,i.width,i.height))[0],n=m[1],o=(y=Wt(e.borderTopRightRadius,i.width,i.height))[0],s=y[1],a=(g=Wt(e.borderBottomRightRadius,i.width,i.height))[0],u=g[1],h=(v=Wt(e.borderBottomLeftRadius,i.width,i.height))[0],l=v[1],c=((b=[]).push((r+o)/i.width),b.push((h+a)/i.width),b.push((n+l)/i.height),b.push((s+u)/i.height),1<(w=Math.max.apply(Math,b))&&(r/=w,n/=w,o/=w,s/=w,a/=w,u/=w,h/=w,l/=w),i.width-o),f=i.height-u,A=i.width-a,p=i.height-l,d=e.borderTopWidth,m=e.borderRightWidth,y=e.borderBottomWidth,g=e.borderLeftWidth,v=ae(e.paddingTop,t.bounds.width),b=ae(e.paddingRight,t.bounds.width),w=ae(e.paddingBottom,t.bounds.width);t=ae(e.paddingLeft,t.bounds.width),this.topLeftBorderDoubleOuterBox=0<r||0<n?Vo(i.left+g/3,i.top+d/3,r-g/3,n-d/3,Ro.TOP_LEFT):new Po(i.left+g/3,i.top+d/3),this.topRightBorderDoubleOuterBox=0<r||0<n?Vo(i.left+c,i.top+d/3,o-m/3,s-d/3,Ro.TOP_RIGHT):new Po(i.left+i.width-m/3,i.top+d/3),this.bottomRightBorderDoubleOuterBox=0<a||0<u?Vo(i.left+A,i.top+f,a-m/3,u-y/3,Ro.BOTTOM_RIGHT):new Po(i.left+i.width-m/3,i.top+i.height-y/3),this.bottomLeftBorderDoubleOuterBox=0<h||0<l?Vo(i.left+g/3,i.top+p,h-g/3,l-y/3,Ro.BOTTOM_LEFT):new Po(i.left+g/3,i.top+i.height-y/3),this.topLeftBorderDoubleInnerBox=0<r||0<n?Vo(i.left+2*g/3,i.top+2*d/3,r-2*g/3,n-2*d/3,Ro.TOP_LEFT):new Po(i.left+2*g/3,i.top+2*d/3),this.topRightBorderDoubleInnerBox=0<r||0<n?Vo(i.left+c,i.top+2*d/3,o-2*m/3,s-2*d/3,Ro.TOP_RIGHT):new Po(i.left+i.width-2*m/3,i.top+2*d/3),this.bottomRightBorderDoubleInnerBox=0<a||0<u?Vo(i.left+A,i.top+f,a-2*m/3,u-2*y/3,Ro.BOTTOM_RIGHT):new Po(i.left+i.width-2*m/3,i.top+i.height-2*y/3),this.bottomLeftBorderDoubleInnerBox=0<h||0<l?Vo(i.left+2*g/3,i.top+p,h-2*g/3,l-2*y/3,Ro.BOTTOM_LEFT):new Po(i.left+2*g/3,i.top+i.height-2*y/3),this.topLeftBorderStroke=0<r||0<n?Vo(i.left+g/2,i.top+d/2,r-g/2,n-d/2,Ro.TOP_LEFT):new Po(i.left+g/2,i.top+d/2),this.topRightBorderStroke=0<r||0<n?Vo(i.left+c,i.top+d/2,o-m/2,s-d/2,Ro.TOP_RIGHT):new Po(i.left+i.width-m/2,i.top+d/2),this.bottomRightBorderStroke=0<a||0<u?Vo(i.left+A,i.top+f,a-m/2,u-y/2,Ro.BOTTOM_RIGHT):new Po(i.left+i.width-m/2,i.top+i.height-y/2),this.bottomLeftBorderStroke=0<h||0<l?Vo(i.left+g/2,i.top+p,h-g/2,l-y/2,Ro.BOTTOM_LEFT):new Po(i.left+g/2,i.top+i.height-y/2),this.topLeftBorderBox=0<r||0<n?Vo(i.left,i.top,r,n,Ro.TOP_LEFT):new Po(i.left,i.top),this.topRightBorderBox=0<o||0<s?Vo(i.left+c,i.top,o,s,Ro.TOP_RIGHT):new Po(i.left+i.width,i.top),this.bottomRightBorderBox=0<a||0<u?Vo(i.left+A,i.top+f,a,u,Ro.BOTTOM_RIGHT):new Po(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=0<h||0<l?Vo(i.left,i.top+p,h,l,Ro.BOTTOM_LEFT):new Po(i.left,i.top+i.height),this.topLeftPaddingBox=0<r||0<n?Vo(i.left+g,i.top+d,Math.max(0,r-g),Math.max(0,n-d),Ro.TOP_LEFT):new Po(i.left+g,i.top+d),this.topRightPaddingBox=0<o||0<s?Vo(i.left+Math.min(c,i.width-m),i.top+d,c>i.width+m?0:Math.max(0,o-m),Math.max(0,s-d),Ro.TOP_RIGHT):new Po(i.left+i.width-m,i.top+d),this.bottomRightPaddingBox=0<a||0<u?Vo(i.left+Math.min(A,i.width-g),i.top+Math.min(f,i.height-y),Math.max(0,a-m),Math.max(0,u-y),Ro.BOTTOM_RIGHT):new Po(i.left+i.width-m,i.top+i.height-y),this.bottomLeftPaddingBox=0<h||0<l?Vo(i.left+g,i.top+Math.min(p,i.height-y),Math.max(0,h-g),Math.max(0,l-y),Ro.BOTTOM_LEFT):new Po(i.left+g,i.top+i.height-y),this.topLeftContentBox=0<r||0<n?Vo(i.left+g+t,i.top+d+v,Math.max(0,r-(g+t)),Math.max(0,n-(d+v)),Ro.TOP_LEFT):new Po(i.left+g+t,i.top+d+v),this.topRightContentBox=0<o||0<s?Vo(i.left+Math.min(c,i.width+g+t),i.top+d+v,c>i.width+g+t?0:o-g+t,s-(d+v),Ro.TOP_RIGHT):new Po(i.left+i.width-(m+b),i.top+d+v),this.bottomRightContentBox=0<a||0<u?Vo(i.left+Math.min(A,i.width-(g+t)),i.top+Math.min(f,i.height+d+v),Math.max(0,a-(m+b)),u-(y+w),Ro.BOTTOM_RIGHT):new Po(i.left+i.width-(m+b),i.top+i.height-(y+w)),this.bottomLeftContentBox=0<h||0<l?Vo(i.left+g+t,i.top+p,Math.max(0,h-(g+t)),l-(y+w),Ro.BOTTOM_LEFT):new Po(i.left+g+t,i.top+i.height-(y+w))}(this.container),this.container.styles.opacity<1&&this.effects.push(new function(t){this.opacity=t,this.type=2,this.target=6}(this.container.styles.opacity)),null!==this.container.styles.transform&&(e=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform,this.effects.push(new function(t,e,i){this.offsetX=t,this.offsetY=e,this.matrix=i,this.type=0,this.target=6}(e,i,r))),0!==this.container.styles.overflowX&&(No(i=ko(this.curves),r=jo(this.curves))?this.effects.push(new zo(i,6)):(this.effects.push(new zo(i,2)),this.effects.push(new zo(r,4))))}function Yo(t,e){switch(e){case 0:return es(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return es(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return es(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return es(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}}function Xo(t){var e=t.bounds;t=t.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))}function Wo(t){var e=t.styles,i=t.bounds,r=ae(e.paddingLeft,i.width),n=ae(e.paddingRight,i.width),o=ae(e.paddingTop,i.width);t=ae(e.paddingBottom,i.width);return i.add(r+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+o+t))}function qo(t,e,i){var r=0===(n=rs(t.styles.backgroundOrigin,e))?t.bounds:(2===n?Wo:Xo)(t),n=0===(s=rs(t.styles.backgroundClip,e))?t.bounds:(2===s?Wo:Xo)(t),o=is(rs(t.styles.backgroundSize,e),i,r),s=o[0],a=o[1];i=Wt(rs(t.styles.backgroundPosition,e),r.width-s,r.height-a);return[ns(rs(t.styles.backgroundRepeat,e),i,o,r,n),Math.round(r.left+i[0]),Math.round(r.top+i[1]),s,a]}function Zo(t){return Qt(t)&&t.value===ge.AUTO}function Jo(t){return"number"==typeof t}function $o(t,e){for(var i=t instanceof Jr?t.start:1,r=t instanceof Jr&&t.reversed,n=0;n<e.length;n++){var o=e[n];o.container instanceof Wr&&"number"==typeof o.container.value&&0!==o.container.value&&(i=o.container.value),o.listValue=to(i,o.container.styles.listStyleType,!0),i+=r?-1:1}}function ts(t,e){var i=[];return Lo(t)?i.push(t.subdivide(.5,!1)):i.push(t),Lo(e)?i.push(e.subdivide(.5,!0)):i.push(e),i}function es(t,e,i,r){var n=[];return Lo(t)?n.push(t.subdivide(.5,!1)):n.push(t),Lo(i)?n.push(i.subdivide(.5,!0)):n.push(i),Lo(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),Lo(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n}var is=function(t,e,i){var r=e[0],n=e[1],o=e[2],s=t[0],a=t[1];if(!s)return[0,0];if(Yt(s)&&a&&Yt(a))return[ae(s,i.width),ae(a,i.height)];var u=Jo(o);if(Qt(s)&&(s.value===ge.CONTAIN||s.value===ge.COVER))return Jo(o)?i.width/i.height<o!=(s.value===ge.COVER)?[i.width,i.width/o]:[i.height*o,i.height]:[i.width,i.height];var h,l,c=Jo(r);e=Jo(n),t=c||e;if(Zo(s)&&(!a||Zo(a)))return c&&e?[r,n]:u||t?t&&u?[c?r:n*o,e?n:r/o]:[c?r:i.width,e?n:i.height]:[i.width,i.height];if(u)return l=h=0,Yt(s)?h=ae(s,i.width):Yt(a)&&(l=ae(a,i.height)),Zo(s)?h=l*o:a&&!Zo(a)||(l=h/o),[h,l];if(l=h=null,Yt(s)?h=ae(s,i.width):a&&Yt(a)&&(l=ae(a,i.height)),null!==(h=null!==(l=null===h||a&&!Zo(a)?l:c&&e?h/r*n:i.height)&&Zo(s)?c&&e?l/n*r:i.width:h)&&null!==l)return[h,l];throw new Error("Unable to calculate background-size for element")},rs=function(t,e){return void 0===(e=t[e])?t[0]:e},ns=function(t,e,i,r,n){var o=e[0],s=e[1],a=i[0],u=i[1];switch(t){case 2:return[new Po(Math.round(r.left),Math.round(r.top+s)),new Po(Math.round(r.left+r.width),Math.round(r.top+s)),new Po(Math.round(r.left+r.width),Math.round(u+r.top+s)),new Po(Math.round(r.left),Math.round(u+r.top+s))];case 3:return[new Po(Math.round(r.left+o),Math.round(r.top)),new Po(Math.round(r.left+o+a),Math.round(r.top)),new Po(Math.round(r.left+o+a),Math.round(r.height+r.top)),new Po(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new Po(Math.round(r.left+o),Math.round(r.top+s)),new Po(Math.round(r.left+o+a),Math.round(r.top+s)),new Po(Math.round(r.left+o+a),Math.round(r.top+s+u)),new Po(Math.round(r.left+o),Math.round(r.top+s+u))];default:return[new Po(Math.round(n.left),Math.round(n.top)),new Po(Math.round(n.left+n.width),Math.round(n.top)),new Po(Math.round(n.left+n.width),Math.round(n.height+n.top)),new Po(Math.round(n.left),Math.round(n.height+n.top))]}},os="Hidden Text",ss=(as.prototype.parseMetrics=function(t,e){var i=this.u.createElement("div"),r=this.u.createElement("img"),n=this.u.createElement("span"),o=this.u.body;return i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",o.appendChild(i),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.appendChild(this.u.createTextNode(os)),i.appendChild(n),i.appendChild(r),e=r.offsetTop-n.offsetTop+2,i.removeChild(n),i.appendChild(this.u.createTextNode(os)),i.style.lineHeight="normal",r.style.verticalAlign="super",r=r.offsetTop-i.offsetTop+2,o.removeChild(i),{baseline:e,middle:r}},as.prototype.getMetrics=function(t,e){var i=t+" "+e;return void 0===this.H[i]&&(this.H[i]=this.parseMetrics(t,e)),this.H[i]},as);function as(t){this.H={},this.u=t}e(ls,us=le=function(t,e){this.context=t,this.options=e}),ls.prototype.applyEffects=function(t){for(var e=this;this.h.length;)this.popEffect();t.forEach(function(t){return e.applyEffect(t)})},ls.prototype.applyEffect=function(t){this.ctx.save(),2===t.type&&(this.ctx.globalAlpha=t.opacity),0===t.type&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Qo(t)&&(this.path(t.path),this.ctx.clip()),this.h.push(t)},ls.prototype.popEffect=function(){this.h.pop(),this.ctx.restore()},ls.prototype.renderStack=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},ls.prototype.renderNode=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return Di(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},ls.prototype.renderTextWithLetterSpacing=function(t,e,i){var r=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i):xr(t.text).reduce(function(e,n){return r.ctx.fillText(n,e,t.bounds.top+i),e+r.ctx.measureText(n).width},t.bounds.left)},ls.prototype.createFontStyle=function(t){var e=t.fontVariant.filter(function(t){return"normal"===t||"small-caps"===t}).join(""),i=ms(t.fontFamily).join(", "),r=kt(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,r,i].join(" "),i,r]},ls.prototype.renderTextNode=function(t,e){return r(this,void 0,void 0,function(){var i,r,n,s,a,u,h=this;return o(this,function(o){return n=this.createFontStyle(e),i=n[0],r=n[1],n=n[2],this.ctx.font=i,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",n=this.fontMetrics.getMetrics(r,n),s=n.baseline,a=n.middle,u=e.paintOrder,t.textBounds.forEach(function(t){u.forEach(function(i){switch(i){case 0:h.ctx.fillStyle=$t(e.color),h.renderTextWithLetterSpacing(t,e.letterSpacing,s);var r=e.textShadow;r.length&&t.text.trim().length&&(r.slice(0).reverse().forEach(function(i){h.ctx.shadowColor=$t(i.color),h.ctx.shadowOffsetX=i.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=i.offsetY.number*h.options.scale,h.ctx.shadowBlur=i.blur.number,h.renderTextWithLetterSpacing(t,e.letterSpacing,s)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),e.textDecorationLine.length&&(h.ctx.fillStyle=$t(e.textDecorationColor||e.color),e.textDecorationLine.forEach(function(e){switch(e){case 1:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+s),t.bounds.width,1);break;case 2:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:h.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+a),t.bounds.width,1)}}));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(h.ctx.strokeStyle=$t(e.webkitTextStrokeColor),h.ctx.lineWidth=e.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+s)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter"}})}),[2]})})},ls.prototype.renderReplacedElement=function(t,e,i){var r;i&&0<t.intrinsicWidth&&0<t.intrinsicHeight&&(r=Wo(t),e=jo(e),this.path(e),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore())},ls.prototype.renderNodeContent=function(t){return r(this,void 0,void 0,function(){var e,i,r,n,a,u,h,l,c,f,A,p;return o(this,function(o){switch(o.label){case 0:this.applyEffects(t.getEffects(4)),e=t.container,i=t.curves,r=e.styles,n=0,a=e.textNodes,o.label=1;case 1:return n<a.length?(u=a[n],[4,this.renderTextNode(u,r)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:if(!(e instanceof Qr))return[3,8];o.label=5;case 5:return o.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return c=o.sent(),this.renderReplacedElement(e,i,c),[3,8];case 7:return o.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof Hr&&this.renderReplacedElement(e,i,e.canvas),!(e instanceof Kr))return[3,12];o.label=9;case 9:return o.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return c=o.sent(),this.renderReplacedElement(e,i,c),[3,12];case 11:return o.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof mn&&e.tree?[4,new ls(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:u=o.sent(),e.width&&e.height&&this.ctx.drawImage(u,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),o.label=14;case 14:if(e instanceof an&&(l=Math.min(e.bounds.width,e.bounds.height),e.type===nn?e.checked&&(this.ctx.save(),this.path([new Po(e.bounds.left+.39363*l,e.bounds.top+.79*l),new Po(e.bounds.left+.16*l,e.bounds.top+.5549*l),new Po(e.bounds.left+.27347*l,e.bounds.top+.44071*l),new Po(e.bounds.left+.39694*l,e.bounds.top+.5649*l),new Po(e.bounds.left+.72983*l,e.bounds.top+.23*l),new Po(e.bounds.left+.84*l,e.bounds.top+.34085*l),new Po(e.bounds.left+.39363*l,e.bounds.top+.79*l)]),this.ctx.fillStyle=$t(sn),this.ctx.fill(),this.ctx.restore()):e.type===on&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+l/2,e.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=$t(sn),this.ctx.fill(),this.ctx.restore())),fs(e)&&e.value.length){switch(f=this.createFontStyle(r),A=f[0],l=f[1],f=this.fontMetrics.getMetrics(A,l).baseline,this.ctx.font=A,this.ctx.fillStyle=$t(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ps(e.styles.textAlign),p=Wo(e),h=0,e.styles.textAlign){case 1:h+=p.width/2;break;case 2:h+=p.width}l=p.add(h,0,0,-p.height/2+1),this.ctx.save(),this.path([new Po(p.left,p.top),new Po(p.left+p.width,p.top),new Po(p.left+p.width,p.top+p.height),new Po(p.left,p.top+p.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new br(e.value,l),r.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Di(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(f=e.styles.listStyleImage).type)return[3,18];c=void 0,f=f.url,o.label=15;case 15:return o.trys.push([15,17,,18]),[4,this.context.cache.match(f)];case 16:return c=o.sent(),this.ctx.drawImage(c,e.bounds.left-(c.width+10),e.bounds.top),[3,18];case 17:return o.sent(),this.context.logger.error("Error loading list-style-image "+f),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==e.styles.listStyleType&&(A=this.createFontStyle(r)[0],this.ctx.font=A,this.ctx.fillStyle=$t(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",p=new s(e.bounds.left,e.bounds.top+ae(e.styles.paddingTop,e.bounds.width),e.bounds.width,Ue(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new br(t.listValue,p),r.letterSpacing,Ue(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),o.label=20;case 20:return[2]}})})},ls.prototype.renderStackContent=function(t){return r(this,void 0,void 0,function(){var e,i,r,n,s,a,u,h,l,c,f,A,p,d,m;return o(this,function(o){switch(o.label){case 0:return Di(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:o.sent(),e=0,i=t.negativeZIndex,o.label=2;case 2:return e<i.length?(m=i[e],[4,this.renderStack(m)]):[3,5];case 3:o.sent(),o.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:o.sent(),r=0,n=t.nonInlineLevel,o.label=7;case 7:return r<n.length?(m=n[r],[4,this.renderNode(m)]):[3,10];case 8:o.sent(),o.label=9;case 9:return r++,[3,7];case 10:s=0,a=t.nonPositionedFloats,o.label=11;case 11:return s<a.length?(m=a[s],[4,this.renderStack(m)]):[3,14];case 12:o.sent(),o.label=13;case 13:return s++,[3,11];case 14:u=0,h=t.nonPositionedInlineLevel,o.label=15;case 15:return u<h.length?(m=h[u],[4,this.renderStack(m)]):[3,18];case 16:o.sent(),o.label=17;case 17:return u++,[3,15];case 18:l=0,c=t.inlineLevel,o.label=19;case 19:return l<c.length?(m=c[l],[4,this.renderNode(m)]):[3,22];case 20:o.sent(),o.label=21;case 21:return l++,[3,19];case 22:f=0,A=t.zeroOrAutoZIndexOrTransformedOrOpacity,o.label=23;case 23:return f<A.length?(m=A[f],[4,this.renderStack(m)]):[3,26];case 24:o.sent(),o.label=25;case 25:return f++,[3,23];case 26:p=0,d=t.positiveZIndex,o.label=27;case 27:return p<d.length?(m=d[p],[4,this.renderStack(m)]):[3,30];case 28:o.sent(),o.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},ls.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},ls.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},ls.prototype.formatPath=function(t){var e=this;t.forEach(function(t,i){var r=Lo(t)?t.start:t;0===i?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),Lo(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)})},ls.prototype.renderRepeat=function(t,e,i,r){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(i,r),this.ctx.fill(),this.ctx.translate(-i,-r)},ls.prototype.resizeImage=function(t,e,i){var r;return t.width===e&&t.height===i?t:((r=(null!=(r=this.canvas.ownerDocument)?r:document).createElement("canvas")).width=Math.max(1,e),r.height=Math.max(1,i),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,i),r)},ls.prototype.renderBackgroundImage=function(t){return r(this,void 0,void 0,function(){var e,i,r,n,s,a;return o(this,function(u){switch(u.label){case 0:e=t.styles.backgroundImage.length-1,i=function(i){var n,s,a,u,h,l,c,f,A,p,d,m,y,g,v,b,w;return o(this,function(o){switch(o.label){case 0:if(0!==i.type)return[3,5];n=void 0,s=i.url,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.context.cache.match(s)];case 2:return n=o.sent(),[3,4];case 3:return o.sent(),r.context.logger.error("Error loading background-image "+s),[3,4];case 4:return n&&(a=qo(t,e,[n.width,n.height,n.width/n.height]),l=a[0],d=a[1],m=a[2],A=a[3],p=a[4],h=r.ctx.createPattern(r.resizeImage(n,A,p),"repeat"),r.renderRepeat(l,h,d,m)),[3,6];case 5:1===i.type?(w=qo(t,e,[null,null,null]),l=w[0],d=w[1],m=w[2],A=w[3],p=w[4],x=i.angle,M=A,_=p,S="number"==typeof x?x:(C=M/2,S=(E=_)/2,C=ae((B=x)[0],M)-C,E=S-ae(B[1],E),(Math.atan2(E,C)+2*Math.PI)%(2*Math.PI)),E=M/2,C=_/2,M=(B=Math.abs(M*Math.sin(S))+Math.abs(_*Math.cos(S)))/2,_=Math.sin(S-Math.PI/2)*M,v=[B,E-(M=Math.cos(S-Math.PI/2)*M),E+M,C-_,C+_],g=v[0],a=v[1],c=v[2],b=v[3],f=v[4],(w=document.createElement("canvas")).width=A,w.height=p,v=w.getContext("2d"),u=v.createLinearGradient(a,b,c,f),pe(i.stops,g).forEach(function(t){return u.addColorStop(t.stop,$t(t.color))}),v.fillStyle=u,v.fillRect(0,0,A,p),0<A&&0<p&&(h=r.ctx.createPattern(w,"repeat"),r.renderRepeat(l,h,d,m))):2===i.type&&(b=qo(t,e,[null,null,null]),l=b[0],c=b[1],f=b[2],A=b[3],p=b[4],g=0===i.position.length?[oe]:i.position,d=ae(g[0],A),m=ae(g[g.length-1],p),v=function(t,e,i,r,n){var o,s,a=0,u=0;switch(t.size){case 0:0===t.shape?a=u=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(i),Math.abs(i-n)):1===t.shape&&(a=Math.min(Math.abs(e),Math.abs(e-r)),u=Math.min(Math.abs(i),Math.abs(i-n)));break;case 2:0===t.shape?a=u=Math.min(de(e,i),de(e,i-n),de(e-r,i),de(e-r,i-n)):1===t.shape&&(u=(o=Math.min(Math.abs(i),Math.abs(i-n))/Math.min(Math.abs(e),Math.abs(e-r)))*(a=de((s=me(r,n,e,i,!0))[0]-e,(s[1]-i)/o)));break;case 1:0===t.shape?a=u=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(i),Math.abs(i-n)):1===t.shape&&(a=Math.max(Math.abs(e),Math.abs(e-r)),u=Math.max(Math.abs(i),Math.abs(i-n)));break;case 3:0===t.shape?a=u=Math.max(de(e,i),de(e,i-n),de(e-r,i),de(e-r,i-n)):1===t.shape&&(u=(o=Math.max(Math.abs(i),Math.abs(i-n))/Math.max(Math.abs(e),Math.abs(e-r)))*(a=de((s=me(r,n,e,i,!1))[0]-e,(s[1]-i)/o)))}return Array.isArray(t.size)&&(a=ae(t.size[0],r),u=2===t.size.length?ae(t.size[1],n):a),[a,u]}(i,d,m,A,p),w=v[0],b=v[1],0<w)&&0<b&&(y=r.ctx.createRadialGradient(c+d,f+m,0,c+d,f+m,w),pe(i.stops,2*w).forEach(function(t){return y.addColorStop(t.stop,$t(t.color))}),r.path(l),r.ctx.fillStyle=y,w!==b?(g=t.bounds.left+.5*t.bounds.width,v=t.bounds.top+.5*t.bounds.height,w=1/(b/=w),r.ctx.save(),r.ctx.translate(g,v),r.ctx.transform(1,0,0,b,0,0),r.ctx.translate(-g,-v),r.ctx.fillRect(c,w*(f-v)+v,A,p*w),r.ctx.restore()):r.ctx.fill()),o.label=6;case 6:return e--,[2]}var x,M,_,S,B,E,C})},r=this,n=0,s=t.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return n<s.length?(a=s[n],[5,i(a)]):[3,4];case 2:u.sent(),u.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},ls.prototype.renderSolidBorder=function(t,e,i){return r(this,void 0,void 0,function(){return o(this,function(r){return this.path(Yo(i,e)),this.ctx.fillStyle=$t(t),this.ctx.fill(),[2]})})},ls.prototype.renderDoubleBorder=function(t,e,i,n){return r(this,void 0,void 0,function(){var r;return o(this,function(o){switch(o.label){case 0:return e<3?[4,this.renderSolidBorder(t,i,n)]:[3,2];case 1:return o.sent(),[2];case 2:return r=function(t){switch(i){case 0:return es(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return es(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return es(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return es(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}}(n),this.path(r),this.ctx.fillStyle=$t(t),this.ctx.fill(),r=function(t){switch(i){case 0:return es(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return es(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return es(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return es(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}}(n),this.path(r),this.ctx.fill(),[2]}})})},ls.prototype.renderNodeBackgroundAndBorders=function(t){return r(this,void 0,void 0,function(){var e,i,r,n,s,a,u,h,l=this;return o(this,function(o){switch(o.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,i=!Jt(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],n=As(rs(e.backgroundClip,0),t.curves),i||e.boxShadow.length?(this.ctx.save(),this.path(n),this.ctx.clip(),Jt(e.backgroundColor)||(this.ctx.fillStyle=$t(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:o.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(e){l.ctx.save();var i,r,n,o,s=ko(t.curves),a=e.inset?0:1e4,u=(i=-a+(e.inset?1:-1)*e.spread.number,r=(e.inset?1:-1)*e.spread.number,n=e.spread.number*(e.inset?-2:2),o=e.spread.number*(e.inset?-2:2),s.map(function(t,e){switch(e){case 0:return t.add(i,r);case 1:return t.add(i+n,r);case 2:return t.add(i+n,r+o);case 3:return t.add(i,r+o)}return t}));e.inset?(l.path(s),l.ctx.clip(),l.mask(u)):(l.mask(s),l.ctx.clip(),l.path(u)),l.ctx.shadowOffsetX=e.offsetX.number+a,l.ctx.shadowOffsetY=e.offsetY.number,l.ctx.shadowColor=$t(e.color),l.ctx.shadowBlur=e.blur.number,l.ctx.fillStyle=e.inset?$t(e.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()}),o.label=2;case 2:a=s=0,u=r,o.label=3;case 3:return a<u.length?0!==(h=u[a]).style&&!Jt(h.color)&&0<h.width?2!==h.style?[3,5]:[4,this.renderDashedDottedBorder(h.color,h.width,s,t.curves,2)]:[3,11]:[3,13];case 4:return o.sent(),[3,11];case 5:return 3!==h.style?[3,7]:[4,this.renderDashedDottedBorder(h.color,h.width,s,t.curves,3)];case 6:return o.sent(),[3,11];case 7:return 4!==h.style?[3,9]:[4,this.renderDoubleBorder(h.color,h.width,s,t.curves)];case 8:return o.sent(),[3,11];case 9:return[4,this.renderSolidBorder(h.color,s,t.curves)];case 10:o.sent(),o.label=11;case 11:s++,o.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},ls.prototype.renderDashedDottedBorder=function(t,e,i,n,s){return r(this,void 0,void 0,function(){var r,a,u,h,l,c,f,A,p,d,m;return o(this,function(o){return this.ctx.save(),p=function(t){switch(i){case 0:return ts(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return ts(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return ts(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return ts(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}}(n),r=Yo(n,i),2===s&&(this.path(r),this.ctx.clip()),c=(Lo(r[0])?(a=r[0].start.x,r[0].start):(a=r[0].x,r[0])).y,f=(Lo(r[1])?(u=r[1].end.x,r[1].end):(u=r[1].x,r[1])).y,h=0===i||2===i?Math.abs(a-u):Math.abs(c-f),this.ctx.beginPath(),3===s?this.formatPath(p):this.formatPath(r.slice(0,2)),l=e<3?3*e:2*e,c=e<3?2*e:e,3===s&&(c=l=e),f=!0,h<=2*l?f=!1:h<=2*l+c?(l*=A=h/(2*l+c),c*=A):(p=Math.floor((h+c)/(l+c)),A=(h-p*l)/(p-1),c=(p=(h-(p+1)*l)/p)<=0||Math.abs(c-A)<Math.abs(c-p)?A:p),f&&(3===s?this.ctx.setLineDash([0,l+c]):this.ctx.setLineDash([l,c])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=$t(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(Lo(r[0])&&(d=r[3],m=r[0],this.ctx.beginPath(),this.formatPath([new Po(d.end.x,d.end.y),new Po(m.start.x,m.start.y)]),this.ctx.stroke()),Lo(r[1]))&&(d=r[1],m=r[2],this.ctx.beginPath(),this.formatPath([new Po(d.end.x,d.end.y),new Po(m.start.x,m.start.y)]),this.ctx.stroke()),this.ctx.restore(),[2]})})},ls.prototype.render=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=$t(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),function t(e,i,r,n){e.container.elements.forEach(function(o){var s=Di(o.flags,4),a=Di(o.flags,2),u=new Go(o,e);Di(o.styles.display,2048)&&n.push(u);var h,l,c,f,A=Di(o.flags,8)?[]:n;s||a?(h=s||o.styles.isPositioned()?r:i,a=new Ho(u),o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()?(l=o.styles.zIndex.order)<0?(c=0,h.negativeZIndex.some(function(t,e){return l>t.element.container.styles.zIndex.order?(c=e,!1):0<c}),h.negativeZIndex.splice(c,0,a)):0<l?(f=0,h.positiveZIndex.some(function(t,e){return l>=t.element.container.styles.zIndex.order?(f=e+1,!1):0<f}),h.positiveZIndex.splice(f,0,a)):h.zeroOrAutoZIndexOrTransformedOrOpacity.push(a):(o.styles.isFloating()?h.nonPositionedFloats:h.nonPositionedInlineLevel).push(a),t(u,a,s?a:r,A)):((o.styles.isInlineLevel()?i.inlineLevel:i.nonInlineLevel).push(u),t(u,i,r,A)),Di(o.flags,8)&&$o(o,A)})}(r=new Go(t,null),n=new Ho(r),n,i=[]),$o(r.container,i),[4,this.renderStack(n)];case 1:return e.sent(),this.applyEffects([]),[2,this.canvas]}var i,r,n})})};var us,hs=ls;function ls(t,e){return(t=us.call(this,t,e)||this).h=[],t.canvas=e.canvas||document.createElement("canvas"),t.ctx=t.canvas.getContext("2d"),e.canvas||(t.canvas.width=Math.floor(e.width*e.scale),t.canvas.height=Math.floor(e.height*e.scale),t.canvas.style.width=e.width+"px",t.canvas.style.height=e.height+"px"),t.fontMetrics=new ss(document),t.ctx.scale(t.options.scale,t.options.scale),t.ctx.translate(-e.x,-e.y),t.ctx.textBaseline="bottom",t.h=[],t.context.logger.debug("Canvas renderer initialized ("+e.width+"x"+e.height+") with scale "+e.scale),t}var cs,fs=function(t){return t instanceof An||t instanceof ln||t instanceof an&&t.type!==on&&t.type!==nn},As=function(t,e){switch(t){case 0:return ko(e);case 2:return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox];default:return jo(e)}},ps=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},ds=["-apple-system","system-ui"],ms=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(t){return-1===ds.indexOf(t)}):t},ys=(e(gs,cs=le),gs.prototype.render=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(i){switch(i.label){case 0:return e=gr(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,vs(e)];case 1:return e=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=$t(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(e,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},gs);function gs(t,e){return(t=cs.call(this,t,e)||this).canvas=e.canvas||document.createElement("canvas"),t.ctx=t.canvas.getContext("2d"),t.options=e,t.canvas.width=Math.floor(e.width*e.scale),t.canvas.height=Math.floor(e.height*e.scale),t.canvas.style.width=e.width+"px",t.canvas.style.height=e.height+"px",t.ctx.scale(t.options.scale,t.options.scale),t.ctx.translate(-e.x,-e.y),t.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale),t}var vs=function(t){return new Promise(function(e,i){var r=new Image;r.onload=function(){e(r)},r.onerror=i,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})},bs=(ws.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug||this.info.apply(this,t))},ws.prototype.getTime=function(){return Date.now()-this.start},ws.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&console.info},ws.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn||this.info.apply(this,t))},ws.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error||this.info.apply(this,t))},ws.instances={},ws);function ws(t){var e=t.id;t=t.enabled;this.id=e,this.enabled=t,this.start=Date.now()}Ms.instanceCount=1;var xs=Ms;function Ms(t,e){this.windowBounds=e,this.instanceName="#"+Ms.instanceCount++,this.logger=new bs({id:this.instanceName,enabled:t.logging}),this.cache=null!=(e=t.cache)?e:new wo(this,t)}return"undefined"!=typeof window&&vo.setContext(window),function(t,e){return a=t,h=e=void 0===e?{}:e,r(void 0,void 0,void 0,function(){var t,e,r,l,c,f,A,p,d,m,y,g,v,b,w,x;return o(this,function(o){switch(o.label){case 0:if(!a||"object"!=n(a))return[2,Promise.reject("Invalid element provided as first argument")];if(!(t=a.ownerDocument))throw new Error("Element is not attached to a Document");if(e=t.defaultView)return v={allowTaint:null!=(b=h.allowTaint)&&b,imageTimeout:null!=(m=h.imageTimeout)?m:15e3,proxy:h.proxy,useCORS:null!=(y=h.useCORS)&&y},b=i({logging:null==(g=h.logging)||g,cache:h.cache},v),m={windowWidth:null!=(m=h.windowWidth)?m:e.innerWidth,windowHeight:null!=(y=h.windowHeight)?y:e.innerHeight,scrollX:null!=(g=h.scrollX)?g:e.pageXOffset,scrollY:null!=(v=h.scrollY)?v:e.pageYOffset},y=new s(m.scrollX,m.scrollY,m.windowWidth,m.windowHeight),g=new xs(b,y),m=null!=(v=h.foreignObjectRendering)&&v,v={allowTaint:null!=(b=h.allowTaint)&&b,onclone:h.onclone,ignoreElements:h.ignoreElements,inlineImages:m,copyStyles:m},g.logger.debug("Starting document clone with size "+y.width+"x"+y.height+" scrolled to "+-y.left+","+-y.top),b=new io(g,a,v),(v=b.clonedReferenceElement)?[4,b.toIFrame(t,y)]:[2,Promise.reject("Unable to find element in cloned iframe")];throw new Error("Document is not attached to a Window");case 1:return r=o.sent(),w=wn(v)||"HTML"===v.tagName?function(t){var e=t.body,i=t.documentElement;if(e&&i)return t=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),i=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight)),new s(0,0,t,i);throw new Error("Unable to get document size")}(v.ownerDocument):u(g,v),l=w.width,c=w.height,f=w.left,A=w.top,p=function(t,e,i){var r=e.ownerDocument,n=r.documentElement?fe(t,getComputedStyle(r.documentElement).backgroundColor):we.TRANSPARENT,o=r.body?fe(t,getComputedStyle(r.body).backgroundColor):we.TRANSPARENT;return i="string"==typeof i?fe(t,i):null===i?we.TRANSPARENT:4294967295,e===r.documentElement?Jt(n)?Jt(o)?i:o:n:i}(g,v,h.backgroundColor),w={canvas:h.canvas,backgroundColor:p,scale:null!=(w=null!=(w=h.scale)?w:e.devicePixelRatio)?w:1,x:(null!=(w=h.x)?w:0)+f,y:(null!=(w=h.y)?w:0)+A,width:null!=(w=h.width)?w:Math.ceil(l),height:null!=(w=h.height)?w:Math.ceil(c)},m?(g.logger.debug("Document cloned, using foreign object rendering"),[4,new ys(g,w).render(v)]):[3,3];case 2:return d=o.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+f+","+A+" with size "+l+"x"+c+" using computed rendering"),g.logger.debug("Starting DOM parsing"),x=_n(g,v),p===x.styles.backgroundColor&&(x.styles.backgroundColor=we.TRANSPARENT),g.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),[4,new hs(g,w).render(x)];case 4:d=o.sent(),o.label=5;case 5:return null!=(x=h.removeContainer)&&!x||io.destroy(r)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore"),g.logger.debug("Finished rendering"),[2,d]}})});var a,h}},"object"==n(e)&&void 0!==t?t.exports=r():void 0!==(i="function"==typeof(r=r)?r.call(e,i,e,t):r)&&(t.exports=i)},function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){return"symbol"===r(t=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return String(t);if("object"!==r(i=i.call(t,e)))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"))?t:String(t)}(n.key),n)}}i.r(e);var o=i(0),s=(i=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var e,i;return e=t,i=[{key:"screenshot",value:function(t,e,i){fengmap.FMUtil.screenshot(t,e.leftTop,e.rightBottom,e.direction,e.rank,i,e.width,e.height)}},{key:"exportToImage",value:function(t,e,i,r){var n={};Object.assign(n,e,{dependent:{html2canvas:o}}),fengmap.FMUtil.exportToImage(t,n.bound,n,i,r)}}],null&&n(e.prototype,null),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),window.fengmap||{});s.FMExport=i,e.default=s}],i={},t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"I",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.I)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.I?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=1).default;function t(r){var n;return(i[r]||(n=i[r]={i:r,l:!1,exports:{}},e[r].call(n.exports,n,n.exports,t),n.l=!0,n)).exports}var e,i},t.exports=r()},yasN:function(t,e,i){"use strict";var r=t.exports=function(){this._cache={}};r.prototype.put=function(t,e){this._cache[t]=e},r.prototype.get=function(t){return this._cache[t]},r.prototype.del=function(t){delete this._cache[t]},r.prototype.clear=function(){this._cache={}}},ypnx:function(t,e,i){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,r,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,r)});case 4:return e.nextTick(function(){t.call(null,i,r,n)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(e,i("W2nU"))},yqEb:function(t,e,i){"use strict";var r=i("Gu7T"),n=i.n(r),o=(i("3zDK"),i("c2Ch")),s=i("/VVC"),a=i("5qI+"),u=i.n(a),h=(i("j5PW"),i("bYmx"),i("o2Cy"),i("8qUe"),i("C7iZ"),i("/Wqo"),i("Tvr9"),i("yYa5"),i("EApQ"),i("kKzE"),i("qONO"),{name:"trajectorys",data:function(){return{devtype:"",iconImagSrc:"",typeEnum:{8192:"FACILITY",16384:"LABEL",4096:"MODEL",64:"TEXT_MARKER",8:"IMAGE_MARKER"},intoProjectid:this.$store.state.intoProjectid,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,intoProjectType:this.$store.state.intoProjectType,map:"",tracksPlayer:"",speed:1,speedMultiple:1,sliderIns:"",percentage:0,startValue:"",endValue:"",isPause:!1,isComplete:!1,coordMarkers:[],actionTableDataArr:"",actionTableData:"",graphData:"",g:"",groundLength:0}},methods:{search:function(t,e,i,r){this.iconImagSrc=1==r?"../../../static/user1.png":"../../../static/tbox1.png",this.startValue=1e3*e,this.endValue=1e3*i,this.actionTableDataArr=t,this.groundLength=0,this.getPointAndNearLists(this.actionTableDataArr[0])},getPointAndNearLists:function(t){var e=this;this.actionTableData=t;var i=this,r={groundid:this.actionTableData[0].groundid};Object(o._76)(r,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){if(1001==t.code){var r=[];i.graphData=t.data,i.g=new s.a,i.graphData.length>0&&1==i.intoProjectType?function(){for(var t=0;t<i.graphData.length;t++)if(i.graphData[t].list.length>0)for(var o=0;o<i.graphData[t].list.length;o++)i.g.addEdge(i.graphData[t].pointid,i.graphData[t].list[o].pointid),r.push(i.graphData[t].list[o]);else r.push(i.graphData[t]);var s=i.unique(r),a=void 0,u=void 0,h=void 0,l=[],c=[];if(1==e.actionTableData.length){if(h=[],i.actionTableData[0].list.length>1){var f=void 0,A=void 0,p=void 0,d=void 0,m=[];i.actionTableData[0].list.reverse().forEach(function(t){m.push({gpstime:t.gpstime,pointid:t.eui,remaintime:t.remaintime,x:t.x,y:t.y})});for(var y=0;y<m.length-1;y++){f=m[y].gpstime,A=Math.floor((m[y+1].gpstime-m[y].gpstime)/2),p=(m[y+1].x-m[y].x)/2,d=(m[y+1].y-m[y].y)/2,m[y].gpstime=i.formatDatetimeGps(m[y].gpstime),h.push(m[y]);for(var g=1;g<2;g++)h.push({gpstime:i.formatDatetimeGps(f+A*g),pointid:m[y].pointid,x:m[y].x+p*g,y:m[y].y+d*g})}m[m.length-1].gpstime=i.formatDatetimeGps(m[m.length-1].gpstime),h.push(m[m.length-1]),h.push({gpstime:i.actionTableData[0].gpstime,remaintime:i.actionTableData[0].remaintime,pointid:i.actionTableData[0].eui,anglimit:i.actionTableData[0].anglimit})}else{var v=[{gpstime:i.actionTableData[0].gpstime,remaintime:i.actionTableData[0].remaintime,pointid:i.actionTableData[0].eui,anglimit:i.actionTableData[0].anglimit}];l=l.concat(v)}l=[].concat(n()(l),n()(h))}else for(var b=function(t){if(h=[],i.actionTableData[t].list.length>1){var r=void 0,o=void 0,s=void 0,c=void 0,f=[];i.actionTableData[t].list.reverse().forEach(function(t){f.push({gpstime:t.gpstime,pointid:t.eui,remaintime:t.remaintime,x:t.x,y:t.y})});for(var A=0;A<f.length-1;A++){r=f[A].gpstime,o=Math.floor((f[A+1].gpstime-f[A].gpstime)/2),s=(f[A+1].x-f[A].x)/2,c=(f[A+1].y-f[A].y)/2,f[A].gpstime=i.formatDatetimeGps(f[A].gpstime),h.push(f[A]);for(var p=1;p<2;p++)h.push({gpstime:i.formatDatetimeGps(r+o*p),pointid:f[A].pointid,x:f[A].x+s*p,y:f[A].y+c*p})}f[f.length-1].gpstime=i.formatDatetimeGps(f[f.length-1].gpstime),h.push(f[f.length-1]),l=[].concat(n()(l),n()(h))}for(var d=0;d<i.graphData.length;d++)if(i.actionTableData[t].eui==i.graphData[d].pointid&&i.graphData[d].list.length>0)a=e.g.BFS(i.actionTableData[t].eui),u=a[i.actionTableData[t+1].eui]?a[i.actionTableData[t+1].eui].path:i.actionTableData[t].eui+"->"+i.actionTableData[t+1].eui,(h=u.split("->")).forEach(function(e,r){if(0===r)if(i.actionTableData[t].list.length<2)h[r]={gpstime:i.actionTableData[t].gpstime,remaintime:i.actionTableData[t].remaintime,pointid:e,anglimit:i.actionTableData[t].anglimit};else{var n=i.actionTableData[t].list[i.actionTableData[t].list.length-1].gpstime-i.actionTableData[t].list[0].gpstime+i.actionTableData[t].list[i.actionTableData[t].list.length-1].remaintime;h[r]={gpstime:i.formatDatetimeGps(i.actionTableData[t].list[i.actionTableData[t].list.length-1].gpstime+i.actionTableData[t].list[i.actionTableData[t].list.length-1].remaintime),remaintime:i.actionTableData[t].remaintime-n,pointid:e,anglimit:i.actionTableData[t].anglimit}}else h[r]={pointid:e}}),t!=e.actionTableData.length-2?h.pop():h[h.length-1]={gpstime:i.actionTableData[t+1].gpstime,remaintime:i.actionTableData[t+1].remaintime,anglimit:i.actionTableData[t].anglimit,pointid:h[h.length-1].pointid};else if(i.actionTableData[t].eui==i.graphData[d].pointid&&0===i.graphData[d].list.length){var m=[{gpstime:i.actionTableData[t].gpstime,remaintime:i.actionTableData[t].remaintime,pointid:i.actionTableData[t].eui,anglimit:i.actionTableData[t].anglimit}];l=l.concat(m)}l=[].concat(n()(l),n()(h))},w=0;w<e.actionTableData.length-1;w++)b(w);l.forEach(function(t){s.forEach(function(e){t.pointid==e.pointid&&(t.anglimit?c.push({time:t.gpstime,x:e.nodeX,y:e.nodeY,beacon:1,anglimit:t.anglimit,remaintime:t.remaintime,pointid:t.pointid}):t.beacon?c.push({time:t.gpstime,x:e.nodeX,y:e.nodeY,beacon:1,remaintime:t.remaintime,pointid:t.pointid}):8!=t.pointid.length&&16!=t.pointid.length||void 0!=t.x?t.x||t.y?c.push({x:t.x,y:t.y,remaintime:t.remaintime,time:t.gpstime,pointid:t.pointid}):c.push({x:e.nodeX,y:e.nodeY,time:t.gpstime,pointid:t.pointid}):c.push({x:e.nodeX,y:e.nodeY,beacon:1,time:t.gpstime,remaintime:t.remaintime,pointid:t.pointid}))})}),c.length>1&&c.forEach(function(t,e){i.graphData.forEach(function(e){t.pointid==e.pointid&&(t.anglimit=e.anglimit)}),1==t.beacon&&15!=t.anglimit&&(0!=e?(t.x=c[e-1].x+(c[e].x-c[e-1].x)/2,t.y=c[e-1].y+(c[e].y-c[e-1].y)/2):(t.x=c[e].x+(c[e+1].x-c[e].x)/2,t.y=c[e].y+(c[e+1].y-c[e].y)/2))}),i.searchInfo(c,i.actionTableData[0].groundid)}():i.searchInfo(i.actionTableDataArr[i.groundLength],i.actionTableDataArr[i.groundLength][0].groundid)}else i.$message({message:"zh"==i.$store.state.i18n?t.msg:t.enMsg,type:"error"})})},unique:function(t){var e={};return t.reduce(function(t,i){return!e[i.pointid]&&(e[i.pointid]=t.push(i)),t},[])},searchInfo:function(t,e){var i=this,r={groundid:e};Object(o._23)(r,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&Object(o._57)({buildid:e.data.list[0].buildid},i.tenantkey_A,i.tenantid_A,i.userName).then(function(r){if(1001==r.code){for(var n=[],o=0;o<r.data.length;o++){var s={groundid:r.data[o].id,ground:r.data[o].ground,newground:o+1};n.push(s)}var a=n.find(function(t){return t.ground==e.data.list[0].ground});t.forEach(function(t){t.level=a.newground}),i.mapInit(e.data.list[0].appname,e.data.list[0].mapkey,e.data.list[0].filename,a.newground,t)}})})},mapOut:function(){document.getElementById("speed_"+this.speedMultiple).classList.remove("active"),document.getElementById("speed_1").classList.add("active"),this.speedMultiple=1,this.map.dispose(),this.map=null},mapInit:function(t,e,i,r,n){var o=this;this.map&&(o.map.dispose(),o.map=null);var s={container:document.getElementById("fengmap"),appName:t,key:e,mapID:i,level:r,visibleLevels:[r],floorSpace:50};this.map=new u.a.FMMap(s),this.map.on("loaded",function(){o.addTracks(n)})},addTracks:function(t){var e=this;e.addStartAndEndMarker(t),e.tracksPlayer=new u.a.FMTracksPlayer(e.map),e.tracksPlayer.setTracks(t),e.tracksPlayer.setTrackStyle({width:6,radius:1,type:u.a.FMLineType.ARROW,animate:!0,height:0});var i={type:u.a.FMType.LOCATION_MARKER,options:{url:"https://developer.fengmap.com/fmAPI/images/bluedot.png",height:.2,x:t[0].x,y:t[0].y,level:t[0].level,size:48}};e.tracksPlayer.setMarkerStyle(i.type,i.options),e.tracksPlayer.render(),e.tracksPlayer.setSpeed(e.speed),this.onHandlePlayBtn("play"),e.tracksPlayer.on("playing",function(t){var i=t.progress;t.level,e.startValue;e.percentage=(i-e.startValue)/(e.endValue-e.startValue)*100}),e.tracksPlayer.on("complete",function(){e.isComplete=!0,e.nextMAp(),e.isPause=!1})},nextMAp:function(){var t=this,e=this;setTimeout(function(){if(t.groundLength+=1,e.actionTableDataArr.length>e.groundLength){if(e.actionTableDataArr[e.groundLength][0].groundid){var i={groundid:e.actionTableDataArr[e.groundLength][0].groundid};Object(o._23)(i,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code&&(2==t.data.list[0].maptype?(document.getElementById("speed_"+e.speedMultiple).classList.remove("active"),document.getElementById("speed_1").classList.add("active"),e.speedMultiple=1,e.getPointAndNearLists(e.actionTableDataArr[e.groundLength])):e.$emit("closePopup2d","test"))})}}else e.percentage=100},3e3)},onHandlePlayBtn:function(t){"play"==t?(this.onHandleBtn("play"),this.isPause=!1):"pause"==t&&(this.onHandleBtn("pause"),this.isPause=!0)},onHandleBtn:function(t,e){switch(t){case"play":this.isComplete?(this.tracksPlayer.start(),this.tracksPlayer.play(),this.isComplete=!1):this.tracksPlayer.play();break;case"pause":this.tracksPlayer.pause();break;case"stop":this.tracksPlayer.stop();break;case"speed":var i=e*this.speed;this.tracksPlayer.setSpeed(i),this.updateBtnUI(e);break;case"progress":this.tracksPlayer.setProgress(e)}},addStartAndEndMarker:function(t){for(var e=[{x:t[0].x,y:t[0].y,level:t[0].level,url:"https://developer.fengmap.com/fmAPI/images/start.png"},{x:t[t.length-1].x,y:t[t.length-1].y,level:t[t.length-1].level,url:"https://developer.fengmap.com/fmAPI/images/end.png"}],i=0;i<e.length;i++){var r=e[i],n=new u.a.FMImageMarker({x:r.x,y:r.y,url:r.url,size:32,height:.2,anchor:u.a.FMMarkerAnchor.BOTTOM,depth:!1,collision:!0}),o=this.map.getFloor(r.level);n.addTo(o),this.coordMarkers.push(n)}},updateBtnUI:function(t){document.getElementById("speed_"+this.speedMultiple).classList.remove("active"),document.getElementById("speed_"+t).classList.add("active"),this.speedMultiple=t},datetimecut:function(t,e){if(!t)return"-";function i(t){return t>9?t:"0"+t}var r=new Date(t),n=r.getFullYear(),o=i(r.getMonth()+1),s=i(r.getDate()),a=r.getHours()<10?"0"+r.getHours():r.getHours(),u=i(r.getMinutes()),h=i(r.getSeconds());return e?n+"-"+o+"-"+s+" "+a+":"+u+":"+h:o+"-"+s+" "+a+":"+u+":"+h},formatDateRecv:function(t){if(null==t||0==t)return"";var e=new Date(parseInt(t)).toUTCString();return this.datetimecut(e)},formatDatetimeGps:function(t){if(null==t||0==t)return"";var e=new Date(1e3*parseInt(t)).toUTCString();return this.datetimecut(e,!0)}}}),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mapConent"},[i("div",{staticClass:"panel",attrs:{id:"panel"}},[i("div",{staticClass:"progressBox"},[i("el-slider",{staticClass:"progress",attrs:{disabled:""},model:{value:t.percentage,callback:function(e){t.percentage=e},expression:"percentage"}})],1),t._v(" "),i("div",{staticClass:"btnBox"},[i("div",{staticClass:"left"},[i("i",{staticClass:"el-icon-video-play",attrs:{id:"playBtn"},on:{click:function(e){return t.onHandlePlayBtn("play")}}}),t._v(" "),i("i",{staticClass:"el-icon-video-pause",on:{click:function(e){return t.onHandleBtn("pause")}}})]),t._v(" "),i("div",{staticClass:"right"},[i("span",{attrs:{id:"speed_0.5"},on:{click:function(e){return t.onHandleBtn("speed",.5)}}},[t._v("x0.5")]),t._v(" "),i("span",{staticClass:"active",attrs:{id:"speed_1"},on:{click:function(e){return t.onHandleBtn("speed",1)}}},[t._v("x1")]),t._v(" "),i("span",{attrs:{id:"speed_1.5"},on:{click:function(e){return t.onHandleBtn("speed",1.5)}}},[t._v("x1.5")]),t._v(" "),i("span",{attrs:{id:"speed_2"},on:{click:function(e){return t.onHandleBtn("speed",2)}}},[t._v("x2")]),t._v(" "),i("span",{attrs:{id:"speed_3"},on:{click:function(e){return t.onHandleBtn("speed",3)}}},[t._v("x3")])])])]),t._v(" "),i("div",{attrs:{id:"fengmap"}})])},staticRenderFns:[]};var c=i("VU/8")(h,l,!1,function(t){i("Sx/w")},"data-v-6f3f6d6c",null);e.a=c.exports},yzIx:function(t,e,i){"use strict";var r=i("frcP");t.exports=function(t){return r(t)||0===t?t:t<0?-1:1}},"z+8S":function(t,e,i){"use strict";var r=i("X3l8").Buffer,n=i("9DG0").Transform,o=i("X4X3").StringDecoder;function s(t){n.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i("LC74")(s,n);var a="undefined"!=typeof Uint8Array,u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);s.prototype.update=function(t,e,i){var n=function(t,e){if(t instanceof r)return t;if("string"==typeof t)return r.from(t,e);if(u&&ArrayBuffer.isView(t)){if(0===t.byteLength)return r.alloc(0);var i=r.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}if(a&&t instanceof Uint8Array)return r.from(t);if(r.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return r.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,e),o=this._update(n);return this.hashMode?this:(i&&(o=this._toString(o,i)),o)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(t,e,i){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{i(r)}},s.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},s.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t&&(e=this._toString(e,t,!0)),e},s.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("cant switch encodings");var r=this._decoder.write(t);return i&&(r+=this._decoder.end()),r},t.exports=s},zOO0:function(t,e){t.exports=function(t,e){for(var i=t.length,r=-1;++r<i;)t[r]^=e[r];return t}},zvjZ:function(t,e,i){"use strict";var r=i("LC74"),n=i("CzQx"),o=i("X3l8").Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,n.call(this,64,56)}function h(t,e,i){return i^t&(e^i)}function l(t,e,i){return t&e|i&(t|e)}function c(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function A(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}r(u,n),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,o=0|this._c,a=0|this._d,u=0|this._e,p=0|this._f,d=0|this._g,m=0|this._h,y=0;y<16;++y)i[y]=t.readInt32BE(4*y);for(;y<64;++y)i[y]=0|(((e=i[y-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+i[y-7]+A(i[y-15])+i[y-16];for(var g=0;g<64;++g){var v=m+f(u)+h(u,p,d)+s[g]+i[g]|0,b=c(r)+l(r,n,o)|0;m=d,d=p,p=u,u=a+v|0,a=o,o=n,n=r,r=v+b|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=u+this._e|0,this._f=p+this._f|0,this._g=d+this._g|0,this._h=m+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u}});
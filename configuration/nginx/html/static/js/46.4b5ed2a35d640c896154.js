webpackJsonp([46],{GOmO:function(t,e){},y7Sw:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("PO8r"),a=s("HY7V"),r=s("c2Ch"),n={components:{Menu:i.a,Data:a.a},name:"TestData",data:function(){return{contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,delprio:this.$store.state.userInfo.delprio,start:!1,stop:!0,timer:null,tableData:[],tenantidData:[],pageCount:20,currentPage1:1,total:0,searchList:{tenantid:this.$store.state.userInfo.tenantid,deveui:"",type:"",flag:"",page:1,count:20},multipleSelection:[],del:!1,loading:!1,deleteData:[],TypeList:[{index:1,value:"downLink"},{index:2,value:"upLink"},{index:3,value:"BLE"},{index:4,value:"GPS"}],FlagList:[{index:1,label:this.$t("downlink.Passed"),value:!0},{index:2,label:this.$t("downlink.Failure"),value:!1}]}},methods:{handleCurrentChange:function(t){this.searchList.page=t,this.searchList.count=this.pageCount,this.getDevRssiLists()},handleSizeChange:function(t){this.pageCount=t,this.searchList.count=t,this.searchList.page=1,this.currentPage1=1,this.getDevRssiLists()},datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var s=new Date(t);return s.getFullYear()+"-"+e(s.getMonth()+1)+"-"+e(s.getDate())+" "+(s.getHours()<10?"0"+s.getHours():s.getHours())+":"+e(s.getMinutes())+":"+e(s.getSeconds())},formatDate:function(t,e){if(null==t.time||0==t.time)return"";var s=new Date(1e3*parseInt(t.time)).toUTCString();return this.datetimecut(s)},getDevRssiLists:function(){var t=this;Object(r._48)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size)})},searchInfo:function(){var t=this;this.searchList.page=1,this.currentPage1=1,Object(r._48)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.tableData=e.data.list,t.total=e.data.size,e.data.size>0?t.$message({message:t.$t("test.searchsuccess"),type:"success"}):t.$message({message:t.$t("test.nodata"),type:"success"})):(t.searchList.count=20,t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"}))})},searchPrevious:function(){if(this.searchList.deveui){var t=void 0,e=void 0,s=void 0;if(this.searchList.deveui.length>8){var i=this.searchList.deveui.length-8;e=this.searchList.deveui.substring(i),t=this.searchList.deveui.substring(0,i),e=(e=(s=parseInt(e,16)-1).toString(16)).padStart(8,"0"),this.searchList.deveui=t+e}else s=parseInt(this.searchList.deveui,16)-1,this.searchList.deveui=s.toString(16);this.searchInfo()}else this.$message({message:this.$t("test.tet6"),type:"warning"})},searchNext:function(){if(this.searchList.deveui){var t=void 0,e=void 0,s=void 0;if(this.searchList.deveui.length>8){var i=this.searchList.deveui.length-8;e=this.searchList.deveui.substring(i),t=this.searchList.deveui.substring(0,i),e=(e=(s=parseInt(e,16)+1).toString(16)).padStart(8,"0"),this.searchList.deveui=t+e}else s=parseInt(this.searchList.deveui,16)+1,this.searchList.deveui=s.toString(16);this.searchInfo()}else this.$message({message:this.$t("test.tet6"),type:"warning"})},clearBtn:function(){this.searchList={tenantid:this.$store.state.userInfo.tenantid,deveui:"",type:"",flag:"",page:1,count:this.pageCount},this.currentPage1=1,this.getDevRssiLists()},delTer:function(t){var e=this;if(5==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio||4==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio)this.$message({message:this.$t("staffmanagement.permissiondelete"),type:"warning"});else{var s=this;4!=this.contrForPrionum||2!=this.delprio?this.$confirm(this.$t("gateway.deletemsg")+this.tableData[t].deveui+this.$t("test.confirmdel4"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var i={ids:[e.tableData[t].id]};Object(r.N)(i,s.tenantkey_A,s.tenantid_A,s.userName).then(function(t){1001==t.code?(s.searchList.page=1,s.currentPage1=1,s.getDevRssiLists(),s.$message({message:s.$t("test.delsuccess"),type:"success"})):s.$message({message:"zh"==s.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}):this.$message({message:this.$t("usermanagement.noprio"),type:"warning"})}},handleSelectionChange:function(t){this.multipleSelection=t},delTestList:function(){0!=this.multipleSelection.length?(this.deleteData=this.multipleSelection,this.del=!0):this.$message({message:this.$t("downlink.deletedownlink1"),type:"warning"})},startRefresh:function(){var t=this;this.start=!1,this.stop=!0,this.timer=setInterval(function(){t.getDevRssiLists()},1e4)},deleteTrue:function(){var t=this;if(5==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio||4==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio)this.$message({message:this.$t("staffmanagement.permissiondelete"),type:"warning"});else{for(var e=this,s={ids:[]},i=0;i<this.deleteData.length;i++)s.ids.push(this.deleteData[i].id);this.loading=!0,Object(r.N)(s,e.tenantkey_A,e.tenantid_A,e.userName).then(function(s){1001==s.code?(t.del=!1,e.searchList.page=1,e.currentPage1=1,e.getDevRssiLists(),e.$message({message:e.$t("test.delsuccess"),type:"success"}),e.loading=!1):(e.$message({message:"zh"==e.$store.state.i18n?s.msg:s.enMsg,type:"error"}),e.loading=!1)})}},stopRefresh:function(){this.start=!0,this.stop=!1,clearInterval(this.timer)}},beforeMount:function(){this.getDevRssiLists()},mounted:function(){var t=this;this.timer=setInterval(function(){t.getDevRssiLists()},1e4)},destroyed:function(){clearInterval(this.timer)}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:5!=t.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[i("div",{staticClass:"menu_header"},[i("Menu")],1),t._v(" "),i("div",{staticClass:"content"},[i("el-container",{staticClass:"asi"},[i("el-aside",[i("Data")],1),t._v(" "),i("el-main",[i("div",{staticClass:"ter_input"},[i("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"}},[i("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("test.deveui1")}},[i("el-input",{staticStyle:{width:"95%",float:"left"},model:{value:t.searchList.deveui,callback:function(e){t.$set(t.searchList,"deveui",e)},expression:"searchList.deveui"}})],1),t._v(" "),i("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"1%","margin-right":"0"},attrs:{label:t.$t("test.msgtype1")}},[i("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{clearable:"",filterable:"",placeholder:t.$t("terminal.choose")},model:{value:t.searchList.type,callback:function(e){t.$set(t.searchList,"type",e)},expression:"searchList.type"}},t._l(t.TypeList,function(t){return i("el-option",{key:t.index,attrs:{label:t.value,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"1%","margin-right":"0"},attrs:{label:t.$t("downlink.msgtype2")}},[i("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{clearable:"",filterable:"",placeholder:t.$t("terminal.choose")},model:{value:t.searchList.flag,callback:function(e){t.$set(t.searchList,"flag",e)},expression:"searchList.flag"}},t._l(t.FlagList,function(t){return i("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"0"}},[i("el-button",{staticClass:"search",attrs:{type:"primary"},on:{click:function(e){return t.searchInfo()}}},[t._v(t._s(t.$t("test.search")))]),t._v(" "),i("el-button",{staticClass:"search",attrs:{type:"primary"},on:{click:function(e){return t.searchPrevious()}}},[t._v(t._s(t.$t("test.previous")))]),t._v(" "),i("el-button",{staticClass:"search",attrs:{type:"primary"},on:{click:function(e){return t.searchNext()}}},[t._v(t._s(t.$t("test.next")))]),t._v(" "),i("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.clearBtn()}}},[t._v(t._s(t.$t("test.reset")))]),t.start?i("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.startRefresh()}}},[t._v(t._s(t.$t("test.start")))]):t._e(),t._v(" "),t.stop?i("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.stopRefresh()}}},[t._v(t._s(t.$t("test.stop")))]):t._e(),t._v(" "),i("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.delTestList()}}},[t._v(t._s(t.$t("test.Batchdelete")))])],1)],1)],1),t._v(" "),i("div",[i("el-table",{ref:"multipleTable",staticStyle:{width:"97%","text-align":"center","margin-left":"2%"},attrs:{data:t.tableData,"max-height":"660",border:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"deveui",label:t.$t("test.deveui"),"show-overflow-tooltip":"","min-width":"90","header-align":"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"type",label:"type","show-overflow-tooltip":"","min-width":"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"flag",label:t.$t("downlink.msgstatustr"),"show-overflow-tooltip":"","min-width":"55",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.flag?i("p",{staticStyle:{border:"2px solid green",background:"green",color:"white"}},[t._v(t._s(t.$t("downlink.Passed")))]):i("p",{staticStyle:{border:"2px solid red",background:"red",color:"white"}},[t._v(t._s(t.$t("downlink.Failure")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"rssi1",label:"rssi1","min-width":"50",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{property:"rssi2",label:"rssi2","show-overflow-tooltip":"","min-width":"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"rssi3",label:"rssi3","show-overflow-tooltip":"","min-width":"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"time",label:t.$t("test.time"),"show-overflow-tooltip":"",formatter:t.formatDate,align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("test.contron"),fixed:"right",align:"center","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("warning.delete"),placement:"top"}},[i("el-button",{staticClass:"dels",attrs:{type:"danger"},on:{click:function(s){return t.delTer(e.$index)}}},[i("img",{attrs:{src:s("B32J")}})])],1)]}}])})],1),t._v(" "),i("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[i("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":20},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.$t("test.tet5"),visible:t.del},on:{"update:visible":function(e){t.del=e}}},[i("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{data:t.deleteData,"max-height":"660",stripe:""}},[i("el-table-column",{attrs:{property:"deveui",label:t.$t("test.deveui"),"show-overflow-tooltip":"","min-width":"90","header-align":"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"type",label:"type","show-overflow-tooltip":"","min-width":"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"flag",label:t.$t("downlink.msgstatustr"),"show-overflow-tooltip":"","min-width":"55",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.flag?i("p",{staticStyle:{border:"2px solid green",background:"green",color:"white"}},[t._v(t._s(t.$t("downlink.Passed")))]):i("p",{staticStyle:{border:"2px solid red",background:"red",color:"white"}},[t._v(t._s(t.$t("downlink.Failure")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"rssi1",label:"rssi1","min-width":"50",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{property:"rssi2",label:"rssi2","show-overflow-tooltip":"","min-width":"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"rssi3",label:"rssi3","show-overflow-tooltip":"","min-width":"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"time",label:t.$t("test.time"),"show-overflow-tooltip":"",formatter:t.formatDate,align:"center"}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.del=!1,t.loading=!1}}},[t._v(t._s(t.$t("terminal.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.deleteTrue}},[t._v(t._s(t.$t("terminal.confirm")))])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var o=s("VU/8")(n,l,!1,function(t){s("GOmO")},"data-v-306f5e68",null);e.default=o.exports}});
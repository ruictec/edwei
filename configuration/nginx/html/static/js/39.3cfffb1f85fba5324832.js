webpackJsonp([39],{ZzVA:function(t,e){},uYZX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("mvHQ"),s=i.n(o),a=i("PO8r"),n=i("CTnB"),r=(i("s0MJ"),i("c2Ch")),l={components:{Menu:a.a,Project:n.a},name:"Location",data:function(){return{contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,delprio:this.$store.state.userInfo.delprio,intoProjectName:this.$store.state.intoProjectName,tableData:[],multipleSelection:[],currentPage1:1,total:0,tenantidData:[],pickerOptions:{shortcuts:[{text:this.$t("terminal.pickeroptions4"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions5"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-1728e5),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions6"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-5184e5),t.$emit("pick",[i,e])}}]},tasktime:[],begingTime:"",endTime:"",searchList:{},pageCount:20,del:!1,loading:!1,deleteData:[]}},methods:{goProject:function(){this.$router.push("/projectmanagement")},datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var i=new Date(t);return i.getFullYear()+"-"+e(i.getMonth()+1)+"-"+e(i.getDate())+" "+(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+e(i.getMinutes())+":"+e(i.getSeconds())},formatDateGpstime:function(t,e){if(null==t.gpstime||0==t.gpstime)return"";var i=new Date(1e3*parseInt(t.gpstime)).toUTCString();return this.datetimecut(i)},handleCurrentChange:function(t){this.searchList.page=t,this.searchList.count=this.pageCount,this.getDevGpsLists()},handleSizeChange:function(t){this.pageCount=t,this.searchList.count=t,this.searchList.page=1,this.currentPage1=1,this.getDevGpsLists()},searchInfo:function(){var t=this;this.searchList.page=1,this.currentPage1=1,this.tasktime&&this.tasktime.length>0?(this.searchList.begintime=Date.parse(new Date(this.tasktime[0]))/1e3,this.searchList.endtime=Date.parse(new Date(this.tasktime[1]))/1e3):(this.searchList.begintime="",this.searchList.endtime=""),Object(r._43)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size,t.$message({message:t.$t("beacon.searchsuccess"),type:"success"}))})},clearBtn:function(){this.currentPage1=1,this.tasktime=[],1==this.$store.state.intoProjectprojectType?this.searchList={projectid:this.$store.state.intoProjectid,deveui:"",devetype:1,postype:1,groundid:"",begintime:"",endtime:"",page:1,count:20}:2==this.$store.state.intoProjectprojectType&&(this.searchList={projectid:this.$store.state.intoProjectid,deveui:"",devetype:2,postype:1,groundid:"",begintime:"",endtime:"",page:1,count:20}),this.getDevGpsLists()},DelDevCommand:function(t){var e=this,i=this;this.$confirm(this.$t("beacon.deletemsg1")+this.tableData[t].deveui+this.$t("project.tet16"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var o={projectid:e.$store.state.intoProjectid,ids:[e.tableData[t].id]};o.ids=s()(o.ids),Object(r.J)(o,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(i.getDevGpsLists(),i.$message({message:i.$t("buildingmanagement.deletesuccess"),type:"success"})):i.$message({message:"zh"==i.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}).catch(function(){})},handleSelectionChange:function(t){this.multipleSelection=t},delDevGpsList:function(t){0!=this.multipleSelection.length?(this.deleteData=this.multipleSelection,this.del=!0):this.$message({message:this.$t("locationoutdoorh.message3"),type:"warning"})},deleteTrue:function(){for(var t=this,e=this,i={projectid:this.$store.state.intoProjectid,ids:[]},o=0;o<this.deleteData.length;o++)i.ids.push(this.deleteData[o].id);i.ids=s()(i.ids),this.loading=!0,Object(r.J)(i,this.tenantkey_A,this.tenantid_A,this.userName).then(function(i){1001==i.code?(t.del=!1,e.getDevGpsLists(),e.$message({message:e.$t("beacon.deletesuccess"),type:"success"}),e.loading=!1):(e.$message({message:"zh"==e.$store.state.i18n?i.msg:i.enMsg,type:"error"}),e.loading=!1)})},getDevGpsLists:function(){var t=this;Object(r._43)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size)})}},beforeMount:function(){1==this.$store.state.intoProjectprojectType?this.searchList={projectid:this.$store.state.intoProjectid,deveui:"",devetype:1,postype:1,groundid:"",begintime:"",endtime:"",page:1,count:20}:2==this.$store.state.intoProjectprojectType&&(this.searchList={projectid:this.$store.state.intoProjectid,deveui:"",devetype:2,postype:1,groundid:"",begintime:"",endtime:"",page:1,count:20}),this.getDevGpsLists()}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:5!=t.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[o("div",{staticClass:"menu_header"},[o("Menu")],1),t._v(" "),o("div",{staticClass:"content"},[o("el-container",{staticClass:"asi"},[o("el-aside",[o("Project")],1),t._v(" "),o("el-main",[o("div",{staticClass:"project_input"},[3==t.contrForPrionum||4==t.contrForPrionum?o("el-breadcrumb",{staticStyle:{"margin-left":"0"},attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/projectmanagement"}}},[t._v(t._s(t.$t("myorderde.projectmanagement")))]),t._v(" "),o("el-breadcrumb-item",[t._v(t._s(t.intoProjectName))]),t._v(" "),o("el-breadcrumb-item",[t._v(t._s(t.$t("Breadcrumb.Locationdata")))])],1):t._e(),t._v(" "),o("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap","justify-content":"end"},attrs:{model:t.searchList}},[o("el-form-item",{staticStyle:{display:"flex","margin-right":"2%"},attrs:{label:t.$t("floormanagement.device")}},[o("el-input",{attrs:{placeholder:t.$t("staffmanagement.text")},model:{value:t.searchList.deveui,callback:function(e){t.$set(t.searchList,"deveui",e)},expression:"searchList.deveui"}})],1),t._v(" "),o("el-form-item",{staticStyle:{display:"flex","margin-right":"2%"},attrs:{label:t.$t("floormanagement.Floornumber")}},[o("el-input",{attrs:{placeholder:t.$t("staffmanagement.text")},model:{value:t.searchList.groundid,callback:function(e){t.$set(t.searchList,"groundid",e)},expression:"searchList.groundid"}})],1),t._v(" "),o("el-form-item",{staticStyle:{display:"flex","margin-right":"2%"},attrs:{label:t.$t("locationoutdoor.time")}},[o("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":t.$t("locationoutdoorh.to"),"start-placeholder":t.$t("locationoutdoorh.starttime"),"end-placeholder":t.$t("locationoutdoorh.endtime")},model:{value:t.tasktime,callback:function(e){t.tasktime=e},expression:"tasktime"}})],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-left":"0"}},[o("el-button",{staticClass:"querry",attrs:{type:"primary"},on:{click:function(e){return t.searchInfo()}}},[t._v(t._s(t.$t("locationoutdoorh.search")))]),t._v(" "),o("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.clearBtn()}}},[t._v(t._s(t.$t("locationoutdoorh.reset")))]),t._v(" "),o("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.delDevGpsList()}}},[t._v(t._s(t.$t("inspection.batchdeletion")))])],1)],1)],1),t._v(" "),o("div",[o("el-table",{ref:"multipleTable",staticStyle:{width:"98%","text-align":"center","margin-left":"2%"},attrs:{data:t.tableData,border:"","highlight-current-row":"","max-height":"660"},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{property:"deveui",label:t.$t("floormanagement.deviceid"),"show-overflow-tooltip":"",align:"center","min-width":"160"}}),t._v(" "),o("el-table-column",{attrs:{property:"devtypestr",label:t.$t("floormanagement.DeviceType"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{property:"postypestr",label:t.$t("LocationIndoorHis.Locationtype"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{property:"groundid",label:t.$t("LocationIndoorHis.Floornumber"),"show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{property:"rssi",label:"Rssi","show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{property:"x",label:"X","show-overflow-tooltip":"",align:"center","min-width":"160"}}),t._v(" "),o("el-table-column",{attrs:{property:"y",label:"Y","show-overflow-tooltip":"",align:"center","min-width":"160"}}),t._v(" "),o("el-table-column",{attrs:{property:"gpstime",label:t.$t("LocationIndoorHis.Positioningtime"),"show-overflow-tooltip":"",formatter:t.formatDateGpstime,align:"center","min-width":"170"}}),t._v(" "),1==t.contrForPrionum||2==t.contrForPrionum||3==t.contrForPrionum||1==t.delprio?o("el-table-column",{attrs:{fixed:"right",label:t.$t("myorder.operate"),align:"center","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("warning.delete"),placement:"top"}},[o("el-button",{staticClass:"edits",attrs:{type:"danger"},on:{click:function(i){return t.DelDevCommand(e.$index)}}},[o("img",{attrs:{src:i("B32J")}})])],1)]}}],null,!1,3286482521)}):t._e()],1),t._v(" "),o("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[o("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":20},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("LocationIndoorHis.text2"),visible:t.del},on:{"update:visible":function(e){t.del=e}}},[o("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{data:t.deleteData,"max-height":"660",stripe:""}},[o("el-table-column",{attrs:{property:"deveui",label:t.$t("floormanagement.deviceid"),"show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{property:"devtypestr",label:t.$t("floormanagement.DeviceType"),"show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{property:"postypestr",label:t.$t("LocationIndoorHis.Locationtype"),"show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{property:"groundid",label:t.$t("LocationIndoorHis.Floornumber"),"show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{property:"rssi",label:"Rssi","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{property:"x",label:"X","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{property:"y",label:"Y","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{property:"gpstime",label:t.$t("LocationIndoorHis.Positioningtime"),"show-overflow-tooltip":"",formatter:t.formatDateGpstime,"min-width":"130"}})],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.del=!1,t.loading=!1}}},[t._v(t._s(t.$t("terminal.cancel")))]),t._v(" "),o("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.deleteTrue}},[t._v(t._s(t.$t("terminal.confirm")))])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var u=i("VU/8")(l,c,!1,function(t){i("ZzVA")},"data-v-518c971e",null);e.default=u.exports}});
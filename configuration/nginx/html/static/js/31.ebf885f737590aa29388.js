webpackJsonp([31],{eIlw:function(t,e){},fkiV:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("PO8r"),n=i("CTnB"),a=i("3zDK"),o=i("s0MJ"),r=i("c2Ch"),m=(i("ktr9"),i("czjk")),c=i("trid"),d=i("7rnj"),p=i("flqW"),l=i("Lfyu"),h=i("/LWt"),u=(i("nq2H"),i("T18w"),i("Umvz"),i("WMwB"),i("Mjwz"),i("zOBh"),i("kZ1N"),i("TDso"),i("2YZ9"),i("lUmj"),{components:{Menu:s.a,Project:n.a},name:"LocationHistorical",data:function(){return{contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,intoProjectprojectType:this.$store.state.intoProjectprojectType,intoGroundImg:this.$store.state.intoGroundImg,intoGroundId:this.$store.state.intoGroundId,map:null,mapName:"allmap",pickerOptions:{shortcuts:[{text:this.$t("terminal.pickeroptions4"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions5"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-1728e5),t.$emit("pick",[i,e])}},{text:this.$t("terminal.pickeroptions6"),onClick:function(t){var e=new Date,i=new Date;i.setTime(i.setHours(0,0,0,0)-5184e5),t.$emit("pick",[i,e])}}]},tasktime:[(new Date).getTime()-(36e5-1),new Date],begingTime:"",endTime:"",searchList:{},locationHisList:""}},methods:{goProject:function(){this.$router.push("/projectmanagement")},getDevGpsLists:function(){Object(r._43)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){})},searchInfo:function(){var t=this;if(""!=this.searchList.deveui){if(this.tasktime&&this.tasktime.length>0){if(t.begingTime=t.tasktime[0],t.endTime=t.tasktime[1],(t.endTime-t.begingTime)/1e3/60/60/24>7)return void t.$message({message:this.$t("tet.tet1"),type:"warning"});t.begingTime=t.begingTime&&""!=t.begingTime?o.a.formatDate.format(new Date(t.begingTime),"yyyy-MM-dd hh:mm:ss"):"",t.endTime=t.endTime&&""!=t.endTime?o.a.formatDate.format(new Date(t.endTime),"yyyy-MM-dd hh:mm:ss"):"",t.begingTime.length>0&&t.endTime.length>0&&(t.begingTime=Date.parse(new Date(t.begingTime))/1e3,t.endTime=Date.parse(new Date(t.endTime))/1e3),this.searchList.begintime=this.begingTime,this.searchList.endtime=this.endTime,Object(r._43)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.locationHisList=e.data.list)})}}else this.$message({message:this.$t("tet.tet"),type:"warning"})},mapint:function(t,e){var i=this,s=[0,0,t,e],n=new d.a({code:"xkcd-image",units:"pixels",extent:s});setTimeout(function(){var o=void 0,r=void 0;t>1399&&e>699?(o=1400,r=700):t>1399&&e<700?(o=1400,r=e):t<1400&&e>699?(r=700,o=t):t<1400&&e<700&&(o=t,r=e),i.$refs.map.style.width=o+"px",i.$refs.map.style.height=r+"px",i.map=new c.a({layers:[new m.a({source:new p.a({url:(a.a.host&&a.a.host.endsWith("/")?a.a.host:a.a.host+"/")+"indoormap/"+i.intoGroundImg,projection:n,imageExtent:s})})],target:i.mapName,view:new l.a({projection:n,center:Object(h.y)(s),zoom:2,maxZoom:6,extent:[0,0,t,e]})})},0)},drawLine:function(){}},mounted:function(){this.mapint(this.$store.state.intoGroundImgWidth,this.$store.state.intoGroundImgHeight),1==this.$store.state.intoProjectprojectType?this.searchList={projectid:this.$store.state.intoProjectid,deveui:"",devetype:1,postype:1,groundid:this.$store.state.intoGroundId,begintime:"",endtime:"",page:"",count:""}:2==this.$store.state.intoProjectprojectType&&(this.searchList={projectid:this.$store.state.intoProjectid,deveui:"",devetype:2,postype:1,groundid:this.$store.state.intoGroundId,begintime:"",endtime:"",page:"",count:""})}}),g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"project_input"},[i("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"},attrs:{model:t.searchList}},[i("el-form-item",{staticStyle:{display:"flex","margin-left":"2%","margin-right":"2%"},attrs:{label:t.$t("floormanagement.device")}},[i("el-input",{attrs:{placeholder:t.$t("locationoutdoorh.text")},model:{value:t.searchList.deveui,callback:function(e){t.$set(t.searchList,"deveui",e)},expression:"searchList.deveui"}})],1),t._v(" "),i("el-form-item",{staticStyle:{display:"flex","margin-left":"0","margin-right":"2%"},attrs:{label:t.$t("locationoutdoor.time")}},[i("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":t.$t("locationoutdoorh.to"),"start-placeholder":t.$t("locationoutdoorh.starttime"),"end-placeholder":t.$t("locationoutdoorh.endtime")},model:{value:t.tasktime,callback:function(e){t.tasktime=e},expression:"tasktime"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-left":"0"}},[i("el-button",{staticClass:"querry",attrs:{type:"primary"},on:{click:function(e){return t.searchInfo()}}},[t._v(t._s(t.$t("mapmanagements.search")))]),t._v(" "),i("el-button",{staticClass:"reset",attrs:{type:"primary"}},[t._v(t._s(t.$t("mapmanagements.reset")))])],1)],1)],1),t._v(" "),i("el-main",[i("div",{staticClass:"mmm"},[i("div",{ref:"map",attrs:{id:"allmap"}}),t._v(" "),i("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[i("a",{staticClass:"ol-popup-closer",attrs:{href:"#",id:"popup-closer"}}),t._v(" "),i("div",{attrs:{id:"popup-content"}})])])])],1)},staticRenderFns:[]};var f=i("VU/8")(u,g,!1,function(t){i("eIlw")},"data-v-f2150aaa",null);e.default=f.exports}});
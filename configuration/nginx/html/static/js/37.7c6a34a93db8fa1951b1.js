webpackJsonp([37],{KHjp:function(t,e){},p8Fl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),n=a.n(s),i=a("nQqC"),r=a("PO8r"),l=a("k4/M"),o=a("c2Ch"),d={components:{Menu:r.a,Devicemanagement:l.a,basecard:i.a},name:"NS",data:function(){return{i8n:this.$store.state.i18n,contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,loading:!1,searchList:{status:"",page:1,count:20},pageCount:20,tableData:[],currentPage1:1,total:0,add:!1,addData:{domain:"",port:"",usrname:"",token:"",memo:"",ip:"",name:"",emails:"",cert:""},certList:[{index:1,value:"Yes"},{index:2,value:"No"}],statuList:[{index:1,value:this.$t("home.Online")},{index:2,value:this.$t("home.Offline")}],addRules:{name:[{required:!0,message:this.$t("ns.text"),trigger:"blur"}],port:[{required:!0,message:this.$t("ns.addnsrules1"),trigger:"blur"}],usrname:[{required:!0,message:this.$t("ns.addnsrules3"),trigger:"blur"}],token:[{required:!0,message:this.$t("ns.text1"),trigger:"blur"}],ip:[{required:!0,message:this.$t("ns.text2"),trigger:"blur"}],domain:[{required:!0,message:this.$t("ns.text3"),trigger:"blur"}]},edit:!1,editData:{domain:"",port:"",usrname:"",token:"",memo:"",id:"",ip:"",name:"",emails:"",cert:""}}},methods:{datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var a=new Date(t);return a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+" "+(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+e(a.getMinutes())+":"+e(a.getSeconds())},formatDateStatustime:function(t,e){if(null==t.statustime||0==t.statustime)return"";var a=new Date(1e3*parseInt(t.statustime)).toUTCString();return this.datetimecut(a)},handleCurrentChange:function(t){this.searchList.page=t,this.searchList.count=this.pageCount,this.getNsLists()},handleSizeChange:function(t){this.pageCount=t,this.searchList.count=t,this.searchList.page=1,this.currentPage1=1,this.getNsLists()},searchInfo:function(){var t=this;this.searchList.page=1,this.currentPage1=1,Object(o._74)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.tableData=e.data.list,t.total=e.data.size,t.total>0?t.$message({message:t.$t("nsconfig.searchsuccess"),type:"success"}):0==t.total&&t.$message({message:t.$t("nsconfig.nodata"),type:"warning"})):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},clearBtn:function(){this.currentPage1=1,this.searchList={status:"",page:1,count:20},this.getNsLists()},addNS:function(){this.add=!0,this.addData={domain:"",port:"",usrname:"",token:"",memo:"",ip:"",name:"",emails:"",cert:""}},addCancel:function(t){this.add=!1,this.loading=!1,this.$refs[t].resetFields()},addTrue:function(t){var e=this,a=this;this.$refs[t].validate(function(s){if(!s)return!1;e.loading=!0,Object(o.q)(a.addData,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){1001==e.code?(a.add=!1,a.searchList.page=1,a.currentPage1=1,a.getNsLists(),a.$message({message:a.$t("ns.addsuccess"),type:"success"}),a.loading=!1,a.$refs[t].resetFields()):(a.$message({message:"zh"==a.$store.state.i18n?e.msg:e.enMsg,type:"error"}),a.loading=!1)})})},getNsLists:function(){var t=this;Object(o._74)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size)})},nsEdit:function(t){this.editData.domain=this.tableData[t].domain,this.editData.port=this.tableData[t].port,this.editData.usrname=this.tableData[t].usrname,this.editData.token=this.tableData[t].token,this.editData.memo=this.tableData[t].memo,this.editData.id=this.tableData[t].id,this.editData.ip=this.tableData[t].ip,this.editData.name=this.tableData[t].name,this.editData.emails=this.tableData[t].emails,this.editData.cert=this.tableData[t].cert,this.edit=!0},editCancel:function(t){this.edit=!1,this.loading=!1,this.$refs[t].resetFields()},editTrue:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return!1;e.loading=!0,Object(o._178)(a.editData,a.tenantkey_A,a.tenantid_A,a.userName).then(function(t){1001==t.code?(a.edit=!1,a.getNsLists(),a.$message({message:a.$t("ns.editsuccess"),type:"success"}),a.loading=!1):(a.$message({message:"zh"==a.$store.state.i18n?t.msg:t.enMsg,type:"error"}),a.loading=!1)})})},nsDele:function(t){var e=this;this.$confirm(this.$t("ns.deletemsg"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var a={id:e.tableData[t].id,domain:e.tableData[t].domain};Object(o.U)(a,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(e.getNsLists(),e.$message({message:e.$t("ns.deletesuccess"),type:"success"})):$message({message:"zh"==e.$store.state.i18n?t.msg:t.enMsg,type:"error"})})})}},beforeMount:function(){this.getNsLists()},watch:{"$i18n.locale":function(){this.i8n=this.$store.state.i18n,n()(this.$data.addRules,this.$options.data.call(this).addRules),n()(this.$data.statuList,this.$options.data.call(this).statuList)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:5!=t.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[s("div",{staticClass:"menu_header"},[s("Menu")],1),t._v(" "),s("div",{staticClass:"content"},[s("el-container",{staticClass:"asi"},[s("el-aside",[s("Devicemanagement")],1),t._v(" "),s("el-main",[s("div",{staticClass:"device_input"},[s("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"}},[s("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("warning.state")}},[s("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{clearable:"",filterable:"",placeholder:t.$t("terminal.choose")},model:{value:t.searchList.status,callback:function(e){t.$set(t.searchList,"status",e)},expression:"searchList.status"}},t._l(t.statuList,function(t){return s("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),s("el-form-item",{staticStyle:{"margin-left":"2%"}},[s("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(e){return t.searchInfo()}}},[t._v("\n                "+t._s(t.$t("nsconfig.search")))]),s("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.clearBtn()}}},[t._v("\n                "+t._s(t.$t("nsconfig.reset")))]),t._v(" "),1==t.contrForPrionum?s("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){return t.addNS()}}},[t._v(t._s(t.$t("ns.addns")))]):t._e()],1)],1)],1),t._v(" "),s("div",[s("el-table",{ref:"multipleTable",staticStyle:{width:"98%","text-align":"center","margin-left":"2%"},attrs:{data:t.tableData,"max-height":"660",border:"","highlight-current-row":""}},[s("el-table-column",{attrs:{property:"id",label:"ID","show-overflow-tooltip":"","min-width":"50",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"name",label:t.$t("ns.name"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"domain",label:t.$t("ns.domain"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"ip",label:"IP","show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"port",label:t.$t("ns.port"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"statusstr",label:t.$t("terminal.state"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"statustime",label:t.$t("terminal.Statusupdatetime"),"show-overflow-tooltip":"","min-width":"110",align:"center",formatter:t.formatDateStatustime}}),t._v(" "),s("el-table-column",{attrs:{property:"certstr",label:t.$t("ns.cert1"),"show-overflow-tooltip":"","min-width":"30",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"usrname",label:t.$t("ns.usrname"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"token",label:t.$t("ns.password"),"show-overflow-tooltip":"","min-width":"77",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"memo",label:t.$t("ns.memo"),"min-width":"77",align:"center"}}),t._v(" "),1==t.contrForPrionum?s("el-table-column",{attrs:{fixed:"right",label:t.$t("ns.operate"),width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-dropdown",{attrs:{size:"mini",type:"primary",trigger:"click"}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("staff.operate"),placement:"top"}},[s("el-button",{staticClass:"icon_button",attrs:{type:"primary"}},[s("img",{attrs:{src:a("VJ6t")}})])],1),t._v(" "),s("el-dropdown-menu",{staticClass:"selects",staticStyle:{"background-color":"rgb(219, 222, 231)"},attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[1==t.contrForPrionum?s("el-button",{staticClass:"edits",attrs:{size:"mini"},on:{click:function(a){return t.nsEdit(e.$index,t.tableData)}}},[t._v(t._s(t.$t("ns.edit")))]):t._e()],1),t._v(" "),s("el-dropdown-item",{staticStyle:{"margin-top":"4%","background-color":"rgb(219, 222, 231)"}},[1==t.contrForPrionum?s("el-button",{staticClass:"dels1",attrs:{size:"mini"},on:{click:function(a){return t.nsDele(e.$index)}}},[t._v(t._s(t.$t("ns.delete")))]):t._e()],1)],1)],1)]}}],null,!1,1569025889)}):t._e()],1),t._v(" "),s("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[s("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":20},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1),t._v(" "),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.$t("ns.addns1"),width:"30%",visible:t.add},on:{"update:visible":function(e){t.add=e},close:function(e){return t.addCancel("addData")}}},[s("el-form",{ref:"addData",staticStyle:{"text-align":"left"},attrs:{model:t.addData,"label-width":"130px",rules:t.addRules}},[s("el-form-item",{attrs:{label:t.$t("ns.Name"),prop:"name"}},[s("el-input",{attrs:{placeholder:t.$t("ns.text")},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.Domainname"),prop:"domain"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules")},model:{value:t.addData.domain,callback:function(e){t.$set(t.addData,"domain",e)},expression:"addData.domain"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"IP：",prop:"ip"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules")},model:{value:t.addData.ip,callback:function(e){t.$set(t.addData,"ip",e)},expression:"addData.ip"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.port1"),prop:"port"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules1")},model:{value:t.addData.port,callback:function(e){t.$set(t.addData,"port",e)},expression:"addData.port"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.usrname1"),prop:"usrname"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules3")},model:{value:t.addData.usrname,callback:function(e){t.$set(t.addData,"usrname",e)},expression:"addData.usrname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.password1"),prop:"token"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules31")},model:{value:t.addData.token,callback:function(e){t.$set(t.addData,"token",e)},expression:"addData.token"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("usercenter.usermail1"),prop:""}},[s("el-input",{attrs:{placeholder:t.$t("register.enterEmail")},model:{value:t.addData.emails,callback:function(e){t.$set(t.addData,"emails",e)},expression:"addData.emails"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.cert"),prop:""}},[s("el-select",{attrs:{clearable:"",placeholder:t.$t("warning.text3")},model:{value:t.addData.cert,callback:function(e){t.$set(t.addData,"cert",e)},expression:"addData.cert"}},t._l(t.certList,function(t){return s("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.memo1")}},[s("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:"64"},model:{value:t.addData.memo,callback:function(e){t.$set(t.addData,"memo",e)},expression:"addData.memo"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){return t.addCancel("addData")}}},[t._v(t._s(t.$t("terminal.cancel")))]),t._v(" "),s("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.addTrue("addData")}}},[t._v("\n              "+t._s(t.$t("terminal.confirm"))+"\n            ")])],1)],1),t._v(" "),s("el-dialog",{staticClass:"edit",staticStyle:{"text-align":"center"},attrs:{title:t.$t("ns.editns"),visible:t.edit,width:"30%"},on:{"update:visible":function(e){t.edit=e},close:function(e){return t.editCancel("editData")}}},[s("el-form",{ref:"editData",staticClass:"demo-ruleForm",staticStyle:{"text-align":"left","margin-left":"10px"},attrs:{model:t.editData,"label-width":"130px",rules:t.addRules}},[s("el-form-item",{attrs:{label:t.$t("ns.Name"),prop:"name"}},[s("el-input",{attrs:{placeholder:t.$t("ns.text")},model:{value:t.editData.name,callback:function(e){t.$set(t.editData,"name",e)},expression:"editData.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.Domainname"),prop:"domain"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules")},model:{value:t.editData.domain,callback:function(e){t.$set(t.editData,"domain",e)},expression:"editData.domain"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"IP：",prop:"ip"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules")},model:{value:t.editData.ip,callback:function(e){t.$set(t.editData,"ip",e)},expression:"editData.ip"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.port1"),prop:"port"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules1")},model:{value:t.editData.port,callback:function(e){t.$set(t.editData,"port",e)},expression:"editData.port"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.usrname1"),prop:"usrname"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules3")},model:{value:t.editData.usrname,callback:function(e){t.$set(t.editData,"usrname",e)},expression:"editData.usrname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.password1"),prop:"token"}},[s("el-input",{attrs:{placeholder:t.$t("ns.addnsrules31")},model:{value:t.editData.token,callback:function(e){t.$set(t.editData,"token",e)},expression:"editData.token"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("usercenter.usermail1"),prop:""}},[s("el-input",{attrs:{placeholder:t.$t("register.enterEmail")},model:{value:t.editData.emails,callback:function(e){t.$set(t.editData,"emails",e)},expression:"editData.emails"}})],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.cert"),prop:""}},[s("el-select",{attrs:{clearable:"",placeholder:t.$t("warning.text3")},model:{value:t.editData.cert,callback:function(e){t.$set(t.editData,"cert",e)},expression:"editData.cert"}},t._l(t.certList,function(t){return s("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:t.$t("ns.memo1")}},[s("el-input",{attrs:{type:"textarea","show-word-limit":"",maxlength:"64"},model:{value:t.editData.memo,callback:function(e){t.$set(t.editData,"memo",e)},expression:"editData.memo"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){return t.editCancel("editData")}}},[t._v(t._s(t.$t("terminal.cancel")))]),t._v(" "),s("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.editTrue("editData")}}},[t._v("\n              "+t._s(t.$t("terminal.confirm")))])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(t){a("KHjp")},"data-v-68f6ff1e",null);e.default=u.exports}});
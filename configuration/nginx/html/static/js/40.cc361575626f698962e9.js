webpackJsonp([40],{E3SU:function(t,e){},"tU/j":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),n=a.n(s),i=a("PO8r"),o=a("HY7V"),r=a("c2Ch"),l={components:{Menu:i.a,Data:o.a},name:"DownLink",data:function(){return{i8n:this.$store.state.i18n,contrForPrionum:this.$store.state.userInfo.prionum,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,delprio:this.$store.state.userInfo.delprio,tableData:[],multipleSelection:[],currentPage1:1,total:0,tenantidData:[],searchList:{deveui:"",tenantid:this.$store.state.userInfo.tenantid,type:"",msgstatus:"",page:1,count:20},pageCount:20,del:!1,loading:!1,deleteData:[],typeList:[{index:1,value:"Param Configuration"},{index:2,value:"Position Request"},{index:3,value:"Reset"},{index:4,value:"Turn Off"},{index:5,value:"Search"},{index:6,value:"Dismiss Search"},{index:7,value:"Positioning Beacon List"},{index:8,value:"Asset Beacon List"},{index:9,value:"Pass-through Beacon list"},{index:10,value:"History BLE Config List"},{index:11,value:"Positioning Beacon UUID"},{index:12,value:"Asset Beacon UUID"},{index:13,value:"Pass-through Beacon Filter"},{index:14,value:"History BLE Config"},{index:15,value:"Time Synchronization"}],msgstatusList:[{index:1,value:this.$t("downlink.wait")},{index:2,value:this.$t("downlink.waitconfirm")},{index:3,value:this.$t("downlink.success")},{index:4,value:this.$t("downlink.fail")}]}},methods:{datetimecut:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var a=new Date(t);return a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+" "+(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+e(a.getMinutes())+":"+e(a.getSeconds())},formatDateCreatime:function(t,e){if(null==t.creatime||0==t.creatime)return"";var a=new Date(1e3*parseInt(t.creatime)).toUTCString();return this.datetimecut(a)},formatDateSendtime:function(t,e){if(null==t.sendtime||0==t.sendtime)return"";var a=new Date(1e3*parseInt(t.sendtime)).toUTCString();return this.datetimecut(a)},formatDateStatustime:function(t,e){if(null==t.statustime||0==t.statustime)return"";var a=new Date(1e3*parseInt(t.statustime)).toUTCString();return this.datetimecut(a)},handleCurrentChange:function(t){this.searchList.page=t,this.searchList.count=this.pageCount,this.getDevCommandLists()},handleSizeChange:function(t){this.pageCount=t,this.searchList.count=t,this.searchList.page=1,this.currentPage1=1,this.getDevCommandLists()},getDevCommandLists:function(){var t=this;Object(r._37)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code&&(t.tableData=e.data.list,t.total=e.data.size)})},searchInfo:function(){var t=this;this.searchList.page=1,this.searchList.count=this.pageCount,this.currentPage1=1,Object(r._37)(this.searchList,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){1001==e.code?(t.tableData=e.data.list,t.total=e.data.size,t.total>0?t.$message({message:t.$t("downlink.searchsuccess"),type:"success"}):0==t.total&&t.$message({message:t.$t("downlink.nodata"),type:"warning"})):t.$message({message:"zh"==t.$store.state.i18n?e.msg:e.enMsg,type:"error"})})},clearBtn:function(){this.currentPage1=1,1==this.$store.state.userInfo.prionum||2==this.$store.state.userInfo.prionum?this.searchList={deveui:"",tenantid:"",type:"",msgstatus:"",page:1,count:this.pageCount}:this.searchList={deveui:"",tenantid:this.tenantid_A,type:"",msgstatus:"",page:1,count:this.pageCount},this.getDevCommandLists()},DelDevCommand:function(t){var e=this;if(5==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio||4==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio)this.$message({message:this.$t("staffmanagement.permissiondelete"),type:"warning"});else{var a=this;this.$confirm(this.$t("downlink.tet")+this.tableData[t].deveui+this.$t("downlink.tet1"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var s={ids:[e.tableData[t].id]};Object(r.I)(s,e.tenantkey_A,e.tenantid_A,e.userName).then(function(t){1001==t.code?(a.searchList.page=1,a.currentPage1=1,a.getDevCommandLists(),a.$message({message:a.$t("downlink.deletesuccess"),type:"success"})):a.$message({message:"zh"==a.$store.state.i18n?t.msg:t.enMsg,type:"error"})})}).catch(function(){})}},handleSelectionChange:function(t){this.multipleSelection=t},delDevCommands:function(t){0!=this.multipleSelection.length?(this.deleteData=this.multipleSelection,this.del=!0):this.$message({message:this.$t("downlink.deletedownlink1"),type:"warning"})},deleteTrue:function(){var t=this;if(5==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio||4==this.$store.state.userInfo.prionum&&2==this.$store.state.userInfo.delprio)this.$message({message:this.$t("staffmanagement.permissiondelete"),type:"warning"});else{for(var e=this,a={ids:[]},s=0;s<this.deleteData.length;s++)a.ids.push(this.deleteData[s].id);this.loading=!0,Object(r.I)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(a){1001==a.code?(t.del=!1,e.searchList.page=1,e.currentPage1=1,e.getDevCommandLists(),e.$message({message:e.$t("downlink.deletesuccess"),type:"success"}),e.loading=!1):(e.$message({message:"zh"==e.$store.state.i18n?a.msg:a.enMsg,type:"error"}),e.loading=!1)})}},getCustomerNames:function(){var t=this;Object(r._33)({beginlevel:1,endlevel:3},this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){t.tenantidData=e.data})}},beforeMount:function(){1!=this.$store.state.userInfo.prionum&&2!=this.$store.state.userInfo.prionum||(this.searchList.tenantid="",this.getCustomerNames()),this.getDevCommandLists()},watch:{"$i18n.locale":function(){this.i8n=this.$store.state.i18n,n()(this.$data.msgstatusList,this.$options.data.call(this).msgstatusList)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:5!=t.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[s("div",{staticClass:"menu_header"},[s("Menu")],1),t._v(" "),s("div",{staticClass:"content"},[s("el-container",{staticClass:"asi"},[s("el-aside",[s("Data")],1),t._v(" "),s("el-main",[s("div",{staticClass:"ns_input"},[s("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"flex","white-space":"nowrap"},attrs:{model:t.searchList}},[s("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("downlink.deveui1")}},[s("el-input",{staticStyle:{width:"95%",float:"left"},attrs:{placeholder:t.$t("terminal.tit27")},model:{value:t.searchList.deveui,callback:function(e){t.$set(t.searchList,"deveui",e)},expression:"searchList.deveui"}})],1),t._v(" "),s("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("downlink.msgtype1")}},[s("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{placeholder:t.$t("terminal.choose")},model:{value:t.searchList.type,callback:function(e){t.$set(t.searchList,"type",e)},expression:"searchList.type"}},t._l(t.typeList,function(t){return s("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),s("el-form-item",{staticStyle:{display:"flex",width:"15%","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("downlink.msgtype2")}},[s("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{placeholder:t.$t("terminal.choose")},model:{value:t.searchList.msgstatus,callback:function(e){t.$set(t.searchList,"msgstatus",e)},expression:"searchList.msgstatus"}},t._l(t.msgstatusList,function(t){return s("el-option",{key:t.index,attrs:{label:t.value,value:t.index}})}),1)],1),t._v(" "),1==t.contrForPrionum||2==t.contrForPrionum?s("el-form-item",{staticStyle:{display:"flex",width:"18%","margin-left":"2%","margin-right":"0"},attrs:{label:t.$t("downlink.company1")}},[s("el-select",{staticStyle:{width:"95%",float:"left"},attrs:{clearable:"",filterable:"",placeholder:t.$t("terminal.choose")},model:{value:t.searchList.tenantid,callback:function(e){t.$set(t.searchList,"tenantid",e)},expression:"searchList.tenantid"}},t._l(t.tenantidData,function(t){return s("el-option",{key:t.tenantid,attrs:{label:t.username,value:t.tenantid}})}),1)],1):t._e(),t._v(" "),s("el-form-item",{staticStyle:{float:"left","margin-left":"0%"}},[s("el-button",{staticClass:"query",attrs:{type:"primary"},on:{click:function(e){return t.searchInfo()}}},[t._v(t._s(t.$t("heartbeat.search")))]),s("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.clearBtn()}}},[t._v(t._s(t.$t("heartbeat.reset")))]),1==t.contrForPrionum||2==t.contrForPrionum||3==t.contrForPrionum||1==t.delprio?s("el-button",{staticClass:"reset",attrs:{type:"primary"},on:{click:function(e){return t.delDevCommands()}}},[t._v(t._s(t.$t("test.Batchdelete")))]):t._e()],1)],1)],1),t._v(" "),s("div",[s("el-table",{ref:"multipleTable",staticStyle:{width:"97%","text-align":"center","margin-left":"2%"},attrs:{data:t.tableData,border:"","highlight-current-row":"","max-height":"660"},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),1==t.contrForPrionum||2==t.contrForPrionum?s("el-table-column",{attrs:{property:"customername",label:t.$t("downlink.customername"),"show-overflow-tooltip":"",align:"center"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{property:"deveui",label:t.$t("downlink.deveui"),"show-overflow-tooltip":"","header-align":"center","min-width":"90"}}),t._v(" "),s("el-table-column",{attrs:{property:"typestr",label:t.$t("downlink.typestr"),"show-overflow-tooltip":"",align:"center","min-width":"110"}}),t._v(" "),s("el-table-column",{attrs:{property:"msg",label:t.$t("downlink.msg"),"show-overflow-tooltip":"","header-align":"center","min-width":"300"}}),t._v(" "),s("el-table-column",{attrs:{property:"zh"==t.i8n?"msgstatustr":"enmsgstatus",label:t.$t("downlink.msgstatustr"),"show-overflow-tooltip":"","min-width":"60",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"creatime",label:t.$t("downlink.creatime"),"show-overflow-tooltip":"",formatter:t.formatDateCreatime,align:"center","min-width":"110"}}),t._v(" "),s("el-table-column",{attrs:{property:"sendtime",label:t.$t("downlink.sendtime"),"show-overflow-tooltip":"",formatter:t.formatDateSendtime,align:"center","min-width":"110"}}),t._v(" "),s("el-table-column",{attrs:{property:"statustime",label:t.$t("downlink.statustime"),"show-overflow-tooltip":"",formatter:t.formatDateStatustime,align:"center","min-width":"110"}}),t._v(" "),1==t.contrForPrionum||2==t.contrForPrionum||3==t.contrForPrionum||1==t.delprio?s("el-table-column",{attrs:{fixed:"right",label:t.$t("downlink.operate"),align:"center","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("warning.delete"),placement:"top"}},[s("el-button",{staticClass:"edits",attrs:{type:"danger"},on:{click:function(a){return t.DelDevCommand(e.$index)}}},[s("img",{attrs:{src:a("B32J")}})])],1)]}}],null,!1,3286482521)}):t._e()],1),t._v(" "),s("div",{staticClass:"block",staticStyle:{"text-align":"center",width:"100%","margin-top":"1%"}},[s("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-size":20},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.$t("downlink.msgdelete"),visible:t.del},on:{"update:visible":function(e){t.del=e}}},[s("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{data:t.deleteData,"max-height":"660",stripe:""}},[1==t.contrForPrionum||2==t.contrForPrionum?s("el-table-column",{attrs:{property:"customername",label:t.$t("downlink.customername"),"show-overflow-tooltip":""}}):t._e(),t._v(" "),s("el-table-column",{attrs:{property:"deveui",label:t.$t("downlink.deveui"),"show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{property:"typestr",label:t.$t("downlink.typestr"),"show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{property:"msg",label:t.$t("downlink.msg"),"show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{property:"zh"==t.i8n?"msgstatustr":"enmsgstatus",label:t.$t("downlink.msgstatustr"),"show-overflow-tooltip":"","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{property:"creatime",label:t.$t("downlink.creatime"),"show-overflow-tooltip":"",formatter:t.formatDateCreatime,"min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{property:"sendtime",label:t.$t("downlink.sendtime"),"show-overflow-tooltip":"",formatter:t.formatDateSendtime,"min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{property:"statustime",label:t.$t("downlink.statustime"),"show-overflow-tooltip":"",formatter:t.formatDateStatustime,"min-width":"150"}})],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.del=!1,t.loading=!1}}},[t._v(t._s(t.$t("terminal.cancel")))]),t._v(" "),s("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.deleteTrue}},[t._v(t._s(t.$t("terminal.confirm")))])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("E3SU")},"data-v-46302a96",null);e.default=u.exports}});
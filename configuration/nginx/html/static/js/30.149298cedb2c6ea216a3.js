webpackJsonp([30],{LxAr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("mvHQ"),a=s.n(r),i=s("PO8r"),n=s("c+aE"),o=s("c2Ch"),l={components:{Menu:i.a,System:n.a},name:"UserCenter",data:function(){var e=this;return{i8n:this.$store.state.i18n,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,intoProjectid:this.$store.state.intoProjectid,userName:this.$store.state.userInfo.username,contrForPrionum:this.$store.state.userInfo.prionum,delprio:this.$store.state.userInfo.delprio,userInfo:"",labelPosition:"right",loading:!1,deleteUser:"",edit:!1,editData:{username:"",usertel:"",usermail:"",prio:"",country:"",tenantid:"",customername:"",delprio:"",logintime:"",devnum:"",enprio:""},prio:"",passwordTpl:!1,passwordData:{managerkey:"",passwordNew:"",passwordAgain:""},editRules:{usermail:[{required:!0,message:this.$t("tips.emails"),trigger:"blur"},{validator:function(t,s,r){s?/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(s)?r():r(new Error(e.$t("tips.email"))):r()},trigger:"blur"}]},passwordRules:{managerkey:[{required:!0,message:this.$t("usercenter.oldpwdrule"),trigger:"blur"}],passwordNew:[{required:!0,message:this.$t("usercenter.newpwdrule"),trigger:"blur"},{pattern:/^(?!([a-zA-Z]+|\d+)$)[a-zA-Z\d~!@#$%^&*]{6,16}$/,message:this.$t("tips.passwords")}],passwordAgain:[{required:!0,message:this.$t("usercenter.fixpwdrule"),trigger:"blur"},{validator:function(t,s,r){""===s?r(new Error(e.$t("tips.firstPassword"))):s!==e.passwordData.passwordNew?r(new Error(e.$t("tips.secondPassword"))):r()},trigger:"blur"}]},prioList:[{index:1,value:this.$t("usercenter.systemadmin")},{index:2,value:this.$t("usercenter.systemadmin1")},{index:3,value:this.$t("usercenter.companyadmin")},{index:4,value:this.$t("usercenter.companyadmin1")},{index:5,value:this.$t("usercenter.companyuser")},{index:6,value:this.$t("usercenter.companyassets")}]}},methods:{editUser:function(){this.prio=this.userInfo.prio,this.editData.username=this.userInfo.username,this.editData.usertel=this.userInfo.usertel,this.editData.usermail=this.userInfo.usermail,this.editData.prio=this.userInfo.prio,this.editData.country=this.userInfo.country,this.editData.logintime=this.userInfo.logintime,this.editData.delprio=this.userInfo.delprio,this.editData.customername=this.userInfo.customername,this.editData.enprio=this.userInfo.enprio,this.edit=!0},editCancel:function(e){this.edit=!1,this.loading=!1,this.$refs[e].resetFields()},editTrue:function(e){var t=this;switch(this.editData.prio){case"系统管理员":this.editData.prio=1;break;case"系统子管理员":this.editData.prio=2;break;case"企业管理员":this.editData.prio=3;break;case"企业子管理员":this.editData.prio=4;break;case"企业用户":this.editData.prio=5;break;case"资产拥有者":this.editData.prio=6}switch(this.editData.enprio){case"System admin":this.editData.prio=1;break;case"System sub admin":this.editData.prio=2;break;case"Enterprise admin":this.editData.prio=3;break;case"Enterprise sub admin":this.editData.prio=4;break;case"Enterprise user":this.editData.prio=5;break;case"Enterprise asset owner":this.editData.prio=6}var s=this;this.$refs[e].validate(function(r){r&&(t.loading=!0,Object(o._195)(t.editData,t.tenantkey_A,t.tenantid_A,t.userName).then(function(t){1001==t.code?(s.edit=!1,s.getUserCustomerOnes(s.editData.username),s.$message({message:s.$t("usercenter.editsuccess"),type:"success"}),s.loading=!1,s.$refs[e].resetFields()):(s.$message({message:"zh"==s.$store.state.i18n?t.msg:t.enMsg,type:"error"}),s.loading=!1)}))})},getUserCustomerOnes:function(e){var t=this,s={username:e};Object(o._100)(s,this.tenantkey_A,this.tenantid_A,this.userName).then(function(e){t.$store.state.userInfo=e.data,t.userInfo=e.data})},resetUserKeys:function(){this.passwordData={managerkey:"",passwordNew:"",passwordAgain:""},this.passwordTpl=!0,this.$refs.passwordData.resetFields()},passwordTrue:function(e){var t=this;if(!t.passwordData.managerkey)return t.$message({message:this.$t("usercenter.oldpwdrule")}),void(t.loading=!1);if(!t.passwordData.passwordNew||!t.passwordData.passwordAgain||t.passwordData.passwordNew!=t.passwordData.passwordAgain)return t.$message({message:this.$t("usercenter.Differentpwd")}),void(t.loading=!1);if(t.passwordData.passwordNew==t.passwordData.managerkey)return t.$message({message:this.$t("usercenter.Differentpwd1")}),void(t.loading=!1);var s={username:t.userInfo.username,newkey:t.passwordData.passwordNew,managerkey:t.passwordData.managerkey};this.loading=!0,this.$refs.passwordData.validate(function(r){r&&Object(o._133)(s,t.tenantkey_A,t.tenantid_A,t.userName).then(function(s){1001==s.code?(t.passwordTpl=!1,t.$message({message:t.$t("usercenter.editsuccess"),type:"success"}),t.loading=!1,t.$refs[e].resetFields()):(t.$message({message:"zh"==t.$store.state.i18n?s.msg:s.enMsg,type:"error"}),t.loading=!1)})})},logout:function(){var e=this;this.$confirm(this.$t("usercenter.islogout"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning"}).then(function(){var t=e;Object(o._126)({},e.tenantkey_A,e.tenantid_A,e.userName).then(function(s){if(1001==s.code){e.$store.commit("setuserInfo",""),e.$store.state.projectid="",e.$store.commit("resetRoutes"),t.$router.push("/login"),t.$message({message:t.$t("usercenter.logout"),type:"success"});var r=e.$store.state.sosList;for(var a in r)r[a].value.close();sessionStorage.clear(),window.localStorage.clear(),window.location.reload()}else t.$message({message:"zh"==t.$store.state.i18n?s.msg:s.enMsg,type:"error"})})}).catch(function(){e.$message({message:e.$t("usercenter.cancel"),type:"info"})})},userDele:function(){var e=this;this.$prompt(this.$t("usercenter.password"),this.$t("Building.tips"),{confirmButtonText:this.$t("terminal.confirm"),cancelButtonText:this.$t("terminal.cancel"),type:"warning",inputType:"password"}).then(function(t){var s=t.value,r={username:e.userInfo.username,userkey:s},i=e;Object(o._132)(a()(r),e.tenantkey_A,e.tenantid_A,e.userName).then(function(e){1001==e.code?(i.$router.push("/login"),i.$message({message:i.$t("usercenter.logoutsuccess"),type:"success"})):i.$message({message:"zh"==i.$store.state.i18n?e.msg:e.enMsg,type:"error"})})})}},beforeMount:function(){this.userInfo=this.$store.state.userInfo,2==this.$store.state.userInfo.prionum||4==this.$store.state.userInfo.prionum?this.deleteUser=!1:this.deleteUser=!0},watch:{"$i18n.locale":function(){this.i8n=this.$store.state.i18n}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:5!=e.contrForPrionum?"home":"",staticStyle:{height:"100%"}},[5!=e.contrForPrionum?s("div",{staticClass:"menu_header"},[s("Menu")],1):e._e(),e._v(" "),s("div",{staticClass:"content"},[s("el-container",{class:5==e.contrForPrionum?"user":"asi"},[5!=e.contrForPrionum?s("el-aside",[s("System")],1):e._e(),e._v(" "),s("el-main",[s("div",{staticClass:"user_content"},[s("el-tabs",{staticStyle:{width:"100%"},attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:e.$t("usercenter.Userdata")}},[s("el-form",{staticStyle:{display:"flex",width:"100%"},attrs:{"label-position":e.labelPosition,"label-width":"120px",model:e.userInfo}},[s("el-form-item",{staticStyle:{width:"33%"},attrs:{label:e.$t("usercenter.user")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"2%",width:"33%"},attrs:{label:e.$t("usercenter.admintel")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.usertel,callback:function(t){e.$set(e.userInfo,"usertel",t)},expression:"userInfo.usertel"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-right":"1%",width:"33%"},attrs:{label:e.$t("usercenter.usermail1")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.usermail,callback:function(t){e.$set(e.userInfo,"usermail",t)},expression:"userInfo.usermail"}})],1)],1),e._v(" "),s("el-form",{staticStyle:{display:"flex",width:"100%"},attrs:{"label-position":e.labelPosition,"label-width":"120px",model:e.userInfo}},[s("el-form-item",{staticStyle:{width:"33%"},attrs:{label:e.$t("usercenter.company")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.customername,callback:function(t){e.$set(e.userInfo,"customername",t)},expression:"userInfo.customername"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"2%",width:"33%"},attrs:{label:e.$t("usercenter.country")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.country,callback:function(t){e.$set(e.userInfo,"country",t)},expression:"userInfo.country"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-right":"1%",width:"33%"},attrs:{label:e.$t("usercenter.prio")}},[s("el-input",{attrs:{disabled:"",value:"zh"==e.i8n?e.userInfo.prio:e.userInfo.enprio}})],1)],1)],1),e._v(" "),3==e.contrForPrionum||4==e.contrForPrionum||5==e.contrForPrionum?s("el-tab-pane",{attrs:{label:e.$t("usercenter.Authoritymanagement")}},[s("el-form",{staticStyle:{display:"flex",width:"100%"},attrs:{"label-position":e.labelPosition,"label-width":"180px",model:e.userInfo}},[s("el-form-item",{staticStyle:{width:"32%","margin-left":"0","margin-right":"0"},attrs:{label:e.$t("usercenter.Accessrights")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.accpriostr,callback:function(t){e.$set(e.userInfo,"accpriostr",t)},expression:"userInfo.accpriostr"}})],1),e._v(" "),3==e.contrForPrionum||4==e.contrForPrionum||5==e.contrForPrionum?s("el-form-item",{staticStyle:{"margin-left":"2%",width:"32%"},attrs:{label:e.$t("usercenter.Setlogo")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.logopriostr,callback:function(t){e.$set(e.userInfo,"logopriostr",t)},expression:"userInfo.logopriostr"}})],1):e._e(),e._v(" "),3==e.contrForPrionum||4==e.contrForPrionum?s("el-form-item",{staticStyle:{"margin-left":"0",width:"32%"},attrs:{label:e.$t("companymanagement.item31")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.validtime,callback:function(t){e.$set(e.userInfo,"validtime",t)},expression:"userInfo.validtime"}})],1):e._e()],1),e._v(" "),3==e.contrForPrionum||4==e.contrForPrionum?s("el-form",{staticStyle:{display:"flex",width:"100%"},attrs:{"label-position":e.labelPosition,"label-width":"180px",model:e.userInfo}},[s("el-form-item",{staticStyle:{width:"32%","margin-left":"0","margin-right":"0"},attrs:{label:e.$t("companymanagement.item5")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.projectnum,callback:function(t){e.$set(e.userInfo,"projectnum",t)},expression:"userInfo.projectnum"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"2%","margin-right":"0",width:"32%"},attrs:{label:e.$t("companymanagement.item6")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.mapnum,callback:function(t){e.$set(e.userInfo,"mapnum",t)},expression:"userInfo.mapnum"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"32%"},attrs:{label:e.$t("companymanagement.item7")}},[s("el-input",{attrs:{disabled:""},model:{value:e.userInfo.devnum,callback:function(t){e.$set(e.userInfo,"devnum",t)},expression:"userInfo.devnum"}})],1)],1):e._e()],1):e._e()],1),e._v(" "),s("el-form",{staticStyle:{display:"flex","margin-top":"2%",width:"100%","justify-content":"center"},attrs:{"label-position":e.labelPosition,model:e.userInfo}},[s("el-form-item",[s("el-button",{staticClass:"edit",attrs:{type:"primary"},on:{click:function(t){return e.editUser()}}},[e._v(e._s(e.$t("usercenter.editinfor")))]),e._v(" "),s("el-button",{staticClass:"edit",attrs:{type:"primary"},on:{click:function(t){return e.resetUserKeys()}}},[e._v(e._s(e.$t("usercenter.editpwd")))]),e._v(" "),e.deleteUser?e._e():s("el-button",{staticClass:"edit",attrs:{type:"primary",disabled:e.deleteUser},on:{click:function(t){return e.userDele()}}},[e._v(e._s(e.$t("usercenter.cancel")))]),e._v(" "),s("el-button",{staticClass:"out",attrs:{type:"primary"},on:{click:function(t){return e.logout()}}},[e._v(e._s(e.$t("usercenter.signout")))])],1)],1)],1),e._v(" "),s("el-dialog",{staticClass:"edit",staticStyle:{"test-align":"center"},attrs:{title:e.$t("usercenter.editinfor1"),visible:e.edit,width:"30%"},on:{"update:visible":function(t){e.edit=t},close:function(t){return e.editCancel("editData")}}},[s("el-form",{ref:"editData",staticClass:"demo-ruleForm",staticStyle:{"text-align":"left","margin-left":"10px"},attrs:{model:e.editData,"label-width":"120px",rules:e.editRules}},[s("el-form-item",{attrs:{label:e.$t("usercenter.user"),prop:""}},[s("el-input",{attrs:{disabled:"",placeholder:e.$t("usercenter.userrule")},model:{value:e.editData.username,callback:function(t){e.$set(e.editData,"username",t)},expression:"editData.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("usercenter.admintel"),prop:""}},[s("el-input",{attrs:{placeholder:e.$t("usercenter.admintelrule")},model:{value:e.editData.usertel,callback:function(t){e.$set(e.editData,"usertel",t)},expression:"editData.usertel"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("usercenter.usermail1"),prop:"usermail"}},[s("el-input",{attrs:{placeholder:e.$t("usercenter.usermail1rule")},model:{value:e.editData.usermail,callback:function(t){e.$set(e.editData,"usermail",t)},expression:"editData.usermail"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("usercenter.company"),prop:""}},[s("el-input",{attrs:{disabled:"",placeholder:e.$t("usercenter.company1rule")},model:{value:e.editData.customername,callback:function(t){e.$set(e.editData,"customername",t)},expression:"editData.customername"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("usercenter.country"),prop:""}},[s("el-input",{attrs:{disabled:"",placeholder:e.$t("usercenter.country1rule")},model:{value:e.editData.country,callback:function(t){e.$set(e.editData,"country",t)},expression:"editData.country"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("usercenter.prio")}},[s("el-select",{attrs:{value:"zh"==e.i8n?e.editData.prio:e.editData.enprio,clearable:"",filterable:"",placeholder:e.$t("usercenter.priorule"),disabled:""}},e._l(e.prioList,function(e){return s("el-option",{key:e.index,attrs:{label:e.value,value:e.index}})}),1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.editCancel("editData")}}},[e._v(e._s(e.$t("usercenter.cancel")))]),e._v(" "),s("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.editTrue("editData")}}},[e._v(e._s(e.$t("usercenter.confirm")))])],1)],1),e._v(" "),s("el-dialog",{staticClass:"passward",staticStyle:{"text-align":"center"},attrs:{title:e.$t("usercenter.editpwd"),width:"30%",visible:e.passwordTpl},on:{"update:visible":function(t){e.passwordTpl=t}}},[s("el-form",{ref:"passwordData",staticClass:"demo-ruleForm",staticStyle:{"text-align":"left","margin-left":"10px"},attrs:{model:e.passwordData,"label-width":"150px",rules:e.passwordRules}},[s("el-form-item",{attrs:{label:e.$t("usercenter.oldpwd"),prop:"managerkey"}},[s("el-input",{attrs:{"show-password":"",placeholder:e.$t("usercenter.oldpwdrule")},model:{value:e.passwordData.managerkey,callback:function(t){e.$set(e.passwordData,"managerkey",t)},expression:"passwordData.managerkey"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("usercenter.newpwd"),prop:"passwordNew"}},[s("el-input",{attrs:{"show-password":"",placeholder:e.$t("usercenter.newpwdrule")},model:{value:e.passwordData.passwordNew,callback:function(t){e.$set(e.passwordData,"passwordNew",t)},expression:"passwordData.passwordNew"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("usercenter.fixpwd"),prop:"passwordAgain"}},[s("el-input",{attrs:{"show-password":"",placeholder:e.$t("usercenter.fixpwdrule")},model:{value:e.passwordData.passwordAgain,callback:function(t){e.$set(e.passwordData,"passwordAgain",t)},expression:"passwordData.passwordAgain"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.passwordTpl=!1,e.loading=!1}}},[e._v(e._s(e.$t("usercenter.cancel")))]),e._v(" "),s("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.passwordTrue("passwordData")}}},[e._v(e._s(e.$t("usercenter.confirm")))])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var d=s("VU/8")(l,u,!1,function(e){s("pFp3")},"data-v-f9528b22",null);t.default=d.exports},pFp3:function(e,t){}});
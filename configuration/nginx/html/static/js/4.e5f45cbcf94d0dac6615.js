webpackJsonp([4],{"1qrF":function(t,e,a){t.exports=a.p+"static/img/信标.5d317b6.png"},"5u2I":function(t,e,a){t.exports=a.p+"static/img/人员资产.df37491.png"},"8J6a":function(t,e,a){t.exports=a.p+"static/img/楼层.d92ab3b.png"},Be3s:function(t,e,a){t.exports=a.p+"static/img/jinggao.e643419.png"},LixT:function(t,e){},XFPY:function(t,e,a){t.exports=a.p+"static/img/人数.150b822.png"},jJwd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),o=a("exGp"),r=a.n(o),i=a("Gu7T"),l=a.n(i),m=a("//Fk"),u=a.n(m),c=a("c/Tr"),d=a.n(c),_=a("I95x"),p=a.n(_),b=a("c2Ch"),h=(a("ktr9"),a("CXX0")),f=a("Mdwg"),v=a("WiOa"),y=a("nq2H"),g=a("T18w"),x=a("WMwB"),w=a("Umvz"),F=a("Mjwz"),S=a("zOBh"),C=a("2YZ9"),N=a("lUmj"),z=a("XLwt"),D=a("euw+"),k=a("80cN"),E=a("5tox"),$=(a("tcAE"),a("beD/")),A=a("lVyT"),B=a("8cSO"),T=a("ItK/"),I=a("eM/O"),L=a("yGLh"),O={name:"largescreen",data:function(){return{windowWidth:document.documentElement.clientWidth,windowHeight:document.documentElement.clientHeight,timezone:this.$store.state.intoProjectTimezone,attenFlag:this.$store.state.functionParts.attenFlag,tenantid_A:this.$store.state.userInfo.tenantid,tenantkey_A:this.$store.state.userInfo.tenantkey,userName:this.$store.state.userInfo.username,asset:this.$store.state.functionParts.asset,contrForPrionum:this.$store.state.userInfo.prionum,employee:this.$store.state.functionParts.employee,tbox:this.$store.state.functionParts.tbox,zoom:this.$store.state.mapZoom,longi:this.$store.state.longis,lati:this.$store.state.latis,mapCenter:[118.8,32],screenWidth:document.body.clientWidth,timer:!1,timerMap:null,getMap:!0,current:"",currentTable:"",devBatTimeNum:{},deviceData:{},devTypeNum:{},member_indoor_num:0,member_outdoor_num:0,tbox_indoor_num:0,tbox_outdoor_num:0,asset_indoor_num:0,asset_outdoor_num:0,alarmData:[],stateData:[],memberNum:{},maxbuild:{},maxground:{},totalpeople:"",totalalarm:"",total:{asset:"",vehicle:"",people:""},tableData:[],map:"",seeLayer:"",view:"",clusterSource:"",layerVetor:"",openlayersSource:"",mapInfos:"",floor:[],largest:[],devnumList:{blenum:0,gpsnum:0},timers:null,AllFences:[],vectorSource:null,fences:[]}},watch:{screenWidth:function(t){if(!this.timer){this.screenWidth=t,this.timer=!0;var e=this;setTimeout(function(){e.setColumn1(),e.setColumn2(),e.setColumn3(),e.setPie(),e.setCylinder(),e.timer=!1},500)}}},mounted:function(){var t=this;this.getTime(),"zh"==this.$store.state.i18n?this.openlayersSource=new v.b({url:"https://www.edwei.cn:8443/osm/{z}/{x}/{y}.png",crossOrigin:""}):this.openlayersSource=new v.b,this.$nextTick(function(){t.getReport(),t.getState(),t.getBuildingByProjectids(t.$store.state.projectid),t.timers=setInterval(function(){t.getReport(),t.getState(),t.getBuildingByProjectids(t.$store.state.projectid)},15e3)}),this.btnClick(),this.escape(),window.onresize=function(){t.screenWidth=document.body.clientWidth};var e=d()(document.querySelectorAll(".ultitle"));e.length>7&&(e.style.overflowY="none")},beforeDestroy:function(){clearInterval(this.timers),this.timers=null},methods:{getBuildingByProjectids:function(t){var e=this,a={projectid:t};Object(b._26)(a,this.tenantkey_A,this.tenantid_A,this.userName).then(function(t){1001==t.code&&(e.mapInfos=t.data,e.map?e.updateMap(e.map,e.mapInfos):e.initUserMap())})},tableRowClassName:function(t){var e=t.row;t.rowIndex;return"building"==e.type?"threeD-row":""},getTime:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();this.current=e+"-"+a+"-"+s},brk:function(){this.$router.push("/dashboard"),this.$store.state.largeScreen?this.$store.commit("changeWarningDialog",!0):this.$store.commit("changeWarningDialog",!1)},updateMap:function(t,e){for(var a=this,s=t.getLayers().getArray(),n=function(t){e.forEach(function(e){if(e.building==s[t].getSource().getFeatures()[0].values_.building){var n,o=e.devnum?e.devnum+a.$t("homepage.P"):"",r=e.assetnum?e.assetnum+a.$t("homepage.A"):"",i=e.tboxnum?e.tboxnum+a.$t("homepage.C"):"";""==o&&""==r&&""==i?n=e.building:(o&&r&&(o+=","),r&&i&&(r+=","),n=e.building+"/"+o+r+i),s[t].getSource().getFeatures()[0].values_.devnum=e.devnum,s[t].getSource().getFeatures()[0].values_.assetnum=e.assetnum,s[t].getSource().getFeatures()[0].values_.tboxnum=e.tboxnum,s[t].getSource().getFeatures()[0].setStyle(new F.c({image:new S.a({anchor:[.5,1],src:"../../../static/坐标.png",scale:1}),text:new C.a({text:n,font:"14px font-size",fill:new N.a({color:0!=e.devnum||0!=e.assetnum||0!=e.tboxnum&&null!=e.tboxnum?"red":"white",backgroundColor:"white"}),offsetY:10})}))}})},o=1;o<s.length;o++)n(o)},initUserMap:function(){var t=this;t.vectorSource=new B.a,this.seeLayer=[new f.a({className:"baseLayerClass",source:t.openlayersSource}),new T.b({source:t.vectorSource})],t.mapInfos.length>0?t.view=new h.b({center:Object(L.d)([t.longi,t.lati]),zoom:t.$store.state.mapZoom}):t.view=new h.b({center:Object(L.d)(t.mapCenter),zoom:14}),setTimeout(function(){if(t.map=new h.a({target:"mapback",layers:t.seeLayer,view:t.view,controls:Object(I.b)({zoom:!1,rotate:!1,attribution:!1}).extend([])}),t.map.getInteractions().forEach(function(t){t instanceof k.a?t.setActive(!1):t instanceof E.a?t.setActive(!1):t instanceof D.a&&t.setActive(!1)}),t.addLine(t.map),t.mapInfos.length>0)for(var e=0;e<t.mapInfos.length;e++)t.addIconMarkers(t.map,t.mapInfos[e]);t.showAllFence().then(function(){t.recreateFences()})},0)},recreateFences:function(){var t=this;this.vectorSource.clear(),this.AllFences.forEach(function(e){var a=e.coordinates,s=e.color,n=a.map(function(t){return Object(L.d)(t)}),o=new A.c([n]),r=new y.a({geometry:o,type:"fence"}),i=new y.a({geometry:o.getInteriorPoint(),number:e.num,type:"number"});r.setStyle(new $.e({fill:new N.a({color:t.hexToRgba(s,.5)}),stroke:new $.d({color:s,width:2})})),i.setStyle(new $.e({text:new C.a({text:String(e.num)+"人",font:"24px Calibri,sans-serif",fill:new N.a({color:"black"}),stroke:new $.d({color:"white",width:2})})})),t.vectorSource.addFeature(r),t.vectorSource.addFeature(i),t.fences.push({fenceFeature:r,numberFeature:i})})},updateNumber:function(t,e){if(this.fences&&this.fences[t]){null!==e&&void 0!==e||(e=0);var a=this.fences[t].numberFeature;a.set("number",e),a.getStyle().getText().setText(String(e)+"人"),this.vectorSource.changed()}},hexToRgba:function(t,e){var a=parseInt(t.slice(1),16);return"rgba("+(a>>16&255)+", "+(a>>8&255)+", "+(a>>0&255)+", "+e+")"},showAllFence:function(){var t=this,e=this;return new u.a(function(a){var s={projectid:t.$store.state.projectid};Object(b._49)(s,t.tenantkey_A,t.tenantid_A,t.userName).then(function(t){if(1001==t.code){var s=[];t.data.forEach(function(t){var e=[];t.list.forEach(function(t){e.push([t.pointX,t.pointY])}),s.push({coordinates:e,color:t.colour,id:t.id,num:t.num})}),e.AllFences=s}a()})})},addIconMarkers:function(t,e){var a,s,n=Object(L.d)([e.longi,e.lati]),o=new y.a({x:e.longi,y:e.lati,building:e.building,id:e.id,devnum:e.devnum,assetnum:e.assetnum,tboxnum:e.tboxnum,src:e.src,geometry:new g.a(n)}),r=new x.a({features:[o]}),i=e.devnum?e.devnum+this.$t("homepage.P"):"",l=e.assetnum?e.assetnum+this.$t("homepage.A"):"",m=e.tboxnum?e.tboxnum+this.$t("homepage.C"):"";""==i&&""==l&&""==m?s=e.building:(i&&l&&(i+=","),l&&m&&(l+=","),s=e.building+"/"+i+l+m),a=new F.c({image:new S.a({anchor:[.5,1],src:"../../../static/坐标.png",scale:1}),text:new C.a({text:s,font:"14px font-size",fill:new N.a({color:0!=e.devnum||0!=e.assetnum||0!=e.tboxnum&&null!=e.tboxnum?"red":"white",backgroundColor:"white"}),offsetY:10})});var u=new w.a({source:r,style:a});t.addLayer(u)},addLine:function(t){var e=new $.e({stroke:new $.d({color:"#AA8DC6",width:10})}),a=new A.a([[122.9272781486751,23.848426854398152],[122.40150850225844,22.133416341086654],[121.78811058143899,21.35728019637634],[120.18576499235964,19.5296047588327],[119.25521102926318,17.337282710181967],[119.05017371536066,14.734886033725882],[118.98708531108292,12.810689703255191],[118.07230344905598,10.88649337278446],[116.57395384745995,8.96229704231377],[111.37587218970845,3.8613280294327694],[110.27425959721639,2.809788736599442],[107.95320447327722,5.7617448175673145],[107.26213818712276,7.806878264206475],[108.44658415967254,8.693401446500248],[110.07396639858125,11.021809880631187],[110.90017584295029,13.225035065615302],[109.69841665114078,15.428260250599415],[107.99592446274401,17.531338836266087]]),s=new B.a({wrapX:!1}),n=new $.e({stroke:new $.d({color:[170,141,198,1],lineDash:[2,7]})});var o=new y.a({geometry:a,finished:!1,dashOffset:-8});function r(){return[n,new $.e({stroke:new $.d({color:[170,141,198,1],widht:5,lineDash:[2,7],lineDashOffset:o.get("dashOffset")})})]}o.setStyle(r()),s.addFeature(o);var i=new T.b({source:s,style:e});t.addLayer(i),setInterval(function(){var t=o.get("dashOffset");t=0==t?-8:t+1,o.set("dashOffset",t),o.setStyle(r())},100)},setColumn1:function(){var t=this.$echarts.init(document.getElementById("total1"));this.memberNum.asset_online_num=this.asset?this.memberNum.asset_online_num:0,this.memberNum.asset_sum_num=this.asset?this.memberNum.asset_sum_num:0;var e=0==this.memberNum.asset_sum_num?0:(this.memberNum.asset_online_num/this.memberNum.asset_sum_num*100).toFixed(2);this.total.asset=this.memberNum.asset_offline_num+this.memberNum.asset_online_num;var a=[Number(e)],s={tooltip:{trigger:"item"},title:[{text:"在线资产占比",x:"center",top:"50%",textStyle:{color:"#FFFFFF",fontSize:10,fontWeight:"100"}},{text:a+"%",x:"center",y:"35%",textStyle:{fontSize:14,color:"#FFFFFF",fontFamily:"DINAlternate-Bold, DINAlternate",foontWeight:"600"}}],backgroundColor:"transparent",polar:{radius:["80%","60%"],center:["50%","50%"]},angleAxis:{max:100,show:!1},radiusAxis:{type:"category",show:!0,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:[{name:"",type:"bar",roundCap:!0,barWidth:30,showBackground:!0,backgroundStyle:{color:"rgba(66, 66, 66, .3)"},data:a,coordinateSystem:"polar",itemStyle:{normal:{color:new z.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"#16CEB9"},{offset:1,color:"#6648FF"}])}}},{name:"",type:"pie",startAngle:80,radius:["55%"],hoverAnimation:!1,center:["50%","50%"],itemStyle:{color:"rgba(66, 66, 66, .1)",borderWidth:3,borderColor:"#5269EE"},data:[100]},{name:"",type:"pie",startAngle:80,radius:["45%"],hoverAnimation:!1,center:["50%","50%"],itemStyle:{color:"rgba(66, 66, 66, .1)",borderWidth:1,borderColor:"#5269EE"},data:[100]}]};t.setOption(s),t.resize()},setColumn2:function(){var t=this.$echarts.init(document.getElementById("total2"));this.memberNum.tbox_online_num=this.tbox?this.memberNum.tbox_online_num:0,this.memberNum.tbox_sum_num=this.tbox?this.memberNum.tbox_sum_num:0;var e=0==this.memberNum.tbox_sum_num?0:(this.memberNum.tbox_online_num/this.memberNum.tbox_sum_num*100).toFixed(2),a=[Number(e)];this.total.vehicle=this.memberNum.tbox_offline_num+this.memberNum.tbox_online_num;var s={tooltip:{trigger:"item"},title:[{text:"在线车辆占比",x:"center",top:"50%",textStyle:{color:"#FFFFFF",fontSize:10,fontWeight:"100"}},{text:a+"%",x:"center",y:"35%",textStyle:{fontSize:14,color:"#FFFFFF",fontFamily:"DINAlternate-Bold, DINAlternate",foontWeight:"600"}}],backgroundColor:"transparent",polar:{radius:["80%","60%"],center:["50%","50%"]},angleAxis:{max:100,show:!1},radiusAxis:{type:"category",show:!0,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:[{name:"",type:"bar",roundCap:!0,barWidth:30,showBackground:!0,backgroundStyle:{color:"rgba(66, 66, 66, .3)"},data:a,coordinateSystem:"polar",itemStyle:{normal:{color:new z.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"#16CEB9"},{offset:1,color:"#6648FF"}])}}},{name:"",type:"pie",startAngle:80,radius:["55%"],hoverAnimation:!1,center:["50%","50%"],itemStyle:{color:"rgba(66, 66, 66, .1)",borderWidth:3,borderColor:"#5269EE"},data:[100]},{name:"",type:"pie",startAngle:80,radius:["45%"],hoverAnimation:!1,center:["50%","50%"],itemStyle:{color:"rgba(66, 66, 66, .1)",borderWidth:1,borderColor:"#5269EE"},data:[100]}]};t.setOption(s),t.resize()},setColumn3:function(){var t=this.$echarts.init(document.getElementById("total3"));this.memberNum.member_online_num=this.employee?this.memberNum.member_online_num:0,this.memberNum.member_sum_num=this.employee?this.memberNum.member_sum_num:0;var e=0==this.memberNum.member_sum_num?0:(this.memberNum.member_online_num/this.memberNum.member_sum_num*100).toFixed(2);this.total.people=this.memberNum.member_offline_num+this.memberNum.member_online_num;this.tbox&&this.memberNum.tbox_offline_num;var a=[Number(e)],s={tooltip:{trigger:"item"},title:[{text:"在线人员占比",x:"center",top:"50%",textStyle:{color:"#FFFFFF",fontSize:10,fontWeight:"100"}},{text:a+"%",x:"center",y:"35%",textStyle:{fontSize:14,color:"#FFFFFF",fontFamily:"DINAlternate-Bold, DINAlternate",foontWeight:"600"}}],backgroundColor:"transparent",polar:{radius:["80%","60%"],center:["50%","50%"]},angleAxis:{max:100,show:!1},radiusAxis:{type:"category",show:!0,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:[{name:"",type:"bar",roundCap:!0,barWidth:30,showBackground:!0,backgroundStyle:{color:"rgba(66, 66, 66, .3)"},data:a,coordinateSystem:"polar",itemStyle:{normal:{color:new z.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"#16CEB9"},{offset:1,color:"#6648FF"}])}}},{name:"",type:"pie",startAngle:80,radius:["55%"],hoverAnimation:!1,center:["50%","50%"],itemStyle:{color:"rgba(66, 66, 66, .1)",borderWidth:3,borderColor:"#5269EE"},data:[100]},{name:"",type:"pie",startAngle:80,radius:["45%"],hoverAnimation:!1,center:["50%","50%"],itemStyle:{color:"rgba(66, 66, 66, .1)",borderWidth:1,borderColor:"#5269EE"},data:[100]}]};t.setOption(s),t.resize()},setPie:function(){var t=this.$echarts.init(document.getElementById("pieEcharts")),e={legend:{bottom:"16%",itemWidth:8,itemHeight:10,textStyle:{color:"white"}},series:[{name:"外层",type:"pie",radius:["30%","60%"],center:["center","40%"],roseType:"radius",itemStyle:{borderRadius:100},data:[{value:Number(this.devBatTimeNum.bat_0_20),name:"电量<20%",itemStyle:{color:"#d72a14"}},{value:Number(this.devBatTimeNum.bat_20_60),name:"电量>20%",itemStyle:{color:"#E1D95B"}},{value:Number(this.devBatTimeNum.bat_60_100),name:"电量>60%",itemStyle:{color:"#52ca52"}}]},{name:"内层",type:"pie",radius:"40",center:["center","40%"],itemStyle:{borderRadius:100},data:[{value:Number(this.devTypeNum.inuse_yes),name:"已使用",itemStyle:{color:"yellow"}},{value:Number(this.devTypeNum.inuse_no),name:"未使用",itemStyle:{color:"orange"}}]}]};t.setOption(e),t.resize()},setCylinder:function(){var t=this.$echarts.init(document.getElementById("Column")),e=this.stateData?[this.stateData.beacon_low_3day,this.stateData.beacon_more_3day,this.stateData.beacon_time_unknown,this.stateData.bat_60_100,this.stateData.bat_20_60,this.stateData.bat_0_20]:"",a=Math.max.apply(Math,l()(e)),s=Math.ceil(a/100)*(a<50?50:100),n=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],o=[{type:"linear",x:1,x2:1,y:0,y2:1,colorStops:[{offset:1,color:"transparent"},{offset:0,color:"rgb(82,202,82)"}]},{type:"linear",x:0,x2:0,y:0,y2:1,colorStops:[{offset:.8,color:"transparent"},{offset:0,color:"rgb(225,217,91)"}]},{type:"linear",x:0,x2:0,y:0,y2:1,colorStops:[{offset:.8,color:"transparent"},{offset:0,color:"rgb(215,42,20)"}]},{type:"linear",x:1,x2:1,y:0,y2:1,colorStops:[{offset:1,color:"transparent"},{offset:0,color:"rgb(82,202,82)"}]},{type:"linear",x:0,x2:0,y:0,y2:1,colorStops:[{offset:.8,color:"transparent"},{offset:0,color:"rgb(225,217,91)"}]},{type:"linear",x:0,x2:0,y:0,y2:1,colorStops:[{offset:.8,color:"transparent"},{offset:0,color:"rgb(215,42,20"}]}],r={backgroundColor:"transparent",width:"80%",height:"80%",xAxis:{nameTextStyle:{color:"#FFFFFF"},data:["三天内被扫描","三天内未被扫描","从未被扫描过",">60%",">20%","<20%"].map(function(t,e){return{value:t,textStyle:{color:n[e]}}}),show:!0,type:"category",axisLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.4)"},symbol:["none","arrow"],symbolOffset:[0,25]},splitLine:{show:!1,lineStyle:{color:"rgba(255,255,255,0.2)"}},axisLabel:{rotate:30,interval:"auto",fontSize:10}},yAxis:{show:!0,splitNumber:5,max:s,axisLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.4)"}},splitLine:{show:!1,lineStyle:{color:"rgba(255,255,255,0.2)"}},axisLabel:{color:"#FFFFFF"}},grid:{top:"10%",right:"10%",containLabel:!0},series:[{type:"bar",barWidth:30,symbolOffset:["10%","50%"],itemStyle:{normal:{color:function(t){return o[t.dataIndex%3]}}},label:{show:!0,position:"top",color:"#ffffff",fontSize:12,formatter:function(t){return t.value},offset:[0,-5],align:"center"},data:e},{z:3,type:"pictorialBar",symbolPosition:"end",data:[this.stateData?this.stateData.beacon_low_3day:""],symbolOffset:["0%","-50%"],symbolSize:[30,9],itemStyle:{normal:{borderWidth:0,color:function(t){return"rgb(82,202,82)"}}}},{z:3,type:"pictorialBar",symbolPosition:"end",data:["",this.stateData?this.stateData.beacon_more_3day:""],symbolOffset:["0%","-50%"],symbolSize:[30,9],itemStyle:{normal:{borderWidth:0,color:function(t){return"rgb(225,217,91)"}}}},{z:3,type:"pictorialBar",symbolPosition:"end",data:["","",this.stateData?this.stateData.beacon_time_unknown:""],symbolOffset:["0%","-50%"],symbolSize:[30,9],itemStyle:{normal:{borderWidth:0,color:function(t){return"rgb(215,42,20)"}}}},{z:3,type:"pictorialBar",symbolPosition:"end",data:["","","",this.stateData?this.stateData.bat_60_100:""],symbolOffset:["0%","-50%"],symbolSize:[30,9],itemStyle:{normal:{borderWidth:0,color:function(t){return"rgb(82,202,82)"}}}},{z:3,type:"pictorialBar",symbolPosition:"end",data:["","","","",this.stateData?this.stateData.bat_20_60:""],symbolOffset:["0%","-50%"],symbolSize:[30,9],itemStyle:{normal:{borderWidth:0,color:function(t){return"rgb(225,217,91)"}}}},{z:3,type:"pictorialBar",symbolPosition:"end",data:["","","","","",this.stateData?this.stateData.bat_0_20:""],symbolOffset:["0%","-50%"],symbolSize:[30,9],itemStyle:{normal:{borderWidth:0,color:function(t){return"rgb(215,42,20)"}}}},{z:4,type:"pictorialBar",data:[this.stateData?this.stateData.beacon_low_3day:""],symbolOffset:["0%","0%"],symbolSize:[30,9],itemStyle:{normal:{color:function(t){return"rgb(82,202,82,0.3)"}}}},{z:4,type:"pictorialBar",data:["",this.stateData?this.stateData.beacon_more_3day:""],symbolOffset:["0%","0%"],symbolSize:[30,9],itemStyle:{normal:{color:function(t){return"rgb(225,217,91,0.3)"}}}},{z:4,type:"pictorialBar",data:["","",this.stateData?this.stateData.beacon_time_unknown:""],symbolOffset:["0%","0%"],symbolSize:[30,9],itemStyle:{normal:{color:function(t){return"rgb(215,42,20,0.3)"}}}},{z:4,type:"pictorialBar",data:["","","",this.stateData?this.stateData.bat_60_100:""],symbolOffset:["0%","0%"],symbolSize:[30,9],itemStyle:{normal:{color:function(t){return"rgb(82,202,82,0.3)"}}}},{z:4,type:"pictorialBar",data:["","","","",this.stateData?this.stateData.bat_20_60:""],symbolOffset:["0%","0%"],symbolSize:[30,9],itemStyle:{normal:{color:function(t){return"rgb(225,217,91,0.3)"}}}},{z:4,type:"pictorialBar",data:["","","","","",this.stateData?this.stateData.bat_0_20:""],symbolOffset:["0%","0%"],symbolSize:[30,9],itemStyle:{normal:{color:function(t){return"rgb(215,42,20,0.3)"}}}}]};t.setOption(r),t.resize()},getReport:function(){var t=this;return r()(n.a.mark(function e(){var a,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,s={projectid:t.$store.state.projectid,tenantid:t.$store.state.userInfo.superid,timezone:t.timezone,attenFlag:t.attenFlag},e.next=4,Object(b._54)(s,a.tenantkey_A,a.tenantid_A,a.userName).then(function(e){if(1001==e.code){e.data.fenceList.forEach(function(t){var e=a.AllFences.findIndex(function(e){return e.id===t.id});a.updateNumber(e,t.num)}),a.member_indoor_num=e.data.memberIndoorNum,a.member_outdoor_num=e.data.memberOutdoorNum,a.tbox_indoor_num=e.data.tboxIndoorNum,a.tbox_outdoor_num=e.data.tboxOutdoorNum,a.asset_indoor_num=e.data.assetIndoorNum,a.asset_outdoor_num=e.data.assetOutdoorNum,a.alarmData=[{type:1,typestr:t.$t("homepage.SOSalert"),warn_status1_num:0,warn_status2_num:0},{type:1,typestr:t.$t("homepage.gatherwarn"),warn_status1_num:0,warn_status2_num:0},{type:1,typestr:t.$t("homepage.crosswarn"),warn_status1_num:0,warn_status2_num:0},{type:1,typestr:t.$t("homepage.strandedwarn"),warn_status1_num:0,warn_status2_num:0},{type:1,typestr:t.$t("homepage.Unusuallystill"),warn_status1_num:0,warn_status2_num:0},{type:1,typestr:t.$t("warning.Tilt"),warn_status1_num:0,warn_status2_num:0},{type:1,typestr:t.$t("warning.Dumpalarm"),warn_status1_num:0,warn_status2_num:0},{type:1,typestr:t.$t("warning.Firealarm"),warn_status1_num:0,warn_status2_num:0}],e.data.warnNumList.length>0&&a.alarmData.forEach(function(t){e.data.warnNumList.forEach(function(e){t.typestr!=e.typestr&&t.typestr!=e.entype||(t.warn_status1_num=e.warn_status1_num,t.warn_status2_num=e.warn_status2_num)})}),a.memberNum=e.data,a.memberNum1=a.employee?e.data.member_sum_num:0,a.memberNum2=a.asset?e.data.asset_sum_num:0,a.memberNum3=a.tbox?e.data.tbox_sum_num:0,a.setColumn1(),a.setColumn2(),a.setColumn3(),t.maxbuild=e.data.max_num_build[0],t.maxground=e.data.max_num_ground[0];var s=[],n=[],o=[];e.data.buildList.forEach(function(t){o.push({name:t.building,devnum:t.devnum,assetnum:t.assetnum,alarmnum:t.alarmnum,type:"building"}),t.list.forEach(function(t){(t.devnum||t.assetnum||t.alarmnum)&&o.push({name:t.name,devnum:t.devnum,assetnum:t.assetnum,alarmnum:t.alarmnum,type:"ground"}),s.push(t.devnum),n.push(t.alarmnum)})}),a.tableData=o,a.currentTable=a.getTimeTable(),s=s.reduce(function(t,e){return t+e},0),n=n.reduce(function(t,e){return t+e},0),t.totalpeople=s,t.totalalarm=n}});case 4:case"end":return e.stop()}},e,t)}))()},devNum:function(t){return 0==t.devnum?"0":t.devnum},assetNum:function(t){return 0==t.assetnum?"0":t.assetnum},alarmNum:function(t){return 0==t.alarmnum?"0":t.assetnum},getTimeTable:function(){var t=new Date;return t.getMonth()+1+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},getState:function(){var t=this;return r()(n.a.mark(function e(){var a,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,s={projectid:t.$store.state.projectid,tenantid:t.$store.state.userInfo.superid,timezone:t.timezone,attenFlag:a.attenFlag},e.next=4,Object(b._53)(s,t.tenantkey_A,t.tenantid_A,t.userName).then(function(e){1001==e.code&&(e.data.devTypeNum?a.devTypeNum=e.data.devTypeNum:a.devTypeNum="",e.data.devBatTimeNum&&(a.devBatTimeNum=e.data.devBatTimeNum),t.setPie(),t.stateData=e.data.beaconBatTimeNum,t.setCylinder())});case 4:case"end":return e.stop()}},e,t)}))()},btnClick:function(){var t=document.getElementById("content");this.isFullscreen()||(t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen())},exitFullScreen:function(){var t=document.exitFullScreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;t&&(t.call(document),this.brk())},isFullscreen:function(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||!1},escape:function(){var t=this;window.addEventListener("fullscreenchange",function(){0==p.a.isFullscreen&&t.brk()})},destroyed:function(){clearInterval(this.timerMap),this.timerMap=null}}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"LargeScreen",attrs:{id:"content"}},[s("div",{staticClass:"header"},[s("span",[t._v(t._s(t.current))]),t._v(" "),s("div",{staticClass:"rct"},[t._v("\n      "+t._s(t.$store.state.intoProjectName)+"\n    ")]),t._v(" "),s("div",{staticClass:"return",on:{click:t.brk}},[t._v("返回")])]),t._v(" "),s("div",{attrs:{id:"mapback"}}),t._v(" "),s("div",{staticClass:"frameBox"},[s("div",{staticClass:"bottom"},[s("div",{staticClass:"frame1"},[s("div",{staticClass:"frame1_box"},[s("div",{staticClass:"floorlist"},[s("p",{staticClass:"topline"}),t._v(" "),s("p",{staticClass:"floorlistTop"},[s("span",[t._v("总人数："+t._s(t.totalpeople))]),t._v(" "),s("span",[t._v("告警数："+t._s(t.totalalarm))]),t._v(" "),s("span",[t._v("更新时间："+t._s(t.currentTable))])]),t._v(" "),s("div",{staticClass:"ultitle"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[s("el-table-column",{attrs:{prop:"name",label:"楼栋/楼层",width:"120",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"devnum",label:"人员",align:"center",formatter:t.devNum}}),t._v(" "),s("el-table-column",{attrs:{prop:"assetnum",label:"资产",align:"center",formatter:t.assetNum}}),t._v(" "),s("el-table-column",{attrs:{prop:"alarmnum",label:"告警",align:"center",formatter:t.alarmNum}})],1)],1)]),t._v(" "),s("div",{staticClass:"all_num"},[s("div",{staticClass:"indoor"},[t._m(0),t._v(" "),s("div",{staticClass:"num_box"},[s("img",{attrs:{src:a("XFPY"),alt:"",srcset:""}}),t._v(" "),s("p",[t._v("室内人数")]),t._v(" "),s("p",{staticClass:"num"},[t._v(t._s(t.member_indoor_num))])]),t._v(" "),s("div",{staticClass:"num_box"},[s("img",{attrs:{src:a("lKSx"),alt:"",srcset:""}}),t._v(" "),s("p",[t._v("室内资产")]),t._v(" "),s("p",{staticClass:"num"},[t._v(t._s(t.asset_indoor_num))])]),t._v(" "),s("div",{staticClass:"num_box"},[s("img",{attrs:{src:a("slp2"),alt:"",srcset:""}}),t._v(" "),s("p",[t._v("室内车辆")]),t._v(" "),s("p",{staticClass:"num"},[t._v(t._s(t.tbox_indoor_num))])])]),t._v(" "),s("div",{staticClass:"outdoor"},[t._m(1),t._v(" "),s("div",{staticClass:"num_box"},[s("img",{attrs:{src:a("XFPY"),alt:"",srcset:""}}),t._v(" "),s("p",[t._v("室外人数")]),t._v(" "),s("p",{staticClass:"num"},[t._v(t._s(t.member_outdoor_num))])]),t._v(" "),s("div",{staticClass:"num_box"},[s("img",{attrs:{src:a("lKSx"),alt:"",srcset:""}}),t._v(" "),s("p",[t._v("室外资产")]),t._v(" "),s("p",{staticClass:"num"},[t._v(t._s(t.asset_outdoor_num))])]),t._v(" "),s("div",{staticClass:"num_box"},[s("img",{attrs:{src:a("slp2"),alt:"",srcset:""}}),t._v(" "),s("p",[t._v("室外车辆")]),t._v(" "),s("p",{staticClass:"num"},[t._v(t._s(t.tbox_outdoor_num))])])])])]),t._v(" "),s("div",{staticClass:"mostpeople"},[s("div",{staticClass:"most1"},[s("p",{staticClass:"most_title"},[t._v("人数最多的楼栋")]),t._v(" "),s("p",{staticClass:"most_floor"},[t._v("\n              "+t._s(t.maxbuild?t.maxbuild.building:"暂无数据")+"\n            ")]),t._v(" "),s("p",{staticClass:"realTime"},[t._v("\n              实时数据 人数："+t._s(t.maxbuild?t.maxbuild.num:"暂无数据")+"\n            ")]),t._v(" "),t._m(2)]),t._v(" "),s("div",{staticClass:"most2"},[s("p",{staticClass:"most_title"},[t._v("人数最多的楼层")]),t._v(" "),s("p",{staticClass:"most_floor"},[t._v("\n              "+t._s(t.maxbuild?t.maxbuild.building:"暂无数据")+"/"+t._s(t.maxground?t.maxground.groundname:"暂无数据")+"\n            ")]),t._v(" "),s("p",{staticClass:"realTime"},[t._v("\n              实时数据 人数："+t._s(t.maxground?t.maxbuild.num:"暂无数据")+"\n            ")]),t._v(" "),t._m(3)])])]),t._v(" "),s("div",{staticClass:"frame2"},[s("div",{staticClass:"middle"},[s("div",{staticClass:"middle_left"},[t._m(4),t._v(" "),s("div",{staticClass:"flexCol"},[t._m(5),t._v(" "),s("ul",{staticClass:"alarmUl"},t._l(t.alarmData,function(e,a){return s("li",{key:a,staticClass:"alarmLi"},[s("span",[t._v(t._s(e.typestr))]),t._v(" "),s("span",[t._v(t._s(e.warn_status1_num))]),t._v(" "),s("span",[t._v(t._s(e.warn_status2_num))])])}),0)])]),t._v(" "),t._m(6)])]),t._v(" "),s("div",{staticClass:"frame3"},[s("div",{staticClass:"property"},[t._m(7),t._v(" "),t._m(8),t._v(" "),s("ul",{staticClass:"totalText"},[s("li",[t._v("总数："+t._s(t.total.asset||0))]),t._v(" "),s("li",[t._v("总数："+t._s(t.total.vehicle||0))]),t._v(" "),s("li",[t._v("总数："+t._s(t.total.people||0))])]),t._v(" "),s("ul",{staticClass:"foreBox"},[s("li",{staticClass:"foreBox_li"},[s("span",[t._v("设备总数")]),t._v(" "),s("div",[t._v("\n                "+t._s(t.devTypeNum.dev_online+t.devTypeNum.dev_offline+t.devTypeNum.dev_unknown||0)+"\n              ")])]),t._v(" "),s("li",{staticClass:"foreBox_li"},[s("span",[t._v("在线设备")]),t._v(" "),s("div",[t._v(t._s(t.devTypeNum.dev_online||0))])]),t._v(" "),s("li",{staticClass:"foreBox_li"},[s("span",[t._v("离线设备")]),t._v(" "),s("div",[t._v(t._s(t.devTypeNum.dev_offline||0))])]),t._v(" "),s("li",{staticClass:"foreBox_li"},[s("span",[t._v("从未上线设备")]),t._v(" "),s("div",[t._v(t._s(t.devTypeNum.dev_unknown||0))])])])]),t._v(" "),t._m(9)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:a("piCc"),alt:"",srcset:""}}),this._v(" "),e("p",{staticClass:"title"},[this._v("室内")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:a("qEyU"),alt:"",srcset:""}}),this._v(" "),e("p",{staticClass:"title"},[this._v("室外")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imgBox"},[e("img",{attrs:{src:a("pS1o"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"imgBox"},[e("img",{attrs:{src:a("8J6a"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("img",{attrs:{src:a("Be3s"),alt:""}}),this._v(" "),e("span",[this._v("警告类型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"middle_left_ul"},[e("li",[this._v("警告类型")]),this._v(" "),e("li",[this._v("未解除")]),this._v(" "),e("li",[this._v("已解除")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"middle_right"},[e("p",{staticClass:"title"},[e("img",{attrs:{src:a("1qrF"),alt:""}}),this._v(" "),e("span",[this._v("信标状态")])]),this._v(" "),e("div",{attrs:{id:"Column"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("img",{attrs:{src:a("5u2I"),alt:""}}),this._v(" "),e("span",[this._v("人员/资产/车辆")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"totalBox"},[e("div",{attrs:{id:"total1"}}),this._v(" "),e("div",{attrs:{id:"total2"}}),this._v(" "),e("div",{attrs:{id:"total3"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state"},[e("div",{staticClass:"title"},[e("div",{staticClass:"imgs"}),this._v(" "),e("span",[this._v("设备状态")])]),this._v(" "),e("div",{attrs:{id:"pieEcharts"}})])}]};var j=a("VU/8")(O,W,!1,function(t){a("LixT")},"data-v-4fcb0150",null);e.default=j.exports},lKSx:function(t,e,a){t.exports=a.p+"static/img/资产.00b9622.png"},pS1o:function(t,e,a){t.exports=a.p+"static/img/楼栋.729fd3a.png"},piCc:function(t,e,a){t.exports=a.p+"static/img/室内.1b7435d.png"},qEyU:function(t,e,a){t.exports=a.p+"static/img/室外.1971ced.png"},slp2:function(t,e,a){t.exports=a.p+"static/img/车辆.d948c6e.png"},tcAE:function(t,e,a){var s,n,o,r;r=function(t,e){if(e){var a=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],s={color:a,title:{textStyle:{fontWeight:"normal",color:"#008acd"}},visualMap:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{iconStyle:{normal:{borderColor:a[0]}}},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{color:"#008acd",borderColor:"#008acd"},symbol:"emptyCircle",symbolSize:3},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},candlestick:{itemStyle:{color:"#d87a80",color0:"#2ec7c9"},lineStyle:{width:1,color:"#d87a80",color0:"#2ec7c9"},areaStyle:{color:"#2ec7c9",color0:"#b6a2de"}},scatter:{symbol:"circle",symbolSize:4},map:{itemStyle:{color:"#ddd"},areaStyle:{color:"#fe994e"},label:{color:"#d87a80"}},graph:{itemStyle:{color:"#d87a80"},linkStyle:{color:"#2ec7c9"}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}}};e.registerTheme("macarons",s)}else"undefined"!=typeof console&&console&&console.error},n=[e,a("XLwt")],void 0===(o="function"==typeof(s=r)?s.apply(e,n):s)||(t.exports=o)}});